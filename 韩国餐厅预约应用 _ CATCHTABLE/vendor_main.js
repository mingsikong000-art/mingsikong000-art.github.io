!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"catchtable-global-frontend@dev-20260128152728"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a64b3a12-1245-41bd-89af-94af758feb58",e._sentryDebugIdIdentifier="sentry-dbid-a64b3a12-1245-41bd-89af-94af758feb58")}catch(e){}}(),(self.webpackChunkcatchtable_front_renew=self.webpackChunkcatchtable_front_renew||[]).push([[121],{23(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},225(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(72559);const i=function(e,t){return e>t};var o=n(29008);const s=function(e){return e&&e.length?(0,r.A)(e,o.A,i):void 0}},241(e,t,n){"use strict";n.d(t,{A:()=>r});const r=n(41917).A.Symbol},411(e,t,n){"use strict";n.d(t,{A:()=>a,I:()=>s});var r=n(96540),i=n(74848);const o=r.createContext();const s=()=>r.useContext(o)??!1,a=function({value:e,...t}){return(0,i.jsx)(o.Provider,{value:e??!0,...t})}},813(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")}};return n.default.locale(r,null,!0),r}(n(74353))},836(e,t,n){"use strict";n.d(t,{A:()=>a,Q:()=>o});var r=n(96540),i=n(6774);function o(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s(e){if(r.isValidElement(e)||(0,i.Hy)(e)||!o(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=s(e[n])}),t}function a(e,t,n={clone:!0}){const l=n.clone?{...e}:e;return o(e)&&o(t)&&Object.keys(t).forEach(c=>{r.isValidElement(t[c])||(0,i.Hy)(t[c])?l[c]=t[c]:o(t[c])&&Object.prototype.hasOwnProperty.call(e,c)&&o(e[c])?l[c]=a(e[c],t[c],n):n.clone?l[c]=o(t[c])?s(t[c]):t[c]:l[c]=t[c]}),l}},882(e,t,n){"use strict";n.d(t,{Ay:()=>Gt});var r=n(31635),i=n(96540),o="-ms-",s="-moz-",a="-webkit-",l="comm",c="rule",u="decl",h="@keyframes",d=Math.abs,p=String.fromCharCode,f=Object.assign;function m(e){return e.trim()}function g(e,t){return(e=t.exec(e))?e[0]:e}function y(e,t,n){return e.replace(t,n)}function v(e,t,n){return e.indexOf(t,n)}function _(e,t){return 0|e.charCodeAt(t)}function b(e,t,n){return e.slice(t,n)}function w(e){return e.length}function x(e){return e.length}function S(e,t){return t.push(e),e}function E(e,t){return e.filter(function(e){return!g(e,t)})}var T=1,M=1,A=0,k=0,C=0,I="";function P(e,t,n,r,i,o,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:T,column:M,length:s,return:"",siblings:a}}function O(e,t){return f(P("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function R(e){for(;e.root;)e=O(e.root,{children:[e]});S(e,e.siblings)}function D(){return C=k>0?_(I,--k):0,M--,10===C&&(M=1,T--),C}function L(){return C=k<A?_(I,k++):0,M++,10===C&&(M=1,T++),C}function N(){return _(I,k)}function F(){return k}function z(e,t){return b(I,e,t)}function U(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function j(e){return T=M=1,A=w(I=e),k=0,[]}function B(e){return I="",e}function V(e){return m(z(k-1,Y(91===e?e+2:40===e?e+1:e)))}function H(e){for(;(C=N())&&C<33;)L();return U(e)>2||U(C)>3?"":" "}function $(e,t){for(;--t&&L()&&!(C<48||C>102||C>57&&C<65||C>70&&C<97););return z(e,F()+(t<6&&32==N()&&32==L()))}function Y(e){for(;L();)switch(C){case e:return k;case 34:case 39:34!==e&&39!==e&&Y(C);break;case 40:41===e&&Y(e);break;case 92:L()}return k}function G(e,t){for(;L()&&e+C!==57&&(e+C!==84||47!==N()););return"/*"+z(t,k-1)+"*"+p(47===e?e:L())}function q(e){for(;!U(N());)L();return z(e,k)}function W(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function K(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case"@namespace":case u:return e.return=e.return||e.value;case l:return"";case h:return e.return=e.value+"{"+W(e.children,r)+"}";case c:if(!w(e.value=e.props.join(",")))return""}return w(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function Z(e,t,n){switch(function(e,t){return 45^_(e,0)?(((t<<2^_(e,0))<<2^_(e,1))<<2^_(e,2))<<2^_(e,3):0}(e,t)){case 5103:return a+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:case 6391:case 5879:case 5623:case 6135:case 4599:return a+e+e;case 4855:return a+e.replace("add","source-over").replace("substract","source-out").replace("intersect","source-in").replace("exclude","xor")+e;case 4789:return s+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return a+e+s+e+o+e+e;case 5936:switch(_(e,t+11)){case 114:return a+e+o+y(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return a+e+o+y(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return a+e+o+y(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return a+e+o+e+e;case 6165:return a+e+o+"flex-"+e+e;case 5187:return a+e+y(e,/(\w+).+(:[^]+)/,a+"box-$1$2"+o+"flex-$1$2")+e;case 5443:return a+e+o+"flex-item-"+y(e,/flex-|-self/g,"")+(g(e,/flex-|baseline/)?"":o+"grid-row-"+y(e,/flex-|-self/g,""))+e;case 4675:return a+e+o+"flex-line-pack"+y(e,/align-content|flex-|-self/g,"")+e;case 5548:return a+e+o+y(e,"shrink","negative")+e;case 5292:return a+e+o+y(e,"basis","preferred-size")+e;case 6060:return a+"box-"+y(e,"-grow","")+a+e+o+y(e,"grow","positive")+e;case 4554:return a+y(e,/([^-])(transform)/g,"$1"+a+"$2")+e;case 6187:return y(y(y(e,/(zoom-|grab)/,a+"$1"),/(image-set)/,a+"$1"),e,"")+e;case 5495:case 3959:return y(e,/(image-set\([^]*)/,a+"$1$`$1");case 4968:return y(y(e,/(.+:)(flex-)?(.*)/,a+"box-pack:$3"+o+"flex-pack:$3"),/space-between/,"justify")+a+e+e;case 4200:if(!g(e,/flex-|baseline/))return o+"grid-column-align"+b(e,t)+e;break;case 2592:case 3360:return o+y(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(e,n){return t=n,g(e.props,/grid-\w+-end/)})?~v(e+(n=n[t].value),"span",0)?e:o+y(e,"-start","")+e+o+"grid-row-span:"+(~v(n,"span",0)?g(n,/\d+/):+g(n,/\d+/)-+g(e,/\d+/))+";":o+y(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(e){return g(e.props,/grid-\w+-start/)})?e:o+y(y(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return y(e,/(.+)-inline(.+)/,a+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(w(e)-1-t>6)switch(_(e,t+1)){case 109:if(45!==_(e,t+4))break;case 102:return y(e,/(.+:)(.+)-([^]+)/,"$1"+a+"$2-$3$1"+s+(108==_(e,t+3)?"$3":"$2-$3"))+e;case 115:return~v(e,"stretch",0)?Z(y(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return y(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,n,r,i,s,a,l){return o+n+":"+r+l+(i?o+n+"-span:"+(s?a:+a-+r)+l:"")+e});case 4949:if(121===_(e,t+6))return y(e,":",":"+a)+e;break;case 6444:switch(_(e,45===_(e,14)?18:11)){case 120:return y(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+a+(45===_(e,14)?"inline-":"")+"box$3$1"+a+"$2$3$1"+o+"$2box$3")+e;case 100:return y(e,":",":"+o)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return y(e,"scroll-","scroll-snap-")+e}return e}function J(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case u:return void(e.return=Z(e.value,e.length,n));case h:return W([O(e,{value:y(e.value,"@","@"+a)})],r);case c:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,function(t){switch(g(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":R(O(e,{props:[y(t,/:(read-\w+)/,":-moz-$1")]})),R(O(e,{props:[t]})),f(e,{props:E(n,r)});break;case"::placeholder":R(O(e,{props:[y(t,/:(plac\w+)/,":"+a+"input-$1")]})),R(O(e,{props:[y(t,/:(plac\w+)/,":-moz-$1")]})),R(O(e,{props:[y(t,/:(plac\w+)/,o+"input-$1")]})),R(O(e,{props:[t]})),f(e,{props:E(n,r)})}return""})}}function X(e){return B(Q("",null,null,null,[""],e=j(e),0,[0],e))}function Q(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,h=s,f=0,m=0,g=0,x=1,E=1,T=1,M=0,A="",k=i,C=o,I=r,P=A;E;)switch(g=M,M=L()){case 40:if(108!=g&&58==_(P,h-1)){-1!=v(P+=y(V(M),"&","&\f"),"&\f",d(c?a[c-1]:0))&&(T=-1);break}case 34:case 39:case 91:P+=V(M);break;case 9:case 10:case 13:case 32:P+=H(g);break;case 92:P+=$(F()-1,7);continue;case 47:switch(N()){case 42:case 47:S(te(G(L(),F()),t,n,l),l),5!=U(g||1)&&5!=U(N()||1)||!w(P)||" "===b(P,-1,void 0)||(P+=" ");break;default:P+="/"}break;case 123*x:a[c++]=w(P)*T;case 125*x:case 59:case 0:switch(M){case 0:case 125:E=0;case 59+u:-1==T&&(P=y(P,/\f/g,"")),m>0&&(w(P)-h||0===x&&47===g)&&S(m>32?ne(P+";",r,n,h-1,l):ne(y(P," ","")+";",r,n,h-2,l),l);break;case 59:P+=";";default:if(S(I=ee(P,t,n,c,u,i,a,A,k=[],C=[],h,o),o),123===M)if(0===u)Q(P,t,I,I,k,o,h,a,C);else{switch(f){case 99:if(110===_(P,3))break;case 108:if(97===_(P,2))break;default:u=0;case 100:case 109:case 115:}u?Q(e,I,I,r&&S(ee(e,I,I,0,0,i,a,A,i,k=[],h,C),C),i,C,h,a,r?k:C):Q(P,I,I,I,[""],C,0,a,C)}}c=u=m=0,x=T=1,A=P="",h=s;break;case 58:h=1+w(P),m=g;default:if(x<1)if(123==M)--x;else if(125==M&&0==x++&&125==D())continue;switch(P+=p(M),M*x){case 38:T=u>0?1:(P+="\f",-1);break;case 44:a[c++]=(w(P)-1)*T,T=1;break;case 64:45===N()&&(P+=V(L())),f=N(),u=h=w(A=P+=q(F())),M++;break;case 45:45===g&&2==w(P)&&(x=0)}}return o}function ee(e,t,n,r,i,o,s,a,l,u,h,p){for(var f=i-1,g=0===i?o:[""],v=x(g),_=0,w=0,S=0;_<r;++_)for(var E=0,T=b(e,f+1,f=d(w=s[_])),M=e;E<v;++E)(M=m(w>0?g[E]+" "+T:y(T,/&\f/g,g[E])))&&(l[S++]=M);return P(e,t,n,0===i?c:a,l,u,h,p)}function te(e,t,n,r){return P(e,t,n,l,p(C),b(e,2,-2),0,r)}function ne(e,t,n,r,i){return P(e,t,n,u,b(e,0,r),b(e,r+1,-1),r,i)}var re=n(83969),ie="undefined"!=typeof process&&("MISSING_ENV_VAR".REACT_APP_SC_ATTR||"MISSING_ENV_VAR".SC_ATTR)||"data-styled",oe="active",se="data-styled-version",ae="6.3.8",le="/*!sc*/\n",ce="undefined"!=typeof window&&"undefined"!=typeof document,ue=void 0===i.createContext,he=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY&&""!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY?"false"!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY&&"MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&""!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&("false"!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&"MISSING_ENV_VAR".SC_DISABLE_SPEEDY)),de=(new Set,Object.freeze([])),pe=Object.freeze({});function fe(e,t,n){return void 0===n&&(n=pe),e.theme!==n.theme&&e.theme||t||n.theme}var me=new Set(["a","abbr","address","area","article","aside","audio","b","bdi","bdo","blockquote","body","button","br","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","slot","small","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use"]),ge=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ye=/(^-|-$)/g;function ve(e){return e.replace(ge,"-").replace(ye,"")}var _e=/(a)(d)/gi,be=function(e){return String.fromCharCode(e+(e>25?39:97))};function we(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=be(t%52)+n;return(be(t%52)+n).replace(_e,"$1-$2")}var xe,Se=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Ee=function(e){return Se(5381,e)};function Te(e){return we(Ee(e)>>>0)}function Me(e){return e.displayName||e.name||"Component"}function Ae(e){return"string"==typeof e&&!0}var ke="function"==typeof Symbol&&Symbol.for,Ce=ke?Symbol.for("react.memo"):60115,Ie=ke?Symbol.for("react.forward_ref"):60112,Pe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Oe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Re={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},De=((xe={})[Ie]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xe[Ce]=Re,xe);function Le(e){return("type"in(t=e)&&t.type.$$typeof)===Ce?Re:"$$typeof"in e?De[e.$$typeof]:Pe;var t}var Ne=Object.defineProperty,Fe=Object.getOwnPropertyNames,ze=Object.getOwnPropertySymbols,Ue=Object.getOwnPropertyDescriptor,je=Object.getPrototypeOf,Be=Object.prototype;function Ve(e,t,n){if("string"!=typeof t){if(Be){var r=je(t);r&&r!==Be&&Ve(e,r,n)}var i=Fe(t);ze&&(i=i.concat(ze(t)));for(var o=Le(e),s=Le(t),a=0;a<i.length;++a){var l=i[a];if(!(l in Oe||n&&n[l]||s&&l in s||o&&l in o)){var c=Ue(t,l);try{Ne(e,l,c)}catch(e){}}}}return e}function He(e){return"function"==typeof e}function $e(e){return"object"==typeof e&&"styledComponentId"in e}function Ye(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Ge(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function qe(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function We(e,t,n){if(void 0===n&&(n=!1),!n&&!qe(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=We(e[r],t[r]);else if(qe(t))for(var r in t)e[r]=We(e[r],t[r]);return e}function Ke(e,t){Object.defineProperty(e,"toString",{value:t})}function Ze(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Je=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw Ze(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(le);return t},e}(),Xe=new Map,Qe=new Map,et=1,tt=function(e){if(Xe.has(e))return Xe.get(e);for(;Qe.has(et);)et++;var t=et++;return Xe.set(e,t),Qe.set(t,e),t},nt=function(e,t){et=t+1,Xe.set(e,t),Qe.set(t,e)},rt="style[".concat(ie,"][").concat(se,'="').concat(ae,'"]'),it=new RegExp("^".concat(ie,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),ot=function(e,t,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&e.registerName(t,r)},st=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(le),i=[],o=0,s=r.length;o<s;o++){var a=r[o].trim();if(a){var l=a.match(it);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(nt(u,c),ot(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},at=function(e){for(var t=document.querySelectorAll(rt),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(ie)!==oe&&(st(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function lt(){return n.nc}var ct=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(ie,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(ie,oe),r.setAttribute(se,ae);var s=lt();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},ut=function(){function e(e){this.element=ct(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw Ze(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),ht=function(){function e(e){this.element=ct(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),dt=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),pt=ce,ft={isServer:!ce,useCSSOMInjection:!he},mt=function(){function e(e,t,n){void 0===e&&(e=pe),void 0===t&&(t={});var i=this;this.options=(0,r.Cl)((0,r.Cl)({},ft),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&ce&&pt&&(pt=!1,at(this)),Ke(this,function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return Qe.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),s=t.getGroup(n);if(void 0===o||!o.size||0===s.length)return"continue";var a="".concat(ie,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),r+="".concat(s).concat(a,'{content:"').concat(l,'"}').concat(le)},o=0;o<n;o++)i(o);return r}(i)})}return e.registerId=function(e){return tt(e)},e.prototype.rehydrate=function(){!this.server&&ce&&at(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e((0,r.Cl)((0,r.Cl)({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new dt(n):t?new ut(n):new ht(n)}(this.options),new Je(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(tt(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(tt(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(tt(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),gt=/&/g,yt=47;function vt(e){if(-1===e.indexOf("}"))return!1;for(var t=e.length,n=0,r=0,i=!1,o=0;o<t;o++){var s=e.charCodeAt(o);if(0!==r||i||s!==yt||42!==e.charCodeAt(o+1))if(i)42===s&&e.charCodeAt(o+1)===yt&&(i=!1,o++);else if(34!==s&&39!==s||0!==o&&92===e.charCodeAt(o-1)){if(0===r)if(123===s)n++;else if(125===s&&--n<0)return!0}else 0===r?r=s:r===s&&(r=0);else i=!0,o++}return 0!==n||0!==r}function _t(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=_t(e.children,t)),e})}function bt(e){var t,n,r,i=void 0===e?pe:e,o=i.options,s=void 0===o?pe:o,a=i.plugins,l=void 0===a?de:a,u=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},h=l.slice();h.push(function(e){e.type===c&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(gt,n).replace(r,u))}),s.prefix&&h.push(J),h.push(K);var d=function(e,i,o,a){void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=function(e){if(!vt(e))return e;for(var t=e.length,n="",r=0,i=0,o=0,s=!1,a=0;a<t;a++){var l=e.charCodeAt(a);if(0!==o||s||l!==yt||42!==e.charCodeAt(a+1))if(s)42===l&&e.charCodeAt(a+1)===yt&&(s=!1,a++);else if(34!==l&&39!==l||0!==a&&92===e.charCodeAt(a-1)){if(0===o)if(123===l)i++;else if(125===l){if(--i<0){for(var c=a+1;c<t;){var u=e.charCodeAt(c);if(59===u||10===u)break;c++}c<t&&59===e.charCodeAt(c)&&c++,i=0,a=c-1,r=c;continue}0===i&&(n+=e.substring(r,a+1),r=a+1)}else 59===l&&0===i&&(n+=e.substring(r,a+1),r=a+1)}else 0===o?o=l:o===l&&(o=0);else s=!0,a++}if(r<t){var h=e.substring(r);vt(h)||(n+=h)}return n}(function(e){if(-1===e.indexOf("//"))return e;for(var t=e.length,n=[],r=0,i=0,o=0,s=0;i<t;){var a=e.charCodeAt(i);if(34!==a&&39!==a||0!==i&&92===e.charCodeAt(i-1))if(0===o)if(40===a&&i>=3&&108==(32|e.charCodeAt(i-1))&&114==(32|e.charCodeAt(i-2))&&117==(32|e.charCodeAt(i-3)))s=1,i++;else if(s>0)41===a?s--:40===a&&s++,i++;else if(a===yt&&i+1<t&&e.charCodeAt(i+1)===yt){for(i>r&&n.push(e.substring(r,i));i<t&&10!==e.charCodeAt(i);)i++;r=i}else i++;else i++;else 0===o?o=a:o===a&&(o=0),i++}return 0===r?e:(r<t&&n.push(e.substring(r)),n.join(""))}(e)),c=X(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);s.namespace&&(c=_t(c,s.namespace));var u,d=[];return W(c,function(e){var t=x(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}(h.concat((u=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&u(e)})))),d};return d.hash=l.length?l.reduce(function(e,t){return t.name||Ze(15),Se(e,t.name)},5381).toString():"",d}var wt=new mt,xt=bt(),St={shouldForwardProp:void 0,styleSheet:wt,stylis:xt},Et=ue?{Provider:function(e){return e.children},Consumer:function(e){return(0,e.children)(St)}}:i.createContext(St),Tt=(Et.Consumer,ue?{Provider:function(e){return e.children},Consumer:function(e){return(0,e.children)(void 0)}}:i.createContext(void 0));function Mt(){return ue?St:i.useContext(Et)}function At(e){if(ue||!i.useMemo)return e.children;var t=Mt().styleSheet,n=i.useMemo(function(){var n=t;return e.sheet?n=e.sheet:e.target&&(n=n.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(n=n.reconstructWithOptions({useCSSOMInjection:!1})),n},[e.disableCSSOMInjection,e.sheet,e.target,t]),r=i.useMemo(function(){return bt({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:e.stylisPlugins})},[e.enableVendorPrefixes,e.namespace,e.stylisPlugins]),o=i.useMemo(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:n,stylis:r}},[e.shouldForwardProp,n,r]);return i.createElement(Et.Provider,{value:o},i.createElement(Tt.Provider,{value:r},e.children))}var kt=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=xt);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Ke(this,function(){throw Ze(12,String(n.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=xt),this.name+e.hash},e}();function Ct(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||e in re.A||e.startsWith("--")?String(t).trim():"".concat(t,"px")}var It=function(e){return e>="A"&&e<="Z"};function Pt(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;It(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Ot=function(e){return null==e||!1===e||""===e},Rt=function(e){var t=[];for(var n in e){var i=e[n];e.hasOwnProperty(n)&&!Ot(i)&&(Array.isArray(i)&&i.isCss||He(i)?t.push("".concat(Pt(n),":"),i,";"):qe(i)?t.push.apply(t,(0,r.fX)((0,r.fX)(["".concat(n," {")],Rt(i),!1),["}"],!1)):t.push("".concat(Pt(n),": ").concat(Ct(n,i),";")))}return t};function Dt(e,t,n,r){return Ot(e)?[]:$e(e)?[".".concat(e.styledComponentId)]:He(e)?!He(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Dt(e(t),t,n,r):e instanceof kt?n?(e.inject(n,r),[e.getName(r)]):[e]:qe(e)?Rt(e):Array.isArray(e)?Array.prototype.concat.apply(de,e.map(function(e){return Dt(e,t,n,r)})):[e.toString()];var i}function Lt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(He(n)&&!$e(n))return!1}return!0}var Nt=Ee(ae),Ft=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Lt(e),this.componentId=t,this.baseHash=Se(Nt,t),this.baseStyle=n,mt.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n).className:"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=Ye(r,this.staticRulesId);else{var i=Ge(Dt(this.rules,e,t,n)),o=we(Se(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}r=Ye(r,o),this.staticRulesId=o}else{for(var a=Se(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var h=Ge(Dt(u,e,t,n));a=Se(a,h+c),l+=h}}if(l){var d=we(a>>>0);if(!t.hasNameForId(this.componentId,d)){var p=n(l,".".concat(d),void 0,this.componentId);t.insertRules(this.componentId,d,p)}r=Ye(r,d)}}return{className:r,css:"undefined"==typeof window?t.getTag().getGroup(tt(this.componentId)):""}},e}(),zt=ue?{Provider:function(e){return e.children},Consumer:function(e){return(0,e.children)(void 0)}}:i.createContext(void 0);zt.Consumer;var Ut={};new Set;function jt(e,t,n){var o=$e(e),s=e,a=!Ae(e),l=t.attrs,c=void 0===l?de:l,u=t.componentId,h=void 0===u?function(e,t){var n="string"!=typeof e?"sc":ve(e);Ut[n]=(Ut[n]||0)+1;var r="".concat(n,"-").concat(Te(ae+n+Ut[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):u,d=t.displayName,p=void 0===d?function(e){return Ae(e)?"styled.".concat(e):"Styled(".concat(Me(e),")")}(e):d,f=t.displayName&&t.componentId?"".concat(ve(t.displayName),"-").concat(t.componentId):t.componentId||h,m=o&&s.attrs?s.attrs.concat(c).filter(Boolean):c,g=t.shouldForwardProp;if(o&&s.shouldForwardProp){var y=s.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;g=function(e,t){return y(e,t)&&v(e,t)}}else g=y}var _=new Ft(n,f,o?s.componentStyle:void 0);function b(e,t){return function(e,t,n){var o=e.attrs,s=e.componentStyle,a=e.defaultProps,l=e.foldedComponentIds,c=e.styledComponentId,u=e.target,h=ue?void 0:i.useContext(zt),d=Mt(),p=e.shouldForwardProp||d.shouldForwardProp,f=fe(t,h,a)||pe,m=function(e,t,n){for(var i,o=(0,r.Cl)((0,r.Cl)({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var a=He(i=e[s])?i(o):i;for(var l in a)"className"===l?o.className=Ye(o.className,a[l]):"style"===l?o.style=(0,r.Cl)((0,r.Cl)({},o.style),a[l]):o[l]=a[l]}return"className"in t&&"string"==typeof t.className&&(o.className=Ye(o.className,t.className)),o}(o,t,f),g=m.as||u,y={};for(var v in m)void 0===m[v]||"$"===v[0]||"as"===v||"theme"===v&&m.theme===f||("forwardedAs"===v?y.as=m.forwardedAs:p&&!p(v,g)||(y[v]=m[v]));var _=function(e,t){var n=Mt();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,m),b=_.className,w=_.css,x=Ye(l,c);b&&(x+=" "+b),m.className&&(x+=" "+m.className),y[Ae(g)&&!me.has(g)?"class":"className"]=x,n&&(y.ref=n);var S=(0,i.createElement)(g,y);return ue&&w?i.createElement(i.Fragment,null,i.createElement("style",{precedence:"styled-components",href:"sc-".concat(c,"-").concat(b),children:w}),S):S}(w,e,t)}b.displayName=p;var w=i.forwardRef(b);return w.attrs=m,w.componentStyle=_,w.displayName=p,w.shouldForwardProp=g,w.foldedComponentIds=o?Ye(s.foldedComponentIds,s.styledComponentId):"",w.styledComponentId=f,w.target=o?s.target:e,Object.defineProperty(w,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=o?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)We(e,i[r],!0);return e}({},s.defaultProps,e):e}}),Ke(w,function(){return".".concat(w.styledComponentId)}),a&&Ve(w,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),w}function Bt(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var Vt=function(e){return Object.assign(e,{isCss:!0})};function Ht(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(He(e)||qe(e))return Vt(Dt(Bt(de,(0,r.fX)([e],t,!0))));var i=e;return 0===t.length&&1===i.length&&"string"==typeof i[0]?Dt(i):Vt(Dt(Bt(i,t)))}function $t(e,t,n){if(void 0===n&&(n=pe),!t)throw Ze(1,t);var i=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return e(t,n,Ht.apply(void 0,(0,r.fX)([i],o,!1)))};return i.attrs=function(i){return $t(e,t,(0,r.Cl)((0,r.Cl)({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},i.withConfig=function(i){return $t(e,t,(0,r.Cl)((0,r.Cl)({},n),i))},i}var Yt=function(e){return $t(jt,e)},Gt=Yt;me.forEach(function(e){Gt[e]=Yt(e)});!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Lt(e),mt.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(Ge(Dt(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&mt.registerId(this.componentId+e);var i=this.componentId+e;this.isStatic?n.hasNameForId(i,i)||this.createStyles(e,t,n,r):(this.removeStyles(e,n),this.createStyles(e,t,n,r))}}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=lt(),r=Ge([n&&'nonce="'.concat(n,'"'),"".concat(ie,'="true"'),"".concat(se,'="').concat(ae,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw Ze(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw Ze(2);var n=e.instance.toString();if(!n)return[];var o=((t={})[ie]="",t[se]=ae,t.dangerouslySetInnerHTML={__html:n},t),s=lt();return s&&(o.nonce=s),[i.createElement("style",(0,r.Cl)({},o,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new mt({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw Ze(2);return i.createElement(At,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw Ze(3)}})(),"__sc-".concat(ie,"__")},920(e,t,n){"use strict";var r=n(69675),i=n(58859),o=n(14803),s=n(80507),a=n(72271)||s||o;e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new r("Side channel does not contain "+i(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,n){e||(e=a()),e.set(t,n)}};return t}},1265(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}n.d(t,{A:()=>o});var i=r();i.withExtraArgument=r;const o=i},1321(e,t,n){"use strict";function r(e=[]){return([,t])=>t&&function(e,t=[]){if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(t,e)}n.d(t,{A:()=>r})},1522(e,t,n){"use strict";n.d(t,{$:()=>l});var r=n(12295),i=n(8448),o=n(62517),s=n(94323),a=n(94255);class l extends s.Q{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),c(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return u(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return u(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),(0,r.f8)(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const o=this.hasListeners();o&&h(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(t),!o||this.currentQuery===i&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();const s=this.computeRefetchInterval();!o||this.currentQuery===i&&this.options.enabled===n.enabled&&s===this.currentRefetchInterval||this.updateRefetchInterval(s)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),n=this.createResult(t,e);return function(e,t,n){if(n.keepPreviousData)return!1;if(void 0!==n.placeholderData)return t.isPlaceholderData;if(!(0,r.f8)(e.getCurrentResult(),t))return!0;return!1}(this,n,e)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(n=>{Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(r.lQ)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),r.S$||this.currentResult.isStale||!(0,r.gn)(this.options.staleTime))return;const e=(0,r.j3)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},e)}computeRefetchInterval(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!r.S$&&!1!==this.options.enabled&&(0,r.gn)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||o.m.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const n=this.currentQuery,i=this.options,o=this.currentResult,s=this.currentResultState,l=this.currentResultOptions,u=e!==n,p=u?e.state:this.currentQueryInitialState,f=u?this.currentResult:this.previousQueryResult,{state:m}=e;let g,{dataUpdatedAt:y,error:v,errorUpdatedAt:_,fetchStatus:b,status:w}=m,x=!1,S=!1;if(t._optimisticResults){const r=this.hasListeners(),o=!r&&c(e,t),s=r&&h(e,n,t,i);(o||s)&&(b=(0,a.v_)(e.options.networkMode)?"fetching":"paused",y||(w="loading")),"isRestoring"===t._optimisticResults&&(b="idle")}if(t.keepPreviousData&&!m.dataUpdatedAt&&null!=f&&f.isSuccess&&"error"!==w)g=f.data,y=f.dataUpdatedAt,w=f.status,x=!0;else if(t.select&&"undefined"!==typeof m.data)if(o&&m.data===(null==s?void 0:s.data)&&t.select===this.selectFn)g=this.selectResult;else try{this.selectFn=t.select,g=t.select(m.data),g=(0,r.pl)(null==o?void 0:o.data,g,t),this.selectResult=g,this.selectError=null}catch(A){0,this.selectError=A}else g=m.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof g&&"loading"===w){let e;if(null!=o&&o.isPlaceholderData&&t.placeholderData===(null==l?void 0:l.placeholderData))e=o.data;else if(e="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof e)try{e=t.select(e),this.selectError=null}catch(A){0,this.selectError=A}"undefined"!==typeof e&&(w="success",g=(0,r.pl)(null==o?void 0:o.data,e,t),S=!0)}this.selectError&&(v=this.selectError,g=this.selectResult,_=Date.now(),w="error");const E="fetching"===b,T="loading"===w,M="error"===w;return{status:w,fetchStatus:b,isLoading:T,isSuccess:"success"===w,isError:M,isInitialLoading:T&&E,data:g,dataUpdatedAt:y,error:v,errorUpdatedAt:_,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>p.dataUpdateCount||m.errorUpdateCount>p.errorUpdateCount,isFetching:E,isRefetching:E&&!T,isLoadingError:M&&0===m.dataUpdatedAt,isPaused:"paused"===b,isPlaceholderData:S,isPreviousData:x,isRefetchError:M&&0!==m.dataUpdatedAt,isStale:d(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,r.f8)(n,t))return;this.currentResult=n;const i={cache:!0};!1!==(null==e?void 0:e.listeners)&&(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,n="function"===typeof e?e():e;if("all"===n||!n&&!this.trackedProps.size)return!0;const r=new Set(null!=n?n:this.trackedProps);return this.options.useErrorBoundary&&r.add("error"),Object.keys(this.currentResult).some(e=>{const n=e;return this.currentResult[n]!==t[n]&&r.has(n)})})()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||(0,a.wm)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){i.j.batch(()=>{var t,n,r,i;if(e.onSuccess)null==(t=(n=this.options).onSuccess)||t.call(n,this.currentResult.data),null==(r=(i=this.options).onSettled)||r.call(i,this.currentResult.data,null);else if(e.onError){var o,s,a,l;null==(o=(s=this.options).onError)||o.call(s,this.currentResult.error),null==(a=(l=this.options).onSettled)||a.call(l,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function c(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&u(e,t,t.refetchOnMount)}function u(e,t,n){if(!1!==t.enabled){const r="function"===typeof n?n(e):n;return"always"===r||!1!==r&&d(e,t)}return!1}function h(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&d(e,n)}function d(e,t){return e.isStaleByTime(t.staleTime)}},2383(e,t,n){"use strict";n.d(t,{A:()=>d});var r=n(241),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r.A?r.A.toStringTag:void 0;const l=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i};var c=Object.prototype.toString;const u=function(e){return c.call(e)};var h=r.A?r.A.toStringTag:void 0;const d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":h&&h in Object(e)?l(e):u(e)}},2505(e,t,n){"use strict";n.d(t,{A:()=>u});const r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var i=n(25175),o=n(92049),s=n(41200),a=n(25353),l=n(54749),c=Object.prototype.hasOwnProperty;const u=function(e,t){var n=(0,o.A)(e),u=!n&&(0,i.A)(e),h=!n&&!u&&(0,s.A)(e),d=!n&&!u&&!h&&(0,l.A)(e),p=n||u||h||d,f=p?r(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,a.A)(g,m))||f.push(g);return f}},2694(e,t,n){"use strict";var r=n(6925);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},3449(e,t,n){"use strict";n.r(t),n.d(t,{NIL:()=>T,parse:()=>h,stringify:()=>s.A,v1:()=>c,v3:()=>b,v4:()=>w.A,v5:()=>E,validate:()=>u.A,version:()=>M});var r,i,o=n(43407),s=n(38823),a=0,l=0;const c=function(e,t,n){var c=t&&n||0,u=t||new Array(16),h=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){var p=e.random||(e.rng||o.A)();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var f=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:l+1,g=f-a+(m-l)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||f>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,l=m,i=d;var y=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;u[c++]=y>>>24&255,u[c++]=y>>>16&255,u[c++]=y>>>8&255,u[c++]=255&y;var v=f/4294967296*1e4&268435455;u[c++]=v>>>8&255,u[c++]=255&v,u[c++]=v>>>24&15|16,u[c++]=v>>>16&255,u[c++]=d>>>8|128,u[c++]=255&d;for(var _=0;_<6;++_)u[c+_]=h[_];return t||(0,s.A)(u)};var u=n(8227);const h=function(e){if(!(0,u.A)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function d(e,t,n){function r(e,r,i,o){if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"===typeof r&&(r=h(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var l=0;l<16;++l)i[o+l]=a[l];return i}return(0,s.A)(a)}try{r.name=e}catch(i){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function p(e){return 14+(e+64>>>9<<4)+1}function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function m(e,t,n,r,i,o){return f((s=f(f(t,e),f(r,o)))<<(a=i)|s>>>32-a,n);var s,a}function g(e,t,n,r,i,o,s){return m(t&n|~t&r,e,t,i,o,s)}function y(e,t,n,r,i,o,s){return m(t&r|n&~r,e,t,i,o,s)}function v(e,t,n,r,i,o,s){return m(t^n^r,e,t,i,o,s)}function _(e,t,n,r,i,o,s){return m(n^(t|~r),e,t,i,o,s)}const b=d("v3",48,function(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[p(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,l=r,c=i,u=o;n=g(n,r,i,o,e[s],7,-680876936),o=g(o,n,r,i,e[s+1],12,-389564586),i=g(i,o,n,r,e[s+2],17,606105819),r=g(r,i,o,n,e[s+3],22,-1044525330),n=g(n,r,i,o,e[s+4],7,-176418897),o=g(o,n,r,i,e[s+5],12,1200080426),i=g(i,o,n,r,e[s+6],17,-1473231341),r=g(r,i,o,n,e[s+7],22,-45705983),n=g(n,r,i,o,e[s+8],7,1770035416),o=g(o,n,r,i,e[s+9],12,-1958414417),i=g(i,o,n,r,e[s+10],17,-42063),r=g(r,i,o,n,e[s+11],22,-1990404162),n=g(n,r,i,o,e[s+12],7,1804603682),o=g(o,n,r,i,e[s+13],12,-40341101),i=g(i,o,n,r,e[s+14],17,-1502002290),n=y(n,r=g(r,i,o,n,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=y(o,n,r,i,e[s+6],9,-1069501632),i=y(i,o,n,r,e[s+11],14,643717713),r=y(r,i,o,n,e[s],20,-373897302),n=y(n,r,i,o,e[s+5],5,-701558691),o=y(o,n,r,i,e[s+10],9,38016083),i=y(i,o,n,r,e[s+15],14,-660478335),r=y(r,i,o,n,e[s+4],20,-405537848),n=y(n,r,i,o,e[s+9],5,568446438),o=y(o,n,r,i,e[s+14],9,-1019803690),i=y(i,o,n,r,e[s+3],14,-187363961),r=y(r,i,o,n,e[s+8],20,1163531501),n=y(n,r,i,o,e[s+13],5,-1444681467),o=y(o,n,r,i,e[s+2],9,-51403784),i=y(i,o,n,r,e[s+7],14,1735328473),n=v(n,r=y(r,i,o,n,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=v(o,n,r,i,e[s+8],11,-2022574463),i=v(i,o,n,r,e[s+11],16,1839030562),r=v(r,i,o,n,e[s+14],23,-35309556),n=v(n,r,i,o,e[s+1],4,-1530992060),o=v(o,n,r,i,e[s+4],11,1272893353),i=v(i,o,n,r,e[s+7],16,-155497632),r=v(r,i,o,n,e[s+10],23,-1094730640),n=v(n,r,i,o,e[s+13],4,681279174),o=v(o,n,r,i,e[s],11,-358537222),i=v(i,o,n,r,e[s+3],16,-722521979),r=v(r,i,o,n,e[s+6],23,76029189),n=v(n,r,i,o,e[s+9],4,-640364487),o=v(o,n,r,i,e[s+12],11,-421815835),i=v(i,o,n,r,e[s+15],16,530742520),n=_(n,r=v(r,i,o,n,e[s+2],23,-995338651),i,o,e[s],6,-198630844),o=_(o,n,r,i,e[s+7],10,1126891415),i=_(i,o,n,r,e[s+14],15,-1416354905),r=_(r,i,o,n,e[s+5],21,-57434055),n=_(n,r,i,o,e[s+12],6,1700485571),o=_(o,n,r,i,e[s+3],10,-1894986606),i=_(i,o,n,r,e[s+10],15,-1051523),r=_(r,i,o,n,e[s+1],21,-2054922799),n=_(n,r,i,o,e[s+8],6,1873313359),o=_(o,n,r,i,e[s+15],10,-30611744),i=_(i,o,n,r,e[s+6],15,-1560198380),r=_(r,i,o,n,e[s+13],21,1309151649),n=_(n,r,i,o,e[s+4],6,-145523070),o=_(o,n,r,i,e[s+11],10,-1120210379),i=_(i,o,n,r,e[s+2],15,718787259),r=_(r,i,o,n,e[s+9],21,-343485551),n=f(n,a),r=f(r,l),i=f(i,c),o=f(o,u)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(p(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))});var w=n(18562);function x(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function S(e,t){return e<<t|e>>>32-t}const E=d("v5",80,function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*l+4*u]<<24|e[64*l+4*u+1]<<16|e[64*l+4*u+2]<<8|e[64*l+4*u+3];a[l]=c}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<s;++h){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=a[h][p];for(var f=16;f<80;++f)d[f]=S(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);for(var m=n[0],g=n[1],y=n[2],v=n[3],_=n[4],b=0;b<80;++b){var w=Math.floor(b/20),E=S(m,5)+x(w,g,y,v)+_+t[w]+d[b]>>>0;_=v,v=y,y=S(g,30)>>>0,g=m,m=E}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+_>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}),T="00000000-0000-0000-0000-000000000000";const M=function(e){if(!(0,u.A)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},3576(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(96540);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},3594(e,t,n){"use strict";n.d(t,{qd:()=>l,wg:()=>u,y7:()=>c});var r=n(19282),i=n(47040),o=n(4693),s=n(14910);const a={};function l(e){const t=a[e];if(t)return t;let n=s.j[e];if((0,i.a3)(n))return a[e]=n.bind(s.j);const l=s.j.document;if(l&&"function"===typeof l.createElement)try{const t=l.createElement("iframe");t.hidden=!0,l.head.appendChild(t);const r=t.contentWindow;r?.[e]&&(n=r[e]),l.head.removeChild(t)}catch(c){o.T&&r.Yz.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,c)}return n?a[e]=n.bind(s.j):n}function c(e){a[e]=void 0}function u(...e){return l("setTimeout")(...e)}},4076(e,t,n){"use strict";function r(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(e=>n.searchParams.append("args[]",e)),`Minified MUI error #${e}; visit ${n} for the full message.`}n.d(t,{A:()=>r})},4146(e,t,n){"use strict";var r=n(44363),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var y=s[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{c(t,y,v)}catch(_){}}}}return t}},4692(e,t,n){"use strict";n.d(t,{z:()=>i});var r=n(14910);const i=(e=!0)=>{const t=r.j.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t}},4693(e,t,n){"use strict";n.d(t,{T:()=>r});const r="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},4894(e,t,n){"use strict";n.d(t,{A:()=>r});const r=(0,n(37796).A)()},4895(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"tr",weekdays:"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),months:"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),monthsShort:"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),weekStart:1,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},relativeTime:{future:"%s sonra",past:"%s \xf6nce",s:"birka\xe7 saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir g\xfcn",dd:"%d g\xfcn",M:"bir ay",MM:"%d ay",y:"bir y\u0131l",yy:"%d y\u0131l"},ordinal:function(e){return e+"."}};return n.default.locale(r,null,!0),r}(n(74353))},5054(e,t,n){"use strict";n.d(t,{E:()=>g});var r=n(12295),i=n(52904),o=n(8448),s=n(94255),a=n(91931);class l extends a.k{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||i.U,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||function(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,n="undefined"!==typeof t,r=n?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(e,t){const n=(0,r.pl)(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(r.lQ).catch(r.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>!1!==e.options.enabled)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,r.j3)(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var n,i;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!=t&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return null==(o=this.retryer)||o.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=(0,r.jY)(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},c=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};c(l);const u={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'")};var h;(c(u),null==(n=this.options.behavior)||n.onFetch(u),this.revertState=this.state,"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(i=u.fetchOptions)?void 0:i.meta))&&this.dispatch({type:"fetch",meta:null==(h=u.fetchOptions)?void 0:h.meta});const d=e=>{var t,n,r,i;((0,s.wm)(e)&&e.silent||this.dispatch({type:"error",error:e}),(0,s.wm)(e))||(null==(t=(n=this.cache.config).onError)||t.call(n,e,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,this.state.data,e,this));this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=(0,s.II)({fn:u.fetchFn,abort:null==a?void 0:a.abort.bind(a),onSuccess:e=>{var t,n,r,i;"undefined"!==typeof e?(this.setData(e),null==(t=(n=this.cache.config).onSuccess)||t.call(n,e,this),null==(r=(i=this.cache.config).onSettled)||r.call(i,e,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):d(new Error(this.queryHash+" data is undefined"))},onError:d,onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){this.state=(t=>{var n,r;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(n=e.meta)?n:null,fetchStatus:(0,s.v_)(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return(0,s.wm)(i)&&i.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),o.j.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}var c=n(94323);class u extends c.Q{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,n){var i;const o=t.queryKey,s=null!=(i=t.queryHash)?i:(0,r.F$)(o,t);let a=this.get(s);return a||(a=new l({cache:this,logger:e.getLogger(),queryKey:o,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(o)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(t=>t!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){o.j.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[n]=(0,r.b_)(e,t);return"undefined"===typeof n.exact&&(n.exact=!0),this.queries.find(e=>(0,r.MK)(n,e))}findAll(e,t){const[n]=(0,r.b_)(e,t);return Object.keys(n).length>0?this.queries.filter(e=>(0,r.MK)(n,e)):this.queries}notify(e){o.j.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){o.j.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){o.j.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}var h=n(36801);class d extends c.Q{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,n){const r=new h.s({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){o.j.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find(t=>(0,r.nJ)(e,t))}findAll(e){return this.mutations.filter(t=>(0,r.nJ)(e,t))}notify(e){o.j.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=(null!=(e=this.resuming)?e:Promise.resolve()).then(()=>{const e=this.mutations.filter(e=>e.state.isPaused);return o.j.batch(()=>e.reduce((e,t)=>e.then(()=>t.continue().catch(r.lQ)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}var p=n(62517),f=n(43626),m=n(97502);class g{constructor(e={}){this.queryCache=e.queryCache||new u,this.mutationCache=e.mutationCache||new d,this.logger=e.logger||i.U,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=p.m.subscribe(()=>{p.m.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=f.t.subscribe(()=>{f.t.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,0===this.mountCount&&(null==(e=this.unsubscribeFocus)||e.call(this),this.unsubscribeFocus=void 0,null==(t=this.unsubscribeOnline)||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[n]=(0,r.b_)(e,t);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data}ensureQueryData(e,t,n){const i=(0,r.vh)(e,t,n),o=this.getQueryData(i.queryKey);return o?Promise.resolve(o):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const i=this.queryCache.find(e),o=null==i?void 0:i.state.data,s=(0,r.Zw)(t,o);if("undefined"===typeof s)return;const a=(0,r.vh)(e),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return o.j.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state}removeQueries(e,t){const[n]=(0,r.b_)(e,t),i=this.queryCache;o.j.batch(()=>{i.findAll(n).forEach(e=>{i.remove(e)})})}resetQueries(e,t,n){const[i,s]=(0,r.b_)(e,t,n),a=this.queryCache,l={type:"active",...i};return o.j.batch(()=>(a.findAll(i).forEach(e=>{e.reset()}),this.refetchQueries(l,s)))}cancelQueries(e,t,n){const[i,s={}]=(0,r.b_)(e,t,n);"undefined"===typeof s.revert&&(s.revert=!0);const a=o.j.batch(()=>this.queryCache.findAll(i).map(e=>e.cancel(s)));return Promise.all(a).then(r.lQ).catch(r.lQ)}invalidateQueries(e,t,n){const[i,s]=(0,r.b_)(e,t,n);return o.j.batch(()=>{var e,t;if(this.queryCache.findAll(i).forEach(e=>{e.invalidate()}),"none"===i.refetchType)return Promise.resolve();const n={...i,type:null!=(e=null!=(t=i.refetchType)?t:i.type)?e:"active"};return this.refetchQueries(n,s)})}refetchQueries(e,t,n){const[i,s]=(0,r.b_)(e,t,n),a=o.j.batch(()=>this.queryCache.findAll(i).filter(e=>!e.isDisabled()).map(e=>{var t;return e.fetch(void 0,{...s,cancelRefetch:null==(t=null==s?void 0:s.cancelRefetch)||t,meta:{refetchPage:i.refetchPage}})}));let l=Promise.all(a).then(r.lQ);return null!=s&&s.throwOnError||(l=l.catch(r.lQ)),l}fetchQuery(e,t,n){const i=(0,r.vh)(e,t,n),o=this.defaultQueryOptions(i);"undefined"===typeof o.retry&&(o.retry=!1);const s=this.queryCache.build(this,o);return s.isStaleByTime(o.staleTime)?s.fetch(o):Promise.resolve(s.state.data)}prefetchQuery(e,t,n){return this.fetchQuery(e,t,n).then(r.lQ).catch(r.lQ)}fetchInfiniteQuery(e,t,n){const i=(0,r.vh)(e,t,n);return i.behavior=(0,m.PL)(),this.fetchQuery(i)}prefetchInfiniteQuery(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(r.lQ).catch(r.lQ)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const n=this.queryDefaults.find(t=>(0,r.Od)(e)===(0,r.Od)(t.queryKey));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find(t=>(0,r.Cp)(e,t.queryKey));return null==t?void 0:t.defaultOptions}setMutationDefaults(e,t){const n=this.mutationDefaults.find(t=>(0,r.Od)(e)===(0,r.Od)(t.mutationKey));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find(t=>(0,r.Cp)(e,t.mutationKey));return null==t?void 0:t.defaultOptions}defaultQueryOptions(e){if(null!=e&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(null==e?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=(0,r.F$)(t.queryKey,t)),"undefined"===typeof t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),"undefined"===typeof t.useErrorBoundary&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return null!=e&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==e?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}},5254(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5556(e,t,n){e.exports=n(2694)()},5915(e,t,n){"use strict";n.d(t,{Bk:()=>D,CC:()=>m,Ck:()=>v,G_:()=>w,Hu:()=>I,Qh:()=>b,VS:()=>P,aO:()=>g,cI:()=>S,et:()=>T,kX:()=>_,pK:()=>M,uU:()=>x,xO:()=>O,xl:()=>L,yW:()=>A,zU:()=>R});var r=n(92328),i=n(95200),o=n(57968),s=n(74611),a=n(91135),l=n(88728),c=n(46403),u=n(74733),h=n(93177),d=n(93908),p=n(19282),f=n(70333);const m=0,g=1;let y=!1;function v(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:o,status:s,origin:a,links:l}=T(e);return{parent_span_id:o,span_id:t,trace_id:n,data:r,op:i,status:s,origin:a,links:l}}function _(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),i=r?t:T(e).parent_span_id,o=(0,l.L)(e).scope;return{parent_span_id:i,span_id:r?o?.getPropagationContext().propagationSpanId||(0,u.Z)():t,trace_id:n}}function b(e){const{traceId:t,spanId:n}=e.spanContext(),r=M(e);return(0,d.TC)(t,n,r)}function w(e){const{traceId:t,spanId:n}=e.spanContext(),r=M(e);return(0,d.Iy)(t,n,r)}function x(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:i})=>({span_id:e,trace_id:t,sampled:n===g,attributes:i,...r})):void 0}function S(e){return"number"===typeof e?E(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?E(e.getTime()):(0,h.zf)()}function E(e){return e>9999999999?e/1e3:e}function T(e){if(function(e){return"function"===typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}(e)){const{attributes:r,startTime:i,name:o,endTime:a,status:l,links:c}=e;return{span_id:t,trace_id:n,data:r,description:o,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:S(i),timestamp:S(a)||void 0,status:A(l),op:r[s.uT],origin:r[s.JD],links:x(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function M(e){const{traceFlags:t}=e.spanContext();return t===g}function A(e){if(e&&e.code!==a.a3)return e.code===a.F3?"ok":e.message||"internal_error"}const k="_sentryChildSpans",C="_sentryRootSpan";function I(e,t){const n=e[C]||e;(0,c.my)(t,C,n),e[k]?e[k].add(t):(0,c.my)(e,k,new Set([t]))}function P(e,t){e[k]&&e[k].delete(t)}function O(e){const t=new Set;return function e(n){if(!t.has(n)&&M(n)){t.add(n);const r=n[k]?Array.from(n[k]):[];for(const t of r)e(t)}}(e),Array.from(t)}function R(e){return e[C]||e}function D(){const e=(0,i.EU)(),t=(0,r.h)(e);return t.getActiveSpan?t.getActiveSpan():(0,f.f)((0,o.o5)())}function L(){y||((0,p.pq)(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),y=!0)}},6188(e){"use strict";e.exports=Math.max},6549(e){"use strict";e.exports=Object.getOwnPropertyDescriptor},6774(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case h:case f:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case d:case a:return e;default:return t}}case r:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===s||e===o||e===u||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===d||e.$$typeof===l||e.$$typeof===a||e.$$typeof===c||e.$$typeof===m||void 0!==e.getModuleId)}},6810(e,t,n){"use strict";n.d(t,{Z:()=>a});var r=n(57968),i=n(19282),o=n(93177);const s=100;function a(e,t){const n=(0,r.KU)(),a=(0,r.rm)();if(!n)return;const{beforeBreadcrumb:l=null,maxBreadcrumbs:c=s}=n.getOptions();if(c<=0)return;const u={timestamp:(0,o.lu)(),...e},h=l?(0,i.pq)(()=>l(u,t)):u;null!==h&&(n.emit&&n.emit("beforeAddBreadcrumb",h,t),a.addBreadcrumb(h,c))}},6925(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7176(e,t,n){"use strict";var r,i=n(73126),o=n(75795);try{r=[].__proto__===Array.prototype}catch(c){if(!c||"object"!==typeof c||!("code"in c)||"ERR_PROTO_ACCESS"!==c.code)throw c}var s=!!r&&o&&o(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;e.exports=s&&"function"===typeof s.get?i([s.get]):"function"===typeof l&&function(e){return l(null==e?e:a(e))}},7196(e,t,n){"use strict";n.d(t,{EU:()=>l,NI:()=>a,vf:()=>c,zu:()=>i});var r=n(63132);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${i[e]}px)`},s={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:i[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function a(e,t,n){const a=e.theme||{};if(Array.isArray(t)){const e=a.breakpoints||o;return t.reduce((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r),{})}if("object"===typeof t){const e=a.breakpoints||o;return Object.keys(t).reduce((o,l)=>{if((0,r.ob)(e.keys,l)){const e=(0,r.CT)(a.containerQueries?a:s,l);e&&(o[e]=n(t[l],l))}else if(Object.keys(e.values||i).includes(l)){o[e.up(l)]=n(t[l],l)}else{const e=l;o[e]=t[e]}return o},{})}return n(t)}function l(e={}){const t=e.keys?.reduce((t,n)=>(t[e.up(n)]={},t),{});return t||{}}function c(e,t){return e.reduce((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e},t)}},7205(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"nb",weekdays:"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),weekdaysShort:"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),weekdaysMin:"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),ordinal:function(e){return e+"."},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en m\xe5ned",MM:"%d m\xe5neder",y:"ett \xe5r",yy:"%d \xe5r"}};return n.default.locale(r,null,!0),r}(n(74353))},7313(e,t,n){"use strict";n.d(t,{U:()=>r});const r="production"},7342(e,t,n){"use strict";n.d(t,{PR:()=>gn});var r=n(18562),i=n(13293),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function c(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var h=function(){function e(){}return e.isNotNullOrUndefined=function(e){return null!==e&&void 0!==e},e.isNullOrUndefined=function(e){return null===e||void 0===e},e.requiredNotNullOrUndefined=function(e,t){if(void 0===t&&(t=function(){return"Required value is null or undefined"}),this.isNullOrUndefined(e))throw new Error(t());return e},e.fromMap=function(e){var t={};return e.forEach(function(e,n){t[n]=e}),t},e}(),d=function(){function e(){}return e.mapNotNullOrUndefined=function(e,t){for(var n=Array(),r=0,i=e;r<i.length;r++){var o=t(i[r]);h.isNotNullOrUndefined(o)&&n.push(o)}return n},e.mapOrUndefined=function(e,t){for(var n=Array(),r=0,i=e;r<i.length;r++){var o=t(i[r]);if(h.isNullOrUndefined(o))return;n.push(o)}return n},e.associateTo=function(e,t,n){for(var r=0,i=e;r<i.length;r++){var o=n(i[r]);t.set(o[0],o[1])}return t},e.associate=function(e,t){return this.associateTo(e,new Map,t)},e.associateBy=function(e,t){return this.associate(e,function(e){return[t(e),e]})},e.associateRecord=function(e,t){for(var n={},r=0,i=e;r<i.length;r++){var o=t(i[r]),s=o[0],a=o[1];n[s]=a}return n},e.chunked=function(e,t){for(var n=[],r=e.slice();r.length;)n.push(r.splice(0,t));return n},e.sum=function(e,t){return e.reduce(function(e,n){return e+t(n)},0)},e}(),p={DISABLE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},f=function(){function e(){}return e.setLogLevel=function(e){void 0===e&&(e=p.INFO),this.logLevel=e},e.initCounter=function(e){this.counters=d.associate(Object.keys(p),function(t){return[t,e(t)]})},e._log=function(e,t){var n;switch(e){case"WARN":n="orange";break;case"ERROR":n="red";break;default:n="#AAAAAA"}if(t instanceof Error)m.log(e,n,t.message,t);else try{m.log(e,n,t)}catch(r){}},e.increment=function(t){var n,r;null===(r=null===(n=e.counters)||void 0===n?void 0:n.get(t))||void 0===r||r.increment()},e.logLevel=p.INFO,e.log={error:function(t){e.logLevel>=p.ERROR&&(e._log("ERROR",t),e.increment("ERROR"))},warn:function(t){e.logLevel>=p.WARN&&(e._log("WARN",t),e.increment("WARN"))},info:function(t){e.logLevel>=p.INFO&&(e._log("INFO",t),e.increment("INFO"))},debug:function(t){e.logLevel>=p.DEBUG&&(e._log("DEBUG",t),e.increment("DEBUG"))}},e}(),m=function(){function e(){}return e.log=function(e,t,n,r){try{console.log("%c[".concat(e,"] Hackle: ").concat(n),"color: ".concat(t))}catch(i){}},e}(),g=f.log,y=function(){function e(){}return e.isEqual=function(e,t){return e.type===t.type&&e.value===t.value},e.isEquals=function(e,t){if(void 0===t||null===t)return!1;var n=Object.keys(e);return n.length===Object.keys(t).length&&n.every(function(n){return e[n]===t[n]})},e.sanitize=function(e){var t={};if(h.isNullOrUndefined(e))return t;for(var n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],s=i[1];if(this.isValidType(o)){var a=this.sanitizeValue(s);h.isNullOrUndefined(a)?g.debug("Invalid identifier value. The identifier type value be a string of 512 characters or less. [".concat(o,"]")):t[o]=a}else g.debug("Invalid identifier type. The identifier type must be a string of 128 characters or less. [".concat(o,"]"))}return t},e.isValidType=function(e){return!h.isNullOrUndefined(e)&&("string"===typeof e&&e.length>0&&e.length<=this.MAX_IDENTIFIER_TYPE_LENGTH)},e.sanitizeValue=function(e){return"string"===typeof e&&e.length>0&&e.length<=this.MAX_IDENTIFIER_VALUE_LENGTH?e:"number"===typeof e?e.toString():null},e.MAX_IDENTIFIER_TYPE_LENGTH=128,e.MAX_IDENTIFIER_VALUE_LENGTH=512,e}(),v=f.log,_=function(){function e(){}return e.sanitize=function(e){var t={};if(h.isNullOrUndefined(e))return t;for(var n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],s=i[1];if(Object.keys(t).length>=this.MAX_PROPERTIES_COUNT){v.debug("The number of properties cannot exceed 128. Drops excess properties. [".concat(o,", ").concat(s,"]"));break}if(this.isValidKey(o)){var a=this.sanitizeValue(o,s);h.isNullOrUndefined(a)?v.debug("Invalid property value. The property value mus be 'string(..1024)', 'number', 'boolean', or 'array' type. [".concat(s,"]")):t[o]=a}else v.debug("Invalid property key. The property key must be a string of 128 characters or less. [".concat(o,"]"))}return t},e.isValidProperty=function(e,t){return this.isValidKey(e)&&this.isValidValue(t)},e.isValidKey=function(e){return h.isNotNullOrUndefined(e)&&"string"===typeof e&&e.length>0&&e.length<=this.MAX_PROPERTY_KEY_LENGTH},e.sanitizeValue=function(e,t){var n=this;return"string"===typeof e&&e.startsWith(this.SYSTEM_PROPERTY_KEY_PREFIX)?t:this.isValidValue(t)?Array.isArray(t)?t.filter(function(e){return n.isValidElement(e)}):t:null},e.isValidValue=function(e){return!h.isNullOrUndefined(e)&&("string"===typeof e?e.length<=this.MAX_PROPERTY_VALUE_LENGTH:"number"===typeof e?!isNaN(e)&&isFinite(e):"boolean"===typeof e||Array.isArray(e))},e.isValidElement=function(e){return!h.isNullOrUndefined(e)&&("string"===typeof e?e.length>0&&e.length<=this.MAX_PROPERTY_VALUE_LENGTH:"number"===typeof e)},e.truncateStringValue=function(e){return"string"===typeof e&&e.length>this.MAX_PROPERTY_VALUE_LENGTH?e.slice(0,this.MAX_PROPERTY_VALUE_LENGTH):e},e.SYSTEM_PROPERTY_KEY_PREFIX="$",e.MAX_PROPERTIES_COUNT=128,e.MAX_PROPERTY_KEY_LENGTH=128,e.MAX_PROPERTY_VALUE_LENGTH=1024,e}(),b=["nanoseconds","microseconds","milliseconds","seconds","minutes","hours","days"],w=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],x=function(){function e(){}return e.nanosToUnit=function(t,n){switch(n){case"nanoseconds":return t;case"microseconds":return t/(e.C1/e.C0);case"milliseconds":return t/(e.C2/e.C0);case"seconds":return t/(e.C3/e.C0);case"minutes":return t/(e.C4/e.C0);case"hours":return t/(e.C5/e.C0);case"days":return t/(e.C6/e.C0)}},e.microsToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C1/e.C0);case"milliseconds":return t/(e.C2/e.C1);case"microseconds":return t;case"seconds":return t/(e.C3/e.C1);case"minutes":return t/(e.C4/e.C1);case"hours":return t/(e.C5/e.C1);case"days":return t/(e.C6/e.C1)}},e.millisToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C2/e.C0);case"microseconds":return t*(e.C2/e.C1);case"milliseconds":return t;case"seconds":return t/(e.C3/e.C2);case"minutes":return t/(e.C4/e.C2);case"hours":return t/(e.C5/e.C2);case"days":return t/(e.C6/e.C2)}},e.secondsToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C3/e.C0);case"microseconds":return t*(e.C3/e.C1);case"milliseconds":return t*(e.C3/e.C2);case"seconds":return t;case"minutes":return t/(e.C4/e.C3);case"hours":return t/(e.C5/e.C3);case"days":return t/(e.C6/e.C3)}},e.minutesToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C4/e.C0);case"microseconds":return t*(e.C4/e.C1);case"milliseconds":return t*(e.C4/e.C2);case"seconds":return t*(e.C4/e.C3);case"minutes":return t;case"hours":return t/(e.C5/e.C4);case"days":return t/(e.C6/e.C4)}},e.hoursToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C5/e.C0);case"microseconds":return t*(e.C5/e.C1);case"milliseconds":return t*(e.C5/e.C2);case"seconds":return t*(e.C5/e.C3);case"minutes":return t*(e.C5/e.C4);case"hours":return t;case"days":return t/(e.C6/e.C5)}},e.daysToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C6/e.C0);case"microseconds":return t*(e.C6/e.C1);case"milliseconds":return t*(e.C6/e.C2);case"seconds":return t*(e.C6/e.C3);case"minutes":return t*(e.C6/e.C4);case"hours":return t*(e.C6/e.C5);case"days":return t}},e.dayOfWeek=function(e){var t=new Date(e).getUTCDay();return w[(t+6)%7]},e.midnight=function(e){var t=new Date(e);return Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},e.C0=1,e.C1=1e3*e.C0,e.C2=1e3*e.C1,e.C3=1e3*e.C2,e.C4=60*e.C3,e.C5=60*e.C4,e.C6=24*e.C5,e.converter={nanoseconds:e.nanosToUnit,microseconds:e.microsToUnit,milliseconds:e.millisToUnit,seconds:e.secondsToUnit,minutes:e.minutesToUnit,hours:e.hoursToUnit,days:e.daysToUnit},e}(),S=function(){function e(){}return e.prototype.tick=function(){return 1e3*Date.now()},e.prototype.currentMillis=function(){return Date.now()},e.instance=new e,e}(),E=function(){function e(){this.parameters={}}return e.prototype.get=function(e,t){return t},e}(),T=function(){function e(e){this.parameters=e}return e.prototype.get=function(e,t){var n=this.parameters[e];return h.isNullOrUndefined(n)?t:h.isNullOrUndefined(t)||typeof n===typeof t?n:t},e}(),M="X-HACKLE-SDK-KEY",A="X-HACKLE-SDK-NAME",k="X-HACKLE-SDK-VERSION",C="X-HACKLE-SDK-TIME",I="_hackle_hid",P="_hackle_id",O="_hackle_session_id",R="_hackle_last_event_ts",D=-1,L=6e4,N="_hackle_uid",F="_hackle_did",z="_hackle_mkt",U=1/86400*3,j="hackle-workspace-config",B=864e5,V=f.log;function H(e,t){var n=e.find(function(e){return e===t||e.toLowerCase()===t.toLowerCase()});return n||V.debug("Unsupported type [".concat(t,"]. Please use the latest version of sdk.")),n}function $(e,t){if(!h.isNullOrUndefined(t)){for(var n=new Array,r=0,i=t;r<i.length;r++){var o=H(e,i[r]);if(h.isNullOrUndefined(o))return;n.push(o)}return n}}var Y=function(){function e(e,t){this.value=e,this.reason=t}return e.of=function(t,n){return new e(t,n)},e}(),G=function(){function e(e,t,n,r){this.variation=e,this.reason=t,this.config=n,this.experiment=r}return e.of=function(t,n,r,i){return void 0===r&&(r=new E),void 0===i&&(i=void 0),new e(t,n,r,i)},Object.defineProperty(e.prototype,"parameters",{get:function(){return this.config.parameters},enumerable:!1,configurable:!0}),e.prototype.get=function(e,t){return this.config.get(e,t)},e}(),q=function(){function e(e,t,n,r){this.isOn=e,this.reason=t,this.config=n,this.experiment=r}return e.on=function(t,n,r){return void 0===n&&(n=new E),void 0===r&&(r=void 0),new e(!0,t,n,r)},e.off=function(t,n,r){return void 0===n&&(n=new E),void 0===r&&(r=void 0),new e(!1,t,n,r)},Object.defineProperty(e.prototype,"parameters",{get:function(){return this.config.parameters},enumerable:!1,configurable:!0}),e.prototype.get=function(e,t){return this.config.get(e,t)},e}(),W=(function(){function e(){}e.prototype.get=function(e,t){return t}}(),function(){function e(e,t){this.id=e,this.config=t}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.config.parameters},enumerable:!1,configurable:!0}),e.fromJson=function(t){return new e(t.id,new T(d.associateRecord(t.parameters,function(e){return[e.key,e.value]})))},e.prototype.get=function(e,t){switch(typeof t){case"string":case"number":case"boolean":return this.config.get(e,t);default:return t}},e}()),K=function(){function e(){}return e.SDK_NOT_READY="SDK_NOT_READY",e.EXCEPTION="EXCEPTION",e.INVALID_INPUT="INVALID_INPUT",e.UNSUPPORTED_PLATFORM="UNSUPPORTED_PLATFORM",e.TYPE_MISMATCH="TYPE_MISMATCH",e.EXPERIMENT_NOT_FOUND="EXPERIMENT_NOT_FOUND",e.EXPERIMENT_DRAFT="EXPERIMENT_DRAFT",e.EXPERIMENT_PAUSED="EXPERIMENT_PAUSED",e.EXPERIMENT_COMPLETED="EXPERIMENT_COMPLETED",e.OVERRIDDEN="OVERRIDDEN",e.TRAFFIC_NOT_ALLOCATED="TRAFFIC_NOT_ALLOCATED",e.NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT="NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT",e.IDENTIFIER_NOT_FOUND="IDENTIFIER_NOT_FOUND",e.VARIATION_DROPPED="VARIATION_DROPPED",e.TRAFFIC_ALLOCATED="TRAFFIC_ALLOCATED",e.TRAFFIC_ALLOCATED_BY_TARGETING="TRAFFIC_ALLOCATED_BY_TARGETING",e.NOT_IN_EXPERIMENT_TARGET="NOT_IN_EXPERIMENT_TARGET",e.FEATURE_FLAG_NOT_FOUND="FEATURE_FLAG_NOT_FOUND",e.FEATURE_FLAG_INACTIVE="FEATURE_FLAG_INACTIVE",e.INDIVIDUAL_TARGET_MATCH="INDIVIDUAL_TARGET_MATCH",e.TARGET_RULE_MATCH="TARGET_RULE_MATCH",e.DEFAULT_RULE="DEFAULT_RULE",e.REMOTE_CONFIG_PARAMETER_NOT_FOUND="REMOTE_CONFIG_PARAMETER_NOT_FOUND",e.IN_APP_MESSAGE_NOT_FOUND="IN_APP_MESSAGE_NOT_FOUND",e.IN_APP_MESSAGE_DRAFT="IN_APP_MESSAGE_DRAFT",e.IN_APP_MESSAGE_PAUSED="IN_APP_MESSAGE_PAUSED",e.IN_APP_MESSAGE_HIDDEN="IN_APP_MESSAGE_HIDDEN",e.IN_APP_MESSAGE_TARGET="IN_APP_MESSAGE_TARGET",e.NOT_IN_IN_APP_MESSAGE_PERIOD="NOT_IN_IN_APP_MESSAGE_PERIOD",e.NOT_IN_IN_APP_MESSAGE_TIMETABLE="NOT_IN_IN_APP_MESSAGE_TIMETABLE",e.NOT_IN_IN_APP_MESSAGE_TARGET="NOT_IN_IN_APP_MESSAGE_TARGET",e.IN_APP_MESSAGE_FREQUENCY_CAPPED="IN_APP_MESSAGE_FREQUENCY_CAPPED",e.EXPERIMENT_CONTROL_GROUP="EXPERIMENT_CONTROL_GROUP",e}(),Z=["DEFAULT","SPLIT_URL","IN_APP_MESSAGE"],J=function(){function e(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g){this.id=e,this.key=t,this.type=n,this.identifierType=r,this.status=i,this.version=o,this.executionVersion=s,this.variations=a,this.userOverrides=l,this.segmentOverrides=c,this.targetAudiences=u,this.splitUrlTargets=h,this.targetRules=d,this.defaultRule=p,this.containerId=f,this.implementationType=m,this.winnerVariationId=g}return e.fromJson=function(t,n,r){var i=e.experimentStatusOrNull(n.execution.status),o=n.variations.map(function(e){return new X(e.id,e.key,"DROPPED"===e.status,r.find(function(t){return t.id===e.parameterConfigurationId}))}),s=d.associate(n.execution.userOverrides,function(e){return[e.userId,e.variationId]}),a=d.mapNotNullOrUndefined(n.execution.segmentOverrides,function(e){return he.fromJson(e,Ce.IDENTIFIER)}),l=d.mapNotNullOrUndefined(n.execution.targetAudiences,function(e){return se.fromJson(e,Ce.PROPERTY)}),c=xt.fromJson(n.execution.targetUrls),u=H(Z,n.implementationType),h=d.mapNotNullOrUndefined(n.execution.targetRules,function(e){return he.fromJson(e,Ce.PROPERTY)}),p=ue.fromJson(n.execution.defaultRule);return i&&u&&p&&new e(n.id,n.key,t,n.identifierType,i,n.version,n.execution.version,o,s,a,l,c,h,p,n.containerId,u,n.winnerVariationId)},e.experimentStatusOrNull=function(e){switch(e){case"READY":return"DRAFT";case"RUNNING":return"RUNNING";case"PAUSED":return"PAUSED";case"STOPPED":return"COMPLETED";default:return void V.debug("Unsupported status [".concat(e,"]"))}},e.prototype._winnerVariationOrNull=function(){if(this.winnerVariationId)return this._getVariationByIdOrNull(this.winnerVariationId)},e.prototype._getVariationByIdOrNull=function(e){return this.variations.find(function(t){return t.id===e})},e.prototype._getVariationByKeyOrNull=function(e){return this.variations.find(function(t){return t.key===e})},e}(),X=function(){function e(e,t,n,r){this.id=e,this.key=t,this.isDropped=n,this.config=r}return Object.defineProperty(e.prototype,"parameters",{get:function(){var e,t;return null!==(t=null===(e=this.config)||void 0===e?void 0:e.parameters)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),e}(),Q=function(){function e(e,t,n,r){this.id=e,this.seed=t,this.slotSize=n,this.slots=r}return e.fromJson=function(t){return new e(t.id,t.seed,t.slotSize,t.slots.map(function(e){var t=e.startInclusive,n=e.endExclusive,r=e.variationId;return new ee(t,n,r)}))},e}(),ee=function(){function e(e,t,n){this.startInclusive=e,this.endExclusive=t,this.variationId=n}return e.prototype.contains=function(e){return this.startInclusive<=e&&e<this.endExclusive},e}(),te=function(){function e(e,t){this.id=e,this.key=t}return e.fromJson=function(t){return new e(t.id,t.key)},e}(),ne=function(){function e(){}return e.ID="$id",e.USER="$userId",e.DEVICE="$deviceId",e.SESSION="$sessionId",e.HACKLE_DEVICE="$hackleDeviceId",e}(),re=function(e){var t=new ie;return t.addIdentifiers(e.identifiers||{}),t.add(ne.ID,e.id),t.add(ne.DEVICE,e.deviceId),h.isNotNullOrUndefined(e.userId)&&t.add(ne.USER,e.userId),t.build()},ie=function(){function e(){this.identifiers={}}return e.prototype.addIdentifiers=function(e){for(var t in e)this.add(t,e[t]);return this},e.prototype.add=function(e,t){var n=y.sanitizeValue(t);return y.isValidType(e)&&n?this.identifiers[e]=t:V.warn("Invalid user identifier [type=".concat(e,", value=").concat(t,"]")),this},e.prototype.build=function(){return this.identifiers},e}(),oe=function(e){var t,n,r,i={};return i.id=null!==(t=y.sanitizeValue(e.id))&&void 0!==t?t:void 0,i.userId=null!==(n=y.sanitizeValue(e.userId))&&void 0!==n?n:void 0,i.deviceId=null!==(r=y.sanitizeValue(e.deviceId))&&void 0!==r?r:void 0,"object"===typeof e.properties&&(i.properties=_.sanitize(e.properties)),"object"===typeof e.identifiers&&(i.identifiers=y.sanitize(e.identifiers)),function(e){return Boolean(e.id||e.userId||e.deviceId||e.identifiers&&Object.keys(e.identifiers).length>0)}(i)?i:null},se=function(){function e(e){this.conditions=e}return e.fromJson=function(t,n){return new e(d.mapNotNullOrUndefined(t.conditions,function(e){return ae.fromJson(e,n)}))},e.prototype.toJson=function(){return{conditions:this.conditions.map(function(e){return e.toJson()})}},e}(),ae=function(){function e(e,t){this.key=e,this.match=t}return e.fromJson=function(t,n){var r=le.fromJson(t.key);if(r&&n.supports(r.type)){var i=ce.fromJson(t.match);return i&&new e(r,i)}},e.prototype.toJson=function(){return{key:this.key.toJson(),match:this.match.toJson()}},e}(),le=function(){function e(e,t){this.type=e,this.name=t}return e.fromJson=function(t){var n=H(Ae,t.type);return n&&new e(n,t.name)},e.prototype.toJson=function(){return{type:this.type,name:this.name}},e}(),ce=function(){function e(e,t,n,r){this.type=e,this.operator=t,this.valueType=n,this.values=r}return e.fromJson=function(t){var n=H(Se,t.type),r=H(Te,t.operator),i=H(Ee,t.valueType);return n&&r&&i&&new e(n,r,i,t.values)},e.prototype.toJson=function(){return{operator:this.operator,type:this.type,valueType:this.valueType,values:this.values}},e}(),ue=function(){function e(e,t,n){this.type=e,this.variationId=t,this.bucketId=n}return e.fromJson=function(t){var n=H(Me,t.type);return n&&new e(n,t.variationId,t.bucketId)},e}(),he=function(){function e(e,t){this.target=e,this.action=t}return e.fromJson=function(t,n){var r=se.fromJson(t.target,n),i=ue.fromJson(t.action);return r&&i&&new e(r,i)},e}(),de=function(){function e(e,t,n,r){this.id=e,this.key=t,this.type=n,this.targets=r}return e.fromJson=function(t){var n=H(ke,t.type);return n&&new e(t.id,t.key,n,d.mapNotNullOrUndefined(t.targets,function(e){return se.fromJson(e,Ce.SEGMENT)}))},e}(),pe=function(){function e(e,t,n){this.id=e,this.bucketId=t,this.groups=n}return e.fromJson=function(t){return new e(t.id,t.bucketId,t.groups.map(function(e){return fe.fromJson(e)}))},e.prototype.getGroupOrNull=function(e){return this.groups.find(function(t){return t.id===e})},e}(),fe=function(){function e(e,t){this.id=e,this.experiments=t}return e.fromJson=function(t){return new e(t.id,t.experiments)},e}(),me=function(){function e(e,t,n,r,i,o){this.id=e,this.key=t,this.type=n,this.identifierType=r,this.targetRules=i,this.defaultValue=o}return e.fromJson=function(t){var n=H(Ee,t.type),r=d.mapNotNullOrUndefined(t.targetRules,function(e){return ge.fromJson(e,Ce.PROPERTY)}),i=ye.fromJson(t.defaultValue);return n&&new e(t.id,t.key,n,t.identifierType,r,i)},e}(),ge=function(){function e(e,t,n,r,i){this.key=e,this.name=t,this.target=n,this.bucketId=r,this.value=i}return e.fromJson=function(t,n){var r=se.fromJson(t.target,n);return r&&new e(t.key,t.name,r,t.bucketId,ye.fromJson(t.value))},e}(),ye=function(){function e(e,t){this.id=e,this.rawValue=t}return e.fromJson=function(t){return new e(t.id,t.value)},e}();function ve(e,t){return e-t}var _e,be=function(){function e(e,t,n){this.coreVersion=e,this.prerelease=t,this.build=n}return e.tryParse=function(t){if(t instanceof e)return t;var n=e.regExp.exec(t);if(n){n[0];var r=n[1],i=n[2],o=void 0===i?"0":i,s=n[3],a=void 0===s?"0":s,l=n[4],c=n[5];return new e(new we(parseInt(r,10),parseInt(o,10),parseInt(a,10)),xe.parse(l),xe.parse(c))}},e.prototype.compareTo=function(e){return this.coreVersion.compareTo(e.coreVersion)||this.prerelease.compareTo(e.prerelease)},e.prototype.isEqualTo=function(e){return 0===this.compareTo(e)},e.prototype.isGreaterThan=function(e){return this.compareTo(e)>0},e.prototype.isGreaterThanOrEqualTo=function(e){return this.compareTo(e)>=0},e.prototype.isLessThan=function(e){return this.compareTo(e)<0},e.prototype.isLessThanOrEqualTo=function(e){return this.compareTo(e)<=0},e.regExp=/^(0|[1-9]\d*)(?:\.(0|[1-9]\d*))?(?:\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,e}(),we=function(){function e(e,t,n){this.major=e,this.minor=t,this.patch=n}return e.prototype.compareTo=function(e){return ve(this.major,e.major)||ve(this.minor,e.minor)||ve(this.patch,e.patch)},e}(),xe=function(){function e(e){this.identifiers=e}return e.parse=function(t){return t?new e(t.split(".")):e.EMPTY},e.prototype.isEmpty=function(){return 0===this.identifiers.length},e.prototype.isNotEmpty=function(){return!this.isEmpty()},e.prototype.compareTo=function(e){return this.isEmpty()&&e.isEmpty()?0:this.isEmpty()&&e.isNotEmpty()?1:this.isNotEmpty()&&e.isEmpty()?-1:this.compareIdentifiers(e)},e.prototype.compareIdentifiers=function(t){for(var n=Math.min(this.identifiers.length,t.identifiers.length),r=0;r<n;r++){var i=e.compareIdentifiers(this.identifiers[r],t.identifiers[r]);if(0!==i)return i}return ve(this.identifiers.length,t.identifiers.length)},e.compareIdentifiers=function(t,n){return e.numericIdentifierRegExp.test(t)&&e.numericIdentifierRegExp.test(n)?ve(+t,+n):t===n?0:t<n?-1:1},e.EMPTY=new e([]),e.numericIdentifierRegExp=/^(0|[1-9]\d*)$/,e}(),Se=["MATCH","NOT_MATCH"],Ee=["STRING","NUMBER","BOOLEAN","VERSION","JSON","URL","NULL","UNKNOWN"],Te=["IN","CONTAINS","STARTS_WITH","ENDS_WITH","GT","GTE","LT","LTE","EXISTS"],Me=["VARIATION","BUCKET"],Ae=["USER_ID","USER_PROPERTY","HACKLE_PROPERTY","SEGMENT","AB_TEST","FEATURE_FLAG","EVENT_PROPERTY","COHORT","NUMBER_OF_EVENTS_IN_DAYS","NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS"],ke=["USER_ID","USER_PROPERTY"],Ce=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.supportedKeyTypes=e}return e.prototype.supports=function(e){return this.supportedKeyTypes.includes(e)},e.IDENTIFIER=new e("SEGMENT"),e.PROPERTY=new e("SEGMENT","USER_PROPERTY","HACKLE_PROPERTY","AB_TEST","FEATURE_FLAG","EVENT_PROPERTY","COHORT","NUMBER_OF_EVENTS_IN_DAYS","NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS"),e.SEGMENT=new e("USER_ID","USER_PROPERTY","HACKLE_PROPERTY","COHORT","NUMBER_OF_EVENTS_IN_DAYS","NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS"),e}(),Ie=["ACTIVE","DRAFT","PAUSE"],Pe=["WEB","ANDROID","IOS"],Oe=["IMMEDIATE","CUSTOM"],Re=["MODAL","BANNER","BOTTOM_SHEET","NONE"],De=["IMAGE_TEXT","IMAGE_ONLY","TEXT_ONLY","IMAGE","NONE"],Le=["VERTICAL","HORIZONTAL"],Ne=["CLICK"],Fe=["CLOSE","WEB_LINK","HIDDEN","LINK_AND_CLOSE","LINK_NEW_TAB","LINK_NEW_TAB_AND_CLOSE","LINK_NEW_WINDOW","LINK_NEW_WINDOW_AND_CLOSE"],ze=["TOP","MIDDLE","BOTTOM"],Ue=["LEFT","CENTER","RIGHT"],je=["ALL","CUSTOM"],Be=function(){function e(e,t,n,r,i,o,s,a,l){this.id=e,this.key=t,this.status=n,this.period=r,this.timetable=i,this.eventTrigger=o,this.targetContext=s,this.messageContext=a,this.evaluateContext=l}return e.fromJson=function(t){var n,r,i,o=H(Ie,t.status);if(!h.isNullOrUndefined(o)){var s;switch(H(Oe,t.timeUnit)){case"IMMEDIATE":s=new Ve;break;case"CUSTOM":if(h.isNullOrUndefined(t.startEpochTimeMillis))return;if(h.isNullOrUndefined(t.endEpochTimeMillis))return;s=new He(t.startEpochTimeMillis,t.endEpochTimeMillis);break;default:return}var a=null!==(n=t.timetable&&$e.fromJson(t.timetable))&&void 0!==n?n:new Ye,l=tt.fromJson(t.messageContext);if(!h.isNullOrUndefined(l)){var c=t.eventTriggerRules.map(Ke.fromJson),u=Ze.fromJson(t.eventFrequencyCap),d=null!==(r=t.eventTriggerDelay&&vt.fromJson(t.eventTriggerDelay))&&void 0!==r?r:vt.immediate(),p=gt.fromJson(null!==(i=t.evaluateContext)&&void 0!==i?i:{atDeliverTime:!1});return new e(t.id,t.key,o,s,a,new We(c,u,d),Qe.fromJson(t.targetContext),l,p)}}},e.prototype.supports=function(e){return this.messageContext.platformTypes.includes(e)},e.prototype.toString=function(){return"InAppMessage(id=".concat(this.id,", key=").concat(this.key,", status=").concat(this.status,")")},e}(),Ve=function(){function e(){this.type="IMMEDIATE"}return e.prototype.within=function(e){return!0},e}(),He=function(){function e(e,t){this.startMillisInclusive=e,this.endMillisExclusive=t,this.type="CUSTOM"}return e.prototype.within=function(e){return this.startMillisInclusive<=e&&e<this.endMillisExclusive},e}(),$e=function(){function e(){}return e.fromJson=function(e){switch(H(je,e.type)){case"ALL":return new Ye;case"CUSTOM":return new Ge(d.mapNotNullOrUndefined(e.slots,function(e){return qe.fromJson(e)}));default:return}},e}(),Ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ALL",t}return s(t,e),t.prototype.within=function(e){return!0},t}($e),Ge=function(e){function t(t){var n=e.call(this)||this;return n.slots=t,n.type="CUSTOM",n}return s(t,e),t.prototype.within=function(e){return this.slots.some(function(t){return t.within(e)})},t}($e),qe=function(){function e(e,t,n){this.dayOfWeek=e,this.startMillisInclusive=t,this.endMillisExclusive=n}return e.prototype.within=function(e){var t=x.dayOfWeek(e);if(this.dayOfWeek!==t)return!1;var n=x.midnight(e),r=n+this.startMillisInclusive,i=n+this.endMillisExclusive;return r<=e&&e<i},e.fromJson=function(t){var n=H(w,t.dayOfWeek);return n&&new e(n,t.startMillisInclusive,t.endMillisExclusive)},e}(),We=function(e,t,n){this.rules=e,this.frequencyCap=t,this.delay=n},Ke=function(){function e(e,t){this.eventKey=e,this.targets=t}return e.fromJson=function(t){return new e(t.eventKey,d.mapNotNullOrUndefined(t.targets,function(e){return se.fromJson(e,Ce.PROPERTY)}))},e}(),Ze=function(){function e(e,t){this.identifierCaps=e,this.durationCap=t}return e.fromJson=function(t){return t?new e(t.identifiers.map(Je.fromJson),Xe.fromJson(t.duration)):null},e}(),Je=function(){function e(e,t){this.identifierType=e,this.count=t}return e.fromJson=function(t){return new e(t.identifierType,t.countPerIdentifier)},e}(),Xe=function(){function e(e,t){this.durationMillis=e,this.count=t}return e.fromJson=function(t){if(!t)return null;var n=H(b,t.durationUnit.timeUnit);return n?new e(x.converter[n](t.durationUnit.amount,"milliseconds"),t.countPerDuration):null},e}(),Qe=function(){function e(e,t){this.overrides=e,this.targets=t}return e.fromJson=function(t){return new e(t.overrides.map(et.fromJson),d.mapNotNullOrUndefined(t.targets,function(e){return se.fromJson(e,Ce.PROPERTY)}))},e}(),et=function(){function e(e,t){this.identifierType=e,this.identifiers=t}return e.fromJson=function(t){return new e(t.identifierType,t.identifiers)},e}(),tt=function(){function e(e,t,n,r,i){this.defaultLang=e,this.experimentContext=t,this.platformTypes=n,this.orientations=r,this.messages=i}return e.fromJson=function(t){var n=null;"AB_TEST"===t.exposure.type&&null!==t.exposure.key&&(n=new nt(t.exposure.key));var r=$(Pe,t.platformTypes);if(!h.isNullOrUndefined(r)){var i=$(Le,t.orientations);if(!h.isNullOrUndefined(i)){var o=d.mapOrUndefined(t.messages,rt.fromJson);if(!h.isNullOrUndefined(o))return new e(t.defaultLang,n,r,i,o)}}},e}(),nt=function(e){this.key=e},rt=function(){function e(e,t,n,r,i,o,s,a,l,c,u,h){this.variationKey=e,this.lang=t,this.layout=n,this.images=r,this.imageAutoScroll=i,this.text=o,this.buttons=s,this.closeButton=a,this.background=l,this.action=c,this.outerButtons=u,this.innerButtons=h}return e.fromJson=function(t){var n=it.fromJson(t.layout);if(!h.isNullOrUndefined(n)){var r=d.mapOrUndefined(t.images,st.fromJson);if(!h.isNullOrUndefined(r)){var i=void 0;if(!h.isNotNullOrUndefined(t.imageAutoScroll)||(i=at.fromJson(t.imageAutoScroll),!h.isNullOrUndefined(i))){var o=d.mapOrUndefined(t.buttons,ht.fromJson);if(!h.isNullOrUndefined(o)){var s=void 0;if(!h.isNotNullOrUndefined(t.closeButton)||(s=ht.fromJson2(t.closeButton),!h.isNullOrUndefined(s))){var a=d.mapOrUndefined(t.outerButtons,dt.fromJson),l=d.mapOrUndefined(t.innerButtons,dt.fromJson);if(!h.isNullOrUndefined(a)&&!h.isNullOrUndefined(l))return new e(t.variationKey,t.lang,n,r,i,t.text?lt.fromJson(t.text):void 0,o,s,new ft(t.background.color),t.action?mt.fromJson(t.action):void 0,a,l)}}}}}},e.prototype.toJson=function(){var e,t,n,r,i,o,s,a,l,c;return{variationKey:this.variationKey,lang:this.lang,layout:{layoutType:this.layout.layoutType,alignment:null!==(t=null===(e=this.layout.alignment)||void 0===e?void 0:e.toJson())&&void 0!==t?t:null,displayType:this.layout.displayType},images:this.images.map(function(e){return e.toJson()}),imageAutoScroll:null!==(r=null===(n=this.imageAutoScroll)||void 0===n?void 0:n.toJson())&&void 0!==r?r:null,text:null!==(o=null===(i=this.text)||void 0===i?void 0:i.toJson())&&void 0!==o?o:null,closeButton:null!==(a=null===(s=this.closeButton)||void 0===s?void 0:s.toCloseButtonJson())&&void 0!==a?a:null,buttons:this.buttons.map(function(e){return e.toJson()}),background:{color:this.background.color},action:null!==(c=null===(l=this.action)||void 0===l?void 0:l.toJson())&&void 0!==c?c:null,outerButtons:this.outerButtons.map(function(e){return e.toJson()}),innerButtons:this.innerButtons.map(function(e){return e.toJson()})}},e}(),it=function(){function e(e,t,n){this.displayType=e,this.layoutType=t,this.alignment=n}return e.fromJson=function(t){var n=H(De,t.layoutType),r=H(Re,t.displayType);if(!h.isNullOrUndefined(r)&&!h.isNullOrUndefined(n))return new e(r,n,t.alignment?ot.fromJson(t.alignment):void 0)},e}(),ot=function(){function e(e,t){this.horizontal=e,this.vertical=t}return e.fromJson=function(t){var n=H(Ue,t.horizontal);if(!h.isNullOrUndefined(n)){var r=H(ze,t.vertical);if(!h.isNullOrUndefined(r))return new e(n,r)}},e.prototype.toJson=function(){return{horizontal:this.horizontal,vertical:this.vertical}},e}(),st=function(){function e(e,t,n){this.orientation=e,this.imagePath=t,this.action=n}return e.fromJson=function(t){var n=H(Le,t.orientation);if(!h.isNullOrUndefined(n)){var r=void 0;if(!h.isNotNullOrUndefined(t.action)||(r=mt.fromJson(t.action),!h.isNullOrUndefined(r)))return new e(n,t.imagePath,r)}},e.prototype.toJson=function(){var e,t;return{orientation:this.orientation,imagePath:this.imagePath,action:null!==(t=null===(e=this.action)||void 0===e?void 0:e.toJson())&&void 0!==t?t:null}},e}(),at=function(){function e(e){this.intervalMillis=e}return e.fromJson=function(t){var n=H(b,t.interval.timeUnit);if(n)return new e(x.converter[n](t.interval.amount,"milliseconds"))},e.prototype.toJson=function(){return{interval:{timeUnit:"milliseconds",amount:this.intervalMillis}}},e}(),lt=function(){function e(e,t){this.title=e,this.body=t}return e.fromJson=function(t){return new e(ct.fromJson(t.title),ct.fromJson(t.body))},e.prototype.toJson=function(){return{title:{text:this.title.text,style:{textColor:this.title.style.color}},body:{text:this.body.text,style:{textColor:this.body.style.color}}}},e}(),ct=function(){function e(e,t){this.text=e,this.style=t}return e.fromJson=function(t){return new e(t.text,new ut(t.style.textColor))},e}(),ut=function(e){this.color=e},ht=function(){function e(e,t,n){this.text=e,this.style=t,this.action=n}return e.fromJson=function(t){var n=mt.fromJson(t.action);if(!h.isNullOrUndefined(n))return new e(t.text,new pt(t.style.textColor,t.style.bgColor,t.style.borderColor),n)},e.fromJson2=function(t){var n=mt.fromJson(t.action);if(!h.isNullOrUndefined(n))return new e("\u2715",new pt(t.style.color,"#FFFFFF","#FFFFFF"),n)},e.prototype.toJson=function(){return{text:this.text,action:this.action.toJson(),style:{textColor:this.style.textColor,bgColor:this.style.backgroundColor,borderColor:this.style.borderColor}}},e.prototype.toCloseButtonJson=function(){return{action:this.action.toJson(),style:{color:this.style.textColor}}},e}(),dt=function(){function e(e,t){this.button=e,this.alignment=t}return e.fromJson=function(t){var n=ht.fromJson(t.button);if(!h.isNullOrUndefined(n)){var r=ot.fromJson(t.alignment);if(!h.isNullOrUndefined(r))return new e(n,r)}},e.prototype.toJson=function(){return{button:this.button.toJson(),alignment:this.alignment.toJson()}},e}(),pt=function(e,t,n){this.textColor=e,this.backgroundColor=t,this.borderColor=n},ft=function(e){this.color=e},mt=function(){function e(e,t,n){this.behavior=e,this.type=t,this.value=n}return e.fromJson=function(t){var n,r=H(Ne,t.behavior);if(!h.isNullOrUndefined(r)){var i=H(Fe,t.type);if(!h.isNullOrUndefined(i))return new e(r,i,null!==(n=t.value)&&void 0!==n?n:void 0)}},e.prototype.toJson=function(){var e;return{behavior:this.behavior,type:this.type,value:null!==(e=this.value)&&void 0!==e?e:null}},e}(),gt=function(){function e(e){this.atDeliverTime=e}return e.fromJson=function(t){return new e(t.atDeliverTime)},e}(),yt=function(){function e(e){this.durationMillis=e}return e.fromJson=function(t){var n=H(b,t.duration.timeUnit);return h.isNullOrUndefined(n)?null:new e(x.converter[n](t.duration.amount,"milliseconds"))},e}(),vt=function(){function e(e,t){this.type=e,this.afterCondition=t}return e.fromJson=function(t){var n=t.afterCondition&&yt.fromJson(t.afterCondition);return new e(t.type,n)},e.immediate=function(){return new e("IMMEDIATE",null)},e.prototype.deliverAt=function(e){var t=this.type;switch(t){case"IMMEDIATE":return e;case"AFTER":if(null===this.afterCondition)throw new Error("AfterCondition is required for AFTER delay type");return e+this.afterCondition.durationMillis;default:throw new Error("Unsupported delay type: ".concat(t))}},e}(),_t=function(){function e(e,t,n){this.type=e,this.close=t,this.link=n}return e.fromJson=function(t){var n=t.type,r=t.value,i=this.linkActionTypes.some(function(e){return e===n}),o=this.closeActionTypes.some(function(e){return e===n}),s=this.tabTargetActionsTypes.some(function(e){return e===n}),a=this.windowTargetActionsTypes.some(function(e){return e===n});return new e(i?"LINK":"CLOSE",o?{hideDurationMillis:"HIDDEN"===n?B:null}:void 0,i?{url:null!==r&&void 0!==r?r:"",target:a?"NEW_WINDOW":s?"NEW_TAB":"CURRENT",shouldCloseAfterLink:o}:void 0)},e.fromInteraction=function(t){return"CLOSE"===t.type?new e(t.type,{hideDurationMillis:null}):e.fromJson(t.action)},e.fromAction=function(t){return e.fromJson(t.toJson())},e.linkActionTypes=["LINK_AND_CLOSE","LINK_NEW_TAB","LINK_NEW_TAB_AND_CLOSE","LINK_NEW_WINDOW","LINK_NEW_WINDOW_AND_CLOSE","WEB_LINK"],e.closeActionTypes=["CLOSE","HIDDEN","LINK_AND_CLOSE","LINK_NEW_TAB_AND_CLOSE","LINK_NEW_WINDOW_AND_CLOSE"],e.tabTargetActionsTypes=["LINK_NEW_TAB","LINK_NEW_TAB_AND_CLOSE"],e.windowTargetActionsTypes=["LINK_NEW_WINDOW","LINK_NEW_WINDOW_AND_CLOSE"],e}(),bt=function(e){this.id=e};!function(e){e.MANUAL="MANUAL"}(_e||(_e={}));var wt=function(){function e(e,t,n){this.needRedirect=e,this.redirectType=t,this.redirectUrl=n}return e.fromDto=function(t){var n;return new e(t.needRedirect,(n=t.properties.type,Object.values(_e).includes(n)?t.properties.type:null),t.properties.value)},e}(),xt=function(){function e(e,t){this.includeTargets=e,this.excludeTargets=t}return e.fromJson=function(t){if(null!==t)return new e(d.mapNotNullOrUndefined(t.match,function(e){return se.fromJson(e,Ce.PROPERTY)}),d.mapNotNullOrUndefined(t.notMatch,function(e){return se.fromJson(e,Ce.PROPERTY)}))},e}(),St=function(){function e(e,t,n){this.eventKey=e,this.property=t,this.stats=n}return e.fromJson=function(t){return new e(t.eventKey,t.property,t.stats)},e.prototype.countWithinDays=function(e){return d.sum(this.stats.filter(function(t){return t.date>=e}),function(e){return e.count})},e}(),Et=function(){function e(e){this.name=e,this._tags={},this.name=e}return e.prototype.tags=function(e){var t=this;return Object.entries(e).forEach(function(e){var n=e[0],r=e[1];t._tags[n]=r}),this},e.prototype.tag=function(e,t){return this._tags[e]=t,this},e.prototype.register=function(e){return e.registerTimer({name:this.name,tags:this._tags,type:"TIMER"})},e}(),Tt=function(){function e(e){this._clock=e,this.startTime=this._clock.tick()}return e.start=function(t){return void 0===t&&(t=e.defaultClock),new e(t)},e.prototype.stop=function(e){var t=this._clock.tick()-this.startTime;e.record(t,"microseconds")},e.defaultClock=new S,e}();var Mt=function(){function e(e){this.name=e,this._tags={}}return e.prototype.tags=function(e){var t=this;return Object.entries(e).forEach(function(e){var n=e[0],r=e[1];t._tags[n]=r}),this},e.prototype.tag=function(e,t){return this._tags[e]=t,this},e.prototype.register=function(e){return e.registerCounter({name:this.name,tags:this._tags,type:"COUNTER"})},e}();var At=function(){function e(e){this.compareFn=e,this.data=new Map,this.compareFn=e,this.data=new Map}return e.prototype.values=function(){return Array.from(this.data.values())},e.prototype.keys=function(){return Array.from(this.data.keys())},e.prototype.get=function(e){var t=this,n=this.keys().find(function(n){return t.compareFn(n,e)});return n?this.data.get(n):void 0},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.add=function(e,t){var n=t;return n||(n=e),this.data.set(e,n),this},e.prototype.delete=function(e){if(this.has(e)){var t=this.get(e);return this.data.delete(e),t}},e.prototype.forEach=function(e){this.data.forEach(e)},e.prototype.filter=function(t){for(var n=new e(this.compareFn),r=0,i=this.entries();r<i.length;r++){var o=i[r];t(o[0],o[1])&&n.add(o[0],o[1])}return n},e.prototype.entries=function(){return Array.from(this.data.entries())},e}(),kt=function(){function e(e,t){this.valueSupplier=t,this.field=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.valueSupplier()},enumerable:!1,configurable:!0}),e}();function Ct(e,t){return e.name===t.name&&y.isEquals(e.tags,t.tags)}var It=function(){function e(){this.id=(0,r.A)(),this.name="MetricRegistry",this._metrics=new At(Ct)}return Object.defineProperty(e.prototype,"metrics",{get:function(){return Array.from(this._metrics.values())},enumerable:!1,configurable:!0}),e.prototype.registerCounter=function(e){return this.registerMetricIfNecessary(e,this.createCounter.bind(this))},e.prototype.registerTimer=function(e){return this.registerMetricIfNecessary(e,this.createTimer.bind(this))},e.prototype.counter=function(e,t){return void 0===t&&(t={}),new Mt(e).tags(t).register(this)},e.prototype.timer=function(e,t){return void 0===t&&(t={}),new Et(e).tags(t).register(this)},e.prototype.registerMetricIfNecessary=function(e,t){return this.getOrCreateMetric(e,t)},e.prototype.getOrCreateMetric=function(e,t){var n,r=this._metrics.get(e);return r?n=r:(n=t(e),this._metrics.add(e,n)),n},e.prototype.close=function(){},e}(),Pt=function(e){function t(t,n){var r=e.call(this)||this;return r.scheduler=t,r.pushIntervalMillis=n,r.publishingJob=null,r}return s(t,e),t.prototype.start=function(){var e=this;null===this.publishingJob&&(this.publishingJob=this.scheduler.schedulePeriodically(this.pushIntervalMillis,this.pushIntervalMillis,function(){return e.publish(!1)}),f.log.debug("PushMetricRegistry started. Publish metrics every ".concat(this.pushIntervalMillis,"ms.")))},t.prototype.stop=function(){var e;null===(e=this.publishingJob)||void 0===e||e.cancel(),this.publishingJob=null,this.publish(!0),f.log.debug("PushMetricRegistry stopped.")},t.prototype.close=function(){this.stop()},t}(It),Ot=function(){function e(e){this.counterValue=0,this.id=e}return e.prototype.count=function(){return this.counterValue},e.prototype.increment=function(e){this.counterValue+=null!==e&&void 0!==e?e:1},e.prototype.measure=function(){return[new kt("count",this.count.bind(this))]},e}(),Rt=function(){function e(e){this.id=e,this.currentCounter=new Ot(e)}return e.prototype.flush=function(){var e=this.currentCounter;return this.currentCounter=new Ot(this.id),e},e.prototype.count=function(){return this.currentCounter.count()},e.prototype.increment=function(e){this.currentCounter.increment(e)},e.prototype.measure=function(){return[new kt("count",this.count.bind(this))]},e}();var Dt=function(){function e(e){this._count=0,this._total=0,this._max=0,this.id=e}return e.prototype.count=function(){return this._count},e.prototype.totalTime=function(e){return x.nanosToUnit(this._total,e)},e.prototype.max=function(e){return x.nanosToUnit(this._max,e)},e.prototype.mean=function(e){return 0===this.count()?0:this.totalTime(e)/this.count()},e.prototype.record=function(e,t){if(!(e<0)){var n=x.converter[t](e,"nanoseconds");this._count=this.count()+1,this._total+=n,this._max=Math.max(n,this._max)}},e.prototype.measure=function(){var e=this;return[new kt("count",this.count.bind(this)),new kt("total",function(){return e.totalTime("milliseconds")}),new kt("max",function(){return e.max("milliseconds")}),new kt("mean",function(){return e.mean("milliseconds")})]},e}(),Lt=function(){function e(e){this.id=e,this.currentTimer=new Dt(e)}return e.prototype.flush=function(){var e=this.currentTimer;return this.currentTimer=new Dt(this.id),e},e.prototype.count=function(){return this.currentTimer.count()},e.prototype.totalTime=function(e){return this.currentTimer.totalTime(e)},e.prototype.max=function(e){return this.currentTimer.max(e)},e.prototype.record=function(e,t){this.currentTimer.record(e,t)},e.prototype.mean=function(e){return 0===this.count()?0:this.totalTime(e)/this.count()},e.prototype.measure=function(){var e=this;return[new kt("count",this.count.bind(this)),new kt("total",function(){return e.totalTime("milliseconds")}),new kt("max",function(){return e.max("milliseconds")}),new kt("mean",function(){return e.mean("milliseconds")})]},e}(),Nt=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype.createCounter=function(e){return new Rt(e)},t.prototype.createTimer=function(e){return new Lt(e)},t.prototype.publish=function(e){void 0===e&&(e=!1);var t=this.metrics.reduce(function(e,t){return function(e){return"undefined"!==typeof e.flush&&"function"===typeof e.flush}(t)?e.concat(t.flush()):e},[]);this.flushMetrics(t,e)},t}(Pt),Ft=function(){function e(e){this.id=e}return e.prototype.count=function(){return 0},e.prototype.increment=function(e){},e.prototype.measure=function(){return[new kt("count",this.count.bind(this))]},e}(),zt=function(){function e(e){this._counters=new At(function(e,t){return e.id===t.id}),this.id=e,this.noopCounter=new Ft(e)}return Object.defineProperty(e.prototype,"counters",{get:function(){return Array.from(this._counters.values())},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this._counters.add(e,e.registerCounter(this.id))},e.prototype.count=function(){return(this.counters[0]||this.noopCounter).count()},e.prototype.increment=function(e){this.counters.forEach(function(t){t.increment(e)})},e.prototype.measure=function(){return[new kt("count",this.count.bind(this))]},e}();var Ut,jt=function(){function e(e){this.id=e}return e.prototype.measure=function(){var e=this;return[new kt("count",this.count.bind(this)),new kt("total",function(){return e.totalTime("milliseconds")}),new kt("max",function(){return e.max("milliseconds")}),new kt("mean",function(){return e.mean("milliseconds")})]},e.prototype.count=function(){return 0},e.prototype.totalTime=function(e){return 0},e.prototype.max=function(e){return 0},e.prototype.mean=function(e){return 0},e.prototype.record=function(e,t){},e}(),Bt=function(){function e(e){this._timers=new At(function(e,t){return e.id===t.id}),this.id=e,this.noopTimer=new jt(e)}return Object.defineProperty(e.prototype,"firstTimer",{get:function(){return this.timers[0]||this.noopTimer},enumerable:!1,configurable:!0}),e.prototype.totalTime=function(e){return this.firstTimer.totalTime(e)},e.prototype.max=function(e){return this.firstTimer.max(e)},e.prototype.mean=function(e){return this.firstTimer.mean(e)},e.prototype.record=function(e,t){this.timers.forEach(function(n){n.record(e,t)})},Object.defineProperty(e.prototype,"timers",{get:function(){return Array.from(this._timers.values())},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this._timers.add(e,e.registerTimer(this.id))},e.prototype.count=function(){return this.firstTimer.count()},e.prototype.measure=function(){var e=this;return[new kt("count",this.count.bind(this)),new kt("total",function(){return e.totalTime("milliseconds")}),new kt("max",function(){return e.max("milliseconds")}),new kt("mean",function(){return e.mean("milliseconds")})]},e}(),Vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registries=new At(function(e,t){return e.id===t.id}),t}return s(t,e),t.prototype.createCounter=function(e){var t=new zt(e);return this.addRegistry(t),t},t.prototype.createTimer=function(e){var t=new Bt(e);return this.addRegistry(t),t},t.prototype.addRegistry=function(e){this.registries.forEach(function(t){return e.add(t)})},t.prototype.add=function(e){e instanceof t||this.registries.has(e)||(this.registries.add(e),this.metrics.forEach(function(t){(function(e){return"undefined"!==typeof e.add&&"function"===typeof e.add})(t)&&t.add(e)}))},t.prototype.close=function(){this.registries.forEach(function(e){e.close()})},t}(It),Ht=function(){function e(){}return e.counter=function(t,n){return e.globalRegistry.counter(t,n)},e.timer=function(t,n){return e.globalRegistry.timer(t,n)},e.addRegistry=function(t){e.globalRegistry.add(t),f.log.debug("MetricRegistry added ".concat(t.name))},e.globalRegistry=new Vt,e}(),$t=function(){function e(){}return e.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()},e.isNotEmptyString=function(e){return!h.isNullOrUndefined(e)&&("string"===typeof e&&e.length>0)},e}(),Yt=function(){function e(e,t,n,r,i){this.url=e,this.method=t,this.body=n,this.headers=r,this.options=i}return e.builder=function(){return new Gt},e.get=function(t){return e.builder().url(t).build()},e.prototype.toBuilder=function(){return new Gt(this)},e}(),Gt=function(){function e(e){var t,n,r,i,o,s,a;this._url=null!==(t=null===e||void 0===e?void 0:e.url)&&void 0!==t?t:null,this._method=null!==(n=null===e||void 0===e?void 0:e.method)&&void 0!==n?n:"GET",this._body=null!==(r=null===e||void 0===e?void 0:e.body)&&void 0!==r?r:null,this._headers=null!==(o=null===(i=null===e||void 0===e?void 0:e.headers)||void 0===i?void 0:i.toBuilder())&&void 0!==o?o:Wt.builder(),this._timeoutMillis=null!==(a=null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.timeoutMillis)&&void 0!==a?a:null}return e.prototype.url=function(e){return this._url=e,this},e.prototype.method=function(e){return this._method=e,this},e.prototype.body=function(e){return this._body=e,this},e.prototype.addHeader=function(e,t){return this._headers.add(e,t),this},e.prototype.timeoutMillis=function(e){return this._timeoutMillis=e,this},e.prototype.build=function(){if(null===this._url)throw new Error("url is null");var e={timeoutMillis:this._timeoutMillis};return new Yt(this._url,this._method,this._body,this._headers.build(),e)},e}(),qt=function(){function e(e,t,n){this.statusCode=e,this.body=t,this.headers=n}return e.ok=function(t,n){return e.of(200,t,n)},e.of=function(t,n,r){return new e(t,null!==n&&void 0!==n?n:null,null!==r&&void 0!==r?r:Wt.empty())},e.prototype.isSuccessful=function(){return this.statusCode>=200&&this.statusCode<300},e.prototype.isClientError=function(){return this.statusCode>=400&&this.statusCode<500},e.prototype.isNotModified=function(){return 304===this.statusCode},e}(),Wt=function(){function e(e){this.headers=e}return e.empty=function(){return new e(new Map)},e.builder=function(){return new Kt(new Map)},e.prototype.get=function(e){for(var t=0,n=Array.from(this.headers.entries());t<n.length;t++){var r=n[t],i=r[0],o=r[1];if($t.equalsIgnoreCase(i,e))return o}return null},e.prototype.getOrDefault=function(e,t){var n;return null!==(n=this.get(e))&&void 0!==n?n:t},e.prototype.raw=function(){return Array.from(this.headers.entries()).reduce(function(e,t){var n=t[0],r=t[1];return e[n]=r,e},{})},e.prototype.toBuilder=function(){return new Kt(this.headers)},e.IF_MODIFIED_SINCE="If-Modified-Since",e.LAST_MODIFIED="Last-Modified",e.ACCEPT_ENCODING="Accept-Encoding",e}(),Kt=function(){function e(e){this.headers=e}return e.prototype.add=function(e,t){return this.headers.set(e,t),this},e.prototype.build=function(){return new Wt(this.headers)},e}(),Zt=function(e){function t(t,n,r,i,o){var s=e.call(this,i,o)||this;return s.url=t,s.transport=n,s.synchronousTransport=r,s.start(),s}return s(t,e),t.prototype.flushMetrics=function(e,t){var n=this;d.chunked(e.filter(this.isDispatchTarget.bind(this)),100).forEach(function(e){n.dispatch(e,t)})},t.prototype.isDispatchTarget=function(e){return!(!function(e){return"COUNTER"===e.id.type}(e)&&!function(e){return"TIMER"===e.id.type}(e))&&e.count()>0},t.prototype.dispatch=function(e,t){var n=this.createRequest(e);this.execute(n,t).catch(function(e){return f.log.debug("Failed to flushing metrics: ".concat(e))})},t.prototype.createRequest=function(e){return Yt.builder().url(this.url).method("POST").body(JSON.stringify(this.batch(e))).addHeader("Content-Type","application/json").build()},t.prototype.execute=function(e,t){return t?this.synchronousTransport.send(e):this.transport.send(e)},t.prototype.batch=function(e){return{metrics:e.map(function(e){return{name:e.id.name,type:e.id.type,tags:e.id.tags,measurements:h.fromMap(d.associate(e.measure(),function(e){return[e.field,e.value]}))}})}},t.prototype.onLifecycleChanged=function(e,t){switch(e){case"hidden":case"pagehide":return this.publish(!0);case"visible":case"pageshow":case"blur":case"locationChange":case"focus":return}},t}(Nt),Jt=function(){function e(){}return e.experiment=function(e,t,n){var r=Ht.timer("experiment.decision",{key:String(t),variation:n.variation,reason:String(n.reason)});e.stop(r)},e.featureFlag=function(e,t,n){var r=Ht.timer("feature.flag.decision",{key:String(t),on:String(n.isOn),reason:String(n.reason)});e.stop(r)},e.remoteConfig=function(e,t,n){var r=Ht.timer("remote.config.decision",{key:String(t),reason:String(n.reason)});e.stop(r)},e}(),Xt=function(){function e(){}return e.record=function(t,n,r){var i=Ht.timer("api.call",{operation:t,success:e.success(r)});n.stop(i)},e.success=function(e){return null===e?"false":String(e.isSuccessful()||e.isNotModified())},e}(),Qt=function(){function e(){}return e.decide=function(e,t,n,r){if(h.isNullOrUndefined(n))return this.decision(e,t,"NULL",n,r);switch(typeof n){case"string":return this.decision(e,t,"STRING",n,r);case"number":return this.decision(e,t,"NUMBER",n,r);case"boolean":return this.decision(e,t,"BOOLEAN",n,r);default:return this.decision(e,t,"UNKNOWN",n,r)}},e.decision=function(e,t,n,r,i){return h.isNullOrUndefined(t)?Y.of(r,K.INVALID_INPUT):e.remoteConfig(t,i,n,r)},e}(),en=f.log,tn=function(){function e(e,t,n){this.core=e,this.userManager=t,this.user=n}return e.prototype.get=function(e,t){var n,r=Tt.start();try{n=this.decide(e,t)}catch(i){en.error("Unexpected exception while deciding remote config parameter[".concat(e,"]. Returning default value. : ").concat(i)),n=Y.of(t,K.EXCEPTION)}return Jt.remoteConfig(r,e,n),n.value},e.prototype.decide=function(e,t){var n=this.userManager.resolve(this.user);return Qt.decide(this.core,e,t,n)},e}(),nn=function(){function e(){this._properties=new Map,this.MAX_PROPERTIES_COUNT=128,this.MAX_PROPERTY_KEY_LENGTH=128}return e.prototype.contains=function(e){return this._properties.has(e)},e.prototype.remove=function(e){var t=this;return e instanceof Map&&e.forEach(function(e,n){t.remove(n)}),"string"===typeof e&&this._properties.delete(e),this},e.prototype.compute=function(e,t){var n=this._properties.get(e),r=t(n);null!==r?this.add(e,r):(null!==n||this.contains(e))&&this.remove(e)},e.prototype.add=function(e,t,n){if(void 0===n&&(n=!1),n&&this.contains(e))return this;if(this._properties.size>=this.MAX_PROPERTIES_COUNT)return this;if("string"===typeof e&&e.length>this.MAX_PROPERTY_KEY_LENGTH)return this;var r=_.sanitizeValue(e,t);return h.isNullOrUndefined(r)||this._properties.set(e,r),this},e.prototype.addProperties=function(e,t){var n=this;return void 0===t&&(t=!1),e.forEach(function(e,r){n.add(r,e,t)}),this},e.prototype.build=function(){return this._properties},e}();!function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.UNSET="$unset",e.INCREMENT="$increment",e.APPEND="$append",e.APPEND_ONCE="$appendOnce",e.PREPEND="$prepend",e.PREPEND_ONCE="$prependOnce",e.REMOVE="$remove",e.CLEAR_ALL="$clearAll"}(Ut||(Ut={}));var rn=function(){function e(){}return e.prototype.operate=function(e,t){return 0===e.size?t:0===t.size?e:(new nn).addProperties(e).addProperties(t).build()},e}(),on=function(){function e(){}return e.prototype.operate=function(e,t){return 0===e.size?t:0===t.size?e:(new nn).addProperties(e).addProperties(t,!0).build()},e}(),sn=function(){function e(){}return e.prototype.operate=function(e,t){return 0===e.size?new Map:0===t.size?e:(new nn).addProperties(e).remove(t).build()},e}(),an=function(){function e(){}return e.prototype.operate=function(e,t){var n=this;if(0===t.size)return e;var r=new nn;return r.addProperties(e),t.forEach(function(e,t){r.compute(t,function(t){return n.increment(t,e)})}),r.build()},e.prototype.increment=function(e,t){return"number"!==typeof t?e:"number"!==typeof e?void 0===e||null===e?t:e:e+t},e}(),ln=function(){function e(){}return e.prototype.operate=function(e,t){var n=this;if(0===t.size)return e;var r=new nn;return r.addProperties(e),t.forEach(function(e,t){r.compute(t,function(t){return n.compute(t,e)})}),r.build()},e.prototype.compute=function(e,t){var n=this.toArray(e),r=this.toArray(t);return this.operateArray(n,r)},e.prototype.toArray=function(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]},e.prototype.contains=function(e,t){return e.includes(t)},e.prototype.prepend=function(e,t,n){return void 0===n&&(n=!1),n&&this.contains(t,e)?t:u([e],t,!0)},e.prototype.append=function(e,t,n){return void 0===n&&(n=!1),n&&this.contains(e,t)?e:u(u([],e,!0),[t],!1)},e}(),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){var n=this;return t.reduce(function(e,t){return n.append.bind(n)(e,t)},e)},t}(ln),un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){return t.reduce(this.appendOnce.bind(this),e)},t.prototype.appendOnce=function(e,t){return this.append(e,t,!0)},t}(ln),hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){var n=this;return t.reduceRight(function(e,t){return n.prepend.bind(n)(t,e)},e)},t}(ln),dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){var n=this;return t.reduce(this.appendOnce.bind(this),[]).reduceRight(function(e,t){return n.prependOnce.bind(n)(t,e)},e)},t.prototype.appendOnce=function(e,t){return this.append(e,t,!0)},t.prototype.prependOnce=function(e,t){return this.prepend(e,t,!0)},t}(ln),pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){return t.reduce(this.remove.bind(this),e)},t.prototype.remove=function(e,t){return e.filter(function(e){return e!==t})},t}(ln),fn=function(){function e(){}return e.prototype.operate=function(e,t){return new Map},e}(),mn=function(){function e(){}return e.get=function(e){switch(e){case Ut.SET:return new rn;case Ut.SET_ONCE:return new on;case Ut.UNSET:return new sn;case Ut.INCREMENT:return new an;case Ut.APPEND:return new cn;case Ut.APPEND_ONCE:return new un;case Ut.PREPEND:return new hn;case Ut.PREPEND_ONCE:return new dn;case Ut.CLEAR_ALL:return new fn;case Ut.REMOVE:return new pn}},e}(),gn=function(){function e(){this.operations=new Map}return e.prototype.set=function(e,t){return this.add(Ut.SET,e,t)},e.prototype.setOnce=function(e,t){return this.add(Ut.SET_ONCE,e,t)},e.prototype.unset=function(e){return this.add(Ut.UNSET,e,"-")},e.prototype.increment=function(e,t){return this.add(Ut.INCREMENT,e,t)},e.prototype.append=function(e,t){return this.add(Ut.APPEND,e,t)},e.prototype.appendOnce=function(e,t){return this.add(Ut.APPEND_ONCE,e,t)},e.prototype.prepend=function(e,t){return this.add(Ut.PREPEND,e,t)},e.prototype.prependOnce=function(e,t){return this.add(Ut.PREPEND_ONCE,e,t)},e.prototype.remove=function(e,t){return this.add(Ut.REMOVE,e,t)},e.prototype.clearAll=function(){return this.add(Ut.CLEAR_ALL,"clearAll","-")},e.prototype.build=function(){var e=Array.from(this.operations.entries()).map(function(e){return[e[0],e[1].build()]});return new yn(new Map(e))},e.prototype.containsKey=function(e){return Array.from(this.operations.entries()).some(function(t){return t[0],t[1].contains(e)})},e.prototype.add=function(e,t,n){if(this.containsKey(t))return this;this.operations.has(e)||this.operations.set(e,new nn);var r=this.operations.get(e);return null===r||void 0===r||r.add(t,n),this},e}(),yn=function(){function e(e){this.operations=null!==e&&void 0!==e?e:new Map}return e.prototype.operate=function(e){var t=e;return this.operations.forEach(function(e,n){t=mn.get(n).operate(t,e)}),t},e.prototype.toEvent=function(){var e={key:"$properties"};return this.operations.forEach(function(t,n){var r,i;e.properties=a(a({},e.properties),((r={})[n]=a(a({},null===(i=e.properties)||void 0===i?void 0:i[n]),_.sanitize(h.fromMap(t))),r))}),e},e.prototype.toSecuredEvent=function(){var e={key:"$secured_properties"};return this.operations.forEach(function(t,n){var r,i;e.properties=a(a({},e.properties),((r={})[n]=a(a({},null===(i=e.properties)||void 0===i?void 0:i[n]),_.sanitize(h.fromMap(t))),r))}),e},e.prototype.toRecord=function(){var e={};return this.operations.forEach(function(t,n){var r={};t.forEach(function(e,t){r[t]=e}),e[n]=r}),e},e}(),vn=function(){function e(){}return e.timeout=function(e,t){return new Promise(function(n,r){setTimeout(function(){return r(new Error("timeout (".concat(t,"ms)")))},t),e.then(n,r)})},e}(),_n=function(){function e(e,t,n,r,i,o,s){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=""),this.pagePath=e,this.host=t,this.hostname=n,this.url=r,this.referrer=i,this.queryParameter=o,this.protocol=s}return e.prototype.isEquals=function(e){return this.url===e.url},Object.defineProperty(e.prototype,"pageTitle",{get:function(){return"undefined"===typeof window||"undefined"===typeof document?"":window.document.title},enumerable:!1,configurable:!0}),e.createWithCurrentPage=function(){return"undefined"===typeof window||"undefined"===typeof document?new e:new e(window.location.pathname,window.location.host,window.location.hostname,window.location.href,window.document.referrer,window.location.search,window.location.protocol)},e.prototype.toProperties=function(){return{pagePath:this.pagePath,pageTitle:this.pageTitle,host:this.host,url:this.url,referrer:this.referrer,queryParameter:this.queryParameter,protocol:this.protocol.replace(":","")}},e}(),bn=function(){function e(e){this.value=e}return e.create=function(t){return new e(t)},e.prototype.getValue=function(){return this.value},e}(),wn=function(){function e(){}return e.toPublic=function(e){return{key:e.key}},e}(),xn=function(){function e(){}return e.toPublic=function(e){return{close:e.close.bind(e),inAppMessage:wn.toPublic(e.context.inAppMessage)}},e}(),Sn=f.log,En=function(){function e(e,t,n,r,i,o,s,a,l){this.core=e,this.synchronizer=t,this.sessionManager=n,this.userManager=r,this.piiEventManager=i,this.fetchThrottler=o,this.pageEventTracker=s,this.inAppMessageUi=a,this.devTools=l,this.initialized=!1,this.initialize=this.initialize.bind(this),this.getSessionId=this.getSessionId.bind(this),this.getUser=this.getUser.bind(this),this.setUser=this.setUser.bind(this),this.setUserId=this.setUserId.bind(this),this.setDeviceId=this.setDeviceId.bind(this),this.setUserProperty=this.setUserProperty.bind(this),this.setUserProperties=this.setUserProperties.bind(this),this.updateUserProperties=this.updateUserProperties.bind(this),this.updatePushSubscriptions=this.updatePushSubscriptions.bind(this),this.updateSmsSubscriptions=this.updateSmsSubscriptions.bind(this),this.updateKakaoSubscriptions=this.updateKakaoSubscriptions.bind(this),this.resetUser=this.resetUser.bind(this),this.variation=this.variation.bind(this),this.variationDetail=this.variationDetail.bind(this),this.isFeatureOn=this.isFeatureOn.bind(this),this.featureFlagDetail=this.featureFlagDetail.bind(this),this.track=this.track.bind(this),this.trackPageView=this.trackPageView.bind(this),this.remoteConfig=this.remoteConfig.bind(this),this.onReady=this.onReady.bind(this),this.onInitialized=this.onInitialized.bind(this),this.showUserExplorer=this.showUserExplorer.bind(this),this.hideUserExplorer=this.hideUserExplorer.bind(this),this.fetch=this.fetch.bind(this),this.close=this.close.bind(this),this.setInAppMessageListener=this.setInAppMessageListener.bind(this),this.getExperiment=this.getExperiment.bind(this),this.setPhoneNumber=this.setPhoneNumber.bind(this),this.unsetPhoneNumber=this.unsetPhoneNumber.bind(this),this.getDisplayedInAppMessageView=this.getDisplayedInAppMessageView.bind(this),this.initialization=this.initialize()}return e.prototype.initialize=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),Sn.debug("HackleClient initializing"),[4,this.synchronizer.sync()];case 1:return t.sent(),Sn.debug("HackleClient initialized"),[3,4];case 2:throw e=t.sent(),Sn.error("HackleClient initialize failed: ".concat(e)),e;case 3:return this.initialized=!0,[7];case 4:return[2]}})})},e.prototype.getSessionId=function(){return this.sessionManager.sessionId},e.prototype.getUser=function(){return this.userManager.currentUser},e.prototype.setUser=function(e){try{var t=oe(e);if(!t)return Sn.warn("invalid user"),Promise.resolve();var n=this.userManager.setUser(t);return this.userManager.syncIfNeeded(n).catch(function(){})}catch(r){return Sn.error("Unexpected exception while set user: ".concat(r)),Promise.resolve()}},e.prototype.setUserId=function(e){try{var t=void 0;if(h.isNullOrUndefined(e))t=this.userManager.setUserId(void 0);else{var n=y.sanitizeValue(e);if(!n)return Sn.warn("Invalid userId. [userId=".concat(e,"]")),Promise.resolve();t=this.userManager.setUserId(n)}return this.userManager.syncIfNeeded(t).catch(function(){})}catch(r){return Sn.error("Unexpected exception while set userId: ".concat(r)),Promise.resolve()}},e.prototype.setDeviceId=function(e){try{var t=y.sanitizeValue(e);if(!t)return Sn.warn("Invalid deviceId. [deviceId=".concat(e,"]")),Promise.resolve();var n=this.userManager.setDeviceId(t);return this.userManager.syncIfNeeded(n).catch(function(){})}catch(r){return Sn.error("Unexpected exception while set deviceId: ".concat(r)),Promise.resolve()}},e.prototype.setUserProperty=function(e,t){var n=(new gn).set(e,t).build();return this.updateUserProperties(n)},e.prototype.setUserProperties=function(e){try{var t=_.sanitize(e),n=new gn;return Object.entries(t).forEach(function(e){var t=e[0],r=e[1];n.set(t,r)}),this.updateUserProperties(n.build())}catch(r){return Sn.error("Unexpected exception while set userProperties: ".concat(r)),Promise.resolve()}},e.prototype.updateUserProperties=function(e){try{var t=e.toEvent();return this.track(t),this.userManager.updateUserProperties(e),this.core.flush(!1),Promise.resolve()}catch(n){return Sn.error("Unexpected exception while update userProperties: ".concat(n)),Promise.resolve()}},e.prototype.updatePushSubscriptions=function(e){try{var t=e.toEvent("$push_subscriptions");return this.track(t),this.core.flush(!1),Promise.resolve()}catch(n){return Sn.error("Unexpected exception while update userProperties: ".concat(n)),Promise.resolve()}},e.prototype.updateSmsSubscriptions=function(e){try{var t=e.toEvent("$sms_subscriptions");return this.track(t),this.core.flush(!1),Promise.resolve()}catch(n){return Sn.error("Unexpected exception while update userProperties: ".concat(n)),Promise.resolve()}},e.prototype.updateKakaoSubscriptions=function(e){try{var t=e.toEvent("$kakao_subscriptions");return this.track(t),this.core.flush(!1),Promise.resolve()}catch(n){return Sn.error("Unexpected exception while update userProperties: ".concat(n)),Promise.resolve()}},e.prototype.resetUser=function(){try{var e=this.userManager.resetUser(),t=(new gn).clearAll().build();return this.track(t.toEvent()),this.userManager.syncIfNeeded(e).catch(function(){})}catch(n){return Sn.error("Unexpected exception while reset user: ".concat(n)),Promise.resolve()}},e.prototype.setPhoneNumber=function(e){try{if("string"!==typeof e)return Sn.error("Invalid value ".concat(e,": phoneNumber value type must be string.")),Promise.resolve();var t=bn.create(e),n=S.instance.currentMillis();return this.piiEventManager.setPhoneNumber(t,n),this.core.flush(!1),Promise.resolve()}catch(r){return Sn.error("Unexpected exception occurred while setting phone number: ".concat(r)),Promise.resolve()}},e.prototype.unsetPhoneNumber=function(){try{var e=S.instance.currentMillis();return this.piiEventManager.unsetPhoneNumber(e),this.core.flush(!1),Promise.resolve()}catch(t){return Sn.error("Unexpected exception occurred while unsetting phone number: ".concat(t)),Promise.resolve()}},e.prototype.variation=function(e,t,n){return this.variationDetail(e,t,n).variation},e.prototype.variationDetail=function(e,t,n){var r=n||"A",i=Tt.start(),o=function(n){try{var i=n.userManager.resolve(t);return n.core.experiment(e,i,r)}catch(o){return Sn.error("Unexpected exception while deciding variation for experiment[".concat(e,"]. Returning default variation[").concat(r,"] : ").concat(o)),G.of(r,K.EXCEPTION)}}(this);return Jt.experiment(i,e,o),o},e.prototype.isFeatureOn=function(e,t){return this.featureFlagDetail(e,t).isOn},e.prototype.featureFlagDetail=function(e,t){var n=Tt.start(),r=function(n){try{var r=n.userManager.resolve(t);return n.core.featureFlag(e,r)}catch(i){return Sn.error("Unexpected exception while deciding feature flag[".concat(e,"]. Returning default value[false] : ").concat(i)),q.off(K.EXCEPTION)}}(this);return Jt.featureFlag(n,e,r),r},e.prototype.track=function(e,t){try{Sn.debug("track event : ".concat(JSON.stringify(e)));var n=this._convertEvent(e),r=this.userManager.resolve(t);this.core.track(n,r)}catch(i){Sn.error("Unexpected exception while tracking event: ".concat(i))}},e.prototype.trackPageView=function(e){var t=_n.createWithCurrentPage();this.pageEventTracker.track(t)},e.prototype.remoteConfig=function(e){return new tn(this.core,this.userManager,e)},e.prototype.onReady=function(e,t){void 0===t&&(t=3e3),this.onInitialized({timeout:t}).finally(function(){return e()})},e.prototype.getExperiment=function(e){try{return this.core.getExperiment(e)}catch(t){return void Sn.error('"Unexpected exception while get experiment['.concat(e,"]"))}},e.prototype.onInitialized=function(e){var t;return l(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:if(this.initialized)return[2,{success:!0}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,vn.timeout(this.initialization,null!==(t=null===e||void 0===e?void 0:e.timeout)&&void 0!==t?t:3e3)];case 2:return r.sent(),[2,{success:!0}];case 3:return n=r.sent(),Sn.error("Failed to onInitialized: ".concat(n)),[2,{success:!1}];case 4:return[2]}})})},e.prototype._convertEvent=function(e){return"string"===typeof e?{key:e}:e},e.prototype.showUserExplorer=function(){var e;(null===(e=this.devTools)||void 0===e?void 0:e.userExplorer)?(Sn.debug("UserExplorer opened."),Ht.counter("user.explorer.show",{}).increment(),this.devTools.manager.userExplorer(this.devTools.userExplorer)):Sn.error("UserExplorer is not provided")},e.prototype.hideUserExplorer=function(){this.devTools?this.devTools.manager.close():Sn.warn("There is no active HackleDevtools.")},e.prototype.fetch=function(){var e=this;return this.fetchThrottler.execute(function(){return e.synchronizer.sync()},function(){return Promise.resolve()})},e.prototype.setInAppMessageListener=function(e){this.inAppMessageUi.setListener(e)},e.prototype.getDisplayedInAppMessageView=function(){return this.inAppMessageUi.currentMessageView?xn.toPublic(this.inAppMessageUi.currentMessageView):null},e.prototype.close=function(){Sn.debug("HackleClient closing"),this.core.close(),this.synchronizer.close()},e}(),Tn=f.log,Mn=function(){function e(e,t,n){this.invocationProcessor=e,this.user=t,this.browserPropertyProvider=n}return e.prototype.get=function(e,t){var n=typeof t;try{var r={command:"remoteConfig",parameters:{defaultValue:t,key:e,valueType:n,user:this.user},browserProperties:this.browserPropertyProvider.getBrowserProperties()},i=this.invocationProcessor.process(r);if(!i)throw new Error("invoke result data not exists");switch(n){case"number":return Number(i);case"boolean":return Boolean(i);default:return i}}catch(o){return Tn.error("Unexpected exception while deciding remote config parameter[".concat(e,"]. Returning default value. : ").concat(o)),t}},e}(),An=function(){function e(){}return e.tryParse=function(e){try{return new URL(e)}catch(t){return}},e.removePathnameTrailingSlash=function(t){var n=t instanceof URL?t:e.tryParse(t);if(!n)return String(t);if(n.pathname.endsWith("/")){n.pathname=n.pathname.replace(/\/+$/,"")}return n.href},e.tryDecodeURI=function(e){try{return decodeURI(e)}catch(t){return}},e.tryDecodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(t){return}},e.decodeURIOrOriginal=function(e){try{return decodeURI(e)}catch(t){return e}},e.decodeURIComponentOrOriginal=function(e){try{return decodeURIComponent(e)}catch(t){return e}},e}(),kn=function(){function e(e){void 0===e&&(e={days:0,isCrossSubdomain:!1,isSecure:!1}),this.options=e}return e.extractDomain=function(e){var t=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,n=e.split("."),r=n[n.length-1];(r.length>4||"com"===r||"org"===r)&&(t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i);var i=e.match(t);return i?i[0]:""},e.prototype.getItem=function(e){for(var t,n=e+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var o=r[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return null!==(t=An.tryDecodeURIComponent(o.substring(n.length,o.length)))&&void 0!==t?t:null}return null},e.prototype.getAllItem=function(e){var t=document.cookie.split("; ").map(function(e){return e.split("=")}),n=null===e||void 0===e?void 0:e.keyPrefix;return n?t.filter(function(e){var t=e[0];return e[1],t.startsWith(n)}):t},e.prototype.setItem=function(t,n,r){var i=a(a({},this.options),r),o="",s="",l="",c="";if(i.isCrossSubdomain){var u=e.extractDomain(document.location.hostname);o=u?"; domain=."+u:""}if(i.days){var h=new Date;h.setTime(h.getTime()+24*i.days*60*60*1e3),s="; expires="+h.toUTCString()}i.sameSite&&(c="; SameSite=".concat(i.sameSite)),i.isSecure&&(l+="; secure");var d=t+"="+encodeURIComponent(n)+s+"; path=/"+o+c+l;return document.cookie=d,d},e.prototype.removeItem=function(e,t){this.setItem(e,"",a(a({},t),{days:-1}))},e.prototype.getOptions=function(){return this.options},e.getInstance=function(t){return void 0===t&&(t={days:3650,isCrossSubdomain:!0}),e.storage||(e.storage=new e(t)),e.storage},e}(),Cn=function(){function e(){}return e.prototype.initialize=function(){kn.getInstance().getItem(I)||On()},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"hidden":case"pagehide":return Pn();case"blur":case"focus":case"locationChange":case"visible":case"pageshow":return}},e}();function In(){var e=kn.getInstance(),t=e.getItem(P);if(t)return t;var n=e.getItem(I);return n||On()}function Pn(){kn.getInstance().removeItem(P)}function On(){var e=(0,r.A)();return kn.getInstance().setItem(I,e),e}var Rn,Dn=f.log;!function(e){e.native="native",e.web_view_wrapper="web_view_wrapper"}(Rn||(Rn={}));var Ln=function(){function e(e,t){this.invocationProcessor=e,this.browserPropertyProvider=t,this.getSessionId=this.getSessionId.bind(this),this.getUser=this.getUser.bind(this),this.setUser=this.setUser.bind(this),this.setUserId=this.setUserId.bind(this),this.setDeviceId=this.setDeviceId.bind(this),this.setUserProperty=this.setUserProperty.bind(this),this.setUserProperties=this.setUserProperties.bind(this),this.updateUserProperties=this.updateUserProperties.bind(this),this.updatePushSubscriptions=this.updatePushSubscriptions.bind(this),this.updateSmsSubscriptions=this.updateSmsSubscriptions.bind(this),this.updateKakaoSubscriptions=this.updateKakaoSubscriptions.bind(this),this.resetUser=this.resetUser.bind(this),this.variation=this.variation.bind(this),this.variationDetail=this.variationDetail.bind(this),this.isFeatureOn=this.isFeatureOn.bind(this),this.featureFlagDetail=this.featureFlagDetail.bind(this),this.track=this.track.bind(this),this.trackPageView=this.trackPageView.bind(this),this.remoteConfig=this.remoteConfig.bind(this),this.onReady=this.onReady.bind(this),this.onInitialized=this.onInitialized.bind(this),this.showUserExplorer=this.showUserExplorer.bind(this),this.hideUserExplorer=this.hideUserExplorer.bind(this),this.fetch=this.fetch.bind(this),this.close=this.close.bind(this),this.setInAppMessageListener=this.setInAppMessageListener.bind(this),this.getExperiment=this.getExperiment.bind(this),this.setPhoneNumber=this.setPhoneNumber.bind(this),this.unsetPhoneNumber=this.unsetPhoneNumber.bind(this),this.getDisplayedInAppMessageView=this.getDisplayedInAppMessageView.bind(this)}return e.prototype.getSessionId=function(){try{var e={command:"getSessionId",browserProperties:this.browserPropertyProvider.getBrowserProperties()},t=this.invocationProcessor.process(e);return null!==t&&void 0!==t?t:In()}catch(n){return Dn.error("Unexpected exception while get sessionId: ".concat(n)),In()}},e.prototype.getUser=function(){var e;try{var t={command:"getUser",browserProperties:this.browserPropertyProvider.getBrowserProperties()},n=this.invocationProcessor.process(t);return null!==(e=oe(n))&&void 0!==e?e:this.defaultUser()}catch(r){return Dn.error("Unexpected exception while get user: ".concat(r)),this.defaultUser()}},e.prototype.setUser=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){try{if(!(t=oe(e)))return Dn.warn("invalid user"),[2];n={command:"setUser",parameters:{user:t},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(n)}catch(i){Dn.error("Unexpected exception while set user: ".concat(i))}return[2]})})},e.prototype.setUserId=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){try{if(t=void 0,h.isNullOrUndefined(e))t=null;else if(!(t=y.sanitizeValue(e)))return Dn.warn("Invalid userId. [userId=".concat(e,"]")),[2];n={command:"setUserId",parameters:{userId:t},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(n)}catch(i){Dn.error("Unexpected exception while set userId: ".concat(i))}return[2]})})},e.prototype.setDeviceId=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){try{if(!(t=y.sanitizeValue(e)))return Dn.warn("Invalid deviceId. [deviceId=".concat(e,"]")),[2];n={command:"setDeviceId",parameters:{deviceId:t},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(n)}catch(i){Dn.error("Unexpected exception while set deviceId: ".concat(i))}return[2]})})},e.prototype.setUserProperty=function(e,t){return l(this,void 0,void 0,function(){var n;return c(this,function(r){try{n={command:"setUserProperty",parameters:{key:e,value:t},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(n)}catch(i){Dn.error("Unexpected exception while set userProperty: ".concat(i))}return[2]})})},e.prototype.setUserProperties=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){try{t=_.sanitize(e),n=new gn,Object.entries(t).forEach(function(e){var t=e[0],r=e[1];n.set(t,r)}),this.updateUserProperties(n.build())}catch(i){Dn.error("Unexpected exception while set userProperties: ".concat(i))}return[2]})})},e.prototype.updateUserProperties=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{t={command:"updateUserProperties",parameters:{operations:e.toRecord()},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(r){Dn.error("Unexpected exception while update userProperties: ".concat(r))}return[2]})})},e.prototype.updatePushSubscriptions=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{t={command:"updatePushSubscriptions",parameters:{operations:e.toRecord()},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(r){Dn.error("Unexpected exception while update push subscriptions: ".concat(r))}return[2]})})},e.prototype.updateSmsSubscriptions=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{t={command:"updateSmsSubscriptions",parameters:{operations:e.toRecord()},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(r){Dn.error("Unexpected exception while update sms subscriptions: ".concat(r))}return[2]})})},e.prototype.updateKakaoSubscriptions=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{t={command:"updateKakaoSubscriptions",parameters:{operations:e.toRecord()},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(r){Dn.error("Unexpected exception while update Kakao subscriptions: ".concat(r))}return[2]})})},e.prototype.resetUser=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){try{e={command:"resetUser",browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(e)}catch(n){Dn.error("Unexpected exception while reset user: ".concat(n))}return[2]})})},e.prototype.setPhoneNumber=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{if("string"!==typeof e)return Dn.error("Invalid type ".concat(e,": phoneNumber value must be string.")),[2,Promise.resolve()];t={command:"setPhoneNumber",parameters:{phoneNumber:e},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(r){Dn.error("Unexpected exception occurred while setting phone number: ".concat(r))}return[2]})})},e.prototype.unsetPhoneNumber=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){try{e={command:"unsetPhoneNumber",browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(e)}catch(n){Dn.error("Unexpected exception occurred while unsetting phone number: ".concat(n))}return[2]})})},e.prototype.variation=function(e,t,n){void 0===n&&(n="A");try{var r={command:"variation",parameters:{experimentKey:e,defaultVariation:n,user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()},i=this.invocationProcessor.process(r);if(!i)throw new Error("invoke result data not exists");return i}catch(o){return Dn.error("Unexpected exception while deciding variation for experiment[".concat(e,"]. Returning default variation[").concat(n,"] : ").concat(o)),n}},e.prototype.variationDetail=function(e,t,n){var r;void 0===n&&(n="A");try{var i={command:"variationDetail",parameters:{experimentKey:e,defaultVariation:n,user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()},o=this.invocationProcessor.process(i);if(null===o)throw new Error("invoke result data not exists");return G.of(o.variation,o.reason,new T(null!==(r=o.config.parameters)&&void 0!==r?r:{}))}catch(s){return Dn.error("Unexpected exception while deciding variation for experiment[".concat(e,"]. Returning default variation[").concat(n,"] : ").concat(s)),G.of(n,K.EXCEPTION)}},e.prototype.isFeatureOn=function(e,t){try{var n={command:"isFeatureOn",parameters:{featureKey:e,user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()},r=this.invocationProcessor.process(n);if(null===r)throw new Error("invoke result data not exists");return Boolean(r)}catch(i){return Dn.error("Unexpected exception while deciding feature flag[".concat(e,"]. Returning default value[false] : ").concat(i)),!1}},e.prototype.featureFlagDetail=function(e,t){var n;try{var r={command:"featureFlagDetail",parameters:{featureKey:e,user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()},i=this.invocationProcessor.process(r);if(null===i)throw new Error("invoke result data not exists");return new q(i.isOn,i.reason,new T(null!==(n=i.config.parameters)&&void 0!==n?n:{}),void 0)}catch(o){return Dn.error("Unexpected exception while deciding feature flag[".concat(e,"]. Returning default value[false] : ").concat(o)),q.off(K.EXCEPTION)}},e.prototype.track=function(e,t){try{var n={command:"track",parameters:{event:this.convertEvent(e),user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()};this.invocationProcessor.process(n)}catch(r){Dn.error("Unexpected exception while tracking event: ".concat(r))}},e.prototype.trackPageView=function(e){Dn.info("Web to app integration feature is not support 'trackPageView' method")},e.prototype.remoteConfig=function(e){return new Mn(this.invocationProcessor,this.convertUser(e),this.browserPropertyProvider)},e.prototype.onReady=function(e,t){e()},e.prototype.showUserExplorer=function(){try{var e={command:"showUserExplorer",browserProperties:this.browserPropertyProvider.getBrowserProperties()};this.invocationProcessor.process(e)}catch(t){Dn.error("Unexpected exception while show userExplorer: ".concat(t))}},e.prototype.hideUserExplorer=function(){try{var e={command:"hideUserExplorer",browserProperties:this.browserPropertyProvider.getBrowserProperties()};this.invocationProcessor.process(e)}catch(t){Dn.error("Unexpected exception while hide userExplorer: ".concat(t))}},e.prototype.setInAppMessageListener=function(e){Dn.info("Web to app integration feature is not support 'setInAppMessageListener' method")},e.prototype.fetch=function(){return Promise.resolve()},e.prototype.onInitialized=function(e){return Promise.resolve({success:!0})},e.prototype.close=function(){Dn.info("Web to app integration feature is not support 'close' method")},e.prototype.getExperiment=function(e){Dn.info("Web to app integration feature is not support 'getExperiment' method")},e.prototype.convertEvent=function(e){return"string"===typeof e?{key:e}:e},e.prototype.convertUser=function(e){var t;return"string"===typeof e?e:e&&null!==(t=oe(e))&&void 0!==t?t:void 0},e.prototype.defaultUser=function(){return{deviceId:In()}},e.prototype.getDisplayedInAppMessageView=function(){return Dn.info("Web to app integration feature is not support 'getDisplayedInAppMessageView' method"),null},e}(),Nn=function(){function e(e,t){this.browser=e,this.app=t,this.getSessionId=this.getSessionId.bind(this),this.getUser=this.getUser.bind(this),this.setUser=this.setUser.bind(this),this.setUserId=this.setUserId.bind(this),this.setDeviceId=this.setDeviceId.bind(this),this.setUserProperty=this.setUserProperty.bind(this),this.setUserProperties=this.setUserProperties.bind(this),this.updateUserProperties=this.updateUserProperties.bind(this),this.updatePushSubscriptions=this.updatePushSubscriptions.bind(this),this.updateSmsSubscriptions=this.updateSmsSubscriptions.bind(this),this.updateKakaoSubscriptions=this.updateKakaoSubscriptions.bind(this),this.resetUser=this.resetUser.bind(this),this.variation=this.variation.bind(this),this.variationDetail=this.variationDetail.bind(this),this.isFeatureOn=this.isFeatureOn.bind(this),this.featureFlagDetail=this.featureFlagDetail.bind(this),this.track=this.track.bind(this),this.trackPageView=this.trackPageView.bind(this),this.remoteConfig=this.remoteConfig.bind(this),this.onReady=this.onReady.bind(this),this.onInitialized=this.onInitialized.bind(this),this.showUserExplorer=this.showUserExplorer.bind(this),this.hideUserExplorer=this.hideUserExplorer.bind(this),this.fetch=this.fetch.bind(this),this.close=this.close.bind(this),this.setInAppMessageListener=this.setInAppMessageListener.bind(this),this.getExperiment=this.getExperiment.bind(this),this.setPhoneNumber=this.setPhoneNumber.bind(this),this.unsetPhoneNumber=this.unsetPhoneNumber.bind(this),this.getDisplayedInAppMessageView=this.getDisplayedInAppMessageView.bind(this)}return e.prototype.getSessionId=function(){return this.browser.getSessionId()},e.prototype.getUser=function(){return this.browser.getUser()},e.prototype.syncUser=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this.browser.getUser(),[4,this.app.setUser(e)];case 1:return t.sent(),[2]}})})},e.prototype.setUser=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setUser(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.setUserId=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setUserId(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.setDeviceId=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setDeviceId(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.setUserProperty=function(e,t){return l(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,this.browser.setUserProperty(e,t)];case 1:return n.sent(),[4,this.syncUser()];case 2:return n.sent(),[2]}})})},e.prototype.setUserProperties=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setUserProperties(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.updateUserProperties=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.updateUserProperties(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.updatePushSubscriptions=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.updatePushSubscriptions(e)];case 1:return t.sent(),[2]}})})},e.prototype.updateSmsSubscriptions=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.updateSmsSubscriptions(e)];case 1:return t.sent(),[2]}})})},e.prototype.updateKakaoSubscriptions=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.updateKakaoSubscriptions(e)];case 1:return t.sent(),[2]}})})},e.prototype.resetUser=function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.browser.resetUser()];case 1:return e.sent(),[4,this.syncUser()];case 2:return e.sent(),[2]}})})},e.prototype.setPhoneNumber=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setPhoneNumber(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.unsetPhoneNumber=function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.browser.unsetPhoneNumber()];case 1:return e.sent(),[4,this.syncUser()];case 2:return e.sent(),[2]}})})},e.prototype.variation=function(e,t,n){return void 0===n&&(n="A"),this.browser.variation(e,t,n)},e.prototype.variationDetail=function(e,t,n){return void 0===n&&(n="A"),this.browser.variationDetail(e,t,n)},e.prototype.isFeatureOn=function(e,t){return this.browser.isFeatureOn(e,t)},e.prototype.featureFlagDetail=function(e,t){return this.browser.featureFlagDetail(e,t)},e.prototype.track=function(e,t){return this.browser.track(e,t)},e.prototype.trackPageView=function(e){return this.browser.trackPageView(e)},e.prototype.remoteConfig=function(e){return this.browser.remoteConfig(e)},e.prototype.onReady=function(e,t){this.browser.onReady(e,t)},e.prototype.showUserExplorer=function(){this.browser.showUserExplorer()},e.prototype.hideUserExplorer=function(){this.browser.hideUserExplorer()},e.prototype.fetch=function(){return this.browser.fetch()},e.prototype.onInitialized=function(e){return this.browser.onInitialized(e)},e.prototype.close=function(){this.browser.close()},e.prototype.setInAppMessageListener=function(e){this.browser.setInAppMessageListener(e)},e.prototype.getExperiment=function(e){return this.browser.getExperiment(e)},e.prototype.getDisplayedInAppMessageView=function(){return this.browser.getDisplayedInAppMessageView()},e}(),Fn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},zn=function(e){return e&&e.Math==Math&&e},Un=zn("object"==typeof globalThis&&globalThis)||zn("object"==typeof window&&window)||zn("object"==typeof self&&self)||zn("object"==typeof Fn&&Fn)||function(){return this}()||Function("return this")(),jn={},Bn=function(e){try{return!!e()}catch(t){return!0}},Vn=!Bn(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Hn=!Bn(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),$n=Hn,Yn=Function.prototype.call,Gn=$n?Yn.bind(Yn):function(){return Yn.apply(Yn,arguments)},qn={},Wn={}.propertyIsEnumerable,Kn=Object.getOwnPropertyDescriptor,Zn=Kn&&!Wn.call({1:2},1);qn.f=Zn?function(e){var t=Kn(this,e);return!!t&&t.enumerable}:Wn;var Jn,Xn,Qn=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},er=Hn,tr=Function.prototype,nr=tr.bind,rr=tr.call,ir=er&&nr.bind(rr,rr),or=er?function(e){return e&&ir(e)}:function(e){return e&&function(){return rr.apply(e,arguments)}},sr=or,ar=sr({}.toString),lr=sr("".slice),cr=function(e){return lr(ar(e),8,-1)},ur=Bn,hr=cr,dr=Object,pr=or("".split),fr=ur(function(){return!dr("z").propertyIsEnumerable(0)})?function(e){return"String"==hr(e)?pr(e,""):dr(e)}:dr,mr=TypeError,gr=function(e){if(void 0==e)throw mr("Can't call method on "+e);return e},yr=fr,vr=gr,_r=function(e){return yr(vr(e))},br=function(e){return"function"==typeof e},wr=br,xr=function(e){return"object"==typeof e?null!==e:wr(e)},Sr=Un,Er=br,Tr=function(e,t){return arguments.length<2?(n=Sr[e],Er(n)?n:void 0):Sr[e]&&Sr[e][t];var n},Mr=or({}.isPrototypeOf),Ar=Tr("navigator","userAgent")||"",kr=Un,Cr=Ar,Ir=kr.process,Pr=kr.Deno,Or=Ir&&Ir.versions||Pr&&Pr.version,Rr=Or&&Or.v8;Rr&&(Xn=(Jn=Rr.split("."))[0]>0&&Jn[0]<4?1:+(Jn[0]+Jn[1])),!Xn&&Cr&&(!(Jn=Cr.match(/Edge\/(\d+)/))||Jn[1]>=74)&&(Jn=Cr.match(/Chrome\/(\d+)/))&&(Xn=+Jn[1]);var Dr=Xn,Lr=Dr,Nr=Bn,Fr=!!Object.getOwnPropertySymbols&&!Nr(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Lr&&Lr<41}),zr=Fr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ur=Tr,jr=br,Br=Mr,Vr=Object,Hr=zr?function(e){return"symbol"==typeof e}:function(e){var t=Ur("Symbol");return jr(t)&&Br(t.prototype,Vr(e))},$r=String,Yr=function(e){try{return $r(e)}catch(t){return"Object"}},Gr=br,qr=Yr,Wr=TypeError,Kr=function(e){if(Gr(e))return e;throw Wr(qr(e)+" is not a function")},Zr=Kr,Jr=function(e,t){var n=e[t];return null==n?void 0:Zr(n)},Xr=Gn,Qr=br,ei=xr,ti=TypeError,ni={exports:{}},ri=Un,ii=Object.defineProperty,oi=function(e,t){try{ii(ri,e,{value:t,configurable:!0,writable:!0})}catch(n){ri[e]=t}return t},si=oi,ai="__core-js_shared__",li=Un[ai]||si(ai,{}),ci=li;(ni.exports=function(e,t){return ci[e]||(ci[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.1",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"});var ui=gr,hi=Object,di=function(e){return hi(ui(e))},pi=di,fi=or({}.hasOwnProperty),mi=Object.hasOwn||function(e,t){return fi(pi(e),t)},gi=or,yi=0,vi=Math.random(),_i=gi(1..toString),bi=function(e){return"Symbol("+(void 0===e?"":e)+")_"+_i(++yi+vi,36)},wi=Un,xi=ni.exports,Si=mi,Ei=bi,Ti=Fr,Mi=zr,Ai=xi("wks"),ki=wi.Symbol,Ci=ki&&ki.for,Ii=Mi?ki:ki&&ki.withoutSetter||Ei,Pi=function(e){if(!Si(Ai,e)||!Ti&&"string"!=typeof Ai[e]){var t="Symbol."+e;Ti&&Si(ki,e)?Ai[e]=ki[e]:Ai[e]=Mi&&Ci?Ci(t):Ii(t)}return Ai[e]},Oi=Gn,Ri=xr,Di=Hr,Li=Jr,Ni=function(e,t){var n,r;if("string"===t&&Qr(n=e.toString)&&!ei(r=Xr(n,e)))return r;if(Qr(n=e.valueOf)&&!ei(r=Xr(n,e)))return r;if("string"!==t&&Qr(n=e.toString)&&!ei(r=Xr(n,e)))return r;throw ti("Can't convert object to primitive value")},Fi=TypeError,zi=Pi("toPrimitive"),Ui=function(e,t){if(!Ri(e)||Di(e))return e;var n,r=Li(e,zi);if(r){if(void 0===t&&(t="default"),n=Oi(r,e,t),!Ri(n)||Di(n))return n;throw Fi("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ni(e,t)},ji=Hr,Bi=function(e){var t=Ui(e,"string");return ji(t)?t:t+""},Vi=xr,Hi=Un.document,$i=Vi(Hi)&&Vi(Hi.createElement),Yi=function(e){return $i?Hi.createElement(e):{}},Gi=Yi,qi=!Vn&&!Bn(function(){return 7!=Object.defineProperty(Gi("div"),"a",{get:function(){return 7}}).a}),Wi=Vn,Ki=Gn,Zi=qn,Ji=Qn,Xi=_r,Qi=Bi,eo=mi,to=qi,no=Object.getOwnPropertyDescriptor;jn.f=Wi?no:function(e,t){if(e=Xi(e),t=Qi(t),to)try{return no(e,t)}catch(n){}if(eo(e,t))return Ji(!Ki(Zi.f,e,t),e[t])};var ro={},io=Vn&&Bn(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),oo=xr,so=String,ao=TypeError,lo=function(e){if(oo(e))return e;throw ao(so(e)+" is not an object")},co=Vn,uo=qi,ho=io,po=lo,fo=Bi,mo=TypeError,go=Object.defineProperty,yo=Object.getOwnPropertyDescriptor,vo="enumerable",_o="configurable",bo="writable";ro.f=co?ho?function(e,t,n){if(po(e),t=fo(t),po(n),"function"===typeof e&&"prototype"===t&&"value"in n&&bo in n&&!n[bo]){var r=yo(e,t);r&&r[bo]&&(e[t]=n.value,n={configurable:_o in n?n[_o]:r[_o],enumerable:vo in n?n[vo]:r[vo],writable:!1})}return go(e,t,n)}:go:function(e,t,n){if(po(e),t=fo(t),po(n),uo)try{return go(e,t,n)}catch(r){}if("get"in n||"set"in n)throw mo("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var wo=ro,xo=Qn,So=Vn?function(e,t,n){return wo.f(e,t,xo(1,n))}:function(e,t,n){return e[t]=n,e},Eo={exports:{}},To=Vn,Mo=mi,Ao=Function.prototype,ko=To&&Object.getOwnPropertyDescriptor,Co=Mo(Ao,"name"),Io={EXISTS:Co,PROPER:Co&&"something"===function(){}.name,CONFIGURABLE:Co&&(!To||To&&ko(Ao,"name").configurable)},Po=br,Oo=li,Ro=or(Function.toString);Po(Oo.inspectSource)||(Oo.inspectSource=function(e){return Ro(e)});var Do,Lo,No,Fo=Oo.inspectSource,zo=br,Uo=Fo,jo=Un.WeakMap,Bo=zo(jo)&&/native code/.test(Uo(jo)),Vo=ni.exports,Ho=bi,$o=Vo("keys"),Yo=function(e){return $o[e]||($o[e]=Ho(e))},Go={},qo=Bo,Wo=Un,Ko=or,Zo=xr,Jo=So,Xo=mi,Qo=li,es=Yo,ts=Go,ns="Object already initialized",rs=Wo.TypeError,is=Wo.WeakMap;if(qo||Qo.state){var os=Qo.state||(Qo.state=new is),ss=Ko(os.get),as=Ko(os.has),ls=Ko(os.set);Do=function(e,t){if(as(os,e))throw new rs(ns);return t.facade=e,ls(os,e,t),t},Lo=function(e){return ss(os,e)||{}},No=function(e){return as(os,e)}}else{var cs=es("state");ts[cs]=!0,Do=function(e,t){if(Xo(e,cs))throw new rs(ns);return t.facade=e,Jo(e,cs,t),t},Lo=function(e){return Xo(e,cs)?e[cs]:{}},No=function(e){return Xo(e,cs)}}var us={set:Do,get:Lo,has:No,enforce:function(e){return No(e)?Lo(e):Do(e,{})},getterFor:function(e){return function(t){var n;if(!Zo(t)||(n=Lo(t)).type!==e)throw rs("Incompatible receiver, "+e+" required");return n}}},hs=Bn,ds=br,ps=mi,fs=Vn,ms=Io.CONFIGURABLE,gs=Fo,ys=us.enforce,vs=us.get,_s=Object.defineProperty,bs=fs&&!hs(function(){return 8!==_s(function(){},"length",{value:8}).length}),ws=String(String).split("String"),xs=Eo.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!ps(e,"name")||ms&&e.name!==t)&&(fs?_s(e,"name",{value:t,configurable:!0}):e.name=t),bs&&n&&ps(n,"arity")&&e.length!==n.arity&&_s(e,"length",{value:n.arity});try{n&&ps(n,"constructor")&&n.constructor?fs&&_s(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=ys(e);return ps(r,"source")||(r.source=ws.join("string"==typeof t?t:"")),e};Function.prototype.toString=xs(function(){return ds(this)&&vs(this).source||gs(this)},"toString");var Ss=br,Es=ro,Ts=Eo.exports,Ms=oi,As=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(Ss(n)&&Ts(n,o,r),r.global)i?e[t]=n:Ms(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(s){}i?e[t]=n:Es.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},ks={},Cs=Math.ceil,Is=Math.floor,Ps=Math.trunc||function(e){var t=+e;return(t>0?Is:Cs)(t)},Os=function(e){var t=+e;return t!==t||0===t?0:Ps(t)},Rs=Os,Ds=Math.max,Ls=Math.min,Ns=function(e,t){var n=Rs(e);return n<0?Ds(n+t,0):Ls(n,t)},Fs=Os,zs=Math.min,Us=function(e){return e>0?zs(Fs(e),9007199254740991):0},js=function(e){return Us(e.length)},Bs=_r,Vs=Ns,Hs=js,$s=function(e){return function(t,n,r){var i,o=Bs(t),s=Hs(o),a=Vs(r,s);if(e&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},Ys={includes:$s(!0),indexOf:$s(!1)},Gs=mi,qs=_r,Ws=Ys.indexOf,Ks=Go,Zs=or([].push),Js=function(e,t){var n,r=qs(e),i=0,o=[];for(n in r)!Gs(Ks,n)&&Gs(r,n)&&Zs(o,n);for(;t.length>i;)Gs(r,n=t[i++])&&(~Ws(o,n)||Zs(o,n));return o},Xs=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qs=Js,ea=Xs.concat("length","prototype");ks.f=Object.getOwnPropertyNames||function(e){return Qs(e,ea)};var ta={};ta.f=Object.getOwnPropertySymbols;var na=Tr,ra=ks,ia=ta,oa=lo,sa=or([].concat),aa=na("Reflect","ownKeys")||function(e){var t=ra.f(oa(e)),n=ia.f;return n?sa(t,n(e)):t},la=mi,ca=aa,ua=jn,ha=ro,da=function(e,t,n){for(var r=ca(t),i=ha.f,o=ua.f,s=0;s<r.length;s++){var a=r[s];la(e,a)||n&&la(n,a)||i(e,a,o(t,a))}},pa=Bn,fa=br,ma=/#|\.prototype\./,ga=function(e,t){var n=va[ya(e)];return n==ba||n!=_a&&(fa(t)?pa(t):!!t)},ya=ga.normalize=function(e){return String(e).replace(ma,".").toLowerCase()},va=ga.data={},_a=ga.NATIVE="N",ba=ga.POLYFILL="P",wa=ga,xa=Un,Sa=jn.f,Ea=So,Ta=As,Ma=oi,Aa=da,ka=wa,Ca=function(e,t){var n,r,i,o,s,a=e.target,l=e.global,c=e.stat;if(n=l?xa:c?xa[a]||Ma(a,{}):(xa[a]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(s=Sa(n,r))&&s.value:n[r],!ka(l?r:a+(c?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;Aa(o,i)}(e.sham||i&&i.sham)&&Ea(o,"sham",!0),Ta(n,r,o,e)}},Ia=!Bn(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Pa=mi,Oa=br,Ra=di,Da=Ia,La=Yo("IE_PROTO"),Na=Object,Fa=Na.prototype,za=Da?Na.getPrototypeOf:function(e){var t=Ra(e);if(Pa(t,La))return t[La];var n=t.constructor;return Oa(n)&&t instanceof n?n.prototype:t instanceof Na?Fa:null},Ua=br,ja=String,Ba=TypeError,Va=or,Ha=lo,$a=function(e){if("object"==typeof e||Ua(e))return e;throw Ba("Can't set "+ja(e)+" as a prototype")},Ya=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Va(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return Ha(n),$a(r),t?e(n,r):n.__proto__=r,n}}():void 0),Ga={},qa=Js,Wa=Xs,Ka=Object.keys||function(e){return qa(e,Wa)},Za=Vn,Ja=io,Xa=ro,Qa=lo,el=_r,tl=Ka;Ga.f=Za&&!Ja?Object.defineProperties:function(e,t){Qa(e);for(var n,r=el(t),i=tl(t),o=i.length,s=0;o>s;)Xa.f(e,n=i[s++],r[n]);return e};var nl,rl=Tr("document","documentElement"),il=lo,ol=Ga,sl=Xs,al=Go,ll=rl,cl=Yi,ul="prototype",hl="script",dl=Yo("IE_PROTO"),pl=function(){},fl=function(e){return"<"+hl+">"+e+"</"+hl+">"},ml=function(e){e.write(fl("")),e.close();var t=e.parentWindow.Object;return e=null,t},gl=function(){try{nl=new ActiveXObject("htmlfile")}catch(t){}gl="undefined"!=typeof document?document.domain&&nl?ml(nl):function(){var e,t=cl("iframe"),n="java"+hl+":";return t.style.display="none",ll.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(fl("document.F=Object")),e.close(),e.F}():ml(nl);for(var e=sl.length;e--;)delete gl[ul][sl[e]];return gl()};al[dl]=!0;var yl=Object.create||function(e,t){var n;return null!==e?(pl[ul]=il(e),n=new pl,pl[ul]=null,n[dl]=e):n=gl(),void 0===t?n:ol.f(n,t)},vl=Error,_l=or("".replace),bl=String(vl("zxcasd").stack),wl=/\n\s*at [^:]*:[^\n]*/,xl=wl.test(bl),Sl=xr,El=So,Tl=Kr,Ml=Hn,Al=or(or.bind),kl=function(e,t){return Tl(e),void 0===t?e:Ml?Al(e,t):function(){return e.apply(t,arguments)}},Cl={},Il=Cl,Pl=Pi("iterator"),Ol=Array.prototype,Rl=function(e){return void 0!==e&&(Il.Array===e||Ol[Pl]===e)},Dl={};Dl[Pi("toStringTag")]="z";var Ll="[object z]"===String(Dl),Nl=Ll,Fl=br,zl=cr,Ul=Pi("toStringTag"),jl=Object,Bl="Arguments"==zl(function(){return arguments}()),Vl=Nl?zl:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=jl(e),Ul))?n:Bl?zl(t):"Object"==(r=zl(t))&&Fl(t.callee)?"Arguments":r},Hl=Vl,$l=Jr,Yl=Cl,Gl=Pi("iterator"),ql=function(e){if(void 0!=e)return $l(e,Gl)||$l(e,"@@iterator")||Yl[Hl(e)]},Wl=Gn,Kl=Kr,Zl=lo,Jl=Yr,Xl=ql,Ql=TypeError,ec=function(e,t){var n=arguments.length<2?Xl(e):t;if(Kl(n))return Zl(Wl(n,e));throw Ql(Jl(e)+" is not iterable")},tc=Gn,nc=lo,rc=Jr,ic=function(e,t,n){var r,i;nc(e);try{if(!(r=rc(e,"return"))){if("throw"===t)throw n;return n}r=tc(r,e)}catch(o){i=!0,r=o}if("throw"===t)throw n;if(i)throw r;return nc(r),n},oc=kl,sc=Gn,ac=lo,lc=Yr,cc=Rl,uc=js,hc=Mr,dc=ec,pc=ql,fc=ic,mc=TypeError,gc=function(e,t){this.stopped=e,this.result=t},yc=gc.prototype,vc=function(e,t,n){var r,i,o,s,a,l,c,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=oc(t,u),g=function(e){return r&&fc(r,"normal",e),new gc(!0,e)},y=function(e){return h?(ac(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(d)r=e.iterator;else if(p)r=e;else{if(!(i=pc(e)))throw mc(lc(e)+" is not iterable");if(cc(i)){for(o=0,s=uc(e);s>o;o++)if((a=y(e[o]))&&hc(yc,a))return a;return new gc(!1)}r=dc(e,i)}for(l=d?e.next:r.next;!(c=sc(l,r)).done;){try{a=y(c.value)}catch(v){fc(r,"throw",v)}if("object"==typeof a&&a&&hc(yc,a))return a}return new gc(!1)},_c=Vl,bc=String,wc=function(e){if("Symbol"===_c(e))throw TypeError("Cannot convert a Symbol value to a string");return bc(e)},xc=wc,Sc=Qn,Ec=!Bn(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Sc(1,7)),7!==e.stack)}),Tc=Ca,Mc=Mr,Ac=za,kc=Ya,Cc=da,Ic=yl,Pc=So,Oc=Qn,Rc=function(e,t){if(xl&&"string"==typeof e&&!vl.prepareStackTrace)for(;t--;)e=_l(e,wl,"");return e},Dc=function(e,t){Sl(t)&&"cause"in t&&El(e,"cause",t.cause)},Lc=vc,Nc=function(e,t){return void 0===e?arguments.length<2?"":t:xc(e)},Fc=Ec,zc=Pi("toStringTag"),Uc=Error,jc=[].push,Bc=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,i=Mc(Vc,this);kc?n=kc(new Uc,i?Ac(this):Vc):(n=i?this:Ic(Vc),Pc(n,zc,"Error")),void 0!==t&&Pc(n,"message",Nc(t)),Fc&&Pc(n,"stack",Rc(n.stack,1)),Dc(n,r);var o=[];return Lc(e,jc,{that:o}),Pc(n,"errors",o),n};kc?kc(Bc,Uc):Cc(Bc,Uc,{name:!0});var Vc=Bc.prototype=Ic(Uc.prototype,{constructor:Oc(1,Bc),message:Oc(1,""),name:Oc(1,"AggregateError")});Tc({global:!0,constructor:!0,arity:2},{AggregateError:Bc});var Hc=Pi,$c=yl,Yc=ro.f,Gc=Hc("unscopables"),qc=Array.prototype;void 0==qc[Gc]&&Yc(qc,Gc,{configurable:!0,value:$c(null)});var Wc,Kc,Zc,Jc=function(e){qc[Gc][e]=!0},Xc=Bn,Qc=br,eu=za,tu=As,nu=Pi("iterator"),ru=!1;[].keys&&("next"in(Zc=[].keys())?(Kc=eu(eu(Zc)))!==Object.prototype&&(Wc=Kc):ru=!0);var iu=void 0==Wc||Xc(function(){var e={};return Wc[nu].call(e)!==e});iu&&(Wc={}),Qc(Wc[nu])||tu(Wc,nu,function(){return this});var ou={IteratorPrototype:Wc,BUGGY_SAFARI_ITERATORS:ru},su=ro.f,au=mi,lu=Pi("toStringTag"),cu=function(e,t,n){e&&!n&&(e=e.prototype),e&&!au(e,lu)&&su(e,lu,{configurable:!0,value:t})},uu=ou.IteratorPrototype,hu=yl,du=Qn,pu=cu,fu=Cl,mu=function(){return this},gu=Ca,yu=Gn,vu=br,_u=function(e,t,n,r){var i=t+" Iterator";return e.prototype=hu(uu,{next:du(+!r,n)}),pu(e,i,!1),fu[i]=mu,e},bu=za,wu=Ya,xu=cu,Su=So,Eu=As,Tu=Cl,Mu=Io.PROPER,Au=Io.CONFIGURABLE,ku=ou.IteratorPrototype,Cu=ou.BUGGY_SAFARI_ITERATORS,Iu=Pi("iterator"),Pu="keys",Ou="values",Ru="entries",Du=function(){return this},Lu=function(e,t,n,r,i,o,s){_u(n,t,r);var a,l,c,u=function(e){if(e===i&&m)return m;if(!Cu&&e in p)return p[e];switch(e){case Pu:case Ou:case Ru:return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",d=!1,p=e.prototype,f=p[Iu]||p["@@iterator"]||i&&p[i],m=!Cu&&f||u(i),g="Array"==t&&p.entries||f;if(g&&(a=bu(g.call(new e)))!==Object.prototype&&a.next&&(bu(a)!==ku&&(wu?wu(a,ku):vu(a[Iu])||Eu(a,Iu,Du)),xu(a,h,!0)),Mu&&i==Ou&&f&&f.name!==Ou&&(Au?Su(p,"name",Ou):(d=!0,m=function(){return yu(f,this)})),i)if(l={values:u(Ou),keys:o?m:u(Pu),entries:u(Ru)},s)for(c in l)(Cu||d||!(c in p))&&Eu(p,c,l[c]);else gu({target:t,proto:!0,forced:Cu||d},l);return p[Iu]!==m&&Eu(p,Iu,m,{name:i}),Tu[t]=m,l},Nu=_r,Fu=Jc,zu=Cl,Uu=us,ju=ro.f,Bu=Lu,Vu=Vn,Hu="Array Iterator",$u=Uu.set,Yu=Uu.getterFor(Hu),Gu=Bu(Array,"Array",function(e,t){$u(this,{type:Hu,target:Nu(e),index:0,kind:t})},function(){var e=Yu(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),qu=zu.Arguments=zu.Array;if(Fu("keys"),Fu("values"),Fu("entries"),Vu&&"values"!==qu.name)try{ju(qu,"name",{value:"values"})}catch($C){}var Wu=Vl,Ku=Ll?{}.toString:function(){return"[object "+Wu(this)+"]"};Ll||As(Object.prototype,"toString",Ku,{unsafe:!0});var Zu="process"==cr(Un.process),Ju=Tr,Xu=ro,Qu=Vn,eh=Pi("species"),th=function(e){var t=Ju(e),n=Xu.f;Qu&&t&&!t[eh]&&n(t,eh,{configurable:!0,get:function(){return this}})},nh=Mr,rh=TypeError,ih=function(e,t){if(nh(t,e))return e;throw rh("Incorrect invocation")},oh=or,sh=Bn,ah=br,lh=Vl,ch=Fo,uh=function(){},hh=[],dh=Tr("Reflect","construct"),ph=/^\s*(?:class|function)\b/,fh=oh(ph.exec),mh=!ph.exec(uh),gh=function(e){if(!ah(e))return!1;try{return dh(uh,hh,e),!0}catch($C){return!1}},yh=function(e){if(!ah(e))return!1;switch(lh(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return mh||!!fh(ph,ch(e))}catch($C){return!0}};yh.sham=!0;var vh,_h,bh,wh,xh=!dh||sh(function(){var e;return gh(gh.call)||!gh(Object)||!gh(function(){e=!0})||e})?yh:gh,Sh=xh,Eh=Yr,Th=TypeError,Mh=lo,Ah=function(e){if(Sh(e))return e;throw Th(Eh(e)+" is not a constructor")},kh=Pi("species"),Ch=function(e,t){var n,r=Mh(e).constructor;return void 0===r||void 0==(n=Mh(r)[kh])?t:Ah(n)},Ih=Hn,Ph=Function.prototype,Oh=Ph.apply,Rh=Ph.call,Dh="object"==typeof Reflect&&Reflect.apply||(Ih?Rh.bind(Oh):function(){return Rh.apply(Oh,arguments)}),Lh=or([].slice),Nh=TypeError,Fh=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ar),zh=Un,Uh=Dh,jh=kl,Bh=br,Vh=mi,Hh=Bn,$h=rl,Yh=Lh,Gh=Yi,qh=function(e,t){if(e<t)throw Nh("Not enough arguments");return e},Wh=Fh,Kh=Zu,Zh=zh.setImmediate,Jh=zh.clearImmediate,Xh=zh.process,Qh=zh.Dispatch,ed=zh.Function,td=zh.MessageChannel,nd=zh.String,rd=0,id={},od="onreadystatechange";try{vh=zh.location}catch($C){}var sd=function(e){if(Vh(id,e)){var t=id[e];delete id[e],t()}},ad=function(e){return function(){sd(e)}},ld=function(e){sd(e.data)},cd=function(e){zh.postMessage(nd(e),vh.protocol+"//"+vh.host)};Zh&&Jh||(Zh=function(e){qh(arguments.length,1);var t=Bh(e)?e:ed(e),n=Yh(arguments,1);return id[++rd]=function(){Uh(t,void 0,n)},_h(rd),rd},Jh=function(e){delete id[e]},Kh?_h=function(e){Xh.nextTick(ad(e))}:Qh&&Qh.now?_h=function(e){Qh.now(ad(e))}:td&&!Wh?(wh=(bh=new td).port2,bh.port1.onmessage=ld,_h=jh(wh.postMessage,wh)):zh.addEventListener&&Bh(zh.postMessage)&&!zh.importScripts&&vh&&"file:"!==vh.protocol&&!Hh(cd)?(_h=cd,zh.addEventListener("message",ld,!1)):_h=od in Gh("script")?function(e){$h.appendChild(Gh("script"))[od]=function(){$h.removeChild(this),sd(e)}}:function(e){setTimeout(ad(e),0)});var ud,hd,dd,pd,fd,md,gd,yd,vd={set:Zh,clear:Jh},_d=Un,bd=/ipad|iphone|ipod/i.test(Ar)&&void 0!==_d.Pebble,wd=/web0s(?!.*chrome)/i.test(Ar),xd=Un,Sd=kl,Ed=jn.f,Td=vd.set,Md=Fh,Ad=bd,kd=wd,Cd=Zu,Id=xd.MutationObserver||xd.WebKitMutationObserver,Pd=xd.document,Od=xd.process,Rd=xd.Promise,Dd=Ed(xd,"queueMicrotask"),Ld=Dd&&Dd.value;Ld||(ud=function(){var e,t;for(Cd&&(e=Od.domain)&&e.exit();hd;){t=hd.fn,hd=hd.next;try{t()}catch($C){throw hd?pd():dd=void 0,$C}}dd=void 0,e&&e.enter()},Md||Cd||kd||!Id||!Pd?!Ad&&Rd&&Rd.resolve?((gd=Rd.resolve(void 0)).constructor=Rd,yd=Sd(gd.then,gd),pd=function(){yd(ud)}):Cd?pd=function(){Od.nextTick(ud)}:(Td=Sd(Td,xd),pd=function(){Td(ud)}):(fd=!0,md=Pd.createTextNode(""),new Id(ud).observe(md,{characterData:!0}),pd=function(){md.data=fd=!fd}));var Nd=Ld||function(e){var t={fn:e,next:void 0};dd&&(dd.next=t),hd||(hd=t,pd()),dd=t},Fd=Un,zd=function(e){try{return{error:!1,value:e()}}catch($C){return{error:!0,value:$C}}},Ud=function(){this.head=null,this.tail=null};Ud.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var jd=Ud,Bd=Un.Promise,Vd="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Hd=!Vd&&!Zu&&"object"==typeof window&&"object"==typeof document,$d=Un,Yd=Bd,Gd=br,qd=wa,Wd=Fo,Kd=Pi,Zd=Hd,Jd=Vd,Xd=Dr;Yd&&Yd.prototype;var Qd=Kd("species"),ep=!1,tp=Gd($d.PromiseRejectionEvent),np=qd("Promise",function(){var e=Wd(Yd),t=e!==String(Yd);if(!t&&66===Xd)return!0;if(!Xd||Xd<51||!/native code/.test(e)){var n=new Yd(function(e){e(1)}),r=function(e){e(function(){},function(){})};if((n.constructor={})[Qd]=r,!(ep=n.then(function(){})instanceof r))return!0}return!t&&(Zd||Jd)&&!tp}),rp={CONSTRUCTOR:np,REJECTION_EVENT:tp,SUBCLASSING:ep},ip={},op=Kr,sp=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=op(t),this.reject=op(n)};ip.f=function(e){return new sp(e)};var ap,lp,cp,up=Ca,hp=Zu,dp=Un,pp=Gn,fp=As,mp=Ya,gp=cu,yp=th,vp=Kr,_p=br,bp=xr,wp=ih,xp=Ch,Sp=vd.set,Ep=Nd,Tp=function(e,t){var n=Fd.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},Mp=zd,Ap=jd,kp=us,Cp=Bd,Ip=ip,Pp="Promise",Op=rp.CONSTRUCTOR,Rp=rp.REJECTION_EVENT,Dp=rp.SUBCLASSING,Lp=kp.getterFor(Pp),Np=kp.set,Fp=Cp&&Cp.prototype,zp=Cp,Up=Fp,jp=dp.TypeError,Bp=dp.document,Vp=dp.process,Hp=Ip.f,$p=Hp,Yp=!!(Bp&&Bp.createEvent&&dp.dispatchEvent),Gp="unhandledrejection",qp=function(e){var t;return!(!bp(e)||!_p(t=e.then))&&t},Wp=function(e,t){var n,r,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&Qp(t),t.rejection=1),!0===a?n=o:(u&&u.enter(),n=a(o),u&&(u.exit(),i=!0)),n===e.promise?c(jp("Promise-chain cycle")):(r=qp(n))?pp(r,n,l,c):l(n)):c(o)}catch($C){u&&!i&&u.exit(),c($C)}},Kp=function(e,t){e.notified||(e.notified=!0,Ep(function(){for(var n,r=e.reactions;n=r.get();)Wp(n,e);e.notified=!1,t&&!e.rejection&&Jp(e)}))},Zp=function(e,t,n){var r,i;Yp?((r=Bp.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),dp.dispatchEvent(r)):r={promise:t,reason:n},!Rp&&(i=dp["on"+e])?i(r):e===Gp&&Tp("Unhandled promise rejection",n)},Jp=function(e){pp(Sp,dp,function(){var t,n=e.facade,r=e.value;if(Xp(e)&&(t=Mp(function(){hp?Vp.emit("unhandledRejection",r,n):Zp(Gp,n,r)}),e.rejection=hp||Xp(e)?2:1,t.error))throw t.value})},Xp=function(e){return 1!==e.rejection&&!e.parent},Qp=function(e){pp(Sp,dp,function(){var t=e.facade;hp?Vp.emit("rejectionHandled",t):Zp("rejectionhandled",t,e.value)})},ef=function(e,t,n){return function(r){e(t,r,n)}},tf=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Kp(e,!0))},nf=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw jp("Promise can't be resolved itself");var r=qp(t);r?Ep(function(){var n={done:!1};try{pp(r,t,ef(nf,n,e),ef(tf,n,e))}catch($C){tf(n,$C,e)}}):(e.value=t,e.state=1,Kp(e,!1))}catch($C){tf({done:!1},$C,e)}}};if(Op&&(Up=(zp=function(e){wp(this,Up),vp(e),pp(ap,this);var t=Lp(this);try{e(ef(nf,t),ef(tf,t))}catch($C){tf(t,$C)}}).prototype,(ap=function(e){Np(this,{type:Pp,done:!1,notified:!1,parent:!1,reactions:new Ap,rejection:!1,state:0,value:void 0})}).prototype=fp(Up,"then",function(e,t){var n=Lp(this),r=Hp(xp(this,zp));return n.parent=!0,r.ok=!_p(e)||e,r.fail=_p(t)&&t,r.domain=hp?Vp.domain:void 0,0==n.state?n.reactions.add(r):Ep(function(){Wp(r,n)}),r.promise}),lp=function(){var e=new ap,t=Lp(e);this.promise=e,this.resolve=ef(nf,t),this.reject=ef(tf,t)},Ip.f=Hp=function(e){return e===zp||void 0===e?new lp(e):$p(e)},_p(Cp)&&Fp!==Object.prototype)){cp=Fp.then,Dp||fp(Fp,"then",function(e,t){var n=this;return new zp(function(e,t){pp(cp,n,e,t)}).then(e,t)},{unsafe:!0});try{delete Fp.constructor}catch($C){}mp&&mp(Fp,Up)}up({global:!0,constructor:!0,wrap:!0,forced:Op},{Promise:zp}),gp(zp,Pp,!1),yp(Pp);var rf=Pi("iterator"),of=!1;try{var sf=0,af={next:function(){return{done:!!sf++}},return:function(){of=!0}};af[rf]=function(){return this},Array.from(af,function(){throw 2})}catch($C){}var lf=function(e,t){if(!t&&!of)return!1;var n=!1;try{var r={};r[rf]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch($C){}return n},cf=Bd,uf=rp.CONSTRUCTOR||!lf(function(e){cf.all(e).then(void 0,function(){})}),hf=Gn,df=Kr,pf=ip,ff=zd,mf=vc;Ca({target:"Promise",stat:!0,forced:uf},{all:function(e){var t=this,n=pf.f(t),r=n.resolve,i=n.reject,o=ff(function(){var n=df(t.resolve),o=[],s=0,a=1;mf(e,function(e){var l=s++,c=!1;a++,hf(n,t,e).then(function(e){c||(c=!0,o[l]=e,--a||r(o))},i)}),--a||r(o)});return o.error&&i(o.value),n.promise}});var gf=Ca,yf=rp.CONSTRUCTOR,vf=Bd,_f=Tr,bf=br,wf=As,xf=vf&&vf.prototype;if(gf({target:"Promise",proto:!0,forced:yf,real:!0},{catch:function(e){return this.then(void 0,e)}}),bf(vf)){var Sf=_f("Promise").prototype.catch;xf.catch!==Sf&&wf(xf,"catch",Sf,{unsafe:!0})}var Ef=Gn,Tf=Kr,Mf=ip,Af=zd,kf=vc;Ca({target:"Promise",stat:!0,forced:uf},{race:function(e){var t=this,n=Mf.f(t),r=n.reject,i=Af(function(){var i=Tf(t.resolve);kf(e,function(e){Ef(i,t,e).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}});var Cf=Gn,If=ip;Ca({target:"Promise",stat:!0,forced:rp.CONSTRUCTOR},{reject:function(e){var t=If.f(this);return Cf(t.reject,void 0,e),t.promise}});var Pf=lo,Of=xr,Rf=ip,Df=function(e,t){if(Pf(e),Of(t)&&t.constructor===e)return t;var n=Rf.f(e);return(0,n.resolve)(t),n.promise},Lf=Ca,Nf=rp.CONSTRUCTOR,Ff=Df;Tr("Promise"),Lf({target:"Promise",stat:!0,forced:Nf},{resolve:function(e){return Ff(this,e)}});var zf=Gn,Uf=Kr,jf=ip,Bf=zd,Vf=vc;Ca({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=jf.f(t),r=n.resolve,i=n.reject,o=Bf(function(){var n=Uf(t.resolve),i=[],o=0,s=1;Vf(e,function(e){var a=o++,l=!1;s++,zf(n,t,e).then(function(e){l||(l=!0,i[a]={status:"fulfilled",value:e},--s||r(i))},function(e){l||(l=!0,i[a]={status:"rejected",reason:e},--s||r(i))})}),--s||r(i)});return o.error&&i(o.value),n.promise}});var Hf=Gn,$f=Kr,Yf=Tr,Gf=ip,qf=zd,Wf=vc,Kf="No one promise resolved";Ca({target:"Promise",stat:!0},{any:function(e){var t=this,n=Yf("AggregateError"),r=Gf.f(t),i=r.resolve,o=r.reject,s=qf(function(){var r=$f(t.resolve),s=[],a=0,l=1,c=!1;Wf(e,function(e){var u=a++,h=!1;l++,Hf(r,t,e).then(function(e){h||c||(c=!0,i(e))},function(e){h||c||(h=!0,s[u]=e,--l||o(new n(s,Kf)))})}),--l||o(new n(s,Kf))});return s.error&&o(s.value),r.promise}});var Zf=Ca,Jf=Bd,Xf=Bn,Qf=Tr,em=br,tm=Ch,nm=Df,rm=As,im=Jf&&Jf.prototype;if(Zf({target:"Promise",proto:!0,real:!0,forced:!!Jf&&Xf(function(){im.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=tm(this,Qf("Promise")),n=em(e);return this.then(n?function(n){return nm(t,e()).then(function(){return n})}:e,n?function(n){return nm(t,e()).then(function(){throw n})}:e)}}),em(Jf)){var om=Qf("Promise").prototype.finally;im.finally!==om&&rm(im,"finally",om,{unsafe:!0})}var sm=or,am=Os,lm=wc,cm=gr,um=sm("".charAt),hm=sm("".charCodeAt),dm=sm("".slice),pm=function(e){return function(t,n){var r,i,o=lm(cm(t)),s=am(n),a=o.length;return s<0||s>=a?e?"":void 0:(r=hm(o,s))<55296||r>56319||s+1===a||(i=hm(o,s+1))<56320||i>57343?e?um(o,s):r:e?dm(o,s,s+2):i-56320+(r-55296<<10)+65536}},fm={codeAt:pm(!1),charAt:pm(!0)}.charAt,mm=wc,gm=us,ym=Lu,vm="String Iterator",_m=gm.set,bm=gm.getterFor(vm);ym(String,"String",function(e){_m(this,{type:vm,string:mm(e),index:0})},function(){var e,t=bm(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=fm(n,r),t.index+=e.length,{value:e,done:!1})});var wm=Un,xm=wm.Promise,Sm=Yi("span").classList,Em=Sm&&Sm.constructor&&Sm.constructor.prototype,Tm=Em===Object.prototype?void 0:Em,Mm=Un,Am={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},km=Tm,Cm=Gu,Im=So,Pm=Pi,Om=Pm("iterator"),Rm=Pm("toStringTag"),Dm=Cm.values,Lm=function(e,t){if(e){if(e[Om]!==Dm)try{Im(e,Om,Dm)}catch($C){e[Om]=Dm}if(e[Rm]||Im(e,Rm,t),Am[t])for(var n in Cm)if(e[n]!==Cm[n])try{Im(e,n,Cm[n])}catch($C){e[n]=Cm[n]}}};for(var Nm in Am)Lm(Mm[Nm]&&Mm[Nm].prototype,Nm);Lm(km,"DOMTokenList");var Fm=xm,zm=ip,Um=zd;Ca({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=zm.f(this),n=Um(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var jm=Fm;!function(e){e.exports=jm}({exports:{}});var Bm=lo,Vm=ic,Hm=Bi,$m=ro,Ym=Qn,Gm=function(e,t,n){var r=Hm(t);r in e?$m.f(e,r,Ym(0,n)):e[r]=n},qm=kl,Wm=Gn,Km=di,Zm=function(e,t,n,r){try{return r?t(Bm(n)[0],n[1]):t(n)}catch($C){Vm(e,"throw",$C)}},Jm=Rl,Xm=xh,Qm=js,eg=Gm,tg=ec,ng=ql,rg=Array,ig=function(e){var t=Km(e),n=Xm(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=qm(i,r>2?arguments[2]:void 0));var s,a,l,c,u,h,d=ng(t),p=0;if(!d||this===rg&&Jm(d))for(s=Qm(t),a=n?new this(s):rg(s);s>p;p++)h=o?i(t[p],p):t[p],eg(a,p,h);else for(u=(c=tg(t,d)).next,a=n?new this:[];!(l=Wm(u,c)).done;p++)h=o?Zm(c,i,[l.value,p],!0):l.value,eg(a,p,h);return a.length=p,a};Ca({target:"Array",stat:!0,forced:!lf(function(e){Array.from(e)})},{from:ig});var og=cr,sg=Array.isArray||function(e){return"Array"==og(e)};Ca({target:"Array",stat:!0},{isArray:sg});var ag=xh,lg=Gm,cg=Array;Ca({target:"Array",stat:!0,forced:Bn(function(){function e(){}return!(cg.of.call(e)instanceof e)})},{of:function(){for(var e=0,t=arguments.length,n=new(ag(this)?this:cg)(t);t>e;)lg(n,e,arguments[e++]);return n.length=t,n}});var ug=di,hg=js,dg=Os,pg=Jc;Ca({target:"Array",proto:!0},{at:function(e){var t=ug(this),n=hg(t),r=dg(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:t[i]}}),pg("at");var fg=TypeError,mg=function(e){if(e>9007199254740991)throw fg("Maximum allowed index exceeded");return e},gg=sg,yg=xh,vg=xr,_g=Pi("species"),bg=Array,wg=function(e){var t;return gg(e)&&(t=e.constructor,(yg(t)&&(t===bg||gg(t.prototype))||vg(t)&&null===(t=t[_g]))&&(t=void 0)),void 0===t?bg:t},xg=function(e,t){return new(wg(e))(0===t?0:t)},Sg=Bn,Eg=Dr,Tg=Pi("species"),Mg=function(e){return Eg>=51||!Sg(function(){var t=[];return(t.constructor={})[Tg]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Ag=Ca,kg=Bn,Cg=sg,Ig=xr,Pg=di,Og=js,Rg=mg,Dg=Gm,Lg=xg,Ng=Mg,Fg=Dr,zg=Pi("isConcatSpreadable"),Ug=Fg>=51||!kg(function(){var e=[];return e[zg]=!1,e.concat()[0]!==e}),jg=Ng("concat"),Bg=function(e){if(!Ig(e))return!1;var t=e[zg];return void 0!==t?!!t:Cg(e)};Ag({target:"Array",proto:!0,arity:1,forced:!Ug||!jg},{concat:function(e){var t,n,r,i,o,s=Pg(this),a=Lg(s,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(Bg(o=-1===t?s:arguments[t]))for(i=Og(o),Rg(l+i),n=0;n<i;n++,l++)n in o&&Dg(a,l,o[n]);else Rg(l+1),Dg(a,l++,o);return a.length=l,a}});var Vg=Yr,Hg=TypeError,$g=function(e,t){if(!delete e[t])throw Hg("Cannot delete property "+Vg(t)+" of "+Vg(e))},Yg=di,Gg=Ns,qg=js,Wg=$g,Kg=Math.min,Zg=[].copyWithin||function(e,t){var n=Yg(this),r=qg(n),i=Gg(e,r),o=Gg(t,r),s=arguments.length>2?arguments[2]:void 0,a=Kg((void 0===s?r:Gg(s,r))-o,r-i),l=1;for(o<i&&i<o+a&&(l=-1,o+=a-1,i+=a-1);a-- >0;)o in n?n[i]=n[o]:Wg(n,i),i+=l,o+=l;return n},Jg=Jc;Ca({target:"Array",proto:!0},{copyWithin:Zg}),Jg("copyWithin");var Xg=kl,Qg=fr,ey=di,ty=js,ny=xg,ry=or([].push),iy=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(l,c,u,h){for(var d,p,f=ey(l),m=Qg(f),g=Xg(c,u),y=ty(m),v=0,_=h||ny,b=t?_(l,y):n||s?_(l,0):void 0;y>v;v++)if((a||v in m)&&(p=g(d=m[v],v,f),e))if(t)b[v]=p;else if(p)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:ry(b,d)}else switch(e){case 4:return!1;case 7:ry(b,d)}return o?-1:r||i?i:b}},oy={forEach:iy(0),map:iy(1),filter:iy(2),some:iy(3),every:iy(4),find:iy(5),findIndex:iy(6),filterReject:iy(7)},sy=Bn,ay=function(e,t){var n=[][e];return!!n&&sy(function(){n.call(null,t||function(){return 1},1)})},ly=oy.every;Ca({target:"Array",proto:!0,forced:!ay("every")},{every:function(e){return ly(this,e,arguments.length>1?arguments[1]:void 0)}});var cy=di,uy=Ns,hy=js,dy=function(e){for(var t=cy(this),n=hy(t),r=arguments.length,i=uy(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,s=void 0===o?n:uy(o,n);s>i;)t[i++]=e;return t},py=Jc;Ca({target:"Array",proto:!0},{fill:dy}),py("fill");var fy=oy.filter;Ca({target:"Array",proto:!0,forced:!Mg("filter")},{filter:function(e){return fy(this,e,arguments.length>1?arguments[1]:void 0)}});var my=Ca,gy=oy.find,yy=Jc,vy="find",_y=!0;vy in[]&&Array(1)[vy](function(){_y=!1}),my({target:"Array",proto:!0,forced:_y},{find:function(e){return gy(this,e,arguments.length>1?arguments[1]:void 0)}}),yy(vy);var by=Ca,wy=oy.findIndex,xy=Jc,Sy="findIndex",Ey=!0;Sy in[]&&Array(1)[Sy](function(){Ey=!1}),by({target:"Array",proto:!0,forced:Ey},{findIndex:function(e){return wy(this,e,arguments.length>1?arguments[1]:void 0)}}),xy(Sy);var Ty=kl,My=fr,Ay=di,ky=js,Cy=function(e){var t=1==e;return function(n,r,i){for(var o,s=Ay(n),a=My(s),l=Ty(r,i),c=ky(a);c-- >0;)if(l(o=a[c],c,s))switch(e){case 0:return o;case 1:return c}return t?-1:void 0}},Iy={findLast:Cy(0),findLastIndex:Cy(1)},Py=Iy.findLast,Oy=Jc;Ca({target:"Array",proto:!0},{findLast:function(e){return Py(this,e,arguments.length>1?arguments[1]:void 0)}}),Oy("findLast");var Ry=Iy.findLastIndex,Dy=Jc;Ca({target:"Array",proto:!0},{findLastIndex:function(e){return Ry(this,e,arguments.length>1?arguments[1]:void 0)}}),Dy("findLastIndex");var Ly=sg,Ny=js,Fy=mg,zy=kl,Uy=function(e,t,n,r,i,o,s,a){for(var l,c,u=i,h=0,d=!!s&&zy(s,a);h<r;)h in n&&(l=d?d(n[h],h,t):n[h],o>0&&Ly(l)?(c=Ny(l),u=Uy(e,t,l,c,u,o-1)-1):(Fy(u+1),e[u]=l),u++),h++;return u},jy=Uy,By=jy,Vy=di,Hy=js,$y=Os,Yy=xg;Ca({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Vy(this),n=Hy(t),r=Yy(t,0);return r.length=By(r,t,t,n,0,void 0===e?1:$y(e)),r}});var Gy=jy,qy=Kr,Wy=di,Ky=js,Zy=xg;Ca({target:"Array",proto:!0},{flatMap:function(e){var t,n=Wy(this),r=Ky(n);return qy(e),(t=Zy(n,0)).length=Gy(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var Jy=oy.forEach,Xy=ay("forEach")?[].forEach:function(e){return Jy(this,e,arguments.length>1?arguments[1]:void 0)};Ca({target:"Array",proto:!0,forced:[].forEach!=Xy},{forEach:Xy});var Qy=Ys.includes,ev=Jc;Ca({target:"Array",proto:!0,forced:Bn(function(){return!Array(1).includes()})},{includes:function(e){return Qy(this,e,arguments.length>1?arguments[1]:void 0)}}),ev("includes");var tv=Ca,nv=Ys.indexOf,rv=ay,iv=or([].indexOf),ov=!!iv&&1/iv([1],1,-0)<0,sv=rv("indexOf");tv({target:"Array",proto:!0,forced:ov||!sv},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return ov?iv(this,e,t)||0:nv(this,e,t)}});var av=Ca,lv=fr,cv=_r,uv=ay,hv=or([].join),dv=lv!=Object,pv=uv("join",",");av({target:"Array",proto:!0,forced:dv||!pv},{join:function(e){return hv(cv(this),void 0===e?",":e)}});var fv=Dh,mv=_r,gv=Os,yv=js,vv=ay,_v=Math.min,bv=[].lastIndexOf,wv=!!bv&&1/[1].lastIndexOf(1,-0)<0,xv=vv("lastIndexOf"),Sv=wv||!xv?function(e){if(wv)return fv(bv,this,arguments)||0;var t=mv(this),n=yv(t),r=n-1;for(arguments.length>1&&(r=_v(r,gv(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:bv;Ca({target:"Array",proto:!0,forced:Sv!==[].lastIndexOf},{lastIndexOf:Sv});var Ev=oy.map;Ca({target:"Array",proto:!0,forced:!Mg("map")},{map:function(e){return Ev(this,e,arguments.length>1?arguments[1]:void 0)}});var Tv=Ca,Mv=di,Av=js,kv=mg,Cv=Bn(function(){return 4294967297!==[].push.call({length:4294967296},1)}),Iv=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch($C){return $C instanceof TypeError}}();Tv({target:"Array",proto:!0,arity:1,forced:Cv||Iv},{push:function(e){var t=Mv(this),n=Av(t),r=arguments.length;kv(n+r);for(var i=0;i<r;i++)t[n]=arguments[i],n++;return t.length=n,n}});var Pv=Kr,Ov=di,Rv=fr,Dv=js,Lv=TypeError,Nv=function(e){return function(t,n,r,i){Pv(n);var o=Ov(t),s=Rv(o),a=Dv(o),l=e?a-1:0,c=e?-1:1;if(r<2)for(;;){if(l in s){i=s[l],l+=c;break}if(l+=c,e?l<0:a<=l)throw Lv("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=c)l in s&&(i=n(i,s[l],l,o));return i}},Fv={left:Nv(!1),right:Nv(!0)},zv=Fv.left,Uv=Dr,jv=Zu;Ca({target:"Array",proto:!0,forced:!ay("reduce")||!jv&&Uv>79&&Uv<83},{reduce:function(e){var t=arguments.length;return zv(this,e,t,t>1?arguments[1]:void 0)}});var Bv=Fv.right,Vv=Dr,Hv=Zu;Ca({target:"Array",proto:!0,forced:!ay("reduceRight")||!Hv&&Vv>79&&Vv<83},{reduceRight:function(e){return Bv(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var $v=Ca,Yv=sg,Gv=or([].reverse),qv=[1,2];$v({target:"Array",proto:!0,forced:String(qv)===String(qv.reverse())},{reverse:function(){return Yv(this)&&(this.length=this.length),Gv(this)}});var Wv=Ca,Kv=sg,Zv=xh,Jv=xr,Xv=Ns,Qv=js,e_=_r,t_=Gm,n_=Pi,r_=Lh,i_=Mg("slice"),o_=n_("species"),s_=Array,a_=Math.max;Wv({target:"Array",proto:!0,forced:!i_},{slice:function(e,t){var n,r,i,o=e_(this),s=Qv(o),a=Xv(e,s),l=Xv(void 0===t?s:t,s);if(Kv(o)&&(n=o.constructor,(Zv(n)&&(n===s_||Kv(n.prototype))||Jv(n)&&null===(n=n[o_]))&&(n=void 0),n===s_||void 0===n))return r_(o,a,l);for(r=new(void 0===n?s_:n)(a_(l-a,0)),i=0;a<l;a++,i++)a in o&&t_(r,i,o[a]);return r.length=i,r}});var l_=oy.some;Ca({target:"Array",proto:!0,forced:!ay("some")},{some:function(e){return l_(this,e,arguments.length>1?arguments[1]:void 0)}});var c_=Ns,u_=js,h_=Gm,d_=Array,p_=Math.max,f_=function(e,t,n){for(var r=u_(e),i=c_(t,r),o=c_(void 0===n?r:n,r),s=d_(p_(o-i,0)),a=0;i<o;i++,a++)h_(s,a,e[i]);return s.length=a,s},m_=f_,g_=Math.floor,y_=function(e,t){var n=e.length,r=g_(n/2);return n<8?v_(e,t):__(e,y_(m_(e,0,r),t),y_(m_(e,r),t),t)},v_=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},__=function(e,t,n,r){for(var i=t.length,o=n.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?r(t[s],n[a])<=0?t[s++]:n[a++]:s<i?t[s++]:n[a++];return e},b_=y_,w_=Ar.match(/firefox\/(\d+)/i),x_=!!w_&&+w_[1],S_=/MSIE|Trident/.test(Ar),E_=Ar.match(/AppleWebKit\/(\d+)\./),T_=!!E_&&+E_[1],M_=Ca,A_=or,k_=Kr,C_=di,I_=js,P_=$g,O_=wc,R_=Bn,D_=b_,L_=ay,N_=x_,F_=S_,z_=Dr,U_=T_,j_=[],B_=A_(j_.sort),V_=A_(j_.push),H_=R_(function(){j_.sort(void 0)}),$_=R_(function(){j_.sort(null)}),Y_=L_("sort"),G_=!R_(function(){if(z_)return z_<70;if(!(N_&&N_>3)){if(F_)return!0;if(U_)return U_<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)j_.push({k:t+r,v:n})}for(j_.sort(function(e,t){return t.v-e.v}),r=0;r<j_.length;r++)t=j_[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}});M_({target:"Array",proto:!0,forced:H_||!$_||!Y_||!G_},{sort:function(e){void 0!==e&&k_(e);var t=C_(this);if(G_)return void 0===e?B_(t):B_(t,e);var n,r,i=[],o=I_(t);for(r=0;r<o;r++)r in t&&V_(i,t[r]);for(D_(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:O_(t)>O_(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<o;)P_(t,r++);return t}}),th("Array");var q_=Ca,W_=di,K_=Ns,Z_=Os,J_=js,X_=mg,Q_=xg,eb=Gm,tb=$g,nb=Mg("splice"),rb=Math.max,ib=Math.min;q_({target:"Array",proto:!0,forced:!nb},{splice:function(e,t){var n,r,i,o,s,a,l=W_(this),c=J_(l),u=K_(e,c),h=arguments.length;for(0===h?n=r=0:1===h?(n=0,r=c-u):(n=h-2,r=ib(rb(Z_(t),0),c-u)),X_(c+n-r),i=Q_(l,r),o=0;o<r;o++)(s=u+o)in l&&eb(i,o,l[s]);if(i.length=r,n<r){for(o=u;o<c-r;o++)a=o+n,(s=o+r)in l?l[a]=l[s]:tb(l,a);for(o=c;o>c-r+n;o--)tb(l,o-1)}else if(n>r)for(o=c-r;o>u;o--)a=o+n-1,(s=o+r-1)in l?l[a]=l[s]:tb(l,a);for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-r+n,i}}),Jc("flat"),Jc("flatMap");var ob=Ca,sb=di,ab=js,lb=$g,cb=mg,ub=1!==[].unshift(0),hb=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch($C){return $C instanceof TypeError}}();ob({target:"Array",proto:!0,arity:1,forced:ub||hb},{unshift:function(e){var t=sb(this),n=ab(t),r=arguments.length;if(r){cb(n+r);for(var i=n;i--;){var o=i+r;i in t?t[o]=t[i]:lb(t,o)}for(var s=0;s<r;s++)t[s]=arguments[s]}return t.length=n+r}});var db=wm.Array,pb={exports:{}},fb={},mb=cr,gb=_r,yb=ks.f,vb=f_,_b="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];fb.f=function(e){return _b&&"Window"==mb(e)?function(e){try{return yb(e)}catch($C){return vb(_b)}}(e):yb(gb(e))};var bb=Bn(function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),wb=Bn,xb=xr,Sb=cr,Eb=bb,Tb=Object.isExtensible,Mb=wb(function(){Tb(1)})||Eb?function(e){return!!xb(e)&&((!Eb||"ArrayBuffer"!=Sb(e))&&(!Tb||Tb(e)))}:Tb,Ab=!Bn(function(){return Object.isExtensible(Object.preventExtensions({}))}),kb=Ca,Cb=or,Ib=Go,Pb=xr,Ob=mi,Rb=ro.f,Db=ks,Lb=fb,Nb=Mb,Fb=Ab,zb=!1,Ub=bi("meta"),jb=0,Bb=function(e){Rb(e,Ub,{value:{objectID:"O"+jb++,weakData:{}}})},Vb=pb.exports={enable:function(){Vb.enable=function(){},zb=!0;var e=Db.f,t=Cb([].splice),n={};n[Ub]=1,e(n).length&&(Db.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===Ub){t(r,i,1);break}return r},kb({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Lb.f}))},fastKey:function(e,t){if(!Pb(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Ob(e,Ub)){if(!Nb(e))return"F";if(!t)return"E";Bb(e)}return e[Ub].objectID},getWeakData:function(e,t){if(!Ob(e,Ub)){if(!Nb(e))return!0;if(!t)return!1;Bb(e)}return e[Ub].weakData},onFreeze:function(e){return Fb&&zb&&Nb(e)&&!Ob(e,Ub)&&Bb(e),e}};Ib[Ub]=!0;var Hb=br,$b=xr,Yb=Ya,Gb=Ca,qb=Un,Wb=or,Kb=wa,Zb=As,Jb=pb.exports,Xb=vc,Qb=ih,ew=br,tw=xr,nw=Bn,rw=lf,iw=cu,ow=function(e,t,n){var r,i;return Yb&&Hb(r=t.constructor)&&r!==n&&$b(i=r.prototype)&&i!==n.prototype&&Yb(e,i),e},sw=As,aw=function(e,t,n){for(var r in t)sw(e,r,t[r],n);return e},lw=ro.f,cw=yl,uw=aw,hw=kl,dw=ih,pw=vc,fw=Lu,mw=th,gw=Vn,yw=pb.exports.fastKey,vw=us.set,_w=us.getterFor,bw={getConstructor:function(e,t,n,r){var i=e(function(e,i){dw(e,o),vw(e,{type:t,index:cw(null),first:void 0,last:void 0,size:0}),gw||(e.size=0),void 0!=i&&pw(i,e[r],{that:e,AS_ENTRIES:n})}),o=i.prototype,s=_w(t),a=function(e,t,n){var r,i,o=s(e),a=l(e,t);return a?a.value=n:(o.last=a={index:i=yw(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),gw?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},l=function(e,t){var n,r=s(e),i=yw(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return uw(o,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,gw?e.size=0:this.size=0},delete:function(e){var t=this,n=s(t),r=l(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),gw?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=s(this),r=hw(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!l(this,e)}}),uw(o,n?{get:function(e){var t=l(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),gw&&lw(o,"size",{get:function(){return s(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=_w(t),o=_w(r);fw(e,t,function(e,t){vw(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),mw(t)}};(function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",s=qb[e],a=s&&s.prototype,l=s,c={},u=function(e){var t=Wb(a[e]);Zb(a,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!tw(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!tw(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!tw(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(Kb(e,!ew(s)||!(i||a.forEach&&!nw(function(){(new s).entries().next()}))))l=n.getConstructor(t,e,r,o),Jb.enable();else if(Kb(e,!0)){var h=new l,d=h[o](i?{}:-0,1)!=h,p=nw(function(){h.has(1)}),f=rw(function(e){new s(e)}),m=!i&&nw(function(){for(var e=new s,t=5;t--;)e[o](t,t);return!e.has(-0)});f||((l=t(function(e,t){Qb(e,a);var n=ow(new s,e,l);return void 0!=t&&Xb(t,n[o],{that:n,AS_ENTRIES:r}),n})).prototype=a,a.constructor=l),(p||m)&&(u("delete"),u("has"),r&&u("get")),(m||d)&&u(o),i&&a.clear&&delete a.clear}c[e]=l,Gb({global:!0,constructor:!0,forced:l!=s},c),iw(l,e),i||n.setStrong(l,e,r)})("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},bw);var ww=js,xw=function(e,t){for(var n=0,r=ww(t),i=new e(r);r>n;)i[n]=t[n++];return i},Sw=kl,Ew=fr,Tw=di,Mw=Bi,Aw=js,kw=yl,Cw=xw,Iw=Array,Pw=or([].push),Ow=function(e,t,n,r){for(var i,o,s,a=Tw(e),l=Ew(a),c=Sw(t,n),u=kw(null),h=Aw(l),d=0;h>d;d++)s=l[d],(o=Mw(c(s,d,a)))in u?Pw(u[o],s):u[o]=[s];if(r&&(i=r(a))!==Iw)for(o in u)u[o]=Cw(i,u[o]);return u},Rw=Ow,Dw=Jc;Ca({target:"Array",proto:!0},{group:function(e){return Rw(this,e,arguments.length>1?arguments[1]:void 0)}}),Dw("group");var Lw=Ow,Nw=Jc;Ca({target:"Array",proto:!0,forced:!ay("groupBy")},{groupBy:function(e){return Lw(this,e,arguments.length>1?arguments[1]:void 0)}}),Nw("groupBy");var Fw=kl,zw=or,Uw=fr,jw=di,Bw=js,Vw=Tr("Map"),Hw=Vw.prototype,$w=zw(Hw.get),Yw=zw(Hw.has),Gw=zw(Hw.set),qw=zw([].push),Ww=function(e){for(var t,n,r=jw(this),i=Uw(r),o=Fw(e,arguments.length>1?arguments[1]:void 0),s=new Vw,a=Bw(i),l=0;a>l;l++)t=o(n=i[l],l,r),Yw(s,t)?qw($w(s,t),n):Gw(s,t,[n]);return s},Kw=Jc,Zw=Ww;Ca({target:"Array",proto:!0,name:"groupToMap",forced:!ay("groupByToMap")},{groupByToMap:Zw}),Kw("groupByToMap");var Jw=Jc;Ca({target:"Array",proto:!0},{groupToMap:Ww}),Jw("groupToMap");var Xw=js,Qw=function(e,t){for(var n=Xw(e),r=new t(n),i=0;i<n;i++)r[i]=e[n-i-1];return r},ex=_r,tx=Jc,nx=Array;Ca({target:"Array",proto:!0},{toReversed:function(){return Qw(ex(this),nx)}}),tx("toReversed");var rx=Un,ix=function(e){return rx[e].prototype},ox=Ca,sx=Kr,ax=_r,lx=xw,cx=Jc,ux=Array,hx=or(ix("Array").sort);ox({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&sx(e);var t=ax(this),n=lx(ux,t);return hx(n,e)}}),cx("toSorted");var dx=Ca,px=Jc,fx=mg,mx=js,gx=Ns,yx=_r,vx=Os,_x=Array,bx=Math.max,wx=Math.min;dx({target:"Array",proto:!0},{toSpliced:function(e,t){var n,r,i,o,s=yx(this),a=mx(s),l=gx(e,a),c=arguments.length,u=0;for(0===c?n=r=0:1===c?(n=0,r=a-l):(n=c-2,r=wx(bx(vx(t),0),a-l)),i=fx(a+n-r),o=_x(i);u<l;u++)o[u]=s[u];for(;u<l+n;u++)o[u]=arguments[u-l+2];for(;u<i;u++)o[u]=s[u+r-n];return o}}),px("toSpliced");var xx=js,Sx=Os,Ex=RangeError,Tx=function(e,t,n,r){var i=xx(e),o=Sx(n),s=o<0?i+o:o;if(s>=i||s<0)throw Ex("Incorrect index");for(var a=new t(i),l=0;l<i;l++)a[l]=l===s?r:e[l];return a},Mx=_r,Ax=Array;Ca({target:"Array",proto:!0},{with:function(e,t){return Tx(Mx(this),Ax,e,t)}});var kx,Cx,Ix=db,Px=Un,Ox=li,Rx=br,Dx=za,Lx=As,Nx="USE_FUNCTION_CONSTRUCTOR",Fx=Pi("asyncIterator"),zx=Px.AsyncIterator,Ux=Ox.AsyncIteratorPrototype;if(Ux)kx=Ux;else if(Rx(zx))kx=zx.prototype;else if(Ox[Nx]||Px[Nx])try{Cx=Dx(Dx(Dx(Function("return async function*(){}()")()))),Dx(Cx)===Object.prototype&&(kx=Cx)}catch($C){}kx||(kx={}),Rx(kx[Fx])||Lx(kx,Fx,function(){return this});var jx=Gn,Bx=lo,Vx=yl,Hx=Jr,$x=aw,Yx=us,Gx=kx,qx=Tr("Promise"),Wx="AsyncFromSyncIterator",Kx=Yx.set,Zx=Yx.getterFor(Wx),Jx=function(e,t,n){var r=e.done;qx.resolve(e.value).then(function(e){t({done:r,value:e})},n)},Xx=function(e){Kx(this,{type:Wx,iterator:Bx(e),next:e.next})};Xx.prototype=$x(Vx(Gx),{next:function(){var e=Zx(this);return new qx(function(t,n){var r=Bx(jx(e.next,e.iterator));Jx(r,t,n)})},return:function(){var e=Zx(this).iterator;return new qx(function(t,n){var r=Hx(e,"return");if(void 0===r)return t({done:!0,value:void 0});var i=Bx(jx(r,e));Jx(i,t,n)})}});var Qx=Xx,eS=Gn,tS=Qx,nS=lo,rS=ec,iS=Jr,oS=Pi("asyncIterator"),sS=Kr,aS=lo,lS=Gn,cS=Tr,uS=Jr,hS=Gn,dS=Kr,pS=lo,fS=mg,mS=Tr,gS=function(e){return{iterator:e,next:sS(aS(e).next)}},yS=function(e,t,n,r){try{var i=uS(e,"return");if(i)return cS("Promise").resolve(lS(i,e)).then(function(){t(n)},function(e){r(e)})}catch(o){return r(o)}t(n)},vS=function(e){var t=0==e,n=1==e,r=2==e,i=3==e;return function(e,o,s){var a=gS(e),l=mS("Promise"),c=a.iterator,u=a.next,h=0,d=void 0!==o;return!d&&t||dS(o),new l(function(e,a){var p=function(e){yS(c,a,e,a)},f=function(){try{if(t&&d)try{fS(h)}catch(m){p(m)}l.resolve(pS(hS(u,c))).then(function(u){try{if(pS(u).done)t?(s.length=h,e(s)):e(!i&&(r||void 0));else{var m=u.value;try{d?l.resolve(t?o(m,h):o(m)).then(function(o){if(n)f();else if(r)o?f():yS(c,e,!1,a);else if(t)try{s[h++]=o,f()}catch(l){p(l)}else o?yS(c,e,i||m,a):f()},p):(s[h++]=m,f())}catch(g){p(g)}}}catch(y){a(y)}},a)}catch($C){a($C)}};f()})}},_S={toArray:vS(0),forEach:vS(1),every:vS(2),some:vS(3),find:vS(4)},bS=kl,wS=di,xS=xh,SS=function(e,t){var n=arguments.length<2?iS(e,oS):t;return n?nS(eS(n,e)):new tS(rS(e))},ES=ec,TS=ql,MS=Jr,AS=ix,kS=Tr,CS=Qx,IS=_S.toArray,PS=Pi("asyncIterator"),OS=AS("Array").values,RS=function(e){var t=this,n=arguments.length,r=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(kS("Promise"))(function(n){var o=wS(e);void 0!==r&&(r=bS(r,i));var s=MS(o,PS),a=s?void 0:TS(o)||OS,l=xS(t)?new t:[],c=s?SS(o,s):new CS(ES(o,a));n(IS(c,r,l))})};Ca({target:"Array",stat:!0,forced:!0},{fromAsync:RS});var DS=oy.filterReject,LS=Jc;Ca({target:"Array",proto:!0,forced:!0},{filterOut:function(e){return DS(this,e,arguments.length>1?arguments[1]:void 0)}}),LS("filterOut");var NS=oy.filterReject,FS=Jc;Ca({target:"Array",proto:!0,forced:!0},{filterReject:function(e){return NS(this,e,arguments.length>1?arguments[1]:void 0)}}),FS("filterReject");var zS=Ca,US=sg,jS=Object.isFrozen,BS=function(e,t){if(!jS||!US(e)||!jS(e))return!1;for(var n,r=0,i=e.length;r<i;)if(!("string"==typeof(n=e[r++])||t&&"undefined"==typeof n))return!1;return 0!==i};zS({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(e){if(!BS(e,!0))return!1;var t=e.raw;return t.length===e.length&&BS(t,!1)}});var VS=Eo.exports,HS=ro,$S=function(e,t,n){return n.get&&VS(n.get,t,{getter:!0}),n.set&&VS(n.set,t,{setter:!0}),HS.f(e,t,n)},YS=Jc,GS=di,qS=js;Vn&&($S(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=GS(this),t=qS(e);return 0==t?void 0:e[t-1]},set:function(e){var t=GS(this),n=qS(t);return t[0==n?0:n-1]=e}}),YS("lastItem"));var WS=Jc,KS=di,ZS=js;Vn&&($S(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=KS(this),t=ZS(e);return 0==t?0:t-1}}),WS("lastIndex"));var JS=or,XS=Kr,QS=js,eE=di,tE=xg,nE=Tr("Map"),rE=nE.prototype,iE=JS(rE.forEach),oE=JS(rE.has),sE=JS(rE.set),aE=JS([].push),lE=Jc;Ca({target:"Array",proto:!0,forced:!0},{uniqueBy:function(e){var t,n,r,i=eE(this),o=QS(i),s=tE(i,0),a=new nE,l=null!=e?XS(e):function(e){return e};for(t=0;t<o;t++)r=l(n=i[t]),oE(a,r)||sE(a,r,n);return iE(a,function(e){aE(s,e)}),s}}),lE("uniqueBy");var cE=Ix;!function(e){e.exports=cE}({exports:{}});var uE,hE=function(){function e(e,t,n){void 0===n&&(n=(0,r.A)()),this.timestamp=e,this.user=t,this.insertId=n}return e.exposure=function(e,t,n,r){return new dE(r,e,t.experiment,t.variationId,t.variationKey,t.reason,n)},e.track=function(e,t,n,r){return new pE(r,n,e,t)},e.remoteConfig=function(e,t,n,r){return new fE(r,e,t.parameter,t.valueId,t.reason,n)},e.isExposureEvent=function(e){return void 0!==e.experiment},e.isTrackEvent=function(e){return void 0!==e.eventType},e.isRemoteConfigEvent=function(e){return void 0!==e.parameter},e.isExposureEventDto=function(e){return"experimentId"in e&&"undefined"!==typeof e.experimentId},e.isTrackEventDto=function(e){return"eventTypeId"in e&&"undefined"!==typeof e.eventTypeId},e.isRemoteConfigEventDto=function(e){return"parameterId"in e&&"undefined"!==typeof e.parameterId},e.prototype.toDto=function(){return{insertId:this.insertId,timestamp:this.timestamp,userId:this.user.identifiers[ne.ID],identifiers:this.user.identifiers,userProperties:_.sanitize(this.user.properties),hackleProperties:_.sanitize(this.user.hackleProperties)}},e}(),dE=function(e){function t(t,n,r,i,o,s,a,l){var c=e.call(this,t,n,l)||this;return c.experiment=r,c.variationId=i,c.variationKey=o,c.decisionReason=s,c.properties=a,c}return s(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.experiment,this.variationId,this.variationKey,this.decisionReason,this.properties,this.insertId)},t.prototype.toDto=function(){return a(a({},e.prototype.toDto.call(this)),{experimentId:this.experiment.id,experimentKey:this.experiment.key,experimentType:this.experiment.type,experimentVersion:this.experiment.version,variationId:this.variationId,variationKey:this.variationKey,decisionReason:this.decisionReason.toString(),properties:this.properties})},t}(hE),pE=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,o)||this;return s.eventType=r,s.event=i,s}return s(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.eventType,this.event,this.insertId)},t.prototype.toDto=function(){return a(a({},e.prototype.toDto.call(this)),{eventTypeId:this.eventType.id,eventTypeKey:this.eventType.key,value:this.event.value||0,properties:_.sanitize(this.event.properties)})},t}(hE),fE=function(e){function t(t,n,r,i,o,s,a){var l=e.call(this,t,n,a)||this;return l.parameter=r,l.valueId=i,l.decisionReason=o,l.properties=s,l}return s(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.parameter,this.valueId,this.decisionReason,this.properties,this.insertId)},t.prototype.toDto=function(){return a(a({},e.prototype.toDto.call(this)),{parameterId:this.parameter.id,parameterKey:this.parameter.key,parameterType:this.parameter.type,valueId:this.valueId,decisionReason:this.decisionReason.toString(),properties:_.sanitize(this.properties)})},t}(hE),mE=function(){function e(e,t){this.userManager=e,this.core=t}return e.isSessionEvent=function(t){return!!hE.isTrackEvent(t)&&(t.event.key===e.SESSION_START_EVENT_NAME||t.event.key===e.SESSION_END_EVENT_NAME)},e.prototype.onSessionStarted=function(t,n,r){this.track(e.SESSION_START_EVENT_NAME,t,n,r)},e.prototype.onSessionEnded=function(t,n,r){this.track(e.SESSION_END_EVENT_NAME,t,n,r)},e.prototype.track=function(e,t,n,r){var i={key:e},o=this.userManager.toHackleUser(n),s=this.decorateSession(o,t);this.core.track(i,s,r)},e.prototype.decorateSession=function(e,t){var n=(new ie).add(ne.SESSION,t).addIdentifiers(e.identifiers).build();return a(a({},e),{identifiers:n})},e.SESSION_START_EVENT_NAME="$session_start",e.SESSION_END_EVENT_NAME="$session_end",e}(),gE=function(){function e(e,t,n,r){this.delegate=e,this.eventDedupDeterminer=t,this.sessionManager=n,this.userManager=r,this.decorators=[]}return e.prototype.addDecorator=function(e){this.decorators.push(e)},e.prototype.process=function(e){if(mE.isSessionEvent(e)||this.sessionManager.startNewSessionIfNeeded(this.userManager.currentUser,e.timestamp),!this.eventDedupDeterminer.isDedupTarget(e)){var t=this.decorators.reduce(function(e,t){return t.decorate(e)},e);this.delegate.process(t)}},e.prototype.flush=function(e){this.delegate.flush(e)},e.prototype.close=function(){this.delegate.close()},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"hidden":case"pagehide":return this.flush(!0);case"blur":case"focus":case"locationChange":case"visible":case"pageshow":return}},e}(),yE=function(){function e(){}return e.toEvent=function(t){var n;return{key:e.EVENT_KEY,properties:{level:e.LEVEL_ERROR,type:t.name,message:null!==(n=t.message)&&void 0!==n?n:"",$stacktrace:e._stacktrace(t)}}},e._stacktrace=function(t){return h.isNullOrUndefined(t.stack)?"":t.stack.split("\n").slice(0,e.STACK_TRACK_LIMIT).join("\n")},e.EVENT_KEY="$trace",e.LEVEL_ERROR="error",e.STACK_TRACK_LIMIT=30,e}(),vE=function(){function e(){}return e.prototype.evaluate=function(e,t){if(!this.supports(e))throw new Error("Unsupported EvaluatorRequest ".concat(e.toString()));if(t.contains(e)){var n=t.stack.map(function(e){return e.toString()}).join(" - ");throw new Error("Circular evaluation has occurred [".concat(n," - ").concat(e.toString(),"]"))}t.addRequest(e);try{return this.evaluateInternal(e,t)}finally{t.removeRequest(e)}},e}(),_E=function(){function e(e,t,n,r,i,o){this.reason=e,this.targetEvaluations=t,this.experiment=n,this.variationId=r,this.variationKey=i,this.config=o}return e.prototype.with=function(t){return new e(t,this.targetEvaluations,this.experiment,this.variationId,this.variationKey,this.config)},e.of=function(t,n,r,i){return new e(i,n.targetEvaluations,t.experiment,r.id,r.key,r.config)},e.ofDefault=function(t,n,r){var i=t.experiment._getVariationByKeyOrNull(t.defaultVariationKey);return h.isNotNullOrUndefined(i)?this.of(t,n,i,r):new e(r,n.targetEvaluations,t.experiment,void 0,t.defaultVariationKey,void 0)},e}(),bE=function(e){function t(t){var n=e.call(this)||this;return n.experimentFlowFactory=t,n}return s(t,e),t.prototype.supports=function(e){return void 0!==e.experiment},t.prototype.evaluateInternal=function(e,t){var n;return null!==(n=this.experimentFlowFactory.getExperimentFlow(e.experiment.type).evaluate(e,t))&&void 0!==n?n:_E.ofDefault(e,t,K.TRAFFIC_NOT_ALLOCATED)},t}(vE),wE=function(){function e(e,t,n,r,i,o){this.reason=e,this.targetEvaluations=t,this.parameter=n,this.valueId=r,this.value=i,this.properties=o}return e.of=function(t,n,r,i,o,s){return s.returnValue=_.truncateStringValue(i),new e(o,n.targetEvaluations,t.parameter,r,i,s)},e.ofDefault=function(e,t,n,r){return this.of(e,t,void 0,e.defaultValue,n,r)},e}(),xE=function(e){function t(t){var n=e.call(this)||this;return n.targetRuleDeterminer=t,n}return s(t,e),t.prototype.supports=function(e){return void 0!==e.parameter},t.prototype.evaluateInternal=function(e,t){var n={};if(n.requestValueType=e.requiredType,n.requestDefaultValue=_.truncateStringValue(e.defaultValue),h.isNullOrUndefined(e.user.identifiers[e.parameter.identifierType]))return wE.ofDefault(e,t,K.IDENTIFIER_NOT_FOUND,n);var r=this.targetRuleDeterminer.determineTargetRuleOrNull(e,t);return h.isNotNullOrUndefined(r)?(n.targetRuleKey=r.key,n.targetRuleName=r.name,this.evaluation(e,t,r.value,K.TARGET_RULE_MATCH,n)):this.evaluation(e,t,e.parameter.defaultValue,K.DEFAULT_RULE,n)},t.prototype.evaluation=function(e,t,n,r,i){return"UNKNOWN"===e.requiredType||"NULL"!==e.requiredType&&typeof e.defaultValue!==typeof n.rawValue?wE.ofDefault(e,t,K.TYPE_MISMATCH,i):wE.of(e,t,n.id,n.rawValue,r,i)},t}(vE),SE=function(){function e(e,t){this.type=e,this.id=t}return e.prototype.isEquals=function(e){return this.type===e.type&&this.id===e.id},e}(),EE=function(){function e(){this._stack=[],this._targetEvaluations=[],this._properties={},this.map=new WeakMap}return e.create=function(){return new e},Object.defineProperty(e.prototype,"stack",{get:function(){return Array.from(this._stack)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetEvaluations",{get:function(){return Array.from(this._targetEvaluations)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return _.sanitize(this._properties)},enumerable:!1,configurable:!0}),e.prototype.contains=function(e){return this._stack.some(function(t){return t.key.isEquals(e.key)})},e.prototype.addRequest=function(e){this._stack.push(e)},e.prototype.removeRequest=function(e){var t=this._stack.indexOf(e,0);t>-1&&this._stack.splice(t,1)},e.prototype.getEvaluation=function(e){return this._targetEvaluations.find(function(t){return t instanceof _E&&t.experiment.id===e.id})},e.prototype.addEvaluation=function(e){this._targetEvaluations.push(e)},e.prototype.setProperty=function(e,t){this._properties[e]=t},e.prototype.get=function(e){var t=this.map.get(e);if(!t)return null;if(!(t instanceof e))throw new Error("Context does not contain a value of type ".concat(e.name));return t},e.prototype.set=function(e,t){this.map.set(e,t)},e}(),TE=function(){function e(e,t,n,r){this.key=new SE("EXPERIMENT",n.id),this.workspace=e,this.user=t,this.experiment=n,this.defaultVariationKey=r}return e.of=function(t,n,r,i){return new e(t,n,r,i)},e.by=function(t,n){return new e(t.workspace,t.user,n,"A")},e.prototype.toString=function(){return"EvaluatorRequest(type=".concat(this.experiment.type,", key=").concat(this.experiment.key,")")},e}(),ME=function(){function e(e,t,n,r,i){this.key=new SE("REMOTE_CONFIG",n.id),this.workspace=e,this.user=t,this.parameter=n,this.requiredType=r,this.defaultValue=i}return e.of=function(t,n,r,i,o){return new e(t,n,r,i,o)},e.prototype.toString=function(){return"EvaluatorRequest(type=".concat(this.key.type,", key=").concat(this.parameter.key,")")},e}(),AE=function(){function e(){}return e.asString=function(e){switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"true":"false";default:return}},e.asNumber=function(e){switch(typeof e){case"number":return this.asActualNumber(e);case"string":return this.asActualNumber(Number(e));default:return}},e.asBoolean=function(e){switch(typeof e){case"boolean":return e;case"string":switch(e){case"true":return!0;case"false":return!1;default:return}default:return}},e.asActualNumber=function(e){return!isNaN(e)&&isFinite(e)?e:void 0},e}(),kE=function(){function e(e){this.storages=e}return e.prototype.getVariation=function(e,t){if(0!==this.storages.length)for(var n=0,r=this.storages;n<r.length;n++){var i=r[n].getVariation(e,t);if(void 0!==i)return i}},e}(),CE=function(){function e(e){this.listStorage=e}return e.prototype.getVariation=function(e,t){var n=this.get(e);if(n)return e._getVariationByIdOrNull(n)},e.prototype.get=function(e){var t=this.listStorage.getItem(e.id.toString());return AE.asNumber(t)},e.prototype.getAll=function(){var e=new Map;return this.listStorage.entries().forEach(function(t){var n=t[0],r=t[1],i=AE.asNumber(n),o=AE.asNumber(r);h.isNullOrUndefined(i)||i<0||h.isNullOrUndefined(o)||i<0||e.set(i,o)}),e},e.prototype.set=function(e,t){this.listStorage.setItem(e.id.toString(),t.toString())},e.prototype.remove=function(e){this.listStorage.removeItem(e.id.toString())},e.prototype.clear=function(){this.listStorage.clear()},e}(),IE=function(){function e(){this.evaluators=new Array}return e.prototype.add=function(e){this.evaluators.push(e)},e.prototype.evaluate=function(e,t){var n=this.evaluators.find(function(t){return t.supports(e)});if(h.isNullOrUndefined(n))throw new Error("Unsupported EvaluatorRequest [".concat(e.toString(),"]"));return n.evaluate(e,t)},e}(),PE=function(){function e(){}return e.get=function(e){return h.requiredNotNullOrUndefined(this.getOrNull(e),function(){return"Instance not registered [".concat(e,"]")})},e.getOrNull=function(t){return e.instances.get(t)},e.register=function(t,n){return e.instances.set(t,n),n},e.instances=new Map,e}(),OE=function(){function e(e,t){this.targetMatcher=e,this.bucketer=t}return e.prototype.determineTargetRuleOrNull=function(e,t){var n=this;return e.parameter.targetRules.find(function(r){return n.matches(e,t,r)})},e.prototype.matches=function(e,t,n){if(!this.targetMatcher.matches(e,t,n.target))return!1;var r=e.user.identifiers[e.parameter.identifierType];if(h.isNullOrUndefined(r))return!1;var i=e.workspace.getBucketOrNull(n.bucketId);if(h.isNullOrUndefined(i))throw new Error("bucket[".concat(n.bucketId,"]"));return h.isNotNullOrUndefined(this.bucketer.bucketing(i,r))},e}(),RE=function(){function e(e){this.bucketer=e}return e.prototype.resolveOrNull=function(e,t,n){switch(n.type){case"VARIATION":return this.resolveVariation(e,n);case"BUCKET":return this.resolveBucket(e,n)}},e.prototype.resolveVariation=function(e,t){return e.experiment._getVariationByIdOrNull(t.variationId)},e.prototype.resolveBucket=function(e,t){var n=e.workspace.getBucketOrNull(t.bucketId),r=e.user.identifiers[e.experiment.identifierType];if(r){var i=this.bucketer.bucketing(n,r);if(i)return e.experiment._getVariationByIdOrNull(i.variationId)}},e}(),DE=function(){function e(e,t){this.flowEvaluator=e,this.nextFlow=t}return e.prototype.evaluate=function(e,t){return this.flowEvaluator&&this.nextFlow?this.flowEvaluator.evaluate(e,t,this.nextFlow):void 0},e.end=function(){return new e(void 0,void 0)},e.decision=function(t,n){return new e(t,n)},e.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this.end(),r=0,i=e.reverse();r<i.length;r++){var o=i[r];n=this.decision(o,n)}return n},e}(),LE=function(){function e(e){this.overrideResolver=e}return e.prototype.evaluate=function(e,t,n){var r=this.overrideResolver.resolveOrNull(e,t);if(!r)return n.evaluate(e,t);switch(e.experiment.type){case"AB_TEST":return _E.of(e,t,r,K.OVERRIDDEN);case"FEATURE_FLAG":return _E.of(e,t,r,K.INDIVIDUAL_TARGET_MATCH)}},e}(),NE=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return"DRAFT"===e.experiment.status?_E.ofDefault(e,t,K.EXPERIMENT_DRAFT):n.evaluate(e,t)},e}(),FE=function(){function e(){}return e.prototype.evaluate=function(e,t,n){if("PAUSED"!==e.experiment.status)return n.evaluate(e,t);switch(e.experiment.type){case"AB_TEST":return _E.ofDefault(e,t,K.EXPERIMENT_PAUSED);case"FEATURE_FLAG":return _E.ofDefault(e,t,K.FEATURE_FLAG_INACTIVE)}},e}(),zE=function(){function e(){}return e.prototype.evaluate=function(e,t,n){if("COMPLETED"===e.experiment.status){var r=e.experiment._winnerVariationOrNull();if(!r)throw new Error("winner variation [".concat(e.experiment.id,"]"));return _E.of(e,t,r,K.EXPERIMENT_COMPLETED)}return n.evaluate(e,t)},e}(),UE=function(){function e(e){this.experimentTargetDeterminer=e}return e.prototype.evaluate=function(e,t,n){if("AB_TEST"!==e.experiment.type)throw new Error("experiment type must be AB_TEST [".concat(e.experiment.id,"]"));return this.experimentTargetDeterminer.isUserInExperimentTarget(e,t)?n.evaluate(e,t):_E.ofDefault(e,t,K.NOT_IN_EXPERIMENT_TARGET)},e}(),jE=function(){function e(e){this.actionResolver=e}return e.prototype.evaluate=function(e,t,n){if("RUNNING"!==e.experiment.status)throw new Error("experiment status must be RUNNING [".concat(e.experiment.id,"]"));if("AB_TEST"!==e.experiment.type)throw new Error("experiment type must be AB_TEST [".concat(e.experiment.id,"]"));var r=this.actionResolver.resolveOrNull(e,t,e.experiment.defaultRule);return r?r.isDropped?_E.ofDefault(e,t,K.VARIATION_DROPPED):_E.of(e,t,r,K.TRAFFIC_ALLOCATED):_E.ofDefault(e,t,K.TRAFFIC_NOT_ALLOCATED)},e}(),BE=function(){function e(e,t){this.targetRuleDeterminer=e,this.actionResolver=t}return e.prototype.evaluate=function(e,t,n){if("RUNNING"!==e.experiment.status)throw new Error("experiment status must be RUNNING [".concat(e.experiment.id,"]"));if("FEATURE_FLAG"!==e.experiment.type)throw new Error("experiment type must be FEATURE_FLAG [".concat(e.experiment.id,"]"));if(!e.user.identifiers[e.experiment.identifierType])return n.evaluate(e,t);var r=this.targetRuleDeterminer.determineTargetRuleOrNull(e,t);if(!r)return n.evaluate(e,t);var i=this.actionResolver.resolveOrNull(e,t,r.action);if(!i)throw new Error("FeatureFlag must decide the Variation [".concat(e.experiment.id,"]"));return _E.of(e,t,i,K.TARGET_RULE_MATCH)},e}(),VE=function(){function e(e){this.actionResolver=e}return e.prototype.evaluate=function(e,t,n){if("RUNNING"!==e.experiment.status)throw new Error("experiment status must be RUNNING [".concat(e.experiment.id,"]"));if("FEATURE_FLAG"!==e.experiment.type)throw new Error("experiment type must be FEATURE_FLAG [".concat(e.experiment.id,"]"));if(!e.user.identifiers[e.experiment.identifierType])return _E.ofDefault(e,t,K.DEFAULT_RULE);var r=this.actionResolver.resolveOrNull(e,t,e.experiment.defaultRule);if(!r)throw new Error("FeatureFlag must decide the Variation [".concat(e.experiment.id,"]"));return _E.of(e,t,r,K.DEFAULT_RULE)},e}(),HE=function(){function e(e){this.containerResolver=e}return e.prototype.evaluate=function(e,t,n){var r=e.experiment.containerId;if(!r)return n.evaluate(e,t);var i=e.workspace.getContainerOrNull(r);if(!i)throw new Error("container[".concat(r,"]"));return this.containerResolver.isUserInContainerGroup(e,t,i)?n.evaluate(e,t):_E.ofDefault(e,t,K.NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT)},e}(),$E=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return e.user.identifiers[e.experiment.identifierType]?n.evaluate(e,t):_E.ofDefault(e,t,K.IDENTIFIER_NOT_FOUND)},e}(),YE=function(){function e(e){this.targetMatcher=e}return e.prototype.isUserInExperimentTarget=function(e,t){var n=this;return 0===e.experiment.targetAudiences.length||e.experiment.targetAudiences.some(function(r){return n.targetMatcher.matches(e,t,r)})},e}(),GE=function(){function e(e){this.targetMatcher=e}return e.prototype.determineTargetRuleOrNull=function(e,t){var n=this;return e.experiment.targetRules.find(function(r){return n.targetMatcher.matches(e,t,r.target)})},e}(),qE=function(){function e(e,t,n){this.manualOverrideStorage=e,this.targetMatcher=t,this.actionResolver=n}return e.prototype.resolveOrNull=function(e,t){var n,r;return null!==(r=null!==(n=this.resolveManualOverride(e))&&void 0!==n?n:this._resolveUserOverride(e))&&void 0!==r?r:this._resolveSegmentOverride(e,t)},e.prototype.resolveManualOverride=function(e){return this.manualOverrideStorage.getVariation(e.experiment,e.user)},e.prototype._resolveUserOverride=function(e){var t=e.experiment,n=e.user.identifiers[t.identifierType];if(n){var r=t.userOverrides.get(n);if(r)return t._getVariationByIdOrNull(r)}},e.prototype._resolveSegmentOverride=function(e,t){var n=this,r=e.experiment.segmentOverrides.find(function(r){return n.targetMatcher.matches(e,t,r.target)});if(r)return this.actionResolver.resolveOrNull(e,t,r.action)},e}(),WE=function(){function e(e){this.bucketer=e}return e.prototype.isUserInContainerGroup=function(e,t,n){var r=e.user.identifiers[e.experiment.identifierType];if(h.isNullOrUndefined(r))return!1;var i=e.workspace.getBucketOrNull(n.bucketId);if(h.isNullOrUndefined(i))throw new Error("Bucket[".concat(n.bucketId,"]"));var o=this.bucketer.bucketing(i,r);if(h.isNullOrUndefined(o))return!1;var s=n.getGroupOrNull(o.variationId);if(h.isNullOrUndefined(s))throw new Error("ContainerGroup[".concat(o.variationId,"]"));return s.experiments.includes(e.experiment.id)},e}(),KE=function(){function e(e,t,n){var r=new RE(t),i=new qE(e,n,r),o=new WE(t);this.abTestFlow=DE.of(new LE(i),new $E,new HE(o),new UE(new YE(n)),new NE,new FE,new zE,new jE(r)),this.featureFlagFlow=DE.of(new NE,new FE,new zE,new LE(i),new $E,new BE(new GE(n),r),new VE(r))}return e.prototype.getExperimentFlow=function(e){switch(e){case"AB_TEST":return this.abTestFlow;case"FEATURE_FLAG":return this.featureFlagFlow}},e}(),ZE=function(){function e(e){this.conditionMatcherFactory=e}return e.prototype.matches=function(e,t,n){var r=this;return n.conditions.every(function(n){return r._matches(e,t,n)})},e.prototype.anyMatches=function(e,t,n){var r=this;return!n.length||n.some(function(n){return r.matches(e,t,n)})},e.prototype._matches=function(e,t,n){return this.conditionMatcherFactory.getMatcher(n.key.type).matches(e,t,n)},e}(),JE=function(){function e(){}return e.prototype.decorate=function(e){return e},e}(),XE=function(){function e(){}return e.prototype.decorate=function(e){return"string"===typeof e?An.decodeURIOrOriginal(e):e},e}(),QE=function(){function e(e,t){this.valueMatcherFactory=e,this.operatorMatcherFactory=t}return e.prototype.matches=function(e,t,n){void 0===n&&(n=new JE);var r=this.valueMatcherFactory.getMatcher(t.valueType),i=this.operatorMatcherFactory.getMatcher(t.operator),o=this.userValueMatches(e,t,r,i,n);return this.typeMatches(t.type,o)},e.prototype.userValueMatches=function(e,t,n,r,i){return Array.isArray(e)?this.arrayMatches(e,t,n,r,i):this.singleMatches(e,t,n,r,i)},e.prototype.singleMatches=function(e,t,n,r,i){var o=i.decorate(e),s=t.values.map(i.decorate);return r.matches(n,o,s)},e.prototype.arrayMatches=function(e,t,n,r,i){var o=this;return e.some(function(e){return o.singleMatches(e,t,n,r,i)})},e.prototype.typeMatches=function(e,t){switch(e){case"MATCH":return t;case"NOT_MATCH":return!t}},e}(),eT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.inMatches(t,n)})},e}(),tT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.containsMatches(t,n)})},e}(),nT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.startsWithMatches(t,n)})},e}(),rT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.endsWithMatches(t,n)})},e}(),iT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.greaterThanMatches(t,n)})},e}(),oT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.greaterThanOrEqualMatches(t,n)})},e}(),sT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.lessThanMatches(t,n)})},e}(),aT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.lessThanOrEqualMatches(t,n)})},e}(),lT=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)},e}(),cT=function(){function e(){}return e.prototype.getMatcher=function(t){switch(t){case"IN":return e.IN_MATCHER;case"CONTAINS":return e.CONTAINS_MATCHER;case"STARTS_WITH":return e.STARTS_WITH_MATCHER;case"ENDS_WITH":return e.ENDS_WITH_MATCHER;case"GT":return e.GT_MATCHER;case"GTE":return e.GTE_MATCHER;case"LT":return e.LT_MATCHER;case"LTE":return e.LTE_MATCHER;case"EXISTS":return e.EXISTS_MATCHER}},e.IN_MATCHER=new eT,e.CONTAINS_MATCHER=new tT,e.STARTS_WITH_MATCHER=new nT,e.ENDS_WITH_MATCHER=new rT,e.GT_MATCHER=new iT,e.GTE_MATCHER=new oT,e.LT_MATCHER=new sT,e.LTE_MATCHER=new aT,e.EXISTS_MATCHER=new lT,e}(),uT=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=AE.asString(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n===r},e.prototype.containsMatches=function(e,t){var n=AE.asString(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.includes(r)},e.prototype.startsWithMatches=function(e,t){var n=AE.asString(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.startsWith(r)},e.prototype.endsWithMatches=function(e,t){var n=AE.asString(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.endsWith(r)},e.prototype.greaterThanMatches=function(e,t){var n=AE.asString(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n>r},e.prototype.greaterThanOrEqualMatches=function(e,t){var n=AE.asString(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n>=r},e.prototype.lessThanMatches=function(e,t){var n=AE.asString(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n<r},e.prototype.lessThanOrEqualMatches=function(e,t){var n=AE.asString(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n<=r},e}(),hT=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=AE.asNumber(e),r=AE.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n===r},e.prototype.containsMatches=function(e,t){return!1},e.prototype.startsWithMatches=function(e,t){return!1},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){var n=AE.asNumber(e),r=AE.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n>r},e.prototype.greaterThanOrEqualMatches=function(e,t){var n=AE.asNumber(e),r=AE.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n>=r},e.prototype.lessThanMatches=function(e,t){var n=AE.asNumber(e),r=AE.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n<r},e.prototype.lessThanOrEqualMatches=function(e,t){var n=AE.asNumber(e),r=AE.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n<=r},e}(),dT=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=AE.asBoolean(e),r=AE.asBoolean(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n===r},e.prototype.containsMatches=function(e,t){return!1},e.prototype.startsWithMatches=function(e,t){return!1},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){return!1},e.prototype.greaterThanOrEqualMatches=function(e,t){return!1},e.prototype.lessThanMatches=function(e,t){return!1},e.prototype.lessThanOrEqualMatches=function(e,t){return!1},e}(),pT=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=be.tryParse(e),r=be.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isEqualTo(r)},e.prototype.containsMatches=function(e,t){return!1},e.prototype.startsWithMatches=function(e,t){return!1},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){var n=be.tryParse(e),r=be.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isGreaterThan(r)},e.prototype.greaterThanOrEqualMatches=function(e,t){var n=be.tryParse(e),r=be.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isGreaterThanOrEqualTo(r)},e.prototype.lessThanMatches=function(e,t){var n=be.tryParse(e),r=be.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isLessThan(r)},e.prototype.lessThanOrEqualMatches=function(e,t){var n=be.tryParse(e),r=be.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isLessThanOrEqualTo(r)},e}(),fT=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=An.tryParse(e),r=AE.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&An.decodeURIOrOriginal(An.removePathnameTrailingSlash(n))===An.decodeURIOrOriginal(An.removePathnameTrailingSlash(r))},e.prototype.containsMatches=function(e,t){var n=An.tryParse(e),r=AE.asString(t);if(h.isNullOrUndefined(n)||h.isNullOrUndefined(r))return!1;var i=An.decodeURIOrOriginal(n.href);return i.includes(r)||i.includes(encodeURI(r))},e.prototype.startsWithMatches=function(e,t){var n=An.tryParse(e),r=AE.asString(t);if(h.isNullOrUndefined(n)||h.isNullOrUndefined(r))return!1;var i=An.decodeURIOrOriginal(n.href);return i.startsWith(r)||i.startsWith(encodeURI(r))},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){return!1},e.prototype.greaterThanOrEqualMatches=function(e,t){return!1},e.prototype.lessThanMatches=function(e,t){return!1},e.prototype.lessThanOrEqualMatches=function(e,t){return!1},e}(),mT=function(){function e(){}return e.prototype.inMatches=function(e,t){return!1},e.prototype.containsMatches=function(e,t){return!1},e.prototype.startsWithMatches=function(e,t){return!1},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){return!1},e.prototype.greaterThanOrEqualMatches=function(e,t){return!1},e.prototype.lessThanMatches=function(e,t){return!1},e.prototype.lessThanOrEqualMatches=function(e,t){return!1},e}(),gT=function(){function e(){}return e.prototype.getMatcher=function(t){switch(t){case"STRING":case"JSON":return e.STRING_MATCHER;case"NUMBER":return e.NUMBER_MATCHER;case"BOOLEAN":return e.BOOLEAN_MATCHER;case"VERSION":return e.VERSION_MATCHER;case"URL":return e.URL_MATCHER;case"NULL":case"UNKNOWN":return e.NULL_MATCHER}},e.STRING_MATCHER=new uT,e.NUMBER_MATCHER=new hT,e.BOOLEAN_MATCHER=new dT,e.VERSION_MATCHER=new pT,e.URL_MATCHER=new fT,e.NULL_MATCHER=new mT,e}(),yT=function(){function e(e,t){this.URL_HACKLE_PROPERTY_KEY_NAMES=["pagePath","host","url","queryParameter"],this.userValueResolver=e,this.valueOperatorMatcher=t}return e.prototype.matches=function(e,t,n){var r=this.userValueResolver.resolveOrNull(e.user,n.key),i=this.valueDecorator(n.key);return this.valueOperatorMatcher.matches(r,n.match,i)},e.prototype.valueDecorator=function(e){return"HACKLE_PROPERTY"===e.type&&this.URL_HACKLE_PROPERTY_KEY_NAMES.includes(e.name)?new XE:new JE},e}(),vT=function(){function e(){}return e.prototype.resolveOrNull=function(e,t){switch(t.type){case"USER_ID":return e.identifiers[t.name];case"USER_PROPERTY":return e.properties[t.name];case"HACKLE_PROPERTY":return e.hackleProperties[t.name];default:throw new Error("Unsupported TargetKeyType [".concat(t.type,"]"))}},e}(),_T=function(){function e(e){this.segmentMatcher=e}return e.prototype.matches=function(e,t,n){var r=this;if("SEGMENT"!=n.key.type)throw new Error("Unsupported TargetKeyType [".concat(n.key.type,"]"));var i=n.match.values.some(function(n){return r._matches(e,t,n)});switch(n.match.type){case"MATCH":return i;case"NOT_MATCH":return!i}},e.prototype._matches=function(e,t,n){if("string"!==typeof n)throw new Error("SegmentKey[".concat(n,"]"));var r=e.workspace.getSegmentOrNull(n);if(!r)throw new Error("Segment[".concat(n,"]"));return this.segmentMatcher.matches(e,t,r)},e}(),bT=function(){function e(e){this.userConditionMatcher=e}return e.prototype.matches=function(e,t,n){var r=this;return n.targets.some(function(n){return r._matches(e,t,n)})},e.prototype._matches=function(e,t,n){var r=this;return n.conditions.every(function(n){return r.userConditionMatcher.matches(e,t,n)})},e}(),wT=function(){function e(e){this.evaluator=e}return e.prototype.evaluateInternal=function(e,t,n){var r=TE.by(e,n),i=this.evaluator.evaluate(r,t);if(!(i instanceof _E))throw new Error("Unexpected evaluation [expected=ExperimentEvaluation, actual=".concat(i.constructor.name,"]"));var o=this.resolve(e,t,i);return t.addEvaluation(o),o},e.prototype.evaluate=function(e,t,n){var r;return null!==(r=t.getEvaluation(n))&&void 0!==r?r:this.evaluateInternal(e,t,n)},e}(),xT=function(){function e(e,t){this.abTestMatcher=e,this.featureFlagMatcher=t}return e.prototype.matches=function(e,t,n){switch(n.key.type){case"AB_TEST":return this.abTestMatcher.matches(e,t,n);case"FEATURE_FLAG":return this.featureFlagMatcher.matches(e,t,n);default:throw new Error("Unsupported TargetKeyType [".concat(n.key.type,"]"))}},e}(),ST=function(e){function t(t,n){var r=e.call(this,t)||this;return r.valueOperatorMatcher=n,r}return s(t,e),t.prototype.matches=function(e,t,n){var r=h.requiredNotNullOrUndefined(AE.asNumber(n.key.name),function(){return"Invalid key [".concat(n.key.type,", ").concat(n.key.name,"]")}),i=this.experiment(e,r);if(h.isNullOrUndefined(i))return!1;var o=this.evaluate(e,t,i);return this.evaluationMatches(o,n)},t}(wT),ET=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype.experiment=function(e,t){return e.workspace.getExperimentOrNull(t)},t.prototype.resolve=function(e,t,n){return n.reason===K.TRAFFIC_ALLOCATED?n.with(K.TRAFFIC_ALLOCATED_BY_TARGETING):n},t.prototype.evaluationMatches=function(e,n){return!!t.AB_TEST_MATCHED_REASONS.includes(e.reason)&&this.valueOperatorMatcher.matches(e.variationKey,n.match)},t.AB_TEST_MATCHED_REASONS=[K.OVERRIDDEN,K.TRAFFIC_ALLOCATED,K.EXPERIMENT_COMPLETED,K.TRAFFIC_ALLOCATED_BY_TARGETING],t}(ST),TT=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype.experiment=function(e,t){return e.workspace.getFeatureFlagOrNull(t)},t.prototype.resolve=function(e,t,n){return n},t.prototype.evaluationMatches=function(e,t){var n="A"!==e.variationKey;return this.valueOperatorMatcher.matches(n,t.match)},t}(ST),MT=function(){function e(e,t){this.eventValueResolver=e,this.valueOperatorMatcher=t}return e.prototype.matches=function(e,t,n){if(!this.isEventEvaluatorRequest(e))return!1;var r=this.eventValueResolver.resolveOrNull(e.event,n.key);return this.valueOperatorMatcher.matches(r,n.match)},e.prototype.isEventEvaluatorRequest=function(e){return void 0!==e.event},e}(),AT=function(){function e(){}return e.prototype.resolveOrNull=function(e,t){var n;switch(t.type){case"EVENT_PROPERTY":return null===(n=this.properties(e))||void 0===n?void 0:n[t.name];case"USER_ID":case"USER_PROPERTY":case"HACKLE_PROPERTY":case"SEGMENT":case"AB_TEST":case"FEATURE_FLAG":case"COHORT":throw new Error("Unsupported TargetKeyType [".concat(t.type,"]"))}},e.prototype.properties=function(e){return hE.isTrackEvent(e)?e.event.properties:hE.isExposureEvent(e)||hE.isRemoteConfigEvent(e)?e.properties:void 0},e}(),kT=function(){function e(e){this.valueOperatorMatcher=e}return e.prototype.matches=function(e,t,n){var r,i;if("COHORT"!==n.key.type)throw new Error("Unsupported TargetKeyType [".concat(n.key.type,"]"));var o=null!==(i=null===(r=e.user.cohorts)||void 0===r?void 0:r.map(function(e){return e.id}))&&void 0!==i?i:[];return this.valueOperatorMatcher.matches(o,n.match)},e}(),CT=function(){function e(e,t){this.valueOperatorMatcher=e,this.clock=t}return e.prototype.supports=function(e){return"NUMBER_OF_EVENTS_IN_DAYS"===e||"NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS"===e},e.prototype.matches=function(e,t,n){var r,i=n.key.type;if(!this.supports(i))throw new Error("Unsupported TargetKeyType [".concat(i,"]"));var o=null!==(r=e.user.targetEvents)&&void 0!==r?r:[];switch(i){case"NUMBER_OF_EVENTS_IN_DAYS":return new PT(this.valueOperatorMatcher,this.clock).matches(e,o,n);case"NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS":return new OT(this.valueOperatorMatcher,this.clock).matches(e,o,n);default:return i}},e}(),IT=function(){},PT=function(e){function t(t,n){var r=e.call(this)||this;return r.valueOperatorMatcher=t,r.clock=n,r}return s(t,e),t.prototype.matches=function(e,t,n){var r=this,i=this.convertTargetConditionToExpression(n),o=this.clock.currentMillis()-x.daysToUnit(i.days,"milliseconds"),s=t.filter(function(e){return r.expressionMatch(e,i)}),a=d.sum(s,function(e){return e.countWithinDays(o)});return this.valueOperatorMatcher.matches(a,n.match)},t.prototype.expressionMatch=function(e,t){return e.eventKey===t.eventKey&&null===e.property},t.prototype.convertTargetConditionToExpression=function(e){try{return JSON.parse(e.key.name)}catch($C){throw new Error("Failed to parse UserTargetCondition. ".concat($C))}},t}(IT),OT=function(e){function t(t,n){var r=e.call(this)||this;return r.valueOperatorMatcher=t,r.clock=n,r}return s(t,e),t.prototype.matches=function(e,t,n){var r=this,i=this.convertTargetConditionToExpression(n),o=this.clock.currentMillis()-x.daysToUnit(i.days,"milliseconds"),s=t.filter(function(e){return r.expressionMatch(e,i)}),a=d.sum(s,function(e){return e.countWithinDays(o)});return this.valueOperatorMatcher.matches(a,n.match)},t.prototype.propertyMatch=function(e,t){return(null===e||void 0===e?void 0:e.type)===t.key.type&&e.key===t.key.name&&this.valueOperatorMatcher.matches(e.value,t.match)},t.prototype.expressionMatch=function(e,t){return e.eventKey===t.eventKey&&this.propertyMatch(e.property,t.propertyFilter)},t.prototype.convertTargetConditionToExpression=function(e){try{return JSON.parse(e.key.name)}catch($C){throw new Error("Failed to parse UserTargetCondition. ".concat($C))}},t}(IT),RT=function(){function e(e,t){var n=new QE(new gT,new cT);this.userConditionMatcher=new yT(new vT,n),this.eventConditionMatcher=new MT(new AT,n),this.segmentConditionMatcher=new _T(new bT(this.userConditionMatcher)),this.experimentConditionMatcher=new xT(new ET(e,n),new TT(e,n)),this.cohortConditionMatcher=new kT(n),this.userTargetConditionMatcher=new CT(n,t)}return e.prototype.getMatcher=function(e){switch(e){case"USER_ID":case"USER_PROPERTY":case"HACKLE_PROPERTY":return this.userConditionMatcher;case"EVENT_PROPERTY":return this.eventConditionMatcher;case"SEGMENT":return this.segmentConditionMatcher;case"AB_TEST":case"FEATURE_FLAG":return this.experimentConditionMatcher;case"COHORT":return this.cohortConditionMatcher;case"NUMBER_OF_EVENTS_IN_DAYS":case"NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS":return this.userTargetConditionMatcher;default:return e}},e}(),DT={murmurhash3_x86_32:function(e,t,n,r){void 0===r&&(r=e.length);for(var i,o=3432918353,s=461845907,a=-4&r,l=t,c=0;c<a;c+=4)i=255&e.charCodeAt(c)|(255&e.charCodeAt(c+1))<<8|(255&e.charCodeAt(c+2))<<16|(255&e.charCodeAt(c+3))<<24,i=(131071&(i=this.mul32(i,o)))<<15|i>>>17,l=5*(l=(524287&(l^=i=this.mul32(i,s)))<<13|l>>>19)+3864292196|0;switch(i=0,r%4){case 3:i=(255&e.charCodeAt(a+2))<<16;case 2:i|=(255&e.charCodeAt(a+1))<<8;case 1:i|=255&e.charCodeAt(a),i=(131071&(i=this.mul32(i,o)))<<15|i>>>17,l^=i=this.mul32(i,s)}return l^=r,l^=l>>>16,l=this.mul32(l,2246822507),l^=l>>>13,l=this.mul32(l,3266489909),l^=l>>>16},mul32:function(e,t){var n=65535&t;return((t-n)*e|0)+(n*e|0)|0}},LT=function(){function e(){}return e.prototype.bucketing=function(e,t){var n=this.calculateSlotNumber(e.seed,e.slotSize,t);return e.slots.find(function(e){return e.contains(n)})},e.prototype.calculateSlotNumber=function(e,t,n){var r=DT.murmurhash3_x86_32(n,e);return Math.abs(r)%Math.abs(t)},e}(),NT=f.log,FT=function(){function e(e,t,n,r,i,o){this.experimentEvaluator=e,this.remoteConfigEvaluator=t,this.workspaceFetcher=n,this.eventFactory=r,this.eventProcessor=i,this.errorDedupDeterminer=o}return e.create=function(t,n,r,i){var o=S.instance,s=PE.register("delegatingEvaluator",new IE),a=new LT,l=PE.register("targetMatcher",new ZE(new RT(s,o))),c=new kE(i),u=new OE(l,a),h=new KE(c,a,PE.get("targetMatcher")),d=new bE(h),p=new xE(u);return s.add(d),s.add(p),new e(d,p,t,n,r,new zT)},e.prototype.getExperiment=function(e){if(e){var t=this.workspaceFetcher.get();if(t)return t.getExperimentOrNull(e)}else NT.error("experimentKey must not be empty")},e.prototype.experiment=function(e,t,n){var r=this;if(!e)return NT.error("experimentKey must not be empty"),G.of(n,K.INVALID_INPUT);var i=this.workspaceFetcher.get();if(!i)return NT.warn("SDK not ready."),G.of(n,K.SDK_NOT_READY);var o=i.getExperimentOrNull(e);if(!o)return NT.warn("Experiment does not exist."),G.of(n,K.EXPERIMENT_NOT_FOUND);var s=TE.of(i,t,o,n),a=this.experimentInternal(s),l=a[0],c=a[1];return this.eventFactory.create(s,l).forEach(function(e){return r.eventProcessor.process(e)}),c},e.prototype.experiments=function(e){var t=this,n=new At(function(e,t){return e.id===t.id}),r=this.workspaceFetcher.get();return r?(r.getExperiments().forEach(function(i){var o=TE.of(r,e,i,"A"),s=t.experimentInternal(o);s[0];var a=s[1];n.add(i,a)}),n):n},e.prototype.experimentInternal=function(e){var t,n=this.experimentEvaluator.evaluate(e,EE.create()),r=null!==(t=n.config)&&void 0!==t?t:new E;return[n,G.of(n.variationKey,n.reason,r,n.experiment)]},e.prototype.featureFlag=function(e,t){var n=this;if(!e)return NT.error("featureKey must not be empty"),q.off(K.INVALID_INPUT);var r=this.workspaceFetcher.get();if(!r)return NT.warn("SDK not ready."),q.off(K.SDK_NOT_READY);var i=r.getFeatureFlagOrNull(e);if(!i)return NT.warn("FeatureFlag does not exist."),q.off(K.FEATURE_FLAG_NOT_FOUND);var o=TE.of(r,t,i,"A"),s=this.featureFlagInternal(o),a=s[0],l=s[1];return this.eventFactory.create(o,a).forEach(function(e){return n.eventProcessor.process(e)}),l},e.prototype.featureFlags=function(e){var t=this,n=new At(function(e,t){return e.id===t.id}),r=this.workspaceFetcher.get();return r?(r.getFeatureFlags().forEach(function(i){var o=TE.of(r,e,i,"A"),s=t.featureFlagInternal(o);s[0];var a=s[1];n.add(i,a)}),n):n},e.prototype.featureFlagInternal=function(e){var t,n=this.experimentEvaluator.evaluate(e,EE.create()),r=null!==(t=n.config)&&void 0!==t?t:new E;return[n,"A"===n.variationKey?q.off(n.reason,r,n.experiment):q.on(n.reason,r,n.experiment)]},e.prototype.inAppMessage=function(e,t,n){var r=n.evaluate(e,t);return n.record(e,r),r},e.prototype.track=function(e,t,n){var r;if(void 0===n&&(n=(new Date).getTime()),e)if("object"===typeof e)if("object"!==typeof e||e.key&&"string"===typeof e.key){var i=(null===(r=this.workspaceFetcher.get())||void 0===r?void 0:r.getEventTypeOrNull(e.key))||new te(0,e.key);this.eventProcessor.process(hE.track(i,e,t,n))}else NT.warn("Event key must be not null. or event key must be string type.");else NT.warn("Event must be event type.");else NT.warn("event must not be null.")},e.prototype.trackException=function(e,t){if(!this.errorDedupDeterminer.isDedupTarget(e)){var n=yE.toEvent(e);this.flush(),this.track(n,t),this.flush()}},e.prototype.flush=function(e){void 0===e&&(e=!1),this.eventProcessor.flush(e)},e.prototype.remoteConfig=function(e,t,n,r){var i=this,o=this.workspaceFetcher.get();if(h.isNullOrUndefined(o))return NT.warn("SDK not ready."),Y.of(r,K.SDK_NOT_READY);var s=o.getRemoteConfigParameterOrNull(e);if(h.isNullOrUndefined(s))return NT.warn("Remote config parameter does not exist."),Y.of(r,K.REMOTE_CONFIG_PARAMETER_NOT_FOUND);var a=ME.of(o,t,s,n,r),l=this.remoteConfigEvaluator.evaluate(a,EE.create());return this.eventFactory.create(a,l).forEach(function(e){return i.eventProcessor.process(e)}),Y.of(l.value,l.reason)},e.prototype.close=function(){this.eventProcessor.close()},e}(),zT=function(){function e(){}return e.prototype.isDedupTarget=function(e){return!!this._isSameError(e,this.previous)||(this.previous=e,!1)},e.prototype._isSameError=function(e,t){return!h.isNullOrUndefined(t)&&(e.name===t.name&&e.message===t.message&&e.stack===t.stack)},e}(),UT=function(){function e(){this._installed=[],this._installations={onerror:BT,onunhandledrejection:VT}}return e.prototype.install=function(e,t){this._install("onerror",e,t),this._install("onunhandledrejection",e,t)},e.prototype._install=function(e,t,n){e in this._installed||((0,this._installations[e])(t,n),this._installed.push(e))},e}(),jT=null;function BT(e,t){jT=window.onerror,window.onerror=function(n,r,i,o,s){h.isNotNullOrUndefined(s)&&e.trackException(s,t.resolve()),jT&&jT.apply(this,arguments)}}function VT(e,t){uE=window.onunhandledrejection,window.onunhandledrejection=function(n){var r;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(i){}r instanceof Error&&e.trackException(r,t.resolve()),uE&&uE.apply(this,arguments)}}var HT=function(){function e(e,t,n){this.storage=e,this.storageKey=t,this.maxSize=n}return e.prototype.read=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){return(e=this.storage.getItem(this.storageKey))?[2,JSON.parse(e)]:[2,[]]})})},e.prototype.save=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){return 0===e.length?[2,this.clear()]:(t=JSON.stringify(e.slice(-this.maxSize)),this.storage.setItem(this.storageKey,t),[2])})})},e.prototype.add=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,this.read()];case 1:return t=n.sent(),[4,this.save(t.concat(e).slice(-this.maxSize))];case 2:return n.sent(),[2]}})})},e.prototype.delete=function(e){return l(this,void 0,void 0,function(){var t,n,r=this;return c(this,function(i){switch(i.label){case 0:return[4,this.read()];case 1:return t=i.sent(),n=t.filter(function(t){return!r.isDeleteTarget(t,e)}),[4,this.save(n)];case 2:return i.sent(),[2]}})})},e.prototype.isDeleteTarget=function(e,t){return t.some(function(t){return t.insertId===e.insertId})},e.prototype.clear=function(){return l(this,void 0,void 0,function(){return c(this,function(e){return this.storage.removeItem(this.storageKey),[2]})})},e}(),$T=function(e,t){return null!==e&&(e.userId===t.userId&&e.deviceId===t.deviceId)},YT=function(){function e(e){this.cohorts=e}return e.builder=function(){return new GT},e.empty=function(){return e.builder().build()},e.from=function(t){return new e(t)},e.fromDto=function(t){for(var n=e.builder(),r=0,i=t.cohorts;r<i.length;r++){var o=i[r];n.put({identifier:o.identifier,cohorts:o.cohorts.map(function(e){return new bt(e)})})}return n.build()},Object.defineProperty(e.prototype,"rawCohorts",{get:function(){return this.cohorts.values().flatMap(function(e){return e.cohorts})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this.cohorts.get(e)},e.prototype.filterBy=function(t){var n=re(t),r=this.asComparable().filter(function(e,t){return n[e.type]===e.value});return e.from(r)},e.prototype.asArray=function(){return this.cohorts.values()},e.prototype.asComparable=function(){return this.cohorts},e.prototype.toBuilder=function(){return new GT(this)},e}(),GT=function(){function e(e){this.cohorts=new At(y.isEqual),e&&this.putAll(e)}return e.prototype.put=function(e){return this.cohorts.add(e.identifier,e),this},e.prototype.putAll=function(e){var t=this;return e.asArray().forEach(function(e){return t.put(e)}),this},e.prototype.build=function(){return new YT(this.cohorts)},e}(),qT="model",WT="name",KT="type",ZT="vendor",JT="version",XT="architecture",QT="console",eM="mobile",tM="tablet",nM="smarttv",rM="wearable",iM=function(){function e(){}return e.parse=function(t){return{browser:e.getBrowser(t),cpu:e.getCPU(t),device:e.getDevice(t),engine:e.getEngine(t),os:e.getOS(t)}},e.getBrowser=function(t){var n={name:void 0,version:void 0,major:void 0};return e.mapper.rgx.call(n,t,e.regexes.browser),n.major=e.util.major(n.version),n},e.getCPU=function(t){var n={architecture:void 0};return e.mapper.rgx.call(n,t,e.regexes.cpu),n},e.getDevice=function(t){var n={model:void 0,type:void 0,vendor:void 0};return e.mapper.rgx.call(n,t,e.regexes.device),n},e.getEngine=function(t){var n={name:void 0,version:void 0};return e.mapper.rgx.call(n,t,e.regexes.os),n},e.getOS=function(t){var n={name:void 0,version:void 0};return e.mapper.rgx.call(n,t,e.regexes.os),n},e.util={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"===typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},e.mapper={rgx:function(e,t){for(var n,r,i,o,s,a,l=0;l<t.length&&!s;){var c=t[l],u=t[l+1];for(n=r=0;n<c.length&&!s;)if(s=c[n++].exec(e))for(i=0;i<u.length;i++)a=s[++r],"object"===typeof(o=u[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?"function"!==typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;l+=2}},str:function(t,n){for(var r in n)if("object"===typeof n[r]&&n[r].length>0){for(var i=0;i<n[r].length;i++)if(e.util.has(n[r][i],t))return"?"===r?void 0:r}else if(e.util.has(n[r],t))return"?"===r?void 0:r;return t}},e.maps={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},e.regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[WT,JT],[/(opios)[\/\s]+([\w\.]+)/i],[[WT,"Opera Mini"],JT],[/\s(opr)\/([\w\.]+)/i],[[WT,"Opera"],JT],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[WT,JT],[/(konqueror)\/([\w\.]+)/i],[[WT,"Konqueror"],JT],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[WT,"IE"],JT],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[WT,"Edge"],JT],[/(yabrowser)\/([\w\.]+)/i],[[WT,"Yandex"],JT],[/(Avast)\/([\w\.]+)/i],[[WT,"Avast Secure Browser"],JT],[/(AVG)\/([\w\.]+)/i],[[WT,"AVG Secure Browser"],JT],[/(puffin)\/([\w\.]+)/i],[[WT,"Puffin"],JT],[/(focus)\/([\w\.]+)/i],[[WT,"Firefox Focus"],JT],[/(opt)\/([\w\.]+)/i],[[WT,"Opera Touch"],JT],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[WT,"UCBrowser"],JT],[/(comodo_dragon)\/([\w\.]+)/i],[[WT,/_/g," "],JT],[/(windowswechat qbcore)\/([\w\.]+)/i],[[WT,"WeChat(Win) Desktop"],JT],[/(micromessenger)\/([\w\.]+)/i],[[WT,"WeChat"],JT],[/(brave)\/([\w\.]+)/i],[[WT,"Brave"],JT],[/(whale)\/([\w\.]+)/i],[[WT,"Whale"],JT],[/(qqbrowserlite)\/([\w\.]+)/i],[WT,JT],[/(QQ)\/([\d\.]+)/i],[WT,JT],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[WT,JT],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[WT,JT],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[WT,JT],[/(MetaSr)[\/\s]?([\w\.]+)/i],[WT],[/(LBBROWSER)/i],[WT],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[JT,[WT,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[JT,[WT,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[WT,JT],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[JT,[WT,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[WT,/(.+)/,"$1 WebView"],JT],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[WT,/(.+(?:g|us))(.+)/,"$1 $2"],JT],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[WT,"Chrome Mobile"],JT],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[JT,[WT,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[WT,"Sailfish Browser"],JT],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[WT,JT],[/(dolfin)\/([\w\.]+)/i],[[WT,"Dolphin"],JT],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[WT,"360 Browser"]],[/(coast)\/([\w\.]+)/i],[[WT,"Opera Coast"],JT],[/fxios\/([\w\.-]+)/i],[JT,[WT,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[JT,[WT,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[JT,WT],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[WT,"GSA"],JT],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[WT,[JT,e.mapper.str,e.maps.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[WT,JT],[/(navigator|netscape)\/([\w\.-]+)/i],[[WT,"Netscape"],JT],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[WT,JT]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[XT,"amd64"]],[/(ia32(?=;))/i],[[XT,e.util.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[XT,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[XT,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[XT,/ower/,"",e.util.lowerize]],[/(sun4\w)[;\)]/i],[[XT,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[XT,e.util.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[qT,ZT,[KT,tM]],[/applecoremedia\/[\w\.]+ \((ipad)/],[qT,[ZT,"Apple"],[KT,tM]],[/(apple\s{0,1}tv)/i],[[qT,"Apple TV"],[ZT,"Apple"],[KT,nM]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[ZT,qT,[KT,tM]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[qT,[ZT,"Amazon"],[KT,tM]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[qT,e.mapper.str,e.maps.device.amazon.model],[ZT,"Amazon"],[KT,eM]],[/android.+aft([bms])\sbuild/i],[qT,[ZT,"Amazon"],[KT,nM]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[qT,ZT,[KT,eM]],[/\((ip[honed|\s\w*]+);/i],[qT,[ZT,"Apple"],[KT,eM]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[ZT,qT,[KT,eM]],[/\(bb10;\s(\w+)/i],[qT,[ZT,"BlackBerry"],[KT,eM]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[qT,[ZT,"Asus"],[KT,tM]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[ZT,"Sony"],[qT,"Xperia Tablet"],[KT,tM]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[qT,[ZT,"Sony"],[KT,eM]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[ZT,qT,[KT,QT]],[/android.+;\s(shield)\sbuild/i],[qT,[ZT,"Nvidia"],[KT,QT]],[/(playstation\s[34portablevi]+)/i],[qT,[ZT,"Sony"],[KT,QT]],[/(sprint\s(\w+))/i],[[ZT,e.mapper.str,e.maps.device.sprint.vendor],[qT,e.mapper.str,e.maps.device.sprint.model],[KT,eM]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[ZT,[qT,/_/g," "],[KT,eM]],[/(nexus\s9)/i],[qT,[ZT,"HTC"],[KT,tM]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[qT,[ZT,"Huawei"],[KT,eM]],[/android.+(bah2?-a?[lw]\d{2})/i],[qT,[ZT,"Huawei"],[KT,tM]],[/(microsoft);\s(lumia[\s\w]+)/i],[ZT,qT,[KT,eM]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[qT,[ZT,"Microsoft"],[KT,QT]],[/(kin\.[onetw]{3})/i],[[qT,/\./g," "],[ZT,"Microsoft"],[KT,eM]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[qT,[ZT,"Motorola"],[KT,eM]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[qT,[ZT,"Motorola"],[KT,tM]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[ZT,e.util.trim],[qT,e.util.trim],[KT,nM]],[/hbbtv.+maple;(\d+)/i],[[qT,/^/,"SmartTV"],[ZT,"Samsung"],[KT,nM]],[/\(dtv[\);].+(aquos)/i],[qT,[ZT,"Sharp"],[KT,nM]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[ZT,"Samsung"],qT,[KT,tM]],[/smart-tv.+(samsung)/i],[ZT,[KT,nM],qT],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[ZT,"Samsung"],qT,[KT,eM]],[/sie-(\w*)/i],[qT,[ZT,"Siemens"],[KT,eM]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[ZT,"Nokia"],qT,[KT,eM]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[qT,[ZT,"Acer"],[KT,tM]],[/android.+([vl]k\-?\d{3})\s+build/i],[qT,[ZT,"LG"],[KT,tM]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[ZT,"LG"],qT,[KT,tM]],[/(lg) netcast\.tv/i],[ZT,qT,[KT,nM]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[qT,[ZT,"LG"],[KT,eM]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[ZT,qT,[KT,tM]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[qT,[ZT,"Lenovo"],[KT,tM]],[/(lenovo)[_\s-]?([\w-]+)/i],[ZT,qT,[KT,eM]],[/linux;.+((jolla));/i],[ZT,qT,[KT,eM]],[/((pebble))app\/[\d\.]+\s/i],[ZT,qT,[KT,rM]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[ZT,qT,[KT,eM]],[/crkey/i],[[qT,"Chromecast"],[ZT,"Google"],[KT,nM]],[/android.+;\s(glass)\s\d/i],[qT,[ZT,"Google"],[KT,rM]],[/android.+;\s(pixel c)[\s)]/i],[qT,[ZT,"Google"],[KT,tM]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[qT,[ZT,"Google"],[KT,eM]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[qT,/_/g," "],[ZT,"Xiaomi"],[KT,eM]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[qT,/_/g," "],[ZT,"Xiaomi"],[KT,tM]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[qT,[ZT,"Meizu"],[KT,eM]],[/(mz)-([\w-]{2,})/i],[[ZT,"Meizu"],qT,[KT,eM]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[qT,[ZT,"OnePlus"],[KT,eM]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[qT,[ZT,"RCA"],[KT,tM]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[qT,[ZT,"Dell"],[KT,tM]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[qT,[ZT,"Verizon"],[KT,tM]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[ZT,"Barnes & Noble"],qT,[KT,tM]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[qT,[ZT,"NuVision"],[KT,tM]],[/android.+;\s(k88)\sbuild/i],[qT,[ZT,"ZTE"],[KT,tM]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[qT,[ZT,"Swiss"],[KT,eM]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[qT,[ZT,"Swiss"],[KT,tM]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[qT,[ZT,"Zeki"],[KT,tM]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[ZT,"Dragon Touch"],qT,[KT,tM]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[qT,[ZT,"Insignia"],[KT,tM]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[qT,[ZT,"NextBook"],[KT,tM]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[ZT,"Voice"],qT,[KT,eM]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[ZT,"LvTel"],qT,[KT,eM]],[/android.+;\s(PH-1)\s/i],[qT,[ZT,"Essential"],[KT,eM]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[qT,[ZT,"Envizen"],[KT,tM]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[ZT,qT,[KT,tM]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[qT,[ZT,"MachSpeed"],[KT,tM]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[ZT,qT,[KT,tM]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[qT,[ZT,"Rotor"],[KT,tM]],[/android.+(KS(.+))\s+build/i],[qT,[ZT,"Amazon"],[KT,tM]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[ZT,qT,[KT,tM]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[KT,e.util.lowerize],ZT,qT],[/[\s\/\(](smart-?tv)[;\)]/i],[[KT,nM]],[/(android[\w\.\s\-]{0,9});.+build/i],[qT,[ZT,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[JT,[WT,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[JT,[WT,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[WT,JT],[/rv\:([\w\.]{1,9}).+(gecko)/i],[JT,WT]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[WT,JT],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[WT,e.mapper.str,e.maps.os.windows],[JT,e.mapper.str,e.maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[WT,"Windows"],[JT,e.mapper.str,e.maps.os.windows.version]],[/\((bb)(10);/i],[[WT,"BlackBerry"],JT],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[WT,JT],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[WT,"Symbian"],JT],[/\((series40);/i],[WT],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[WT,"Firefox OS"],JT],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[[WT,"Linux"],JT],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[WT,"Chromium OS"],JT],[/(sunos)\s?([\w\.\d]*)/i],[[WT,"Solaris"],JT],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[[WT,"Linux"],JT],[/(iphone)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[WT,"iOS"],[JT,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[WT,"iOS"],[JT,/_/g,"."]],[/(haiku)\s(\w+)/i],[WT,JT],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[JT,/_/g,"."],[WT,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[WT,"Mac"],[JT,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[WT,JT]]},e}(),oM=function(){function e(){}return e.generate=function(e,t){var n,r,i;i="undefined"===typeof e?{navigator:{userAgent:"",vendor:"",languages:[]},screen:{width:"",height:""}}:e;var o=iM.parse(i.navigator.userAgent).browser,s="";try{s=null!==(r=null===(n=screen.orientation.type.match(/\b(landscape|portrait)\b/))||void 0===n?void 0:n[0])&&void 0!==r?r:""}catch(l){}return a({browserName:o.name||"",browserMajorVersion:o.major||"",browserVersion:o.version||"",orientation:s,userAgent:i.navigator.userAgent||""},t.toProperties())},e}(),sM=function(){function e(){}return e.generate=function(e){var t,n,r,i,o,s,a;a="undefined"===typeof e?{navigator:{userAgent:"",vendor:"",languages:[]},screen:{width:"",height:""}}:e;var l=iM.parse(a.navigator.userAgent),c=l.os,u=l.device,h=a.screen,d=(null===(t=a.navigator.languages)||void 0===t?void 0:t[0])||"",p=d.split("-")[0],f=(null!==(n=u.type)&&void 0!==n?n:"pc").replace(/\b(mobile|smarttv)\b/g,function(e,t){return"mobile"===t?"phone":"smarttv"===t?"tv":e}),m=c.name||"",g="";try{m=null!==(i=null===(r=m.match(/\b(Mac|Windows|Linux|Android|iOS)\b/))||void 0===r?void 0:r[0])&&void 0!==i?i:m,orientation=null!==(s=null===(o=h.orientation.type.match(/\b(landscape|portrait)\b/))||void 0===o?void 0:o[0])&&void 0!==s?s:"",g=Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(y){}return{osName:m,osVersion:c.version||"",deviceModel:u.model||"",deviceType:f,deviceVendor:u.vendor||"",deviceBrand:u.vendor||"",screenWidth:h.width||"",screenHeight:h.height||"",locale:d,language:p,timeZone:g}},e}(),aM=function(){function e(){}return e.generate=function(e,t){var n=null!==t&&void 0!==t?t:_n.createWithCurrentPage();return a(a({platform:"Web"},oM.generate(e,n)),sM.generate(e))},e}(),lM=function(){function e(e,t){this.previous=e,this.current=t}return e.prototype.map=function(t){return new e(t(this.previous),t(this.current))},e}(),cM=function(){function e(e){this.events=e}return e.empty=function(){return this.from([])},e.from=function(t){return new e(t)},e.fromDto=function(e){return this.from(e.events.map(function(e){return St.fromJson(e)}))},Object.defineProperty(e.prototype,"rawEvents",{get:function(){return this.events},enumerable:!1,configurable:!0}),e}(),uM=function(){function e(e,t,n,r,i,o,s,a,l){this.hackleDeviceId=e,this.storage=t,this.userTargetFetcher=n,this.userCohortFetcher=r,this.campaignParser=i,this.pageManager=o,this.clock=s,this.userListeners=[],this.defaultUser={id:this.hackleDeviceId,deviceId:this.hackleDeviceId},this.context=this.initContext(a,l),this.storage.saveUser(this.context.user)}return e.prototype.initContext=function(e,t){var n,r=null!==(n=null!==t&&void 0!==t?t:e)&&void 0!==n?n:this.defaultUser;return dM.of(pM(r,this.hackleDeviceId),YT.empty(),cM.empty())},e.prototype.addListener=function(e){this.userListeners.push(e)},Object.defineProperty(e.prototype,"currentUser",{get:function(){return this.context.user},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){var t=this.resolveContext(e);return this.hackleUser(t)},e.prototype.resolveContext=function(e){return void 0===e?this.context:"string"===typeof e?this.updateUser({id:e}).current:this.updateUser(e).current},e.prototype.toHackleUser=function(e){var t=this.context.with(e);return this.hackleUser(t)},e.prototype.hackleUser=function(e){var t=(new ie).addIdentifiers(e.user.identifiers||{}).add(ne.ID,e.user.id||this.hackleDeviceId).add(ne.DEVICE,e.user.deviceId||this.hackleDeviceId).add(ne.HACKLE_DEVICE,this.hackleDeviceId);h.isNotNullOrUndefined(e.user.userId)&&t.add(ne.USER,e.user.userId);var n=t.build(),r=this.campaignParser.parse();return{identifiers:n,properties:a(a({},r),e.user.properties),hackleProperties:this.hackleProperties(),cohorts:e.cohorts.rawCohorts,targetEvents:e.targetEvents.rawEvents}},e.prototype.hackleProperties=function(){return"undefined"!==typeof window?aM.generate(window,this.pageManager.currentPage):{}},e.prototype.setUser=function(e){return this.updateUser(e).map(function(e){return e.user})},e.prototype.setUserId=function(e){var t=a(a({},this.context.user),{userId:e});return this.setUser(t)},e.prototype.setDeviceId=function(e){var t=a(a({},this.context.user),{deviceId:e});return this.setUser(t)},e.prototype.updateUserProperties=function(e){return this.operateProperties(e).map(function(e){return e.user})},e.prototype.resetUser=function(){var e=this;return this.updateContext(function(){return e.defaultUser}).map(function(e){return e.user})},e.prototype.changeUser=function(e,t,n){this.userListeners.forEach(function(r){r.onUserUpdated(e,t,n)})},e.prototype.saveUser=function(e){this.storage.saveUser(e)},e.prototype.updateContext=function(e){var t=this.context,n=t.user,r=e(n),i=this.context.with(r);return this.context=i,$T(n,r)||(this.changeUser(n,r,this.clock.currentMillis()),this.saveUser(r)),new lM(t,i)},e.prototype.updateUser=function(e){var t=this;return this.updateContext(function(n){return r=n,i=pM(e,t.hackleDeviceId),$T(r,i)?a(a({},i),{properties:a(a({},r.properties),i.properties)}):i;var r,i})},e.prototype.operateProperties=function(e){return this.updateContext(function(t){var n,r=null!==(n=t.properties)&&void 0!==n?n:{},i=e.operate(new Map(Object.entries(r)));return a(a({},t),{properties:h.fromMap(i)})})},e.prototype.sync=function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.syncCohort(),this.syncUserTarget()])];case 1:return e.sent(),[2]}})})},e.prototype.syncIfNeeded=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.hasNewIdentifiers(e.previous,e.current)?[4,this.syncCohort()]:[3,2];case 1:t.sent(),t.label=2;case 2:return $T(e.previous,e.current)?[3,4]:[4,this.syncUserTarget()];case 3:t.sent(),t.label=4;case 4:return[2]}})})},e.prototype.syncCohort=function(){return l(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userCohortFetcher.fetch(this.currentUser)];case 1:return e=n.sent(),this.context=this.context.update(e,this.context.targetEvents),[3,3];case 2:return t=n.sent(),f.log.error("Failed to sync cohorts: ".concat(t)),[3,3];case 3:return[2]}})})},e.prototype.syncUserTarget=function(){return l(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userTargetFetcher.fetch(this.currentUser)];case 1:return e=n.sent(),this.context=this.context.update(this.context.cohorts,e),[3,3];case 2:return t=n.sent(),f.log.error("Failed to sync userTargets: ".concat(t)),[3,3];case 3:return[2]}})})},e.prototype.hasNewIdentifiers=function(e,t){var n=re(e),r=re(t);return Object.entries(r).some(function(e){var t=e[0],r=e[1];return n[t]!==r})},e.prototype.close=function(){return l(this,void 0,void 0,function(){return c(this,function(e){return[2]})})},e}(),hM=function(){function e(e){this.storage=e}return e.prototype.getUser=function(){var e=this.deviceId||void 0,t=this.userId||void 0;return void 0!==e||void 0!==t?{deviceId:e,userId:t}:null},e.prototype.saveUser=function(e){this.setDeviceId(e.deviceId||null),this.setUserId(e.userId||null)},Object.defineProperty(e.prototype,"deviceId",{get:function(){return this.storage.getItem(F)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this.storage.getItem(N)},enumerable:!1,configurable:!0}),e.prototype.setDeviceId=function(e){this.setId(F,e)},e.prototype.setUserId=function(e){this.setId(N,e)},e.prototype.setId=function(e,t){h.isNotNullOrUndefined(t)?this.storage.setItem(e,t):this.storage.removeItem(e)},e}(),dM=function(){function e(e,t,n){this.user=e,this.cohorts=t,this.targetEvents=n}return e.of=function(t,n,r){return new e(t,n.filterBy(t),r)},e.prototype.with=function(t){return e.of(t,this.cohorts.filterBy(t),this.targetEvents)},e.prototype.update=function(t,n){var r=t.filterBy(this.user),i=this.cohorts.toBuilder().putAll(r).build();return e.of(this.user,i,n)},e}(),pM=function(e,t){return a(a({},e),{id:e.id||t,deviceId:e.deviceId||t})},fM=function(){function e(e,t){this.sessionTimeoutMillis=e,this.storage=t,this.sessionListeners=[],this._currentSessionId=null,this._lastEventTime=null,this.loadSession(),this.loadLastEventTime()}return Object.defineProperty(e.prototype,"currentSessionId",{get:function(){return this._currentSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){var t;return null!==(t=this._currentSessionId)&&void 0!==t?t:e.EMPTY_SESSION_ID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},enumerable:!1,configurable:!0}),e.prototype.addListener=function(e){this.sessionListeners.push(e)},e.prototype.startNewSession=function(e,t,n){return e&&this.endSession(e),this.newSession(t,n)},e.prototype.startNewSessionIfNeeded=function(e,t){var n=this._lastEventTime;return null===n?this.startNewSession(e,e,t):null!==this._currentSessionId&&t-n<this.sessionTimeoutMillis?(this.updateLastEventTime(t),this._currentSessionId):this.startNewSession(e,e,t)},e.prototype.updateLastEventTime=function(e){this._lastEventTime=e,this.storage.setItem(R,"".concat(e))},e.prototype.endSession=function(e){var t=this._currentSessionId,n=this._lastEventTime;null!==t&&null!==n&&this.sessionListeners.forEach(function(r){return r.onSessionEnded(t,e,n)})},e.prototype.newSession=function(e,t){var n=function(e){return"".concat(e,".").concat((0,r.A)().slice(0,8))}(t);return this.saveSession(n),this.updateLastEventTime(t),this.sessionListeners.forEach(function(r){r.onSessionStarted(n,e,t)}),n},e.prototype.saveSession=function(e){this._currentSessionId=e,this.storage.setItem(O,e)},e.prototype.loadSession=function(){this._currentSessionId=this.storage.getItem(O)},e.prototype.loadLastEventTime=function(){var e=this.storage.getItem(R);if(null!==e){var t=Number.parseFloat(e);t>0&&(this._lastEventTime=t)}},e.prototype.onUserUpdated=function(e,t,n){this.endSession(e),this.newSession(t,n)},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"hidden":case"pagehide":return this.updateLastEventTime(t);case"blur":case"focus":case"locationChange":case"visible":case"pageshow":return}},e.EMPTY_SESSION_ID="0.ffffffff",e}(),mM=function(){function e(){this.storage=window.localStorage}return e.prototype.getItem=function(e){var t,n;return null!==(n=null===(t=this.storage)||void 0===t?void 0:t.getItem(e))&&void 0!==n?n:null},e.prototype.removeItem=function(e){var t;null===(t=this.storage)||void 0===t||t.removeItem(e)},e.prototype.setItem=function(e,t){var n;null===(n=this.storage)||void 0===n||n.setItem(e,t)},e.prototype.clear=function(){var e;null===(e=this.storage)||void 0===e||e.clear()},e}(),gM=function(){function e(e,t){this.delegate=e,this.transform=t}return e.postfix=function(t,n){return new e(t,function(e){return"".concat(e).concat(n)})},e.prefix=function(t,n){return new e(t,function(e){return"".concat(n).concat(e)})},e.prototype.getItem=function(e){return this.delegate.getItem(this.transform(e))},e.prototype.removeItem=function(e){this.delegate.removeItem(this.transform(e))},e.prototype.setItem=function(e,t){this.delegate.setItem(this.transform(e),t)},e}(),yM=function(){function e(e,t,n){void 0===n&&(n=4096);var r=this;this.delegate=e,this.listKey=t,this.encodedListCharLen=6,this.resolveMaxLength=function(e){var t=e-r.encodedListCharLen;return t<0?0:t},this.maxLength=this.resolveMaxLength(n)}return e.prototype.isEqualItem=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.prototype.getRemainListSize=function(){try{return this.maxLength-JSON.stringify(this.getList()).length}catch($C){return 0}},e.prototype.isAddableItem=function(e){try{return this.getRemainListSize()>JSON.stringify(e).length}catch(t){return!1}},e.prototype.getVictimIndex=function(e){var t=this.getRemainListSize();try{var n=JSON.stringify(e),r=this.getList(),i=0;return r.findIndex(function(e){return(i+=JSON.stringify(e).length)+t>=n.length})}catch($C){return-1}},e.prototype.getList=function(){try{var e=this.delegate.getItem(this.listKey);if(!e)return[];var t=JSON.parse(e);return Array.isArray(t)?t:[]}catch($C){return[]}},e.prototype.entries=function(){return this.getList().flatMap(Object.entries)},e.prototype.setItem=function(e,t){var n;try{this.removeItem(e);var r=this.getList(),i=((n={})[e]=t,n);if(!this.isAddableItem(i)){var o=this.getVictimIndex(i);if(o<0)return;r=r.slice(o+1)}var s=JSON.stringify(r.concat(i));this.delegate.setItem(this.listKey,s)}catch($C){}},e.prototype.getItem=function(e){var t=this,n=this.getList().find(function(n){return t.isEqualItem(n,e)});if(n&&n[e])return n[e]},e.prototype.removeItem=function(e){var t=this,n=this.getList();try{var r=n.filter(function(n){return!t.isEqualItem(n,e)}),i=JSON.stringify(r);this.delegate.setItem(this.listKey,i)}catch($C){}},e.prototype.clear=function(){this.delegate.removeItem(this.listKey)},e}(),vM=function(){function e(e,t,n,r){this.core=e,this.userManager=t,this.abOverrideStorage=n,this.ffOverrideStorage=r}return e.prototype.currentUser=function(){return this.userManager.resolve()},e.prototype.getAbTestDecisions=function(){return this.core.experiments(this.currentUser()).entries()},e.prototype.getAbTestOverrides=function(){return this.abOverrideStorage.getAll()},e.prototype.setAbTestOverride=function(e,t){this.abOverrideStorage.set(e,t),this.increment("AB_TEST","set")},e.prototype.resetAbTestOverride=function(e){this.abOverrideStorage.remove(e),this.increment("AB_TEST","reset")},e.prototype.resetAllAbTestOverride=function(){this.abOverrideStorage.clear(),this.increment("AB_TEST","reset.all")},e.prototype.getFeatureFlagDecisions=function(){return this.core.featureFlags(this.currentUser()).entries()},e.prototype.getFeatureFlagOverrides=function(){return this.ffOverrideStorage.getAll()},e.prototype.setFeatureFlagOverride=function(e,t){this.ffOverrideStorage.set(e,t),this.increment("FEATURE_FLAG","set")},e.prototype.resetFeatureFlagOverride=function(e){this.ffOverrideStorage.remove(e),this.increment("FEATURE_FLAG","reset")},e.prototype.resetAllFeatureFlagOverride=function(){this.ffOverrideStorage.clear(),this.increment("FEATURE_FLAG","reset.all")},e.prototype.increment=function(e,t){Ht.counter("experiment.manual.override",{"experiment.type":e,operation:t}).increment()},e}(),_M=function(){function e(){}return e.serverFetch=function(e,t){return"".concat(e,"/api/v2/workspaces/").concat(t,"/config")},e.clientFetch=function(e,t){return"".concat(e,"/api/v2/workspaces/").concat(t,"/config")},e.userCohorts=function(e){return"".concat(e,"/api/v1/cohorts")},e.serverDispatch=function(e){return"".concat(e,"/api/v2/events")},e.clientDispatch=function(e){return"".concat(e,"/api/v2/w/events")},e.beaconDispatch=function(e,t){return"".concat(e,"/api/v2/w/").concat(t,"/events")},e.inAppMessageRenderer=function(e,t){return"".concat(e,"/sdk/iam-renderer/").concat(t,"/iam-renderer.js")},e.monitoring=function(e){return"".concat(e,"/metrics")},e.userTargets=function(e){return"".concat(e,"/api/v1/user-targets")},e}(),bM=function(){function e(e){this.storage=e}return e.prototype.exist=function(e,t){var n=this.key(e),r=this.storage.getItem(n);if(h.isNullOrUndefined(r))return!1;var i=Number.parseInt(r,10);return Number.isNaN(i)?(this.storage.removeItem(n),!1):t<=i||(this.storage.removeItem(n),!1)},e.prototype.put=function(e,t){this.storage.setItem(this.key(e),"".concat(t))},e.prototype.key=function(e){return"".concat(e.key)},e}(),wM=function(){function e(e){this.handlers=e}return e.prototype.get=function(e){return this.handlers.find(function(t){return t.supports(e)})},e}(),xM=function(){function e(){}return e.prototype.handle=function(e,t){e.close()},e.prototype.supports=function(e){return"CLOSE"===e.type},e}(),SM=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(n){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"WEB_LINK"===e.type},e}(),EM=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){e.close();try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(n){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_AND_CLOSE"===e.type},e}(),TM=function(){function e(e,t){this.storage=e,this.clock=t}return e.prototype.handle=function(e,t){if(e.context.decisionReason!==K.OVERRIDDEN){var n=this.clock.currentMillis()+B;this.storage.put(e.context.inAppMessage,n),e.close()}else e.close()},e.prototype.supports=function(e){return"HIDDEN"===e.type},e}(),MM=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(n){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_NEW_WINDOW"===e.type},e}(),AM=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){e.close();try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(n){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_NEW_WINDOW_AND_CLOSE"===e.type},e}(),kM=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(n){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_NEW_TAB"===e.type},e}(),CM=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){e.close();try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(n){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_NEW_TAB_AND_CLOSE"===e.type},e}(),IM=function(){function e(e){this.core=e}return e.prototype.track=function(e,t,n){var r=this.createTrackEvent(t,e);this.core.track(r,e.user,n)},e.prototype.commonProperties=function(e){return a(a({},e.properties),{in_app_message_id:e.inAppMessage.id,in_app_message_key:e.inAppMessage.key,in_app_message_display_type:e.message.layout.displayType,decision_reason:String(e.decisionReason)})},e.prototype.createTrackEvent=function(e,t){var n,r,i,o;switch(e.type){case"IMPRESSION":return{key:"$in_app_impression",properties:a(a({},this.commonProperties(t)),{title_text:null===(r=null===(n=t.message.text)||void 0===n?void 0:n.title)||void 0===r?void 0:r.text,body_text:null===(o=null===(i=t.message.text)||void 0===i?void 0:i.body)||void 0===o?void 0:o.text,button_text:t.message.buttons.map(function(e){return e.text}),image_url:t.message.images.map(function(e){return e.imagePath})})};case"CLOSE":return{key:"$in_app_close",properties:this.commonProperties(t)};case"ACTION":var s=e;return{key:"$in_app_action",properties:a(a({},this.commonProperties(t)),{action_type:s.action.type,action_area:s.area,action_value:s.action.value,button_text:s.buttonText,image_url:s.imageUrl,image_order:s.imageOrder})};case"IMAGE_IMPRESSION":var l=e;return{key:"$in_app_image_impression",properties:a(a({},this.commonProperties(t)),{image_url:l.imageUrl,image_order:l.imageOrder})}}},e}(),PM=function(){function e(e,t,n,r){void 0===r&&(r=null),this.messageViewFactory=e,this.eventHandler=t,this.interactionHandlerFactory=n,this.inAppMessageListener=r,this.currentMessageView=null,this.opening=!1}return e.prototype.setListener=function(e){this.inAppMessageListener=e},e.prototype.present=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:if(this.currentMessageView)return[2];if(this.opening)return[2];this.opening=!0,t=null,n.label=1;case 1:return n.trys.push([1,3,4,5]),null===(t=this.messageViewFactory.create(e,this))?[2]:(this.currentMessageView=t,[4,t.open()]);case 2:return n.sent(),[3,5];case 3:return n.sent(),null===t||void 0===t||t.close(),[3,5];case 4:return this.opening=!1,[7];case 5:return[2]}})})},e}(),OM=function(){function e(t,n,r,i,o,s){var a=this;this.scriptLoader=t,this.context=n,this.ui=r,this.renderTypeResolver=i,this.status=o,this.lifecycleRegistry=s,this.container=null,this.renderer=null,this.resolveLifecycleEnd=function(e){if(e instanceof CustomEvent&&function(e){return"string"===typeof e.detail.id&&["OPEN","CLOSE"].includes(e.detail.type)}(e)){var t=e.detail,n=t.id,r=t.type,i=a.lifecycleRegistry.getAndRemove(r,n);null===i||void 0===i||i()}},this.handleInAppMessageInteraction=function(t){if(t instanceof CustomEvent&&t.type===e.HACKLE_IAM_INTERACTION_EVENT_TYPE){var n=t.detail;a.handleInteraction(n)}}}return e.prototype.open=function(){var t,n;return l(this,void 0,void 0,function(){var r,i,o,s,a=this;return c(this,function(l){switch(l.label){case 0:if(!this.status.canOpen())return f.log.debug("InAppMessage is already opened. (key=".concat(this.context.inAppMessage.key,")")),[2];r=wn.toPublic(this.context.inAppMessage),l.label=1;case 1:return l.trys.push([1,4,,5]),null===(n=null===(t=this.ui.inAppMessageListener)||void 0===t?void 0:t.beforeInAppMessageOpen)||void 0===n||n.call(t,r),this.status.current="OPENING",window.addEventListener(e.HACKLE_IAM_INTERACTION_EVENT_TYPE,this.handleInAppMessageInteraction),window.addEventListener(e.HACKLE_IAM_LIFECYCLE_END_EVENT_TYPE,this.resolveLifecycleEnd),[4,this.scriptLoader.load()];case 2:return l.sent(),(i=this.addContainer()).style.display="none",i.classList.add("".concat(e.CONTAINER_CLASS_NAME,"--loading")),o=window.HackleInAppMessageRenderer,this.renderer=new o.HackleInAppMessageRenderer(i),s=this.renderTypeResolver.resolve(this.context),[4,this.renderer.render({messageId:this.context.inAppMessage.id,message:this.context.message.toJson(),renderType:s})];case 3:return l.sent(),i.classList.remove("".concat(e.CONTAINER_CLASS_NAME,"--loading")),i.style.display="block",this.handleInAppMessageLifecycle("OPEN",function(){var e,t;a.handleEvent({type:"IMPRESSION"}),a.status.current="OPENED",null===(t=null===(e=a.ui.inAppMessageListener)||void 0===e?void 0:e.afterInAppMessageOpen)||void 0===t||t.call(e,r)},function(){f.log.warn("Failed to open inAppMessage with [Timeout expired.]"),a.destroy()}),[3,5];case 4:return l.sent(),this.destroy(),[3,5];case 5:return[2]}})})},e.prototype.close=function(){var e,t,n=this;if(this.status.canClose()){var r=wn.toPublic(this.context.inAppMessage);null===(t=null===(e=this.ui.inAppMessageListener)||void 0===e?void 0:e.beforeInAppMessageClose)||void 0===t||t.call(e,r),this.status.current="CLOSING",this.handleInAppMessageLifecycle("CLOSE",function(){var e,t;n.handleEvent({type:"CLOSE"}),n.destroy(),null===(t=null===(e=n.ui.inAppMessageListener)||void 0===e?void 0:e.afterInAppMessageClose)||void 0===t||t.call(e,r)},function(){var e,t;f.log.warn("Failed to close inAppMessage with [Timeout expired.]"),n.destroy(),null===(t=null===(e=n.ui.inAppMessageListener)||void 0===e?void 0:e.afterInAppMessageClose)||void 0===t||t.call(e,r)})}else f.log.debug("InAppMessage is already closed. (key=".concat(this.context.inAppMessage.key,")"))},e.prototype.handleInAppMessageLifecycle=function(t,n,r){var i=this,o=this.lifecycleRegistry.register(t,n);window.dispatchEvent(new CustomEvent(e.HACKLE_IAM_LIFECYCLE_START_EVENT_TYPE,{detail:{type:t,id:o}})),setTimeout(function(){void 0===i.lifecycleRegistry.getAndRemove(t,o)||r()},e.LIFE_CYCLE_EVENT_LISTEN_TIMEOUT)},e.prototype.destroy=function(){var t;window.removeEventListener(e.HACKLE_IAM_INTERACTION_EVENT_TYPE,this.handleInAppMessageInteraction),window.removeEventListener(e.HACKLE_IAM_LIFECYCLE_END_EVENT_TYPE,this.resolveLifecycleEnd),null===(t=this.renderer)||void 0===t||t.destroy(),this.renderer=null,this.removeContainer(),this.ui.currentMessageView=null,this.status.current="CLOSED"},e.prototype.addContainer=function(){if(!this.container){var t=document.createElement("div");t.classList.add(e.CONTAINER_CLASS_NAME),this.container=t}return this.container.parentNode||document.body.appendChild(this.container),this.container},e.prototype.removeContainer=function(){var e;this.container&&(null===(e=this.container.parentNode)||void 0===e||e.removeChild(this.container),this.container=null)},e.prototype.handleInteraction=function(e){var t=this.ui.interactionHandlerFactory.get(e);t&&t.handle(this,e)},e.prototype.handleEvent=function(e){this.ui.eventHandler.handle(this,e)},e.HACKLE_IAM_INTERACTION_EVENT_TYPE="hackle-iam-interaction",e.HACKLE_IAM_LIFECYCLE_START_EVENT_TYPE="hackle-iam-lifecycle-start",e.HACKLE_IAM_LIFECYCLE_END_EVENT_TYPE="hackle-iam-lifecycle-end",e.CONTAINER_CLASS_NAME="hackle-iam",e.LIFE_CYCLE_EVENT_LISTEN_TIMEOUT=5e3,e}(),RM=function(){function e(){this.mobileOSRegex=/(iOS|Android|iPad|iPhone)/g,this.mobileDeviceRegex=/(mobile|phone|tablet)/g}return e.prototype.isMobileOS=function(e){var t=e.user.hackleProperties.osName;return"string"===typeof t&&Boolean(t.match(this.mobileOSRegex))},e.prototype.isMobileDeviceType=function(e){var t=e.user.hackleProperties.deviceType;return"string"===typeof t&&Boolean(t.match(this.mobileDeviceRegex))},e.prototype.resolve=function(e){return this.isMobileOS(e)||this.isMobileDeviceType(e)?"mobile":"pc"},e}(),DM=function(){function e(e){void 0===e&&(e="CLOSED"),this.current=e}return e.prototype.canOpen=function(){return"OPENED"!==this.current&&"OPENING"!==this.current},e.prototype.canClose=function(){return"CLOSED"!==this.current&&"CLOSING"!==this.current},e}(),LM=function(){function e(){this.record={}}return e.prototype.resolveKey=function(e,t){return"".concat(e,"_").concat(t)},e.prototype.register=function(e,t){var n=(0,r.A)(),i=this.resolveKey(e,n);return this.record[i]=t,n},e.prototype.getAndRemove=function(e,t){var n=this.resolveKey(e,t),r=this.record,i=n,o=r[i],s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["symbol"===typeof i?i:i+""]);return this.record=s,o},e}(),NM=function(){function e(e){this.scriptLoader=e}return e.create=function(t){return new e(t)},e.prototype.create=function(e,t){var n=new RM,r=new DM,i=new LM;switch(e.message.layout.displayType){case"MODAL":case"BANNER":case"BOTTOM_SHEET":return new OM(this.scriptLoader,e,t,n,r,i);case"NONE":return null}},e}(),FM=function(){function e(e){this.scriptUrl=e}return e.prototype.load=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return window.HackleInAppMessageRenderer?[2]:(e=this.createScript(),document.head.appendChild(e),[4,this.waitForLoad(e)]);case 1:return[2,t.sent()]}})})},e.prototype.createScript=function(){var e=document.createElement("script");return e.type="text/javascript",e.async=!0,e.src=this.scriptUrl,e},e.prototype.waitForLoad=function(e){return new Promise(function(t,n){var r=function(){o(),t(e)},i=function(e){o(),n(e.message)},o=function(){e.removeEventListener("error",i),e.removeEventListener("load",r)};e.addEventListener("load",r),e.addEventListener("error",i)})},e}(),zM=function(){function e(e){this.targetMatcher=e}return e.prototype.matches=function(e,t,n){var r=this;return t.eventTrigger.rules.some(function(i){return r.ruleMatches(e,n,t,i)})},e.prototype.ruleMatches=function(e,t,n,r){if(t.event.key!==r.eventKey)return!1;var i=UM.of(e,t,n);return this.targetMatcher.anyMatches(i,EE.create(),r.targets)},e}(),UM=function(){function e(e,t,n,r){this.key=e,this.workspace=t,this.user=n,this.event=r}return e.of=function(t,n,r){return new e(new SE("IN_APP_MESSAGE",r.id),t,n.user,n)},e}(),jM=function(){function e(e){this.storage=e}return e.prototype.get=function(e){var t=this.storage.getItem(e.id.toString());return h.isNullOrUndefined(t)?[]:JSON.parse(t)},e.prototype.set=function(e,t){this.storage.setItem(e.id.toString(),JSON.stringify(t))},e}(),BM=function(){function e(e){this.processors=e}return e.prototype.get=function(e){return this.processors.find(function(t){return t.supports(e)})},e}(),VM=function(){function e(){}return e.prototype.process=function(e,t,n){},e.prototype.supports=function(e){return"IMPRESSION"===e.type},e}(),HM=function(){function e(){}return e.prototype.process=function(e,t,n){},e.prototype.supports=function(e){return"CLOSE"===e.type},e}(),$M=function(){function e(e){this.actionHandlerFactory=e}return e.prototype.process=function(e,t,n){var r,i,o=this.actionHandlerFactory.get(t.action);!(null===(i=null===(r=e.ui.inAppMessageListener)||void 0===r?void 0:r.onInAppMessageClick)||void 0===i?void 0:i.call(r,wn.toPublic(e.context.inAppMessage),xn.toPublic(e),_t.fromAction(t.action)))&&e.status.canClose()&&(null===o||void 0===o||o.handle(e,t.action))},e.prototype.supports=function(e){return"ACTION"===e.type},e}(),YM=function(){function e(e,t,n){this.clock=e,this.eventTracker=t,this.eventProcessorFactory=n}return e.prototype.handle=function(e,t){var n=this.clock.currentMillis();this.eventTracker.track(e.context,t,n);var r=this.eventProcessorFactory.get(t);r&&r.process(e,t,n)},e}(),GM=function(){function e(e){this.ruleMatcher=e}return e.prototype.matches=function(e,t,n){return this.ruleMatcher.matches(e,t,n)},e}(),qM=function(){function e(e){this.handlers=e}return e.prototype.get=function(e){return this.handlers.find(function(t){return t.supports(e)})},e}(),WM=function(){function e(){}return e.prototype.handle=function(e,t){e.close()},e.prototype.supports=function(e){return"CLOSE"===e.type},e}(),KM=function(){function e(e){this.eventHandler=e}return e.prototype.handle=function(e,t){var n=this.eventOrNull(t);n&&this.eventHandler.handle(e,n)},e.prototype.eventOrNull=function(e){var t=mt.fromJson(e.action);return t?{type:"ACTION",action:t,area:e.area,buttonText:e.buttonText,imageUrl:e.imageUrl,imageOrder:e.imageOrder}:null},e.prototype.supports=function(e){return"ACTION"===e.type},e}(),ZM=function(){function e(e){this.eventHandler=e}return e.prototype.handle=function(e,t){var n={type:"IMAGE_IMPRESSION",imageUrl:t.imageUrl,imageOrder:t.imageOrder};this.eventHandler.handle(e,n)},e.prototype.supports=function(e){return"IMAGE_IMPRESSION"===e.type},e}(),JM=function(){function e(){}return e.prototype.open=function(e){window.location.href=e.href},e}(),XM=function(){function e(){}return e.prototype.open=function(e){window.open(e.href,"Hackle","resizable:true")},e}(),QM=function(){function e(){}return e.prototype.open=function(e){window.open(e.href)},e}(),eA=function(){function e(){}return e.prototype.open=function(e){window.location.replace(e)},e}(),tA={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,gclid:void 0,fbclid:void 0},nA={current:void 0,referrer:void 0},rA=function(e,t){return Object.keys(tA).every(function(n){return e[n]===t[n]})},iA=function(e,t,n){return null===e||(!rA(t,tA)||n.current!==n.referrer)&&!rA(e,t)},oA=function(){function e(e,t,n,r){this.storage=e,this.parser=t,this.core=n,this.userManager=r}return e.prototype.startNewCampaign=function(e,t,n){for(var r=a(a({},tA),t),i=new gn,o=0,s=Object.entries(r);o<s.length;o++){var l=s[o],c=l[0],u=l[1];u?i.set(c,u):i.unset(c)}var h=i.build(),d=h.toEvent(),p=this.userManager.toHackleUser(e);this.core.track(d,p,n),this.userManager.updateUserProperties(h)},e.prototype.startNewCampaignIfNeeded=function(e,t){var n=this.storage.get(),r=this.parser.parse(),i=this.parser.parseDomain();iA(n,r,i)&&(this.storage.set(r),this.startNewCampaign(e,r,t))},e.prototype.onSessionEnded=function(e,t,n){},e.prototype.onSessionStarted=function(e,t,n){this.startNewCampaignIfNeeded(t,n)},e}(),sA=function(){function e(e){this.storage=e}return e.prototype.get=function(){var e=this.storage.getItem(z);return e?JSON.parse(e):null},e.prototype.set=function(e){this.storage.setItem(z,JSON.stringify(e))},e}(),aA=function(){function e(e){this.search=e}return e.prototype.getQueryParam=function(e){return this.getQueryParams(function(){return!0})[e]||""},e.prototype.getQueryParams=function(e){for(var t={},n=0,r=this.search.substring(1).split("&");n<r.length;n++){var i=r[n].split("="),o=i[0],s=i[1];if(!e||e(o,s)){var a=An.tryDecodeURIComponent(s);a&&(t[o]=a)}}return t},e}(),lA=function(){function e(){}return e.extractDomain=function(e){var t=this.DOMAIN_MATCH_REGEX,n=e.split("."),r=n[n.length-1];(r.length>4||"com"===r||"org"===r)&&(t=this.SIMPLE_DOMAIN_MATCH_REGEX);var i=e.match(t);return i?i[0]:e},e.DOMAIN_MATCH_REGEX=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,e.SIMPLE_DOMAIN_MATCH_REGEX=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,e}(),cA=function(){function e(e){this.pageManager=e}return e.prototype.parse=function(e){var t=this.params(e);return this.resolve(t)},e.prototype.params=function(t){var n=h.isNotNullOrUndefined(t)?t:this.pageManager.currentPage.queryParameter;return new aA(n).getQueryParams(e.CAMPAIGN_QUERY_CONDITION)},e.prototype.resolve=function(e){return{utm_campaign:e[uA],utm_content:e[hA],utm_id:e[dA],utm_medium:e[pA],utm_source:e[fA],utm_term:e[mA],gclid:e[gA],fbclid:e[yA]}},e.prototype.parseDomain=function(){var e=this;if("undefined"===typeof window)return nA;return{current:lA.extractDomain(this.pageManager.currentPage.hostname),referrer:function(){var t=e.pageManager.currentPage.referrer;if(t){var n=new URL(t).hostname;return lA.extractDomain(n)}}()}},e.CAMPAIGN_QUERY_CONDITION=function(e,t){return $t.isNotEmptyString(t)},e}(),uA="utm_campaign",hA="utm_content",dA="utm_id",pA="utm_medium",fA="utm_source",mA="utm_term",gA="gclid",yA="fbclid",vA=function(){function e(e,t){var n=this;this.userEventEmitter=e,this.determiner=t,this.onEvent=function(e){var t=n.determiner.determineTargetExposureOrNull(e);t&&n.send(t)},this.initialize()}return e.prototype.initialize=function(){this.userEventEmitter.on("event",this.onEvent)},e.prototype.send=function(e){var t=e.experiment.key,n=e.variationKey,r="HACKLE-EXPERIMENT_".concat(t,"_V").concat(e.experiment.version,"-").concat(n);try{window.gtag("event","experience_impression",{exp_variant_string:r})}catch(i){f.log.error("Unexpected exception while sending an event to Google Analytics with gtag: ".concat(i))}},e}(),_A=function(){function e(e){this.workspaceFetcher=e}return e.prototype.determineTargetExposureOrNull=function(e){var t=this.workspaceFetcher.get();return t&&t.getAttributes().integration_ga_experiment&&hE.isExposureEvent(e)?"RUNNING"!==e.experiment.status||e.decisionReason!==K.TRAFFIC_ALLOCATED?null:e:null},e}(),bA={user:void 0,debug:!1,log_disabled:!1,automaticPageTracking:!0,pollingIntervalMillis:D,exposureEventDedupIntervalMillis:L,sessionTimeoutMillis:18e5,autoOpenDevTool:!1,sdkUrl:"https://sdk-api.hackle.io",eventUrl:"https://event-api.hackle.io",monitoringUrl:"https://monitoring.hackle.io",cdnUrl:"https://static.hackle.io",sameSiteCookie:"LAX",secureCookie:!1,SDK_NAME_HEADER:"javascript-sdk_browser",SDK_VERSION_HEADER:"11.52.0",IAM_RENDERER_VERSION_HEADER:"0.0.12"},wA=function(){function e(){}return e.config=function(t){return a(a(a({},bA),t),{automaticPageTracking:e.resolveAutomaticPageTracking(t)})},e.resolveAutomaticPageTracking=function(e){return"boolean"!==typeof(null===e||void 0===e?void 0:e.automaticPageTracking)&&"boolean"!==typeof(null===e||void 0===e?void 0:e.auto_track_page_view)?bA.automaticPageTracking:!!e.automaticPageTracking||!!e.auto_track_page_view},e.logging=function(e){f.initCounter(function(e){return Ht.counter("log",{level:e})}),f.setLogLevel(p.INFO),e.log_disabled?f.setLogLevel(p.DISABLE):e.debug&&f.setLogLevel(p.DEBUG)},e.sdk=function(e,t){return f.log.debug("SDK key: ".concat(e)),e||f.log.error("invalid sdk key: '".concat(e,"' (expected: not null, not undefined and not empty string)")),{key:e,name:t.SDK_NAME_HEADER,version:t.SDK_VERSION_HEADER}},e.isBeaconSupported=function(){var e=!1;return"undefined"!==typeof window&&(e=window&&window.navigator&&!!window.navigator.sendBeacon&&!0)&&f.log.debug("support sendBeacon API"),e},e.pollingIntervalMillis=function(e){return void 0===e.pollingIntervalMillis||"number"!==typeof e.pollingIntervalMillis||e.pollingIntervalMillis<=0?D:Math.max(e.pollingIntervalMillis,6e4)},e.dedupIntervalMillis=function(e){return void 0===e.exposureEventDedupIntervalMillis||"number"!==typeof e.exposureEventDedupIntervalMillis?L:e.exposureEventDedupIntervalMillis<1e3||e.exposureEventDedupIntervalMillis>36e5?(f.log.warn("Exposure event dedup interval is outside allowed range[1_000ms..3_600_000ms]. Setting to default value[1m]."),L):e.exposureEventDedupIntervalMillis},e}(),xA=function(){function e(){this.synchronizers=[]}return e.prototype.add=function(e){this.synchronizers.push(e)},e.prototype.sync=function(){return l(this,void 0,void 0,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.synchronizers.map(function(t){return e.safe(t.sync())}))];case 1:return t.sent(),[2]}})})},e.prototype.close=function(){return l(this,void 0,void 0,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.synchronizers.map(function(t){return e.safe(t.close())}))];case 1:return t.sent(),[2]}})})},e.prototype.safe=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),f.log.error("Failed to sync: ".concat(t)),[3,3];case 3:return[2]}})})},e}(),SA=function(){function e(e,t,n){this.delegate=e,this.scheduler=t,this.intervalMillis=n,this.pollingJob=null}return e.prototype.sync=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.delegate.sync()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),f.log.error("Failed to sync: ".concat(e)),[3,3];case 3:return[2]}})})},e.prototype.start=function(){var e=this;this.intervalMillis!==D&&null===this.pollingJob&&(this.pollingJob=this.scheduler.schedulePeriodically(this.intervalMillis,this.intervalMillis,function(){return e.sync()}))},e.prototype.stop=function(){var e;this.intervalMillis!==D&&(null===(e=this.pollingJob)||void 0===e||e.cancel(),this.pollingJob=null)},e.prototype.close=function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.stop(),[4,this.delegate.close()];case 1:return e.sent(),[2]}})})},e}(),EA=function(){function e(e){this.scheduleType=e}return e.prototype.schedule=function(e,t){var n=new TA(e,t);return n.start(),n},e.prototype.schedulePeriodically=function(e,t,n){var r;switch(this.scheduleType){case"setTimeout":r=new MA(e,t,n);break;case"setInterval":r=new AA(e,t,n)}return r.start(),r},e}(),TA=function(){function e(e,t){this.delayMillis=e,this.task=t,this.timeout=null}return e.prototype.start=function(){var e=this;this.timeout=setTimeout(function(){try{e.task()}catch(t){f.log.error("Failed to run task: ".concat(t))}finally{e.timeout=null}},this.delayMillis)},e.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),MA=function(){function e(e,t,n){this.delayMillis=e,this.intervalMillis=t,this.task=n,this.timeout=null}return e.prototype.start=function(){var e=this;this.timeout=setTimeout(function(){return e.run()},this.delayMillis)},e.prototype.run=function(){var e=this;try{this.task()}catch(t){f.log.error("Failed to run task: ".concat(t))}this.timeout=setTimeout(function(){return e.run()},this.intervalMillis)},e.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),AA=function(){function e(e,t,n){this.delayMillis=e,this.intervalMillis=t,this.task=n,this.timeout=null,this.interval=null}return e.prototype.start=function(){var e=this;this.timeout=setTimeout(function(){e.run(),e.interval=setInterval(function(){return e.run()},e.intervalMillis)},this.delayMillis)},e.prototype.run=function(){try{this.task()}catch(e){f.log.error("Failed to run task: ".concat(e))}},e.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.interval&&(clearInterval(this.interval),this.interval=null)},e}(),kA=function(){function e(e,t){this.url=e,this.transport=t}return e.prototype.fetchIfModified=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return t=this.createRequest(e),[4,this.execute(t)];case 1:return n=r.sent(),[2,this.handleResponse(n)]}})})},e.prototype.createRequest=function(e){var t=Yt.builder().url(this.url).method("GET");return null!==e&&t.addHeader(Wt.IF_MODIFIED_SINCE,e),t.build()},e.prototype.execute=function(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:t=Tt.start(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.transport.send(e)];case 2:return n=i.sent(),Xt.record("get.workspace",t,n),[2,n];case 3:throw r=i.sent(),Xt.record("get.workspace",t,null),r;case 4:return[2]}})})},e.prototype.handleResponse=function(e){if(e.isNotModified())return null;if(!e.isSuccessful())throw new Error("Http status code: ".concat(e.statusCode));if(null===e.body)throw new Error("Response body is empty");return{config:JSON.parse(e.body),lastModified:e.headers.get(Wt.LAST_MODIFIED)}},e}(),CA=function(){function e(e,t){this.url=e,this.transport=t}return e.prototype.fetch=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return t=this.createRequest(e),[4,this.execute(t)];case 1:return n=r.sent(),[2,this.handleResponse(n)]}})})},e.prototype.createRequest=function(e){var t={identifiers:re(e)},n=i.o4.encodeURL(JSON.stringify(t));return Yt.builder().url(this.url).method("GET").addHeader("X-HACKLE-USER",n).build()},e.prototype.execute=function(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:t=Tt.start(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.transport.send(e)];case 2:return n=i.sent(),Xt.record("get.cohorts",t,n),[2,n];case 3:throw r=i.sent(),Xt.record("get.cohorts",t,null),r;case 4:return[2]}})})},e.prototype.handleResponse=function(e){if(!e.isSuccessful())throw new Error("Http status code: ".concat(e.statusCode));if(null===e.body)throw new Error("Response body is null");var t=JSON.parse(e.body);return YT.fromDto(t)},e}(),IA=function(){function e(e,t){this.url=e,this.transport=t}return e.prototype.fetch=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return t=this.createRequest(e),[4,this.execute(t)];case 1:return n=r.sent(),[2,this.handleResponse(n)]}})})},e.prototype.createRequest=function(e){var t={identifiers:re(e)},n=i.o4.encodeURL(JSON.stringify(t));return Yt.builder().url(this.url).method("GET").addHeader("X-HACKLE-USER",n).build()},e.prototype.execute=function(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:t=Tt.start(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.transport.send(e)];case 2:return n=i.sent(),Xt.record("get.user-targets",t,n),[2,n];case 3:throw r=i.sent(),Xt.record("get.user-targets",t,null),r;case 4:return[2]}})})},e.prototype.handleResponse=function(e){if(!e.isSuccessful())throw new Error("Http status code: ".concat(e.statusCode));if(null===e.body)throw new Error("Response body is null");var t=JSON.parse(e.body);return cM.fromDto(t)},e}(),PA=function(){function e(e,t,n,r,i,o,s,a,l,c,u){this.experiments=d.associateBy(e,function(e){return e.key}),this.splitUrlExperiments=d.associateBy(t,function(e){return e.key}),this.featureFlags=d.associateBy(n,function(e){return e.key}),this.buckets=d.associateBy(r,function(e){return e.id}),this.eventTypes=d.associateBy(i,function(e){return e.key}),this.segments=d.associateBy(o,function(e){return e.key}),this.containers=d.associateBy(s,function(e){return e.id}),this.parameterConfigurations=d.associateBy(a,function(e){return e.id}),this.remoteConfigParameters=d.associateBy(l,function(e){return e.key}),this.inAppMessages=d.associateBy(c,function(e){return e.key}),this.attributes=u}return e.prototype.getExperiments=function(){return Array.from(this.experiments.values())},e.prototype.getSplitUrlExperiments=function(){return Array.from(this.splitUrlExperiments.values())},e.prototype.getFeatureFlags=function(){return Array.from(this.featureFlags.values())},e.prototype.getInAppMessages=function(){return Array.from(this.inAppMessages.values())},e.prototype.getExperimentOrNull=function(e){return this.experiments.get(e)},e.prototype.getFeatureFlagOrNull=function(e){return this.featureFlags.get(e)},e.prototype.getBucketOrNull=function(e){return this.buckets.get(e)},e.prototype.getEventTypeOrNull=function(e){return this.eventTypes.get(e)},e.prototype.getSegmentOrNull=function(e){return this.segments.get(e)},e.prototype.getContainerOrNull=function(e){return this.containers.get(e)},e.prototype.getParameterConfigurationOrNull=function(e){return this.parameterConfigurations.get(e)},e.prototype.getRemoteConfigParameterOrNull=function(e){return this.remoteConfigParameters.get(e)},e.prototype.getInAppMessageOrNull=function(e){return this.inAppMessages.get(e)},e.prototype.getAttributes=function(){return this.attributes},e.from=function(t){var n=t.parameterConfigurations.map(W.fromJson),r=d.mapNotNullOrUndefined(t.experiments,function(e){return J.fromJson("AB_TEST",e,n)}),i=d.mapNotNullOrUndefined(t.experiments,function(e){return J.fromJson("AB_TEST",e,n)}).filter(function(e){return"SPLIT_URL"===e.implementationType}),o=d.mapNotNullOrUndefined(t.featureFlags,function(e){return J.fromJson("FEATURE_FLAG",e,n)}),s=t.buckets.map(Q.fromJson),a=t.events.map(te.fromJson),l=d.mapNotNullOrUndefined(t.segments,de.fromJson),c=t.containers.map(pe.fromJson),u=d.mapNotNullOrUndefined(t.remoteConfigParameters,me.fromJson),h=d.mapNotNullOrUndefined(t.inAppMessages,Be.fromJson),p=t.workspace.attributes;return new e(r,i,o,s,a,l,c,n,u,h,p)},e}(),OA=function(){function e(e,t){this.workspaceConfigStorage=e,this.workspaceFetcher=t,this.workspace=null,this.lastModified=null;var n=this.workspaceConfigStorage.get();n&&this.setConfig(n)}return e.prototype.setConfig=function(e){this.setWorkspace(e),this.lastModified=e.lastModified},e.prototype.setWorkspace=function(e){try{this.workspace=PA.from(e.config)}catch(t){f.log.error("Failed to set workspace: ".concat(t))}},e.prototype.get=function(){return this.workspace},e.prototype.sync=function(){return l(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.workspaceFetcher.fetchIfModified(this.lastModified)];case 1:return(e=n.sent())&&(this.setConfig(e),this.workspaceConfigStorage.set(e)),[3,3];case 2:return t=n.sent(),f.log.error("Failed to sync workspace: ".concat(t)),[3,3];case 3:return[2]}})})},e.prototype.close=function(){return l(this,void 0,void 0,function(){return c(this,function(e){return[2]})})},e}(),RA=function(){function e(e,t,n){this.transport=e,this.synchronousTransport=t,this.retryManager=n}return e.prototype.dispatch=function(e,t){var n=e.map(function(e){return e.toDto()});return t?this.dispatchEventsSynchronously(n):this.dispatchEvents(n)},e.prototype.dispatchEventsSynchronously=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,this.retryManager.add(e)];case 1:return n.sent(),[4,this.synchronousTransport.send(e)];case 2:return(t=n.sent()).isSuccessful()||t.isClientError()?[4,this.retryManager.delete(e)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.dispatchEvents=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,this.transport.send(e)];case 1:return(t=n.sent()).isSuccessful()||t.isClientError()?[2]:[4,this.retryManager.add(e)];case 2:return n.sent(),[2]}})})},e}();var DA=function(){function e(e,t){this.url=e,this.transport=t}return e.prototype.send=function(e){var t=this.createRequest(e);return this.execute(t)},e.prototype.createRequest=function(e){var t=function(e){var t=new Array,n=new Array,r=new Array;return e.forEach(function(e){e instanceof hE?hE.isExposureEvent(e)?t.push(e.toDto()):hE.isTrackEvent(e)?n.push(e.toDto()):hE.isRemoteConfigEvent(e)&&r.push(e.toDto()):hE.isExposureEventDto(e)?t.push(e):hE.isTrackEventDto(e)?n.push(e):hE.isRemoteConfigEventDto(e)&&r.push(e)}),{exposureEvents:t,trackEvents:n,remoteConfigEvents:r}}(e);return Yt.builder().url(this.url).method("POST").addHeader("Content-Type","application/json").body(JSON.stringify(t)).build()},e.prototype.execute=function(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:t=Tt.start(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.transport.send(e)];case 2:return n=i.sent(),Xt.record("post.events",t,n),[2,n];case 3:throw r=i.sent(),Xt.record("post.events",t,null),r;case 4:return[2]}})})},e}(),LA=function(){function e(e,t){this.repository=e,this.transport=t}return e.prototype.add=function(e){return this.repository.add(e)},e.prototype.delete=function(e){return this.repository.delete(e)},e.prototype.flush=function(){return l(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return[4,this.repository.read()];case 1:return 0===(e=n.sent()).length?[2]:[4,this.transport.send(e)];case 2:return(t=n.sent()).isSuccessful()||t.isClientError()?[4,this.delete(e)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"visible":case"pageshow":return void this.flush().catch(function(e){return f.log.warn("Failed to flush retry events: ".concat(e))});case"blur":case"focus":case"hidden":case"locationChange":case"pagehide":return}},e}(),NA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]=(this.listeners[e]||[]).concat(t)},e.prototype.off=function(e,t){this.listeners[e]=(this.listeners[e]||[]).filter(function(e){return e!==t})},e.prototype.emit=function(e,t){(this.listeners[e]||[]).forEach(function(e){e(t)})},e}()),FA=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.eventDispatcher=t,o.eventDispatchMaxSize=n,o.flushScheduler=r,o.flushIntervalMillis=i,o.queue=[],o.flushingJob=null,o}return s(t,e),t.prototype.process=function(e){this.enqueue(e),this.emit("event",e)},t.prototype.enqueue=function(e){0===this.queue.length&&this.scheduleFlush(),this.queue.push(e),this.queue.length>=this.eventDispatchMaxSize&&this.flush()},t.prototype.scheduleFlush=function(){var e,t=this;null===(e=this.flushingJob)||void 0===e||e.cancel(),this.flushingJob=this.flushScheduler.schedule(this.flushIntervalMillis,function(){return t.flush()})},t.prototype.flush=function(e){var t;void 0===e&&(e=!1),null===(t=this.flushingJob)||void 0===t||t.cancel(),0!==this.queue.length&&(this.eventDispatcher.dispatch(this.queue,e).catch(function(e){return f.log.warn("Failed to dispatch events: ".concat(e))}),this.queue=[])},t.prototype.close=function(){this.flush(!0)},t}(NA),zA=function(){function e(e,t,n){this.sdk=e,this.clock=t,this.delegate=n}return e.prototype.send=function(e){var t=e.toBuilder().addHeader(M,this.sdk.key).addHeader(A,this.sdk.name).addHeader(k,this.sdk.version).addHeader(C,this.clock.currentMillis().toString()).build();return this.delegate.send(t)},e}(),UA=function(){function e(){}return e.intercept=function(e,t){return t instanceof zA?t:new zA(e,S.instance,t)},e}(),jA=function(){function e(){}return e.create=function(){return new e},e.prototype.send=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;e.options.timeoutMillis&&(r.timeout=e.options.timeoutMillis),r.open(e.method,e.url),r.onreadystatechange=function(){if(r.readyState===r.DONE)if(0!==r.status){var e=function(e){return new qt(e.status,e.responseText,function(e){var t=Wt.builder(),n=e.getAllResponseHeaders();if(!n)return t.build();for(var r=0,i=n.split("\r\n");r<i.length;r++){var o=i[r],s=o.indexOf(": ");if(s>0){var a=o.slice(0,s),l=o.slice(s+2);t.add(a,l)}}return t.build()}(e))}(r);t(e)}else n(new Error("Request Error"))},function(e,t){var n=t.headers.raw();for(var r in n)n.hasOwnProperty(r)&&e.setRequestHeader(r,n[r])}(r,e),r.send(e.body)})},e}();var BA,VA=function(){function e(){}return e.create=function(){return new e},e.prototype.send=function(e){var t=this;return new Promise(function(n,r){var i=!1;if("undefined"!==typeof window&&(i=window&&window.navigator&&!!window.navigator.sendBeacon&&!0),!i)throw new Error("BeaconTransport not supported.");var o=t.createBody(e);if(!window.navigator.sendBeacon(e.url,o))throw Error("Failed to sendBeacon");n(qt.ok())})},e.prototype.createBody=function(e){var t=new URLSearchParams,n=e.headers.get(M);n&&t.append("sdkKey",n),t.append("sdkName",e.headers.getOrDefault(A,"unknown")),t.append("sdkVersion",e.headers.getOrDefault(k,"unknown"));var r=e.headers.get(C);return r&&t.append("sdkTime",r),e.body&&t.append("data",e.body),t},e}(),HA=function(){function e(e){this.invocationResponseResolver=e}return e.prototype.invoke=function(e){var t=window.prompt(JSON.stringify(e));return this.invocationResponseResolver.resolve(t)},e}(),$A=function(){function e(e){this.invocationResponseResolver=e}return e.prototype.invoke=function(e){var t;if(!(null===(t=window._hackleApp)||void 0===t?void 0:t.invoke))throw new Error("window._hackleApp.invoke is not implemented");var n=window._hackleApp.invoke(JSON.stringify(e));return this.invocationResponseResolver.resolve(n)},e}();!function(e){e.prompt="prompt",e.function="function"}(BA||(BA={}));!function(){function e(){}e.prototype.getInvocator=function(e,t){return e===BA.prompt?new HA(t):e===BA.function?new $A(t):null}}();var YA=function(){function e(e,t,n,r){this.determiner=e,this.redirector=t,this.userManager=n,this.core=r}return e.prototype.onPageStarted=function(e,t){var n=this.userManager.resolve(),r=this.determiner.determineOrNull(n);r&&(this.core.flush(!0),this.redirector.redirect(r))},e.prototype.onPageEnded=function(e,t){},e}(),GA=function(e,t,n,r){this.workspace=e,this.experiment=t,this.decision=n,this.user=r},qA=function(){function e(e,t,n,r){this.workspaceFetcher=e,this.splitUrlMatcher=t,this.splitUrlRedirectedCookieStorage=n,this.core=r}return e.prototype.determineOrNull=function(e){if(this.splitUrlRedirectedCookieStorage.alreadyRedirected())return this.splitUrlRedirectedCookieStorage.clear(),null;var t=this.workspaceFetcher.get();if(!t)return null;for(var n=0,r=t.getSplitUrlExperiments();n<r.length;n++){var i=r[n];if(this.splitUrlMatcher.matches(t,i,e)){var o=this.core.experiment(i.key,e,"A");return new GA(t,i,o,e)}}return null},e}(),WA=function(){function e(e){this.targetMatcher=e}return e.prototype.matches=function(e,t,n){if("SPLIT_URL"!==t.implementationType)return!1;if(!t.splitUrlTargets)return!1;var r=t.splitUrlTargets,i=KA.of(e,n);return!(r.excludeTargets.length>0&&this.targetMatcher.anyMatches(i,EE.create(),r.excludeTargets))&&(r.includeTargets.length>0&&this.targetMatcher.anyMatches(i,EE.create(),r.includeTargets))},e}(),KA=function(){function e(e,t,n){this.key=e,this.user=t,this.workspace=n}return e.of=function(t,n){return new e(new SE("SPLIT_URL",(0,r.A)()),n,t)},e}(),ZA=function(){function e(e,t,n,r){this.urlResolver=e,this.urlHandler=t,this.splitUrlRedirectedCookieStorage=n,this.initializeEventDispatcher=r}return e.prototype.redirect=function(e){var t=this.urlResolver.resolveOrNull(e);t&&(this.initializeEventDispatcher.setNeedDispatch(!1),this.splitUrlRedirectedCookieStorage.setRedirected(!0),this.urlHandler.open(t))},e}(),JA=function(){function e(e){this.campaignParser=e}return e.prototype.resolveOrNull=function(t){try{var n=JSON.parse(t.decision.get(e.SPLIT_URL_CONFIG_KEY,"")),r=wt.fromDto(n);return r.needRedirect?this.resolveByRedirectType(r.redirectType,r.redirectUrl,t):null}catch(i){return null}},e.prototype.resolveByRedirectType=function(e,t,n){return t&&e===_e.MANUAL?this.resolveManualRedirectUrl(t,n):null},e.prototype.resolveManualRedirectUrl=function(e,t){var n=An.tryParse(e);return n?this.decorateCampaign(n,t):null},e.prototype.decorateCampaign=function(e,t){var n=t.user.hackleProperties.queryParameter;return $t.isNotEmptyString(n)?function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],s=i[1];$t.isNotEmptyString(s)&&t.searchParams.set(o,s)}return t}(this.campaignParser.parse(n),e):e},e.SPLIT_URL_CONFIG_KEY="redirectUrl",e}(),XA=function(){function e(e,t,n){this.storage=e,this.cookieKey=t,this.cookieStorageOptions=n}return e.prototype.alreadyRedirected=function(){try{var e=this.storage.getItem(this.cookieKey);return!h.isNullOrUndefined(e)&&Boolean(JSON.parse(e))}catch(t){return!1}},e.prototype.clear=function(){this.storage.removeItem(this.cookieKey)},e.prototype.setRedirected=function(e){this.storage.setItem(this.cookieKey,String(e),this.cookieStorageOptions)},e}(),QA=function(){function e(){this.needDispatch=!0}return e.prototype.setNeedDispatch=function(e){this.needDispatch=e},e.prototype.dispatchDoneEventIfNeeded=function(){this.needDispatch&&window.dispatchEvent(new CustomEvent(e.HACKLE_INITIALIZE_DONE_EVENT_TYPE))},e.HACKLE_INITIALIZE_DONE_EVENT_TYPE="hackle-initialize-done",e}(),ek=function(){function e(e,t){this.sdk=e,this.storage=t}return e.prototype.get=function(){var e=this.storage.getItem(j);if(h.isNullOrUndefined(e))return null;try{var t=JSON.parse(e);return this.sdk.version!==t.version?(this.clear(),null):t}catch(n){return this.clear(),null}},e.prototype.set=function(e){var t=a(a({},e),{version:this.sdk.version});this.storage.setItem(j,JSON.stringify(t))},e.prototype.clear=function(){this.storage.removeItem(j)},e}(),tk=f.log,nk=function(){function e(e){void 0===e&&(e=S.instance),this.clock=e,this.listeners=[],this._initialized=!1}return e.prototype.install=function(t){void 0===t&&(t=null);try{var n=this.changeLifecycle.bind(this);window.addEventListener("pageshow",function(){return n("pageshow")}),window.addEventListener("pagehide",function(){return n("pagehide")}),document.addEventListener("visibilitychange",function(){return n(document.visibilityState)}),window.addEventListener("blur",function(){return n("blur")}),window.addEventListener("focus",function(){return n("focus")}),e.isSafariBrowser(t)&&window.addEventListener("beforeunload",function(){return n("hidden")}),history.pushState=(r=history.pushState,function(){try{var e=r.apply(history,arguments);return n("locationChange"),e}catch(t){(t instanceof Error||"string"===typeof t)&&tk.error(t)}}),history.replaceState=function(e){return function(){try{var t=e.apply(history,arguments);return n("locationChange"),t}catch(r){(r instanceof Error||"string"===typeof r)&&tk.error(r)}}}(history.replaceState),window.addEventListener("popstate",function(){try{n("locationChange")}catch(e){(e instanceof Error||"string"===typeof e)&&tk.error(e)}})}catch(i){(i instanceof Error||"string"===typeof i)&&tk.error(i)}var r},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.initialize=function(){this._initialized=!0,this.changeLifecycle("pageshow")},e.prototype.changeLifecycle=function(e){this._initialized&&this.publish(e)},e.prototype.publish=function(e){var t=this.clock.currentMillis();this.listeners.forEach(function(n){n.onLifecycleChanged(e,t)})},e.isSafariBrowser=function(e){return!h.isNullOrUndefined(e)&&e.toLowerCase().includes("safari")},e}(),rk=function(){function e(e){this.limiter=e}return e.create=function(t,n,r){return void 0===r&&(r=S.instance),new e(new ik(r,t,n))},e.prototype.execute=function(e,t){return this.limiter.tryAcquire()?e():t()},e}(),ik=function(){function e(e,t,n){this.clock=e,this.intervalMillis=t,this.limit=n,this.currentScope=null}return e.prototype.tryAcquire=function(){var e=this.clock.currentMillis();return this.refreshScopeIfNeeded(e).tryAcquire()},e.prototype.refreshScopeIfNeeded=function(e){return(null==this.currentScope||this.currentScope.isExpired(e))&&(this.currentScope=new ok(e+this.intervalMillis,this.limit)),this.currentScope},e}(),ok=function(){function e(e,t){this.expirationTime=e,this.token=t}return e.prototype.isExpired=function(e){return this.expirationTime<e},e.prototype.tryAcquire=function(){return this.token>0&&(this.token-=1,!0)},e}(),sk=function(){function e(e){this.determiners=e}return e.prototype.isDedupTarget=function(e){var t=this.determiners.find(function(t){return t.supports(e)});return!!t&&t.isDedupTarget(e)},e}(),ak=function(){function e(e,t){this.dedupIntervalMillis=e,this.clock=t,this.cache={},this.currentUser=null}return e.prototype.isDedupTarget=function(e){var t;if(-1===this.dedupIntervalMillis)return!1;y.isEquals(e.user.identifiers,null===(t=this.currentUser)||void 0===t?void 0:t.identifiers)||(this.currentUser=e.user,this.cache={});var n=this.cacheKey(e),r=this.clock.currentMillis(),i=this.cache[n];return void 0!==i&&r-i<=this.dedupIntervalMillis||(this.cache[n]=r,!1)},e}(),lk=function(e){function t(t,n){return void 0===n&&(n=S.instance),e.call(this,t,n)||this}return s(t,e),t.prototype.supports=function(e){return hE.isRemoteConfigEvent(e)},t.prototype.cacheKey=function(e){return[e.parameter.id,e.valueId,e.decisionReason].join("-")},t}(ak),ck=function(e){function t(t,n){return void 0===n&&(n=S.instance),e.call(this,t,n)||this}return s(t,e),t.prototype.supports=function(e){return hE.isExposureEvent(e)},t.prototype.cacheKey=function(e){return[e.experiment.id,e.variationId,e.variationKey,e.decisionReason].join("-")},t}(ak),uk=(function(){function e(){}e.prototype.isInvocatorResponse=function(e){return"object"===typeof e&&null!==e&&"success"in e&&"boolean"===typeof e.success&&"message"in e&&"string"===typeof e.message},e.prototype.resolve=function(e){var t=JSON.parse(null!==e&&void 0!==e?e:"");if(!this.isInvocatorResponse(t))throw new Error("invalid invocator response data");if(!t.success)throw new Error("failed response");return{message:t.message,success:t.success,data:t.data}}}(),function(){function e(e){this.invocator=e}e.prototype.createInvocationRequestDto=function(e){return{_hackle:{command:e.command,parameters:e.parameters,browserProperties:e.browserProperties}}},e.prototype.process=function(e){var t,n=this.createInvocationRequestDto(e);return null!==(t=this.invocator.invoke(n).data)&&void 0!==t?t:null}}(),f.log),hk=function(){function e(e,t){this.core=e,this.userManager=t}return e.prototype.onPageStarted=function(e,t){this.track(e,t)},e.prototype.onPageEnded=function(e,t){},e.prototype.track=function(t,n){var r;uk.debug("tracking page view");var i={key:e.PAGE_VIEW_EVENT_KEY,properties:(r={},r[e.PAGE_NAME_PROPERTY_KEY]=t.pageTitle,r)};this.core.track(i,this.userManager.resolve(),n)},e.PAGE_VIEW_EVENT_KEY="$page_view",e.PAGE_NAME_PROPERTY_KEY="$page_name",e}(),dk=function(){function e(){this.listeners=[],this._currentPage=null}return Object.defineProperty(e.prototype,"currentPage",{get:function(){var e;return null!==(e=this._currentPage)&&void 0!==e?e:_n.createWithCurrentPage()},enumerable:!1,configurable:!0}),e.prototype.updatePage=function(e,t){var n=this._currentPage;n&&e.isEquals(n)||(n&&this.publishEnd(n,t),this._currentPage=e,this.publishStart(e,t))},e.prototype.publishStart=function(e,t){for(var n=0,r=this.listeners;n<r.length;n++){r[n].onPageStarted(e,t)}},e.prototype.publishEnd=function(e,t){for(var n=0,r=this.listeners;n<r.length;n++){r[n].onPageEnded(e,t)}},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"pageshow":case"locationChange":var n=_n.createWithCurrentPage();return this.updatePage(n,t);case"visible":case"pagehide":case"blur":case"focus":case"hidden":return}},e.prototype.addListener=function(e){this.listeners.push(e)},e}(),pk=f.log,fk=function(){function e(e,t){this.pageManager=e,this.minimumEngagementDurationMillis=t,this.listeners=[],this._lastEngagementTime=null}return Object.defineProperty(e.prototype,"lastEngagementTime",{get:function(){return this._lastEngagementTime},enumerable:!1,configurable:!0}),e.prototype.startEngagement=function(e){pk.debug("startEngagement timestamp:".concat(e,", page:").concat(this.pageManager.currentPage.url)),this._lastEngagementTime=e},e.prototype.endEngagement=function(e,t){if(!h.isNullOrUndefined(this._lastEngagementTime)){var n=this._lastEngagementTime;this._lastEngagementTime=t;var r=t-n;if(!(r<this.minimumEngagementDurationMillis)){var i={page:e,durationMillis:r};this.publish(i,t)}}},e.prototype.publish=function(e,t){pk.debug("onEngagement timestamp:".concat(t,", page:").concat(this.pageManager.currentPage.url));for(var n=0,r=this.listeners;n<r.length;n++){r[n].onEngagement(e,t)}},e.prototype.onPageStarted=function(e,t){this.startEngagement(t)},e.prototype.onPageEnded=function(e,t){this.endEngagement(e,t)},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"visible":case"focus":return this.startEngagement(t);case"pagehide":case"hidden":case"blur":return this.endEngagement(this.pageManager.currentPage,t);case"pageshow":case"locationChange":return}},e.prototype.addListener=function(e){this.listeners.push(e)},e}(),mk=function(){function e(e,t){this.core=e,this.userManager=t}return e.prototype.onEngagement=function(t,n){var r,i={key:e.ENGAGEMENT_EVENT_KEY,properties:(r={},r[hk.PAGE_NAME_PROPERTY_KEY]=t.page.pageTitle,r[e.ENGAGEMENT_TIME_PROPERTY_KEY]=t.durationMillis,r)};this.core.track(i,this.userManager.resolve(),n)},e.ENGAGEMENT_EVENT_KEY="$engagement",e.ENGAGEMENT_TIME_PROPERTY_KEY="$engagement_time_ms",e}(),gk=function(){function e(e,t){this.core=e,this.userManager=t}return e.prototype.setPhoneNumber=function(t,n){var r=(new gn).set(e.PHONE_NUMBER_PROPERTY_KEY,t.getValue()).build().toSecuredEvent();this.track(r,n)},e.prototype.unsetPhoneNumber=function(t){var n=(new gn).unset(e.PHONE_NUMBER_PROPERTY_KEY).build().toSecuredEvent();this.track(n,t)},e.prototype.track=function(e,t){var n=this.userManager.resolve();this.core.track(e,n,t)},e.PHONE_NUMBER_PROPERTY_KEY="$phone_number",e}(),yk=(function(){function e(){}e.prototype.getBrowserProperties=function(e){return oM.generate(window,null!==e&&void 0!==e?e:_n.createWithCurrentPage())}}(),function(){function e(e,t,n){this.schedule=e,this.scheduleType=t,this.requestedAt=n}return Object.defineProperty(e.prototype,"delayMillis",{get:function(){return this.schedule.time.deliverAt-this.requestedAt},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"InAppMessageScheduleRequest(scheduleType=".concat(this.scheduleType,", requestedAt=").concat(this.requestedAt,")")},e}()),vk=function(){function e(e,t,n,r,i,o){this.dispatchId=e,this.inAppMessageKey=t,this.identifiers=n,this.time=r,this.reason=i,this.eventBasedContext=o}return e.prototype.toRequest=function(e,t){return new yk(this,e,t)},e.create=function(t){return new e((0,r.A)(),t.inAppMessage.key,t.event.user.identifiers,_k.of(t.inAppMessage,t.event.timestamp),t.reason,new bk(t.event.insertId,t.event.event))},e.fromDelayStorageEntity=function(t,n){return new e(t.schedule.dispatchId,t.schedule.inAppMessageKey,t.schedule.identifiers,new _k(n,t.schedule.time.deliverAt),t.schedule.reason,t.schedule.eventBasedContext)},e}(),_k=function(){function e(e,t){this.startedAt=e,this.deliverAt=t}return e.prototype.delayMillis=function(e){return this.deliverAt-e},e.of=function(t,n){return new e(n,t.eventTrigger.delay.deliverAt(n))},e}(),bk=function(e,t){this.insertId=e,this.event=t},wk=function(){function e(e,t,n,r,i,o){this.scheduleProcessor=e,this.delayStorage=t,this.triggerProcessor=n,this.resetProcessor=r,this.userEventEmitter=i,this.clock=o,this.initialize()}return e.prototype.initialize=function(){var e=this;this.userEventEmitter.on("event",function(t){e.onEvent(t)})},e.prototype.destroy=function(){var e=this;this.userEventEmitter.off("event",function(t){e.onEvent(t)})},e.prototype.onEvent=function(e){this.triggerProcessor.process(e)},e.prototype.onUserUpdated=function(e,t,n){var r=re(e),i=re(t);this.resetProcessor.process({identifiers:r},{identifiers:i})},e.prototype.loadDelaySchedule=function(){var e=this;this.delayStorage.values().forEach(function(t){var n=e.clock.currentMillis(),r=vk.fromDelayStorageEntity(t,n).toRequest("STORED",n);e.scheduleProcessor.process(r)})},e}(),xk=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.resolve=function(e,t,n){return t.setProperty("experiment_id",n.experiment.id),t.setProperty("experiment_key",n.experiment.key),t.setProperty("variation_id",n.variationId),t.setProperty("variation_key",n.variationKey),t.setProperty("experiment_decision_reason",n.reason),n},t}(wT),Sk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(vE),Ek=function(){function e(e,t,n,r,i){this.request=e,this.reason=t,this.targetEvaluations=n,this.message=r,this.properties=i}return Object.defineProperty(e.prototype,"inAppMessage",{get:function(){return this.request.inAppMessage},enumerable:!1,configurable:!0}),e.of=function(t,n,r){return new e(t,K.IN_APP_MESSAGE_TARGET,n.targetEvaluations,r,n.properties)},e}(),Tk=function(){function e(){}return Object.defineProperty(e.prototype,"key",{get:function(){return new SE("IN_APP_MESSAGE",this.inAppMessage.id)},enumerable:!1,configurable:!0}),e}(),Mk=function(e){function t(t,n,r){var i=e.call(this)||this;return i.workspace=t,i.user=n,i.inAppMessage=r,i}return s(t,e),t.of=function(e){return e instanceof t?e:new t(e.workspace,e.user,e.inAppMessage)},t.prototype.toString=function(){return"InAppMessageLayoutRequest(type=".concat(this.key.type,", key=").concat(this.inAppMessage.key,")")},t}(Tk),Ak=function(e){function t(t,n,r){var i=e.call(this)||this;return i.experimentEvaluator=t,i.selector=n,i.eventRecorder=r,i}return s(t,e),t.prototype.supports=function(e){return e instanceof Mk},t.prototype.evaluateInternal=function(e,t){var n=e.inAppMessage.messageContext.experimentContext,r=null!==n?this.evaluateExperiment(e,t,n):this.evaluateDefault(e,t);return Ek.of(e,t,r)},t.prototype.evaluateDefault=function(e,t){var n=kk(e.inAppMessage.messageContext.defaultLang);return this.selector.select(e.inAppMessage,n)},t.prototype.evaluateExperiment=function(e,t,n){var r,i=h.requiredNotNullOrUndefined(e.workspace.getExperimentOrNull(n.key),function(){return"Experiment[key=".concat(n.key,"]")}),o=this.experimentEvaluator.evaluate(e,t,i),s=kk(e.inAppMessage.messageContext.defaultLang),a=(r=o.variationKey,function(e){return r===e.variationKey});return this.selector.select(e.inAppMessage,function(e){return s(e)&&a(e)})},t.prototype.record=function(e,t){this.eventRecorder.record(e,t)},t}(Sk);function kk(e){return function(t){return e===t.lang}}var Ck,Ik=function(){function e(){}return e.prototype.select=function(e,t){var n=e.messageContext.messages.find(t);return h.requiredNotNullOrUndefined(n,function(){return"InAppMessage must be decided [".concat(e.id,"]")})},e}(),Pk=function(){function e(e){this.storage=e,this.STORE_MAX_SIZE=100}return e.prototype.record=function(e,t){if(e.reason!==K.OVERRIDDEN)try{this.doRecord(e)}catch(n){f.log.error("Failed to record InAppMessageImpression: ".concat(n))}},e.prototype.doRecord=function(e){var t=this.storage.get(e.inAppMessage),n={identifiers:e.user.identifiers,timestamp:e.requestedAt},r=u(u([],t,!0),[n],!1),i=r.length>this.STORE_MAX_SIZE?r.length-this.STORE_MAX_SIZE:0,o=r.slice(i);this.storage.set(e.inAppMessage,o)},e}(),Ok=function(){function e(e,t){this.dispatchId=e,this.context=t}return e.prototype.toString=function(){return"InAppMessagePresentResponse(dispatchId=".concat(this.dispatchId,", inAppMessage=").concat(this.context.inAppMessage,", displayType=").concat(this.context.message.layout.displayType,", layoutType=").concat(this.context.message.layout.layoutType,")")},e.of=function(t,n){return new e(t.dispatchId,n)},e}(),Rk=function(){function e(e,t,n,r,i,o){this.dispatchId=e,this.inAppMessage=t,this.message=n,this.user=r,this.decisionReason=i,this.properties=o}return e.prototype.toString=function(){return"InAppMessagePresentationContext(dispatchId=".concat(this.dispatchId,", inAppMessage=").concat(this.inAppMessage,", message=").concat(this.message,")")},e.of=function(t){return new e(t.dispatchId,t.inAppMessage,t.message,t.user,t.reason,t.properties)},e}(),Dk=function(){function e(e,t){this.presenter=e,this.recorder=t}return e.prototype.process=function(e){f.log.debug("InAppMessage Present Request: ".concat(e));var t=this.present(e);return this.recorder.record(e,t),f.log.debug("InAppMessage Present Response: ".concat(t)),t},e.prototype.present=function(e){var t=Rk.of(e);return this.presenter.present(t),Ok.of(e,t)},e}(),Lk=function(){function e(){}return e.prototype.isIdentifierChanged=function(e,t){var n=e[ne.USER],r=t[ne.USER];if(void 0!==n&&void 0!==r)return n!==r;var i=e[ne.DEVICE],o=t[ne.DEVICE];return void 0!==i&&void 0!==o&&i!==o},e}(),Nk=function(){function e(e,t){this.clock=e,this.scheduler=t}return Object.defineProperty(e.prototype,"listener",{get:function(){return this._listener},set:function(e){this._listener=e},enumerable:!1,configurable:!0}),e.prototype.schedule=function(e){var t=this,n=this.scheduler.schedule(e.delayMillis,function(){return t.delayCommand(e)});return new Fk(e,n)},e.prototype.delayCommand=function(e){var t,n=this.clock.currentMillis(),r=e.schedule.toRequest("DELAYED",n);null===(t=this.listener)||void 0===t||t.onSchedule(r)},e}(),Fk=function(){function e(e,t){this.delay=e,this.job=t}return e.prototype.cancel=function(){this.job.cancel(),f.log.debug("InAppMessageDelay cancelled: ".concat(this.delay))},e}(),zk=function(){function e(e,t){this.schedule=e,this.requestedAt=t}return Object.defineProperty(e.prototype,"delayMillis",{get:function(){return this.schedule.time.delayMillis(this.requestedAt)},enumerable:!1,configurable:!0}),e.from=function(t){return new e(t.schedule,t.requestedAt)},e.prototype.toString=function(){return"InAppMessageDelay(dispatchId=".concat(this.schedule.dispatchId,", requestedAt=").concat(this.requestedAt,")")},e}(),Uk=function(){function e(e,t,n){this.scheduler=e,this.tasks=t,this.storage=n}return e.prototype.registerAndDelay=function(e){return this.storage.set(e.schedule.inAppMessageKey,e.schedule.dispatchId,zk.from(e)),this.delay(e)},e.prototype.delay=function(e){var t=zk.from(e),n=this.scheduler.schedule(t);return this.tasks.set(t.schedule.dispatchId,n),f.log.debug("InAppMessage Delay started: dispatchId=".concat(e.schedule.dispatchId)),t},e.prototype.delete=function(e){var t,n,r=null!==(n=null===(t=this.tasks.get(e.schedule.dispatchId))||void 0===t?void 0:t.delay)&&void 0!==n?n:null;return r&&f.log.debug("InAppMessage Delay deleted: dispatchId=".concat(e.schedule.dispatchId)),this.tasks.delete(e.schedule.dispatchId),this.storage.remove(e.schedule.inAppMessageKey,e.schedule.dispatchId),r},e.prototype.cancelAll=function(){var e=Array.from(this.tasks.values());return e.forEach(function(e){return e.cancel()}),this.tasks.clear(),this.storage.clear(),f.log.debug("InAppMessage Delay clear."),e.map(function(e){return e.delay})},e}(),jk=function(){function e(e,t,n,r){this.dispatchId=e,this.inAppMessageKey=t,this.code=n,this.presentResponse=r}return e.prototype.toString=function(){return"InAppMessageDeliverResponse(dispatchId=".concat(this.dispatchId,", inAppMessageKey=").concat(this.inAppMessageKey,", code=").concat(this.code,")")},e.of=function(t,n,r){return void 0===r&&(r=null),new e(t.dispatchId,t.inAppMessageKey,n,r)},e}(),Bk=function(){function e(e,t,n,r,i,o,s){this.dispatchId=e,this.inAppMessage=t,this.message=n,this.user=r,this.requestedAt=i,this.reason=o,this.properties=s}return e.prototype.toString=function(){return"InAppMessagePresentRequest(dispatchId=".concat(this.dispatchId,", inAppMessage=").concat(this.inAppMessage,", user=").concat(this.user.identifiers,", requestedAt=").concat(this.requestedAt,", reason=").concat(this.reason,", properties=").concat(this.properties,")")},e.of=function(t,n,r,i,o){return new e(t.dispatchId,n,o.message,r,t.requestedAt,i.reason,a(a({},t.properties),o.properties))},e}(),Vk=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.workspace=t,o.user=n,o.inAppMessage=r,o.timestamp=i,o}return s(t,e),t.prototype.toString=function(){return"InAppMessageEligibilityRequest(type=".concat(this.key.type,", key=").concat(this.inAppMessage.key,")")},t}(Tk),Hk=function(){function e(e,t,n,r,i,o,s){this.workspaceFetcher=e,this.userManager=t,this.identifierChecker=n,this.layoutResolver=r,this.evaluateProcessor=i,this.presentProcessor=o,this.userDecorator=s}return e.prototype.response=function(e){try{return this.deliver(e)}catch(t){return f.log.error("Failed to process InAppMessageDeliver: ".concat(t)),jk.of(e,"EXCEPTION")}},e.prototype.process=function(e){f.log.debug("InAppMessage Deliver Request: ".concat(e));var t=this.response(e);return f.log.debug("InAppMessage Deliver Response: ".concat(t)),t},e.prototype.deliver=function(e){var t=this.workspaceFetcher.get();if(!t)return jk.of(e,"WORKSPACE_NOT_FOUND");var n=t.getInAppMessageOrNull(e.inAppMessageKey);if(!n)return jk.of(e,"IN_APP_MESSAGE_NOT_FOUND");var r=this.userDecorator.decorate(this.userManager.resolve());if(this.identifierChecker.isIdentifierChanged(e.identifiers,r.identifiers))return jk.of(e,"IDENTIFIER_CHANGED");var i=this.layoutResolver.resolve(t,n,r),o=new Vk(t,r,n,e.requestedAt),s=this.evaluateProcessor.process("DELIVER",o);if(!s.isEligible)return jk.of(e,"INELIGIBLE");var a=Bk.of(e,n,r,s,i),l=this.presentProcessor.process(a);return jk.of(e,"PRESENT",l)},e}(),$k=function(){function e(e){this.schedulers=e}return e.prototype.get=function(e){return h.requiredNotNullOrUndefined(this.schedulers.find(function(t){return t.supports(e)}),function(){return"Unsupported InAppMessageScheduleType[".concat(e,"]")})},e}(),Yk=function(){function e(e,t,n,r,i){this.dispatchId=e,this.inAppMessageKey=t,this.code=n,this.deliverResponse=r,this.delay=i}return e.prototype.toString=function(){return"InAppMessageScheduleResponse(dispatchId=".concat(this.dispatchId,", inAppMessageKey=").concat(this.inAppMessageKey,", code=").concat(this.code,")")},e.of=function(t,n,r,i){return void 0===r&&(r=null),void 0===i&&(i=null),new e(t.schedule.dispatchId,t.schedule.inAppMessageKey,n,r,i)},e}(),Gk=function(){function e(e,t,n,r,i,o){this.dispatchId=e,this.inAppMessageKey=t,this.identifiers=n,this.requestedAt=r,this.reason=i,this.properties=o}return e.of=function(t){var n=(new nn).add("$trigger_event_insert_id",t.schedule.eventBasedContext.insertId).build();return new e(t.schedule.dispatchId,t.schedule.inAppMessageKey,t.schedule.identifiers,t.requestedAt,t.schedule.reason,h.fromMap(n))},e.prototype.toString=function(){return"InAppMessageDeliverRequest(dispatchId=".concat(this.dispatchId,", inAppMessageKey=").concat(this.inAppMessageKey,", identifiers=").concat(this.identifiers,", requestedAt=").concat(this.requestedAt,", reason=").concat(this.reason)},e}(),qk=function(){function e(){}return e.prototype.schedule=function(e,t){switch(e){case"DELIVER":return this.deliver(t);case"DELAY":return this.delay(t);case"IGNORE":return this.ignore(t)}},e}(),Wk=function(e){function t(t,n){var r=e.call(this)||this;return r.deliverProcessor=t,r.delayManager=n,r}return s(t,e),t.prototype.supports=function(e){return"DELAYED"===e},t.prototype.deliver=function(e){var t=this.delayManager.delete(e);h.requiredNotNullOrUndefined(t,function(){return"InAppMessageDelay not found (inAppMessageKey=".concat(e.schedule.inAppMessageKey,")")});var n=Gk.of(e),r=this.deliverProcessor.process(n);return Yk.of(e,"DELIVER",r)},t.prototype.delay=function(e){var t=this.delayManager.delay(e);return Yk.of(e,"DELAY",null,t)},t.prototype.ignore=function(e){var t=this.delayManager.delete(e);return Yk.of(e,"IGNORE",null,t)},t}(qk),Kk=function(e){function t(t,n){var r=e.call(this)||this;return r.deliverProcessor=t,r.delayManager=n,r}return s(t,e),t.prototype.supports=function(e){return"TRIGGERED"===e},t.prototype.deliver=function(e){var t=Gk.of(e),n=this.deliverProcessor.process(t);return Yk.of(e,"DELIVER",n)},t.prototype.delay=function(e){var t=this.delayManager.registerAndDelay(e);return Yk.of(e,"DELAY",null,t)},t.prototype.ignore=function(e){return Yk.of(e,"IGNORE")},t}(qk),Zk=function(){function e(e,t){this.actionDeterminer=e,this.schedulerFactory=t}return e.prototype.process=function(e){f.log.debug("InAppMessage Schedule Request: ".concat(e));var t=this.schedule(e);return f.log.debug("InAppMessage Schedule Response: ".concat(t)),t},e.prototype.schedule=function(e){try{var t=this.actionDeterminer.determine(e);return this.schedulerFactory.get(e.scheduleType).schedule(t,e)}catch(n){return f.log.error("Failed to process InAppMessageSchedule: ".concat(n)),Yk.of(e,"EXCEPTION")}},e.prototype.onSchedule=function(e){this.process(e)},e}(),Jk=function(){function e(){this.DELIVER_DURATION_THRESHOLD_MILLIS=-1e4}return e.prototype.shouldIgnoreRequest=function(e){return"STORED"===e.scheduleType&&e.delayMillis<0},e.prototype.determineAction=function(e){var t=e.delayMillis;if(t>0)return"DELAY";if(t>=this.DELIVER_DURATION_THRESHOLD_MILLIS)return"DELIVER";if(t<this.DELIVER_DURATION_THRESHOLD_MILLIS)return"IGNORE";throw new Error("InAppMessageScheduleAction cannot be determined (key=".concat(e.schedule.inAppMessageKey,")"))},e.prototype.determine=function(e){if(this.shouldIgnoreRequest(e))return"IGNORE";var t=this.determineAction(e);return f.log.debug("InAppMessage ScheduleAction determined: action=".concat(t,", dispatchId=").concat(e.schedule.dispatchId)),t},e}(),Xk=function(){function e(e,t,n){this.inAppMessage=e,this.reason=t,this.event=n}return e.prototype.toString=function(){return"InAppMessageTrigger(inAppMessage=".concat(this.inAppMessage.toString(),", reason=").concat(this.reason,", insertId=").concat(this.event.insertId,", timestamp=").concat(this.event.timestamp,", event=").concat(this.event.event.key,")")},e}(),Qk=function(){function e(e,t,n){this.workspaceFetcher=e,this.eventMatcher=t,this.evaluateProcessor=n}return e.prototype.determine=function(e){var t=hE.isTrackEvent(e)?e:null;if(!t)return null;var n=this.workspaceFetcher.get();if(!n)return null;for(var r=0,i=n.getInAppMessages();r<i.length;r++){var o=i[r];if(this.eventMatcher.matches(n,o,t)){var s=this.evaluate(n,o,t);if(s.isEligible)return new Xk(o,s.reason,t)}}return null},e.prototype.evaluate=function(e,t,n){var r=new Vk(e,n.user,t,n.timestamp);return this.evaluateProcessor.process("TRIGGER",r)},e}(),eC=function(){function e(e){this.scheduleProcessor=e}return e.prototype.handle=function(e){var t=vk.create(e).toRequest("TRIGGERED",e.event.timestamp);this.scheduleProcessor.process(t)},e}(),tC=function(){function e(e,t){this.determiner=e,this.handler=t}return e.prototype.process=function(e){try{var t=this.determiner.determine(e);if(!t)return;f.log.debug("InAppMessage triggered: ".concat(t)),this.handler.handle(t)}catch(n){f.log.error("Failed to process InAppMessage event trigger: ".concat(n))}},e}(),nC=function(){function e(e,t){this.identifierChecker=e,this.delayManager=t}return e.prototype.process=function(e,t){try{this.identifierChecker.isIdentifierChanged(re(e),re(t))&&this.delayManager.cancelAll()}catch(n){f.log.error("Failed to reset InAppMessage: ".concat(n))}},e}(),rC=function(){function e(e){this.storage=e,this.storageKey="iam-delay"}return e.prototype.getDelayStorageItem=function(){var e=this.storage.getItem(this.storageKey);if(h.isNullOrUndefined(e))return null;try{return JSON.parse(e)}catch($C){return f.log.warn("Failed to get delay storage item: ".concat($C)),null}},e.prototype.get=function(e,t){var n,r,i=this.getDelayStorageItem();return h.isNullOrUndefined(i)?null:null!==(r=null===(n=i[e])||void 0===n?void 0:n.find(function(e){return e.schedule.dispatchId===t}))&&void 0!==r?r:null},e.prototype.set=function(e,t,n){var r,i,o=this.getDelayStorageItem();if(h.isNullOrUndefined(o))return f.log.debug("No delay storage item found. create new item"),void this.storage.setItem(this.storageKey,JSON.stringify((r={},r[e]=[n],r)));var s=null!==(i=o[e])&&void 0!==i?i:[];s.push(n),o[e]=s,this.storage.setItem(this.storageKey,JSON.stringify(o))},e.prototype.remove=function(e,t){var n=this.getDelayStorageItem(),r=null===n||void 0===n?void 0:n[e];h.isNullOrUndefined(n)||h.isNullOrUndefined(r)?f.log.debug("No delay storage item found for ".concat(e,". do nothing")):(n[e]=r.filter(function(e){return e.schedule.dispatchId!==t}),0===n[e].length&&delete n[e],this.storage.setItem(this.storageKey,JSON.stringify(n)))},e.prototype.values=function(){var e=this.getDelayStorageItem();return h.isNullOrUndefined(e)?(f.log.debug("No delay storage item found. do nothing"),[]):Object.values(e).flat()},e.prototype.clear=function(){this.storage.removeItem(this.storageKey)},e}(),iC=function(){function e(e){this.clock=e}return e.prototype.create=function(t,n){var r=this,i=this.clock.currentMillis(),o=new Array,s=this.createEvent(t,n,i,{});return s&&o.push(s),n.targetEvaluations.forEach(function(n){var s,a=((s={})[e.ROOT_TYPE]=t.key.type,s[e.ROOT_ID]=t.key.id,s),l=r.createEvent(t,n,i,a);l&&o.push(l)}),o},e.prototype.createEvent=function(t,n,r,i){var o;return n instanceof _E?(i[e.CONFIG_ID_PROPERTY_KEY]=null===(o=n.config)||void 0===o?void 0:o.id,i[e.EXPERIMENT_VERSION_KEY]=n.experiment.version,i[e.EXECUTION_VERSION_KEY]=n.experiment.executionVersion,hE.exposure(t.user,n,i,r)):n instanceof wE?hE.remoteConfig(t.user,n,a(a({},i),n.properties),r):null},e.ROOT_TYPE="$targetingRootType",e.ROOT_ID="$targetingRootId",e.CONFIG_ID_PROPERTY_KEY="$parameterConfigurationId",e.EXPERIMENT_VERSION_KEY="$experiment_version",e.EXECUTION_VERSION_KEY="$execution_version",e}(),oC=function(){function e(e,t){this.eventFactory=e,this.eventProcessor=t}return e.prototype.record=function(e,t){var n=this;this.eventFactory.create(e,t).forEach(function(e){n.eventProcessor.process(e)})},e}(),sC=function(){function e(e,t,n,r,i){this.reason=e,this.targetEvaluations=t,this.inAppMessage=n,this.isEligible=r,this.layoutEvaluation=i}return e.eligible=function(t,n,r){return e.of(t,n,r,!0)},e.ineligible=function(t,n,r){return e.of(t,n,r,!1)},e.of=function(t,n,r,i){return new e(String(r),n.targetEvaluations,t.inAppMessage,i,n.get(Ek))},e}(),aC=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return e.inAppMessage.supports("WEB")?n.evaluate(e,t):sC.ineligible(e,t,K.UNSUPPORTED_PLATFORM)},e}(),lC=function(){function e(e){this.userOverrideMatcher=e}return e.prototype.evaluate=function(e,t,n){return this.userOverrideMatcher.matches(e,t)?sC.eligible(e,t,K.OVERRIDDEN):n.evaluate(e,t)},e}(),cC=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return"DRAFT"===e.inAppMessage.status?sC.ineligible(e,t,K.IN_APP_MESSAGE_DRAFT):n.evaluate(e,t)},e}(),uC=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return"PAUSE"===e.inAppMessage.status?sC.ineligible(e,t,K.IN_APP_MESSAGE_PAUSED):n.evaluate(e,t)},e}(),hC=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return e.inAppMessage.period.within(e.timestamp)?n.evaluate(e,t):sC.ineligible(e,t,K.NOT_IN_IN_APP_MESSAGE_PERIOD)},e}(),dC=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return e.inAppMessage.timetable.within(e.timestamp)?n.evaluate(e,t):sC.ineligible(e,t,K.NOT_IN_IN_APP_MESSAGE_TIMETABLE)},e}(),pC=function(){function e(e){this.hiddenMatcher=e}return e.prototype.evaluate=function(e,t,n){return this.hiddenMatcher.matches(e,t)?sC.ineligible(e,t,K.IN_APP_MESSAGE_HIDDEN):n.evaluate(e,t)},e}(),fC=function(){function e(e){this.targetMatcher=e}return e.prototype.evaluate=function(e,t,n){return this.targetMatcher.matches(e,t)?n.evaluate(e,t):sC.ineligible(e,t,K.NOT_IN_IN_APP_MESSAGE_TARGET)},e}(),mC=function(){function e(e){this.frequencyCapMatcher=e}return e.prototype.evaluate=function(e,t,n){return this.frequencyCapMatcher.matches(e,t)?sC.ineligible(e,t,K.IN_APP_MESSAGE_FREQUENCY_CAPPED):n.evaluate(e,t)},e}(),gC=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return sC.eligible(e,t,K.IN_APP_MESSAGE_TARGET)},e}(),yC=function(){function e(e){this.layoutEvaluator=e}return e.prototype.evaluate=function(e,t,n){var r=Mk.of(e),i=this.layoutEvaluator.evaluate(r,EE.create());return t.set(Ek,i),n.evaluate(e,t)},e}(),vC=function(){function e(){}return e.prototype.matches=function(e,t){var n=this;return e.inAppMessage.targetContext.overrides.some(function(t){return n.isUserOverridden(e,t)})},e.prototype.isUserOverridden=function(e,t){var n=e.user.identifiers[t.identifierType];return!h.isNullOrUndefined(n)&&t.identifiers.includes(n)},e}(),_C=function(){function e(e){this.targetMatcher=e}return e.prototype.matches=function(e,t){var n=this,r=e.inAppMessage.targetContext.targets;return 0===r.length||r.some(function(r){return n.targetMatcher.matches(e,t,r)})},e}(),bC=function(){function e(e){this.storage=e}return e.prototype.matches=function(e,t){return this.storage.exist(e.inAppMessage,e.timestamp)},e}(),wC=function(){function e(e){this.storage=e}return e.prototype.matches=function(e,t){var n=e.inAppMessage,r=e.user,i=e.timestamp;return this.isFrequencyCapped(n,r,i)},e.prototype.isFrequencyCapped=function(e,t,n){if(!e.eventTrigger.frequencyCap)return!1;var r=this.createMatchContexts(e.eventTrigger.frequencyCap);if(0===r.length)return!1;for(var i=0,o=this.storage.get(e);i<o.length;i++)for(var s=o[i],a=0,l=r;a<l.length;a++){if(l[a].matches(t,n,s))return!0}return!1},e.prototype.createMatchContexts=function(e){for(var t=[],n=0,r=e.identifierCaps;n<r.length;n++){var i=r[n];t.push(new xC(new SC(i)))}return e.durationCap&&t.push(new xC(new EC(e.durationCap))),t},e}(),xC=function(){function e(e){this.matchCount=0,this.predicate=e}return e.prototype.matches=function(e,t,n){return this.predicate.matches(e,t,n)&&(this.matchCount+=1),this.matchCount>=this.predicate.thresholdCount},e}(),SC=function(){function e(e){this.identifierCap=e}return Object.defineProperty(e.prototype,"thresholdCount",{get:function(){return this.identifierCap.count},enumerable:!1,configurable:!0}),e.prototype.matches=function(e,t,n){var r=e.identifiers[this.identifierCap.identifierType];if(h.isNullOrUndefined(r))return!1;var i=n.identifiers[this.identifierCap.identifierType];return!h.isNullOrUndefined(i)&&r===i},e}(),EC=function(){function e(e){this.durationCap=e}return Object.defineProperty(e.prototype,"thresholdCount",{get:function(){return this.durationCap.count},enumerable:!1,configurable:!0}),e.prototype.matches=function(e,t,n){return t-n.timestamp<=this.durationCap.durationMillis},e}(),TC=function(){function e(e,t,n){this.layoutEvaluator=n;var r=PE.get("targetMatcher"),i=[new aC,new lC(new vC),new cC,new uC,new hC,new dC,new fC(new _C(r))],o=[new yC(this.layoutEvaluator)],s=[new mC(new wC(t)),new pC(new bC(e))],a=[new gC];this.triggerFlow=DE.of.apply(DE,u(u(u(u([],i,!1),o,!1),s,!1),a,!1)),this.deliverFlow=DE.of.apply(DE,u(u([],s,!1),a,!1)),this.deliverReEvaluateFlow=DE.of.apply(DE,u(u(u([],i,!1),s,!1),a,!1))}return e.prototype.getTriggerFlow=function(){return this.triggerFlow},e.prototype.getDeliverFlow=function(e){return e?this.deliverReEvaluateFlow:this.deliverFlow},e}(),MC=function(e){function t(t,n){var r=e.call(this)||this;return r.evaluationFlow=t,r.eventRecorder=n,r}return s(t,e),t.prototype.supports=function(e){return void 0!==e.inAppMessage},t.prototype.evaluateInternal=function(e,t){var n;return null!==(n=this.evaluationFlow.evaluate(e,t))&&void 0!==n?n:sC.ineligible(e,t,K.NOT_IN_IN_APP_MESSAGE_TARGET)},t.prototype.record=function(e,t){this.eventRecorder.record(e,t),t.isEligible||null===t.layoutEvaluation||this.eventRecorder.record(t.layoutEvaluation.request,t.layoutEvaluation)},t}(Sk),AC=function(){function e(e,t,n){this.core=e,this.flowFactory=t,this.eventRecorder=n}return e.prototype.process=function(e,t){var n=this.resolveFlow(e,t),r=new MC(n,this.eventRecorder);return this.core.inAppMessage(t,EE.create(),r)},e.prototype.resolveFlow=function(e,t){var n,r;return"TRIGGER"===e?this.flowFactory.getTriggerFlow():this.flowFactory.getDeliverFlow(null!==(r=null===(n=t.inAppMessage.evaluateContext)||void 0===n?void 0:n.atDeliverTime)&&void 0!==r&&r)},e}(),kC=function(){function e(e,t){this.core=e,this.layoutEvaluator=t}return e.prototype.resolve=function(e,t,n){var r=new Mk(e,n,t);return this.core.inAppMessage(r,EE.create(),this.layoutEvaluator)},e}(),CC=function(e){function t(t,n){var r=e.call(this)||this;return r.deliverProcessor=t,r.delayManager=n,r}return s(t,e),t.prototype.supports=function(e){return"STORED"===e},t.prototype.deliver=function(e){var t=this.delayManager.delete(e);h.requiredNotNullOrUndefined(t,function(){return"InAppMessageDelay not found (inAppMessageKey=".concat(e.schedule.inAppMessageKey,")")});var n=Gk.of(e),r=this.deliverProcessor.process(n);return Yk.of(e,"DELIVER",r,t)},t.prototype.delay=function(e){var t=this.delayManager.delay(e);return f.log.debug("StoredDelay is scheduled (inAppMessageKey=".concat(e.schedule.inAppMessageKey,", delayMillis=").concat(e.delayMillis.toLocaleString(),")")),Yk.of(e,"DELAY",null,t)},t.prototype.ignore=function(e){var t=this.delayManager.delete(e);return Yk.of(e,"IGNORE",null,t)},t}(qk),IC=function(){function e(e){this.sessionManager=e}return e.prototype.decorate=function(e){if(e.identifiers[ne.SESSION])return e;var t=this.sessionManager.currentSessionId;if(h.isNullOrUndefined(t))return e;var n=(new ie).addIdentifiers(e.identifiers).add(ne.SESSION,t).build();return a(a({},e),{identifiers:n})},e}(),PC=function(){function e(e){this.sessionUserDecorator=e}return e.prototype.decorate=function(e){var t=this.sessionUserDecorator.decorate(e.user);return e.copyWithUser(t)},e}(),OC=function(){function e(e,t){this.invocationProcessor=e,this.browserPropertyProvider=t}return e.prototype.onPageStarted=function(e,t){this.track(e,t)},e.prototype.onPageEnded=function(e,t){},e.prototype.track=function(e,t){var n,r={command:"track",parameters:{event:{key:hk.PAGE_VIEW_EVENT_KEY,properties:(n={},n[hk.PAGE_NAME_PROPERTY_KEY]=e.pageTitle,n)},user:void 0},browserProperties:this.browserPropertyProvider.getBrowserProperties(e)};this.invocationProcessor.process(r)},e}(),RC=function(e,t,n,r,i){this.sdkKey=e,this.config=t,this.invocationProcessor=n,this.browserPropertyProvider=r,this.lifecycleCompositeManager=i},DC={automaticScreenTracking:!1,automaticEngagementTracking:!1},LC=f.log,NC=(function(){function e(e){this.configResolver=e}e.prototype.config=function(){var e=this.configResolver.resolve();return a(a({},DC),e)}}(),function(){function e(e){this.hackleApp=e}e.prototype.supports=function(e){return"getWebViewConfig"in e&&h.isNotNullOrUndefined(e.getWebViewConfig)},e.prototype.resolveAutomaticEngagementTracking=function(e){return"boolean"!==typeof e.automaticEngagementTracking?DC.automaticEngagementTracking:e.automaticEngagementTracking},e.prototype.resolveAutomaticScreenTracking=function(e){return"boolean"!==typeof e.automaticScreenTracking?DC.automaticScreenTracking:e.automaticScreenTracking},e.prototype.resolve=function(){try{if(!this.supports(this.hackleApp))return DC;var e=this.hackleApp.getWebViewConfig(),t=JSON.parse(e);return{automaticEngagementTracking:this.resolveAutomaticEngagementTracking(t),automaticScreenTracking:this.resolveAutomaticScreenTracking(t)}}catch(n){return LC.warn("Failed to resolve web view config: ".concat(n)),DC}}}(),function(){function e(e,t){this.invocationProcessor=e,this.browserPropertyProvider=t}return e.prototype.onEngagement=function(e,t){this.track(e,t)},e.prototype.track=function(t,n){var r,i={command:"track",parameters:{event:{key:e.ENGAGEMENT_EVENT_KEY,properties:(r={},r[hk.PAGE_NAME_PROPERTY_KEY]=t.page.pageTitle,r[e.ENGAGEMENT_TIME_PROPERTY_KEY]=t.durationMillis,r)},user:void 0},browserProperties:this.browserPropertyProvider.getBrowserProperties(t.page)};this.invocationProcessor.process(i)},e.ENGAGEMENT_EVENT_KEY="$engagement",e.ENGAGEMENT_TIME_PROPERTY_KEY="$engagement_time_ms",e}()),FC=function(){function e(e,t,n,r){this.lifecycleManager=e,this.pageManager=t,this.engagementManager=n,this.lifecycleManager=e,this.pageManager=t,this.engagementManager=n,this.install("string"===typeof r?r:null)}return e.prototype.addPageListener=function(e){this.pageManager.addListener(e)},e.prototype.addEngagementListener=function(e){this.engagementManager.addListener(e)},e.prototype.addLifecycleListener=function(e){this.lifecycleManager.addListener(e)},e.prototype.initialize=function(){this.lifecycleManager.initialize()},e.prototype.install=function(e){this.pageManager.addListener(this.engagementManager),this.lifecycleManager.addListener(this.pageManager),this.lifecycleManager.addListener(this.engagementManager),this.lifecycleManager.install(e)},e}(),zC=(function(){function e(){this.operations=new Map}e.prototype.marketing=function(e){return this.operations.set("$marketing",e),this},e.prototype.information=function(e){return this.operations.set("$information",e),this},e.prototype.custom=function(e,t){return this.operations.set(e,t),this},e.prototype.build=function(){return new zC(this.operations)}}(),function(){function e(e){this.operations=e}return e.prototype.toEvent=function(e){var t=new gn;return this.operations.forEach(function(e,n){t.set(n,e)}),{key:e,properties:h.fromMap(this.operations)}},e.prototype.toRecord=function(){var e={};return this.operations.forEach(function(t,n){e[n]=t}),e},e}());!function(e){e.SUBSCRIBED="SUBSCRIBED",e.UNSUBSCRIBED="UNSUBSCRIBED",e.UNKNOWN="UNKNOWN"}(Ck||(Ck={}));!function(){function e(e,t){void 0===t&&(t=1e3);var n=new nk,r=new dk,i=new fk(r,t);this.compositeManager=new FC(n,r,i,e)}e.prototype.addPageListener=function(e){this.compositeManager.addPageListener(e)},e.prototype.addEngagementListener=function(e){this.compositeManager.addEngagementListener(e)},e.prototype.addLifecycleListener=function(e){this.compositeManager.addLifecycleListener(e)},e.prototype.initialize=function(){this.compositeManager.initialize()}}();var UC=f.log,jC=null,BC=function(e){function t(t,n,r,i,o){return e.call(this,t,n,r,i,o)||this}return s(t,e),t.prototype.create=function(e){var t=new Ln(this.invocationProcessor,this.browserPropertyProvider);return this.initialize(e),t},t.prototype.initialize=function(e){e.automaticScreenTracking&&this.lifecycleCompositeManager.addPageListener(new OC(this.invocationProcessor,this.browserPropertyProvider)),e.automaticEngagementTracking&&this.lifecycleCompositeManager.addEngagementListener(new NC(this.invocationProcessor,this.browserPropertyProvider)),this.lifecycleCompositeManager.initialize()},t}(RC),VC=function(e){function t(t,n,r,i,o){return e.call(this,t,n,r,i,o)||this}return s(t,e),t.prototype.create=function(e){var t=HC(this.sdkKey,this.config,this.lifecycleCompositeManager),n=new Ln(this.invocationProcessor,this.browserPropertyProvider),r=new Nn(t,n);return this.initialize(r),r},t.prototype.initialize=function(e){e.syncUser()},t}(RC);!function(){function e(e,t,n,r,i){var o;this.sdkKey=e,this.config=t,this.invocationProcessor=n,this.browserPropertyProvider=r,this.lifecycleCompositeManager=i,this.factories=((o={})[Rn.native]=new BC(this.sdkKey,this.config,this.invocationProcessor,this.browserPropertyProvider,this.lifecycleCompositeManager),o[Rn.web_view_wrapper]=new VC(this.sdkKey,this.config,this.invocationProcessor,this.browserPropertyProvider,this.lifecycleCompositeManager),o)}e.prototype.create=function(e,t){var n=this.factories[e];if(!n)throw new Error("Unsupported HackleAppMode: ".concat(e));return n.create(t)}}();function HC(e,t,n){var r,i,o=wA.sdk(e,t);if(jC)return UC.debug("use already exists hackleClient"),jC;var s=new Cn;s.initialize();var a=new mM,l=kn.getInstance({days:3650,isCrossSubdomain:!0,sameSite:t.sameSiteCookie,isSecure:t.secureCookie}),c=wA.isBeaconSupported(),u=UA.intercept(o,jA.create()),h=UA.intercept(o,VA.create()),d=u;c&&(d=h);var p=new xA,f=new SA(p,new EA("setTimeout"),wA.pollingIntervalMillis(t)),m=new ek(o,gM.postfix(a,"_".concat(e.slice(0,8)))),g=new kA(_M.clientFetch(t.sdkUrl,o.key),u),y=new OA(m,g);p.add(y);var v=new IA(_M.userTargets(t.sdkUrl),u),_=new CA(_M.userCohorts(t.sdkUrl),u),b=new cA(n.pageManager),w=new hM(gM.postfix(l,"_".concat(e))),x=w.getUser(),E=t.user||null,T=new uM(In(),w,v,_,b,n.pageManager,S.instance,x,E);p.add(T);var M=new fM(t.sessionTimeoutMillis,gM.postfix(l,"_".concat(e.slice(8))));T.addListener(M);var A=new HT(a,"".concat("hackle-repository-storage","_").concat(e),100),k=new DA(_M.clientDispatch(t.eventUrl),u),C=k;c&&(C=new DA(_M.beaconDispatch(t.eventUrl,o.key),h));var I=new LA(A,k),P=new RA(k,C,I),O=new sk([new lk(wA.dedupIntervalMillis(t)),new ck(wA.dedupIntervalMillis(t))]),R=new FA(P,100,new EA("setTimeout"),500),D=new gE(R,O,M,T),L=new IC(M),N=new PC(L);D.addDecorator(N);var F=new QA,z=new CE(new yM(l,"".concat("hackle-manual-override_ab","_").concat(e.slice(0,8)))),j=new CE(new yM(l,"".concat("hackle-manual-override_ff","_").concat(e.slice(0,8)))),B=new bM(gM.prefix(a,"".concat("hackle-iam-hide","_").concat(e.slice(0,8),"_"))),V=new jM(gM.prefix(a,"".concat("hackle-iam-impression","_").concat(e.slice(0,8),"_"))),H=new iC(S.instance),$=new oC(H,D),Y=FT.create(y,H,D,[z,j]),G=new gk(Y,T),q=new oA(new sA(gM.postfix(l,"_".concat(e.slice(0,8)))),b,Y,T),W=new mE(T,Y);M.addListener(q),M.addListener(W);var K=new IM(Y),Z=new wM([new xM,new SM(new JM),new EM(new JM),new TM(B,S.instance),new MM(new XM),new AM(new XM),new kM(new QM),new CM(new QM)]),J=new BM([new VM,new $M(Z),new HM]),X=new YM(S.instance,K,J),Q=new qM([new WM,new KM(X),new ZM(X)]),ee=new FM(_M.inAppMessageRenderer(t.cdnUrl,t.IAM_RENDERER_VERSION_HEADER)),te=new PM(NM.create(ee),X,Q),ne=PE.get("delegatingEvaluator"),re=new Ak(new xk(ne),new Ik,$),ie=new Pk(V),oe=new Dk(te,ie),se=new Lk,ae=new TC(B,V,re),le=new kC(Y,re),ce=new Nk(S.instance,new EA("setTimeout")),ue=new rC(gM.prefix(a,"".concat("hackle-campaign-delay","_").concat(e.slice(0,8),"_"))),he=new Uk(ce,new Map,ue),de=new AC(Y,ae,$),pe=new Hk(y,T,se,le,de,oe,L),fe=[new Wk(pe,he),new Kk(pe,he),new CC(pe,he)],me=new Zk(new Jk,new $k(fe));ce.listener=me;var ge=new GM(new zM(PE.get("targetMatcher"))),ye=new Qk(y,ge,de),ve=new eC(me),_e=new tC(ye,ve),be=new nC(se,he),we=new wk(me,ue,_e,be,R,S.instance);T.addListener(we);var xe=new _A(y);new vA(R,xe);var Se=new mk(Y,T);n.addEngagementListener(Se);var Ee=new hk(Y,T);t.automaticPageTracking&&n.addPageListener(Ee);var Te=new WA(PE.get("targetMatcher")),Me=new XA(l,"hackle-split-url-redirected",{days:U}),Ae=new qA(y,Te,Me,Y),ke=new ZA(new JA(b),new eA,Me,F),Ce=new YA(Ae,ke,T,Y);n.addPageListener(Ce);var Ie=new vM(Y,T,z,j),Pe=(null===(r=t.devTool)||void 0===r?void 0:r.userExplorer)&&"function"===typeof(null===(i=t.devTool)||void 0===i?void 0:i.userExplorer),Oe=t.devTool&&Pe?{manager:t.devTool,userExplorer:Ie}:void 0,Re=new Zt(_M.monitoring(t.monitoringUrl),u,d,new EA("setTimeout"),6e4);Ht.addRegistry(Re),n.addLifecycleListener(M),n.addLifecycleListener(s),n.addLifecycleListener(I),n.addLifecycleListener(D),n.addLifecycleListener(Re),f.start();var De=rk.create(6e4,1),Le=new En(Y,f,M,T,G,De,Ee,te,Oe);jC=Le;return(new UT).install(Y,T),function(){var e=Date.now(),t=T.currentUser,n=M.currentSessionId;($T(x,t)?M.startNewSessionIfNeeded(t,e):M.startNewSession(x,t,e))===n&&q.startNewCampaignIfNeeded(t,e)}(),Le.onReady(function(){t.autoOpenDevTool&&(t.devTool?Le.showUserExplorer():UC.error("DevTool is not provided")),n.initialize(),F.dispatchDoneEventIfNeeded(),we.loadDelaySchedule()}),Le}},7463(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,R(x);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,v(M),M=-1),f=!0;var o=p;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!C());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,T=null,M=-1,A=5,k=-1;function C(){return!(t.unstable_now()-k<A)}function I(){if(null!==T){var e=t.unstable_now();k=e;var n=!0;try{n=T(!0,e)}finally{n?S():(E=!1,T=null)}}else E=!1}if("function"===typeof _)S=function(){_(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=I,S=function(){O.postMessage(null)}}else S=function(){y(I,0)};function R(e){T=e,E||(E=!0,S())}function D(e,n){M=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(M),M=-1):g=!0,D(w,o-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,R(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8127(e,t,n){"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g&&n.g,e.exports=function(){"use strict";var e="3.7.8",t=e,n="function"===typeof Buffer,r="function"===typeof TextDecoder?new TextDecoder:void 0,i="function"===typeof TextEncoder?new TextEncoder:void 0,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=Array.prototype.slice.call(o),a=function(e){var t={};return e.forEach(function(e,n){return t[e]=n}),t}(s),l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,c=String.fromCharCode.bind(String),u="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){return new Uint8Array(Array.prototype.slice.call(e,0))},h=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,function(e){return"+"==e?"-":"_"})},d=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},p=function(e){for(var t,n,r,i,o="",a=e.length%3,l=0;l<e.length;){if((n=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255||(i=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");o+=s[(t=n<<16|r<<8|i)>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}return a?o.slice(0,a-3)+"===".substring(a):o},f="function"===typeof btoa?function(e){return btoa(e)}:n?function(e){return Buffer.from(e,"binary").toString("base64")}:p,m=n?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=4096,n=[],r=0,i=e.length;r<i;r+=t)n.push(c.apply(null,e.subarray(r,r+t)));return f(n.join(""))},g=function(e,t){return void 0===t&&(t=!1),t?h(m(e)):m(e)},y=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},v=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_=function(e){return e.replace(v,y)},b=n?function(e){return Buffer.from(e,"utf8").toString("base64")}:i?function(e){return m(i.encode(e))}:function(e){return f(_(e))},w=function(e,t){return void 0===t&&(t=!1),t?h(b(e)):b(e)},x=function(e){return w(e,!0)},S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,E=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c((t>>>10)+55296)+c(56320+(1023&t));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},T=function(e){return e.replace(S,E)},M=function(e){if(e=e.replace(/\s+/g,""),!l.test(e))throw new TypeError("malformed base64.");var t,n,r;e+="==".slice(2-(3&e.length));for(var i=[],o=0;o<e.length;)t=a[e.charAt(o++)]<<18|a[e.charAt(o++)]<<12|(n=a[e.charAt(o++)])<<6|(r=a[e.charAt(o++)]),64===n?i.push(c(t>>16&255)):64===r?i.push(c(t>>16&255,t>>8&255)):i.push(c(t>>16&255,t>>8&255,255&t));return i.join("")},A="function"===typeof atob?function(e){return atob(d(e))}:n?function(e){return Buffer.from(e,"base64").toString("binary")}:M,k=n?function(e){return u(Buffer.from(e,"base64"))}:function(e){return u(A(e).split("").map(function(e){return e.charCodeAt(0)}))},C=function(e){return k(P(e))},I=n?function(e){return Buffer.from(e,"base64").toString("utf8")}:r?function(e){return r.decode(k(e))}:function(e){return T(A(e))},P=function(e){return d(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}))},O=function(e){return I(P(e))},R=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},D=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,R(t))};e("fromBase64",function(){return O(this)}),e("toBase64",function(e){return w(this,e)}),e("toBase64URI",function(){return w(this,!0)}),e("toBase64URL",function(){return w(this,!0)}),e("toUint8Array",function(){return C(this)})},L=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,R(t))};e("toBase64",function(e){return g(this,e)}),e("toBase64URI",function(){return g(this,!0)}),e("toBase64URL",function(){return g(this,!0)})},N=function(){D(),L()},F={version:e,VERSION:t,atob:A,atobPolyfill:M,btoa:f,btoaPolyfill:p,fromBase64:O,toBase64:w,encode:w,encodeURI:x,encodeURL:x,utob:_,btou:T,decode:O,isValid:function(e){if("string"!==typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:g,toUint8Array:C,extendString:D,extendUint8Array:L,extendBuiltins:N,Base64:{}};return Object.keys(F).forEach(function(e){return F.Base64[e]=F[e]}),F}()},8227(e,t,n){"use strict";n.d(t,{A:()=>i});const r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const i=function(e){return"string"===typeof e&&r.test(e)}},8448(e,t,n){"use strict";n.d(t,{j:()=>i});var r=n(12295);const i=function(){let e=[],t=0,n=e=>{e()},i=e=>{e()};const o=i=>{t?e.push(i):(0,r.G6)(()=>{n(i)})},s=()=>{const t=e;e=[],t.length&&(0,r.G6)(()=>{i(()=>{t.forEach(e=>{n(e)})})})};return{batch:e=>{let n;t++;try{n=e()}finally{t--,t||s()}return n},batchCalls:e=>(...t)=>{o(()=>{e(...t)})},schedule:o,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{i=e}}}()},8861(e,t,n){"use strict";n.d(t,{A:()=>T});var r=n(96540),i=n(34164),o=n(21362),s=n(17437),a=n(67695),l=n(39241),c=n(13202),u=n(39407),h=n(1321),d=n(96148),p=n(32520);function f(e){return(0,p.Ay)("MuiCircularProgress",e)}(0,d.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var m=n(74848);const g=44,y=s.i7`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,v=s.i7`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,_="string"!==typeof y?s.AH`
        animation: ${y} 1.4s linear infinite;
      `:null,b="string"!==typeof v?s.AH`
        animation: ${v} 1.4s ease-in-out infinite;
      `:null,w=(0,a.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,u.A)(n.color)}`]]}})((0,l.A)(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:_||{animation:`${y} 1.4s linear infinite`}},...Object.entries(e.palette).filter((0,h.A)()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),x=(0,a.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),S=(0,a.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,u.A)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((0,l.A)(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink,style:b||{animation:`${v} 1.4s ease-in-out infinite`}}]}))),E=(0,a.Ay)("circle",{name:"MuiCircularProgress",slot:"Track"})((0,l.A)(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),T=r.forwardRef(function(e,t){const n=(0,c.b)({props:e,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:a=!1,enableTrackSlot:l=!1,size:h=40,style:d,thickness:p=3.6,value:y=0,variant:v="indeterminate",..._}=n,b={...n,color:s,disableShrink:a,size:h,thickness:p,value:y,variant:v,enableTrackSlot:l},T=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,s={root:["root",n,`color${(0,u.A)(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${(0,u.A)(n)}`,i&&"circleDisableShrink"]};return(0,o.A)(s,f,t)})(b),M={},A={},k={};if("determinate"===v){const e=2*Math.PI*((g-p)/2);M.strokeDasharray=e.toFixed(3),k["aria-valuenow"]=Math.round(y),M.strokeDashoffset=`${((100-y)/100*e).toFixed(3)}px`,A.transform="rotate(-90deg)"}return(0,m.jsx)(w,{className:(0,i.A)(T.root,r),style:{width:h,height:h,...A,...d},ownerState:b,ref:t,role:"progressbar",...k,..._,children:(0,m.jsxs)(x,{className:T.svg,ownerState:b,viewBox:"22 22 44 44",children:[l?(0,m.jsx)(E,{className:T.track,ownerState:b,cx:g,cy:g,r:(g-p)/2,fill:"none",strokeWidth:p,"aria-hidden":"true"}):null,(0,m.jsx)(S,{className:T.circle,style:M,ownerState:b,cx:g,cy:g,r:(g-p)/2,fill:"none",strokeWidth:p})]})})})},8906(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}()},9123(e,t,n){"use strict";n.d(t,{Qw:()=>o,Wk:()=>a,hY:()=>s});var r=n(18845);let i;function o(e){if(void 0!==i)return i?i(e):e();const t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=r.O;return t in n&&"function"===typeof n[t]?(i=n[t],i(e)):(i=null,e())}function s(){return o(()=>Math.random())}function a(){return o(()=>Date.now())}},9421(e,t,n){"use strict";n.d(t,{I:()=>s});var r=n(1522),i=n(12295),o=n(58024);function s(e,t,n){const s=(0,i.vh)(e,t,n);return(0,o.t)(s,r.$)}},9600(e,t,n){"use strict";n.d(t,{$X:()=>c,GR:()=>d,M6:()=>h,eJ:()=>a,gO:()=>u});var r=n(46403),i=n(9123),o=n(18845);let s;function a(e=function(){const e=o.O;return e.crypto||e.msCrypto}()){try{if(e?.randomUUID)return(0,i.Qw)(()=>e.randomUUID()).replace(/-/g,"")}catch{}return s||(s=[1e7]+1e3+4e3+8e3+1e11),s.replace(/[018]/g,e=>(e^(16*(0,i.hY)()&15)>>e/4).toString(16))}function l(e){return e.exception?.values?.[0]}function c(e){const{message:t,event_id:n}=e;if(t)return t;const r=l(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function u(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function h(e,t){const n=l(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r?.data,...t.data};n.mechanism.data=e}}function d(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{(0,r.my)(e,"__sentry_captured__",!0)}catch{}return!1}},9957(e,t,n){"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(66743);e.exports=o.call(r,i)},10076(e){"use strict";e.exports=Function.prototype.call},10644(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},11002(e){"use strict";e.exports=Function.prototype.apply},12295(e,t,n){"use strict";n.d(t,{Cp:()=>y,F$:()=>m,G6:()=>M,GR:()=>h,MK:()=>p,Od:()=>g,S$:()=>r,Zw:()=>o,_D:()=>l,b_:()=>d,f8:()=>b,gn:()=>s,iv:()=>a,j3:()=>c,jY:()=>A,lQ:()=>i,nJ:()=>f,pl:()=>k,vh:()=>u,yy:()=>T});const r="undefined"===typeof window||"Deno"in window;function i(){}function o(e,t){return"function"===typeof e?e(t):e}function s(e){return"number"===typeof e&&e>=0&&e!==1/0}function a(e,t){return e.filter(e=>!t.includes(e))}function l(e,t,n){const r=e.slice(0);return r[t]=n,r}function c(e,t){return Math.max(e+(t||0)-Date.now(),0)}function u(e,t,n){return E(e)?"function"===typeof t?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function h(e,t,n){return E(e)?"function"===typeof t?{...n,mutationKey:e,mutationFn:t}:{...t,mutationKey:e}:"function"===typeof e?{...t,mutationFn:e}:{...e}}function d(e,t,n){return E(e)?[{...t,queryKey:e},n]:[e||{},t]}function p(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(E(s))if(r){if(t.queryHash!==m(s,t.options))return!1}else if(!y(t.queryKey,s))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!==typeof a||t.isStale()===a)&&(("undefined"===typeof i||i===t.state.fetchStatus)&&!(o&&!o(t)))}function f(e,t){const{exact:n,fetching:r,predicate:i,mutationKey:o}=e;if(E(o)){if(!t.options.mutationKey)return!1;if(n){if(g(t.options.mutationKey)!==g(o))return!1}else if(!y(t.options.mutationKey,o))return!1}return("boolean"!==typeof r||"loading"===t.state.status===r)&&!(i&&!i(t))}function m(e,t){return((null==t?void 0:t.queryKeyHashFn)||g)(e)}function g(e){return JSON.stringify(e,(e,t)=>x(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function y(e,t){return v(e,t)}function v(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some(n=>!v(e[n],t[n])))}function _(e,t,n=0){if(e===t)return e;if(n>500)return t;const r=w(e)&&w(t);if(r||x(e)&&x(t)){const i=r?e.length:Object.keys(e).length,o=r?t:Object.keys(t),s=o.length,a=r?[]:{};let l=0;for(let c=0;c<s;c++){const i=r?c:o[c];a[i]=_(e[i],t[i],n+1),a[i]===e[i]&&l++}return i===s&&l===i?e:a}return t}function b(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function w(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function x(e){if(!S(e))return!1;const t=e.constructor;if("undefined"===typeof t)return!0;const n=t.prototype;return!!S(n)&&!!n.hasOwnProperty("isPrototypeOf")}function S(e){return"[object Object]"===Object.prototype.toString.call(e)}function E(e){return Array.isArray(e)}function T(e){return new Promise(t=>{setTimeout(t,e)})}function M(e){T(0).then(e)}function A(){if("function"===typeof AbortController)return new AbortController}function k(e,t,n){return null!=n.isDataEqual&&n.isDataEqual(e,t)?e:"function"===typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?_(e,t):t}},12375(e,t,n){"use strict";function r(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function i(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach(n=>{"undefined"===typeof e[n]?e[n]=t[n]:r(t[n])&&r(e[n])&&Object.keys(t[n]).length>0&&i(e[n],t[n])})}n.d(t,{a:()=>l,g:()=>s});const o={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function s(){const e="undefined"!==typeof document?document:{};return i(e,o),e}const a={document:o,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function l(){const e="undefined"!==typeof window?window:{};return i(e,a),e}},12434(e,t,n){"use strict";n.d(t,{A:()=>S});var r=n(28562),i=n(41917);const o=(0,r.A)(i.A,"DataView");var s=n(68335);const a=(0,r.A)(i.A,"Promise");const l=(0,r.A)(i.A,"Set");const c=(0,r.A)(i.A,"WeakMap");var u=n(2383),h=n(81121),d="[object Map]",p="[object Promise]",f="[object Set]",m="[object WeakMap]",g="[object DataView]",y=(0,h.A)(o),v=(0,h.A)(s.A),_=(0,h.A)(a),b=(0,h.A)(l),w=(0,h.A)(c),x=u.A;(o&&x(new o(new ArrayBuffer(1)))!=g||s.A&&x(new s.A)!=d||a&&x(a.resolve())!=p||l&&x(new l)!=f||c&&x(new c)!=m)&&(x=function(e){var t=(0,u.A)(e),n="[object Object]"==t?e.constructor:void 0,r=n?(0,h.A)(n):"";if(r)switch(r){case y:return g;case v:return d;case _:return p;case b:return f;case w:return m}return t});const S=x},13144(e,t,n){"use strict";var r=n(66743),i=n(11002),o=n(10076),s=n(47119);e.exports=s||r.call(o,i)},13153(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(){return[]}},13202(e,t,n){"use strict";n.d(t,{b:()=>i});n(96540);var r=n(92155);n(74848);function i(e){return(0,r.b)(e)}},13235(e,t,n){"use strict";n.d(t,{AS:()=>c,aj:()=>u,s5:()=>l});var r=n(26674),i=n(19282),o=n(51685);const s={},a={};function l(e,t){s[e]=s[e]||[],s[e].push(t)}function c(e,t){if(!a[e]){a[e]=!0;try{t()}catch(n){r.T&&i.Yz.error(`Error while instrumenting ${e}`,n)}}}function u(e,t){const n=e&&s[e];if(n)for(const s of n)try{s(t)}catch(a){r.T&&i.Yz.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${(0,o.qQ)(s)}\nError:`,a)}}},13293(e,t,n){"use strict";n.d(t,{o4:()=>z});const r="3.7.8",i=r,o="function"===typeof Buffer,s="function"===typeof TextDecoder?new TextDecoder:void 0,a="function"===typeof TextEncoder?new TextEncoder:void 0,l=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(e=>{let t={};return e.forEach((e,n)=>t[e]=n),t})(l),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,h=String.fromCharCode.bind(String),d="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),p=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),f=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),m=e=>{let t,n,r,i,o="";const s=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|i,o+=l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}return s?o.slice(0,s-3)+"===".substring(s):o},g="function"===typeof btoa?e=>btoa(e):o?e=>Buffer.from(e,"binary").toString("base64"):m,y=o?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,r=e.length;n<r;n+=4096)t.push(h.apply(null,e.subarray(n,n+4096)));return g(t.join(""))},v=(e,t=!1)=>t?p(y(e)):y(e),_=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?h(192|t>>>6)+h(128|63&t):h(224|t>>>12&15)+h(128|t>>>6&63)+h(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return h(240|t>>>18&7)+h(128|t>>>12&63)+h(128|t>>>6&63)+h(128|63&t)},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,w=e=>e.replace(b,_),x=o?e=>Buffer.from(e,"utf8").toString("base64"):a?e=>y(a.encode(e)):e=>g(w(e)),S=(e,t=!1)=>t?p(x(e)):x(e),E=e=>S(e,!0),T=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,M=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return h((t>>>10)+55296)+h(56320+(1023&t));case 3:return h((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return h((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},A=e=>e.replace(T,M),k=e=>{if(e=e.replace(/\s+/g,""),!u.test(e))throw new TypeError("malformed base64.");let t,n,r;e+="==".slice(2-(3&e.length));let i=[];for(let o=0;o<e.length;)t=c[e.charAt(o++)]<<18|c[e.charAt(o++)]<<12|(n=c[e.charAt(o++)])<<6|(r=c[e.charAt(o++)]),64===n?i.push(h(t>>16&255)):64===r?i.push(h(t>>16&255,t>>8&255)):i.push(h(t>>16&255,t>>8&255,255&t));return i.join("")},C="function"===typeof atob?e=>atob(f(e)):o?e=>Buffer.from(e,"base64").toString("binary"):k,I=o?e=>d(Buffer.from(e,"base64")):e=>d(C(e).split("").map(e=>e.charCodeAt(0))),P=e=>I(R(e)),O=o?e=>Buffer.from(e,"base64").toString("utf8"):s?e=>s.decode(I(e)):e=>A(C(e)),R=e=>f(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),D=e=>O(R(e)),L=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),N=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,L(t));e("fromBase64",function(){return D(this)}),e("toBase64",function(e){return S(this,e)}),e("toBase64URI",function(){return S(this,!0)}),e("toBase64URL",function(){return S(this,!0)}),e("toUint8Array",function(){return P(this)})},F=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,L(t));e("toBase64",function(e){return v(this,e)}),e("toBase64URI",function(){return v(this,!0)}),e("toBase64URL",function(){return v(this,!0)})},z={version:r,VERSION:i,atob:C,atobPolyfill:k,btoa:g,btoaPolyfill:m,fromBase64:D,toBase64:S,encode:S,encodeURI:E,encodeURL:E,utob:w,btou:A,decode:D,isValid:e=>{if("string"!==typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:v,toUint8Array:P,extendString:N,extendUint8Array:F,extendBuiltins:()=>{N(),F()}}},13674(e,t,n){"use strict";n.d(t,{Ay:()=>g});var r=n(98587),i=n(25540),o=n(96540),s=n(40961);const a=!1,l=o.createContext(null);var c="unmounted",u="exited",h="entering",d="entered",p="exiting",f=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=u,r.appearStatus=h):i=d:i=t.unmountOnExit||t.mountOnEnter?c:u,r.state={status:i},r.nextCallback=null,r}(0,i.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===c?{status:u}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==h&&n!==d&&(t=h):n!==h&&n!==d||(t=p)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===h){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:c})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],l=i[1],c=this.getTimeouts(),u=r?c.appear:c.enter;!e&&!n||a?this.safeSetState({status:d},function(){t.props.onEntered(o)}):(this.props.onEnter(o,l),this.safeSetState({status:h},function(){t.props.onEntering(o,l),t.onTransitionEnd(u,function(){t.safeSetState({status:d},function(){t.props.onEntered(o,l)})})}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!a?(this.props.onExit(r),this.safeSetState({status:p},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:u},function(){e.props.onExited(r)})})})):this.safeSetState({status:u},function(){e.props.onExited(r)})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===c)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(l.Provider,{value:null},"function"===typeof n?n(e,i):o.cloneElement(o.Children.only(n),i))},t}(o.Component);function m(){}f.contextType=l,f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},f.UNMOUNTED=c,f.EXITED=u,f.ENTERING=h,f.ENTERED=d,f.EXITING=p;const g=f},14426(e,t,n){"use strict";n.d(t,{q:()=>l});var r=n(12295),i=n(1522),o=n(97502);class s extends i.${constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,o.PL)()},t)}getOptimisticResult(e){return e.behavior=(0,o.PL)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,r,i,s,a,l;const{state:c}=e,u=super.createResult(e,t),{isFetching:h,isRefetching:d}=u,p=h&&"forward"===(null==(n=c.fetchMeta)||null==(r=n.fetchMore)?void 0:r.direction),f=h&&"backward"===(null==(i=c.fetchMeta)||null==(s=i.fetchMore)?void 0:s.direction);return{...u,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,o.rB)(t,null==(a=c.data)?void 0:a.pages),hasPreviousPage:(0,o.RQ)(t,null==(l=c.data)?void 0:l.pages),isFetchingNextPage:p,isFetchingPreviousPage:f,isRefetching:d&&!p&&!f}}}var a=n(58024);function l(e,t,n){const i=(0,r.vh)(e,t,n);return(0,a.t)(i,s)}},14453(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(97271);const i=(0,n(40367).A)(Object.keys,Object);var o=Object.prototype.hasOwnProperty;const s=function(e){if(!(0,r.A)(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},14484(e,t,n){"use strict";function r(e){var t=e.match(/^var\((.*)\)$/);return t?t[1]:e}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};for(var o in e){var s=e[o],a=[...n,o];"string"===typeof s||"number"===typeof s||null==s?r[o]=t(s,a):"object"!==typeof s||Array.isArray(s)?console.warn('Skipping invalid key "'.concat(a.join("."),'". Should be a string, number, null or object. Received: "').concat(Array.isArray(s)?"Array":typeof s,'"')):r[o]=i(s,t,a)}return r}function o(e,t){var n={};if("object"===typeof t){var o=e;i(t,(e,t)=>{if(null!=e){var i=function(e,t){var n=e;for(var r of t){if(!(r in n))throw new Error("Path ".concat(t.join(" -> ")," does not exist in object"));n=n[r]}return n}(o,t);n[r(i)]=String(e)}})}else{var s=e;for(var a in s){var l=s[a];null!=l&&(n[r(a)]=l)}}return Object.defineProperty(n,"toString",{value:function(){return Object.keys(this).map(e=>"".concat(e,":").concat(this[e])).join(";")},writable:!1}),n}n.d(t,{D:()=>o})},14803(e,t,n){"use strict";var r=n(58859),i=n(69675),o=function(e,t,n){for(var r,i=e;null!=(r=i.next);i=r)if(r.key===t)return i.next=r.next,n||(r.next=e.next,e.next=r),r};e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new i("Side channel does not contain "+r(e))},delete:function(t){var n=e&&e.next,r=function(e,t){if(e)return o(e,t,!0)}(e,t);return r&&n&&n===r&&(e=void 0),!!r},get:function(t){return function(e,t){if(e){var n=o(e,t);return n&&n.value}}(e,t)},has:function(t){return function(e,t){return!!e&&!!o(e,t)}(e,t)},set:function(t,n){e||(e={next:void 0}),function(e,t,n){var r=o(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(e,t,n)}};return t}},14910(e,t,n){"use strict";n.d(t,{j:()=>r});const r=n(18845).O},15647(e,t,n){"use strict";n.d(t,{A:()=>r});const r=(0,n(40367).A)(Object.getPrototypeOf,Object)},16033(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(e,t){return"W"===t?e+"\u5468":e+"\u65e5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5ddddAh\u70b9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},meridiem:function(e,t){var n=100*e+t;return n<600?"\u51cc\u6668":n<900?"\u65e9\u4e0a":n<1100?"\u4e0a\u5348":n<1300?"\u4e2d\u5348":n<1800?"\u4e0b\u5348":"\u665a\u4e0a"}};return n.default.locale(r,null,!0),r}(n(74353))},16426(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},16443(e){e.exports=function(){"use strict";var e={},t={};function n(n,r,i){if(t[n]=i,"index"===n){var o="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",s={};return t.shared(s),t.index(e,s),"undefined"!==typeof window&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),e}}return n("shared",["exports"],function(e){function t(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function n(e,t){this.x=e,this.y=t}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i,o;"function"==typeof SuppressedError&&SuppressedError,n.prototype={clone(){return new n(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround(e,t){const n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:n},n.convert=function(e){if(e instanceof n)return e;if(Array.isArray(e))return new n(+e[0],+e[1]);if(void 0!==e.x&&void 0!==e.y)return new n(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};var s=function(){if(o)return i;function e(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}return o=1,i=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var s=0,a=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},i}(),a=r(s);let l,c;function u(){return null==l&&(l="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),l}function h(){if(null==c&&(c=!1,u())){const e=5,t=new OffscreenCanvas(e,e).getContext("2d",{willReadFrequently:!0});if(t){for(let r=0;r<e*e;r++){const n=4*r;t.fillStyle=`rgb(${n},${n+1},${n+2})`,t.fillRect(r%e,Math.floor(r/e),1,1)}const n=t.getImageData(0,0,e,e).data;for(let t=0;t<e*e*4;t++)if(t%4!=3&&n[t]!==t){c=!0;break}}}return c||!1}var d=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array;function f(){var e=new p(9);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function m(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function g(){var e=new p(3);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function y(e){return Math.hypot(e[0],e[1],e[2])}function v(e,t,n){var r=new p(3);return r[0]=e,r[1]=t,r[2]=n,r}function _(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function b(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function w(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2];return e[0]=i*l-o*a,e[1]=o*s-r*l,e[2]=r*a-i*s,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var x,S=y;function E(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}function T(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function M(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var o=Math.sin(t),s=Math.cos(t),a=Math.sin(n),l=Math.cos(n),c=Math.sin(r),u=Math.cos(r);return e[0]=o*l*u-s*a*c,e[1]=s*a*u+o*l*c,e[2]=s*l*c-o*a*u,e[3]=s*l*u+o*a*c,e}function A(){var e=new p(2);return p!=Float32Array&&(e[0]=0,e[1]=0),e}function k(e,t){var n=new p(2);return n[0]=e,n[1]=t,n}g(),x=new p(4),p!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0,x[3]=0),g(),v(1,0,0),v(0,1,0),T(),T(),f(),A();const C=8192;function I(e,t,n){return t*(C/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}function P(e,t){return(e%t+t)%t}function O(e,t,n){return e*(1-n)+t*n}function R(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function D(e,t,n,r){const i=new a(e,t,n,r);return e=>i.solve(e)}const L=D(.25,.1,.25,1);function N(e,t,n){return Math.min(n,Math.max(t,e))}function F(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function z(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let U=1;function j(e,t,n){const r={};for(const i in e)r[i]=t.call(this,e[i],i,e);return r}function B(e,t,n){const r={};for(const i in e)t.call(this,e[i],i,e)&&(r[i]=e[i]);return r}function V(e){return Array.isArray(e)?e.map(V):"object"==typeof e&&e?j(e,V):e}const H={};function $(e){H[e]||("undefined"!=typeof console&&console.warn(e),H[e]=!0)}function Y(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function G(e){return"undefined"!=typeof WorkerGlobalScope&&void 0!==e&&e instanceof WorkerGlobalScope}let q=null;function W(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Z(e,n,r,i,o){return t(this,void 0,void 0,function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const t=new VideoFrame(e,{timestamp:0});try{const s=null==t?void 0:t.format;if(!s||!s.startsWith("BGR")&&!s.startsWith("RGB"))throw new Error(`Unrecognized format ${s}`);const a=s.startsWith("BGR"),l=new Uint8ClampedArray(i*o*4);if(yield t.copyTo(l,function(e,t,n,r,i){const o=4*Math.max(-t,0),s=(Math.max(0,n)-n)*r*4+o,a=4*r,l=Math.max(0,t),c=Math.max(0,n);return{rect:{x:l,y:c,width:Math.min(e.width,t+r)-l,height:Math.min(e.height,n+i)-c},layout:[{offset:s,stride:a}]}}(e,n,r,i,o)),a)for(let e=0;e<l.length;e+=4){const t=l[e];l[e]=l[e+2],l[e+2]=t}return l}finally{t.close()}})}let J,X;function Q(e,t,n,r){return e.addEventListener(t,n,r),{unsubscribe:()=>{e.removeEventListener(t,n,r)}}}function ee(e){return e*Math.PI/180}function te(e){return e/Math.PI*180}const ne={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},re={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ie="AbortError";function oe(){return new Error(ie)}const se={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ae(e){return se.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}const le="global-dispatcher";class ce extends Error{constructor(e,t,n,r){super(`AJAXError: ${t} (${e}): ${n}`),this.status=e,this.statusText=t,this.url=n,this.body=r}}const ue=()=>G(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,he=function(e,n){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){const t=ae(e.url);if(t)return t(e,n);if(G(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,targetMapId:le},n)}if(!(/^file:/.test(r=e.url)||/^file:/.test(ue())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(e,n){return t(this,void 0,void 0,function*(){const t=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:ue(),signal:n.signal});let r,i;"json"!==e.type||t.headers.has("Accept")||t.headers.set("Accept","application/json");try{r=yield fetch(t)}catch(t){throw new ce(0,t.message,e.url,new Blob)}if(!r.ok){const t=yield r.blob();throw new ce(r.status,r.statusText,e.url,t)}i="arrayBuffer"===e.type||"image"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text();const o=yield i;if(n.signal.aborted)throw oe();return{data:o,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}})}(e,n);if(G(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,mustQueue:!0,targetMapId:le},n)}var r;return function(e,t){return new Promise((n,r)=>{var i;const o=new XMLHttpRequest;o.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(o.responseType="arraybuffer");for(const t in e.headers)o.setRequestHeader(t,e.headers[t]);"json"===e.type&&(o.responseType="text",(null===(i=e.headers)||void 0===i?void 0:i.Accept)||o.setRequestHeader("Accept","application/json")),o.withCredentials="include"===e.credentials,o.onerror=()=>{r(new Error(o.statusText))},o.onload=()=>{if(!t.signal.aborted)if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){let t=o.response;if("json"===e.type)try{t=JSON.parse(o.response)}catch(e){return void r(e)}n({data:t,cacheControl:o.getResponseHeader("Cache-Control"),expires:o.getResponseHeader("Expires")})}else{const t=new Blob([o.response],{type:o.getResponseHeader("Content-Type")});r(new ce(o.status,o.statusText,e.url,t))}},t.signal.addEventListener("abort",()=>{o.abort(),r(oe())}),o.send(e.body)})}(e,n)};function de(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function pe(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function fe(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class me{constructor(e,t={}){z(this,t),this.type=e}}class ge extends me{constructor(e,t={}){super("error",z({error:e},t))}}class ye{on(e,t){return this._listeners=this._listeners||{},pe(e,t,this._listeners),{unsubscribe:()=>{this.off(e,t)}}}off(e,t){return fe(e,t,this._listeners),fe(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},pe(e,t,this._oneTimeListeners),this):new Promise(t=>this.once(e,t))}fire(e,t){"string"==typeof e&&(e=new me(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)fe(n,o,this._oneTimeListeners),o.call(this,e);const i=this._eventedParent;i&&(z(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof ge&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const _e=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function be(e,t){const n={};for(const r in e)"ref"!==r&&(n[r]=e[r]);return _e.forEach(e=>{e in t&&(n[e]=t[e])}),n}function we(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!we(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!we(e[n],t[n]))return!1;return!0}return e===t}function xe(e,t){e.push(t)}function Se(e,t,n){xe(n,{command:"addSource",args:[e,t[e]]})}function Ee(e,t,n){xe(t,{command:"removeSource",args:[e]}),n[e]=!0}function Te(e,t,n,r){Ee(e,n,r),Se(e,t,n)}function Me(e,t,n){let r;for(r in e[n])if(Object.prototype.hasOwnProperty.call(e[n],r)&&"data"!==r&&!we(e[n][r],t[n][r]))return!1;for(r in t[n])if(Object.prototype.hasOwnProperty.call(t[n],r)&&"data"!==r&&!we(e[n][r],t[n][r]))return!1;return!0}function Ae(e,t,n,r,i,o){e=e||{},t=t||{};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(we(e[s],t[s])||n.push({command:o,args:[r,s,t[s],i]}));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&!Object.prototype.hasOwnProperty.call(e,s)&&(we(e[s],t[s])||n.push({command:o,args:[r,s,t[s],i]}))}function ke(e){return e.id}function Ce(e,t){return e[t.id]=t,e}class Ie{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function Pe(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}class Oe extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Re{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[n,r]of t)this.bindings[n]=r}concat(e){return new Re(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const De={kind:"null"},Le={kind:"number"},Ne={kind:"string"},Fe={kind:"boolean"},ze={kind:"color"},Ue={kind:"projectionDefinition"},je={kind:"object"},Be={kind:"value"},Ve={kind:"collator"},He={kind:"formatted"},$e={kind:"padding"},Ye={kind:"colorArray"},Ge={kind:"numberArray"},qe={kind:"resolvedImage"},We={kind:"variableAnchorOffsetCollection"};function Ke(e,t){return{kind:"array",itemType:e,N:t}}function Ze(e){if("array"===e.kind){const t=Ze(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const Je=[De,Le,Ne,Fe,ze,Ue,He,je,Ke(Be),$e,Ge,Ye,qe,We];function Xe(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Xe(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of Je)if(!Xe(e,t))return null}return`Expected ${Ze(e)} but found ${Ze(t)} instead.`}function Qe(e,t){return t.some(t=>t.kind===e.kind)}function et(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}function tt(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const nt=.96422,rt=.82521,it=4/29,ot=6/29,st=3*ot*ot,at=ot*ot*ot,lt=Math.PI/180,ct=180/Math.PI;function ut(e){return(e%=360)<0&&(e+=360),e}function ht([e,t,n,r]){let i,o;const s=pt((.2225045*(e=dt(e))+.7168786*(t=dt(t))+.0606169*(n=dt(n)))/1);e===t&&t===n?i=o=s:(i=pt((.4360747*e+.3850649*t+.1430804*n)/nt),o=pt((.0139322*e+.0971045*t+.7141733*n)/rt));const a=116*s-16;return[a<0?0:a,500*(i-s),200*(s-o),r]}function dt(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pt(e){return e>at?Math.pow(e,1/3):e/st+it}function ft([e,t,n,r]){let i=(e+16)/116,o=isNaN(t)?i:i+t/500,s=isNaN(n)?i:i-n/200;return i=1*gt(i),o=nt*gt(o),s=rt*gt(s),[mt(3.1338561*o-1.6168667*i-.4906146*s),mt(-.9787684*o+1.9161415*i+.033454*s),mt(.0719453*o-.2289914*i+1.4052427*s),r]}function mt(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function gt(e){return e>ot?e*e*e:st*(e-it)}const yt=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function vt(e,t){return yt(e,t)?e[t]:void 0}function _t(e){return parseInt(e.padEnd(2,e),16)/255}function bt(e,t){return wt(t?e/100:e,0,1)}function wt(e,t,n){return Math.min(Math.max(t,e),n)}function xt(e){return!e.some(Number.isNaN)}const St={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Et(e,t,n){return e+n*(t-e)}function Tt(e,t,n){return e.map((e,r)=>Et(e,t[r],n))}class Mt{constructor(e,t,n,r=1,i=!0){this.r=e,this.g=t,this.b=n,this.a=r,i||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,n,r]))}static parse(e){if(e instanceof Mt)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=vt(St,e);if(t){const[e,n,r]=t;return[e/255,n/255,r/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let n=1;return[_t(e.slice(n,n+=t)),_t(e.slice(n,n+=t)),_t(e.slice(n,n+=t)),_t(e.slice(n,n+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,n,r,i,o,s,a,l,c,u,h,d]=t,p=[i||" ",a||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[r,s,c].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[wt(+n/t,0,1),wt(+o/t,0,1),wt(+l/t,0,1),h?bt(+h,d):1];if(xt(e))return e}}return}}const n=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(n){const[e,t,r,i,o,s,a,l,c]=n,u=[r||" ",o||" ",a].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const e=[+t,wt(+i,0,100),wt(+s,0,100),l?bt(+l,c):1];if(xt(e))return function([e,t,n,r]){function i(r){const i=(r+e/30)%12,o=t*Math.min(n,1-n);return n-o*Math.max(-1,Math.min(i-3,9-i,1))}return e=ut(e),t/=100,n/=100,[i(0),i(8),i(4),r]}(e)}}}(e);return t?new Mt(...t,!1):void 0}get rgb(){const{r:e,g:t,b:n,a:r}=this,i=r||1/0;return this.overwriteGetter("rgb",[e/i,t/i,n/i,r])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,n,r,i]=ht(e),o=Math.sqrt(n*n+r*r);return[Math.round(1e4*o)?ut(Math.atan2(r,n)*ct):NaN,o,t,i]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ht(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,n,r]=this.rgb;return`rgba(${[e,t,n].map(e=>Math.round(255*e)).join(",")},${r})`}static interpolate(e,t,n,r="rgb"){switch(r){case"rgb":{const[r,i,o,s]=Tt(e.rgb,t.rgb,n);return new Mt(r,i,o,s,!1)}case"hcl":{const[r,i,o,s]=e.hcl,[a,l,c,u]=t.hcl;let h,d;if(isNaN(r)||isNaN(a))isNaN(r)?isNaN(a)?h=NaN:(h=a,1!==o&&0!==o||(d=l)):(h=r,1!==c&&0!==c||(d=i));else{let e=a-r;a>r&&e>180?e-=360:a<r&&r-a>180&&(e+=360),h=r+n*e}const[p,f,m,g]=function([e,t,n,r]){return e=isNaN(e)?0:e*lt,ft([n,Math.cos(e)*t,Math.sin(e)*t,r])}([h,null!=d?d:Et(i,l,n),Et(o,c,n),Et(s,u,n)]);return new Mt(p,f,m,g,!1)}case"lab":{const[r,i,o,s]=ft(Tt(e.lab,t.lab,n));return new Mt(r,i,o,s,!1)}}}}Mt.black=new Mt(0,0,0,1),Mt.white=new Mt(1,1,1,1),Mt.transparent=new Mt(0,0,0,0),Mt.red=new Mt(1,0,0,1);class At{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const kt=["bottom","center","top"];class Ct{constructor(e,t,n,r,i,o){this.text=e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i,this.verticalAlign=o}}class It{constructor(e){this.sections=e}static fromString(e){return new It([new Ct(e,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof It?e:It.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class Pt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Pt)return e;if("number"==typeof e)return new Pt([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Pt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){return new Pt(Tt(e.values,t.values,n))}}class Ot{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ot)return e;if("number"==typeof e)return new Ot([e]);if(Array.isArray(e)){for(const t of e)if("number"!=typeof t)return;return new Ot(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){return new Ot(Tt(e.values,t.values,n))}}class Rt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Rt)return e;if("string"==typeof e){const t=Mt.parse(e);if(!t)return;return new Rt([t])}if(!Array.isArray(e))return;const t=[];for(const n of e){if("string"!=typeof n)return;const e=Mt.parse(n);if(!e)return;t.push(e)}return new Rt(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n,r="rgb"){const i=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let o=0;o<e.values.length;o++)i.push(Mt.interpolate(e.values[o],t.values[o],n,r));return new Rt(i)}}class Dt extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Lt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Nt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Nt)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const n=e[t],r=e[t+1];if("string"!=typeof n||!Lt.has(n))return;if(!Array.isArray(r)||2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1])return}return new Nt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){const r=e.values,i=t.values;if(r.length!==i.length)throw new Dt(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const o=[];for(let s=0;s<r.length;s+=2){if(r[s]!==i[s])throw new Dt(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${r[s]}, to[${s}]: ${i[s]}`);o.push(r[s]);const[e,t]=r[s+1],[a,l]=i[s+1];o.push([Et(e,a,n),Et(t,l,n)])}return new Nt(o)}}class Ft{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ft({name:e,available:!1}):null}}class zt{constructor(e,t,n){this.from=e,this.to=t,this.transition=n}static interpolate(e,t,n){return new zt(e,t,n)}static parse(e){return e instanceof zt?e:Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]?new zt(e[0],e[1],e[2]):"object"==typeof e&&"string"==typeof e.from&&"string"==typeof e.to&&"number"==typeof e.transition?new zt(e.from,e.to,e.transition):"string"==typeof e?new zt(e,e,1):void 0}}function Ut(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function jt(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof zt||e instanceof Mt||e instanceof At||e instanceof It||e instanceof Pt||e instanceof Ot||e instanceof Rt||e instanceof Nt||e instanceof Ft)return!0;if(Array.isArray(e)){for(const t of e)if(!jt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!jt(e[t]))return!1;return!0}return!1}function Bt(e){if(null===e)return De;if("string"==typeof e)return Ne;if("boolean"==typeof e)return Fe;if("number"==typeof e)return Le;if(e instanceof Mt)return ze;if(e instanceof zt)return Ue;if(e instanceof At)return Ve;if(e instanceof It)return He;if(e instanceof Pt)return $e;if(e instanceof Ot)return Ge;if(e instanceof Rt)return Ye;if(e instanceof Nt)return We;if(e instanceof Ft)return qe;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const e=Bt(r);if(n){if(n===e)continue;n=Be;break}n=e}return Ke(n||Be,t)}return je}function Vt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Mt||e instanceof zt||e instanceof It||e instanceof Pt||e instanceof Ot||e instanceof Rt||e instanceof Nt||e instanceof Ft?e.toString():JSON.stringify(e)}class Ht{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!jt(e[1]))return t.error("invalid value");const n=e[1];let r=Bt(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ht(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const $t={string:Ne,number:Le,boolean:Fe,object:je};class Yt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in $t)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=$t[n],r++}else i=Be;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=Ke(i,o)}else{if(!$t[i])throw new Error(`Types doesn't contain name = ${i}`);n=$t[i]}const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,Be);if(!n)return null;o.push(n)}return new Yt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!Xe(this.type,Bt(n)))return n;if(t===this.args.length-1)throw new Dt(`Expected value to be of type ${Ze(this.type)}, but found ${Ze(Bt(n))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Gt={"to-boolean":Fe,"to-color":ze,"to-number":Le,"to-string":Ne};class qt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(!Gt[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=Gt[n],i=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,Be);if(!n)return null;i.push(n)}return new qt(r,i)}evaluate(e){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(e));case"color":{let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof Mt)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Ut(t[0],t[1],t[2],t[3]),!n))return new Mt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Dt(n||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const n of this.args){t=n.evaluate(e);const r=Pt.parse(t);if(r)return r}throw new Dt(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const n of this.args){t=n.evaluate(e);const r=Ot.parse(t);if(r)return r}throw new Dt(`Could not parse numberArray from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const n of this.args){t=n.evaluate(e);const r=Rt.parse(t);if(r)return r}throw new Dt(`Could not parse colorArray from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const n of this.args){t=n.evaluate(e);const r=Nt.parse(t);if(r)return r}throw new Dt(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Dt(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return It.fromString(Vt(this.args[0].evaluate(e)));case"resolvedImage":return Ft.fromString(Vt(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Vt(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Wt=["Unknown","Point","LineString","Polygon"];class Kt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Wt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Mt.parse(e),this._parseColorCache.set(e,t)),t}}class Zt{constructor(e,t,n=[],r,i=new Re,o=[]){this.registry=e,this.path=n,this.key=n.map(e=>`[${e}]`).join(""),this.scope=i,this.errors=o,this.expectedType=r,this._isConstant=t}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new Yt(t,[e]):"coerce"===n?new qt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind){if("projectionDefinition"===e.kind&&["string","array"].includes(i.kind)||["color","formatted","resolvedImage"].includes(e.kind)&&["value","string"].includes(i.kind)||["padding","numberArray"].includes(e.kind)&&["value","number","array"].includes(i.kind)||"colorArray"===e.kind&&["value","string","array"].includes(i.kind)||"variableAnchorOffsetCollection"===e.kind&&["value","array"].includes(i.kind))r=n(r,e,t.typeAnnotation||"coerce");else if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof Ht)&&"resolvedImage"!==r.type.kind&&this._isConstant(r)){const t=new Kt;try{r=new Ht(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new Zt(this.registry,this._isConstant,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new Oe(n,e))}checkSubtype(e,t){const n=Xe(e,t);return n&&this.error(n),n}}class Jt{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let i=1;i<e.length-1;i+=2){const r=e[i];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=t.parse(e[i+1],i+1);if(!o)return null;n.push([r,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new Jt(n,r):null}outputDefined(){return this.result.outputDefined()}}class Xt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new Xt(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Qt{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Le),r=t.parse(e[2],2,Ke(t.expectedType||Be));return n&&r?new Qt(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Dt(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new Dt(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new Dt(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class en{constructor(e,t){this.type=Fe,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Be),r=t.parse(e[2],2,Be);return n&&r?Qe(n.type,[Fe,Ne,Le,De,Be])?new en(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ze(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!et(t,["boolean","string","number","null"]))throw new Dt(`Expected first argument to be of type boolean, string, number or null, but found ${Ze(Bt(t))} instead.`);if(!et(n,["string","array"]))throw new Dt(`Expected second argument to be of type array or string, but found ${Ze(Bt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class tn{constructor(e,t,n){this.type=Le,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Be),r=t.parse(e[2],2,Be);if(!n||!r)return null;if(!Qe(n.type,[Fe,Ne,Le,De,Be]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ze(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,Le);return i?new tn(n,r,i):null}return new tn(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!et(t,["boolean","string","number","null"]))throw new Dt(`Expected first argument to be of type boolean, string, number or null, but found ${Ze(Bt(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),et(n,["string"])){const e=n.indexOf(t,r);return-1===e?-1:[...n.slice(0,e)].length}if(et(n,["array"]))return n.indexOf(t,r);throw new Dt(`Expected second argument to be of type array or string, but found ${Ze(Bt(n))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class nn{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let l=2;l<e.length-1;l+=2){let s=e[l];const a=e[l+1];Array.isArray(s)||(s=[s]);const c=t.concat(l);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,Bt(e)))return null}else n=Bt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(a,l,r);if(!u)return null;r=r||u.type,o.push(u)}const s=t.parse(e[1],1,Be);if(!s)return null;const a=t.parse(e[e.length-1],e.length-1,r);return a?"value"!==s.type.kind&&t.concat(1).checkSubtype(n,s.type)?null:new nn(n,r,s,i,o,a):null}evaluate(e){const t=this.input.evaluate(e);return(Bt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class rn{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const i=t.parse(e[o],o,Fe);if(!i)return null;const s=t.parse(e[o+1],o+1,n);if(!s)return null;r.push([i,s]),n=n||s.type}const i=t.parse(e[e.length-1],e.length-1,n);if(!i)return null;if(!n)throw new Error("Can't infer output type");return new rn(n,r,i)}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class on{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Be),r=t.parse(e[2],2,Le);if(!n||!r)return null;if(!Qe(n.type,[Ke(Be),Ne,Be]))return t.error(`Expected first argument to be of type array or string, but found ${Ze(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,Le);return i?new on(n.type,n,r,i):null}return new on(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),et(t,["string"]))return[...t].slice(n,r).join("");if(et(t,["array"]))return t.slice(n,r);throw new Dt(`Expected first argument to be of type array or string, but found ${Ze(Bt(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function sn(e,t){const n=e.length-1;let r,i,o=0,s=n,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),r=e[a],i=e[a+1],r<=t){if(a===n||t<i)return a;o=a+1}else{if(!(r>t))throw new Dt("Input is not a number.");s=a-1}return 0}class an{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,Le);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],s=e[o+1],a=o,l=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const c=t.parse(s,l,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new an(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[sn(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ln(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cn,un,hn=function(){if(un)return cn;function e(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}return un=1,cn=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var s=0,a=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},cn}(),dn=ln(hn);class pn{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,s]of i)this.labels.push(o),this.outputs.push(s)}static interpolationFactor(e,t,n,r){let i=0;if("exponential"===e.name)i=fn(t,e.base,n,r);else if("linear"===e.name)i=fn(t,1,n,r);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new dn(o[0],o[1],o[2],o[3]).solve(fn(t,1,n,r))}return i}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,Le),!i)return null;const s=[];let a=null;"interpolate-hcl"!==n&&"interpolate-lab"!==n||t.expectedType==Ye?t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType):a=ze;for(let l=0;l<o.length;l+=2){const e=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(s.length&&s[s.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(n,i,a);if(!c)return null;a=a||c.type,s.push([e,c])}return tt(a,Le)||tt(a,Ue)||tt(a,ze)||tt(a,$e)||tt(a,Ge)||tt(a,Ye)||tt(a,We)||tt(a,Ke(Le))?new pn(a,n,r,i,s):t.error(`Type ${Ze(a)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=sn(t,r),s=pn.interpolationFactor(this.interpolation,r,t[o],t[o+1]),a=n[o].evaluate(e),l=n[o+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Et(a,l,s);case"color":return Mt.interpolate(a,l,s);case"padding":return Pt.interpolate(a,l,s);case"colorArray":return Rt.interpolate(a,l,s);case"numberArray":return Ot.interpolate(a,l,s);case"variableAnchorOffsetCollection":return Nt.interpolate(a,l,s);case"array":return Tt(a,l,s);case"projectionDefinition":return zt.interpolate(a,l,s)}case"interpolate-hcl":switch(this.type.kind){case"color":return Mt.interpolate(a,l,s,"hcl");case"colorArray":return Rt.interpolate(a,l,s,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Mt.interpolate(a,l,s,"lab");case"colorArray":return Rt.interpolate(a,l,s,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function fn(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}const mn={color:Mt.interpolate,number:Et,padding:Pt.interpolate,numberArray:Ot.interpolate,colorArray:Rt.interpolate,variableAnchorOffsetCollection:Nt.interpolate,array:Tt};class gn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const s of e.slice(1)){const e=t.parse(s,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}if(!n)throw new Error("No output type");const o=r&&i.some(e=>Xe(r,e.type));return new gn(o?Be:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(e),n&&n instanceof Ft&&!n.available&&(t||(t=n.name),n=null,r===this.args.length&&(n=t)),null!==n)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function yn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function vn(e,t,n,r){return 0===r.compare(t,n)}function _n(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=Fe,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,Be);if(!o)return null;if(!yn(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${Ze(o.type)}'.`);let s=t.parse(e[2],2,Be);if(!s)return null;if(!yn(n,s.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${Ze(s.type)}'.`);if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return t.error(`Cannot compare types '${Ze(o.type)}' and '${Ze(s.type)}'.`);r&&("value"===o.type.kind&&"value"!==s.type.kind?o=new Yt(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new Yt(o.type,[s])));let a=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return t.error("Cannot use collator to compare non-string types.");if(a=t.parse(e[3],3,Ve),!a)return null}return new i(o,s,a)}evaluate(i){const o=this.lhs.evaluate(i),s=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=Bt(o),n=Bt(s);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new Dt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=Bt(o),n=Bt(s);if("string"!==e.kind||"string"!==n.kind)return t(i,o,s)}return this.collator?n(i,o,s,this.collator.evaluate(i)):t(i,o,s)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const bn=_n("==",function(e,t,n){return t===n},vn),wn=_n("!=",function(e,t,n){return t!==n},function(e,t,n,r){return!vn(0,t,n,r)}),xn=_n("<",function(e,t,n){return t<n},function(e,t,n,r){return r.compare(t,n)<0}),Sn=_n(">",function(e,t,n){return t>n},function(e,t,n,r){return r.compare(t,n)>0}),En=_n("<=",function(e,t,n){return t<=n},function(e,t,n,r){return r.compare(t,n)<=0}),Tn=_n(">=",function(e,t,n){return t>=n},function(e,t,n,r){return r.compare(t,n)>=0});class Mn{constructor(e,t,n){this.type=Ve,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Fe);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Fe);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,Ne),!o)?null:new Mn(r,i,o)}evaluate(e){return new At(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class An{constructor(e,t,n,r,i){this.type=Ne,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Le);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,Ne),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,Ne),!o))return null;let s=null;if(r["min-fraction-digits"]&&(s=t.parse(r["min-fraction-digits"],1,Le),!s))return null;let a=null;return r["max-fraction-digits"]&&(a=t.parse(r["max-fraction-digits"],1,Le),!a)?null:new An(n,i,o,s,a)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class kn{constructor(e){this.type=He,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,Le),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,Ke(Ne)),!o))return null;let s=null;if(n["text-color"]&&(s=t.parse(n["text-color"],1,ze),!s))return null;let a=null;if(n["vertical-align"]){if("string"==typeof n["vertical-align"]&&!kt.includes(n["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${n["vertical-align"]}' instead.`);if(a=t.parse(n["vertical-align"],1,Ne),!a)return null}const l=r[r.length-1];l.scale=e,l.font=o,l.textColor=s,l.verticalAlign=a}else{const n=t.parse(e[o],1,Be);if(!n)return null;const s=n.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null,verticalAlign:null})}}return new kn(r)}evaluate(e){return new It(this.sections.map(t=>{const n=t.content.evaluate(e);return Bt(n)===qe?new Ct("",n,null,null,null,t.verticalAlign?t.verticalAlign.evaluate(e):null):new Ct(Vt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null,t.verticalAlign?t.verticalAlign.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class Cn{constructor(e){this.type=qe,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Ne);return n?new Cn(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Ft.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class In{constructor(e){this.type=Le,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${Ze(n.type)} instead.`):new In(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new Dt(`Expected value to be of type string or array, but found ${Ze(Bt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Pn=8192;function On(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*Pn),Math.round(r*i*Pn)]}function Rn(e,t){const n=Math.pow(2,t.z);return[(i=(e[0]/Pn+t.x)/n,360*i-180),(r=(e[1]/Pn+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90)];var r,i}function Dn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Ln(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Nn(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],s=e[1]-n[1];return r*s-o*i==0&&r*o<=0&&i*s<=0}function Fn(e,t,n,r){return 0!=(i=[r[0]-n[0],r[1]-n[1]])[0]*(o=[t[0]-e[0],t[1]-e[1]])[1]-i[1]*o[0]&&!(!Hn(e,t,n,r)||!Hn(n,r,e,t));var i,o}function zn(e,t,n){for(const r of n)for(let n=0;n<r.length-1;++n)if(Fn(e,t,r[n],r[n+1]))return!0;return!1}function Un(e,t,n=!1){let r=!1;for(const a of t)for(let t=0;t<a.length-1;t++){if(Nn(e,a[t],a[t+1]))return n;(o=a[t])[1]>(i=e)[1]!=(s=a[t+1])[1]>i[1]&&i[0]<(s[0]-o[0])*(i[1]-o[1])/(s[1]-o[1])+o[0]&&(r=!r)}var i,o,s;return r}function jn(e,t){for(const n of t)if(Un(e,n))return!0;return!1}function Bn(e,t){for(const n of e)if(!Un(n,t))return!1;for(let n=0;n<e.length-1;++n)if(zn(e[n],e[n+1],t))return!1;return!0}function Vn(e,t){for(const n of t)if(Bn(e,n))return!0;return!1}function Hn(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],s=(e[0]-n[0])*o-i*(e[1]-n[1]),a=(t[0]-n[0])*o-i*(t[1]-n[1]);return s>0&&a<0||s<0&&a>0}function $n(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const s=On(e[i][r],n);Dn(t,s),o.push(s)}r.push(o)}return r}function Yn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=$n(e[i],t,n);r.push(o)}return r}function Gn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}Dn(t,e)}function qn(e,t,n,r){const i=Math.pow(2,r.z)*Pn,o=[r.x*Pn,r.y*Pn],s=[];for(const a of e)for(const e of a){const r=[e.x+o[0],e.y+o[1]];Gn(r,t,n,i),s.push(r)}return s}function Wn(e,t,n,r){const i=Math.pow(2,r.z)*Pn,o=[r.x*Pn,r.y*Pn],s=[];for(const l of e){const e=[];for(const n of l){const r=[n.x+o[0],n.y+o[1]];Dn(t,r),e.push(r)}s.push(e)}if(t[2]-t[0]<=i/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const e of s)for(const r of e)Gn(r,t,n,i)}var a;return s}class Kn{constructor(e,t){this.type=Fe,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(jt(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const n of t.features){const{type:t,coordinates:r}=n.geometry;"Polygon"===t&&e.push(r),"MultiPolygon"===t&&e.push(...r)}if(e.length)return new Kn(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new Kn(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new Kn(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=$n(t.coordinates,r,i),s=qn(e.geometry(),n,r,i);if(!Ln(n,r))return!1;for(const e of s)if(!Un(e,o))return!1}if("MultiPolygon"===t.type){const o=Yn(t.coordinates,r,i),s=qn(e.geometry(),n,r,i);if(!Ln(n,r))return!1;for(const e of s)if(!jn(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=$n(t.coordinates,r,i),s=Wn(e.geometry(),n,r,i);if(!Ln(n,r))return!1;for(const e of s)if(!Bn(e,o))return!1}if("MultiPolygon"===t.type){const o=Yn(t.coordinates,r,i),s=Wn(e.geometry(),n,r,i);if(!Ln(n,r))return!1;for(const e of s)if(!Vn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Zn=class{constructor(e=[],t=(e,t)=>e<t?-1:e>t?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1);const o=r+1;if(o<this.length&&n(t[o],t[r])<0&&(r=o),n(t[r],i)>=0)break;t[e]=t[r],e=r}t[e]=i}};function Jn(e,t,n=0,r=e.length-1,i=Qn){for(;r>n;){if(r-n>600){const o=r-n+1,s=t-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);Jn(e,t,Math.max(n,Math.floor(t-s*l/o+c)),Math.min(r,Math.floor(t+(o-s)*l/o+c)),i)}const o=e[t];let s=n,a=r;for(Xn(e,n,t),i(e[r],o)>0&&Xn(e,n,r);s<a;){for(Xn(e,s,a),s++,a--;i(e[s],o)<0;)s++;for(;i(e[a],o)>0;)a--}0===i(e[n],o)?Xn(e,n,a):(a++,Xn(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function Xn(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Qn(e,t){return e<t?-1:e>t?1:0}function er(e,t){if(e.length<=1)return[e];const n=[];let r,i;for(const o of e){const e=nr(o);0!==e&&(o.area=Math.abs(e),void 0===i&&(i=e<0),i===e<0?(r&&n.push(r),r=[o]):r.push(o))}if(r&&n.push(r),t>1)for(let o=0;o<n.length;o++)n[o].length<=t||(Jn(n[o],t,1,n[o].length-1,tr),n[o]=n[o].slice(0,t));return n}function tr(e,t){return t.area-e.area}function nr(e){let t=0;for(let n,r,i=0,o=e.length,s=o-1;i<o;s=i++)n=e[i],r=e[s],t+=(r.x-n.x)*(n.y+r.y);return t}const rr=1/298.257223563,ir=rr*(2-rr),or=Math.PI/180;class sr{constructor(e){const t=6378.137*or*1e3,n=Math.cos(e*or),r=1/(1-ir*(1-n*n)),i=Math.sqrt(r);this.kx=t*i*n,this.ky=t*i*r*(1-ir)}distance(e,t){const n=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(n*n+r*r)}pointOnLine(e,t){let n,r,i,o,s=1/0;for(let a=0;a<e.length-1;a++){let l=e[a][0],c=e[a][1],u=this.wrap(e[a+1][0]-l)*this.kx,h=(e[a+1][1]-c)*this.ky,d=0;0===u&&0===h||(d=(this.wrap(t[0]-l)*this.kx*u+(t[1]-c)*this.ky*h)/(u*u+h*h),d>1?(l=e[a+1][0],c=e[a+1][1]):d>0&&(l+=u/this.kx*d,c+=h/this.ky*d)),u=this.wrap(t[0]-l)*this.kx,h=(t[1]-c)*this.ky;const p=u*u+h*h;p<s&&(s=p,n=l,r=c,i=a,o=d)}return{point:[n,r],index:i,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function ar(e,t){return t[0]-e[0]}function lr(e){return e[1]-e[0]+1}function cr(e,t){return e[1]>=e[0]&&e[1]<t}function ur(e,t){if(e[0]>e[1])return[null,null];const n=lr(e);if(t){if(2===n)return[e,null];const t=Math.floor(n/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===n)return[e,null];const r=Math.floor(n/2)-1;return[[e[0],e[0]+r],[e[0]+r+1,e[1]]]}function hr(e,t){if(!cr(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let r=t[0];r<=t[1];++r)Dn(n,e[r]);return n}function dr(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const e of n)Dn(t,e);return t}function pr(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function fr(e,t,n){if(!pr(e)||!pr(t))return NaN;let r=0,i=0;return e[2]<t[0]&&(r=t[0]-e[2]),e[0]>t[2]&&(r=e[0]-t[2]),e[1]>t[3]&&(i=e[1]-t[3]),e[3]<t[1]&&(i=t[1]-e[3]),n.distance([0,0],[r,i])}function mr(e,t,n){const r=n.pointOnLine(t,e);return n.distance(e,r.point)}function gr(e,t,n,r,i){const o=Math.min(mr(e,[n,r],i),mr(t,[n,r],i)),s=Math.min(mr(n,[e,t],i),mr(r,[e,t],i));return Math.min(o,s)}function yr(e,t,n,r,i){if(!cr(t,e.length)||!cr(r,n.length))return 1/0;let o=1/0;for(let s=t[0];s<t[1];++s){const t=e[s],a=e[s+1];for(let e=r[0];e<r[1];++e){const r=n[e],s=n[e+1];if(Fn(t,a,r,s))return 0;o=Math.min(o,gr(t,a,r,s,i))}}return o}function vr(e,t,n,r,i){if(!cr(t,e.length)||!cr(r,n.length))return NaN;let o=1/0;for(let s=t[0];s<=t[1];++s)for(let t=r[0];t<=r[1];++t)if(o=Math.min(o,i.distance(e[s],n[t])),0===o)return o;return o}function _r(e,t,n){if(Un(e,t,!0))return 0;let r=1/0;for(const i of t){const t=i[0],o=i[i.length-1];if(t!==o&&(r=Math.min(r,mr(e,[o,t],n)),0===r))return r;const s=n.pointOnLine(i,e);if(r=Math.min(r,n.distance(e,s.point)),0===r)return r}return r}function br(e,t,n,r){if(!cr(t,e.length))return NaN;for(let o=t[0];o<=t[1];++o)if(Un(e[o],n,!0))return 0;let i=1/0;for(let o=t[0];o<t[1];++o){const t=e[o],s=e[o+1];for(const e of n)for(let n=0,o=e.length,a=o-1;n<o;a=n++){const o=e[a],l=e[n];if(Fn(t,s,o,l))return 0;i=Math.min(i,gr(t,s,o,l,r))}}return i}function wr(e,t){for(const n of e)for(const e of n)if(Un(e,t,!0))return!0;return!1}function xr(e,t,n,r=1/0){const i=dr(e),o=dr(t);if(r!==1/0&&fr(i,o,n)>=r)return r;if(Ln(i,o)){if(wr(e,t))return 0}else if(wr(t,e))return 0;let s=1/0;for(const a of e)for(let e=0,r=a.length,i=r-1;e<r;i=e++){const r=a[i],o=a[e];for(const e of t)for(let t=0,i=e.length,a=i-1;t<i;a=t++){const i=e[a],l=e[t];if(Fn(r,o,i,l))return 0;s=Math.min(s,gr(r,o,i,l,n))}}return s}function Sr(e,t,n,r,i,o){if(!o)return;const s=fr(hr(r,o),i,n);s<t&&e.push([s,o,[0,0]])}function Er(e,t,n,r,i,o,s){if(!o||!s)return;const a=fr(hr(r,o),hr(i,s),n);a<t&&e.push([a,o,s])}function Tr(e,t,n,r,i=1/0){let o=Math.min(r.distance(e[0],n[0][0]),i);if(0===o)return o;const s=new Zn([[0,[0,e.length-1],[0,0]]],ar),a=dr(n);for(;s.length>0;){const i=s.pop();if(i[0]>=o)continue;const l=i[1],c=t?50:100;if(lr(l)<=c){if(!cr(l,e.length))return NaN;if(t){const t=br(e,l,n,r);if(isNaN(t)||0===t)return t;o=Math.min(o,t)}else for(let t=l[0];t<=l[1];++t){const i=_r(e[t],n,r);if(o=Math.min(o,i),0===o)return 0}}else{const n=ur(l,t);Sr(s,o,r,e,a,n[0]),Sr(s,o,r,e,a,n[1])}}return o}function Mr(e,t,n,r,i,o=1/0){let s=Math.min(o,i.distance(e[0],n[0]));if(0===s)return s;const a=new Zn([[0,[0,e.length-1],[0,n.length-1]]],ar);for(;a.length>0;){const o=a.pop();if(o[0]>=s)continue;const l=o[1],c=o[2],u=t?50:100,h=r?50:100;if(lr(l)<=u&&lr(c)<=h){if(!cr(l,e.length)&&cr(c,n.length))return NaN;let o;if(t&&r)o=yr(e,l,n,c,i),s=Math.min(s,o);else if(t&&!r){const t=e.slice(l[0],l[1]+1);for(let e=c[0];e<=c[1];++e)if(o=mr(n[e],t,i),s=Math.min(s,o),0===s)return s}else if(!t&&r){const t=n.slice(c[0],c[1]+1);for(let n=l[0];n<=l[1];++n)if(o=mr(e[n],t,i),s=Math.min(s,o),0===s)return s}else o=vr(e,l,n,c,i),s=Math.min(s,o)}else{const o=ur(l,t),u=ur(c,r);Er(a,s,i,e,n,o[0],u[0]),Er(a,s,i,e,n,o[0],u[1]),Er(a,s,i,e,n,o[1],u[0]),Er(a,s,i,e,n,o[1],u[1])}}return s}function Ar(e){return"MultiPolygon"===e.type?e.coordinates.map(e=>({type:"Polygon",coordinates:e})):"MultiLineString"===e.type?e.coordinates.map(e=>({type:"LineString",coordinates:e})):"MultiPoint"===e.type?e.coordinates.map(e=>({type:"Point",coordinates:e})):[e]}class kr{constructor(e,t){this.type=Le,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(jt(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new kr(t,t.features.map(e=>Ar(e.geometry)).flat());if("Feature"===t.type)return new kr(t,Ar(t.geometry));if("type"in t&&"coordinates"in t)return new kr(t,Ar(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=e.geometry(),r=n.flat().map(t=>Rn([t.x,t.y],e.canonical));if(0===n.length)return NaN;const i=new sr(r[0][1]);let o=1/0;for(const s of t){switch(s.type){case"Point":o=Math.min(o,Mr(r,!1,[s.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,Mr(r,!1,s.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,Tr(r,!1,s.coordinates,i,o))}if(0===o)return o}return o}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=e.geometry(),r=n.flat().map(t=>Rn([t.x,t.y],e.canonical));if(0===n.length)return NaN;const i=new sr(r[0][1]);let o=1/0;for(const s of t){switch(s.type){case"Point":o=Math.min(o,Mr(r,!0,[s.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,Mr(r,!0,s.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,Tr(r,!0,s.coordinates,i,o))}if(0===o)return o}return o}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){const n=e.geometry();if(0===n.length||0===n[0].length)return NaN;const r=er(n,0).map(t=>t.map(t=>t.map(t=>Rn([t.x,t.y],e.canonical)))),i=new sr(r[0][0][0][1]);let o=1/0;for(const s of t)for(const e of r){switch(s.type){case"Point":o=Math.min(o,Tr([s.coordinates],!1,e,i,o));break;case"LineString":o=Math.min(o,Tr(s.coordinates,!0,e,i,o));break;case"Polygon":o=Math.min(o,xr(e,s.coordinates,i,o))}if(0===o)return o}return o}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Cr{constructor(e){this.type=Be,this.key=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=e[1];return null==n?t.error("Global state property must be defined."):"string"!=typeof n?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new Cr(n)}evaluate(e){var t;const n=null===(t=e.globals)||void 0===t?void 0:t.globalState;return n&&0!==Object.keys(n).length?vt(n,this.key):null}eachChild(){}outputDefined(){return!1}}const Ir={"==":bn,"!=":wn,">":Sn,"<":xn,">=":Tn,"<=":En,array:Yt,at:Qt,boolean:Yt,case:rn,coalesce:gn,collator:Mn,format:kn,image:Cn,in:en,"index-of":tn,interpolate:pn,"interpolate-hcl":pn,"interpolate-lab":pn,length:In,let:Jt,literal:Ht,match:nn,number:Yt,"number-format":An,object:Yt,slice:on,step:an,string:Yt,"to-boolean":qt,"to-color":qt,"to-number":qt,"to-string":qt,var:Xt,within:Kn,distance:kr,"global-state":Cr};class Pr{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const n=e[0],r=Pr.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=o.filter(([t])=>!Array.isArray(t)||t.length===e.length-1);let a=null;for(const[l,c]of s){a=new Zt(t.registry,Nr,t.path,null,t.scope);const r=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(l)?l[t-1]:l.type,s=a.parse(n,1+r.length,i);if(!s){o=!0;break}r.push(s)}if(!o)if(Array.isArray(l)&&l.length!==r.length)a.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=r[e];a.concat(e+1).checkSubtype(t,n.type)}if(0===a.errors.length)return new Pr(n,i,c,r)}}if(1===s.length)t.errors.push(...a.errors);else{const n=(s.length?s:o).map(([e])=>{return t=e,Array.isArray(t)?`(${t.map(Ze).join(", ")})`:`(${Ze(t.type)}...)`;var t}).join(" | "),r=[];for(let i=1;i<e.length;i++){const n=t.parse(e[i],1+r.length);if(!n)return null;r.push(Ze(n.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Pr.definitions=t;for(const n in t)e[n]=Pr}}function Or(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,s=Ut(t,n,r,o);if(s)throw new Dt(s);return new Mt(t/255,n/255,r/255,o,!1)}function Rr(e,t){return e in t}function Dr(e,t){const n=t[e];return void 0===n?null:n}function Lr(e){return{type:e}}function Nr(e){if(e instanceof Xt)return Nr(e.boundExpression);if(e instanceof Pr&&"error"===e.name)return!1;if(e instanceof Mn)return!1;if(e instanceof Kn)return!1;if(e instanceof kr)return!1;if(e instanceof Cr)return!1;const t=e instanceof qt||e instanceof Yt;let n=!0;return e.eachChild(e=>{n=t?n&&Nr(e):n&&e instanceof Ht}),!!n&&Fr(e)&&Ur(e,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Fr(e){if(e instanceof Pr){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Kn)return!1;if(e instanceof kr)return!1;let t=!0;return e.eachChild(e=>{t&&!Fr(e)&&(t=!1)}),t}function zr(e){if(e instanceof Pr&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!zr(e)&&(t=!1)}),t}function Ur(e,t){if(e instanceof Pr&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(e=>{n&&!Ur(e,t)&&(n=!1)}),n}function jr(e){return{result:"success",value:e}}function Br(e){return{result:"error",value:e}}function Vr(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Hr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function $r(e){return!!e.expression&&e.expression.interpolated}function Yr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Gr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&Bt(e)===je}function qr(e){return e}function Wr(e,t){const n=e.stops&&"object"==typeof e.stops[0][0],r=n||!(n||void 0!==e.property),i=e.type||($r(t)?"exponential":"interval"),o=function(e){switch(e.type){case"color":return Mt.parse;case"padding":return Pt.parse;case"numberArray":return Ot.parse;case"colorArray":return Rt.parse;default:return null}}(t);if(o&&((e=Pe({},e)).stops&&(e.stops=e.stops.map(e=>[e[0],o(e[1])])),e.default=o(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==(s=e.colorSpace)&&"hcl"!==s&&"lab"!==s)throw new Error(`Unknown color space: "${e.colorSpace}"`);var s;const a=function(e){switch(e){case"exponential":return Xr;case"interval":return Jr;case"categorical":return Zr;case"identity":return Qr;default:throw new Error(`Unknown function type "${e}"`)}}(i);let l,c;if("categorical"===i){l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}if(n){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,Wr(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:pn.interpolationFactor.bind(void 0,o),zoomStops:i.map(e=>e[0]),evaluate:({zoom:n},r)=>Xr({stops:i,base:e.base},t,n).evaluate(n,r)}}if(r){const n="exponential"===i?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:pn.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map(e=>e[0]),evaluate:({zoom:n})=>a(e,t,n,l,c)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?Kr(e.default,t.default):a(e,t,i,l,c)}}}function Kr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Zr(e,t,n,r,i){return Kr(typeof n===i?r[n]:void 0,e.default,t.default)}function Jr(e,t,n){if("number"!==Yr(n))return Kr(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=sn(e.stops.map(e=>e[0]),n);return e.stops[i][1]}function Xr(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==Yr(n))return Kr(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=sn(e.stops.map(e=>e[0]),n),s=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),a=e.stops[o][1],l=e.stops[o+1][1],c=mn[t.type]||qr;return"function"==typeof a.evaluate?{evaluate(...t){const n=a.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return c(n,r,s,e.colorSpace)}}:c(a,l,s,e.colorSpace)}function Qr(e,t,n){switch(t.type){case"color":n=Mt.parse(n);break;case"formatted":n=It.fromString(n.toString());break;case"resolvedImage":n=Ft.fromString(n.toString());break;case"padding":n=Pt.parse(n);break;case"colorArray":n=Rt.parse(n);break;case"numberArray":n=Ot.parse(n);break;default:Yr(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0)}return Kr(n,e.default,t.default)}Pr.register(Ir,{error:[{kind:"error"},[Ne],(e,[t])=>{throw new Dt(t.evaluate(e))}],typeof:[Ne,[Be],(e,[t])=>Ze(Bt(t.evaluate(e)))],"to-rgba":[Ke(Le,4),[ze],(e,[t])=>{const[n,r,i,o]=t.evaluate(e).rgb;return[255*n,255*r,255*i,o]}],rgb:[ze,[Le,Le,Le],Or],rgba:[ze,[Le,Le,Le,Le],Or],has:{type:Fe,overloads:[[[Ne],(e,[t])=>Rr(t.evaluate(e),e.properties())],[[Ne,je],(e,[t,n])=>Rr(t.evaluate(e),n.evaluate(e))]]},get:{type:Be,overloads:[[[Ne],(e,[t])=>Dr(t.evaluate(e),e.properties())],[[Ne,je],(e,[t,n])=>Dr(t.evaluate(e),n.evaluate(e))]]},"feature-state":[Be,[Ne],(e,[t])=>Dr(t.evaluate(e),e.featureState||{})],properties:[je,[],e=>e.properties()],"geometry-type":[Ne,[],e=>e.geometryType()],id:[Be,[],e=>e.id()],zoom:[Le,[],e=>e.globals.zoom],"heatmap-density":[Le,[],e=>e.globals.heatmapDensity||0],elevation:[Le,[],e=>e.globals.elevation||0],"line-progress":[Le,[],e=>e.globals.lineProgress||0],accumulated:[Be,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[Le,Lr(Le),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[Le,Lr(Le),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:Le,overloads:[[[Le,Le],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[Le],(e,[t])=>-t.evaluate(e)]]},"/":[Le,[Le,Le],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[Le,[Le,Le],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[Le,[],()=>Math.LN2],pi:[Le,[],()=>Math.PI],e:[Le,[],()=>Math.E],"^":[Le,[Le,Le],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[Le,[Le],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Le,[Le],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Le,[Le],(e,[t])=>Math.log(t.evaluate(e))],log2:[Le,[Le],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Le,[Le],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Le,[Le],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Le,[Le],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Le,[Le],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Le,[Le],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Le,[Le],(e,[t])=>Math.atan(t.evaluate(e))],min:[Le,Lr(Le),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[Le,Lr(Le),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[Le,[Le],(e,[t])=>Math.abs(t.evaluate(e))],round:[Le,[Le],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Le,[Le],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Le,[Le],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Fe,[Ne,Be],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Fe,[Be],(e,[t])=>e.id()===t.value],"filter-type-==":[Fe,[Ne],(e,[t])=>e.geometryType()===t.value],"filter-<":[Fe,[Ne,Be],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Fe,[Be],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[Fe,[Ne,Be],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Fe,[Be],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[Fe,[Ne,Be],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Fe,[Be],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[Fe,[Ne,Be],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Fe,[Be],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[Fe,[Be],(e,[t])=>t.value in e.properties()],"filter-has-id":[Fe,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Fe,[Ke(Ne)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Fe,[Ke(Be)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Fe,[Ne,Ke(Be)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Fe,[Ne,Ke(Be)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Fe,overloads:[[[Fe,Fe],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Lr(Fe),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Fe,overloads:[[[Fe,Fe],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Lr(Fe),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Fe,[Fe],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Fe,[Ne],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[Ne,[Ne],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Ne,[Ne],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Ne,Lr(Be),(e,t)=>t.map(t=>Vt(t.evaluate(e))).join("")],"resolved-locale":[Ne,[Ve],(e,[t])=>t.evaluate(e).resolvedLocale()]});class ei{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Kt,this._defaultValue=t?function(e){if("color"===e.type&&Gr(e.default))return new Mt(0,0,0,0);switch(e.type){case"color":return Mt.parse(e.default)||null;case"padding":return Pt.parse(e.default)||null;case"numberArray":return Ot.parse(e.default)||null;case"colorArray":return Rt.parse(e.default)||null;case"variableAnchorOffsetCollection":return Nt.parse(e.default)||null;case"projectionDefinition":return zt.parse(e.default)||null;default:return void 0===e.default?null:e.default}}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Dt(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function ti(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Ir}function ni(e,t){const n=new Zt(Ir,Nr,[],t?function(e){const t={color:ze,string:Ne,number:Le,enum:Ne,boolean:Fe,formatted:He,padding:$e,numberArray:Ge,colorArray:Ye,projectionDefinition:Ue,resolvedImage:qe,variableAnchorOffsetCollection:We};return"array"===e.type?Ke(t[e.value]||Be,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?jr(new ei(r,t)):Br(n.errors)}class ri{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!zr(t.expression),this.globalStateRefs=li(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class ii{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!zr(t.expression),this.globalStateRefs=li(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?pn.interpolationFactor(this.interpolationType,e,t,n):0}}function oi(e,t){const n=ni(e,t);if("error"===n.result)return n;const r=n.value.expression,i=Fr(r);if(!i&&!Vr(t))return Br([new Oe("","data expressions not supported")]);const o=Ur(r,["zoom"]);if(!o&&!Hr(t))return Br([new Oe("","zoom expressions not supported")]);const s=ai(r);return s||o?s instanceof Oe?Br([s]):s instanceof pn&&!$r(t)?Br([new Oe("",'"interpolate" expressions cannot be used with this property')]):jr(s?new ii(i?"camera":"composite",n.value,s.labels,s instanceof pn?s.interpolation:void 0):new ri(i?"constant":"source",n.value)):Br([new Oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class si{constructor(e,t){this._parameters=e,this._specification=t,Pe(this,Wr(this._parameters,this._specification))}static deserialize(e){return new si(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ai(e){let t=null;if(e instanceof Jt)t=ai(e.result);else if(e instanceof gn){for(const n of e.args)if(t=ai(n),t)break}else(e instanceof an||e instanceof pn)&&e.input instanceof Pr&&"zoom"===e.input.name&&(t=e);return t instanceof Oe||e.eachChild(e=>{const n=ai(e);n instanceof Oe?t=n:!t&&n?t=new Oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new Oe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function li(e,t=new Set){return e instanceof Cr&&t.add(e.key),e.eachChild(e=>{li(e,t)}),t}function ci(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ci(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const ui={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function hi(e){if(null==e)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ci(e)||(e=fi(e));const t=ni(e,ui);if("error"===t.result)throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));return{filter:(e,n,r)=>t.value.evaluate(e,n,{},r),needGeometry:pi(e),getGlobalStateRefs:()=>li(t.value.expression)}}function di(e,t){return e<t?-1:e>t?1:0}function pi(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(pi(e[t]))return!0;return!1}function fi(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?mi(e[1],e[2],"=="):"!="===t?vi(mi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?mi(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(fi))):"all"===t?["all"].concat(e.slice(1).map(fi)):"none"===t?["all"].concat(e.slice(1).map(fi).map(vi)):"in"===t?gi(e[1],e.slice(2)):"!in"===t?vi(gi(e[1],e.slice(2))):"has"===t?yi(e[1]):"!has"!==t||vi(yi(e[1]));var n}function mi(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function gi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(di)]]:["filter-in-small",e,["literal",t]]}}function yi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function vi(e){return["!",e]}function _i(e){const t=typeof e;if("number"===t||"boolean"===t||"string"===t||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const n of e)t+=`${_i(n)},`;return`${t}]`}const n=Object.keys(e).sort();let r="{";for(let i=0;i<n.length;i++)r+=`${JSON.stringify(n[i])}:${_i(e[n[i]])},`;return`${r}}`}function bi(e){let t="";for(const n of _e)t+=`/${_i(e[n])}`;return t}function wi(e){const t=e.value;return t?[new Ie(e.key,t,"constants have been deprecated as of v8")]:[]}function xi(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Si(e){if(Array.isArray(e))return e.map(Si);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Si(e[n]);return t}return xi(e)}function Ei(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,s=e.styleSpec,a=e.validateSpec;let l=[];const c=Yr(n);if("object"!==c)return[new Ie(t,n,`object expected, ${c} found`)];for(const u in n){const e=u.split(".")[0],c=vt(r,e)||r["*"];let h;if(vt(i,e))h=i[e];else if(vt(r,e))h=a;else if(i["*"])h=i["*"];else{if(!r["*"]){l.push(new Ie(t,n[u],`unknown property "${u}"`));continue}h=a}l=l.concat(h({key:(t?`${t}.`:t)+u,value:n[u],valueSpec:c,style:o,styleSpec:s,object:n,objectKey:u,validateSpec:a},n))}for(const u in r)i[u]||r[u].required&&void 0===r[u].default&&void 0===n[u]&&l.push(new Ie(t,n,`missing required property "${u}"`));return l}function Ti(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,s=e.arrayElementValidator||e.validateSpec;if("array"!==Yr(t))return[new Ie(o,t,`array expected, ${Yr(t)} found`)];if(n.length&&t.length!==n.length)return[new Ie(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new Ie(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let a={type:n.value,values:n.values};i.$version<7&&(a.function=n.function),"object"===Yr(n.value)&&(a=n.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(s({array:t,arrayIndex:c,value:t[c],valueSpec:a,validateSpec:e.validateSpec,style:r,styleSpec:i,key:`${o}[${c}]`}));return l}function Mi(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Yr(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new Ie(t,n,`number expected, ${i} found`)]:"minimum"in r&&n<r.minimum?[new Ie(t,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new Ie(t,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function Ai(e){const t=e.valueSpec,n=xi(e.value.type);let r,i,o,s={};const a="categorical"!==n&&void 0===e.value.property,l=!a,c="array"===Yr(e.value.stops)&&"array"===Yr(e.value.stops[0])&&"object"===Yr(e.value.stops[0][0]),u=Ei({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new Ie(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(Ti({key:e.key,value:r,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Yr(r)&&0===r.length&&t.push(new Ie(e.key,r,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&a&&u.push(new Ie(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new Ie(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!$r(e.valueSpec)&&u.push(new Ie(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Vr(e.valueSpec)?u.push(new Ie(e.key,e.value,"property functions not supported")):a&&!Hr(e.valueSpec)&&u.push(new Ie(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new Ie(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const r=e.value,a=e.key;if("array"!==Yr(r))return[new Ie(a,r,`array expected, ${Yr(r)} found`)];if(2!==r.length)return[new Ie(a,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Yr(r[0]))return[new Ie(a,r,`object expected, ${Yr(r[0])} found`)];if(void 0===r[0].zoom)return[new Ie(a,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Ie(a,r,"object stop key must have value")];if(o&&o>xi(r[0].zoom))return[new Ie(a,r[0].zoom,"stop zoom values must appear in ascending order")];xi(r[0].zoom)!==o&&(o=xi(r[0].zoom),i=void 0,s={}),n=n.concat(Ei({key:`${a}[0]`,value:r[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Mi,value:d}}))}else n=n.concat(d({key:`${a}[0]`,value:r[0],validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},r));return ti(Si(r[1]))?n.concat([new Ie(`${a}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(e.validateSpec({key:`${a}[1]`,value:r[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const a=Yr(e.value),l=xi(e.value),c=null!==e.value?e.value:o;if(r){if(a!==r)return[new Ie(e.key,c,`${a} stop domain type must match previous stop domain type ${r}`)]}else r=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new Ie(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==n){let r=`number expected, ${a} found`;return Vr(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(e.key,c,r)]}return"categorical"!==n||"number"!==a||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===a&&void 0!==i&&l<i?[new Ie(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in s?[new Ie(e.key,c,"stop domain values must be unique")]:(s[l]=!0,[])):[new Ie(e.key,c,`integer expected, found ${l}`)]}}function ki(e){const t=("property"===e.expressionContext?oi:ni)(Si(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new Ie(`${e.key}${t.key}`,e.value,t.message));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Ie(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!zr(n))return[new Ie(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!zr(n))return[new Ie(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Ur(n,["zoom","feature-state"]))return[new Ie(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Fr(n))return[new Ie(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ci(e){const t=e.key,n=e.value,r=Yr(n);return"string"!==r?[new Ie(t,n,`color expected, ${r} found`)]:Mt.parse(String(n))?[]:[new Ie(t,n,`color expected, "${n}" found`)]}function Ii(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(xi(n))&&i.push(new Ie(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(xi(n))&&i.push(new Ie(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function Pi(e){return ci(Si(e.value))?ki(Pe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Oi(e)}function Oi(e){const t=e.value,n=e.key;if("array"!==Yr(t))return[new Ie(n,t,`array expected, ${Yr(t)} found`)];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new Ie(n,t,"filter array must have at least 1 element")];switch(o=o.concat(Ii({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),xi(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===xi(t[1])&&o.push(new Ie(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new Ie(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Yr(t[1]),"string"!==i&&o.push(new Ie(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let s=2;s<t.length;s++)i=Yr(t[s]),"$type"===xi(t[1])?o=o.concat(Ii({key:`${n}[${s}]`,value:t[s],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Ie(`${n}[${s}]`,t[s],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(Oi({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Yr(t[1]),2!==t.length?o.push(new Ie(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new Ie(`${n}[1]`,t[1],`string expected, ${i} found`))}return o}function Ri(e,t){const n=e.key,r=e.validateSpec,i=e.style,o=e.styleSpec,s=e.value,a=e.objectKey,l=o[`${t}_${e.layerType}`];if(!l)return[];const c=a.match(/^(.*)-transition$/);if("paint"===t&&c&&l[c[1]]&&l[c[1]].transition)return r({key:n,value:s,valueSpec:o.transition,style:i,styleSpec:o});const u=e.valueSpec||l[a];if(!u)return[new Ie(n,s,`unknown property "${a}"`)];let h;if("string"===Yr(s)&&Vr(u)&&!u.tokens&&(h=/^{([^}]+)}$/.exec(s)))return[new Ie(n,s,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(h[1])} }\`.`)];const d=[];return"symbol"===e.layerType&&("text-field"===a&&i&&!i.glyphs&&d.push(new Ie(n,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Gr(Si(s))&&"identity"===xi(s.type)&&d.push(new Ie(n,s,'"text-font" does not support identity functions'))),d.concat(r({key:e.key,value:s,valueSpec:u,style:i,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:a}))}function Di(e){return Ri(e,"paint")}function Li(e){return Ri(e,"layout")}function Ni(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;if("object"!==Yr(n))return[new Ie(r,n,`object expected, ${Yr(n)} found`)];n.type||n.ref||t.push(new Ie(r,n,'either "type" or "ref" is required'));let s=xi(n.type);const a=xi(n.ref);if(n.id){const o=xi(n.id);for(let s=0;s<e.arrayIndex;s++){const e=i.layers[s];xi(e.id)===o&&t.push(new Ie(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in n&&t.push(new Ie(r,n[e],`"${e}" is prohibited for ref layers`))}),i.layers.forEach(t=>{xi(t.id)===a&&(e=t)}),e?e.ref?t.push(new Ie(r,n.ref,"ref cannot reference another ref layer")):s=xi(e.type):t.push(new Ie(r,n.ref,`ref layer "${a}" not found`))}else if("background"!==s)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&xi(e.type);e?"vector"===o&&"raster"===s?t.push(new Ie(r,n.source,`layer "${n.id}" requires a raster source`)):"raster-dem"!==o&&"hillshade"===s||"raster-dem"!==o&&"color-relief"===s?t.push(new Ie(r,n.source,`layer "${n.id}" requires a raster-dem source`)):"raster"===o&&"raster"!==s?t.push(new Ie(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==s&&"color-relief"!==s?t.push(new Ie(r,n.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new Ie(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ie(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new Ie(r,n.source,`source "${n.source}" not found`))}else t.push(new Ie(r,n,'missing required property "source"'));return t=t.concat(Ei({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"}),filter:Pi,layout:e=>Ei({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Li(Pe({layerType:s},e))}}),paint:e=>Ei({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Di(Pe({layerType:s},e))}})}})),t}function Fi(e){const t=e.value,n=e.key,r=Yr(t);return"string"!==r?[new Ie(n,t,`string expected, ${r} found`)]:[]}const zi={promoteId:function({key:e,value:t}){if("string"===Yr(t))return Fi({key:e,value:t});{const n=[];for(const r in t)n.push(...Fi({key:`${e}.${r}`,value:t[r]}));return n}}};function Ui(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style,o=e.validateSpec;if(!t.type)return[new Ie(n,t,'"type" is required')];const s=xi(t.type);let a;switch(s){case"vector":case"raster":return a=Ei({key:n,value:t,valueSpec:r[`source_${s.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:zi,validateSpec:o}),a;case"raster-dem":return a=function(e){var t;const n=null!==(t=e.sourceName)&&void 0!==t?t:"",r=e.value,i=e.styleSpec,o=i.source_raster_dem,s=e.style;let a=[];const l=Yr(r);if(void 0===r)return a;if("object"!==l)return a.push(new Ie("source_raster_dem",r,`object expected, ${l} found`)),a;const c="custom"===xi(r.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],h=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const d in r)!c&&u.includes(d)?a.push(new Ie(d,r[d],`In "${n}": "${d}" is only valid when "encoding" is set to "custom". ${h} encoding found`)):o[d]?a=a.concat(e.validateSpec({key:d,value:r[d],valueSpec:o[d],validateSpec:e.validateSpec,style:s,styleSpec:i})):a.push(new Ie(d,r[d],`unknown property "${d}"`));return a}({sourceName:n,value:t,style:e.style,styleSpec:r,validateSpec:o}),a;case"geojson":if(a=Ei({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:o,objectElementValidators:zi}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...ki({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...ki({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Ei({key:n,value:t,valueSpec:r.source_video,style:i,validateSpec:o,styleSpec:r});case"image":return Ei({key:n,value:t,valueSpec:r.source_image,style:i,validateSpec:o,styleSpec:r});case"canvas":return[new Ie(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ii({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ji(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const s=Yr(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new Ie("light",t,`object expected, ${s} found`)]),o;for(const a in t){const s=a.match(/^(.*)-transition$/);o=o.concat(s&&r[s[1]]&&r[s[1]].transition?e.validateSpec({key:a,value:t[a],valueSpec:n.transition,validateSpec:e.validateSpec,style:i,styleSpec:n}):r[a]?e.validateSpec({key:a,value:t[a],valueSpec:r[a],validateSpec:e.validateSpec,style:i,styleSpec:n}):[new Ie(a,t[a],`unknown property "${a}"`)])}return o}function Bi(e){const t=e.value,n=e.styleSpec,r=n.sky,i=e.style,o=Yr(t);if(void 0===t)return[];if("object"!==o)return[new Ie("sky",t,`object expected, ${o} found`)];let s=[];for(const a in t)s=s.concat(r[a]?e.validateSpec({key:a,value:t[a],valueSpec:r[a],style:i,styleSpec:n}):[new Ie(a,t[a],`unknown property "${a}"`)]);return s}function Vi(e){const t=e.value,n=e.styleSpec,r=n.terrain,i=e.style;let o=[];const s=Yr(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new Ie("terrain",t,`object expected, ${s} found`)]),o;for(const a in t)o=o.concat(r[a]?e.validateSpec({key:a,value:t[a],valueSpec:r[a],validateSpec:e.validateSpec,style:i,styleSpec:n}):[new Ie(a,t[a],`unknown property "${a}"`)]);return o}function Hi(e){let t=[];const n=e.value,r=e.key;if(Array.isArray(n)){const i=[],o=[];for(const s in n)n[s].id&&i.includes(n[s].id)&&t.push(new Ie(r,n,`all the sprites' ids must be unique, but ${n[s].id} is duplicated`)),i.push(n[s].id),n[s].url&&o.includes(n[s].url)&&t.push(new Ie(r,n,`all the sprites' URLs must be unique, but ${n[s].url} is duplicated`)),o.push(n[s].url),t=t.concat(Ei({key:`${r}[${s}]`,value:n[s],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return Fi({key:r,value:n})}function $i(e){return t=e.value,Boolean(t)&&t.constructor===Object?[]:[new Ie(e.key,e.value,`object expected, ${Yr(e.value)} found`)];var t}const Yi={"*":()=>[],array:Ti,boolean:function(e){const t=e.value,n=e.key,r=Yr(t);return"boolean"!==r?[new Ie(n,t,`boolean expected, ${r} found`)]:[]},number:Mi,color:Ci,constants:wi,enum:Ii,filter:Pi,function:Ai,layer:Ni,object:Ei,source:Ui,light:ji,sky:Bi,terrain:Vi,projection:function(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style,o=Yr(t);if(void 0===t)return[];if("object"!==o)return[new Ie("projection",t,`object expected, ${o} found`)];let s=[];for(const a in t)s=s.concat(r[a]?e.validateSpec({key:a,value:t[a],valueSpec:r[a],style:i,styleSpec:n}):[new Ie(a,t[a],`unknown property "${a}"`)]);return s},projectionDefinition:function(e){const t=e.key;let n=e.value;n=n instanceof String?n.valueOf():n;const r=Yr(n);return"array"!==r||function(e){return Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]}(n)||function(e){return!!["interpolate","step","literal"].includes(e[0])}(n)?["array","string"].includes(r)?[]:[new Ie(t,n,`projection expected, invalid type "${r}" found`)]:[new Ie(t,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:Fi,formatted:function(e){return 0===Fi(e).length?[]:ki(e)},resolvedImage:function(e){return 0===Fi(e).length?[]:ki(e)},padding:function(e){const t=e.key,n=e.value;if("array"===Yr(n)){if(n.length<1||n.length>4)return[new Ie(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const r={type:"number"};let i=[];for(let o=0;o<n.length;o++)i=i.concat(e.validateSpec({key:`${t}[${o}]`,value:n[o],validateSpec:e.validateSpec,valueSpec:r}));return i}return Mi({key:t,value:n,valueSpec:{}})},numberArray:function(e){const t=e.key,n=e.value;if("array"===Yr(n)){const r={type:"number"};if(n.length<1)return[new Ie(t,n,"array length at least 1 expected, length 0 found")];let i=[];for(let o=0;o<n.length;o++)i=i.concat(e.validateSpec({key:`${t}[${o}]`,value:n[o],validateSpec:e.validateSpec,valueSpec:r}));return i}return Mi({key:t,value:n,valueSpec:{}})},colorArray:function(e){const t=e.key,n=e.value;if("array"===Yr(n)){if(n.length<1)return[new Ie(t,n,"array length at least 1 expected, length 0 found")];let e=[];for(let r=0;r<n.length;r++)e=e.concat(Ci({key:`${t}[${r}]`,value:n[r]}));return e}return Ci({key:t,value:n})},variableAnchorOffsetCollection:function(e){const t=e.key,n=e.value,r=Yr(n),i=e.styleSpec;if("array"!==r||n.length<1||n.length%2!=0)return[new Ie(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<n.length;s+=2)o=o.concat(Ii({key:`${t}[${s}]`,value:n[s],valueSpec:i.layout_symbol["text-anchor"]})),o=o.concat(Ti({key:`${t}[${s+1}]`,value:n[s+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:i}));return o},sprite:Hi,state:$i};function Gi(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return e.validateSpec=Gi,n.expression&&Gr(xi(t))?Ai(e):n.expression&&ti(Si(t))?ki(e):n.type&&Yi[n.type]?Yi[n.type](e):Ei(Pe({},e,{valueSpec:n.type?r[n.type]:n}))}function qi(e){const t=e.value,n=e.key,r=Fi(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Ie(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Ie(n,t,'"glyphs" url must include a "{range}" token'))),r}function Wi(e,t=ve){let n=[];return n=n.concat(Gi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:Gi,objectElementValidators:{glyphs:qi,"*":()=>[]}})),e.constants&&(n=n.concat(wi({key:"constants",value:e.constants}))),Zi(n)}function Ki(e){return function(t){return e({...t,validateSpec:Gi})}}function Zi(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function Ji(e){return function(...t){return Zi(e.apply(this,t))}}Wi.source=Ji(Ki(Ui)),Wi.sprite=Ji(Ki(Hi)),Wi.glyphs=Ji(Ki(qi)),Wi.light=Ji(Ki(ji)),Wi.sky=Ji(Ki(Bi)),Wi.terrain=Ji(Ki(Vi)),Wi.state=Ji(Ki($i)),Wi.layer=Ji(Ki(Ni)),Wi.filter=Ji(Ki(Pi)),Wi.paintProperty=Ji(Ki(Di)),Wi.layoutProperty=Ji(Ki(Li));const Xi=Wi,Qi=Xi.light,eo=Xi.sky,to=Xi.paintProperty,no=Xi.layoutProperty;function ro(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new ge(new Error(r.message))),n=!0;return n}class io{constructor(e,t,n){const r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(let e=0;e<this.d*this.d;e++){const t=i[3+e],n=i[3+e+1];r.push(t===n?null:i.subarray(t,n))}const o=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],o),this.bboxes=i.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*n;for(let e=0;e<this.d*this.d;e++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;const i=n/t*e;this.min=-i,this.max=e+i}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,n,r,i,o){this.cells[i].push(o)}query(e,t,n,r,i){const o=this.min,s=this.max;if(e<=o&&t<=o&&s<=n&&s<=r&&!i)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,n,r,this._queryCell,o,{},i),o}}_queryCell(e,t,n,r,i,o,s,a){const l=this.cells[i];if(null!==l){const i=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===s[h]){const l=4*h;(a?a(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&n>=c[l+0]&&r>=c[l+1])?(s[h]=!0,o.push(i[h])):s[h]=!1}}}}_forEachCell(e,t,n,r,i,o,s,a){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++){const c=this.d*l+d;if((!a||a(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&i.call(this,e,t,n,r,c,o,s,a))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let n=0;for(let o=0;o<this.cells.length;o++)n+=this.cells[o].length;const r=new Int32Array(t+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let i=t;for(let o=0;o<e.length;o++){const t=e[o];r[3+o]=i,r.set(t,i),i+=t.length}return r[3+e.length]=i,r.set(this.keys,i),i+=this.keys.length,r[3+e.length+1]=i,r.set(this.bboxes,i),i+=this.bboxes.length,r.buffer}static serialize(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}}static deserialize(e){return new io(e.buffer)}}const oo={};function so(e,t,n={}){if(oo[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),oo[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}so("Object",Object),so("Set",Set),so("TransferableGridIndex",io),so("Color",Mt),so("Error",Error),so("AJAXError",ce),so("ResolvedImage",Ft),so("StylePropertyFunction",si),so("StyleExpression",ei,{omit:["_evaluator"]}),so("ZoomDependentExpression",ii),so("ZoomConstantExpression",ri),so("CompoundExpression",Pr,{omit:["_evaluate"]});for(const _d in Ir)Ir[_d]._classRegistryKey||so(`Expression_${_d}`,Ir[_d]);function ao(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function lo(e){return e.$name||e.constructor._classRegistryKey}function co(e){return!function(e){if(null===e||"object"!=typeof e)return!1;const t=lo(e);return!(!t||"Object"===t)}(e)&&(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||ao(e)||W(e)||ArrayBuffer.isView(e)||e instanceof ImageData)}function uo(e,t){if(co(e))return(ao(e)||W(e))&&t&&t.push(e),ArrayBuffer.isView(e)&&t&&t.push(e.buffer),e instanceof ImageData&&t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const r of e)n.push(uo(r,t));return n}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);const n=lo(e);if(!n)throw new Error(`can't serialize object of unregistered class ${e.constructor.name}`);if(!oo[n])throw new Error(`${n} is not registered.`);const{klass:r}=oo[n],i=r.serialize?r.serialize(e,t):{};if(r.serialize){if(t&&i===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const r in e){if(!e.hasOwnProperty(r))continue;if(oo[n].omit.indexOf(r)>=0)continue;const o=e[r];i[r]=oo[n].shallow.indexOf(r)>=0?o:uo(o,t)}e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(i.$name=n),i}function ho(e){if(co(e))return e;if(Array.isArray(e))return e.map(ho);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);const t=lo(e)||"Object";if(!oo[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:n}=oo[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const i of Object.keys(e)){if("$name"===i)continue;const n=e[i];r[i]=oo[t].shallow.indexOf(i)>=0?n:ho(n)}return r}class po{constructor(){this.first=!0}update(e,t){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const fo={"Latin-1 Supplement":e=>e>=128&&e<=255,"Hangul Jamo":e=>e>=4352&&e<=4607,Khmer:e=>e>=6016&&e<=6143,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Kanbun:e=>e>=12688&&e<=12703,"CJK Strokes":e=>e>=12736&&e<=12783,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Hangul Syllables":e=>e>=44032&&e<=55215,"Private Use Area":e=>e>=57344&&e<=63743,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function mo(e){for(const t of e)if(wo(t.charCodeAt(0)))return!0;return!1}function go(e){for(const t of e)if(!_o(t.charCodeAt(0)))return!1;return!0}function yo(e){const t=e.map(e=>{try{return new RegExp(`\\p{sc=${e}}`,"u").source}catch(e){return null}}).filter(e=>e);return new RegExp(t.join("|"),"u")}const vo=yo(["Arab","Dupl","Mong","Ougr","Syrc"]);function _o(e){return!vo.test(String.fromCodePoint(e))}const bo=yo(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function wo(e){return!(746!==e&&747!==e&&(e<4352||!(fo["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||fo["CJK Compatibility"](e)||fo["CJK Strokes"](e)||!(!fo["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||fo["Enclosed CJK Letters and Months"](e)||fo["Ideographic Description Characters"](e)||fo.Kanbun(e)||fo.Katakana(e)&&12540!==e||!(!fo["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!fo["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||fo["Vertical Forms"](e)||fo["Yijing Hexagram Symbols"](e)||/\p{sc=Cans}/u.test(String.fromCodePoint(e))||/\p{sc=Hang}/u.test(String.fromCodePoint(e))||bo.test(String.fromCodePoint(e)))))}function xo(e){return!(wo(e)||function(e){return!!(fo["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||fo["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||fo["Letterlike Symbols"](e)||fo["Number Forms"](e)||fo["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||fo["Control Pictures"](e)&&9251!==e||fo["Optical Character Recognition"](e)||fo["Enclosed Alphanumerics"](e)||fo["Geometric Shapes"](e)||fo["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||fo["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||fo["CJK Symbols and Punctuation"](e)||fo.Katakana(e)||fo["Private Use Area"](e)||fo["CJK Compatibility Forms"](e)||fo["Small Form Variants"](e)||fo["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}const So=yo(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Eo(e){return So.test(String.fromCodePoint(e))}function To(e,t){return!(!t&&Eo(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||fo.Khmer(e))}function Mo(e){for(const t of e)if(Eo(t.charCodeAt(0)))return!0;return!1}const Ao=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){if(Ao.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getRTLTextPluginStatus(){return this.pluginStatus}syncState(e,n){return t(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if("loading"!==e.pluginStatus)return this.setState(e),e;const t=e.pluginURL,r=new Promise(e=>{this.loadScriptResolve=e});n(t);const i=new Promise(e=>setTimeout(()=>e(),this.TIMEOUT));if(yield Promise.race([r,i]),this.isParsed()){const e={pluginStatus:"loaded",pluginURL:t};return this.setState(e),e}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${t}`)})}};class ko{constructor(e,t){this.zoom=e,t?(this.now=t.now||0,this.fadeDuration=t.fadeDuration||0,this.zoomHistory=t.zoomHistory||new po,this.transition=t.transition||{},this.globalState=t.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new po,this.transition={},this.globalState={})}isSupportedScript(e){return function(e,t){for(const n of e)if(!To(n.charCodeAt(0),t))return!1;return!0}(e,"loaded"===Ao.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}class Co{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Gr(e))return new si(e,t);if(ti(e)){const n=oi(e,t);if("error"===n.result)throw new Error(n.value.map(e=>`${e.key}: ${e.message}`).join(", "));return n.value}{let n=e;return"color"===t.type&&"string"==typeof e?n=Mt.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"numberArray"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"colorArray"!==t.type||"string"!=typeof e&&!Array.isArray(e)?"variableAnchorOffsetCollection"===t.type&&Array.isArray(e)?n=Nt.parse(e):"projectionDefinition"===t.type&&"string"==typeof e&&(n=zt.parse(e)):n=Rt.parse(e):n=Ot.parse(e):n=Pt.parse(e),{globalStateRefs:new Set,kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class Io{constructor(e){this.property=e,this.value=new Co(e,void 0)}transitioned(e,t){return new Oo(this.property,this.value,t,z({},e.transition,this.transition),e.now)}untransitioned(){return new Oo(this.property,this.value,null,{},0)}}class Po{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return V(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Io(this._values[e].property)),this._values[e].value=new Co(this._values[e].property,null===t?void 0:V(t))}getTransition(e){return V(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Io(this._values[e].property)),this._values[e].transition=V(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new Ro(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new Ro(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Oo{constructor(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const s=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,R(s))}}return i}}class Ro{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new No(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Do{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return void 0!==this._values[e].value}getValue(e){return V(this._values[e].value)}setValue(e,t){this._values[e]=new Co(this._values[e].property,null===t?void 0:V(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new No(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class Lo{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class No{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Fo{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,n){const r=mn[this.specification.type];return r?r(e,t,n):e}}class zo{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new Lo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Lo(this,{kind:"constant",value:void 0},e.parameters);const r=mn[this.specification.type];if(r){const i=r(e.value.value,t.value.value,n);return new Lo(this,{kind:"constant",value:i},e.parameters)}return e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class Uo extends zo{possiblyEvaluate(e,t,n,r){if(void 0===e.value)return new Lo(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,s=this._calculate(o,o,o,t);return new Lo(this,{kind:"constant",value:s},t)}if("camera"===e.expression.kind){const n=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Lo(this,{kind:"constant",value:n},t)}return new Lo(this,e.expression,t)}evaluate(e,t,n,r,i,o){if("source"===e.kind){const s=e.evaluate(t,n,r,i,o);return this._calculate(s,s,s,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class jo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new ko(Math.floor(t.zoom-1),t)),e.expression.evaluate(new ko(Math.floor(t.zoom),t)),e.expression.evaluate(new ko(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}interpolate(e){return e}}class Bo{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class Vo{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const n=e[t];n.specification.overridable&&this.overridableProperties.push(t);const r=this.defaultPropertyValues[t]=new Co(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new Io(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}}}so("DataDrivenProperty",zo),so("DataConstantProperty",Fo),so("CrossFadedDataDrivenProperty",Uo),so("CrossFadedProperty",jo),so("ColorRampProperty",Bo);const Ho="-transition";class $o extends ye{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=hi(e.filter)),t.layout&&(this._unevaluatedLayout=new Do(t.layout)),t.paint)){this._transitionablePaint=new Po(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new No(t.paint)}}setFilter(e){this.filter=e,this._featureFilter=hi(e)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;if(this._unevaluatedLayout)for(const t in this._unevaluatedLayout._values){const n=this._unevaluatedLayout._values[t];for(const t of n.getGlobalStateRefs())e.add(t)}for(const t of this._featureFilter.getGlobalStateRefs())e.add(t);return e}setLayoutProperty(e,t,n={}){null!=t&&this._validate(no,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(Ho)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(to,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(e.endsWith(Ho))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const s=this._transitionablePaint._values[e].value;return s.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(e,o,s)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),B(e,(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}_validate(e,t,n,r,i={}){return(!i||!1!==i.validate)&&ro(this,e.call(Xi,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Lo&&Vr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const Yo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Go{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Wo(e,t=1){let n=0,r=0;return{members:e.map(e=>{const i=Yo[e.type].BYTES_PER_ELEMENT,o=n=Ko(n,Math.max(t,i)),s=e.components||1;return r=Math.max(r,i),n+=i*s,{name:e.name,type:e.type,components:s,offset:o}}),size:Ko(n,Math.max(r,t)),alignment:t}}function Ko(e,t){return Math.ceil(e/t)*t}class Zo extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}Zo.prototype.bytesPerElement=4,so("StructArrayLayout2i4",Zo);class Jo extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}Jo.prototype.bytesPerElement=6,so("StructArrayLayout3i6",Jo);class Xo extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}Xo.prototype.bytesPerElement=8,so("StructArrayLayout4i8",Xo);class Qo extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,s){const a=6*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,this.int16[a+4]=o,this.int16[a+5]=s,e}}Qo.prototype.bytesPerElement=12,so("StructArrayLayout2i4i12",Qo);class es extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,s){const a=4*e,l=8*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=s,e}}es.prototype.bytesPerElement=8,so("StructArrayLayout2i4ub8",es);class ts extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}ts.prototype.bytesPerElement=8,so("StructArrayLayout2f8",ts);class ns extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,s,a,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,s,a,l,c)}emplace(e,t,n,r,i,o,s,a,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=s,this.uint16[h+6]=a,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}ns.prototype.bytesPerElement=20,so("StructArrayLayout10ui20",ns);class rs extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,s,a,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,o,s,a,l,c,u,h)}emplace(e,t,n,r,i,o,s,a,l,c,u,h,d){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=s,this.uint16[p+6]=a,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,e}}rs.prototype.bytesPerElement=24,so("StructArrayLayout4i4ui4i24",rs);class is extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}is.prototype.bytesPerElement=12,so("StructArrayLayout3f12",is);class os extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}os.prototype.bytesPerElement=4,so("StructArrayLayout1ul4",os);class ss extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,s,a,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,i,o,s,a,l)}emplace(e,t,n,r,i,o,s,a,l,c){const u=10*e,h=5*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.int16[u+4]=o,this.int16[u+5]=s,this.uint32[h+3]=a,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}ss.prototype.bytesPerElement=20,so("StructArrayLayout6i1ul2ui20",ss);class as extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,s){const a=6*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,this.int16[a+4]=o,this.int16[a+5]=s,e}}as.prototype.bytesPerElement=12,so("StructArrayLayout2i2i2i12",as);class ls extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const s=4*e,a=8*e;return this.float32[s+0]=t,this.float32[s+1]=n,this.float32[s+2]=r,this.int16[a+6]=i,this.int16[a+7]=o,e}}ls.prototype.bytesPerElement=16,so("StructArrayLayout2f1f2i16",ls);class cs extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,s){const a=16*e,l=4*e,c=8*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[l+1]=r,this.float32[l+2]=i,this.int16[c+6]=o,this.int16[c+7]=s,e}}cs.prototype.bytesPerElement=16,so("StructArrayLayout2ub2f2i16",cs);class us extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}us.prototype.bytesPerElement=6,so("StructArrayLayout3ui6",us);class hs extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g)}emplace(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y){const v=24*e,_=12*e,b=48*e;return this.int16[v+0]=t,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=s,this.uint32[_+4]=a,this.uint16[v+10]=l,this.uint16[v+11]=c,this.uint16[v+12]=u,this.float32[_+7]=h,this.float32[_+8]=d,this.uint8[b+36]=p,this.uint8[b+37]=f,this.uint8[b+38]=m,this.uint32[_+10]=g,this.int16[v+22]=y,e}}hs.prototype.bytesPerElement=48,so("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",hs);class ds extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_,b,w,x,S,E,T,M,A){const k=this.length;return this.resize(k+1),this.emplace(k,e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_,b,w,x,S,E,T,M,A)}emplace(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_,b,w,x,S,E,T,M,A,k){const C=32*e,I=16*e;return this.int16[C+0]=t,this.int16[C+1]=n,this.int16[C+2]=r,this.int16[C+3]=i,this.int16[C+4]=o,this.int16[C+5]=s,this.int16[C+6]=a,this.int16[C+7]=l,this.uint16[C+8]=c,this.uint16[C+9]=u,this.uint16[C+10]=h,this.uint16[C+11]=d,this.uint16[C+12]=p,this.uint16[C+13]=f,this.uint16[C+14]=m,this.uint16[C+15]=g,this.uint16[C+16]=y,this.uint16[C+17]=v,this.uint16[C+18]=_,this.uint16[C+19]=b,this.uint16[C+20]=w,this.uint16[C+21]=x,this.uint16[C+22]=S,this.uint32[I+12]=E,this.float32[I+13]=T,this.float32[I+14]=M,this.uint16[C+30]=A,this.uint16[C+31]=k,e}}ds.prototype.bytesPerElement=64,so("StructArrayLayout8i15ui1ul2f2ui64",ds);class ps extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}ps.prototype.bytesPerElement=4,so("StructArrayLayout1f4",ps);class fs extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[6*e+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}fs.prototype.bytesPerElement=12,so("StructArrayLayout1ui2f12",fs);class ms extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=4*e;return this.uint32[2*e+0]=t,this.uint16[i+2]=n,this.uint16[i+3]=r,e}}ms.prototype.bytesPerElement=8,so("StructArrayLayout1ul2ui8",ms);class gs extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}gs.prototype.bytesPerElement=4,so("StructArrayLayout2ui4",gs);class ys extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}ys.prototype.bytesPerElement=2,so("StructArrayLayout1ui2",ys);class vs extends qo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}vs.prototype.bytesPerElement=16,so("StructArrayLayout4f16",vs);class _s extends Go{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new n(this.anchorPointX,this.anchorPointY)}}_s.prototype.size=20;class bs extends ss{get(e){return new _s(this,e)}}so("CollisionBoxArray",bs);class ws extends Go{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ws.prototype.size=48;class xs extends hs{get(e){return new ws(this,e)}}so("PlacedSymbolArray",xs);class Ss extends Go{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ss.prototype.size=64;class Es extends ds{get(e){return new Ss(this,e)}}so("SymbolInstanceArray",Es);class Ts extends ps{getoffsetX(e){return this.float32[1*e+0]}}so("GlyphOffsetArray",Ts);class Ms extends Jo{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}so("SymbolLineVertexArray",Ms);class As extends Go{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}As.prototype.size=12;class ks extends fs{get(e){return new As(this,e)}}so("TextAnchorOffsetArray",ks);class Cs extends Go{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Cs.prototype.size=8;class Is extends ms{get(e){return new Cs(this,e)}}so("FeatureIndexArray",Is);class Ps extends Zo{}class Os extends Zo{}class Rs extends Zo{}class Ds extends Qo{}class Ls extends es{}class Ns extends ts{}class Fs extends ns{}class zs extends rs{}class Us extends is{}class js extends os{}class Bs extends as{}class Vs extends cs{}class Hs extends us{}class $s extends gs{}const Ys=Wo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gs}=Ys;class qs{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,t,n,r){const i=this.segments[this.segments.length-1];return e>qs.MAX_VERTEX_ARRAY_LENGTH&&$(`Max vertices per segment is ${qs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${qs.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!i||i.vertexLength+e>qs.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r?this.createNewSegment(t,n,r):i}createNewSegment(e,t,n){const r={vertexOffset:e.length,primitiveOffset:t.length,vertexLength:0,primitiveLength:0,vaos:{}};return void 0!==n&&(r.sortKey=n),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(r),r}getOrCreateLatestSegment(e,t,n){return this.prepareSegment(0,e,t,n)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new qs([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}function Ws(e,t){return 256*(e=N(Math.floor(e),0,255))+N(Math.floor(t),0,255)}qs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,so("SegmentVector",qs);const Ks=Wo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Zs,Js,Xs,Qs={exports:{}},ea={exports:{}},ta={exports:{}},na=function(){if(Xs)return Qs.exports;Xs=1;var e=(Zs||(Zs=1,ea.exports=function(e,t){var n,r,i,o,s,a,l,c;for(r=e.length-(n=3&e.length),i=t,s=3432918353,a=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}),ea.exports),t=(Js||(Js=1,ta.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}),ta.exports);return Qs.exports=e,Qs.exports.murmur3=e,Qs.exports.murmur2=t,Qs.exports}(),ra=r(na);class ia{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(oa(e)),this.positions.push(t,n,r)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=oa(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return sa(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new ia;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function oa(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ra(String(e))}function sa(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let o=n-1,s=r+1;for(;;){do{o++}while(e[o]<i);do{s--}while(e[s]>i);if(o>=s)break;aa(e,o,s),aa(t,3*o,3*s),aa(t,3*o+1,3*s+1),aa(t,3*o+2,3*s+2)}s-n<r-s?(sa(e,t,n,s),n=s+1):(sa(e,t,s+1,r),r=s)}}function aa(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}so("FeaturePositionMap",ia);class la{constructor(e,t){this.gl=e.gl,this.location=t}}class ca extends la{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class ua extends la{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class ha extends la{constructor(e,t){super(e,t),this.current=Mt.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const da=new Float32Array(16);function pa(e){return[Ws(255*e.r,255*e.g),Ws(255*e.b,255*e.a)]}class fa{constructor(e,t,n){this.value=e,this.uniformNames=t.map(e=>`u_${e}`),this.type=n}setUniform(e,t,n){e.set(n.constantOr(this.value))}getBinding(e,t,n){return"color"===this.type?new ha(e,t):new ca(e,t)}}class ma{constructor(e,t){this.uniformNames=t.map(e=>`u_${e}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,n,r){const i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)}getBinding(e,t,n){return"u_pattern"===n.substr(0,9)?new ua(e,t):new ca(e,t)}}class ga{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0})),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i){const o=this.paintVertexArray.length,s=this.expression.evaluate(new ko(0),t,{},r,[],i);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}updatePaintArray(e,t,n,r){const i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(e,t,i)}_setPaintValue(e,t,n){if("color"===this.type){const r=pa(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ya{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map(e=>`u_${e}_t`),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i){const o=this.expression.evaluate(new ko(this.zoom),t,{},r,[],i),s=this.expression.evaluate(new ko(this.zoom+1),t,{},r,[],i),a=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(a,e,o,s)}updatePaintArray(e,t,n,r){const i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(e,t,i,o)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=pa(n),o=pa(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=N(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)}getBinding(e,t,n){return new ca(e,t)}}class va{constructor(e,t,n,r,i,o){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(e,t,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],i)}_setPaintValues(e,t,n,r){if(!r||!n)return;const{min:i,mid:o,max:s}=n,a=r[i],l=r[o],c=r[s];if(a&&l&&c)for(let u=e;u<t;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],l.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Ks.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Ks.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _a{constructor(e,t,n){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof Lo&&Vr(o.property.specification)))continue;const s=wa(i,e.type),a=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===a.kind)this.binders[i]=h?new ma(a.value,s):new fa(a.value,s,l),r.push(`/u_${i}`);else if("source"===a.kind||h){const n=xa(i,l,"source");this.binders[i]=h?new va(a,l,c,t,n,e.id):new ga(a,s,l,n),r.push(`/a_${i}`)}else{const e=xa(i,l,"composite");this.binders[i]=new ya(a,s,l,c,t,e),r.push(`/z_${i}`)}}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof ga||t instanceof ya?t.maxValue:0}populatePaintArrays(e,t,n,r,i){for(const o in this.binders){const s=this.binders[o];(s instanceof ga||s instanceof ya||s instanceof va)&&s.populatePaintArray(e,t,n,r,i)}}setConstantPatternPositions(e,t){for(const n in this.binders){const r=this.binders[n];r instanceof ma&&r.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,n,r,i){let o=!1;for(const s in e){const a=t.getPositions(s);for(const t of a){const a=n.feature(t.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof ga||l instanceof ya||l instanceof va)&&!0===l.expression.isStateDependent){const c=r.paint.get(n);l.expression=c.value,l.updatePaintArray(t.start,t.end,a,e[s],i),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof fa||n instanceof ma)&&e.push(...n.uniformNames.map(e=>`#define HAS_UNIFORM_${e}`))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof ga||n instanceof ya)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name);else if(n instanceof va)for(let t=0;t<Ks.members.length;t++)e.push(Ks.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof fa||n instanceof ma||n instanceof ya)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof fa||i instanceof ma||i instanceof ya)for(const o of i.uniformNames)if(t[o]){const s=i.getBinding(e,t[o],o);n.push({name:o,property:r,binding:s})}}return n}setUniforms(e,t,n,r){for(const{name:i,property:o,binding:s}of t)this.binders[o].setUniform(s,r,n.get(o),i)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const n=this.binders[t];if(e&&n instanceof va){const t=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(n instanceof ga||n instanceof ya)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof ga||n instanceof ya||n instanceof va)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof ga||t instanceof ya||t instanceof va)&&t.destroy()}}}class ba{constructor(e,t,n=()=>!0){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new _a(r,t,n);this.needsUpload=!1,this._featureMap=new ia,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,r,i,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r){for(const i of n)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(e,this._featureMap,t,i,r)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function wa(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function xa(e,t,n){const r={color:{source:ts,composite:vs},number:{source:ps,composite:ts}},i=function(e){return{"line-pattern":{source:Fs,composite:Fs},"fill-pattern":{source:Fs,composite:Fs},"fill-extrusion-pattern":{source:Fs,composite:Fs}}[e]}(e);return i&&i[n]||r[t][n]}so("ConstantBinder",fa),so("CrossFadedConstantBinder",ma),so("SourceExpressionBinder",ga),so("CrossFadedCompositeBinder",va),so("CompositeExpressionBinder",ya),so("ProgramConfiguration",_a,{omit:["_buffers"]}),so("ProgramConfigurationSet",ba);const Sa=Math.pow(2,14)-1,Ea=-Sa-1;function Ta(e){const t=C/e.extent,n=e.loadGeometry();for(let r=0;r<n.length;r++){const e=n[r];for(let n=0;n<e.length;n++){const r=e[n],i=Math.round(r.x*t),o=Math.round(r.y*t);r.x=N(i,Ea,Sa),r.y=N(o,Ea,Sa),(i<r.x||i>r.x+1||o<r.y||o>r.y+1)&&$("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Ma(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Ta(e):[]}}const Aa=-32768;function ka(e,t,n,r,i){e.emplaceBack(Aa+8*t+r,Aa+8*n+i)}class Ca{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Os,this.indexArray=new Hs,this.segments=new qs,this.programConfigurations=new ba(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){const r=this.layers[0],i=[];let o=null,s=!1,a="heatmap"===r.type;if("circle"===r.type){const e=r;o=e.layout.get("circle-sort-key"),s=!o.isConstant(),a=a||"map"===e.paint.get("circle-pitch-alignment")}const l=a?t.subdivisionGranularity.circle:1;for(const{feature:c,id:u,index:h,sourceLayerIndex:d}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Ma(c,e);if(!this.layers[0]._featureFilter.filter(new ko(this.zoom,{globalState:this.globalState}),t,n))continue;const r=s?o.evaluate(t,{},n):void 0,a={id:u,properties:c.properties,type:c.type,sourceLayerIndex:d,index:h,geometry:e?t.geometry:Ta(c),patterns:{},sortKey:r};i.push(a)}s&&i.sort((e,t)=>e.sortKey-t.sortKey);for(const c of i){const{geometry:r,index:i,sourceLayerIndex:o}=c,s=e[i].feature;this.addFeature(c,r,i,n,l),t.featureIndex.insert(s,r,i,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Gs),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,i=1){let o;switch(i){case 1:o=[0,7];break;case 3:o=[0,2,5,7];break;case 5:o=[0,1,3,4,6,7];break;case 7:o=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${i}; valid values are 1, 3, 5, 7.`)}const s=o.length;for(const a of t)for(const t of a){const n=t.x,r=t.y;if(n<0||n>=C||r<0||r>=C)continue;const i=this.segments.prepareSegment(s*s,this.layoutVertexArray,this.indexArray,e.sortKey),a=i.vertexLength;for(let e=0;e<s;e++)for(let t=0;t<s;t++)ka(this.layoutVertexArray,n,r,o[t],o[e]);for(let e=0;e<s-1;e++)for(let t=0;t<s-1;t++){const n=a+e*s+t,r=a+(e+1)*s+t;this.indexArray.emplaceBack(n,r+1,n+1),this.indexArray.emplaceBack(n,r,r+1)}i.vertexLength+=s*s,i.primitiveLength+=(s-1)*(s-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)}}function Ia(e,t){for(let n=0;n<e.length;n++)if(Ua(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Ua(e,t[n]))return!0;return!!Da(e,t)}function Pa(e,t,n){return!!Ua(e,t)||!!Na(t,e,n)}function Oa(e,t){if(1===e.length)return za(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(Ua(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(za(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Da(e,t[n]))return!0;return!1}function Ra(e,t,n){if(e.length>1){if(Da(e,t))return!0;for(let r=0;r<t.length;r++)if(Na(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(Na(e[r],t,n))return!0;return!1}function Da(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(La(r,i,t[e],t[e+1]))return!0}return!1}function La(e,t,n,r){return Y(e,n,r)!==Y(t,n,r)&&Y(e,t,n)!==Y(e,t,r)}function Na(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let i=1;i<t.length;i++)if(Fa(e,t[i-1],t[i])<r)return!0;return!1}function Fa(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function za(e,t){let n,r,i,o=!1;for(let s=0;s<e.length;s++){n=e[s];for(let e=0,s=n.length-1;e<n.length;s=e++)r=n[e],i=n[s],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function Ua(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],s=e[i];o.y>t.y!=s.y>t.y&&t.x<(s.x-o.x)*(t.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}function ja(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=Y(e,t,n[0]);return o!==Y(e,t,n[1])||o!==Y(e,t,n[2])||o!==Y(e,t,n[3])}function Ba(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Va(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ha(e,t,r,i,o){if(!t[0]&&!t[1])return e;const s=n.convert(t)._mult(o);"viewport"===r&&s._rotate(-i);const a=[];for(let n=0;n<e.length;n++)a.push(e[n].sub(s));return a}let $a,Ya;so("CircleBucket",Ca,{omit:["layers"]});var Ga={get paint(){return Ya=Ya||new Vo({"circle-radius":new zo(ve.paint_circle["circle-radius"]),"circle-color":new zo(ve.paint_circle["circle-color"]),"circle-blur":new zo(ve.paint_circle["circle-blur"]),"circle-opacity":new zo(ve.paint_circle["circle-opacity"]),"circle-translate":new Fo(ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Fo(ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fo(ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fo(ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zo(ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zo(ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zo(ve.paint_circle["circle-stroke-opacity"])})},get layout(){return $a=$a||new Vo({"circle-sort-key":new zo(ve.layout_circle["circle-sort-key"])})}};class qa extends $o{constructor(e){super(e,Ga)}createBucket(e){return new Ca(e)}queryRadius(e){const t=e;return Ba("circle-radius",this,t)+Ba("circle-stroke-width",this,t)+Va(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:t,featureState:n,geometry:r,transform:i,pixelsToTileUnits:o,unwrappedTileID:s,getElevation:a}){const l=Ha(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-i.bearingInRadians,o),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(e,t,n,r){return e.map(e=>Wa(e,t,n,r))}(l,i,s,a),d=u?c*o:c;for(const p of r)for(const e of p){const t=u?e:Wa(e,i,s,a);let n=d;const r=i.projectTileCoordinates(e.x,e.y,s,a).signedDistanceFromCamera;if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=r/i.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=i.cameraToCenterDistance/r),Pa(h,t,n))return!0}return!1}}function Wa(e,t,r,i){const o=t.projectTileCoordinates(e.x,e.y,r,i).point;return new n((.5*o.x+.5)*t.width,(.5*-o.y+.5)*t.height)}class Ka extends Ca{}let Za;so("HeatmapBucket",Ka,{omit:["layers"]});var Ja={get paint(){return Za=Za||new Vo({"heatmap-radius":new zo(ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zo(ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fo(ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Bo(ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fo(ve.paint_heatmap["heatmap-opacity"])})}};function Xa(e,{width:t,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*n*r)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${t*n*r}`)}else i=new Uint8Array(t*n*r);return e.width=t,e.height=n,e.data=i,e}function Qa(e,{width:t,height:n},r){if(t===e.width&&n===e.height)return;const i=Xa({},{width:t,height:n},r);el(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,n)},r),e.width=t,e.height=n,e.data=i.data}function el(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const s=e.data,a=t.data;if(s===a)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){const c=((n.y+l)*e.width+n.x)*o,u=((r.y+l)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)a[u+e]=s[c+e]}return t}class tl{constructor(e,t){Xa(this,e,1,t)}resize(e){Qa(this,e,1)}clone(){return new tl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){el(e,t,n,r,i,1)}}class nl{constructor(e,t){Xa(this,e,4,t)}resize(e){Qa(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new nl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){el(e,t,n,r,i,4)}setPixel(e,t,n){const r=4*(e*this.width+t);this.data[r+0]=Math.round(255*n.r/n.a),this.data[r+1]=Math.round(255*n.g/n.a),this.data[r+2]=Math.round(255*n.b/n.a),this.data[r+3]=Math.round(255*n.a)}}function rl(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new nl({width:n,height:r});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const o=(r,o,s)=>{t[e.evaluationKey]=s;const a=e.expression.evaluate(t);i.setPixel(r/4/n,o/4,a)};if(e.clips)for(let s=0,a=0;s<r;++s,a+=4*n)for(let t=0,r=0;t<n;t++,r+=4){const i=t/(n-1),{start:l,end:c}=e.clips[s];o(a,r,l*(1-i)+c*i)}else for(let s=0,a=0;s<n;s++,a+=4)o(0,a,s/(n-1));return i}so("AlphaImage",tl),so("RGBAImage",nl);const il="big-fb";class ol extends $o{createBucket(e){return new Ka(e)}constructor(e){super(e,Ja),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=rl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(il)&&this.heatmapFbos.delete(il)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let sl;var al={get paint(){return sl=sl||new Vo({"hillshade-illumination-direction":new Fo(ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Fo(ve.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Fo(ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fo(ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fo(ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fo(ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fo(ve.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Fo(ve.paint_hillshade["hillshade-method"])})}};class ll extends $o{constructor(e){super(e,al),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,t=this.paint.get("hillshade-illumination-altitude").values,n=this.paint.get("hillshade-highlight-color").values,r=this.paint.get("hillshade-shadow-color").values;const i=Math.max(e.length,t.length,n.length,r.length);e=e.concat(Array(i-e.length).fill(e.at(-1))),t=t.concat(Array(i-t.length).fill(t.at(-1))),n=n.concat(Array(i-n.length).fill(n.at(-1))),r=r.concat(Array(i-r.length).fill(r.at(-1)));const o=t.map(ee);return{directionRadians:e.map(ee),altitudeRadians:o,shadowColor:r,highlightColor:n}}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}let cl;var ul={get paint(){return cl=cl||new Vo({"color-relief-opacity":new Fo(ve["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Bo(ve["paint_color-relief"]["color-relief-color"])})}};class hl{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,t,n){const{width:r,height:i}=e,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),{context:s}=this,{gl:a}=s;if(this.useMipmap=Boolean(t&&t.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!t||!1!==t.premultiply)),o)this.size=[r,i],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||W(e)?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,e):a.texImage2D(a.TEXTURE_2D,0,this.format,r,i,0,this.format,a.UNSIGNED_BYTE,e.data);else{const{x:t,y:o}=n||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||W(e)?a.texSubImage2D(a.TEXTURE_2D,0,t,o,a.RGBA,a.UNSIGNED_BYTE,e):a.texSubImage2D(a.TEXTURE_2D,0,t,o,r,i,a.RGBA,a.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D),s.pixelStoreUnpackFlipY.setDefault(),s.pixelStoreUnpack.setDefault(),s.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,t,n){const{context:r}=this,{gl:i}=r;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class dl{constructor(e,t,n,r=1,i=1,o=1,s=0){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&!["mapbox","terrarium","custom"].includes(n))return void $(`"${n}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=t.height;const a=this.dim=t.height-2;switch(this.data=new Uint32Array(t.data.buffer),n){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=r,this.greenFactor=i,this.blueFactor=o,this.baseShift=s;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let l=0;l<a;l++)this.data[this._idx(-1,l)]=this.data[this._idx(0,l)],this.data[this._idx(a,l)]=this.data[this._idx(a-1,l)],this.data[this._idx(l,-1)]=this.data[this._idx(l,0)],this.data[this._idx(l,a)]=this.data[this._idx(l,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let l=0;l<a;l++)for(let e=0;e<a;e++){const t=this.get(l,e);t>this.max&&(this.max=t),t<this.min&&(this.min=t)}}get(e,t){const n=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return this.unpack(n[r],n[r+1],n[r+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}unpack(e,t,n){return e*this.redFactor+t*this.greenFactor+n*this.blueFactor-this.baseShift}pack(e){return pl(e,this.getUnpackVector())}getPixels(){return new nl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,s=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=s-1;break;case 1:s=o+1}const a=-t*this.dim,l=-n*this.dim;for(let c=o;c<s;c++)for(let t=r;t<i;t++)this.data[this._idx(t,c)]=e.data[this._idx(t+a,c+l)]}}function pl(e,t){const n=t[0],r=t[1],i=t[2],o=t[3],s=Math.min(n,r,i),a=Math.round((e+o)/s);return{r:Math.floor(a*s/n)%256,g:Math.floor(a*s/r)%256,b:Math.floor(a*s/i)%256}}so("DEMData",dl);class fl extends $o{constructor(e){super(e,ul)}_createColorRamp(e){const t={elevationStops:[],colorStops:[]},n=this._transitionablePaint._values["color-relief-color"].value.expression;if(n instanceof ri&&n._styleExpression.expression instanceof pn){this.colorRampExpression=n;const e=n._styleExpression.expression;t.elevationStops=e.labels,t.colorStops=[];for(const n of t.elevationStops)t.colorStops.push(e.evaluate({globals:{elevation:n}}))}if(t.elevationStops.length<1&&(t.elevationStops=[0],t.colorStops=[Mt.transparent]),t.elevationStops.length<2&&(t.elevationStops.push(t.elevationStops[0]+1),t.colorStops.push(t.colorStops[0])),t.elevationStops.length<=e)return t;const r={elevationStops:[],colorStops:[]},i=(t.elevationStops.length-1)/(e-1);for(let o=0;o<t.elevationStops.length-.5;o+=i)r.elevationStops.push(t.elevationStops[Math.round(o)]),r.colorStops.push(t.colorStops[Math.round(o)]);return $(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),r}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,t,n){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const r=this._createColorRamp(t),i=new nl({width:r.colorStops.length,height:1}),o=new nl({width:r.colorStops.length,height:1});for(let s=0;s<r.elevationStops.length;s++){const e=pl(r.elevationStops[s],n);o.setPixel(0,s,new Mt(e.r/255,e.g/255,e.b/255,1)),i.setPixel(0,s,r.colorStops[s])}return this.colorRampTextures={elevationTexture:new hl(e,o,e.gl.RGBA),colorTexture:new hl(e,i,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return"none"!==this.visibility&&!!this.colorRampTextures}}const ml=Wo([{name:"a_pos",components:2,type:"Int16"}],4),{members:gl}=ml;function yl(e,t,n){const r=n.patternDependencies;let i=!1;for(const o of t){const t=o.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const n=t.constantOr(null);n&&(i=!0,r[n.to]=!0,r[n.from]=!0)}return i}function vl(e,t,n,r,i){const o=i.patternDependencies;for(const s of t){const t=s.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r-1},n,{},i.availableImages),a=t.evaluate({zoom:r},n,{},i.availableImages),l=t.evaluate({zoom:r+1},n,{},i.availableImages);e=e&&e.name?e.name:e,a=a&&a.name?a.name:a,l=l&&l.name?l.name:l,o[e]=!0,o[a]=!0,o[l]=!0,n.patterns[s.id]={min:e,mid:a,max:l}}}return n}function _l(e,t,n,r,i){let o;if(i===function(e,t,n,r){let i=0;for(let o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}(e,t,n,r)>0)for(let s=t;s<n;s+=r)o=Bl(s/r|0,e[s],e[s+1],o);else for(let s=n-r;s>=t;s-=r)o=Bl(s/r|0,e[s],e[s+1],o);return o&&Ll(o,o.next)&&(Vl(o),o=o.next),o}function bl(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Ll(r,r.next)&&0!==Dl(r.prev,r,r.next))r=r.next;else{if(Vl(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function wl(e,t,n,r,i,o,s){if(!e)return;!s&&o&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=Cl(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n=1;do{let r,i=e;e=null;let o=null;for(t=0;i;){t++;let s=i,a=0;for(let e=0;e<n&&(a++,s=s.nextZ,s);e++);let l=n;for(;a>0||l>0&&s;)0!==a&&(0===l||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=s}o.nextZ=null,n*=2}while(t>1)}(i)}(e,r,i,o);let a=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(o?Sl(e,r,i,o):xl(e))t.push(l.i,e.i,c.i),Vl(e),e=c.next,a=c.next;else if((e=c)===a){s?1===s?wl(e=El(bl(e),t),t,n,r,i,o,2):2===s&&Tl(e,t,n,r,i,o):wl(bl(e),t,n,r,i,o,1);break}}}function xl(e){const t=e.prev,n=e,r=e.next;if(Dl(t,n,r)>=0)return!1;const i=t.x,o=n.x,s=r.x,a=t.y,l=n.y,c=r.y,u=Math.min(i,o,s),h=Math.min(a,l,c),d=Math.max(i,o,s),p=Math.max(a,l,c);let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&Ol(i,a,o,l,s,c,f.x,f.y)&&Dl(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Sl(e,t,n,r){const i=e.prev,o=e,s=e.next;if(Dl(i,o,s)>=0)return!1;const a=i.x,l=o.x,c=s.x,u=i.y,h=o.y,d=s.y,p=Math.min(a,l,c),f=Math.min(u,h,d),m=Math.max(a,l,c),g=Math.max(u,h,d),y=Cl(p,f,t,n,r),v=Cl(m,g,t,n,r);let _=e.prevZ,b=e.nextZ;for(;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==s&&Ol(a,u,l,h,c,d,_.x,_.y)&&Dl(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==s&&Ol(a,u,l,h,c,d,b.x,b.y)&&Dl(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==s&&Ol(a,u,l,h,c,d,_.x,_.y)&&Dl(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==s&&Ol(a,u,l,h,c,d,b.x,b.y)&&Dl(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function El(e,t){let n=e;do{const r=n.prev,i=n.next.next;!Ll(r,i)&&Nl(r,n,n.next,i)&&Ul(r,i)&&Ul(i,r)&&(t.push(r.i,n.i,i.i),Vl(n),Vl(n.next),n=e=i),n=n.next}while(n!==e);return bl(n)}function Tl(e,t,n,r,i,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Rl(s,e)){let a=jl(s,e);return s=bl(s,s.next),a=bl(a,a.next),wl(s,t,n,r,i,o,0),void wl(a,t,n,r,i,o,0)}e=e.next}s=s.next}while(s!==e)}function Ml(e,t){let n=e.x-t.x;return 0===n&&(n=e.y-t.y,0===n)&&(n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function Al(e,t){const n=function(e,t){let n=t;const r=e.x,i=e.y;let o,s=-1/0;if(Ll(e,n))return n;do{if(Ll(e,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>s&&(s=e,o=n.x<n.next.x?n:n.next,e===r))return o}n=n.next}while(n!==t);if(!o)return null;const a=o,l=o.x,c=o.y;let u=1/0;n=o;do{if(r>=n.x&&n.x>=l&&r!==n.x&&Pl(i<c?r:s,i,l,c,i<c?s:r,i,n.x,n.y)){const t=Math.abs(i-n.y)/(r-n.x);Ul(n,e)&&(t<u||t===u&&(n.x>o.x||n.x===o.x&&kl(o,n)))&&(o=n,u=t)}n=n.next}while(n!==a);return o}(e,t);if(!n)return t;const r=jl(n,e);return bl(r,r.next),bl(n,n.next)}function kl(e,t){return Dl(e.prev,e,t.prev)<0&&Dl(t.next,e,e.next)<0}function Cl(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Il(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Pl(e,t,n,r,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(r-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function Ol(e,t,n,r,i,o,s,a){return!(e===s&&t===a)&&Pl(e,t,n,r,i,o,s,a)}function Rl(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Nl(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Ul(e,t)&&Ul(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Dl(e.prev,e,t.prev)||Dl(e,t.prev,t))||Ll(e,t)&&Dl(e.prev,e,e.next)>0&&Dl(t.prev,t,t.next)>0)}function Dl(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ll(e,t){return e.x===t.x&&e.y===t.y}function Nl(e,t,n,r){const i=zl(Dl(e,t,n)),o=zl(Dl(e,t,r)),s=zl(Dl(n,r,e)),a=zl(Dl(n,r,t));return i!==o&&s!==a||!(0!==i||!Fl(e,n,t))||!(0!==o||!Fl(e,r,t))||!(0!==s||!Fl(n,e,r))||!(0!==a||!Fl(n,t,r))}function Fl(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function zl(e){return e>0?1:e<0?-1:0}function Ul(e,t){return Dl(e.prev,e,e.next)<0?Dl(e,t,e.next)>=0&&Dl(e,e.prev,t)>=0:Dl(e,t,e.prev)<0||Dl(e,e.next,t)<0}function jl(e,t){const n=Hl(e.i,e.x,e.y),r=Hl(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Bl(e,t,n,r){const i=Hl(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Vl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Hl(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class $l{constructor(e,t){if(t>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=t}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class Yl{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}Yl.noSubdivision=new Yl({fill:new $l(0,0),line:new $l(0,0),tile:new $l(0,0),stencil:new $l(0,0),circle:1}),so("SubdivisionGranularityExpression",$l),so("SubdivisionGranularitySetting",Yl);const Gl=-32768,ql=32767;class Wl{constructor(e,t){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=C/e,this._canonical=t}_getKey(e,t){return(e+=32768)<<16|t+32768}_vertexToIndex(e,t){if(e<-32768||t<-32768||e>32767||t>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const n=0|Math.round(e),r=0|Math.round(t),i=this._getKey(n,r);if(this._vertexDictionary.has(i))return this._vertexDictionary.get(i);const o=this._vertexBuffer.length/2;return this._vertexDictionary.set(i,o),this._vertexBuffer.push(n,r),o}_subdivideTrianglesScanline(e){if(this._granularity<2)return function(e,t){const n=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=t[r+1],s=t[r+2],a=e[2*i],l=e[2*i+1];(e[2*o]-a)*(e[2*s+1]-l)-(e[2*o+1]-l)*(e[2*s]-a)>0?(n.push(i),n.push(s),n.push(o)):(n.push(i),n.push(o),n.push(s))}return n}(this._vertexBuffer,e);const t=[],n=e.length;for(let r=0;r<n;r+=3){const n=[e[r+0],e[r+1],e[r+2]],i=[this._vertexBuffer[2*e[r+0]+0],this._vertexBuffer[2*e[r+0]+1],this._vertexBuffer[2*e[r+1]+0],this._vertexBuffer[2*e[r+1]+1],this._vertexBuffer[2*e[r+2]+0],this._vertexBuffer[2*e[r+2]+1]];let o=1/0,s=1/0,a=-1/0,l=-1/0;for(let e=0;e<3;e++){const t=i[2*e],n=i[2*e+1];o=Math.min(o,t),a=Math.max(a,t),s=Math.min(s,n),l=Math.max(l,n)}if(o===a||s===l)continue;const c=Math.floor(o/this._granularityCellSize),u=Math.ceil(a/this._granularityCellSize),h=Math.floor(s/this._granularityCellSize),d=Math.ceil(l/this._granularityCellSize);if(c!==u||h!==d)for(let e=h;e<d;e++){const r=this._scanlineGenerateVertexRingForCellRow(e,i,n);Jl(this._vertexBuffer,r,t)}else t.push(...n)}return t}_scanlineGenerateVertexRingForCellRow(e,t,n){const r=e*this._granularityCellSize,i=r+this._granularityCellSize,o=[];for(let s=0;s<3;s++){const e=t[2*s],a=t[2*s+1],l=t[2*(s+1)%6],c=t[(2*(s+1)+1)%6],u=t[2*(s+2)%6],h=t[(2*(s+2)+1)%6],d=l-e,p=c-a,f=0===d,m=0===p,g=(r-a)/p,y=(i-a)/p,v=Math.min(g,y),_=Math.max(g,y);if(!m&&(v>=1||_<=0)||m&&(a<r||a>i)){c>=r&&c<=i&&o.push(n[(s+1)%3]);continue}!m&&v>0&&o.push(this._vertexToIndex(e+d*v,a+p*v));const b=e+d*Math.max(v,0),w=e+d*Math.min(_,1);f||this._generateIntraEdgeVertices(o,e,a,l,c,b,w),!m&&_<1&&o.push(this._vertexToIndex(e+d*_,a+p*_)),(m||c>=r&&c<=i)&&o.push(n[(s+1)%3]),!m&&(c<=r||c>=i)&&this._generateInterEdgeVertices(o,e,a,l,c,u,h,w,r,i)}return o}_generateIntraEdgeVertices(e,t,n,r,i,o,s){const a=r-t,l=i-n,c=0===l,u=c?Math.min(t,r):Math.min(o,s),h=c?Math.max(t,r):Math.max(o,s),d=Math.floor(u/this._granularityCellSize)+1,p=Math.ceil(h/this._granularityCellSize)-1;if(c?t<r:o<s)for(let f=d;f<=p;f++){const r=f*this._granularityCellSize;e.push(this._vertexToIndex(r,n+l*(r-t)/a))}else for(let f=p;f>=d;f--){const r=f*this._granularityCellSize;e.push(this._vertexToIndex(r,n+l*(r-t)/a))}}_generateInterEdgeVertices(e,t,n,r,i,o,s,a,l,c){const u=i-n,h=o-r,d=s-i,p=(l-i)/d,f=(c-i)/d,m=Math.min(p,f),g=Math.max(p,f),y=r+h*m;let v=Math.floor(Math.min(y,a)/this._granularityCellSize)+1,_=Math.ceil(Math.max(y,a)/this._granularityCellSize)-1,b=a<y;const w=0===d;if(w&&(s===l||s===c))return;if(w||m>=1||g<=0){const e=n-s,r=o+(t-o)*Math.min((l-s)/e,(c-s)/e);v=Math.floor(Math.min(r,a)/this._granularityCellSize)+1,_=Math.ceil(Math.max(r,a)/this._granularityCellSize)-1,b=a<r}const x=u>0?c:l;if(b)for(let S=v;S<=_;S++)e.push(this._vertexToIndex(S*this._granularityCellSize,x));else for(let S=_;S>=v;S--)e.push(this._vertexToIndex(S*this._granularityCellSize,x))}_generateOutline(e){const t=[];for(const n of e){const e=Zl(n,this._granularity,!0),r=this._pointArrayToIndices(e),i=[];for(let t=1;t<r.length;t++)i.push(r[t-1]),i.push(r[t]);t.push(i)}return t}_handlePoles(e){let t=!1,n=!1;this._canonical&&(0===this._canonical.y&&(t=!0),this._canonical.y===(1<<this._canonical.z)-1&&(n=!0)),(t||n)&&this._fillPoles(e,t,n)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let t=0;t<e.length;t+=2){const n=e[t+1];n===Gl&&(e[t+1]=-32767),n===ql&&(e[t+1]=32766)}}_generatePoleQuad(e,t,n,r,i,o){r>i!=(o===Gl)?(e.push(t),e.push(n),e.push(this._vertexToIndex(r,o)),e.push(n),e.push(this._vertexToIndex(i,o)),e.push(this._vertexToIndex(r,o))):(e.push(n),e.push(t),e.push(this._vertexToIndex(r,o)),e.push(this._vertexToIndex(i,o)),e.push(n),e.push(this._vertexToIndex(r,o)))}_fillPoles(e,t,n){const r=this._vertexBuffer,i=C,o=e.length;for(let s=2;s<o;s+=3){const o=e[s-2],a=e[s-1],l=e[s],c=r[2*o],u=r[2*o+1],h=r[2*a],d=r[2*a+1],p=r[2*l],f=r[2*l+1];t&&(0===u&&0===d&&this._generatePoleQuad(e,o,a,c,h,Gl),0===d&&0===f&&this._generatePoleQuad(e,a,l,h,p,Gl),0===f&&0===u&&this._generatePoleQuad(e,l,o,p,c,Gl)),n&&(u===i&&d===i&&this._generatePoleQuad(e,o,a,c,h,ql),d===i&&f===i&&this._generatePoleQuad(e,a,l,h,p,ql),f===i&&u===i&&this._generatePoleQuad(e,l,o,p,c,ql))}}_initializeVertices(e){for(let t=0;t<e.length;t+=2)this._vertexToIndex(e[t],e[t+1])}subdividePolygonInternal(e,t){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:n,holeIndices:r}=function(e){const t=[],n=[];for(const r of e)if(0!==r.length){r!==e[0]&&t.push(n.length/2);for(let e=0;e<r.length;e++)n.push(r[e].x),n.push(r[e].y)}return{flattened:n,holeIndices:t}}(e);let i;this._initializeVertices(n);try{const e=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let o=_l(e,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(r&&(o=function(e,t,n,r){const i=[];for(let o=0,s=t.length;o<s;o++){const n=_l(e,t[o]*r,o<s-1?t[o+1]*r:e.length,r,!1);n===n.next&&(n.steiner=!0),i.push(Il(n))}i.sort(Ml);for(let o=0;o<i.length;o++)n=Al(i[o],n);return n}(e,t,o,n)),e.length>80*n){a=e[0],l=e[1];let t=a,r=l;for(let o=n;o<i;o+=n){const n=e[o],i=e[o+1];n<a&&(a=n),i<l&&(l=i),n>t&&(t=n),i>r&&(r=i)}c=Math.max(t-a,r-l),c=0!==c?32767/c:0}return wl(o,s,n,a,l,c,0),s}(n,r),t=this._convertIndices(n,e);i=this._subdivideTrianglesScanline(t)}catch(e){console.error(e)}let o=[];return t&&(o=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(i),{verticesFlattened:this._vertexBuffer,indicesTriangles:i,indicesLineList:o}}_convertIndices(e,t){const n=[];for(let r=0;r<t.length;r++)n.push(this._vertexToIndex(e[2*t[r]],e[2*t[r]+1]));return n}_pointArrayToIndices(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(this._vertexToIndex(r.x,r.y))}return t}}function Kl(e,t,n,r=!0){return new Wl(n,t).subdividePolygonInternal(e,r)}function Zl(e,t,r=!1){if(!e||e.length<1)return[];if(e.length<2)return[];const i=e[0],o=e[e.length-1],s=r&&(i.x!==o.x||i.y!==o.y);if(t<2)return s?[...e,e[0]]:[...e];const a=Math.floor(C/t),l=[];l.push(new n(e[0].x,e[0].y));const c=e.length,u=s?c:c-1;for(let h=0;h<u;h++){const t=e[h],r=h<c-1?e[h+1]:e[0],i=t.x,o=t.y,s=r.x,u=r.y,d=i!==s,p=o!==u;if(!d&&!p)continue;const f=s-i,m=u-o,g=Math.abs(f),y=Math.abs(m);let v=i,_=o;for(;;){const e=f>0?(Math.floor(v/a)+1)*a:(Math.ceil(v/a)-1)*a,t=m>0?(Math.floor(_/a)+1)*a:(Math.ceil(_/a)-1)*a,r=Math.abs(v-e),i=Math.abs(_-t),o=Math.abs(v-s),c=Math.abs(_-u),h=d?r/g:Number.POSITIVE_INFINITY,b=p?i/y:Number.POSITIVE_INFINITY;if((o<=r||!d)&&(c<=i||!p))break;if(h<b&&d||!p){v=e,_+=m*h;const t=new n(v,Math.round(_));l[l.length-1].x===t.x&&l[l.length-1].y===t.y||l.push(t)}else{v+=f*b,_=t;const e=new n(Math.round(v),_);l[l.length-1].x===e.x&&l[l.length-1].y===e.y||l.push(e)}}const b=new n(s,u);l[l.length-1].x===b.x&&l[l.length-1].y===b.y||l.push(b)}return l}function Jl(e,t,n){if(0===t.length)throw new Error("Subdivision vertex ring is empty.");let r=0,i=e[2*t[0]];for(let l=1;l<t.length;l++){const n=e[2*t[l]];n<i&&(i=n,r=l)}const o=t.length;let s=r,a=(s+1)%o;for(;;){const r=s-1>=0?s-1:o-1,i=(a+1)%o,l=e[2*t[r]],c=e[2*t[i]],u=e[2*t[s]],h=e[2*t[s]+1],d=e[2*t[a]+1];let p=!1;if(l<c)p=!0;else if(l>c)p=!1;else{const n=d-h,o=-(e[2*t[a]]-u),s=h<d?1:-1;((l-u)*n+(e[2*t[r]+1]-h)*o)*s>((c-u)*n+(e[2*t[i]+1]-h)*o)*s&&(p=!0)}if(p){const e=t[r],i=t[s],l=t[a];e!==i&&e!==l&&i!==l&&n.push(l,i,e),s--,s<0&&(s=o-1)}else{const e=t[i],r=t[s],l=t[a];e!==r&&e!==l&&r!==l&&n.push(l,r,e),a++,a>=o&&(a=0)}if(r===i)break}}function Xl(e,t,n,r,i,o,s,a,l){const c=i.length/2,u=s&&a&&l;if(c<qs.MAX_VERTEX_ARRAY_LENGTH){const h=t.prepareSegment(c,n,r),d=h.vertexLength;for(let e=0;e<o.length;e+=3)r.emplaceBack(d+o[e],d+o[e+1],d+o[e+2]);let p,f;h.vertexLength+=c,h.primitiveLength+=o.length/3,u&&(f=s.prepareSegment(c,n,a),p=f.vertexLength,f.vertexLength+=c);for(let t=0;t<i.length;t+=2)e(i[t],i[t+1]);if(u)for(let e=0;e<l.length;e++){const t=l[e];for(let e=1;e<t.length;e+=2)a.emplaceBack(p+t[e-1],p+t[e]);f.primitiveLength+=t.length/2}}else!function(e,t,n,r,i,o){const s=[];for(let h=0;h<r.length/2;h++)s.push(-1);const a={count:0};let l=0,c=e.getOrCreateLatestSegment(t,n),u=c.vertexLength;for(let h=2;h<i.length;h+=3){const d=i[h-2],p=i[h-1],f=i[h];let m=s[d]<l,g=s[p]<l,y=s[f]<l;c.vertexLength+((m?1:0)+(g?1:0)+(y?1:0))>qs.MAX_VERTEX_ARRAY_LENGTH&&(c=e.createNewSegment(t,n),l=a.count,m=!0,g=!0,y=!0,u=0);const v=Ql(s,r,o,a,d,m,c),_=Ql(s,r,o,a,p,g,c),b=Ql(s,r,o,a,f,y,c);n.emplaceBack(u+v-l,u+_-l,u+b-l),c.primitiveLength++}}(t,n,r,i,o,e),u&&function(e,t,n,r,i,o){const s=[];for(let h=0;h<r.length/2;h++)s.push(-1);const a={count:0};let l=0,c=e.getOrCreateLatestSegment(t,n),u=c.vertexLength;for(let h=0;h<i.length;h++){const d=i[h];for(let p=1;p<i[h].length;p+=2){const i=d[p-1],h=d[p];let f=s[i]<l,m=s[h]<l;c.vertexLength+((f?1:0)+(m?1:0))>qs.MAX_VERTEX_ARRAY_LENGTH&&(c=e.createNewSegment(t,n),l=a.count,f=!0,m=!0,u=0);const g=Ql(s,r,o,a,i,f,c),y=Ql(s,r,o,a,h,m,c);n.emplaceBack(u+g-l,u+y-l),c.primitiveLength++}}}(s,n,a,i,l,e),t.forceNewSegmentOnNextPrepare(),null==s||s.forceNewSegmentOnNextPrepare()}function Ql(e,t,n,r,i,o,s){if(o){const o=r.count;return n(t[2*i],t[2*i+1]),e[i]=r.count,r.count++,s.vertexLength++,o}return e[i]}class ec{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rs,this.indexArray=new Hs,this.indexArray2=new $s,this.programConfigurations=new ba(e.layers,e.zoom),this.segments=new qs,this.segments2=new qs,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.hasPattern=yl("fill",this.layers,t);const r=this.layers[0].layout.get("fill-sort-key"),i=!r.isConstant(),o=[];for(const{feature:s,id:a,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Ma(s,e);if(!this.layers[0]._featureFilter.filter(new ko(this.zoom,{globalState:this.globalState}),u,n))continue;const h=i?r.evaluate(u,{},n,t.availableImages):void 0,d={id:a,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Ta(s),patterns:{},sortKey:h};o.push(d)}i&&o.sort((e,t)=>e.sortKey-t.sortKey);for(const s of o){const{geometry:r,index:i,sourceLayerIndex:o}=s;if(this.hasPattern){const e=vl("fill",this.layers,s,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(s,r,i,n,{},t.subdivisionGranularity);t.featureIndex.insert(e[i].feature,r,i,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,t,n,e.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gl),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i,o){for(const s of er(t,500)){const e=Kl(s,r,o.fill.getGranularityForZoomLevel(r.z)),t=this.layoutVertexArray;Xl((e,n)=>{t.emplaceBack(e,n)},this.segments,this.layoutVertexArray,this.indexArray,e.verticesFlattened,e.indicesTriangles,this.segments2,this.indexArray2,e.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}}let tc,nc;so("FillBucket",ec,{omit:["layers","patternFeatures"]});var rc={get paint(){return nc=nc||new Vo({"fill-antialias":new Fo(ve.paint_fill["fill-antialias"]),"fill-opacity":new zo(ve.paint_fill["fill-opacity"]),"fill-color":new zo(ve.paint_fill["fill-color"]),"fill-outline-color":new zo(ve.paint_fill["fill-outline-color"]),"fill-translate":new Fo(ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Fo(ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Uo(ve.paint_fill["fill-pattern"])})},get layout(){return tc=tc||new Vo({"fill-sort-key":new zo(ve.layout_fill["fill-sort-key"])})}};class ic extends $o{constructor(e){super(e,rc)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new ec(e)}queryRadius(){return Va(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:t,transform:n,pixelsToTileUnits:r}){return Oa(Ha(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-n.bearingInRadians,r),t)}isTileClipped(){return!0}}const oc=Wo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),sc=Wo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ac}=oc;class lc{constructor(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(cc,this,t)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const t=e.readVarint()+e.pos,r=[];let i,o=1,s=0,a=0,l=0;for(;e.pos<t;){if(s<=0){const t=e.readVarint();o=7&t,s=t>>3}if(s--,1===o||2===o)a+=e.readSVarint(),l+=e.readSVarint(),1===o&&(i&&r.push(i),i=[]),i&&i.push(new n(a,l));else{if(7!==o)throw new Error(`unknown command ${o}`);i&&i.push(i[0].clone())}}return i&&r.push(i),r}bbox(){const e=this._pbf;e.pos=this._geometry;const t=e.readVarint()+e.pos;let n=1,r=0,i=0,o=0,s=1/0,a=-1/0,l=1/0,c=-1/0;for(;e.pos<t;){if(r<=0){const t=e.readVarint();n=7&t,r=t>>3}if(r--,1===n||2===n)i+=e.readSVarint(),o+=e.readSVarint(),i<s&&(s=i),i>a&&(a=i),o<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error(`unknown command ${n}`)}return[s,l,a,c]}toGeoJSON(e,t,n){const r=this.extent*Math.pow(2,n),i=this.extent*e,o=this.extent*t,s=this.loadGeometry();function a(e){return[360*(e.x+i)/r-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+o)/r)*Math.PI))-90]}function l(e){return e.map(a)}let c;if(1===this.type){const e=[];for(const n of s)e.push(n[0]);const t=l(e);c=1===e.length?{type:"Point",coordinates:t[0]}:{type:"MultiPoint",coordinates:t}}else if(2===this.type){const e=s.map(l);c=1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}}else{if(3!==this.type)throw new Error("unknown feature type");{const e=function(e){const t=e.length;if(t<=1)return[e];const n=[];let r,i;for(let o=0;o<t;o++){const t=uc(e[o]);0!==t&&(void 0===i&&(i=t<0),i===t<0?(r&&n.push(r),r=[e[o]]):r&&r.push(e[o]))}return r&&n.push(r),n}(s),t=[];for(const n of e)t.push(n.map(l));c=1===t.length?{type:"Polygon",coordinates:t[0]}:{type:"MultiPolygon",coordinates:t}}}const u={type:"Feature",geometry:c,properties:this.properties};return null!=this.id&&(u.id=this.id),u}}function cc(e,t,n){1===e?t.id=n.readVarint():2===e?function(e,t){const n=e.readVarint()+e.pos;for(;e.pos<n;){const n=t._keys[e.readVarint()],r=t._values[e.readVarint()];t.properties[n]=r}}(n,t):3===e?t.type=n.readVarint():4===e&&(t._geometry=n.pos)}function uc(e){let t=0;for(let n,r,i=0,o=e.length,s=o-1;i<o;s=i++)n=e[i],r=e[s],t+=(r.x-n.x)*(n.y+r.y);return t}lc.types=["Unknown","Point","LineString","Polygon"];class hc{constructor(e,t){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(dc,this,t),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const t=this._pbf.readVarint()+this._pbf.pos;return new lc(this._pbf,t,this.extent,this._keys,this._values)}}function dc(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){let t=null;const n=e.readVarint()+e.pos;for(;e.pos<n;){const n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}if(null==t)throw new Error("unknown feature value");return t}(n))}class pc{constructor(e,t){this.layers=e.readFields(fc,{},t)}}function fc(e,t,n){if(3===e){const e=new hc(n,n.readVarint()+n.pos);e.length&&(t[e.name]=e)}}const mc=Math.pow(2,13);function gc(e,t,n,r,i,o,s,a){e.emplaceBack(t,n,2*Math.floor(r*mc)+s,i*mc*2,o*mc*2,Math.round(a))}class yc{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ds,this.centroidVertexArray=new Ps,this.indexArray=new Hs,this.programConfigurations=new ba(e.layers,e.zoom),this.segments=new qs,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.features=[],this.hasPattern=yl("fill-extrusion",this.layers,t);for(const{feature:r,id:i,index:o,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,a=Ma(r,e);if(!this.layers[0]._featureFilter.filter(new ko(this.zoom,{globalState:this.globalState}),a,n))continue;const l={id:i,sourceLayerIndex:s,index:o,geometry:e?a.geometry:Ta(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(vl("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,n,{},t.subdivisionGranularity),t.featureIndex.insert(r,l.geometry,o,s,this.index,!0)}}addFeatures(e,t,n){for(const r of this.features){const{geometry:i}=r;this.addFeature(r,i,r.index,t,n,e.subdivisionGranularity)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ac),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,sc.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,n,r,i,o){for(const s of er(t,500)){const t={x:0,y:0,sampleCount:0},n=this.layoutVertexArray.length;this.processPolygon(t,r,e,s,o);const i=this.layoutVertexArray.length-n,a=Math.floor(t.x/t.sampleCount),l=Math.floor(t.y/t.sampleCount);for(let e=0;e<i;e++)this.centroidVertexArray.emplaceBack(a,l)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}processPolygon(e,t,n,r,i){if(r.length<1)return;if(bc(r[0]))return;for(const u of r)0!==u.length&&vc(e,u);const o={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},s=i.fill.getGranularityForZoomLevel(t.z),a="Polygon"===lc.types[n.type];for(const u of r){if(0===u.length)continue;if(bc(u))continue;const e=Zl(u,s,a);this._generateSideFaces(e,o)}if(!a)return;const l=Kl(r,t,s,!1),c=this.layoutVertexArray;Xl((e,t)=>{gc(c,e,t,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,l.verticesFlattened,l.indicesTriangles)}_generateSideFaces(e,t){let n=0;for(let r=1;r<e.length;r++){const i=e[r],o=e[r-1];if(_c(i,o))continue;t.segment.vertexLength+4>qs.MAX_VERTEX_ARRAY_LENGTH&&(t.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const s=i.sub(o)._perp()._unit(),a=o.dist(i);n+a>32768&&(n=0),gc(this.layoutVertexArray,i.x,i.y,s.x,s.y,0,0,n),gc(this.layoutVertexArray,i.x,i.y,s.x,s.y,0,1,n),n+=a,gc(this.layoutVertexArray,o.x,o.y,s.x,s.y,0,0,n),gc(this.layoutVertexArray,o.x,o.y,s.x,s.y,0,1,n);const l=t.segment.vertexLength;this.indexArray.emplaceBack(l,l+2,l+1),this.indexArray.emplaceBack(l+1,l+2,l+3),t.segment.vertexLength+=4,t.segment.primitiveLength+=2}}}function vc(e,t){for(let n=0;n<t.length;n++){const r=t[n];n===t.length-1&&t[0].x===r.x&&t[0].y===r.y||(e.x+=r.x,e.y+=r.y,e.sampleCount++)}}function _c(e,t){return e.x===t.x&&(e.x<0||e.x>C)||e.y===t.y&&(e.y<0||e.y>C)}function bc(e){return e.every(e=>e.x<0)||e.every(e=>e.x>C)||e.every(e=>e.y<0)||e.every(e=>e.y>C)}let wc;so("FillExtrusionBucket",yc,{omit:["layers","features"]});var xc={get paint(){return wc=wc||new Vo({"fill-extrusion-opacity":new Fo(ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zo(ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fo(ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fo(ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Uo(ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zo(ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zo(ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fo(ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Sc extends $o{constructor(e){super(e,xc)}createBucket(e){return new yc(e)}queryRadius(){return Va(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:t,featureState:r,geometry:i,transform:o,pixelsToTileUnits:s,pixelPosMatrix:a}){const l=Ha(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-o.bearingInRadians,s),c=this.paint.get("fill-extrusion-height").evaluate(t,r),u=this.paint.get("fill-extrusion-base").evaluate(t,r),h=function(e,t){const r=[];for(const i of e){const e=[i.x,i.y,0,1];E(e,e,t),r.push(new n(e[0]/e[3],e[1]/e[3]))}return r}(l,a),d=function(e,t,r,i){const o=[],s=[],a=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,h=i[8]*r,d=i[9]*r,p=i[10]*r,f=i[11]*r;for(const m of e){const e=[],t=[];for(const r of m){const o=r.x,s=r.y,m=i[0]*o+i[4]*s+i[12],g=i[1]*o+i[5]*s+i[13],y=i[2]*o+i[6]*s+i[14],v=i[3]*o+i[7]*s+i[15],_=y+c,b=v+u,w=m+h,x=g+d,S=y+p,E=v+f,T=new n((m+a)/b,(g+l)/b);T.z=_/b,e.push(T);const M=new n(w/E,x/E);M.z=S/E,t.push(M)}o.push(e),s.push(t)}return[o,s]}(i,u,c,a);return function(e,t,n){let r=1/0;Oa(n,t)&&(r=Tc(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],s=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],s[e+1],s[e],t];Ia(n,i)&&(r=Math.min(r,Tc(n,i)))}}return r!==1/0&&r}(d[0],d[1],h)}}function Ec(e,t){return e.x*t.x+e.y*t.y}function Tc(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],s=e[0],a=i.sub(r),l=o.sub(r),c=s.sub(r),u=Ec(a,a),h=Ec(a,l),d=Ec(l,l),p=Ec(c,a),f=Ec(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}const Mc=Wo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ac}=Mc,kc=Wo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Cc}=kc,Ic=Math.cos(Math.PI/180*37.5),Pc=Math.pow(2,14)/.5;class Oc{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new Ls,this.layoutVertexArray2=new Ns,this.indexArray=new Hs,this.programConfigurations=new ba(e.layers,e.zoom),this.segments=new qs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n){this.hasPattern=yl("line",this.layers,t);const r=this.layers[0].layout.get("line-sort-key"),i=!r.isConstant(),o=[];for(const{feature:s,id:a,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Ma(s,e);if(!this.layers[0]._featureFilter.filter(new ko(this.zoom,{globalState:this.globalState}),t,n))continue;const u=i?r.evaluate(t,{},n):void 0,h={id:a,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:e?t.geometry:Ta(s),patterns:{},sortKey:u};o.push(h)}i&&o.sort((e,t)=>e.sortKey-t.sortKey);for(const s of o){const{geometry:r,index:i,sourceLayerIndex:o}=s;if(this.hasPattern){const e=vl("line",this.layers,s,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(s,r,i,n,{},t.subdivisionGranularity);t.featureIndex.insert(e[i].feature,r,i,o,this.index)}}update(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}addFeatures(e,t,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,t,n,e.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Cc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ac),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i,o){const s=this.layers[0].layout,a=s.get("line-join").evaluate(e,{}),l=s.get("line-cap"),c=s.get("line-miter-limit"),u=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const h of t)this.addLine(h,e,a,l,c,u,r,o);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}addLine(e,t,n,r,i,o,s,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=Zl(e,s?a.line.getGranularityForZoomLevel(s.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const l="Polygon"===lc.types[t.type];let c=e.length;for(;c>=2&&e[c-1].equals(e[c-2]);)c--;let u=0;for(;u<c-1&&e[u].equals(e[u+1]);)u++;if(c<(l?3:2))return;"bevel"===n&&(i=1.05);const h=this.overscaling<=16?122880/(512*this.overscaling):0,d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);let p,f,m,g,y;this.e1=this.e2=-1,l&&(p=e[c-2],y=e[u].sub(p)._unit()._perp());for(let v=u;v<c;v++){if(m=v===c-1?l?e[u+1]:void 0:e[v+1],m&&e[v].equals(m))continue;y&&(g=y),p&&(f=p),p=e[v],y=m?m.sub(p)._unit()._perp():g,g=g||y;let t=g.add(y);0===t.x&&0===t.y||t._unit();const s=g.x*y.x+g.y*y.y,a=t.x*y.x+t.y*y.y,_=0!==a?1/a:1/0,b=2*Math.sqrt(2-2*a),w=a<Ic&&f&&m,x=g.x*y.y-g.y*y.x>0;if(w&&v>u){const e=p.dist(f);if(e>2*h){const t=p.sub(p.sub(f)._mult(h/e)._round());this.updateDistance(f,t),this.addCurrentVertex(t,g,0,0,d),f=t}}const S=f&&m;let E=S?n:l?"butt":r;if(S&&"round"===E&&(_<o?E="miter":_<=2&&(E="fakeround")),"miter"===E&&_>i&&(E="bevel"),"bevel"===E&&(_>2&&(E="flipbevel"),_<i&&(E="miter")),f&&this.updateDistance(f,p),"miter"===E)t._mult(_),this.addCurrentVertex(p,t,0,0,d);else if("flipbevel"===E){if(_>100)t=y.mult(-1);else{const e=_*g.add(y).mag()/g.sub(y).mag();t._perp()._mult(e*(x?-1:1))}this.addCurrentVertex(p,t,0,0,d),this.addCurrentVertex(p,t.mult(-1),0,0,d)}else if("bevel"===E||"fakeround"===E){const e=-Math.sqrt(_*_-1),t=x?e:0,n=x?0:e;if(f&&this.addCurrentVertex(p,g,t,n,d),"fakeround"===E){const e=Math.round(180*b/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+s*(s*(3.55645-1.43519*s)-3.2452))*e*e+(.848013+s*(.215638*s-1.06021)))}const r=y.sub(g)._mult(n)._add(g)._unit()._mult(x?-1:1);this.addHalfVertex(p,r.x,r.y,!1,x,0,d)}}m&&this.addCurrentVertex(p,y,-t,-n,d)}else if("butt"===E)this.addCurrentVertex(p,t,0,0,d);else if("square"===E){const e=f?1:-1;this.addCurrentVertex(p,t,e,e,d)}else"round"===E&&(f&&(this.addCurrentVertex(p,g,0,0,d),this.addCurrentVertex(p,g,1,1,d,!0)),m&&(this.addCurrentVertex(p,y,-1,-1,d,!0),this.addCurrentVertex(p,y,0,0,d)));if(w&&v<c-1){const e=p.dist(m);if(e>2*h){const t=p.add(m.sub(p)._mult(h/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,y,0,0,d),p=t}}}}addCurrentVertex(e,t,n,r,i,o=!1){const s=t.y*r-t.x,a=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,s,a,o,!0,-r,i),this.distance>Pc/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,n,r,i,o))}addHalfVertex({x:e,y:t},n,r,i,o,s,a){const l=.5*(this.lineClips?this.scaledDistance*(Pc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===s?0:s<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,c,this.e2),a.primitiveLength++),o?this.e2=c:this.e1=c}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}let Rc,Dc;so("LineBucket",Oc,{omit:["layers","patternFeatures"]});var Lc={get paint(){return Dc=Dc||new Vo({"line-opacity":new zo(ve.paint_line["line-opacity"]),"line-color":new zo(ve.paint_line["line-color"]),"line-translate":new Fo(ve.paint_line["line-translate"]),"line-translate-anchor":new Fo(ve.paint_line["line-translate-anchor"]),"line-width":new zo(ve.paint_line["line-width"]),"line-gap-width":new zo(ve.paint_line["line-gap-width"]),"line-offset":new zo(ve.paint_line["line-offset"]),"line-blur":new zo(ve.paint_line["line-blur"]),"line-dasharray":new jo(ve.paint_line["line-dasharray"]),"line-pattern":new Uo(ve.paint_line["line-pattern"]),"line-gradient":new Bo(ve.paint_line["line-gradient"])})},get layout(){return Rc=Rc||new Vo({"line-cap":new Fo(ve.layout_line["line-cap"]),"line-join":new zo(ve.layout_line["line-join"]),"line-miter-limit":new Fo(ve.layout_line["line-miter-limit"]),"line-round-limit":new Fo(ve.layout_line["line-round-limit"]),"line-sort-key":new zo(ve.layout_line["line-sort-key"])})}};class Nc extends zo{possiblyEvaluate(e,t){return t=new ko(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=z({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}let Fc;class zc extends $o{constructor(e){super(e,Lc),this.gradientVersion=0,Fc||(Fc=new Nc(Lc.paint.properties["line-width"].specification),Fc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this.gradientExpression();this.stepInterpolant=!!function(e){return void 0!==e._styleExpression}(e)&&e._styleExpression.expression instanceof an,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Fc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Oc(e)}queryRadius(e){const t=e,n=Uc(Ba("line-width",this,t),Ba("line-gap-width",this,t)),r=Ba("line-offset",this,t);return n/2+Math.abs(r)+Va(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:t,featureState:r,geometry:i,transform:o,pixelsToTileUnits:s}){const a=Ha(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-o.bearingInRadians,s),l=s/2*Uc(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),c=this.paint.get("line-offset").evaluate(t,r);return c&&(i=function(e,t){const r=[];for(let i=0;i<e.length;i++){const o=e[i],s=[];for(let e=0;e<o.length;e++){const r=o[e-1],i=o[e],a=o[e+1],l=0===e?new n(0,0):i.sub(r)._unit()._perp(),c=e===o.length-1?new n(0,0):a.sub(i)._unit()._perp(),u=l._add(c)._unit(),h=u.x*c.x+u.y*c.y;0!==h&&u._mult(1/h),s.push(u._mult(t)._add(i))}r.push(s)}return r}(i,c*s)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(Ua(e,i[t]))return!0;if(Ra(e,i,n))return!0}return!1}(a,i,l)}isTileClipped(){return!0}}function Uc(e,t){return t>0?t+2*e:e}const jc=Wo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Bc=Wo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Wo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Vc=Wo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Wo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Hc=Wo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$c=Wo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Yc(e,t,n){return e.sections.forEach(e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Ao.applyArabicShaping&&(e=Ao.applyArabicShaping(e)),e}(e.text,t,n)}),e}Wo([{name:"triangle",components:3,type:"Uint16"}]),Wo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Wo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Wo([{type:"Float32",name:"offsetX"}]),Wo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Wo([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Gc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var qc=24;const Wc=4294967296,Kc=1/Wc,Zc="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");class Jc{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,n=this.length){for(;this.pos<n;){const n=this.readVarint(),r=n>>3,i=this.pos;this.type=7&n,e(r,t,this),this.pos===i&&this.skip(n)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Wc;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Wc;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let n,r;return r=t[this.pos++],n=127&r,r<128?n:(r=t[this.pos++],n|=(127&r)<<7,r<128?n:(r=t[this.pos++],n|=(127&r)<<14,r<128?n:(r=t[this.pos++],n|=(127&r)<<21,r<128?n:(r=t[this.pos],n|=(15&r)<<28,function(e,t,n){const r=n.buf;let i,o;if(o=r[n.pos++],i=(112&o)>>4,o<128)return Xc(e,i,t);if(o=r[n.pos++],i|=(127&o)<<3,o<128)return Xc(e,i,t);if(o=r[n.pos++],i|=(127&o)<<10,o<128)return Xc(e,i,t);if(o=r[n.pos++],i|=(127&o)<<17,o<128)return Xc(e,i,t);if(o=r[n.pos++],i|=(127&o)<<24,o<128)return Xc(e,i,t);if(o=r[n.pos++],i|=(1&o)<<31,o<128)return Xc(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(n,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return Boolean(this.readVarint())}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Zc?Zc.decode(this.buf.subarray(t,e)):function(e,t,n){let r="",i=t;for(;i<n;){const t=e[i];let o,s,a,l=null,c=t>239?4:t>223?3:t>191?2:1;if(i+c>n)break;1===c?t<128&&(l=t):2===c?(o=e[i+1],128==(192&o)&&(l=(31&t)<<6|63&o,l<=127&&(l=null))):3===c?(o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&t)<<12|(63&o)<<6|63&s,(l<=2047||l>=55296&&l<=57343)&&(l=null))):4===c&&(o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&t)<<18|(63&o)<<12|(63&s)<<6|63&a,(l<=65535||l>=1114112)&&(l=null))),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}skip(e){const t=7&e;if(0===t)for(;this.buf[this.pos++]>127;);else if(2===t)this.pos=this.readVarint()+this.pos;else if(5===t)this.pos+=4;else{if(1!==t)throw new Error(`Unimplemented type: ${t}`);this.pos+=8}}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const e=new Uint8Array(t);e.set(this.buf),this.buf=e,this.dataView=new DataView(e.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Kc),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Kc),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?function(e,t){let n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){const n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const t=this.pos;this.pos=function(e,t,n){for(let r,i,o=0;o<t.length;o++){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);const n=this.pos-t;n>=128&&Qc(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let n=0;n<t;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,t){this.pos++;const n=this.pos;e(t,this);const r=this.pos-n;r>=128&&Qc(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,n){this.writeTag(e,2),this.writeRawMessage(t,n)}writePackedVarint(e,t){t.length&&this.writeMessage(e,eu,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,tu,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,iu,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,nu,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,ru,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,ou,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,su,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,au,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,lu,t)}writeBytesField(e,t){this.writeTag(e,2),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,5),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,5),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,1),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,1),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,0),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,0),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,2),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,5),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,1),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Xc(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Qc(e,t,n){const r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(let i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function eu(e,t){for(let n=0;n<e.length;n++)t.writeVarint(e[n])}function tu(e,t){for(let n=0;n<e.length;n++)t.writeSVarint(e[n])}function nu(e,t){for(let n=0;n<e.length;n++)t.writeFloat(e[n])}function ru(e,t){for(let n=0;n<e.length;n++)t.writeDouble(e[n])}function iu(e,t){for(let n=0;n<e.length;n++)t.writeBoolean(e[n])}function ou(e,t){for(let n=0;n<e.length;n++)t.writeFixed32(e[n])}function su(e,t){for(let n=0;n<e.length;n++)t.writeSFixed32(e[n])}function au(e,t){for(let n=0;n<e.length;n++)t.writeFixed64(e[n])}function lu(e,t){for(let n=0;n<e.length;n++)t.writeSFixed64(e[n])}function cu(e,t,n){1===e&&n.readMessage(uu,t)}function uu(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:s,top:a,advance:l}=n.readMessage(hu,{});t.push({id:e,bitmap:new tl({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:s,top:a,advance:l}})}}function hu(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function du(e){let t=0,n=0;for(const s of e)t+=s.w*s.h,n=Math.max(n,s.w);e.sort((e,t)=>t.h-e.h);const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const s of e)for(let e=r.length-1;e>=0;e--){const t=r[e];if(!(s.w>t.w||s.h>t.h)){if(s.x=t.x,s.y=t.y,o=Math.max(o,s.y+s.h),i=Math.max(i,s.x+s.w),s.w===t.w&&s.h===t.h){const t=r.pop();t&&e<r.length&&(r[e]=t)}else s.h===t.h?(t.x+=s.w,t.w-=s.w):s.w===t.w?(t.y+=s.h,t.h-=s.h):(r.push({x:t.x+s.w,y:t.y,w:t.w-s.w,h:s.h}),t.y+=s.h,t.h-=s.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}class pu{constructor(e,{pixelRatio:t,version:n,stretchX:r,stretchY:i,content:o,textFitWidth:s,textFitHeight:a}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n,this.textFitWidth=s,this.textFitHeight=a}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class fu{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:s}=du(i),a=new nl({width:o||1,height:s||1});for(const l in e){const t=e[l],r=n[l].paddedRect;nl.copy(t.data,a,{x:0,y:0},{x:r.x+1,y:r.y+1},t.data)}for(const l in t){const e=t[l],n=r[l].paddedRect,i=n.x+1,o=n.y+1,s=e.data.width,c=e.data.height;nl.copy(e.data,a,{x:0,y:0},{x:i,y:o},e.data),nl.copy(e.data,a,{x:0,y:c-1},{x:i,y:o-1},{width:s,height:1}),nl.copy(e.data,a,{x:0,y:0},{x:i,y:o+c},{width:s,height:1}),nl.copy(e.data,a,{x:s-1,y:0},{x:i-1,y:o},{width:1,height:c}),nl.copy(e.data,a,{x:0,y:0},{x:i+s,y:o},{width:1,height:c})}this.image=a,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new pu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}var mu;so("ImagePosition",pu),so("ImageAtlas",fu),e.ao=void 0,(mu=e.ao||(e.ao={}))[mu.none=0]="none",mu[mu.horizontal=1]="horizontal",mu[mu.vertical=2]="vertical",mu[mu.horizontalOnly=3]="horizontalOnly";class gu{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(e,t,n){const r=new gu;return r.scale=e||1,r.fontStack=t,r.verticalAlign=n||"bottom",r}static forImage(e,t){const n=new gu;return n.imageName=e,n.verticalAlign=t||"bottom",n}}class yu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new yu;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;t+=r&&xo(r)&&!Gc[e[n+1]]||i&&xo(i)&&!Gc[e[n-1]]||!Gc[e[n]]?e[n]:Gc[e[n]]}return t}(this.text)}trim(){let e=0;for(let n=0;n<this.text.length&&_u[this.text.charCodeAt(n)];n++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&_u[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new yu;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}getMaxImageSize(e){let t=0,n=0;for(let r=0;r<this.length();r++){const i=this.getSection(r);if(i.imageName){const r=e[i.imageName];if(!r)continue;const o=r.displaySize;t=Math.max(t,o[0]),n=Math.max(n,o[1])}}return{maxImageWidth:t,maxImageHeight:n}}addTextSection(e,t){this.text+=e.text,this.sections.push(gu.forText(e.scale,e.fontStack||t,e.verticalAlign));const n=this.sections.length-1;for(let r=0;r<e.text.length;++r)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void $("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(gu.forImage(t,e.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):$("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function vu(t,n,r,i,o,s,a,l,c,u,h,d,p,f,m){const g=yu.fromFeature(t,o);let y;d===e.ao.vertical&&g.verticalizePunctuation();const{processBidirectionalText:v,processStyledBidirectionalText:_}=Ao;if(v&&1===g.sections.length){y=[];const e=v(g.toString(),Au(g,u,s,n,i,f));for(const t of e){const e=new yu;e.text=t,e.sections=g.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);y.push(e)}}else if(_){y=[];const e=_(g.text,g.sectionIndex,Au(g,u,s,n,i,f));for(const t of e){const e=new yu;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,y.push(e)}}else y=function(e,t){const n=[],r=e.text;let i=0;for(const o of t)n.push(e.substring(i,o)),i=o;return i<r.length&&n.push(e.substring(i,r.length)),n}(g,Au(g,u,s,n,i,f));const b=[],w={positionedLines:b,text:g.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(e,t,n,r,i,o,s,a,l,c,u,h){let d=0,p=0,f=0,m=0;const g="right"===a?1:"left"===a?0:.5,y=qc/h;let v=0;for(const w of i){w.trim();const i=w.getMaxScale(),s={positionedGlyphs:[],lineOffset:0};e.positionedLines[v]=s;const a=s.positionedGlyphs;let h=0;if(!w.length()){p+=o,++v;continue}const _=Cu(r,w,y);for(let o=0;o<w.length();o++){const s=w.getSection(o),f=w.getSectionIndex(o),m=w.getCharCode(o),g=Pu(l,u,m);let v;if(s.imageName){if(e.iconsInText=!0,s.scale=s.scale*y,v=Ru(s,g,i,_,r),!v)continue;h=Math.max(h,v.imageOffset)}else if(v=Ou(s,m,g,_,t,n),!v)continue;const{rect:b,metrics:x,baselineOffset:S}=v;a.push({glyph:m,imageName:s.imageName,x:d,y:p+S+-17,vertical:g,scale:s.scale,fontStack:s.fontStack,sectionIndex:f,metrics:x,rect:b}),g?(e.verticalizable=!0,d+=(s.imageName?x.advance:qc)*s.scale+c):d+=x.advance*s.scale+c}0!==a.length&&(f=Math.max(d-c,f),Du(a,0,a.length-1,g)),d=0,s.lineOffset=Math.max(h,(i-1)*qc);const b=o*i+h;p+=b,m=Math.max(b,m),++v}const{horizontalAlign:_,verticalAlign:b}=ku(s);(function(e,t,n,r,i,o,s,a,l){const c=(t-n)*i;let u=0;u=o!==s?-a*r- -17:-r*l*s+.5*s;for(const h of e)for(const e of h.positionedGlyphs)e.x+=c,e.y+=u})(e.positionedLines,g,_,b,f,m,o,p,i.length),e.top+=-b*p,e.bottom=e.top+p,e.left+=-_*f,e.right=e.left+f}(w,n,r,i,y,a,l,c,d,u,p,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&w}const _u={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},bu={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},wu={40:!0};function xu(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*qc/o+i:0}{const r=n[t.fontStack],o=r&&r[e];return o?o.metrics.advance*t.scale+i:0}}function Su(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Eu(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Tu(e,t,n,r,i,o){let s=null,a=Su(t,n,i,o);for(const l of r){const e=Su(t-l.x,n,i,o)+l.badness;e<=a&&(s=l,a=e)}return{index:e,x:t,priorBreak:s,badness:a}}function Mu(e){return e?Mu(e.priorBreak).concat(e.index):[]}function Au(e,t,n,r,i,o){if(!e)return[];const s=[],a=function(e,t,n,r,i,o){let s=0;for(let a=0;a<e.length();a++){const n=e.getSection(a);s+=xu(e.getCharCode(a),n,r,i,t,o)}return s/Math.max(1,Math.ceil(s/n))}(e,t,n,r,i,o),l=e.text.indexOf("\u200b")>=0;let c=0;for(let h=0;h<e.length();h++){const n=e.getSection(h),d=e.getCharCode(h);if(_u[d]||(c+=xu(d,n,r,i,t,o)),h<e.length()-1){const t=!((u=d)<11904)&&(!!fo["CJK Compatibility Forms"](u)||!!fo["CJK Compatibility"](u)||!!fo["CJK Strokes"](u)||!!fo["CJK Symbols and Punctuation"](u)||!!fo["Enclosed CJK Letters and Months"](u)||!!fo["Halfwidth and Fullwidth Forms"](u)||!!fo["Ideographic Description Characters"](u)||!!fo["Vertical Forms"](u)||bo.test(String.fromCodePoint(u)));(bu[d]||t||n.imageName||h!==e.length()-2&&wu[e.getCharCode(h+1)])&&s.push(Tu(h+1,c,a,s,Eu(d,e.getCharCode(h+1),t&&l),!1))}}var u;return Mu(Tu(e.length(),c,a,s,0,!0))}function ku(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Cu(e,t,n){const r=t.getMaxScale()*qc,{maxImageWidth:i,maxImageHeight:o}=t.getMaxImageSize(e),s=Math.max(r,o*n);return{verticalLineContentWidth:Math.max(r,i*n),horizontalLineContentHeight:s}}function Iu(e){switch(e){case"top":return 0;case"center":return.5;default:return 1}}function Pu(t,n,r){return!(t===e.ao.horizontal||!n&&!wo(r)||n&&(_u[r]||(i=r,/\p{sc=Arab}/u.test(String.fromCodePoint(i)))));var i}function Ou(e,t,n,r,i,o){const s=o[e.fontStack],a=function(e,t,n,r){if(e&&e.rect)return e;const i=t[n.fontStack],o=i&&i[r];return o?{rect:null,metrics:o.metrics}:null}(s&&s[t],i,e,t);if(null===a)return null;let l;if(n)l=r.verticalLineContentWidth-e.scale*qc;else{const t=Iu(e.verticalAlign);l=(r.horizontalLineContentHeight-e.scale*qc)*t}return{rect:a.rect,metrics:a.metrics,baselineOffset:l}}function Ru(e,t,n,r,i){const o=i[e.imageName];if(!o)return null;const s=o.paddedRect,a=o.displaySize,l={width:a[0],height:a[1],left:1,top:-3,advance:t?a[1]:a[0]};let c;if(t)c=r.verticalLineContentWidth-a[1]*e.scale;else{const t=Iu(e.verticalAlign);c=(r.horizontalLineContentHeight-a[1]*e.scale)*t}return{rect:s,metrics:l,baselineOffset:c,imageOffset:(t?a[0]:a[1])*e.scale-qc*n}}function Du(e,t,n,r){if(0===r)return;const i=e[n],o=(e[n].x+i.metrics.advance*i.scale)*r;for(let s=t;s<=n;s++)e[s].x-=o}function Lu(e,t,n){const{horizontalAlign:r,verticalAlign:i}=ku(n),o=t[0]-e.displaySize[0]*r,s=t[1]-e.displaySize[1]*i;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Nu(e){var t,n;let r=e.left,i=e.top,o=e.right-r,s=e.bottom-i;const a=null!==(t=e.image.textFitWidth)&&void 0!==t?t:"stretchOrShrink",l=null!==(n=e.image.textFitHeight)&&void 0!==n?n:"stretchOrShrink",c=(e.image.content[2]-e.image.content[0])/(e.image.content[3]-e.image.content[1]);if("proportional"===l){if("stretchOnly"===a&&o/s<c||"proportional"===a){const e=Math.ceil(s*c);r*=e/o,o=e}}else if("proportional"===a&&"stretchOnly"===l&&0!==c&&o/s>c){const e=Math.ceil(o/c);i*=e/s,s=e}return{x1:r,y1:i,x2:r+o,y2:i+s}}function Fu(e,t,n,r,i,o){const s=e.image;let a;if(s.content){const e=s.content,t=s.pixelRatio||1;a=[e[0]/t,e[1]/t,s.displaySize[0]-e[2]/t,s.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+c+r[1]):(p=i[0]+(l+c-s.displaySize[0])/2,h=p+s.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===n||"both"===n?(u=i[1]+f-r[0],d=i[1]+m+r[2]):(u=i[1]+(f+m-s.displaySize[1])/2,d=u+s.displaySize[1]),{image:s,top:u,right:h,bottom:d,left:p,collisionPadding:a}}const zu=128,Uu=32640;function ju(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ko(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const s=t[i],a=t[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:a,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:a,minSize:n.evaluate(new ko(s)),maxSize:n.evaluate(new ko(a)),interpolationType:r}}}function Bu(e,t,n){let r="never";const i=e.get(t);return i?r=i:e.get(n)&&(r="always"),r}const Vu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hu(e,t,n,r,i,o,s,a,l,c,u,h,d){const p=a?Math.min(Uu,Math.round(a[0])):0,f=a?Math.min(Uu,Math.round(a[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,s,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function $u(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Yu(e){for(const t of e.sections)if(Mo(t.text))return!0;return!1}class Gu{constructor(e){this.layoutVertexArray=new zs,this.indexArray=new Hs,this.programConfigurations=e,this.segments=new qs,this.dynamicLayoutVertexArray=new Us,this.opacityVertexArray=new js,this.hasVisibleVertices=!1,this.placedSymbolArray=new xs}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,jc.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Bc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Vu,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}so("SymbolBuffers",Gu);class qu{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new qs,this.collisionVertexArray=new Vs}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Vc.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}so("CollisionBuffers",qu);class Wu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(e=>e.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ju(this.zoom,n["text-size"]),this.iconSizeData=ju(this.zoom,n["icon-size"]);const r=this.layers[0].layout,i=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap="never"!==Bu(r,"text-overlap","text-allow-overlap")||"never"!==Bu(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map(t=>e.ao[t])),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=t.sourceID}createArrays(){this.text=new Gu(new ba(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Gu(new ba(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Ts,this.lineVertexArray=new Ms,this.symbolInstances=new Es,this.textAnchorOffsets=new ks}calculateGlyphDependencies(e,t,n,r,i){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(n||r)&&i){const n=Gc[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(t,n,r){const i=this.layers[0],o=i.layout,s=o.get("text-font"),a=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==a.value.kind||a.value.value instanceof It&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=n.iconDependencies,p=n.glyphDependencies,f=n.availableImages,m=new ko(this.zoom,{globalState:this.globalState});for(const{feature:g,id:y,index:v,sourceLayerIndex:_}of t){const t=i._featureFilter.needGeometry,n=Ma(g,t);if(!i._featureFilter.filter(m,n,r))continue;let a,l;if(t||(n.geometry=Ta(g)),c){const e=i.getValueAndResolveTokens("text-field",n,r,f),t=It.factory(e),o=this.hasRTLText=this.hasRTLText||Yu(t);(!o||"unavailable"===Ao.getRTLTextPluginStatus()||o&&Ao.isParsed())&&(a=Yc(t,i,n))}if(u){const e=i.getValueAndResolveTokens("icon-image",n,r,f);l=e instanceof Ft?e:Ft.fromString(e)}if(!a&&!l)continue;const b=this.sortFeaturesByKey?h.evaluate(n,{},r):void 0;if(this.features.push({id:y,text:a,icon:l,index:v,sourceLayerIndex:_,geometry:n.geometry,properties:g.properties,type:lc.types[g.type],sortKey:b}),l&&(d[l.name]=!0),a){const t=s.evaluate(n,{},r).join(","),i="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.ao.vertical)>=0;for(const e of a.sections)if(e.image)d[e.image.name]=!0;else{const n=mo(a.toString()),r=e.fontStack||t,o=p[r]=p[r]||{};this.calculateGlyphDependencies(e.text,o,i,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function s(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function a(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in t&&n[p]!==t[f]){const e=a(p,f,h),i=s(p,f,r[e].geometry);delete t[p],delete n[f],n[l(d,r[i].geometry,!0)]=i,r[e].geometry=null}else p in n?s(p,f,h):f in t?a(p,f,h):(o(c),t[p]=i-1,n[f]=i-1)}return r.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}update(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment){let n=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]);const i={};for(let o=e.segment+1;o<t.length;o++)i[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:n},o<t.length-1&&(n+=t[o+1].dist(t[o]));for(let o=e.segment||0;o>=0;o--)i[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:r},o>0&&(r+=t[o-1].dist(t[o]));for(let e=0;e<t.length;e++){const t=i[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,n,r,i,o,s,a,l,c,u,h,d){const p=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*n.length,f,p,this.canOverlap?s.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,v=this.allowVerticalPlacement&&a===e.ao.vertical?Math.PI/2:0,_=s.text&&s.text.sections;for(let e=0;e<n.length;e++){const{tl:i,tr:o,bl:a,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:b,glyphOffset:w,isSDF:x,sectionIndex:S}=n[e],E=m.vertexLength,T=w[1];Hu(f,l.x,l.y,i.x,T+i.y,u.x,u.y,r,x,h.x,h.y,y,b),Hu(f,l.x,l.y,o.x,T+o.y,u.x+u.w,u.y,r,x,g.x,h.y,y,b),Hu(f,l.x,l.y,a.x,T+a.y,u.x,u.y+u.h,r,x,h.x,g.y,y,b),Hu(f,l.x,l.y,c.x,T+c.y,u.x+u.w,u.y+u.h,r,x,g.x,g.y,y,b),$u(t.dynamicLayoutVertexArray,l,v),p.emplaceBack(E,E+2,E+1),p.emplaceBack(E+1,E+2,E+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(w[0]),e!==n.length-1&&S===n[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,s,s.index,{},d,_&&_[S])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],a,0,!1,0,h)}_addCollisionDebugVertex(e,t,n,r,i,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,r,i,o,s,a){const l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,u=o.layoutVertexArray,h=o.collisionVertexArray,d=a.anchorX,p=a.anchorY;this._addCollisionDebugVertex(u,h,s,d,p,new n(e,t)),this._addCollisionDebugVertex(u,h,s,d,p,new n(r,t)),this._addCollisionDebugVertex(u,h,s,d,p,new n(r,i)),this._addCollisionDebugVertex(u,h,s,d,p,new n(e,i)),l.vertexLength+=4;const f=o.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4}addDebugCollisionBoxes(e,t,n,r){for(let i=e;i<t;i++){const e=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,r?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qu(Bs,Hc.members,$s),this.iconCollisionBox=new qu(Bs,Hc.members,$s);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,s,a,l){const c={};for(let u=t;u<n;u++){const t=e.get(u);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let u=r;u<i;u++){const t=e.get(u);c.verticalTextBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalTextFeatureIndex=t.featureIndex;break}for(let u=o;u<s;u++){const t=e.get(u);c.iconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.iconFeatureIndex=t.featureIndex;break}for(let u=a;u<l;u++){const t=e.get(u);c.verticalIconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalIconFeatureIndex=t.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+2,i+1),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let s=0;s<this.symbolInstances.length;++s){o.push(s);const e=this.symbolInstances.get(s);r.push(0|Math.round(t*e.anchorX+n*e.anchorY)),i.push(e.featureIndex)}return o.sort((e,t)=>r[e]-r[t]||i[t]-i[e]),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach((e,t,n)=>{e>=0&&n.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)}),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ku,Zu;so("SymbolBucket",Wu,{omit:["layers","collisionBoxArray","features","compareText"]}),Wu.MAX_GLYPHS=65535,Wu.addDynamicAttributes=$u;var Ju={get paint(){return Zu=Zu||new Vo({"icon-opacity":new zo(ve.paint_symbol["icon-opacity"]),"icon-color":new zo(ve.paint_symbol["icon-color"]),"icon-halo-color":new zo(ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new zo(ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zo(ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Fo(ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fo(ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new zo(ve.paint_symbol["text-opacity"]),"text-color":new zo(ve.paint_symbol["text-color"],{runtimeType:ze,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new zo(ve.paint_symbol["text-halo-color"]),"text-halo-width":new zo(ve.paint_symbol["text-halo-width"]),"text-halo-blur":new zo(ve.paint_symbol["text-halo-blur"]),"text-translate":new Fo(ve.paint_symbol["text-translate"]),"text-translate-anchor":new Fo(ve.paint_symbol["text-translate-anchor"])})},get layout(){return Ku=Ku||new Vo({"symbol-placement":new Fo(ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Fo(ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fo(ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zo(ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fo(ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fo(ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Fo(ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Fo(ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fo(ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fo(ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new zo(ve.layout_symbol["icon-size"]),"icon-text-fit":new Fo(ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fo(ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new zo(ve.layout_symbol["icon-image"]),"icon-rotate":new zo(ve.layout_symbol["icon-rotate"]),"icon-padding":new zo(ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Fo(ve.layout_symbol["icon-keep-upright"]),"icon-offset":new zo(ve.layout_symbol["icon-offset"]),"icon-anchor":new zo(ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fo(ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fo(ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fo(ve.layout_symbol["text-rotation-alignment"]),"text-field":new zo(ve.layout_symbol["text-field"]),"text-font":new zo(ve.layout_symbol["text-font"]),"text-size":new zo(ve.layout_symbol["text-size"]),"text-max-width":new zo(ve.layout_symbol["text-max-width"]),"text-line-height":new Fo(ve.layout_symbol["text-line-height"]),"text-letter-spacing":new zo(ve.layout_symbol["text-letter-spacing"]),"text-justify":new zo(ve.layout_symbol["text-justify"]),"text-radial-offset":new zo(ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fo(ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new zo(ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new zo(ve.layout_symbol["text-anchor"]),"text-max-angle":new Fo(ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Fo(ve.layout_symbol["text-writing-mode"]),"text-rotate":new zo(ve.layout_symbol["text-rotate"]),"text-padding":new Fo(ve.layout_symbol["text-padding"]),"text-keep-upright":new Fo(ve.layout_symbol["text-keep-upright"]),"text-transform":new zo(ve.layout_symbol["text-transform"]),"text-offset":new zo(ve.layout_symbol["text-offset"]),"text-allow-overlap":new Fo(ve.layout_symbol["text-allow-overlap"]),"text-overlap":new Fo(ve.layout_symbol["text-overlap"]),"text-ignore-placement":new Fo(ve.layout_symbol["text-ignore-placement"]),"text-optional":new Fo(ve.layout_symbol["text-optional"])})}};class Xu{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:De,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}so("FormatSectionOverride",Xu,{omit:["defaultValue"]});class Qu extends $o{constructor(e){super(e,Ju)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const n of e)t.indexOf(n)<0&&t.push(n);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||ti(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(t,n)=>e&&n in e?String(e[n]):"")}(t.properties,i)}createBucket(e){return new Wu(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Ju.paint.overridableProperties){if(!Qu.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new Xu(t),r=new ei(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new ri("source",r):new ii("composite",r,t.value.zoomStops),this.paint._values[e]=new Lo(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&Qu.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=Ju.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof It)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof Ht&&Bt(t.value)===He?o(t.value.sections):t instanceof kn?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}}let eh;var th={get paint(){return eh=eh||new Vo({"background-color":new Fo(ve.paint_background["background-color"]),"background-pattern":new jo(ve.paint_background["background-pattern"]),"background-opacity":new Fo(ve.paint_background["background-opacity"])})}};class nh extends $o{constructor(e){super(e,th)}}let rh;var ih={get paint(){return rh=rh||new Vo({"raster-opacity":new Fo(ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fo(ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fo(ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fo(ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Fo(ve.paint_raster["raster-saturation"]),"raster-contrast":new Fo(ve.paint_raster["raster-contrast"]),"raster-resampling":new Fo(ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Fo(ve.paint_raster["raster-fade-duration"])})}};class oh extends $o{constructor(e){super(e,ih)}}class sh extends $o{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class ah{constructor(e){this._methodToThrottle=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const lh={once:!0},ch=6371008.8;class uh{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new uh(F(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return ch*Math.acos(Math.min(i,1))}static convert(e){if(e instanceof uh)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new uh(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new uh(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const hh=2*Math.PI*ch;function dh(e){return hh*Math.cos(e*Math.PI/180)}function ph(e){return(180+e)/360}function fh(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function mh(e,t){return e/dh(t)}function gh(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function yh(e,t){return e*dh(gh(t))}class vh{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=uh.convert(e);return new vh(ph(n.lng),fh(n.lat),mh(t,n.lat))}toLngLat(){return new uh(360*this.x-180,gh(this.y))}toAltitude(){return yh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/hh*(e=gh(this.y),1/Math.cos(e*Math.PI/180));var e}}function _h(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class bh{constructor(e,t,n){if(!function(e,t,n){return!(e<0||e>25||n<0||n>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))}(e,t,n))throw new Error(`x=${t}, y=${n}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=n,this.key=Sh(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,n){const r=(o=this.y,s=this.z,a=_h(256*(i=this.x),256*(o=Math.pow(2,s)-o-1),s),l=_h(256*(i+1),256*(o+1),s),a[0]+","+a[1]+","+l[0]+","+l[1]);var i,o,s,a,l;const c=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,r)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new n((e.x*t-this.x)*C,(e.y*t-this.y)*C)}toString(){return`${this.z}/${this.x}/${this.y}`}}class wh{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Sh(e,t.z,t.z,t.x,t.y)}}class xh{constructor(e,t,n,r,i){if(this.terrainRttPosMatrix32f=null,e<n)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${n}`);this.overscaledZ=e,this.wrap=t,this.canonical=new bh(n,+r,+i),this.key=Sh(t,e,n,r,i)}clone(){return new xh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const t=this.canonical.z-e;return e>this.canonical.z?new xh(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xh(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-e;return e>this.canonical.z?Sh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Sh(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new xh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new xh(t,this.wrap,t,n,r),new xh(t,this.wrap,t,n+1,r),new xh(t,this.wrap,t,n,r+1),new xh(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new xh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new xh(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new wh(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new vh(e.x-this.wrap,e.y))}}function Sh(e,t,n,r,i){(e*=2)<0&&(e=-1*e-1);const o=1<<n;return(o*o*e+o*i+r).toString(36)+n.toString(36)+t.toString(36)}function Eh(e,t){return t?e.properties[t]:e.id}so("CanonicalTileID",bh),so("OverscaledTileID",xh,{omit:["terrainRttPosMatrix32f"]});class Th{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const t=new Th;return t.extend(e(new n(this.minX,this.minY))),t.extend(e(new n(this.maxX,this.minY))),t.extend(e(new n(this.minX,this.maxY))),t.extend(e(new n(this.maxX,this.maxY))),t}static fromPoints(e){const t=new Th;for(const n of e)t.extend(n);return t}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class Mh{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Ah{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class kh{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new io(C,16,0),this.grid3D=new io(C,16,0),this.featureIndexArray=new Is,this.promoteId=t}insert(e,t,n,r,i,o){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);const a=o?this.grid3D:this.grid;for(let l=0;l<t.length;l++){const e=t[l],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const r=e[t];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<C&&n[1]<C&&n[2]>=0&&n[3]>=0&&a.insert(s,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new pc(new Jc(this.rawTileData)).layers,this.sourceLayerCoder=new Mh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,r,i){this.loadVTLayers();const o=e.params,s=C/e.tileSize/e.scale,a=hi(o.filter),l=e.queryGeometry,c=e.queryPadding*s,u=Th.fromPoints(l),h=this.grid.query(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c),d=Th.fromPoints(e.cameraQueryGeometry).expandBy(c),p=this.grid3D.query(d.minX,d.minY,d.maxX,d.maxY,(t,r,i,o)=>function(e,t,r,i,o){for(const n of e)if(t<=n.x&&r<=n.y&&i>=n.x&&o>=n.y)return!0;const s=[new n(t,r),new n(t,o),new n(i,o),new n(i,r)];if(e.length>2)for(const n of s)if(Ua(e,n))return!0;for(let n=0;n<e.length-1;n++)if(ja(e[n],e[n+1],s))return!0;return!1}(e.cameraQueryGeometry,t-c,r-c,i+c,o+c));for(const n of p)h.push(n);h.sort(Ih);const f={};let m;for(let n=0;n<h.length;n++){const c=h[n];if(c===m)continue;m=c;const u=this.featureIndexArray.get(c);let d=null;this.loadMatchingFeature(f,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,a,o.layers,o.availableImages,t,r,i,(t,n,r)=>(d||(d=Ta(t)),n.queryIntersectsFeature({queryGeometry:l,feature:t,featureState:r,geometry:d,zoom:this.z,transform:e.transform,pixelsToTileUnits:s,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation})))}return f}loadMatchingFeature(e,t,n,r,i,o,s,a,l,c,u){const h=this.bucketLayerIDs[t];if(o&&!h.some(e=>o.has(e)))return;const d=this.sourceLayerCoder.decode(n),p=this.vtLayers[d].feature(r);if(i.needGeometry){const e=Ma(p,!0);if(!i.filter(new ko(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!i.filter(new ko(this.tileID.overscaledZ),p))return;const f=this.getId(p,d);for(let m=0;m<h.length;m++){const t=h[m];if(o&&!o.has(t))continue;const n=a[t];if(!n)continue;let i={};f&&c&&(i=c.getState(n.sourceLayer||"_geojsonTileLayer",f));const d=z({},l[t]);d.paint=Ch(d.paint,n.paint,p,i,s),d.layout=Ch(d.layout,n.layout,p,i,s);const g=!u||u(p,n,i);if(!g)continue;const y=new Ah(p,this.z,this.x,this.y,f);y.layer=d;let v=e[t];void 0===v&&(v=e[t]=[]),v.push({featureIndex:r,feature:y,intersectionZ:g})}}lookupSymbolFeatures(e,t,n,r,i,o,s,a){const l={};this.loadVTLayers();const c=hi(i);for(const u of e)this.loadMatchingFeature(l,n,r,u,c,o,s,a,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){var n;let r=e.id;return this.promoteId&&(r=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof r&&(r=Number(r)),void 0===r&&(null===(n=e.properties)||void 0===n?void 0:n.cluster)&&this.promoteId&&(r=Number(e.properties.cluster_id))),r}}function Ch(e,t,n,r,i){return j(e,(e,o)=>{const s=t instanceof No?t.get(o):null;return s&&s.evaluate?s.evaluate(n,r,i):s})}function Ih(e,t){return t-e}function Ph(e,t,r,i,o){const s=[];for(let a=0;a<e.length;a++){const l=e[a];let c;for(let e=0;e<l.length-1;e++){let a=l[e],u=l[e+1];a.x<t&&u.x<t||(a.x<t?a=new n(t,a.y+(t-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x<t&&(u=new n(t,a.y+(t-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y<r&&u.y<r||(a.y<r?a=new n(a.x+(r-a.y)/(u.y-a.y)*(u.x-a.x),r)._round():u.y<r&&(u=new n(a.x+(r-a.y)/(u.y-a.y)*(u.x-a.x),r)._round()),a.x>=i&&u.x>=i||(a.x>=i?a=new n(i,a.y+(i-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x>=i&&(u=new n(i,a.y+(i-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y>=o&&u.y>=o||(a.y>=o?a=new n(a.x+(o-a.y)/(u.y-a.y)*(u.x-a.x),o)._round():u.y>=o&&(u=new n(a.x+(o-a.y)/(u.y-a.y)*(u.x-a.x),o)._round()),c&&a.equals(c[c.length-1])||(c=[a],s.push(c)),c.push(u)))))}}return s}so("FeatureIndex",kh,{omit:["rawTileData","sourceLayerCoder"]});class Oh extends n{constructor(e,t,n,r){super(e,t),this.angle=n,void 0!==r&&(this.segment=r)}clone(){return new Oh(this.x,this.y,this.angle,this.segment)}}function Rh(e,t,n,r,i){if(void 0===t.segment||0===n)return!0;let o=t,s=t.segment+1,a=0;for(;a>-n/2;){if(s--,s<0)return!1;a-=e[s].dist(o),o=e[s]}a+=e[s].dist(e[s+1]),s++;const l=[];let c=0;for(;a<n/2;){const t=e[s],n=e[s+1];if(!n)return!1;let o=e[s-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:o}),c+=o;a-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;s++,a+=t.dist(n)}return!0}function Dh(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Lh(e,t,n){return e?.6*t*n:0}function Nh(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Fh(e,t,n,r,i,o){const s=Lh(n,i,o),a=Nh(n,r)*o;let l=0;const c=Dh(e)/2;for(let u=0;u<e.length-1;u++){const n=e[u],r=e[u+1],i=n.dist(r);if(l+i>c){const o=(c-l)/i,h=mn.number(n.x,r.x,o),d=mn.number(n.y,r.y,o),p=new Oh(h,d,r.angleTo(n),u);return p._round(),!s||Rh(e,p,a,s,t)?p:void 0}l+=i}}function zh(e,t,n,r,i,o,s,a,l){const c=Lh(r,o,s),u=Nh(r,i),h=u*s,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),Uh(e,d?t/2*a%t:(u/2+2*o)*s*a%t,t,c,n,h,d,!1,l)}function Uh(e,t,n,r,i,o,s,a,l){const c=o/2,u=Dh(e);let h=0,d=t-n,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],s=e[f+1],a=t.dist(s),m=s.angleTo(t);for(;d+n<h+a;){d+=n;const g=(d-h)/a,y=mn.number(t.x,s.x,g),v=mn.number(t.y,s.y,g);if(y>=0&&y<l&&v>=0&&v<l&&d-c>=0&&d+c<=u){const t=new Oh(y,v,m,f);t._round(),r&&!Rh(e,t,o,r,i)||p.push(t)}}h+=a}return a||p.length||s||(p=Uh(e,h/2,n,r,i,o,s,!0,l)),p}function jh(e,t,r,i){const o=[],s=e.image,a=s.pixelRatio,l=s.paddedRect.w-2,c=s.paddedRect.h-2;let u={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};const h=s.stretchX||[[0,l]],d=s.stretchY||[[0,c]],p=(e,t)=>e+t[1]-t[0],f=h.reduce(p,0),m=d.reduce(p,0),g=l-f,y=c-m;let v=0,_=f,b=0,w=m,x=0,S=g,E=0,T=y;if(s.content&&i){const t=s.content,n=t[2]-t[0],r=t[3]-t[1];(s.textFitWidth||s.textFitHeight)&&(u=Nu(e)),v=Bh(h,0,t[0]),b=Bh(d,0,t[1]),_=Bh(h,t[0],t[2]),w=Bh(d,t[1],t[3]),x=t[0]-v,E=t[1]-b,S=n-_,T=r-w}const M=u.x1,A=u.y1,k=u.x2-M,C=u.y2-A,I=(e,i,o,l)=>{const c=Hh(e.stretch-v,_,k,M),u=$h(e.fixed-x,S,e.stretch,f),h=Hh(i.stretch-b,w,C,A),d=$h(i.fixed-E,T,i.stretch,m),p=Hh(o.stretch-v,_,k,M),g=$h(o.fixed-x,S,o.stretch,f),y=Hh(l.stretch-b,w,C,A),I=$h(l.fixed-E,T,l.stretch,m),P=new n(c,h),O=new n(p,h),R=new n(p,y),D=new n(c,y),L=new n(u/a,d/a),N=new n(g/a,I/a),F=t*Math.PI/180;if(F){const e=Math.sin(F),t=Math.cos(F),n=[t,-e,e,t];P._matMult(n),O._matMult(n),D._matMult(n),R._matMult(n)}const z=e.stretch+e.fixed,U=i.stretch+i.fixed;return{tl:P,tr:O,bl:D,br:R,tex:{x:s.paddedRect.x+1+z,y:s.paddedRect.y+1+U,w:o.stretch+o.fixed-z,h:l.stretch+l.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:N,minFontScaleX:S/a/k,minFontScaleY:T/a/C,isSDF:r}};if(i&&(s.stretchX||s.stretchY)){const e=Vh(h,g,f),t=Vh(d,y,m);for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)o.push(I(r,t[e],i,t[e+1]))}}else o.push(I({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function Bh(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function Vh(e,t,n){const r=[{fixed:-1,stretch:0}];for(const[i,o]of e){const e=r[r.length-1];r.push({fixed:i-e.stretch,stretch:e.stretch}),r.push({fixed:i-e.stretch,stretch:e.stretch+(o-i)})}return r.push({fixed:t+1,stretch:n}),r}function Hh(e,t,n,r){return e/t*n+r}function $h(e,t,n,r){return e-t*n/r}so("Anchor",Oh);class Yh{constructor(e,t,r,i,o,s,a,l,c,u){var h;if(this.boxStartIndex=e.length,c){let e=s.top,t=s.bottom;const n=s.collisionPadding;n&&(e-=n[1],t+=n[3]);let r=t-e;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{const c=(null===(h=s.image)||void 0===h?void 0:h.content)&&(s.image.textFitWidth||s.image.textFitHeight)?Nu(s):{x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};c.y1=c.y1*a-l[0],c.y2=c.y2*a+l[2],c.x1=c.x1*a-l[3],c.x2=c.x2*a+l[1];const d=s.collisionPadding;if(d&&(c.x1-=d[0]*a,c.y1-=d[1]*a,c.x2+=d[2]*a,c.y2+=d[3]*a),u){const e=new n(c.x1,c.y1),t=new n(c.x2,c.y1),r=new n(c.x1,c.y2),i=new n(c.x2,c.y2),o=u*Math.PI/180;e._rotate(o),t._rotate(o),r._rotate(o),i._rotate(o),c.x1=Math.min(e.x,t.x,r.x,i.x),c.x2=Math.max(e.x,t.x,r.x,i.x),c.y1=Math.min(e.y,t.y,r.y,i.y),c.y2=Math.max(e.y,t.y,r.y,i.y)}e.emplaceBack(t.x,t.y,c.x1,c.y1,c.x2,c.y2,r,i,o)}this.boxEndIndex=e.length}}class Gh{constructor(e=[],t=(e,t)=>e<t?-1:e>t?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1);const o=r+1;if(o<this.length&&n(t[o],t[r])<0&&(r=o),n(t[r],i)>=0)break;t[e]=t[r],e=r}t[e]=i}}function qh(e,t=1,r=!1){const i=Th.fromPoints(e[0]),o=Math.min(i.width(),i.height());let s=o/2;const a=new Gh([],Wh),{minX:l,minY:c,maxX:u,maxY:h}=i;if(0===o)return new n(l,c);for(let n=l;n<u;n+=o)for(let t=c;t<h;t+=o)a.push(new Kh(n+s,t+s,s,e));let d=function(e){let t=0,n=0,r=0;const i=e[0];for(let o=0,s=i.length,a=s-1;o<s;a=o++){const e=i[o],s=i[a],l=e.x*s.y-s.x*e.y;n+=(e.x+s.x)*l,r+=(e.y+s.y)*l,t+=3*l}return new Kh(n/t,r/t,0,e)}(e),p=a.length;for(;a.length;){const n=a.pop();(n.d>d.d||!d.d)&&(d=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,p)),n.max-d.d<=t||(s=n.h/2,a.push(new Kh(n.p.x-s,n.p.y-s,s,e)),a.push(new Kh(n.p.x+s,n.p.y-s,s,e)),a.push(new Kh(n.p.x-s,n.p.y+s,s,e)),a.push(new Kh(n.p.x+s,n.p.y+s,s,e)),p+=4)}return r&&(console.log(`num probes: ${p}`),console.log(`best distance: ${d.d}`)),d.p}function Wh(e,t){return t.max-e.max}function Kh(e,t,r,i){this.p=new n(e,t),this.h=r,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,s=i-1;t<i;s=t++){const i=o[t],a=o[s];i.y>e.y!=a.y>e.y&&e.x<(a.x-i.x)*(e.y-i.y)/(a.y-i.y)+i.x&&(n=!n),r=Math.min(r,Fa(e,i,a))}}return(n?1:-1)*Math.sqrt(r)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}var Zh;e.aE=void 0,(Zh=e.aE||(e.aE={}))[Zh.center=1]="center",Zh[Zh.left=2]="left",Zh[Zh.right=3]="right",Zh[Zh.top=4]="top",Zh[Zh.bottom=5]="bottom",Zh[Zh["top-left"]=6]="top-left",Zh[Zh["top-right"]=7]="top-right",Zh[Zh["bottom-left"]=8]="bottom-left",Zh[Zh["bottom-right"]=9]="bottom-right";const Jh=Number.POSITIVE_INFINITY;function Xh(e,t){return t[1]!==Jh?function(e,t,n){let r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){let n=0,r=0;t<0&&(t=0);const i=t/Math.SQRT2;switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function Qh(e,t,n){var r;const i=e.layout,o=null===(r=i.get("text-variable-anchor-offset"))||void 0===r?void 0:r.evaluate(t,{},n);if(o){const e=o.values,t=[];for(let n=0;n<e.length;n+=2){const r=t[n]=e[n],i=e[n+1].map(e=>e*qc);r.startsWith("top")?i[1]-=7:r.startsWith("bottom")&&(i[1]+=7),t[n+1]=i}return new Nt(t)}const s=i.get("text-variable-anchor");if(s){let r;r=void 0!==e._unevaluatedLayout.getValue("text-radial-offset")?[i.get("text-radial-offset").evaluate(t,{},n)*qc,Jh]:i.get("text-offset").evaluate(t,{},n).map(e=>e*qc);const o=[];for(const e of s)o.push(e,Xh(e,r));return new Nt(o)}return null}function ed(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function td(t,n,r,i,o,s,a,l,c,u,h,d){let p=s.textMaxSize.evaluate(n,{});void 0===p&&(p=a);const f=t.layers[0].layout,m=f.get("icon-offset").evaluate(n,{},h),g=rd(r.horizontal),y=a/24,v=t.tilePixelRatio*y,_=t.tilePixelRatio*p/24,b=t.tilePixelRatio*l,w=t.tilePixelRatio*f.get("symbol-spacing"),x=f.get("text-padding")*t.tilePixelRatio,S=function(e,t,n,r=1){const i=e.get("icon-padding").evaluate(t,{},n),o=i&&i.values;return[o[0]*r,o[1]*r,o[2]*r,o[3]*r]}(f,n,h,t.tilePixelRatio),E=f.get("text-max-angle")/180*Math.PI,T="viewport"!==f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),M="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),A=f.get("symbol-placement"),k=w/2,I=f.get("icon-text-fit");let P;i&&"none"!==I&&(t.allowVerticalPlacement&&r.vertical&&(P=Fu(i,r.vertical,I,f.get("icon-text-fit-padding"),m,y)),g&&(i=Fu(i,g,I,f.get("icon-text-fit-padding"),m,y)));const O=h?d.line.getGranularityForZoomLevel(h.z):1,R=(l,d)=>{d.x<0||d.x>=C||d.y<0||d.y>=C||function(t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_,b,w,x,S,E,T){const M=t.addToLineVertexArray(n,r);let A,k,C,I,P=0,O=0,R=0,D=0,L=-1,N=-1;const F={};let z=ra("");if(t.allowVerticalPlacement&&i.vertical){const e=l.layout.get("text-rotate").evaluate(w,{},E)+90;C=new Yh(c,n,u,h,d,i.vertical,p,f,m,e),a&&(I=new Yh(c,n,u,h,d,a,y,v,m,e))}if(o){const r=l.layout.get("icon-rotate").evaluate(w,{}),i="none"!==l.layout.get("icon-text-fit"),s=jh(o,r,S,i),p=a?jh(a,r,S,i):void 0;k=new Yh(c,n,u,h,d,o,y,v,!1,r),P=4*s.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[zu*l.layout.get("icon-size").evaluate(w,{})],m[0]>Uu&&$(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===f.kind&&(m=[zu*x.compositeIconSizes[0].evaluate(w,{},E),zu*x.compositeIconSizes[1].evaluate(w,{},E)],(m[0]>Uu||m[1]>Uu)&&$(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,s,m,b,_,w,e.ao.none,n,M.lineStartIndex,M.lineLength,-1,E),L=t.icon.placedSymbolArray.length-1,p&&(O=4*p.length,t.addSymbols(t.icon,p,m,b,_,w,e.ao.vertical,n,M.lineStartIndex,M.lineLength,-1,E),N=t.icon.placedSymbolArray.length-1)}const U=Object.keys(i.horizontal);for(const $ of U){const r=i.horizontal[$];if(!A){z=ra(r.text);const e=l.layout.get("text-rotate").evaluate(w,{},E);A=new Yh(c,n,u,h,d,r,p,f,m,e)}const o=1===r.positionedLines.length;if(R+=nd(t,n,r,s,l,m,w,g,M,i.vertical?e.ao.horizontal:e.ao.horizontalOnly,o?U:[$],F,L,x,E),o)break}i.vertical&&(D+=nd(t,n,i.vertical,s,l,m,w,g,M,e.ao.vertical,["vertical"],F,N,x,E));const j=A?A.boxStartIndex:t.collisionBoxArray.length,B=A?A.boxEndIndex:t.collisionBoxArray.length,V=C?C.boxStartIndex:t.collisionBoxArray.length,H=C?C.boxEndIndex:t.collisionBoxArray.length,Y=k?k.boxStartIndex:t.collisionBoxArray.length,G=k?k.boxEndIndex:t.collisionBoxArray.length,q=I?I.boxStartIndex:t.collisionBoxArray.length,W=I?I.boxEndIndex:t.collisionBoxArray.length;let K=-1;const Z=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;K=Z(A,K),K=Z(C,K),K=Z(k,K),K=Z(I,K);const J=K>-1?1:0;J&&(K*=T/qc),t.glyphOffsetArray.length>=Wu.MAX_GLYPHS&&$("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,w.sortKey);const X=Qh(l,w,E),[Q,ee]=function(t,n){const r=t.length,i=null==n?void 0:n.values;if((null==i?void 0:i.length)>0)for(let o=0;o<i.length;o+=2){const n=i[o+1];t.emplaceBack(e.aE[i[o]],n[0],n[1])}return[r,t.length]}(t.textAnchorOffsets,X);t.symbolInstances.emplaceBack(n.x,n.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,L,N,z,j,B,V,H,Y,G,q,W,u,R,D,P,O,J,0,p,K,Q,ee)}(t,d,l,r,i,o,P,t.layers[0],t.collisionBoxArray,n.index,n.sourceLayerIndex,t.index,v,[x,x,x,x],T,c,b,S,M,m,n,s,u,h,a)};if("line"===A)for(const e of Ph(n.geometry,0,0,C,C)){const n=Zl(e,O),o=zh(n,w,E,r.vertical||g,i,24,_,t.overscaling,C);for(const e of o)g&&id(t,g.text,k,e)||R(n,e)}else if("line-center"===A){for(const e of n.geometry)if(e.length>1){const t=Zl(e,O),n=Fh(t,E,r.vertical||g,i,24,_);n&&R(t,n)}}else if("Polygon"===n.type)for(const e of er(n.geometry,0)){const t=qh(e,16);R(Zl(e[0],O,!0),new Oh(t.x,t.y,0))}else if("LineString"===n.type)for(const e of n.geometry){const t=Zl(e,O);R(t,new Oh(t[0].x,t[0].y,0))}else if("Point"===n.type)for(const e of n.geometry)for(const t of e)R([t],new Oh(t.x,t.y,0))}function nd(e,t,r,i,o,s,a,l,c,u,h,d,p,f,m){const g=function(e,t,r,i,o,s,a,l){const c=i.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,u=[];for(const h of t.positionedLines)for(const e of h.positionedGlyphs){if(!e.rect)continue;const i=e.rect||{};let s=4,d=!0,p=1,f=0;const m=(o||l)&&e.vertical,g=e.metrics.advance*e.scale/2;if(l&&t.verticalizable&&(f=h.lineOffset/2-(e.imageName?-(qc-e.metrics.width*e.scale)/2:(e.scale-1)*qc)),e.imageName){const t=a[e.imageName];d=t.sdf,p=t.pixelRatio,s=1/p}const y=o?[e.x+g,e.y]:[0,0];let v=o?[0,0]:[e.x+g+r[0],e.y+r[1]-f],_=[0,0];m&&(_=v,v=[0,0]);const b=e.metrics.isDoubleResolution?2:1,w=(e.metrics.left-s)*e.scale-g+v[0],x=(-e.metrics.top-s)*e.scale+v[1],S=w+i.w/b*e.scale/p,E=x+i.h/b*e.scale/p,T=new n(w,x),M=new n(S,x),A=new n(w,E),k=new n(S,E);if(m){const t=new n(-g,g- -17),r=-Math.PI/2,i=12-g,o=new n(22-i,-(e.imageName?i:0)),s=new n(..._);T._rotateAround(r,t)._add(o)._add(s),M._rotateAround(r,t)._add(o)._add(s),A._rotateAround(r,t)._add(o)._add(s),k._rotateAround(r,t)._add(o)._add(s)}if(c){const e=Math.sin(c),t=Math.cos(c),n=[t,-e,e,t];T._matMult(n),M._matMult(n),A._matMult(n),k._matMult(n)}const C=new n(0,0),I=new n(0,0);u.push({tl:T,tr:M,bl:A,br:k,tex:i,writingMode:t.writingMode,glyphOffset:y,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:C,pixelOffsetBR:I,minFontScaleX:0,minFontScaleY:0})}return u}(0,r,l,o,s,a,i,e.allowVerticalPlacement),y=e.textSizeData;let v=null;"source"===y.kind?(v=[zu*o.layout.get("text-size").evaluate(a,{})],v[0]>Uu&&$(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===y.kind&&(v=[zu*f.compositeTextSizes[0].evaluate(a,{},m),zu*f.compositeTextSizes[1].evaluate(a,{},m)],(v[0]>Uu||v[1]>Uu)&&$(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,g,v,l,s,a,u,t,c.lineStartIndex,c.lineLength,p,m);for(const n of h)d[n]=e.text.placedSymbolArray.length-1;return 4*g.length}function rd(e){for(const t in e)return e[t];return null}function id(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}const od=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class sd{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error(`Got v${r} data when expected v1.`);const i=od[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[s]=new Uint32Array(e,4,1);return new sd(s,o,i,e)}constructor(e,t=64,n=Float64Array,r){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=od.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return ad(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:s}=this,a=[0,i.length-1,0],l=[];for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=s){for(let s=h;s<=u;s++){const a=o[2*s],c=o[2*s+1];a>=e&&a<=n&&c>=t&&c<=r&&l.push(i[s])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=e&&p<=n&&f>=t&&f<=r&&l.push(i[d]),(0===c?e<=p:t<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?n>=p:r>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,s=[0,r.length-1,0],a=[],l=n*n;for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)hd(i[2*n],i[2*n+1],e,t)<=l&&a.push(r[n]);continue}const d=h+u>>1,p=i[2*d],f=i[2*d+1];hd(p,f,e,t)<=l&&a.push(r[d]),(0===c?e-n<=p:t-n<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?e+n>=p:t+n>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return a}}function ad(e,t,n,r,i,o){if(i-r<=n)return;const s=r+i>>1;ld(e,t,s,r,i,o),ad(e,t,n,r,s-1,1-o),ad(e,t,n,s+1,i,1-o)}function ld(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const s=i-r+1,a=n-r+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(a-s/2<0?-1:1);ld(e,t,n,Math.max(r,Math.floor(n-a*c/s+u)),Math.min(i,Math.floor(n+(s-a)*c/s+u)),o)}const s=t[2*n+o];let a=r,l=i;for(cd(e,t,r,n),t[2*i+o]>s&&cd(e,t,r,i);a<l;){for(cd(e,t,a,l),a++,l--;t[2*a+o]<s;)a++;for(;t[2*l+o]>s;)l--}t[2*r+o]===s?cd(e,t,r,l):(l++,cd(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function cd(e,t,n,r){ud(e,n,r),ud(t,2*n,2*r),ud(t,2*n+1,2*r+1)}function ud(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function hd(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}var dd;e.cx=void 0,(dd=e.cx||(e.cx={})).create="create",dd.load="load",dd.fullLoad="fullLoad";let pd=null,fd=[];const md=1e3/60,gd="loadTime",yd="fullLoadTime",vd={mark(e){performance.mark(e)},frame(e){const t=e;null!=pd&&fd.push(t-pd),pd=t},clearMetrics(){pd=null,fd=[],performance.clearMeasures(gd),performance.clearMeasures(yd);for(const t in e.cx)performance.clearMarks(e.cx[t])},getPerformanceMetrics(){performance.measure(gd,e.cx.create,e.cx.load),performance.measure(yd,e.cx.create,e.cx.fullLoad);const t=performance.getEntriesByName(gd)[0].duration,n=performance.getEntriesByName(yd)[0].duration,r=fd.length,i=1/(fd.reduce((e,t)=>e+t,0)/r/1e3),o=fd.filter(e=>e>md).reduce((e,t)=>e+(t-md)/md,0);return{loadTime:t,fullLoadTime:n,fps:i,percentDroppedFrames:o/(r+o)*100,totalFrames:r}}};e.$=C,e.A=p,e.B=function([e,t,n]){return t+=90,t*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(t)*Math.sin(n),y:e*Math.sin(t)*Math.sin(n),z:e*Math.cos(n)}},e.C=mn,e.D=Fo,e.E=ye,e.F=ko,e.G=eo,e.H=function(e){if(null==q){const t=e.navigator?e.navigator.userAgent:null;q=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return q},e.I=pu,e.J=class{constructor(e,t){this.target=e,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new ah(()=>this.process()),this.subscription=Q(this.target,"message",e=>this.receive(e),!1),this.globalScope=G(self)?e:window}registerMessageHandler(e,t){this.messageHandlers[e]=t}sendAsync(e,t){return new Promise((n,r)=>{const i=Math.round(1e18*Math.random()).toString(36).substring(0,10),o=t?Q(t.signal,"abort",()=>{null==o||o.unsubscribe(),delete this.resolveRejects[i];const t={id:i,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(t)},lh):null;this.resolveRejects[i]={resolve:e=>{null==o||o.unsubscribe(),n(e)},reject:e=>{null==o||o.unsubscribe(),r(e)}};const s=[],a=Object.assign(Object.assign({},e),{id:i,sourceMapId:this.mapId,origin:location.origin,data:uo(e.data,s)});this.target.postMessage(a,{transfer:s})})}receive(e){const t=e.data,n=t.id;if(!("file://"!==t.origin&&"file://"!==location.origin&&"resource://android"!==t.origin&&"resource://android"!==location.origin&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if("<cancel>"===t.type){delete this.tasks[n];const e=this.abortControllers[n];return delete this.abortControllers[n],void(e&&e.abort())}if(G(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(0===this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,n){return t(this,void 0,void 0,function*(){if("<response>"===n.type){const t=this.resolveRejects[e];if(delete this.resolveRejects[e],!t)return;return void(n.error?t.reject(ho(n.error)):t.resolve(ho(n.data)))}if(!this.messageHandlers[n.type])return void this.completeTask(e,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const t=ho(n.data),r=new AbortController;this.abortControllers[e]=r;try{const i=yield this.messageHandlers[n.type](n.sourceMapId,t,r);this.completeTask(e,null,i)}catch(t){this.completeTask(e,t)}})}completeTask(e,t,n){const r=[];delete this.abortControllers[e];const i={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?uo(t):null,data:uo(n,r)};this.target.postMessage(i,{transfer:r})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},e.K=le,e.L=function(){var e=new p(16);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.M=function(e,t,n){var r,i,o,s,a,l,c,u,h,d,p,f,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=r*m+a*g+h*y+t[12],e[13]=i*m+l*g+d*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=s*m+u*g+f*y+t[15]),e},e.N=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.O=function(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],w=n[2],x=n[3];return e[0]=_*r+b*a+w*h+x*m,e[1]=_*i+b*l+w*d+x*g,e[2]=_*o+b*c+w*p+x*y,e[3]=_*s+b*u+w*f+x*v,e[4]=(_=n[4])*r+(b=n[5])*a+(w=n[6])*h+(x=n[7])*m,e[5]=_*i+b*l+w*d+x*g,e[6]=_*o+b*c+w*p+x*y,e[7]=_*s+b*u+w*f+x*v,e[8]=(_=n[8])*r+(b=n[9])*a+(w=n[10])*h+(x=n[11])*m,e[9]=_*i+b*l+w*d+x*g,e[10]=_*o+b*c+w*p+x*y,e[11]=_*s+b*u+w*f+x*v,e[12]=(_=n[12])*r+(b=n[13])*a+(w=n[14])*h+(x=n[15])*m,e[13]=_*i+b*l+w*d+x*g,e[14]=_*o+b*c+w*p+x*y,e[15]=_*s+b*u+w*f+x*v,e},e.P=n,e.Q=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.R=nl,e.S=uh,e.T=hl,e.U=fh,e.V=ph,e.W=u,e.X=h,e.Y=Z,e.Z=xh,e._=t,e.a=se,e.a$=S,e.a0=function(e,t){var n,r,i,o;if(!e)return null!=t?t:{};if(!t)return e;const s=Object.assign({},e);if(t.removeAll&&(s.removeAll=!0),t.remove){const e=new Set(s.remove?s.remove.concat(t.remove):t.remove);s.remove=Array.from(e.values())}if(t.add){const e=s.add?s.add.concat(t.add):t.add,n=new Map(e.map(e=>[e.id,e]));s.add=Array.from(n.values())}if(t.update){const e=new Map(null===(n=s.update)||void 0===n?void 0:n.map(e=>[e.id,e]));for(const n of t.update){const t=null!==(r=e.get(n.id))&&void 0!==r?r:{id:n.id};n.newGeometry&&(t.newGeometry=n.newGeometry),n.addOrUpdateProperties&&(t.addOrUpdateProperties=(null!==(i=t.addOrUpdateProperties)&&void 0!==i?i:[]).concat(n.addOrUpdateProperties)),n.removeProperties&&(t.removeProperties=(null!==(o=t.removeProperties)&&void 0!==o?o:[]).concat(n.removeProperties)),n.removeAllProperties&&(t.removeAllProperties=!0),e.set(n.id,t)}s.update=Array.from(e.values())}return s},e.a1=vh,e.a2=Th,e.a3=25,e.a4=bh,e.a5=e=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(n=>{t.onloadstart=()=>{n(t)};for(const r of e){const e=window.document.createElement("source");de(r)||(t.crossOrigin="Anonymous"),e.src=r,t.appendChild(e)}})},e.a6=Ie,e.a7=function(){return U++},e.a8=bs,e.a9=Wu,e.aA=function(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return[t,n,r,i]},e.aB=qc,e.aC=I,e.aD=function(e,t,n,r,i=!1){if(!n[0]&&!n[1])return[0,0];const o=i?"map"===r?-e.bearingInRadians:0:"viewport"===r?e.bearingInRadians:0;if(o){const e=Math.sin(o),t=Math.cos(o);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}return[i?n[0]:I(t,n[0],e.zoom),i?n[1]:I(t,n[1],e.zoom)]},e.aF=Bu,e.aG=ed,e.aH=ku,e.aI=sd,e.aJ=Wo,e.aK=Yl,e.aL=Ps,e.aM=qs,e.aN=Hs,e.aO=F,e.aP=te,e.aQ=yh,e.aR=b,e.aS=_,e.aT=function(e){var t=new p(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.aU=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},e.aV=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e},e.aW=w,e.aX=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.aY=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},e.aZ=y,e.a_=function(e,t,n){const r=t[0]*n[0]+t[1]*n[1]+t[2]*n[2];return 0===r?null:(-(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])-n[3])/r},e.aa=hi,e.ab=Ma,e.ac=Ah,e.ad=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""}),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t},e.ae=ee,e.af=function(e){return Math.pow(2,e)},e.ag=m,e.ah=N,e.ai=85.051129,e.aj=mh,e.ak=function(e){return Math.log(e)/Math.LN2},e.al=function(e){var t=e[0],n=e[1];return t*t+n*n},e.am=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n},e.an=function(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:s}=e,a=i?N(pn.interpolationFactor(i,t,o,s),0,1):0;"camera"===e.kind?r=mn.number(e.minSize,e.maxSize,a):n=a}return{uSizeT:n,uSize:r}},e.ap=function(e,{uSize:t,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===e.kind?r/zu:"composite"===e.kind?mn.number(r/zu,i/zu,n):t},e.aq=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=n*a-r*s,_=n*l-i*s,b=n*c-o*s,w=r*l-i*a,x=r*c-o*a,S=i*c-o*l,E=u*m-h*f,T=u*g-d*f,M=u*y-p*f,A=h*g-d*m,k=h*y-p*m,C=d*y-p*g,I=v*C-_*k+b*A+w*M-x*T+S*E;return I?(e[0]=(a*C-l*k+c*A)*(I=1/I),e[1]=(i*k-r*C-o*A)*I,e[2]=(m*S-g*x+y*w)*I,e[3]=(d*x-h*S-p*w)*I,e[4]=(l*M-s*C-c*T)*I,e[5]=(n*C-i*M+o*T)*I,e[6]=(g*b-f*S-y*_)*I,e[7]=(u*S-d*b+p*_)*I,e[8]=(s*k-a*M+c*E)*I,e[9]=(r*M-n*k-o*E)*I,e[10]=(f*x-m*b+y*v)*I,e[11]=(h*b-u*x-p*v)*I,e[12]=(a*T-s*A-l*E)*I,e[13]=(n*A-r*T+i*E)*I,e[14]=(m*_-f*w-g*v)*I,e[15]=(u*w-h*_+d*v)*I,e):null},e.ar=A,e.as=function(e){return Math.hypot(e[0],e[1])},e.at=function(e){return e[0]=0,e[1]=0,e},e.au=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},e.av=$u,e.aw=E,e.ax=function(e,t,r,i){const o=t.y-e.y,s=t.x-e.x,a=i.y-r.y,l=i.x-r.x,c=a*s-l*o;if(0===c)return null;const u=(l*(e.y-r.y)-a*(e.x-r.x))/c;return new n(e.x+u*s,e.y+u*o)},e.ay=Ph,e.az=Ia,e.b=W,e.b$=class extends ls{},e.b0=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.b1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},e.b2=wh,e.b3=Sh,e.b4=function(e,t,n,r,i){var o,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.b5=function(e){var t=new p(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.b6=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=s*i+u*r,e[2]=a*i+h*r,e[3]=l*i+d*r,e[4]=c*i-o*r,e[5]=u*i-s*r,e[6]=h*i-a*r,e[7]=d*i-l*r,e},e.b7=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=s*i+u*r,e[6]=a*i+h*r,e[7]=l*i+d*r,e[8]=c*i-o*r,e[9]=u*i-s*r,e[10]=h*i-a*r,e[11]=d*i-l*r,e},e.b8=function(){const e=new Float32Array(16);return m(e),e},e.b9=function(){const e=new Float64Array(16);return m(e),e},e.bA=function(e,t){const n=P(e,360),r=P(t,360),i=r-n,o=r>n?i-360:i+360;return Math.abs(i)<Math.abs(o)?i:o},e.bB=function(e){return e[0]=0,e[1]=0,e[2]=0,e},e.bC=function(e,t,n,r){const i=Math.sqrt(e*e+t*t),o=Math.sqrt(n*n+r*r);e/=i,t/=i,n/=o,r/=o;const s=Math.acos(e*n+t*r);return-t*n+e*r>0?s:-s},e.bD=function(e,t){const n=P(e,2*Math.PI),r=P(t,2*Math.PI);return Math.min(Math.abs(n-r),Math.abs(n-r+2*Math.PI),Math.abs(n-r-2*Math.PI))},e.bE=function(){const e={},t=ve.$version;for(const n in ve.$root){const r=ve.$root[n];if(r.required){let i=null;i="version"===n?t:"array"===r.type?[]:{},null!=i&&(e[n]=i)}}return e},e.bF=po,e.bG=ue,e.bH=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(!e(t[r],n[r]))return!1;return!0}return t===n},e.bI=function(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=be(e[n],t[e[n].ref]));return e},e.bJ=function(e){if("custom"===e.type)return new sh(e);switch(e.type){case"background":return new nh(e);case"circle":return new qa(e);case"color-relief":return new fl(e);case"fill":return new ic(e);case"fill-extrusion":return new Sc(e);case"heatmap":return new ol(e);case"hillshade":return new ll(e);case"line":return new zc(e);case"raster":return new oh(e);case"symbol":return new Qu(e)}},e.bK=V,e.bL=function(e,t){if(!e)return[{command:"setStyle",args:[t]}];let n=[];try{if(!we(e.version,t.version))return[{command:"setStyle",args:[t]}];we(e.center,t.center)||n.push({command:"setCenter",args:[t.center]}),we(e.state,t.state)||n.push({command:"setGlobalState",args:[t.state]}),we(e.centerAltitude,t.centerAltitude)||n.push({command:"setCenterAltitude",args:[t.centerAltitude]}),we(e.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),we(e.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),we(e.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),we(e.roll,t.roll)||n.push({command:"setRoll",args:[t.roll]}),we(e.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),we(e.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),we(e.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),we(e.light,t.light)||n.push({command:"setLight",args:[t.light]}),we(e.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),we(e.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),we(e.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});const r={},i=[];!function(e,t,n,r){let i;for(i in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(t,i)||Ee(i,n,r));for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(e,i)?we(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&Me(e,t,i)?xe(n,{command:"setGeoJSONSourceData",args:[i,t[i].data]}):Te(i,t,n,r)):Se(i,t,n))}(e.sources,t.sources,i,r);const o=[];e.layers&&e.layers.forEach(e=>{"source"in e&&r[e.source]?n.push({command:"removeLayer",args:[e.id]}):o.push(e)}),n=n.concat(i),function(e,t,n){t=t||[];const r=(e=e||[]).map(ke),i=t.map(ke),o=e.reduce(Ce,{}),s=t.reduce(Ce,{}),a=r.slice(),l=Object.create(null);let c,u,h,d,p;for(let f=0,m=0;f<r.length;f++)c=r[f],Object.prototype.hasOwnProperty.call(s,c)?m++:(xe(n,{command:"removeLayer",args:[c]}),a.splice(a.indexOf(c,m),1));for(let f=0,m=0;f<i.length;f++)c=i[i.length-1-f],a[a.length-1-f]!==c&&(Object.prototype.hasOwnProperty.call(o,c)?(xe(n,{command:"removeLayer",args:[c]}),a.splice(a.lastIndexOf(c,a.length-m),1)):m++,d=a[a.length-f],xe(n,{command:"addLayer",args:[s[c],d]}),a.splice(a.length-f,0,c),l[c]=!0);for(let f=0;f<i.length;f++)if(c=i[f],u=o[c],h=s[c],!l[c]&&!we(u,h))if(we(u.source,h.source)&&we(u["source-layer"],h["source-layer"])&&we(u.type,h.type)){for(p in Ae(u.layout,h.layout,n,c,null,"setLayoutProperty"),Ae(u.paint,h.paint,n,c,null,"setPaintProperty"),we(u.filter,h.filter)||xe(n,{command:"setFilter",args:[c,h.filter]}),we(u.minzoom,h.minzoom)&&we(u.maxzoom,h.maxzoom)||xe(n,{command:"setLayerZoomRange",args:[c,h.minzoom,h.maxzoom]}),u)Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?Ae(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):we(u[p],h[p])||xe(n,{command:"setLayerProperty",args:[c,p,h[p]]}));for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&!Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?Ae(u[p],h[p],n,c,p.slice(6),"setPaintProperty"):we(u[p],h[p])||xe(n,{command:"setLayerProperty",args:[c,p,h[p]]}))}else xe(n,{command:"removeLayer",args:[c]}),d=a[a.lastIndexOf(c)+1],xe(n,{command:"addLayer",args:[h,d]})}(o,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:"setStyle",args:[t]}]}return n},e.bM=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.bN=j,e.bO=B,e.bP=class extends la{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.bQ=ha,e.bR=class extends la{constructor(e,t){super(e,t),this.current=da}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.bS=ua,e.bT=class extends la{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.bU=class extends la{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.bV=f,e.bW=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.bX=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.bY=function(e,t,n,r,i,o,s){var a=1/(t-n),l=1/(r-i),c=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*l,e[14]=(s+o)*c,e[15]=1,e},e.bZ=class extends la{constructor(e,t){super(e,t),this.current=new Array}set(e){if(e!=this.current){this.current=e;const t=new Float32Array(4*e.length);for(let n=0;n<e.length;n++)t[4*n]=e[n].r,t[4*n+1]=e[n].g,t[4*n+2]=e[n].b,t[4*n+3]=e[n].a;this.gl.uniform4fv(this.location,t)}}},e.b_=class extends la{constructor(e,t){super(e,t),this.current=new Array}set(e){if(e!=this.current){this.current=e;const t=new Float32Array(e);this.gl.uniform1fv(this.location,t)}}},e.ba=function(){return new Float64Array(16)},e.bb=function(e,t,n){const r=new Float64Array(4);return M(r,e,t-90,n),r},e.bc=function(e,t,n,r){var i,o,s,a,l,c=t[0],u=t[1],h=t[2],p=t[3],f=n[0],m=n[1],g=n[2],y=n[3];return(o=c*f+u*m+h*g+p*y)<0&&(o=-o,f=-f,m=-m,g=-g,y=-y),1-o>d?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,l=Math.sin(r*i)/s):(a=1-r,l=r),e[0]=a*c+l*f,e[1]=a*u+l*m,e[2]=a*h+l*g,e[3]=a*p+l*y,e},e.bd=function(e){const t=new Float64Array(9);var n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_;h=(i=(r=e)[0])*(l=i+i),d=(o=r[1])*l,f=(s=r[2])*l,m=s*(c=o+o),y=(a=r[3])*l,v=a*c,_=a*(u=s+s),(n=t)[0]=1-(p=o*c)-(g=s*u),n[3]=d-_,n[6]=f+v,n[1]=d+_,n[4]=1-h-g,n[7]=m-y,n[2]=f-v,n[5]=m+y,n[8]=1-h-p;const b=te(-Math.asin(N(t[2],-1,1)));let w,x;return Math.hypot(t[5],t[8])<.001?(w=0,x=-te(Math.atan2(t[3],t[4]))):(w=te(0===t[5]&&0===t[8]?0:Math.atan2(t[5],t[8])),x=te(0===t[1]&&0===t[0]?0:Math.atan2(t[1],t[0]))),{roll:w,pitch:b+90,bearing:x}},e.be=function(e,t){return e.roll==t.roll&&e.pitch==t.pitch&&e.bearing==t.bearing},e.bf=Mt,e.bg=ca,e.bh=Gl,e.bi=ql,e.bj=$l,e.bk=O,e.bl=R,e.bm=zt,e.bn=function(e,t,n,r,i){return O(r,i,N((e-t)/(n-t),0,1))},e.bo=P,e.bp=function(){return new Float64Array(3)},e.bq=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},e.br=M,e.bs=function(e,t,n){var r=n[0],i=n[1],o=n[2],s=t[0],a=t[1],l=t[2],c=i*l-o*a,u=o*s-r*l,h=r*a-i*s,d=i*h-o*u,p=o*c-r*h,f=r*u-i*c,m=2*n[3];return u*=m,h*=m,p*=2,f*=2,e[0]=s+(c*=m)+(d*=2),e[1]=a+u+p,e[2]=l+h+f,e},e.bt=function(e,t,n){const r=(i=[e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2]])[0]*((u=i[8])*(s=i[4])-(a=i[5])*(c=i[7]))+i[1]*(-u*(o=i[3])+a*(l=i[6]))+i[2]*(c*o-s*l);var i,o,s,a,l,c,u;if(0===r)return null;const h=w([],[t[0],t[1],t[2]],[n[0],n[1],n[2]]),d=w([],[n[0],n[1],n[2]],[e[0],e[1],e[2]]),p=w([],[e[0],e[1],e[2]],[t[0],t[1],t[2]]),f=b([],h,-e[3]);return _(f,f,b([],d,-t[3])),_(f,f,b([],p,-n[3])),b(f,f,1/r),f},e.bu=ch,e.bv=function(){return new Float64Array(4)},e.bw=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},e.bx=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},e.by=function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},e.bz=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=s*i-u*r,e[2]=a*i-h*r,e[3]=l*i-d*r,e[8]=o*r+c*i,e[9]=s*r+u*i,e[10]=a*r+h*i,e[11]=l*r+d*i,e},e.c=oe,e.c0=$c,e.c1=class extends us{},e.c2=il,e.c3=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.c4=rl,e.c5=function(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(s=s||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,e},e.c6=class extends Xo{},e.c7=class extends ys{},e.c8=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e.c9=function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=t[0],b=t[1],w=t[2],x=t[3],S=t[4],E=t[5],T=t[6],M=t[7],A=t[8],k=t[9],C=t[10],I=t[11],P=t[12],O=t[13],R=t[14],D=t[15];return Math.abs(n-_)<=d*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-b)<=d*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-w)<=d*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(o-x)<=d*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-S)<=d*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(a-E)<=d*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(l-T)<=d*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-M)<=d*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(u-A)<=d*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(h-k)<=d*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(p-C)<=d*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(f-I)<=d*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(m-P)<=d*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-O)<=d*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(y-R)<=d*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(v-D)<=d*Math.max(1,Math.abs(v),Math.abs(D))},e.cA=function(e,t){se.REGISTERED_PROTOCOLS[e]=t},e.cB=function(e){delete se.REGISTERED_PROTOCOLS[e]},e.cC=function(e,t){const n={};for(let i=0;i<e.length;i++){const r=t&&t[e[i].id]||bi(e[i]);t&&(t[e[i].id]=r);let o=n[r];o||(o=n[r]=[]),o.push(e[i])}const r=[];for(const i in n)r.push(n[i]);return r},e.cD=so,e.cE=Mh,e.cF=kh,e.cG=fu,e.cH=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=C/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const n=t.bucket.layers[0],r=n.layout,i=n._unevaluatedLayout._values,o={layoutIconSize:i["icon-size"].possiblyEvaluate(new ko(t.bucket.zoom+1),t.canonical),layoutTextSize:i["text-size"].possiblyEvaluate(new ko(t.bucket.zoom+1),t.canonical),textMaxSize:i["text-size"].possiblyEvaluate(new ko(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.textSizeData;o.compositeTextSizes=[i["text-size"].possiblyEvaluate(new ko(e),t.canonical),i["text-size"].possiblyEvaluate(new ko(n),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.bucket.iconSizeData;o.compositeIconSizes=[i["icon-size"].possiblyEvaluate(new ko(e),t.canonical),i["icon-size"].possiblyEvaluate(new ko(n),t.canonical)]}const s=r.get("text-line-height")*qc,a="viewport"!==r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),l=r.get("text-keep-upright"),c=r.get("text-size");for(const u of t.bucket.features){const i=r.get("text-font").evaluate(u,{},t.canonical).join(","),h=c.evaluate(u,{},t.canonical),d=o.layoutTextSize.evaluate(u,{},t.canonical),p=o.layoutIconSize.evaluate(u,{},t.canonical),f={horizontal:{},vertical:void 0},m=u.text;let g,y=[0,0];if(m){const o=m.toString(),c=r.get("text-letter-spacing").evaluate(u,{},t.canonical)*qc,p=go(o)?c:0,g=r.get("text-anchor").evaluate(u,{},t.canonical),v=Qh(n,u,t.canonical);if(!v){const e=r.get("text-radial-offset").evaluate(u,{},t.canonical);y=e?Xh(g,[e*qc,Jh]):r.get("text-offset").evaluate(u,{},t.canonical).map(e=>e*qc)}let _=a?"center":r.get("text-justify").evaluate(u,{},t.canonical);const b="point"===r.get("symbol-placement")?r.get("text-max-width").evaluate(u,{},t.canonical)*qc:1/0,w=()=>{t.bucket.allowVerticalPlacement&&mo(o)&&(f.vertical=vu(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,s,g,"left",p,y,e.ao.vertical,!0,d,h))};if(!a&&v){const n=new Set;if("auto"===_)for(let e=0;e<v.values.length;e+=2)n.add(ed(v.values[e]));else n.add(_);let r=!1;for(const o of n)if(!f.horizontal[o])if(r)f.horizontal[o]=f.horizontal[0];else{const n=vu(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,s,"center",o,p,y,e.ao.horizontal,!1,d,h);n&&(f.horizontal[o]=n,r=1===n.positionedLines.length)}w()}else{"auto"===_&&(_=ed(g));const n=vu(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,s,g,_,p,y,e.ao.horizontal,!1,d,h);n&&(f.horizontal[_]=n),w(),mo(o)&&a&&l&&(f.vertical=vu(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,s,g,_,p,y,e.ao.vertical,!1,d,h))}}let v=!1;if(u.icon&&u.icon.name){const e=t.imageMap[u.icon.name];e&&(g=Lu(t.imagePositions[u.icon.name],r.get("icon-offset").evaluate(u,{},t.canonical),r.get("icon-anchor").evaluate(u,{},t.canonical)),v=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=v:t.bucket.sdfIcons!==v&&$("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==r.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const _=rd(f.horizontal)||f.vertical;t.bucket.iconsInText=!!_&&_.iconsInText,(_||g)&&td(t.bucket,u,f,g,t.imageMap,o,d,p,y,v,t.canonical,t.subdivisionGranularity)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.cI=Oc,e.cJ=ec,e.cK=yc,e.cL=pc,e.cM=Jc,e.cN=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.cO=function(e,n,r,i,o){return t(this,void 0,void 0,function*(){if(h())try{return yield Z(e,n,r,i,o)}catch(e){}return function(e,t,n,r,i){const o=e.width,s=e.height;J&&X||(J=new OffscreenCanvas(o,s),X=J.getContext("2d",{willReadFrequently:!0})),J.width=o,J.height=s,X.drawImage(e,0,0,o,s);const a=X.getImageData(t,n,r,i);return X.clearRect(0,0,o,s),a.data}(e,n,r,i,o)})},e.cP=dl,e.cQ=r,e.cR=hc,e.cS=lc,e.cT=ni,e.cU=function(e,t){const n=new Map;if(null==e);else if("Feature"===e.type)n.set(Eh(e,t),e);else for(const r of e.features)n.set(Eh(r,t),r);return n},e.cV=function(e,t){if(null==e)return!0;if("Feature"===e.type)return null!=Eh(e,t);if("FeatureCollection"===e.type){const n=new Set;for(const r of e.features){const e=Eh(r,t);if(null==e)return!1;if(n.has(e))return!1;n.add(e)}return!0}return!1},e.cW=function(e,t,n){var r,i,o,s;if(t.removeAll&&e.clear(),t.remove)for(const a of t.remove)e.delete(a);if(t.add)for(const a of t.add){const t=Eh(a,n);null!=t&&e.set(t,a)}if(t.update)for(const a of t.update){let t=e.get(a.id);if(null==t)continue;const n=!a.removeAllProperties&&((null===(r=a.removeProperties)||void 0===r?void 0:r.length)>0||(null===(i=a.addOrUpdateProperties)||void 0===i?void 0:i.length)>0);if((a.newGeometry||a.removeAllProperties||n)&&(t=Object.assign({},t),e.set(a.id,t),n&&(t.properties=Object.assign({},t.properties))),a.newGeometry&&(t.geometry=a.newGeometry),a.removeAllProperties)t.properties={};else if((null===(o=a.removeProperties)||void 0===o?void 0:o.length)>0)for(const e of a.removeProperties)Object.prototype.hasOwnProperty.call(t.properties,e)&&delete t.properties[e];if((null===(s=a.addOrUpdateProperties)||void 0===s?void 0:s.length)>0)for(const{key:e,value:r}of a.addOrUpdateProperties)t.properties[e]=r}},e.cX=Ao,e.ca=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.cb=e=>"symbol"===e.type,e.cc=e=>"circle"===e.type,e.cd=e=>"heatmap"===e.type,e.ce=e=>"line"===e.type,e.cf=e=>"fill"===e.type,e.cg=e=>"fill-extrusion"===e.type,e.ch=e=>"hillshade"===e.type,e.ci=e=>"color-relief"===e.type,e.cj=e=>"raster"===e.type,e.ck=e=>"background"===e.type,e.cl=e=>"custom"===e.type,e.cm=D,e.cn=function(e,t,n){const r=k(t.x-n.x,t.y-n.y),i=k(e.x-n.x,e.y-n.y);var o,s;return te(Math.atan2(r[0]*i[1]-r[1]*i[0],(o=r)[0]*(s=i)[0]+o[1]*s[1]))},e.co=L,e.cp=function(e,t){return re[t]&&(e instanceof MouseEvent||e instanceof WheelEvent)},e.cq=function(e,t){return ne[t]&&"touches"in e},e.cr=function(e){return ne[e]||re[e]},e.cs=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},e.ct=function(e,t){const{x:n,y:r}=vh.fromLngLat(t);return!(e<0||e>25||r<0||r>=1||n<0||n>=1)},e.cu=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.cv=class extends Jo{},e.cw=vd,e.cy=function(e){return e.message===ie},e.cz=ce,e.d=de,e.e=z,e.f=e=>t(void 0,void 0,void 0,function*(){if(0===e.byteLength)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(e){throw new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),e.g=ae,e.h=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r),URL.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame(()=>{r.src=K})},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?URL.createObjectURL(i):K}),e.i=G,e.j=(e,t)=>he(z(e,{type:"json"}),t),e.k=ge,e.l=me,e.m=he,e.n=(e,t)=>he(z(e,{type:"arrayBuffer"}),t),e.o=function(e){return new Jc(e).readFields(cu,[])},e.p=du,e.q=tl,e.r=Vo,e.s=Q,e.t=Po,e.u=fo,e.v=ve,e.w=$,e.x=Qi,e.y=ro,e.z=Xi}),n("worker",["./shared"],function(e){class t{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,n){for(const i of t){this._layerConfigs[i.id]=i;const t=this._layers[i.id]=e.bJ(i);t._featureFilter=e.aa(t.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const r=e.cC(Object.values(this._layerConfigs),this.keyCache);for(const e of r){const t=e.map(e=>this._layers[e.id]),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let s=i[o];s||(s=i[o]=[]),s.push(t)}}}class n{constructor(t){const n={},r=[];for(const e in t){const i=t[e],o=n[e]={};for(const e in i){const t=i[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const n={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};r.push(n),o[e]={rect:n,metrics:t.metrics}}}const{w:i,h:o}=e.p(r),s=new e.q({width:i||1,height:o||1});for(const a in t){const r=t[a];for(const t in r){const i=r[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const o=n[a][t].rect;e.q.copy(i.bitmap,s,{x:0,y:0},{x:o.x+1,y:o.y+1},i.bitmap)}}this.image=s,this.positions=n}}e.cD("GlyphAtlas",n);class r{constructor(t){this.tileID=new e.Z(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[],this.globalState=t.globalState}parse(t,r,o,s,a){return e._(this,void 0,void 0,function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.a8;const l=new e.cE(Object.keys(t.layers).sort()),c=new e.cF(this.tileID,this.promoteId);c.bucketLayerIDs=[];const u={},h={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:o,subdivisionGranularity:a},d=r.familiesBySource[this.source];for(const n in d){const r=t.layers[n];if(!r)continue;1===r.version&&e.w(`Vector tile source "${this.source}" layer "${n}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const s=l.encode(n),a=[];for(let e=0;e<r.length;e++){const t=r.feature(e),i=c.getId(t,n);a.push({feature:t,id:i,index:e,sourceLayerIndex:s})}for(const t of d[n]){const n=t[0];n.source!==this.source&&e.w(`layer.source = ${n.source} does not equal this.source = ${this.source}`),n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(i(t,this.zoom,o),(u[n.id]=n.createBucket({index:c.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:s,sourceID:this.source,globalState:this.globalState})).populate(a,h,this.tileID.canonical),c.bucketLayerIDs.push(t.map(e=>e.id)))}}const p=e.bN(h.glyphDependencies,e=>Object.keys(e).map(Number));this.inFlightDependencies.forEach(e=>null==e?void 0:e.abort()),this.inFlightDependencies=[];let f=Promise.resolve({});if(Object.keys(p).length){const e=new AbortController;this.inFlightDependencies.push(e),f=s.sendAsync({type:"GG",data:{stacks:p,source:this.source,tileID:this.tileID,type:"glyphs"}},e)}const m=Object.keys(h.iconDependencies);let g=Promise.resolve({});if(m.length){const e=new AbortController;this.inFlightDependencies.push(e),g=s.sendAsync({type:"GI",data:{icons:m,source:this.source,tileID:this.tileID,type:"icons"}},e)}const y=Object.keys(h.patternDependencies);let v=Promise.resolve({});if(y.length){const e=new AbortController;this.inFlightDependencies.push(e),v=s.sendAsync({type:"GI",data:{icons:y,source:this.source,tileID:this.tileID,type:"patterns"}},e)}const[_,b,w]=yield Promise.all([f,g,v]),x=new n(_),S=new e.cG(b,w);for(const t in u){const n=u[t];n instanceof e.a9?(i(n.layers,this.zoom,o),e.cH({bucket:n,glyphMap:_,glyphPositions:x.positions,imageMap:b,imagePositions:S.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:h.subdivisionGranularity})):n.hasPattern&&(n instanceof e.cI||n instanceof e.cJ||n instanceof e.cK)&&(i(n.layers,this.zoom,o),n.addFeatures(h,this.tileID.canonical,S.patternPositions))}return this.status="done",{buckets:Object.values(u).filter(e=>!e.isEmpty()),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:x.image,imageAtlas:S,glyphMap:this.returnDependencies?_:null,iconMap:this.returnDependencies?b:null,glyphPositions:this.returnDependencies?x.positions:null}})}}function i(t,n,r){const i=new e.F(n);for(const e of t)e.recalculate(i,r)}class o{constructor(e,t,n){this.actor=e,this.layerIndex=t,this.availableImages=n,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(t,n){return e._(this,void 0,void 0,function*(){const r=yield e.n(t.request,n);try{return{vectorTile:new e.cL(new e.cM(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires}}catch(e){const i=new Uint8Array(r.data);let o=`Unable to parse the tile at ${t.request.url}, `;throw o+=31===i[0]&&139===i[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${e.message}`,new Error(o)}})}loadTile(t){return e._(this,void 0,void 0,function*(){const n=t.uid,i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.cN(t.request),o=new r(t);this.loading[n]=o;const s=new AbortController;o.abort=s;try{const r=yield this.loadVectorTile(t,s);if(delete this.loading[n],!r)return null;const a=r.rawData,l={};r.expires&&(l.expires=r.expires),r.cacheControl&&(l.cacheControl=r.cacheControl);const c={};if(i){const e=i.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}o.vectorTile=r.vectorTile;const u=o.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity);this.loaded[n]=o,this.fetching[n]={rawTileData:a,cacheControl:l,resourceTiming:c};try{const t=yield u;return e.e({rawTileData:a.slice(0)},t,l,c)}finally{delete this.fetching[n]}}catch(e){throw delete this.loading[n],o.status="done",this.loaded[n]=o,e}})}reloadTile(t){return e._(this,void 0,void 0,function*(){const n=t.uid;if(!this.loaded||!this.loaded[n])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const r=this.loaded[n];if(r.showCollisionBoxes=t.showCollisionBoxes,r.globalState=t.globalState,"parsing"===r.status){const i=yield r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity);let o;if(this.fetching[n]){const{rawTileData:t,cacheControl:r,resourceTiming:s}=this.fetching[n];delete this.fetching[n],o=e.e({rawTileData:t.slice(0)},i,r,s)}else o=i;return o}if("done"===r.status&&r.vectorTile)return r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity)})}abortTile(t){return e._(this,void 0,void 0,function*(){const e=this.loading,n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort.abort(),delete e[n])})}removeTile(t){return e._(this,void 0,void 0,function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid]})}}class s{constructor(){this.loaded={}}loadTile(t){return e._(this,void 0,void 0,function*(){const{uid:n,encoding:r,rawImageData:i,redFactor:o,greenFactor:s,blueFactor:a,baseShift:l}=t,c=i.width+2,u=i.height+2,h=e.b(i)?new e.R({width:c,height:u},yield e.cO(i,-1,-1,c,u)):i,d=new e.cP(n,h,r,o,s,a,l);return this.loaded=this.loaded||{},this.loaded[n]=d,d})}removeTile(e){const t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]}}var a,l,c=function(){if(l)return a;function e(e,n){if(0!==e.length){t(e[0],n);for(var r=1;r<e.length;r++)t(e[r],!n)}}function t(e,t){for(var n=0,r=0,i=0,o=e.length,s=o-1;i<o;s=i++){var a=(e[i][0]-e[s][0])*(e[s][1]+e[i][1]),l=n+a;r+=Math.abs(n)>=Math.abs(a)?n-l+a:a-l+n,n=l}n+r>=0!=!!t&&e.reverse()}return l=1,a=function t(n,r){var i,o=n&&n.type;if("FeatureCollection"===o)for(i=0;i<n.features.length;i++)t(n.features[i],r);else if("GeometryCollection"===o)for(i=0;i<n.geometries.length;i++)t(n.geometries[i],r);else if("Feature"===o)t(n.geometry,r);else if("Polygon"===o)e(n.coordinates,r);else if("MultiPolygon"===o)for(i=0;i<n.coordinates.length;i++)e(n.coordinates[i],r);return n}}(),u=e.cQ(c);class h extends e.cS{constructor(t,n){super(new e.cM,0,n,[],[]),this.feature=t,this.type=t.type,this.properties=t.tags?t.tags:{},"id"in t&&("string"==typeof t.id?this.id=parseInt(t.id,10):"number"!=typeof t.id||isNaN(t.id)||(this.id=t.id))}loadGeometry(){const t=[],n=1===this.feature.type?[this.feature.geometry]:this.feature.geometry;for(const r of n){const n=[];for(const t of r)n.push(new e.P(t[0],t[1]));t.push(n)}return t}}class d extends e.cR{constructor(t,n){super(new e.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=n?n.version:1,this.extent=n?n.extent:4096,this.length=t.length,this.features=t}feature(e){return new h(this.features[e],this.extent)}}function p(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);const n={keys:[],values:[],keycache:{},valuecache:{}};for(let o=0;o<e.length;o++)n.feature=e.feature(o),t.writeMessage(2,f,n);const r=n.keys;for(const o of r)t.writeStringField(3,o);const i=n.values;for(const o of i)t.writeMessage(4,_,o)}function f(e,t){if(!e.feature)return;const n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,m,e),t.writeVarintField(3,n.type),t.writeMessage(4,v,n)}function m(e,t){for(const n in e.feature?.properties){let r=e.feature.properties[n],i=e.keycache[n];if(null===r)continue;void 0===i&&(e.keys.push(n),i=e.keys.length-1,e.keycache[n]=i),t.writeVarint(i),"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r&&(r=JSON.stringify(r));const o=typeof r+":"+r;let s=e.valuecache[o];void 0===s&&(e.values.push(r),s=e.values.length-1,e.valuecache[o]=s),t.writeVarint(s)}}function g(e,t){return(t<<3)+(7&e)}function y(e){return e<<1^e>>31}function v(e,t){const n=e.loadGeometry(),r=e.type;let i=0,o=0;for(const s of n){let n=1;1===r&&(n=s.length),t.writeVarint(g(1,n));const a=3===r?s.length-1:s.length;for(let e=0;e<a;e++){1===e&&1!==r&&t.writeVarint(g(2,a-1));const n=s[e].x-i,l=s[e].y-o;t.writeVarint(y(n)),t.writeVarint(y(l)),i+=n,o+=l}3===e.type&&t.writeVarint(g(7,1))}}function _(e,t){const n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}const b={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},w=Math.fround||(x=new Float32Array(1),e=>(x[0]=+e,x[0]));var x;class S{constructor(e){this.options=Object.assign(Object.create(b),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const o=[];for(let a=0;a<e.length;a++){const t=e[a];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=w(M(n)),s=w(A(r));o.push(i,s,1/0,a,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[r+1]=this._createTree(o);t&&console.timeEnd(i);for(let a=r;a>=n;a--){const e=+Date.now();s=this.trees[a]=this._createTree(this._cluster(s,a)),t&&console.log("z%d: %d clusters in %dms",a,s.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return e.concat(s)}const s=this.trees[this._limitZoom(t)],a=s.range(M(n),A(o),M(i),A(r)),l=s.data,c=[];for(const u of a){const e=this.stride*u;c.push(l[e+5]>1?E(l,e,this.clusterProps):this.points[l[e+3]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(t*this.stride>=o.length)throw new Error(r);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=i.within(o[t*this.stride],o[t*this.stride+1],s),l=[];for(const c of a){const t=c*this.stride;o[t+4]===e&&l.push(o[t+5]>1?E(o,t,this.clusterProps):this.points[o[t+3]])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:s}=this.options,a=s/o,l=(n-a)/i,c=(n+1+a)/i,u={features:[]};return this._addTileFeatures(r.range((t-a)/i,l,(t+1+a)/i,c),r.data,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-a/i,l,1,c),r.data,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,a/i,c),r.data,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const s of o){const t=s.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i}_createTree(t){const n=new e.aI(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,r,i,o){for(const s of e){const e=s*this.stride,a=t[e+5]>1;let l,c,u;if(a)l=T(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+3]];l=n.properties;const[r,i]=n.geometry.coordinates;c=M(r),u=A(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let d;d=a||this.options.generateId?t[e+3]:this.points[t[e+3]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,s=n/(r*Math.pow(2,t)),a=e.data,l=[],c=this.stride;for(let u=0;u<a.length;u+=c){if(a[u+2]<=t)continue;a[u+2]=t;const n=a[u],r=a[u+1],h=e.within(a[u],a[u+1],s),d=a[u+5];let p=d;for(const e of h){const n=e*c;a[n+2]>t&&(p+=a[n+5])}if(p>d&&p>=o){let e,o=n*d,s=r*d,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const n of h){const r=n*c;if(a[r+2]<=t)continue;a[r+2]=t;const l=a[r+5];o+=a[r]*l,s+=a[r+1]*l,a[r+4]=m,i&&(e||(e=this._map(a,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(a,r)))}a[u+4]=m,l.push(o/p,s/p,1/0,m,-1,p),i&&l.push(f)}else{for(let e=0;e<c;e++)l.push(a[u+e]);if(p>1)for(const e of h){const n=e*c;if(!(a[n+2]<=t)){a[n+2]=t;for(let e=0;e<c;e++)l.push(a[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+5]>1){const r=this.clusterProps[e[t+6]];return n?Object.assign({},r):r}const r=this.points[e[t+3]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function E(e,t,n){return{type:"Feature",id:e[t+3],properties:T(e,t,n),geometry:{type:"Point",coordinates:[(r=e[t],360*(r-.5)),k(e[t+1])]}};var r}function T(e,t,n){const r=e[t+5],i=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?Math.round(r/100)/10+"k":r,o=e[t+6],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:e[t+3],point_count:r,point_count_abbreviated:i})}function M(e){return e/360+.5}function A(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function k(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function C(e,t,n,r){let i=r;const o=t+(n-t>>1);let s,a=n-t;const l=e[t],c=e[t+1],u=e[n],h=e[n+1];for(let d=t+3;d<n;d+=3){const t=I(e[d],e[d+1],l,c,u,h);if(t>i)s=d,i=t;else if(t===i){const e=Math.abs(d-o);e<a&&(s=d,a=e)}}i>r&&(s-t>3&&C(e,t,s,r),e[s+2]=i,n-s>3&&C(e,s,n,r))}function I(e,t,n,r,i,o){let s=i-n,a=o-r;if(0!==s||0!==a){const l=((e-n)*s+(t-r)*a)/(s*s+a*a);l>1?(n=i,r=o):l>0&&(n+=s*l,r+=a*l)}return s=e-n,a=t-r,s*s+a*a}function P(e,t,n,r){const i={id:null==e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===t||"MultiPoint"===t||"LineString"===t)O(i,n);else if("Polygon"===t)O(i,n[0]);else if("MultiLineString"===t)for(const o of n)O(i,o);else if("MultiPolygon"===t)for(const o of n)O(i,o[0]);return i}function O(e,t){for(let n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function R(e,t,n,r){if(!t.geometry)return;const i=t.geometry.coordinates;if(i&&0===i.length)return;const o=t.geometry.type,s=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2);let a=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)D(i,a);else if("MultiPoint"===o)for(const c of i)D(c,a);else if("LineString"===o)L(i,a,s,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(const n of i)a=[],L(n,a,s,!1),e.push(P(l,"LineString",a,t.properties));return}N(i,a,s,!1)}else if("Polygon"===o)N(i,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(const i of t.geometry.geometries)R(e,{id:l,geometry:i,properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const e of i){const t=[];N(e,t,s,!0),a.push(t)}}e.push(P(l,o,a,t.properties))}function D(e,t){t.push(F(e[0]),z(e[1]),0)}function L(e,t,n,r){let i,o,s=0;for(let l=0;l<e.length;l++){const n=F(e[l][0]),a=z(e[l][1]);t.push(n,a,0),l>0&&(s+=r?(i*a-n*o)/2:Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))),i=n,o=a}const a=t.length-3;t[2]=1,C(t,0,a,n),t[a+2]=1,t.size=Math.abs(s),t.start=0,t.end=t.size}function N(e,t,n,r){for(let i=0;i<e.length;i++){const o=[];L(e[i],o,n,r),t.push(o)}}function F(e){return e/360+.5}function z(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function U(e,t,n,r,i,o,s,a){if(r/=t,o>=(n/=t)&&s<r)return e;if(s<n||o>=r)return null;const l=[];for(const c of e){const e=c.geometry;let t=c.type;const o=0===i?c.minX:c.minY,s=0===i?c.maxX:c.maxY;if(o>=n&&s<r){l.push(c);continue}if(s<n||o>=r)continue;let u=[];if("Point"===t||"MultiPoint"===t)j(e,u,n,r,i);else if("LineString"===t)B(e,u,n,r,i,!1,a.lineMetrics);else if("MultiLineString"===t)H(e,u,n,r,i,!1);else if("Polygon"===t)H(e,u,n,r,i,!0);else if("MultiPolygon"===t)for(const a of e){const e=[];H(a,e,n,r,i,!0),e.length&&u.push(e)}if(u.length){if(a.lineMetrics&&"LineString"===t){for(const e of u)l.push(P(c.id,t,e,c.tags));continue}"LineString"!==t&&"MultiLineString"!==t||(1===u.length?(t="LineString",u=u[0]):t="MultiLineString"),"Point"!==t&&"MultiPoint"!==t||(t=3===u.length?"Point":"MultiPoint"),l.push(P(c.id,t,u,c.tags))}}return l.length?l:null}function j(e,t,n,r,i){for(let o=0;o<e.length;o+=3){const s=e[o+i];s>=n&&s<=r&&$(t,e[o],e[o+1],e[o+2])}}function B(e,t,n,r,i,o,s){let a=V(e);const l=0===i?Y:G;let c,u,h=e.start;for(let g=0;g<e.length-3;g+=3){const d=e[g],p=e[g+1],f=e[g+2],m=e[g+3],y=e[g+4],v=0===i?d:p,_=0===i?m:y;let b=!1;s&&(c=Math.sqrt(Math.pow(d-m,2)+Math.pow(p-y,2))),v<n?_>n&&(u=l(a,d,p,m,y,n),s&&(a.start=h+c*u)):v>r?_<r&&(u=l(a,d,p,m,y,r),s&&(a.start=h+c*u)):$(a,d,p,f),_<n&&v>=n&&(u=l(a,d,p,m,y,n),b=!0),_>r&&v<=r&&(u=l(a,d,p,m,y,r),b=!0),!o&&b&&(s&&(a.end=h+c*u),t.push(a),a=V(e)),s&&(h+=c)}let d=e.length-3;const p=e[d],f=e[d+1],m=0===i?p:f;m>=n&&m<=r&&$(a,p,f,e[d+2]),d=a.length-3,o&&d>=3&&(a[d]!==a[0]||a[d+1]!==a[1])&&$(a,a[0],a[1],a[2]),a.length&&t.push(a)}function V(e){const t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function H(e,t,n,r,i,o){for(const s of e)B(s,t,n,r,i,o,!1)}function $(e,t,n,r){e.push(t,n,r)}function Y(e,t,n,r,i,o){const s=(o-t)/(r-t);return $(e,o,n+(i-n)*s,1),s}function G(e,t,n,r,i,o){const s=(o-n)/(i-n);return $(e,t+(r-t)*s,o,1),s}function q(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=i.type;let s;if("Point"===o||"MultiPoint"===o||"LineString"===o)s=W(i.geometry,t);else if("MultiLineString"===o||"Polygon"===o){s=[];for(const e of i.geometry)s.push(W(e,t))}else if("MultiPolygon"===o){s=[];for(const e of i.geometry){const n=[];for(const r of e)n.push(W(r,t));s.push(n)}}n.push(P(i.id,o,s,i.tags))}return n}function W(e,t){const n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(let r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function K(e,t){if(e.transformed)return e;const n=1<<e.z,r=e.x,i=e.y;for(const o of e.features){const e=o.geometry,s=o.type;if(o.geometry=[],1===s)for(let a=0;a<e.length;a+=2)o.geometry.push(Z(e[a],e[a+1],t,n,r,i));else for(let a=0;a<e.length;a++){const s=[];for(let o=0;o<e[a].length;o+=2)s.push(Z(e[a][o],e[a][o+1],t,n,r,i));o.geometry.push(s)}}return e.transformed=!0,e}function Z(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function J(e,t,n,r,i){const o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:e.length,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const a of e)X(s,a,o,i);return s}function X(e,t,n,r){const i=t.geometry,o=t.type,s=[];if(e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),"Point"===o||"MultiPoint"===o)for(let a=0;a<i.length;a+=3)s.push(i[a],i[a+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)Q(s,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(let a=0;a<i.length;a++)Q(s,i[a],e,n,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(let a=0;a<i.length;a++){const t=i[a];for(let r=0;r<t.length;r++)Q(s,t[r],e,n,!0,0===r)}if(s.length){let n=t.tags||null;if("LineString"===o&&r.lineMetrics){n={};for(const e in t.tags)n[e]=t.tags[e];n.mapbox_clip_start=i.start/i.size,n.mapbox_clip_end=i.end/i.size}const a={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:n};null!==t.id&&(a.id=t.id),e.features.push(a)}}function Q(e,t,n,r,i,o){const s=r*r;if(r>0&&t.size<(i?s:r))return void(n.numPoints+=t.length/3);const a=[];for(let l=0;l<t.length;l+=3)(0===r||t[l+2]>s)&&(n.numSimplified++,a.push(t[l],t[l+1])),n.numPoints++;i&&function(e,t){let n=0;for(let r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(let r=0,i=e.length;r<i/2;r+=2){const t=e[r],n=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=t,e[i-1-r]=n}}(a,o),e.push(a)}const ee={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class te{constructor(e,t){const n=(t=this.options=function(e,t){for(const n in t)e[n]=t[n];return e}(Object.create(ee),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");let r=function(e,t){const n=[];if("FeatureCollection"===e.type)for(let r=0;r<e.features.length;r++)R(n,e.features[r],t,r);else R(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){const n=t.buffer/t.extent;let r=e;const i=U(e,1,-1-n,n,0,-1,2,t),o=U(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=U(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=q(i,1).concat(r)),o&&(r=r.concat(q(o,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(e,t,n,r,i,o,s){const a=[e,t,n,r],l=this.options,c=l.debug;for(;a.length;){r=a.pop(),n=a.pop(),t=a.pop(),e=a.pop();const u=1<<t,h=ne(t,n,r);let d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=J(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));const e=`z${t}`;this.stats[e]=(this.stats[e]||0)+1,this.total++}if(d.source=e,null==i){if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue}else{if(t===l.maxZoom||t===i)continue;if(null!=i){const e=i-t;if(n!==o>>e||r!==s>>e)continue}}if(d.source=null,0===e.length)continue;c>1&&console.time("clipping");const p=.5*l.buffer/l.extent,f=.5-p,m=.5+p,g=1+p;let y=null,v=null,_=null,b=null,w=U(e,u,n-p,n+m,0,d.minX,d.maxX,l),x=U(e,u,n+f,n+g,0,d.minX,d.maxX,l);e=null,w&&(y=U(w,u,r-p,r+m,1,d.minY,d.maxY,l),v=U(w,u,r+f,r+g,1,d.minY,d.maxY,l),w=null),x&&(_=U(x,u,r-p,r+m,1,d.minY,d.maxY,l),b=U(x,u,r+f,r+g,1,d.minY,d.maxY,l),x=null),c>1&&console.timeEnd("clipping"),a.push(y||[],t+1,2*n,2*r),a.push(v||[],t+1,2*n,2*r+1),a.push(_||[],t+1,2*n+1,2*r),a.push(b||[],t+1,2*n+1,2*r+1)}}getTile(e,t,n){e=+e,t=+t,n=+n;const r=this.options,{extent:i,debug:o}=r;if(e<0||e>24)return null;const s=1<<e,a=ne(e,t=t+s&s-1,n);if(this.tiles[a])return K(this.tiles[a],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);let l,c=e,u=t,h=n;for(;!l&&c>0;)c--,u>>=1,h>>=1,l=this.tiles[ne(c,u,h)];return l&&l.source?(o>1&&(console.log("found parent tile z%d-%d-%d",c,u,h),console.time("drilling down")),this.splitTile(l.source,c,u,h,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[a]?K(this.tiles[a],i):null):null}}function ne(e,t,n){return 32*((1<<e)*n+t)+e}class re extends o{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(t,n){return e._(this,void 0,void 0,function*(){const n=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return null;const i=new d(r.features,{version:2,extent:e.$});let o=function(t){const n=new e.cM;return function(e,t){for(const n in e.layers)t.writeMessage(3,p,e.layers[n])}(t,n),n.finish()}(i);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:i,rawData:o.buffer}})}loadData(t){return e._(this,void 0,void 0,function*(){var n;null===(n=this._pendingRequest)||void 0===n||n.abort();const r=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.cN(t.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(t,this._pendingRequest);const n=yield this._pendingData;this._geoJSONIndex=t.cluster?new S(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const r={},i={},o={accumulated:null,zoom:0},s={properties:null},a=Object.keys(n);for(const l of a){const[t,o]=n[l],s=e.cT(o),a=e.cT("string"==typeof t?[t,["accumulated"],["get",l]]:t);r[l]=s.value,i[l]=a.value}return t.map=e=>{s.properties=e;const t={};for(const n of a)t[n]=r[n].evaluate(o,s);return t},t.reduce=(e,t)=>{s.properties=t;for(const n of a)o.accumulated=e[n],e[n]=i[n].evaluate(o,s)},t}(t)).load(n.features):function(e,t){return new te(e,t)}(n,t.geojsonVtOptions),this.loaded={};const i={data:n};if(r){const e=r.finish();e&&(i.resourceTiming={},i.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}return i}catch(t){if(delete this._pendingRequest,e.cy(t))return{abandoned:!0};throw t}})}getData(){return e._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadAndProcessGeoJSON(t,n){return e._(this,void 0,void 0,function*(){let r=yield this.loadGeoJSON(t,n);if(delete this._pendingRequest,"object"!=typeof r)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(u(r,!0),t.filter){const n=e.cT(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map(e=>`${e.key}: ${e.message}`).join(", "));const i=r.features.filter(e=>n.value.evaluate({zoom:0},e));r={type:"FeatureCollection",features:i}}return r})}loadGeoJSON(t,n){return e._(this,void 0,void 0,function*(){const{promoteId:r}=t;if(t.request){const i=yield e.j(t.request,n);return this._dataUpdateable=e.cV(i.data,r)?e.cU(i.data,r):void 0,i.data}if("string"==typeof t.data)try{const n=JSON.parse(t.data);return this._dataUpdateable=e.cV(n,r)?e.cU(n,r):void 0,n}catch(e){throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`)}if(!t.dataDiff)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${t.source}`);return e.cW(this._dataUpdateable,t.dataDiff,r),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(t){return e._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}class ie{constructor(t){this.self=t,this.actor=new e.J(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.externalWorkerSourceTypes[e]=t},this.self.addProtocol=e.cA,this.self.removeProtocol=e.cB,this.self.registerRTLTextPlugin=t=>{e.cX.setMethods(t)},this.actor.registerMessageHandler("LDT",(e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t)),this.actor.registerMessageHandler("RDT",(t,n)=>e._(this,void 0,void 0,function*(){this._getDEMWorkerSource(t,n.source).removeTile(n)})),this.actor.registerMessageHandler("GCEZ",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterExpansionZoom(n)})),this.actor.registerMessageHandler("GCC",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterChildren(n)})),this.actor.registerMessageHandler("GCL",(t,n)=>e._(this,void 0,void 0,function*(){return this._getWorkerSource(t,n.type,n.source).getClusterLeaves(n)})),this.actor.registerMessageHandler("LD",(e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t)),this.actor.registerMessageHandler("GD",(e,t)=>this._getWorkerSource(e,t.type,t.source).getData()),this.actor.registerMessageHandler("LT",(e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t)),this.actor.registerMessageHandler("RT",(e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t)),this.actor.registerMessageHandler("AT",(e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t)),this.actor.registerMessageHandler("RMT",(e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t)),this.actor.registerMessageHandler("RS",(t,n)=>e._(this,void 0,void 0,function*(){if(!this.workerSources[t]||!this.workerSources[t][n.type]||!this.workerSources[t][n.type][n.source])return;const e=this.workerSources[t][n.type][n.source];delete this.workerSources[t][n.type][n.source],void 0!==e.removeSource&&e.removeSource(n)})),this.actor.registerMessageHandler("RM",t=>e._(this,void 0,void 0,function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t]})),this.actor.registerMessageHandler("SR",(t,n)=>e._(this,void 0,void 0,function*(){this.referrer=n})),this.actor.registerMessageHandler("SRPS",(e,t)=>this._syncRTLPluginState(e,t)),this.actor.registerMessageHandler("IS",(t,n)=>e._(this,void 0,void 0,function*(){this.self.importScripts(n)})),this.actor.registerMessageHandler("SI",(e,t)=>this._setImages(e,t)),this.actor.registerMessageHandler("UL",(t,n)=>e._(this,void 0,void 0,function*(){this._getLayerIndex(t).update(n.layers,n.removedIds)})),this.actor.registerMessageHandler("SL",(t,n)=>e._(this,void 0,void 0,function*(){this._getLayerIndex(t).replace(n)}))}_setImages(t,n){return e._(this,void 0,void 0,function*(){this.availableImages[t]=n;for(const e in this.workerSources[t]){const r=this.workerSources[t][e];for(const e in r)r[e].availableImages=n}})}_syncRTLPluginState(t,n){return e._(this,void 0,void 0,function*(){return yield e.cX.syncState(n,this.self.importScripts)})}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let n=this.layerIndexes[e];return n||(n=this.layerIndexes[e]=new t),n}_getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const r={sendAsync:(t,n)=>(t.targetMapId=e,this.actor.sendAsync(t,n))};switch(t){case"vector":this.workerSources[e][t][n]=new o(r,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][t][n]=new re(r,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][n]=new this.externalWorkerSourceTypes[t](r,this._getLayerIndex(e),this._getAvailableImages(e))}}return this.workerSources[e][t][n]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new s),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new ie(self)),ie}),n("index",["exports","./shared"],function(e,t){var n="5.6.2";function r(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}let i,o;const s={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(e,n,r){const i=requestAnimationFrame(e=>{o(),n(e)}),{unsubscribe:o}=t.s(e.signal,"abort",()=>{o(),cancelAnimationFrame(i),r(t.c())},!1)},frameAsync(e){return new Promise((t,n)=>{this.frame(e,t,n)})},getImageData(e,t=0){return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),n=t.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n},resolveURL:e=>(i||(i=document.createElement("a")),i.href=e,i.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==o&&(o=matchMedia("(prefers-reduced-motion: reduce)")),o.matches)}};class a{static testProp(e){if(!a.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in a.docStyle)return e[t];return e[0]}static create(e,t,n){const r=window.document.createElement(e);return void 0!==t&&(r.className=t),n&&n.appendChild(r),r}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){a.docStyle&&a.selectProp&&(a.userSelect=a.docStyle[a.selectProp],a.docStyle[a.selectProp]="none")}static enableDrag(){a.docStyle&&a.selectProp&&(a.docStyle[a.selectProp]=a.userSelect)}static setTransform(e,t){e.style[a.transformProp]=t}static addEventListener(e,t,n,r={}){e.addEventListener(t,n,"passive"in r?r:r.capture)}static removeEventListener(e,t,n,r={}){e.removeEventListener(t,n,"passive"in r?r:r.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",a.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",a.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",a.suppressClickInternal,!0)},0)}static getScale(e){const t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,n,r){const i=n.boundingClientRect;return new t.P((r.clientX-i.left)/n.x-e.clientLeft,(r.clientY-i.top)/n.y-e.clientTop)}static mousePos(e,t){const n=a.getScale(e);return a.getPoint(e,n,t)}static touchPos(e,t){const n=[],r=a.getScale(e);for(let i=0;i<t.length;i++)n.push(a.getPoint(e,r,t[i]));return n}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const t=(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body"),n=t.querySelectorAll("script");for(const r of n)r.remove();return a.clean(t),t.innerHTML}static isPossiblyDangerous(e,t){const n=t.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!n.includes("javascript:")&&!n.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const t=e.children;for(const n of t)a.removeAttributes(n),a.clean(n)}static removeAttributes(e){for(const{name:t,value:n}of e.attributes)a.isPossiblyDangerous(t,n)&&e.removeAttribute(t)}}a.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,a.selectProp=a.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),a.transformProp=a.testProp(["transform","WebkitTransform"]);const l={supported:!1,testSupport:function(e){!h&&u&&(d?p(e):c=e)}};let c,u,h=!1,d=!1;function p(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,u),e.isContextLost())return;l.supported=!0}catch(e){}e.deleteTexture(t),h=!0}var f;"undefined"!=typeof document&&(u=document.createElement("img"),u.onload=()=>{c&&p(c),c=null,d=!0},u.onerror=()=>{h=!0,c=null},u.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let n,r,i,o;e.resetRequestQueue=()=>{n=[],r=0,i=0,o={}},e.addThrottleControl=e=>{const t=i++;return o[t]=e,t},e.removeThrottleControl=e=>{delete o[e],a()},e.getImage=(e,r,i=!0)=>new Promise((o,s)=>{l.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),n.push({abortController:r,requestParameters:e,supportImageRefresh:i,state:"queued",onError:e=>{s(e)},onSuccess:e=>{o(e)}}),a()});const s=e=>t._(this,void 0,void 0,function*(){e.state="running";const{requestParameters:n,supportImageRefresh:i,onError:o,onSuccess:s,abortController:l}=e,u=!1===i&&!t.i(self)&&!t.g(n.url)&&(!n.headers||Object.keys(n.headers).reduce((e,t)=>e&&"accept"===t,!0));r++;const h=u?c(n,l):t.m(n,l);try{const n=yield h;delete e.abortController,e.state="completed",n.data instanceof HTMLImageElement||t.b(n.data)?s(n):n.data&&s({data:yield(d=n.data,"function"==typeof createImageBitmap?t.f(d):t.h(d)),cacheControl:n.cacheControl,expires:n.expires})}catch(t){delete e.abortController,o(t)}finally{r--,a()}var d}),a=()=>{const e=(()=>{for(const e of Object.keys(o))if(o[e]())return!0;return!1})()?t.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=r;t<e&&n.length>0;t++){const e=n.shift();e.abortController.signal.aborted?t--:s(e)}},c=(e,n)=>new Promise((r,i)=>{const o=new Image,s=e.url,a=e.credentials;a&&"include"===a?o.crossOrigin="use-credentials":(a&&"same-origin"===a||!t.d(s))&&(o.crossOrigin="anonymous"),n.signal.addEventListener("abort",()=>{o.src="",i(t.c())}),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,r({data:o})},o.onerror=()=>{o.onerror=o.onload=null,n.signal.aborted||i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=s})}(f||(f={})),f.resetRequestQueue();class m{constructor(e){this._transformRequestFn=null!=e?e:null}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function g(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const n=[];for(const{id:r,url:i}of e){const e=`${r}${i}`;-1===n.indexOf(e)&&(n.push(e),t.push({id:r,url:i}))}}return t}function y(e,t,n){try{const r=new URL(e);return r.pathname+=`${t}${n}`,r.toString()}catch(t){throw new Error(`Invalid sprite URL "${e}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function v(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class _ extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[]}}getImage(e){const n=this.images[e];if(n&&!n.data&&n.spriteData){const e=n.spriteData;n.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),n.spriteData=null}return n}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(e,n){let r=!0;const i=n.data||n.spriteData;return this._validateStretch(n.stretchX,i&&i.width)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,i&&i.height)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const n=t.spriteData,r=n&&n.width||t.data.width,i=n&&n.height||t.data.height;return!(e[0]<0||r<e[0]||e[1]<0||i<e[1]||e[2]<0||r<e[2]||e[3]<0||i<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t,n=!0){const r=this.getImage(e);if(n&&(r.data.width!==t.data.width||r.data.height!==t.data.height))throw new Error(`size mismatch between old image (${r.data.width}x${r.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=r.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((t,n)=>{let r=!0;if(!this.isLoaded())for(const i of e)this.images[i]||(r=!1);this.isLoaded()||r?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t})})}_getImagesForIds(e){const n={};for(const r of e){let e=this.getImage(r);e||(this.fire(new t.l("styleimagemissing",{id:r})),e=this.getImage(r)),e?n[r]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,textFitWidth:e.textFitWidth,textFitHeight:e.textFitHeight,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w(`Image "${r}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return n}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.I(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.T(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.p(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],n=e.x+1,r=e.y+1,s=this.getImage(o).data,a=s.width,l=s.height;t.R.copy(s,i,{x:0,y:0},{x:n,y:r},{width:a,height:l}),t.R.copy(s,i,{x:0,y:l-1},{x:n,y:r-1},{width:a,height:1}),t.R.copy(s,i,{x:0,y:0},{x:n,y:r+l},{width:a,height:1}),t.R.copy(s,i,{x:a-1,y:0},{x:n-1,y:r},{width:1,height:l}),t.R.copy(s,i,{x:0,y:0},{x:n+a,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.getImage(n);e||t.w(`Image with ID: "${n}" was not found`),v(e)&&this.updateImage(n,e)}}}const b=1e20;function w(e,t,n,r,i,o,s,a,l){for(let c=t;c<t+r;c++)x(e,n*o+c,o,i,s,a,l);for(let c=n;c<n+i;c++)x(e,c*o+t,1,r,s,a,l)}function x(e,t,n,r,i,o,s){o[0]=0,s[0]=-b,s[1]=b,i[0]=e[t];for(let a=1,l=0,c=0;a<r;a++){i[a]=e[t+a*n];const r=a*a;do{const e=o[l];c=(i[a]-i[e]+r-e*e)/(a-e)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=b}for(let a=0,l=0;a<r;a++){for(;s[l+1]<a;)l++;const r=o[l],c=a-r;e[t+a*n]=i[r]+c*c}}class S{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return t._(this,void 0,void 0,function*(){const t=[];for(const i in e)for(const n of e[i])t.push(this._getAndCacheGlyphsPromise(i,n));const n=yield Promise.all(t),r={};for(const{stack:e,id:i,glyph:o}of n)r[e]||(r[e]={}),r[e][i]=o&&{id:o.id,bitmap:o.bitmap.clone(),metrics:o.metrics};return r})}_getAndCacheGlyphsPromise(e,n){return t._(this,void 0,void 0,function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let r=t.glyphs[n];if(void 0!==r)return{stack:e,id:n,glyph:r};if(r=this._tinySDF(t,e,n),r)return t.glyphs[n]=r,{stack:e,id:n,glyph:r};const i=Math.floor(n/256);if(256*i>65535)throw new Error("glyphs > 65535 not supported");if(t.ranges[i])return{stack:e,id:n,glyph:r};if(!this.url)throw new Error("glyphsUrl is not set");if(!t.requests[i]){const n=S.loadGlyphRange(e,i,this.url,this.requestManager);t.requests[i]=n}const o=yield t.requests[i];for(const e in o)this._doesCharSupportLocalGlyph(+e)||(t.glyphs[+e]=o[+e]);return t.ranges[i]=!0,{stack:e,id:n,glyph:o[n]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(e))||t.u["CJK Unified Ideographs"](e)||t.u["Hangul Syllables"](e)||t.u.Hiragana(e)||t.u.Katakana(e)||t.u["CJK Symbols and Punctuation"](e)||t.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,n,r){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(r))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(n)?t="900":/medium/i.test(n)?t="500":/light/i.test(n)&&(t="200"),o=e.tinySDF=new S.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:i,fontWeight:t})}const s=o.draw(String.fromCharCode(r));return{id:r,bitmap:new t.q({width:s.width||60,height:s.height||60},s.data),metrics:{width:s.glyphWidth/2||24,height:s.glyphHeight/2||24,left:s.glyphLeft/2+.5||0,top:s.glyphTop/2-27.5||-8,advance:s.glyphAdvance/2||24,isDoubleResolution:!0}}}}S.loadGlyphRange=function(e,n,r,i){return t._(this,void 0,void 0,function*(){const o=256*n,s=o+255,a=i.transformRequest(r.replace("{fontstack}",e).replace("{range}",`${o}-${s}`),"Glyphs"),l=yield t.n(a,new AbortController);if(!l||!l.data)throw new Error(`Could not load glyph range. range: ${n}, ${o}-${s}`);const c={};for(const e of t.o(l.data))c[e.id]=e;return c})},S.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:s="normal",lang:a=null}={}){this.buffer=t,this.cutoff=r,this.radius=n,this.lang=a;const l=this.size=e+4*t,c=this._createCanvas(l),u=this.ctx=c.getContext("2d",{willReadFrequently:!0});u.font=`${s} ${o} ${e}px ${i}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,s+Math.ceil(r)),c=a+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:t};if(0===a||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;this.lang&&(f.lang=this.lang),f.clearRect(m,m,a,l),f.fillText(e,m,m+s);const v=f.getImageData(m,m,a,l);y.fill(b,0,h),g.fill(0,0,h);for(let _=0;_<l;_++)for(let e=0;e<a;e++){const t=v.data[4*(_*a+e)+3]/255;if(0===t)continue;const n=(_+m)*c+e+m;if(1===t)y[n]=0,g[n]=b;else{const e=.5-t;y[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}w(y,0,0,c,u,c,this.f,this.v,this.z),w(g,m,m,a,l,c,this.f,this.v,this.z);for(let _=0;_<h;_++){const e=Math.sqrt(y[_])-Math.sqrt(g[_]);d[_]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class E{constructor(){this.specification=t.v.light.position}possiblyEvaluate(e,n){return t.B(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.C.number(e.x,n.x,r),y:t.C.number(e.y,n.y,r),z:t.C.number(e.z,n.z,r)}}}let T;class M extends t.E{constructor(e){super(),T=T||new t.r({anchor:new t.D(t.v.light.anchor),position:new E,color:new t.D(t.v.light.color),intensity:new t.D(t.v.light.intensity)}),this._transitionable=new t.t(T),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(t.x,e,n))for(const t in e){const n=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),n):this._transitionable.setValue(t,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.y(this,e.call(t.z,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.v}))}}const A=new t.r({"sky-color":new t.D(t.v.sky["sky-color"]),"horizon-color":new t.D(t.v.sky["horizon-color"]),"fog-color":new t.D(t.v.sky["fog-color"]),"fog-ground-blend":new t.D(t.v.sky["fog-ground-blend"]),"horizon-fog-blend":new t.D(t.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new t.D(t.v.sky["sky-horizon-blend"]),"atmosphere-blend":new t.D(t.v.sky["atmosphere-blend"])});class k extends t.E{constructor(e){super(),this._transitionable=new t.t(A),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.F(0))}setSky(e,n={}){if(!this._validate(t.G,e,n)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const t in e){const n=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),n):this._transitionable.setValue(t,n)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,r={}){return!1!==(null==r?void 0:r.validate)&&t.y(this,e.call(t.z,t.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class C{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,s=!0;r.push({left:i,right:o,isDash:s,zeroLength:0===e[0]});let a=e[0];for(let l=1;l<e.length;l++){s=!s;const t=e[l];i=a*n,a+=t,o=a*n,r.push({left:i,right:o,isDash:s,zeroLength:0===t})}return r}addRoundDash(e,t,n){const r=t/2;for(let i=-n;i<=n;i++){const t=this.width*(this.nextRow+n+i);let o=0,s=e[o];for(let a=0;a<this.width;a++){a/s.right>1&&(s=e[++o]);const l=Math.abs(a-s.left),c=Math.abs(a-s.right),u=Math.min(l,c);let h;const d=i/n*(r+1);if(s.isDash){const e=r-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+d*d);this.data[t+a]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let s=e.length-1;s>=0;--s){const t=e[s],n=e[s+1];t.zeroLength?e.splice(s,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(s,1))}const t=e[0],n=e[e.length-1];t.isDash===n.isDash&&(t.left=n.left-this.width,n.right=t.right+this.width);const r=this.width*this.nextRow;let i=0,o=e[i];for(let s=0;s<this.width;s++){s/o.right>1&&(o=e[++i]);const t=Math.abs(s-o.left),n=Math.abs(s-o.right),a=Math.min(t,n);this.data[r+s]=Math.max(0,Math.min(255,(o.isDash?a:-a)+128))}}addDash(e,n){const r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.w("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,i=this.getDashRanges(e,this.width,t);n?this.addRoundDash(i,t,r):this.addRegularDash(i)}const s={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,s}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}const I="maplibre_preloaded_worker_pool";class P{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<P.workerCount;)this.workers.push(new Worker(t.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[I]}numActive(){return Object.keys(this.active).length}}const O=Math.floor(s.hardwareConcurrency/2);let R,D;function L(){return R||(R=new P),R}P.workerCount=t.H(globalThis)?Math.max(Math.min(O,3),1):1;class N{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n;const r=this.workerPool.acquire(n);for(let i=0;i<r.length;i++){const e=new t.J(r[i],n);e.name=`Worker ${i}`,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const n=[];for(const r of this.actors)n.push(r.sendAsync({type:e,data:t}));return Promise.all(n)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(e=>{e.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,t){for(const n of this.actors)n.registerMessageHandler(e,t)}}function F(){return D||(D=new N(L(),t.K),D.registerMessageHandler("GR",(e,n,r)=>t.m(n,r))),D}function z(e,n){const r=t.L();return t.M(r,r,[1,1,0]),t.N(r,r,[.5*e.width,.5*e.height,1]),e.calculatePosMatrix?t.O(r,r,e.calculatePosMatrix(n.toUnwrapped())):r}function U(e,t,n,r,i,o,s){var a;const l=function(e,t,n){if(e)for(const r of e){const e=t[r];if(e&&e.source===n&&"fill-extrusion"===e.type)return!0}else for(const r in t){const e=t[r];if(e.source===n&&"fill-extrusion"===e.type)return!0}return!1}(null!==(a=null==i?void 0:i.layers)&&void 0!==a?a:null,t,e.id),c=o.maxPitchScaleFactor(),u=e.tilesIn(r,c,l);u.sort(j);const h=[];for(const d of u)h.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,n,e._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,i,o,c,z(e.transform,d.tileID),s?(e,t)=>s(d.tileID,e,t):void 0)});return function(e,t){for(const n in e)for(const r of e[n])B(r,t);return e}(function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},s=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,s.push(e))}}return t}(h),e)}function j(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function B(e,t){const n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}function V(e,n,r){return t._(this,void 0,void 0,function*(){let i=e;if(e.url?i=(yield t.j(n.transformRequest(e.url,"Source"),r)).data:yield s.frameAsync(r),!i)return null;const o=t.Q(t.e(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in i&&i.vector_layers&&(o.vectorLayerIds=i.vector_layers.map(e=>e.id)),o})}class H{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof t.S?new t.S(e.lng,e.lat):t.S.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.S?new t.S(e.lng,e.lat):t.S.convert(e),this}extend(e){const n=this._sw,r=this._ne;let i,o;if(e instanceof t.S)i=e,o=e;else{if(!(e instanceof H))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(H.convert(e)):this.extend(t.S.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.S.convert(e)):this;if(i=e._sw,o=e._ne,!i||!o)return this}return n||r?(n.lng=Math.min(i.lng,n.lng),n.lat=Math.min(i.lat,n.lat),r.lng=Math.max(o.lng,r.lng),r.lat=Math.max(o.lat,r.lat)):(this._sw=new t.S(i.lng,i.lat),this._ne=new t.S(o.lng,o.lat)),this}getCenter(){return new t.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.S(this.getWest(),this.getNorth())}getSouthEast(){return new t.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:r}=t.S.convert(e);let i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}static convert(e){return e instanceof H?e:e?new H(e):e}static fromLngLat(e,n=0){const r=360*n/40075017,i=r/Math.cos(Math.PI/180*e.lat);return new H(new t.S(e.lng-i,e.lat-r),new t.S(e.lng+i,e.lat+r))}adjustAntiMeridian(){const e=new t.S(this._sw.lng,this._sw.lat),n=new t.S(this._ne.lng,this._ne.lat);return new H(e,e.lng>n.lng?new t.S(n.lng+360,n.lat):n)}}class ${constructor(e,t,n){this.bounds=H.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.V(this.bounds.getWest())*n),i=Math.floor(t.U(this.bounds.getNorth())*n),o=Math.ceil(t.V(this.bounds.getEast())*n),s=Math.ceil(t.U(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<s}}class Y extends t.E{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.Q(n,["url","scheme","tileSize","promoteId"])),this._options=t.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){return t._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield V(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new $(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(t,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};n.request.collectResourceTiming=this._collectResourceTiming;let r="RT";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise((t,n)=>{e.reloadPromise={resolve:t,reject:n}})}else e.actor=this.dispatcher.getActor(),r="LT";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:r,data:n},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t)}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject)}}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class G extends t.E{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},n),t.e(this,t.Q(n,["url","scheme","tileSize"]))}load(){return t._(this,arguments,void 0,function*(e=!1){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield V(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(t.e(this,n),n.bounds&&(this.tileBounds=new $(n.bounds,this.minzoom,this.maxzoom)),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(e){this._tileJSONRequest=null,this.fire(new t.k(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return t.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const r=yield f.getImage(this.map._requestManager.transformRequest(n,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(r&&r.data){this.map._refreshExpiredTiles&&(r.cacheControl||r.expires)&&e.setExpiryData({cacheControl:r.cacheControl,expires:r.expires});const n=this.map.painter.context,i=n.gl,o=r.data;e.texture=this.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.T(n,o,i.RGBA,{useMipmap:!0}),e.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}})}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class q extends G{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(e){return t._(this,void 0,void 0,function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r=this.map._requestManager.transformRequest(n,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const n=yield f.getImage(r,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){const r=n.data;this.map._refreshExpiredTiles&&(n.cacheControl||n.expires)&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const i=t.b(r)&&t.W()?r:yield this.readImageNow(r),o={type:this.type,uid:e.uid,source:this.id,rawImageData:i,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"LDT",data:o});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}})}readImageNow(e){return t._(this,void 0,void 0,function*(){if("undefined"!=typeof VideoFrame&&t.X()){const n=e.width+2,r=e.height+2;try{return new t.R({width:n,height:r},yield t.Y(e,-1,-1,n,r))}catch(e){}}return s.getImageData(e,1)})}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,s=(n.x+1+r)%r,a=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.Z(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.Z(e.overscaledZ,a,n.z,s,n.y).key]={backfilled:!1},n.y>0&&(l[new t.Z(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.Z(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.Z(e.overscaledZ,a,n.z,s,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.Z(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.Z(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.Z(e.overscaledZ,a,n.z,s,n.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class W extends t.E{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:n.data},this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.e({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId,void 0!==n.clusterMaxZoom&&this.maxzoom<=n.clusterMaxZoom&&t.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${n.clusterMaxZoom}".`),this.workerOptions=t.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(void 0!==n.buffer?n.buffer:128),tolerance:this._pixelsToTileUnits(void 0!==n.tolerance?n.tolerance:.375),extent:t.$,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(n.clusterMaxZoom),minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.$,radius:this._pixelsToTileUnits(n.clusterRadius||50),log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(t.$/this.tileSize)}_getClusterMaxZoom(e){const n=e?Math.round(e):this.maxzoom-1;return Number.isInteger(e)||void 0===e||t.w(`Integer expected for option 'clusterMaxZoom': provided value "${e}" rounded to "${n}"`),n}load(){return t._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._pendingWorkerUpdate={data:e},this._updateWorkerData(),this}updateData(e){return this._pendingWorkerUpdate.diff=t.a0(this._pendingWorkerUpdate.diff,e),this._updateWorkerData(),this}getData(){return t._(this,void 0,void 0,function*(){const e=t.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getCoordinatesFromGeometry(e){return"GeometryCollection"===e.type?e.geometries.map(e=>e.coordinates).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return t._(this,void 0,void 0,function*(){const e=new H,t=yield this.getData();let n;switch(t.type){case"FeatureCollection":n=t.features.map(e=>this.getCoordinatesFromGeometry(e.geometry)).flat(1/0);break;case"Feature":n=this.getCoordinatesFromGeometry(t.geometry);break;default:n=this.getCoordinatesFromGeometry(t)}if(0==n.length)return e;for(let r=0;r<n.length-1;r+=2)e.extend([n[r],n[r+1]]);return e})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(e.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,n){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:n}})}_updateWorkerData(){return t._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:e,diff:n}=this._pendingWorkerUpdate;if(!e&&!n)return void t.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const r=t.e({type:this.type},this.workerOptions);e?("string"==typeof e?(r.request=this.map._requestManager.transformRequest(s.resolveURL(e),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(e),this._pendingWorkerUpdate.data=void 0):n&&(r.dataDiff=n,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new t.l("dataloading",{dataType:"source"}));try{const e=yield this.actor.sendAsync({type:"LD",data:r});if(this._isUpdatingWorker=!1,this._removed||e.abandoned)return void this.fire(new t.l("dataabort",{dataType:"source"}));this._data=e.data;let n=null;e.resourceTiming&&e.resourceTiming[this.id]&&(n=e.resourceTiming[this.id].slice(0));const i={dataType:"source"};this._collectResourceTiming&&n&&n.length>0&&t.e(i,{resourceTiming:n}),this.fire(new t.l("data",Object.assign(Object.assign({},i),{sourceDataType:"metadata"}))),this.fire(new t.l("data",Object.assign(Object.assign({},i),{sourceDataType:"content"})))}catch(e){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new t.l("dataabort",{dataType:"source"}));this.fire(new t.k(e))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&void 0===this._pendingWorkerUpdate.data&&void 0===this._pendingWorkerUpdate.diff}loadTile(e){return t._(this,void 0,void 0,function*(){const t=e.actor?"RT":"LT";e.actor=this.actor;const n={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};e.abortController=new AbortController;const r=yield this.actor.sendAsync({type:t,data:n},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(r,this.map.painter,"RT"===t)})}abortTile(e){return t._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return t._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return t.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class K extends t.E{constructor(e,t,n,r){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t}load(e){return t._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield f.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading())}catch(e){this._request=null,this._loaded=!0,this.fire(new t.k(e))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const n=e.map(t.a1.fromLngLat);var r;return this.tileID=function(e){const n=t.a2.fromPoints(e),r=n.width(),i=n.height(),o=Math.max(r,i),s=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),a=Math.pow(2,s);return new t.a4(s,Math.floor((n.minX+n.maxX)/2*a),Math.floor((n.minY+n.maxY)/2*a))}(n),this.terrainTileRanges=this._getOverlappingTileRanges(n),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=n.map(e=>this.tileID.getTilePoint(e)._round()),this.flippedWindingOrder=((r=this.tileCoords)[1].x-r[0].x)*(r[2].y-r[0].y)-(r[1].y-r[0].y)*(r[2].x-r[0].x)<0,this.fire(new t.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.texture||(this.texture=new t.T(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let r=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return t._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){const{minX:n,minY:r,maxX:i,maxY:o}=t.a2.fromPoints(e),s={};for(let a=0;a<=t.a3;a++){const e=Math.pow(2,a),t=Math.floor(n*e),l=Math.floor(r*e),c=Math.floor(i*e),u=Math.floor(o*e);s[a]={minTileX:t,minTileY:l,maxTileX:c,maxTileY:u}}return s}}class Z extends K{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){return t._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,"Source").url);try{const e=yield t.a5(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(e){this.fire(new t.k(e))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.k(new t.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.T(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let r=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class J extends K{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new t.k(new t.a6(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.k(new t.a6(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.k(new t.a6(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new t.k(new t.a6(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.k(new t.a6(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){return t._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.T(n,this.canvas,r.RGBA,{premultiply:!0});let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const X={},Q=e=>{switch(e){case"geojson":return W;case"image":return K;case"raster":return G;case"raster-dem":return q;case"vector":return Y;case"video":return Z;case"canvas":return J}return X[e]},ee="RTLPluginLoaded";class te extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=F()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(e=>{throw this.status="error",e})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return t._(this,arguments,void 0,function*(e,t=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=s.resolveURL(e),!this.url)throw new Error(`requested url ${e} is invalid`);if("unavailable"===this.status){if(!t)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()})}_requestImport(){return t._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.l(ee))})}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let ne=null;function re(){return ne||(ne=new te),ne}class ie{constructor(e,n){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=t.a7(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map(t=>e.filter(e=>e.id===t)[0]));for(const t of e)n[t.id]=r}}return n}(e.buckets,null==n?void 0:n.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.a9){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.a9&&n.hasRTLText){this.hasRTLText=!0,re().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(e).queryRadius(t))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.a8}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const n=this.buckets[t];n.uploadPending()&&n.upload(e)}const n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new t.T(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new t.T(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,s,a,l,c,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:a,params:s,queryPadding:this.queryPadding*l,getElevation:u},e,t,n):{}}querySourceFeatures(e,n){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const i=r.loadVTLayers(),o=n&&n.sourceLayer?n.sourceLayer:"",s=i._geojsonTileLayer||i[o];if(!s)return;const a=t.aa(n&&n.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let d=0;d<s.length;d++){const n=s.feature(d);if(a.needGeometry){const e=t.ab(n,!0);if(!a.filter(new t.F(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new t.F(this.tileID.overscaledZ),n))continue;const i=r.getId(n,o),p=new t.ac(n,l,c,u,i);p.tile=h,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const n=t.ad(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(n)if(this.expirationTime<n)t=!0;else{const r=this.expirationTime-n;r?this.expirationTime=e+Math.max(r,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!t.style.hasLayer(r))continue;const i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],a=e[o];if(!s||!a||0===Object.keys(a).length)continue;i.update(a,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=s.now()+e}setDependencies(e,t){const n={};for(const r of t)n[r]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}}class oe{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout(()=>{this.remove(e,i)},n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const n of t)this.remove(n.value.tileID,n)}}class se{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,r){const i=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.e(this.stateChanges[e][i],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])r[t]||(this.deletedStates[e][i][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,n){const r=String(n),i=t.e({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][n];if(null===t)return{};for(const e in t)delete i[e]}return i}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,n){const r={};for(const i in this.stateChanges){this.state[i]=this.state[i]||{};const e={};for(const n in this.stateChanges[i])this.state[i][n]||(this.state[i][n]={}),t.e(this.state[i][n],this.stateChanges[i][n]),e[n]=this.state[i][n];r[i]=e}for(const i in this.deletedStates){this.state[i]=this.state[i]||{};const e={};if(null===this.deletedStates[i])for(const t in this.state[i])e[t]={},this.state[i][t]={};else for(const t in this.deletedStates[i]){if(null===this.deletedStates[i][t])this.state[i][t]={};else for(const e of Object.keys(this.deletedStates[i][t]))delete this.state[i][t][e];e[t]=this.state[i][t]}r[i]=r[i]||{},t.e(r[i],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const t in e)e[t].setFeatureState(r,n)}}const ae=89.25;function le(e,n){const r=t.ah(n.lat,-t.ai,t.ai);return new t.P(t.V(n.lng)*e,t.U(r)*e)}function ce(e,n){return new t.a1(n.x/e,n.y/e).toLngLat()}function ue(e){return e.cameraToCenterDistance*Math.min(.85*Math.tan(t.ae(90-e.pitch)),Math.tan(t.ae(ae-e.pitch)))}function he(e,n){const r=e.canonical,i=n/t.af(r.z),o=r.x+Math.pow(2,r.z)*e.wrap,s=t.ag(new Float64Array(16));return t.M(s,s,[o*i,r.y*i,0]),t.N(s,s,[i/t.$,i/t.$,1]),s}function de(e,n,r,i,o){const s=t.a1.fromLngLat(e,n),a=o*t.aj(1,e.lat),l=a*Math.cos(t.ae(r)),c=Math.sqrt(a*a-l*l),u=c*Math.sin(t.ae(-i)),h=c*Math.cos(t.ae(-i));return new t.a1(s.x+u,s.y+h,s.z+l)}function pe(e,t,n){const r=t.intersectsFrustum(e);if(!n||0===r)return r;const i=t.intersectsPlane(n);return 0===i?0:2===r&&2===i?2:1}function fe(e,t,n){let r=0;const i=(n-t)/10;for(let o=0;o<10;o++)r+=i*Math.pow(Math.cos(t+(o+.5)/10*(n-t)),e);return r}function me(e,n){return function(r,i,o,s,a){const l=2*((e-1)/t.ak(Math.cos(t.ae(ae-a))/Math.cos(t.ae(ae)))-1),c=Math.acos(o/s),u=2*fe(l-1,0,t.ae(a/2)),h=Math.min(t.ae(ae),c+t.ae(a/2)),d=fe(l-1,Math.min(h,c-t.ae(a/2)),h),p=Math.atan(i/o),f=Math.hypot(i,o);let m=r;return m+=t.ak(s/f/Math.max(.5,Math.cos(t.ae(a/2)))),m+=l*t.ak(Math.cos(p))/2,m-=t.ak(Math.max(1,d/u/n))/2,m}}const ge=me(9.314,3);function ye(e,n){const r=(n.roundZoom?Math.round:Math.floor)(e.zoom+t.ak(e.tileSize/n.tileSize));return Math.max(0,r)}function ve(e,n){const r=e.getCameraFrustum(),i=e.getClippingPlane(),o=e.screenPointToMercatorCoordinate(e.getCameraPoint()),s=t.a1.fromLngLat(e.center,e.elevation);o.z=s.z+Math.cos(e.pitchInRadians)*e.cameraToCenterDistance/e.worldSize;const a=e.getCoveringTilesDetailsProvider(),l=a.allowVariableZoom(e,n),c=ye(e,n),u=n.minzoom||0,h=void 0!==n.maxzoom?n.maxzoom:e.maxZoom,d=Math.min(Math.max(0,c),h),p=Math.pow(2,d),f=[p*o.x,p*o.y,0],m=[p*s.x,p*s.y,0],g=Math.hypot(s.x-o.x,s.y-o.y),y=Math.abs(s.z-o.z),v=Math.hypot(g,y),_=e=>({zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),b=[],w=[];if(e.renderWorldCopies&&a.allowWorldCopies())for(let t=1;t<=3;t++)b.push(_(-t)),b.push(_(t));for(b.push(_(0));b.length>0;){const p=b.pop(),g=p.x,_=p.y;let x=p.fullyVisible;const S={x:g,y:_,z:p.zoom},E=a.getTileBoundingVolume(S,p.wrap,e.elevation,n);if(!x){const e=pe(r,E,i);if(0===e)continue;x=2===e}const T=a.distanceToTile2d(o.x,o.y,S,E);let M=c;l&&(M=(n.calculateTileZoom||ge)(e.zoom+t.ak(e.tileSize/n.tileSize),T,y,v,e.fov)),M=(n.roundZoom?Math.round:Math.floor)(M),M=Math.max(0,M);const A=Math.min(M,h);if(p.wrap=a.getWrap(s,S,p.wrap),p.zoom>=A){if(p.zoom<u)continue;const e=d-p.zoom,r=f[0]-.5-(g<<e),i=f[1]-.5-(_<<e),o=n.reparseOverscaled?Math.max(p.zoom,M):p.zoom;w.push({tileID:new t.Z(p.zoom===h?o:p.zoom,p.wrap,p.zoom,g,_),distanceSq:t.al([m[0]-.5-g,m[1]-.5-_]),tileDistanceToCamera:Math.sqrt(r*r+i*i)})}else for(let e=0;e<4;e++)b.push({zoom:p.zoom+1,x:(g<<1)+e%2,y:(_<<1)+(e>>1),wrap:p.wrap,fullyVisible:x})}return w.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}const _e=t.a2.fromPoints([new t.P(0,0),new t.P(t.$,t.$)]);class be extends t.E{constructor(e,t,n){super(),this.id=e,this.dispatcher=n,this.on("data",e=>this._dataHandler(e)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((e,t,n,r)=>{const i=new(Q(t.type))(e,t,n,r);if(i.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${i.id}`);return i})(e,t,n,this),this._tiles={},this._cache=new oe(0,e=>this._unloadTile(e)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new se,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,n,r){return t._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,n,r)}catch(n){e.state="errored",404!==n.status?this._source.fire(new t.k(n,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(we).map(e=>e.key)}getRenderableIds(e){const n=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&n.push(this._tiles[t]);return e?n.sort((e,n)=>{const r=e.tileID,i=n.tileID,o=new t.P(r.canonical.x,r.canonical.y)._rotate(-this.transform.bearingInRadians),s=new t.P(i.canonical.x,i.canonical.y)._rotate(-this.transform.bearingInRadians);return r.overscaledZ-i.overscaledZ||s.y-o.y||s.x-o.x}).map(e=>e.tileID.key):n.map(e=>e.tileID).sort(we).map(e=>e.key)}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)e?this._reloadTile(t,"expired"):"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(e,n){return t._(this,void 0,void 0,function*(){const t=this._tiles[e];t&&("loading"!==t.state&&(t.state=n),yield this._loadTile(t,e,n))})}_tileLoaded(e,n,r){e.timeAdded=s.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let s=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(s=e)}let a=s;for(;a.overscaledZ>t;)if(a=a.scaledTo(a.overscaledZ-1),e[a.key]||e[a.canonical.key]){r[s.key]=s;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const n=Math.ceil(e.width/this._source.tileSize)+1,r=Math.ceil(e.height/this._source.tileSize)+1,i=Math.floor(n*r*(null===this._maxTileCacheZoomLevels?t.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}_updateCoveredAndRetainedTiles(e,t,n,r,i,o){const a={},l={},c=Object.keys(e),u=s.now();for(const s of c){const n=e[s],r=this._tiles[s];if(!r||0!==r.fadeEndTime&&r.fadeEndTime<=u)continue;const i=this.findLoadedParent(n,t),o=this.findLoadedSibling(n),c=i||o||null;c&&(this._addTile(c.tileID),a[c.tileID.key]=c.tileID),l[s]=n}this._retainLoadedChildren(l,r,n,e);for(const s in a)e[s]||(this._coveredTiles[s]=!0,e[s]=a[s]);if(o){const t={},n={};for(const e of i)this._tiles[e.key].hasData()?t[e.key]=e:n[e.key]=e;for(const r in n){const i=n[r].children(this._source.maxzoom);this._tiles[i[0].key]&&this._tiles[i[1].key]&&this._tiles[i[2].key]&&this._tiles[i[3].key]&&(t[i[0].key]=e[i[0].key]=i[0],t[i[1].key]=e[i[1].key]=i[1],t[i[2].key]=e[i[2].key]=i[2],t[i[3].key]=e[i[3].key]=i[3],delete n[r])}for(const r in n){const i=n[r],o=this.findLoadedParent(i,this._source.minzoom),s=this.findLoadedSibling(i),a=o||s||null;if(a){t[a.tileID.key]=e[a.tileID.key]=a.tileID;for(const e in t)t[e].isChildOf(a.tileID)&&delete t[e]}}for(const e in this._tiles)t[e]||(this._coveredTiles[e]=!0)}}update(e,n){if(!this._sourceLoaded||this._paused)return;let r;this.transform=e,this.terrain=n,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new t.Z(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(r=ve(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(r=r.filter(e=>this._source.hasTile(e)))):r=[];const i=ye(e,this._source),o=Math.max(i-be.maxOverzooming,this._source.minzoom),s=Math.max(i+be.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of r)if(t.canonical.z>this._source.minzoom){const n=t.scaledTo(t.canonical.z-1);e[n.key]=n;const r=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[r.key]=r}r=r.concat(Object.values(e))}const a=0===r.length&&!this._updated&&this._didEmitContent;this._updated=!0,a&&this.fire(new t.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(r,i);xe(this._source.type)&&this._updateCoveredAndRetainedTiles(l,o,s,i,r,n);for(const t in l)this._tiles[t].clearFadeHold();const c=t.am(this._tiles,l);for(const t of c){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){var n;const r={},i={},o=Math.max(t-be.maxOverzooming,this._source.minzoom),s=Math.max(t+be.maxUnderzooming,this._source.minzoom),a={};for(const l of e){const e=this._addTile(l);r[l.key]=l,e.hasData()||t<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,t,s,r);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){r[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(r[e[0].key]&&r[e[1].key]&&r[e[2].key]&&r[e[3].key])continue}let s=e.wasRequested();for(let t=l.overscaledZ-1;t>=o;--t){const o=l.scaledTo(t);if(i[o.key])break;if(i[o.key]=!0,e=this.getTile(o),!e&&s&&(e=this._addTile(o)),e){const t=e.hasData();if((t||!(null===(n=this.map)||void 0===n?void 0:n.cancelPendingTileRequestsWhileZooming)||s)&&(r[o.key]=o),s=e.wasRequested(),t)break}}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const t=this._tiles[e].tileID,n=this._getLoadedTile(t);this._loadedSiblingTiles[t.key]=n}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const r=n;return n||(n=new ie(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,e.key,n.state)),n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.l("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},n))}refreshTiles(e){for(const t in this._tiles)(this._isIdRenderable(t)||"errored"==this._tiles[t].state)&&e.some(e=>e.equals(this._tiles[t].tileID.canonical))&&this._reloadTile(t,"expired")}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}_dataHandler(e){const t=e.sourceDataType;"source"===e.dataType&&"metadata"===t&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===t&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,n,r){const i=[],o=this.transform;if(!o)return i;const s=o.getCoveringTilesDetailsProvider().allowWorldCopies(),a=r?o.getCameraQueryGeometry(e):e,l=e=>o.screenPointToMercatorCoordinate(e,this.terrain),c=this.transformBbox(e,l,!s),u=this.transformBbox(a,l,!s),h=this.getIds(),d=t.a2.fromPoints(u);for(let p=0;p<h.length;p++){const e=this._tiles[h[p]];if(e.holdingForFade())continue;const r=s?[e.tileID]:[e.tileID.unwrapTo(-1),e.tileID.unwrapTo(0)],a=Math.pow(2,o.zoom-e.tileID.overscaledZ),l=n*e.queryPadding*t.$/e.tileSize/a;for(const n of r){const r=d.map(e=>n.getTilePoint(new t.a1(e.x,e.y)));if(r.expandBy(l),r.intersects(_e)){const t=c.map(e=>n.getTilePoint(e)),r=u.map(e=>n.getTilePoint(e));i.push({tile:e,tileID:s?n:n.unwrapTo(0),queryGeometry:t,cameraQueryGeometry:r,scale:a})}}}return i}transformBbox(e,n,r){let i=e.map(n);if(r){const r=t.a2.fromPoints(e);r.shrinkBy(.001*Math.min(r.width(),r.height()));const o=r.map(n);t.a2.fromPoints(i).covers(o)||(i=i.map(e=>e.x>.5?new t.a1(e.x-1,e.y,e.z):e))}return i}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map(e=>this._tiles[e].tileID);return this.transform&&this.transform.populateCache(t),t}hasTransition(){if(this._source.hasTransition())return!0;if(xe(this._source.type)){const e=s.now();for(const t in this._tiles)if(this._tiles[t].fadeEndTime>=e)return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter(n=>!n.hasDependency(e,t))}}function we(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function xe(e){return"raster"===e||"image"===e||"video"===e}be.maxOverzooming=10,be.maxUnderzooming=3;class Se{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.ah(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,s=this._distances[o],a=r-s,l=a>0?(i-s)/a:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}function Ee(e,t){let n=!0;return"always"===e||"never"!==e&&"never"!==t||(n=!1),n}class Te{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o,s){if(n<0||e>this.width||r<0||t>this.height)return[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return[{key:null,x1:e,y1:t,x2:n,y2:r}];for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}}else this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,overlapMode:o,seenUids:{box:{},circle:{}}},s);return a}query(e,t,n,r){return this._query(e,t,n,r,!1,null)}hitTest(e,t,n,r,i,o){return this._query(e,t,n,r,!0,i,o).length>0}hitTestCircle(e,t,n,r,i){const o=e-n,s=e+n,a=t-n,l=t+n;if(s<0||o>this.width||l<0||a>this.height)return!1;const c=[];return this._forEachCell(o,a,s,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),c.length>0}_queryCell(e,t,n,r,i,o,s,a){const{seenUids:l,hitTest:c,overlapMode:u}=s,h=this.boxCells[i];if(null!==h){const i=this.bboxes;for(const s of h)if(!l.box[s]){l.box[s]=!0;const h=4*s,d=this.boxKeys[s];if(e<=i[h+2]&&t<=i[h+3]&&n>=i[h+0]&&r>=i[h+1]&&(!a||a(d))&&(!c||!Ee(u,d.overlapMode))&&(o.push({key:d,x1:i[h],y1:i[h+1],x2:i[h+2],y2:i[h+3]}),c))return!0}}const d=this.circleCells[i];if(null!==d){const i=this.circles;for(const s of d)if(!l.circle[s]){l.circle[s]=!0;const h=3*s,d=this.circleKeys[s];if(this._circleAndRectCollide(i[h],i[h+1],i[h+2],e,t,n,r)&&(!a||a(d))&&(!c||!Ee(u,d.overlapMode))){const e=i[h],t=i[h+1],n=i[h+2];if(o.push({key:d,x1:e-n,y1:t-n,x2:e+n,y2:t+n}),c)return!0}}}return!1}_queryCellCircle(e,t,n,r,i,o,s,a){const{circle:l,seenUids:c,overlapMode:u}=s,h=this.boxCells[i];if(null!==h){const e=this.bboxes;for(const t of h)if(!c.box[t]){c.box[t]=!0;const n=4*t,r=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!a||a(r))&&!Ee(u,r.overlapMode))return o.push(!0),!0}}const d=this.circleCells[i];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const n=3*t,r=this.circleKeys[t];if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!a||a(r))&&!Ee(u,r.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,s,a){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,e,t,n,r,this.xCellCount*l+d,o,s,a))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const s=r-e,a=i-t,l=n+o;return l*l>s*s+a*a}_circleAndRectCollide(e,t,n,r,i,o,s){const a=(o-r)/2,l=Math.abs(e-(r+a));if(l>a+n)return!1;const c=(s-i)/2,u=Math.abs(t-(i+c));if(u>c+n)return!1;if(l<=a||u<=c)return!0;const h=l-a,d=u-c;return h*h+d*d<=n*n}}function Me(e,n,i){const o=t.L();if(!e){const{vecSouth:e,vecEast:t}=ke(n),i=r();i[0]=t[0],i[1]=t[1],i[2]=e[0],i[3]=e[1],s=i,(d=(l=(a=i)[0])*(h=a[3])-(u=a[2])*(c=a[1]))&&(s[0]=h*(d=1/d),s[1]=-c*d,s[2]=-u*d,s[3]=l*d),o[0]=i[0],o[1]=i[1],o[4]=i[2],o[5]=i[3]}var s,a,l,c,u,h,d;return t.N(o,o,[1/i,1/i,1]),o}function Ae(e,n,r,i){if(e){const e=t.L();if(!n){const{vecSouth:t,vecEast:n}=ke(r);e[0]=n[0],e[1]=n[1],e[4]=t[0],e[5]=t[1]}return t.N(e,e,[i,i,1]),e}return r.pixelsToClipSpaceMatrix}function ke(e){const n=Math.cos(e.rollInRadians),r=Math.sin(e.rollInRadians),i=Math.cos(e.pitchInRadians),o=Math.cos(e.bearingInRadians),s=Math.sin(e.bearingInRadians),a=t.ar();a[0]=-o*i*r-s*n,a[1]=-s*i*r+o*n;const l=t.as(a);l<1e-9?t.at(a):t.au(a,a,1/l);const c=t.ar();c[0]=o*i*n-s*r,c[1]=s*i*n+o*r;const u=t.as(c);return u<1e-9?t.at(c):t.au(c,c,1/u),{vecEast:c,vecSouth:a}}function Ce(e,n,r,i){let o;i?(o=[e,n,i(e,n),1],t.aw(o,o,r)):(o=[e,n,0,1],Ge(o,o,r));const s=o[3];return{point:new t.P(o[0]/s,o[1]/s),signedDistanceFromCamera:s,isOccluded:!1}}function Ie(e,t){return.5+e/t*.5}function Pe(e,t){return e.x>=-t[0]&&e.x<=t[0]&&e.y>=-t[1]&&e.y<=t[1]}function Oe(e,n,r,i,o,s,a,l,c,u,h,d,p){const f=r?e.textSizeData:e.iconSizeData,m=t.an(f,n.transform.zoom),g=[256/n.width*2+1,256/n.height*2+1],y=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;y.clear();const v=e.lineVertexArray,_=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,b=n.transform.width/n.transform.height;let w=!1;for(let x=0;x<_.length;x++){const r=_.get(x);if(r.hidden||r.writingMode===t.ao.vertical&&!w){Ye(r.numGlyphs,y);continue}w=!1;const S=new t.P(r.anchorX,r.anchorY),E={getElevation:p,pitchedLabelPlaneMatrix:i,lineVertexArray:v,pitchWithMap:s,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:S,unwrappedTileID:c,width:u,height:h,translation:d},T=je(r.anchorX,r.anchorY,E);if(!Pe(T.point,g)){Ye(r.numGlyphs,y);continue}const M=Ie(n.transform.cameraToCenterDistance,T.signedDistanceFromCamera),A=t.ap(f,m,r),k=s?A*n.transform.getPitchedTextCorrection(r.anchorX,r.anchorY,c)/M:A*M,C=Le({projectionContext:E,pitchedLabelPlaneMatrixInverse:o,symbol:r,fontSize:k,flip:!1,keepUpright:a,glyphOffsetArray:e.glyphOffsetArray,dynamicLayoutVertexArray:y,aspectRatio:b,rotateToLine:l});w=C.useVertical,(C.notEnoughRoom||w||C.needsFlipping&&Le({projectionContext:E,pitchedLabelPlaneMatrixInverse:o,symbol:r,fontSize:k,flip:!0,keepUpright:a,glyphOffsetArray:e.glyphOffsetArray,dynamicLayoutVertexArray:y,aspectRatio:b,rotateToLine:l}).notEnoughRoom)&&Ye(r.numGlyphs,y)}r?e.text.dynamicLayoutVertexBuffer.updateData(y):e.icon.dynamicLayoutVertexBuffer.updateData(y)}function Re(e,t,n,r,i,o,s,a){const l=o.glyphStartIndex+o.numGlyphs,c=o.lineStartIndex,u=o.lineStartIndex+o.lineLength,h=t.getoffsetX(o.glyphStartIndex),d=t.getoffsetX(l-1),p=He(e*h,n,r,i,o.segment,c,u,a,s);if(!p)return null;const f=He(e*d,n,r,i,o.segment,c,u,a,s);return f?a.projectionCache.anyProjectionOccluded?null:{first:p,last:f}:null}function De(e,n,r,i){return e===t.ao.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.ao.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function Le(e){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:r,symbol:i,fontSize:o,flip:s,keepUpright:a,glyphOffsetArray:l,dynamicLayoutVertexArray:c,aspectRatio:u,rotateToLine:h}=e,d=o/24,p=i.lineOffsetX*d,f=i.lineOffsetY*d;let m;if(i.numGlyphs>1){const e=i.glyphStartIndex+i.numGlyphs,t=i.lineStartIndex,o=i.lineStartIndex+i.lineLength,c=Re(d,l,p,f,s,i,h,n);if(!c)return{notEnoughRoom:!0};const g=Ue(c.first.point.x,c.first.point.y,n,r),y=Ue(c.last.point.x,c.last.point.y,n,r);if(a&&!s){const e=De(i.writingMode,g,y,u);if(e)return e}m=[c.first];for(let r=i.glyphStartIndex+1;r<e-1;r++){const e=He(d*l.getoffsetX(r),p,f,s,i.segment,t,o,n,h);if(!e)return{notEnoughRoom:!0};m.push(e)}m.push(c.last)}else{if(a&&!s){const e=ze(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,o=i.lineStartIndex+i.segment+1,s=new t.P(n.lineVertexArray.getx(o),n.lineVertexArray.gety(o)),a=ze(s.x,s.y,n),l=a.signedDistanceFromCamera>0?a.point:Ne(n.tileAnchorPoint,s,e,1,n),c=Ue(e.x,e.y,n,r),h=Ue(l.x,l.y,n,r),d=De(i.writingMode,c,h,u);if(d)return d}const e=He(d*l.getoffsetX(i.glyphStartIndex),p,f,s,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,n,h);if(!e||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};m=[e]}for(const g of m)t.av(c,g.point,g.angle);return{}}function Ne(e,t,n,r,i){const o=e.add(e.sub(t)._unit()),s=ze(o.x,o.y,i).point,a=n.sub(s);return n.add(a._mult(r/a.mag()))}function Fe(e,n,r){const i=n.projectionCache;if(i.projections[e])return i.projections[e];const o=new t.P(n.lineVertexArray.getx(e),n.lineVertexArray.gety(e)),s=ze(o.x,o.y,n);if(s.signedDistanceFromCamera>0)return i.projections[e]=s.point,i.anyProjectionOccluded=i.anyProjectionOccluded||s.isOccluded,s.point;const a=e-r.direction;return Ne(0===r.distanceFromAnchor?n.tileAnchorPoint:new t.P(n.lineVertexArray.getx(a),n.lineVertexArray.gety(a)),o,r.previousVertex,r.absOffsetX-r.distanceFromAnchor+1,n)}function ze(e,t,n){const r=e+n.translation[0],i=t+n.translation[1];let o;return n.pitchWithMap?(o=Ce(r,i,n.pitchedLabelPlaneMatrix,n.getElevation),o.isOccluded=!1):(o=n.transform.projectTileCoordinates(r,i,n.unwrappedTileID,n.getElevation),o.point.x=(.5*o.point.x+.5)*n.width,o.point.y=(.5*-o.point.y+.5)*n.height),o}function Ue(e,n,r,i){if(r.pitchWithMap){const o=[e,n,0,1];return t.aw(o,o,i),r.transform.projectTileCoordinates(o[0]/o[3],o[1]/o[3],r.unwrappedTileID,r.getElevation).point}return{x:e/r.width*2-1,y:1-n/r.height*2}}function je(e,t,n){return n.transform.projectTileCoordinates(e,t,n.unwrappedTileID,n.getElevation)}function Be(e,t,n){return e._unit()._perp()._mult(t*n)}function Ve(e,n,r,i,o,s,a,l,c){if(l.projectionCache.offsets[e])return l.projectionCache.offsets[e];const u=r.add(n);if(e+c.direction<i||e+c.direction>=o)return l.projectionCache.offsets[e]=u,u;const h=Fe(e+c.direction,l,c),d=Be(h.sub(r),a,c.direction),p=r.add(d),f=h.add(d);return l.projectionCache.offsets[e]=t.ax(s,u,p,f)||u,l.projectionCache.offsets[e]}function He(e,t,n,r,i,o,s,a,l){const c=r?e-t:e+t;let u=c>0?1:-1,h=0;r&&(u*=-1,h=Math.PI),u<0&&(h+=Math.PI);let d,p=u>0?o+i:o+i+1;a.projectionCache.cachedAnchorPoint?d=a.projectionCache.cachedAnchorPoint:(d=ze(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,a.projectionCache.cachedAnchorPoint=d);let f,m,g=d,y=d,v=0,_=0;const b=Math.abs(c),w=[];let x;for(;v+_<=b;){if(p+=u,p<o||p>=s)return null;v+=_,y=g,m=f;const e={absOffsetX:b,direction:u,distanceFromAnchor:v,previousVertex:y};if(g=Fe(p,a,e),0===n)w.push(y),x=g.sub(y);else{let t;const r=g.sub(y);t=0===r.mag()?Be(Fe(p+u,a,e).sub(g),n,u):Be(r,n,u),m||(m=y.add(t)),f=Ve(p,t,g,o,s,m,n,a,e),w.push(m),x=f.sub(m)}_=x.mag()}const S=x._mult((b-v)/_)._add(m||y),E=h+Math.atan2(g.y-y.y,g.x-y.x);return w.push(S),{point:S,angle:l?E:0,path:w}}const $e=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ye(e,t){for(let n=0;n<e;n++){const e=t.length;t.resize(e+4),t.float32.set($e,3*e)}}function Ge(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const qe=100;class We{constructor(e,t=new Te(e.width+200,e.height+200,25),n=new Te(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+qe,this.screenBottomBoundary=e.height+qe,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,n,r,i,o,s,a,l,c,u,h){const d=this.projectAndGetPerspectiveRatio(e.anchorPointX+a[0],e.anchorPointY+a[1],i,c,h),p=n*d.perspectiveRatio;let f;if(o||s)f=this._projectCollisionBox(e,p,r,i,o,s,a,d,c,u,h);else{const t=d.x+(u?u.x*p:0),n=d.y+(u?u.y*p:0);f={allPointsOccluded:!1,box:[t+e.x1*p,n+e.y1*p,t+e.x2*p,n+e.y2*p]}}const[m,g,y,v]=f.box,_=o?f.allPointsOccluded:d.isOccluded;let b=_;return b||(b=d.perspectiveRatio<this.perspectiveRatioCutoff),b||(b=!this.isInsideGrid(m,g,y,v)),b||"always"!==t&&this.grid.hitTest(m,g,y,v,t,l)?{box:[m,g,y,v],placeable:!1,offscreen:!1,occluded:_}:{box:[m,g,y,v],placeable:!0,offscreen:this.isOffscreen(m,g,y,v),occluded:_}}placeCollisionCircles(e,n,r,i,o,s,a,l,c,u,h,d,p,f){const m=[],g=new t.P(n.anchorX,n.anchorY),y=this.getPerspectiveRatio(g.x,g.y,s,f),v=(c?o*this.transform.getPitchedTextCorrection(n.anchorX,n.anchorY,s)/y:o*y)/t.aB,_={getElevation:f,pitchedLabelPlaneMatrix:a,lineVertexArray:r,pitchWithMap:c,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:g,unwrappedTileID:s,width:this.transform.width,height:this.transform.height,translation:p},b=Re(v,i,n.lineOffsetX*v,n.lineOffsetY*v,!1,n,!1,_);let w=!1,x=!1,S=!0;if(b){const n=.5*h*y+d,r=new t.P(-100,-100),i=new t.P(this.screenRightBoundary,this.screenBottomBoundary),o=new Se,s=b.first,a=b.last;let p=[];for(let e=s.path.length-1;e>=1;e--)p.push(s.path[e]);for(let e=1;e<a.path.length;e++)p.push(a.path[e]);const f=2.5*n;if(c){const e=this.projectPathToScreenSpace(p,_);p=e.some(e=>e.signedDistanceFromCamera<=0)?[]:e.map(e=>e.point)}let g=[];if(p.length>0){const e=p[0].clone(),n=p[0].clone();for(let t=1;t<p.length;t++)e.x=Math.min(e.x,p[t].x),e.y=Math.min(e.y,p[t].y),n.x=Math.max(n.x,p[t].x),n.y=Math.max(n.y,p[t].y);g=e.x>=r.x&&n.x<=i.x&&e.y>=r.y&&n.y<=i.y?[p]:n.x<r.x||e.x>i.x||n.y<r.y||e.y>i.y?[]:t.ay([p],r.x,r.y,i.x,i.y)}for(const t of g){o.reset(t,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/f)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),s=o.lerp(i),a=s.x+qe,c=s.y+qe;m.push(a,c,n,0);const h=a-n,d=c-n,p=a+n,f=c+n;if(S=S&&this.isOffscreen(h,d,p,f),x=x||this.isInsideGrid(h,d,p,f),"always"!==e&&this.grid.hitTestCircle(a,c,n,e,u)&&(w=!0,!l))return{circles:[],offscreen:!1,collisionDetected:w}}}}return{circles:!l&&w||!x||y<this.perspectiveRatioCutoff?[]:m,offscreen:S,collisionDetected:w}}projectPathToScreenSpace(e,n){const r=function(e,n){const r=t.L();return t.aq(r,n.pitchedLabelPlaneMatrix),e.map(e=>{const t=Ce(e.x,e.y,r,n.getElevation),i=n.transform.projectTileCoordinates(t.point.x,t.point.y,n.unwrappedTileID,n.getElevation);return i.point.x=(.5*i.point.x+.5)*n.width,i.point.y=(.5*-i.point.y+.5)*n.height,i})}(e,n);return function(e){let t=0,n=0,r=0,i=0;for(let o=0;o<e.length;o++)e[o].isOccluded?(r=o+1,i=0):(i++,i>n&&(n=i,t=r));return e.slice(t,t+n)}(r)}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[],r=new t.a2;for(const h of e){const e=new t.P(h.x+qe,h.y+qe);r.extend(e),n.push(e)}const{minX:i,minY:o,maxX:s,maxY:a}=r,l=this.grid.query(i,o,s,a).concat(this.ignoredGrid.query(i,o,s,a)),c={},u={};for(const h of l){const e=h.key;if(void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]={}),c[e.bucketInstanceId][e.featureIndex])continue;const r=[new t.P(h.x1,h.y1),new t.P(h.x2,h.y1),new t.P(h.x2,h.y2),new t.P(h.x1,h.y2)];t.az(n,r)&&(c[e.bucketInstanceId][e.featureIndex]=!0,void 0===u[e.bucketInstanceId]&&(u[e.bucketInstanceId]=[]),u[e.bucketInstanceId].push(e.featureIndex))}return u}insertCollisionBox(e,t,n,r,i,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i,o){const s=n?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:t};for(let l=0;l<e.length;l+=4)s.insertCircle(a,e[l],e[l+1],e[l+2])}projectAndGetPerspectiveRatio(e,n,r,i,o){if(o){let r;i?(r=[e,n,i(e,n),1],t.aw(r,r,o)):(r=[e,n,0,1],Ge(r,r,o));const s=r[3];return{x:(r[0]/s+1)/2*this.transform.width+qe,y:(-r[1]/s+1)/2*this.transform.height+qe,perspectiveRatio:.5+this.transform.cameraToCenterDistance/s*.5,isOccluded:!1,signedDistanceFromCamera:s}}{const t=this.transform.projectTileCoordinates(e,n,r,i);return{x:(t.point.x+1)/2*this.transform.width+qe,y:(1-t.point.y)/2*this.transform.height+qe,perspectiveRatio:.5+this.transform.cameraToCenterDistance/t.signedDistanceFromCamera*.5,isOccluded:t.isOccluded,signedDistanceFromCamera:t.signedDistanceFromCamera}}}getPerspectiveRatio(e,t,n,r){const i=this.transform.projectTileCoordinates(e,t,n,r);return.5+this.transform.cameraToCenterDistance/i.signedDistanceFromCamera*.5}isOffscreen(e,t,n,r){return n<qe||e>=this.screenRightBoundary||r<qe||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.ag([]);return t.M(e,e,[-100,-100,0]),e}_projectCollisionBox(e,n,r,i,o,s,a,l,c,u,h){let d=1,p=0,f=0,m=1;const g=e.anchorPointX+a[0],y=e.anchorPointY+a[1];if(s&&!o){const e=this.projectAndGetPerspectiveRatio(g+1,y,i,c,h),t=e.x-l.x,n=Math.atan((e.y-l.y)/t)+(t<0?Math.PI:0),r=Math.sin(n),o=Math.cos(n);d=o,p=r,f=-r,m=o}else if(!s&&o){const e=ke(this.transform);d=e.vecEast[0],p=e.vecEast[1],f=e.vecSouth[0],m=e.vecSouth[1]}let v=l.x,_=l.y,b=n;o&&(v=g,_=y,b=Math.pow(2,-(this.transform.zoom-r.overscaledZ)),b*=this.transform.getPitchedTextCorrection(g,y,i),u||(b*=t.ah(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),u&&(v+=d*u.x*b+f*u.y*b,_+=p*u.x*b+m*u.y*b);const w=e.x1*b,x=e.x2*b,S=(w+x)/2,E=e.y1*b,T=e.y2*b,M=(E+T)/2,A=[{offsetX:w,offsetY:E},{offsetX:S,offsetY:E},{offsetX:x,offsetY:E},{offsetX:x,offsetY:M},{offsetX:x,offsetY:T},{offsetX:S,offsetY:T},{offsetX:w,offsetY:T},{offsetX:w,offsetY:M}];let k=[];for(const{offsetX:I,offsetY:P}of A)k.push(new t.P(v+d*I+f*P,_+p*I+m*P));let C=!1;if(o){const e=k.map(e=>this.projectAndGetPerspectiveRatio(e.x,e.y,i,c,h));C=e.some(e=>!e.isOccluded),k=e.map(e=>new t.P(e.x,e.y))}else C=!0;return{box:t.aA(k),allPointsOccluded:!C}}}class Ke{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class Ze{constructor(e,t,n,r,i){this.text=new Ke(e?e.text:null,t,n,i),this.icon=new Ke(e?e.icon:null,t,r,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Je{constructor(e,t,n){this.text=e,this.icon=t,this.skipFade=n}}class Xe{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Qe{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function et(e,n,r,i,o){const{horizontalAlign:s,verticalAlign:a}=t.aH(e);return new t.P(-(s-.5)*n+i[0]*o,-(a-.5)*r+i[1]*o)}class tt{constructor(e,t,n,r,i){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new We(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Qe(r),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const t=this.terrain;return t?(n,r)=>t.getElevation(e,n,r):null}getBucketParts(e,n,r,i){const o=r.getBucket(n),s=r.latestFeatureIndex;if(!o||!s||n.id!==o.layerIds[0])return;const a=r.collisionBoxArray,l=o.layers[0].layout,c=o.layers[0].paint,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),h=r.tileSize/t.$,d=r.tileID.toUnwrapped(),p="map"===l.get("text-rotation-alignment"),f=t.aC(r,1,this.transform.zoom),m=t.aD(this.collisionIndex.transform,r,c.get("text-translate"),c.get("text-translate-anchor")),g=t.aD(this.collisionIndex.transform,r,c.get("icon-translate"),c.get("icon-translate-anchor")),y=Me(p,this.transform,f);this.retainedQueryData[o.bucketInstanceId]=new Xe(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,r.tileID);const v={bucket:o,layout:l,translationText:m,translationIcon:g,unwrappedTileID:d,pitchedLabelPlaneMatrix:y,scale:u,textPixelRatio:h,holdingForFade:r.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:t.an(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:v})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:v})}attemptAnchorPlacement(e,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_,b){const w=t.aE[e.textAnchor],x=[e.textOffset0,e.textOffset1],S=et(w,r,i,x,o),E=this.collisionIndex.placeCollisionBox(n,d,l,c,u,a,s,g,h.predicate,_,S,b);if((!v||this.collisionIndex.placeCollisionBox(v,d,l,c,u,a,s,y,h.predicate,_,S,b).placeable)&&E.placeable){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(e=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:x,width:r,height:i,anchor:w,textBoxScale:o,prevAnchor:e},this.markUsedJustification(f,w,p,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,p),this.placedOrientations[p.crossTileID]=m),{shift:S,placedGlyphBoxes:E}}}placeLayerBucketPart(e,n,r){const{bucket:i,layout:o,translationText:s,translationIcon:a,unwrappedTileID:l,pitchedLabelPlaneMatrix:c,textPixelRatio:u,holdingForFade:h,collisionBoxArray:d,partiallyEvaluatedTextSize:p,collisionGroup:f}=e.parameters,m=o.get("text-optional"),g=o.get("icon-optional"),y=t.aF(o,"text-overlap","text-allow-overlap"),v="always"===y,_=t.aF(o,"icon-overlap","icon-allow-overlap"),b="always"===_,w="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),S="none"!==o.get("icon-text-fit"),E="viewport-y"===o.get("symbol-z-order"),T=v&&(b||!i.hasIconData()||g),M=b&&(v||!i.hasTextData()||m);!i.collisionArrays&&d&&i.deserializeCollisionBoxes(d);const A=this.retainedQueryData[i.bucketInstanceId].tileID,k=this._getTerrainElevationFunc(A),C=this.transform.getFastPathSimpleProjectionMatrix(A),I=(e,d,b)=>{var E,I;if(n[e.crossTileID])return;if(h)return void(this.placements[e.crossTileID]=new Je(!1,!1,!1));let P=!1,O=!1,R=!0,D=null,L={box:null,placeable:!1,offscreen:null,occluded:!1},N={placeable:!1},F=null,z=null,U=null,j=0,B=0,V=0;d.textFeatureIndex?j=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(j=e.featureIndex),d.verticalTextFeatureIndex&&(B=d.verticalTextFeatureIndex);const H=d.textBox;if(H){const n=n=>{let r=t.ao.horizontal;if(i.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(i,r,e))}return r},o=(n,r)=>{if(i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&d.verticalTextBox){for(const e of i.writingModes)if(e===t.ao.vertical?(L=r(),N=L):L=n(),L&&L.placeable)break}else L=n()},c=e.textAnchorOffsetStartIndex,h=e.textAnchorOffsetEndIndex;if(h===c){const r=(t,n)=>{const r=this.collisionIndex.placeCollisionBox(t,y,u,A,l,x,w,s,f.predicate,k,void 0,C);return r&&r.placeable&&(this.markUsedOrientation(i,n,e),this.placedOrientations[e.crossTileID]=n),r};o(()=>r(H,t.ao.horizontal),()=>{const n=d.verticalTextBox;return i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?r(n,t.ao.vertical):{box:null,offscreen:null}}),n(L&&L.placeable)}else{let p=t.aE[null===(I=null===(E=this.prevPlacement)||void 0===E?void 0:E.variableOffsets[e.crossTileID])||void 0===I?void 0:I.anchor];const m=(t,n,o)=>{const d=t.x2-t.x1,m=t.y2-t.y1,g=e.textBoxScale,v=S&&"never"===_?n:null;let b=null,E="never"===y?1:2,T="never";p&&E++;for(let r=0;r<E;r++){for(let n=c;n<h;n++){const r=i.textAnchorOffsets.get(n);if(p&&r.textAnchor!==p)continue;const c=this.attemptAnchorPlacement(r,t,d,m,g,w,x,u,A,l,f,T,e,i,o,s,a,v,k);if(c&&(b=c.placedGlyphBoxes,b&&b.placeable))return P=!0,D=c.shift,b}p?p=null:T=y}return r&&!b&&(b={box:this.collisionIndex.placeCollisionBox(H,"always",u,A,l,x,w,s,f.predicate,k,void 0,C).box,offscreen:!1,placeable:!1,occluded:!1}),b};o(()=>m(H,d.iconBox,t.ao.horizontal),()=>{const n=d.verticalTextBox;return i.allowVerticalPlacement&&(!L||!L.placeable)&&e.numVerticalGlyphVertices>0&&n?m(n,d.verticalIconBox,t.ao.vertical):{box:null,occluded:!0,offscreen:null}}),L&&(P=L.placeable,R=L.offscreen);const g=n(L&&L.placeable);if(!P&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(i,t.anchor,e,g))}}}if(F=L,P=F&&F.placeable,R=F&&F.offscreen,e.useRuntimeCollisionCircles){const n=i.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),a=t.ap(i.textSizeData,p,n),u=o.get("text-padding");z=this.collisionIndex.placeCollisionCircles(y,n,i.lineVertexArray,i.glyphOffsetArray,a,l,c,r,x,f.predicate,e.collisionCircleDiameter,u,s,k),z.circles.length&&z.collisionDetected&&!r&&t.w("Collisions detected, but collision boxes are not shown"),P=v||z.circles.length>0&&!z.collisionDetected,R=R&&z.offscreen}if(d.iconFeatureIndex&&(V=d.iconFeatureIndex),d.iconBox){const e=e=>this.collisionIndex.placeCollisionBox(e,_,u,A,l,x,w,a,f.predicate,k,S&&D?D:void 0,C);N&&N.placeable&&d.verticalIconBox?(U=e(d.verticalIconBox),O=U.placeable):(U=e(d.iconBox),O=U.placeable),R=R&&U.offscreen}const $=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Y=g||0===e.numIconVertices;$||Y?Y?$||(O=O&&P):P=O&&P:O=P=O&&P;const G=O&&U.placeable;if(P&&F.placeable&&this.collisionIndex.insertCollisionBox(F.box,y,o.get("text-ignore-placement"),i.bucketInstanceId,N&&N.placeable&&B?B:j,f.ID),G&&this.collisionIndex.insertCollisionBox(U.box,_,o.get("icon-ignore-placement"),i.bucketInstanceId,V,f.ID),z&&P&&this.collisionIndex.insertCollisionCircles(z.circles,y,o.get("text-ignore-placement"),i.bucketInstanceId,j,f.ID),r&&this.storeCollisionData(i.bucketInstanceId,b,d,F,U,z),0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===i.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new Je((P||T)&&!(null==F?void 0:F.occluded),(O||M)&&!(null==U?void 0:U.occluded),R||i.justReloaded),n[e.crossTileID]=!0};if(E){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=i.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let e=t.length-1;e>=0;--e){const n=t[e];I(i.symbolInstances.get(n),i.collisionArrays[n],n)}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)I(i.symbolInstances.get(t),i.collisionArrays[t],t);i.justReloaded=!1}storeCollisionData(e,t,n,r,i,o){if(n.textBox||n.iconBox){let o,s;this.collisionBoxArrays.has(e)?o=this.collisionBoxArrays.get(e):(o=new Map,this.collisionBoxArrays.set(e,o)),o.has(t)?s=o.get(t):(s={text:null,icon:null},o.set(t,s)),n.textBox&&(s.text=r.box),n.iconBox&&(s.icon=i.box)}if(o){let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=[]);for(let e=0;e<o.circles.length;e+=4)t.push(o.circles[e+0]-qe),t.push(o.circles[e+1]-qe),t.push(o.circles[e+2]),t.push(o.collisionDetected?1:0)}}markUsedJustification(e,n,r,i){let o;o=i===t.ao.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.aG(n)];const s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:r.crossTileID)}markUsedOrientation(e,n,r){const i=n===t.ao.horizontal||n===t.ao.horizontalOnly?n:0,o=n===t.ao.vertical?n:0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of s)e.text.placedSymbolArray.get(t).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},s=t?t.placedOrientations:{};for(const a in this.placements){const e=this.placements[a],t=i[a];t?(this.opacities[a]=new Ze(t,r,e.text,e.icon),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[a]=new Ze(null,r,e.text,e.icon,e.skipFade),n=n||e.text||e.icon)}for(const a in i){const e=i[a];if(!this.opacities[a]){const t=new Ze(e,r,!1,!1);t.isHidden()||(this.opacities[a]=t,n=n||e.text.placed||e.icon.placed)}}for(const a in o)this.variableOffsets[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.variableOffsets[a]=o[a]);for(const a in s)this.placedOrientations[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.placedOrientations[a]=s[a]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,r.tileID,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r,i){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const o=e.layers[0],s=o.layout,a=new Ze(null,0,!1,!1,!0),l=s.get("text-allow-overlap"),c=s.get("icon-allow-overlap"),u=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),h="map"===s.get("text-rotation-alignment"),d="map"===s.get("text-pitch-alignment"),p="none"!==s.get("icon-text-fit"),f=new Ze(null,0,l&&(c||!e.hasIconData()||s.get("icon-optional")),c&&(l||!e.hasTextData()||s.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);const m=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n);e.hasVisibleVertices=e.hasVisibleVertices||n!==ht},g=this.collisionBoxArrays.get(e.bucketInstanceId);for(let y=0;y<e.symbolInstances.length;y++){const n=e.symbolInstances.get(y),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:o,crossTileID:s}=n;let l=this.opacities[s];r[s]?l=a:l||(l=f,this.opacities[s]=l),r[s]=!0;const c=n.numIconVertices>0,v=this.placedOrientations[n.crossTileID],_=v===t.ao.vertical,b=v===t.ao.horizontal||v===t.ao.horizontalOnly;if(i>0||o>0){const t=ut(l.text);m(e.text,i,_?ht:t),m(e.text,o,b?ht:t);const r=l.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach(t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=r||_?1:0)}),n.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=r||b?1:0);const s=this.variableOffsets[n.crossTileID];s&&this.markUsedJustification(e,s.anchor,n,v);const a=this.placedOrientations[n.crossTileID];a&&(this.markUsedJustification(e,"left",n,a),this.markUsedOrientation(e,a,n))}if(c){const t=ut(l.icon),r=!(p&&n.verticalPlacedIconSymbolIndex&&_);n.placedIconSymbolIndex>=0&&(m(e.icon,n.numIconVertices,r?t:ht),e.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=l.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,n.numVerticalIconVertices,r?ht:t),e.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}const w=g&&g.has(y)?g.get(y):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[y];if(n){let r=new t.P(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(u){const e=this.variableOffsets[s];e?(r=et(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),h&&r._rotate(d?-this.transform.bearingInRadians:this.transform.bearingInRadians)):t=!1}if(n.textBox||n.verticalTextBox){let i;n.textBox&&(i=_),n.verticalTextBox&&(i=b),nt(e.textCollisionBox.collisionVertexArray,l.text.placed,!t||i,w.text,r.x,r.y)}}if(n.iconBox||n.verticalIconBox){const t=Boolean(!b&&n.verticalIconBox);let i;n.iconBox&&(i=t),n.verticalIconBox&&(i=!t),nt(e.iconCollisionBox.collisionVertexArray,l.icon.placed,i,w.icon,p?r.x:0,p?r.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function nt(e,t,n,r,i,o){r&&0!==r.length||(r=[0,0,0,0]);const s=r[0]-qe,a=r[1]-qe,l=r[2]-qe,c=r[3]-qe;e.emplaceBack(t?1:0,n?1:0,i||0,o||0,s,a),e.emplaceBack(t?1:0,n?1:0,i||0,o||0,l,a),e.emplaceBack(t?1:0,n?1:0,i||0,o||0,l,c),e.emplaceBack(t?1:0,n?1:0,i||0,o||0,s,c)}const rt=Math.pow(2,25),it=Math.pow(2,24),ot=Math.pow(2,17),st=Math.pow(2,16),at=Math.pow(2,9),lt=Math.pow(2,8),ct=Math.pow(2,1);function ut(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*rt+t*it+n*ot+t*st+n*at+t*lt+n*ct+t}const ht=0;class dt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}class pt{constructor(e,t,n,r,i,o,s,a){this.placement=new tt(e,t,o,s,a),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,t,n){const r=s.now(),i=()=>!this._forceFullPlacement&&s.now()-r>2;for(;this._currentPlacementIndex>=0;){const r=t[e[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===r.type&&(!r.minzoom||r.minzoom<=o)&&(!r.maxzoom||r.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new dt(r)),this._inProgressLayer.continuePlacement(n[r.source],this.placement,this._showCollisionBoxes,r,i))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const ft=512/t.$/2;class mt{constructor(e,n,r){this.tileID=e,this.bucketInstanceId=r,this._symbolsByKey={};const i=new Map;for(let t=0;t<n.length;t++){const e=n.get(t),r=e.key,o=i.get(r);o?o.push(e):i.set(r,[e])}for(const[o,s]of i){const e={positions:s.map(e=>({x:Math.floor(e.anchorX*ft),y:Math.floor(e.anchorY*ft)})),crossTileIDs:s.map(e=>e.crossTileID)};if(e.positions.length>128){const n=new t.aI(e.positions.length,16,Uint16Array);for(const{x:t,y:r}of e.positions)n.add(t,r);n.finish(),delete e.positions,e.index=n}this._symbolsByKey[o]=e}}getScaledCoordinates(e,n){const{x:r,y:i,z:o}=this.tileID.canonical,{x:s,y:a,z:l}=n.canonical,c=ft/Math.pow(2,l-o),u=(a*t.$+e.anchorY)*c,h=i*t.$*ft;return{x:Math.floor((s*t.$+e.anchorX)*c-r*t.$*ft),y:Math.floor(u-h)}}findMatches(e,t,n){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const s=this._symbolsByKey[o.key];if(!s)continue;const a=this.getScaledCoordinates(o,t);if(s.index){const e=s.index.range(a.x-r,a.y-r,a.x+r,a.y+r).sort();for(const t of e){const e=s.crossTileIDs[t];if(!n[e]){n[e]=!0,o.crossTileID=e;break}}}else if(s.positions)for(let e=0;e<s.positions.length;e++){const t=s.positions[e],i=s.crossTileIDs[e];if(Math.abs(t.x-a.x)<=r&&Math.abs(t.y-a.y)<=r&&!n[i]){n[i]=!0,o.crossTileID=i;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class gt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],r={};for(const n in e){const i=e[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=n[e.scaledTo(Number(i)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let i=0;i<t.symbolInstances.length;i++){const e=t.symbolInstances.get(i);e.crossTileID||(e.crossTileID=n.generate(),r[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new mt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.getCrossTileIDsLists())for(const t of n)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class vt{constructor(){this.layerIndexes={},this.crossTileIDs=new gt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n){let r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new yt);let i=!1;const o={};r.handleWrapJump(n);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(s.tileID,t,this.crossTileIDs)&&(i=!0),o[t.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i}pruneUnusedLayers(e){const t={};e.forEach(e=>{t[e]=!0});for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}var _t="void main() {fragColor=vec4(1.0);}";const bt={prelude:wt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nout highp vec4 fragColor;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c\n);}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\n#ifdef GLOBE\nif ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}\n#endif\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;"),projectionMercator:wt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:wt("","#define GLOBE_RADIUS 6371008.8\nuniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos\n);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); \nif (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len\n);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}"),background:wt("uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:wt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wt("in vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {\n#ifdef GLOBE\nvec3 center_vector=projectToSphere(circle_center);\n#endif\nfloat angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {\n#ifdef GLOBE\nvec4 projected_center=interpolateProjection(circle_center,center_vector,ele);\n#else\nvec4 projected_center=projectTileWithElevation(circle_center,ele);\n#endif\ncorner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}\n#ifdef GLOBE\nvec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);\n#else\ngl_Position=projectTileWithElevation(corner_position,ele);\n#endif\n} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:wt(_t,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:wt("uniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);\n#ifdef GLOBE\nvec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);\n#else\ngl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));\n#endif\n}"),heatmapTexture:wt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:wt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else\n{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:wt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:wt(_t,"in vec2 a_pos;void main() {\n#ifdef GLOBE\ngl_Position=projectTileFor3D(a_pos,0.0);\n#else\ngl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);\n#endif\n}"),fill:wt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nfragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_fill_translate;in vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);}"),fillOutline:wt("in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillOutlinePattern:wt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillPattern:wt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:wt("in vec4 v_color;void main() {fragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\nout vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);\n#ifdef GLOBE\nmat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);\n#endif\ndirectional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:wt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\n#ifdef GLOBE\nout vec3 v_sphere_pos;\n#endif\nout vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nvec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:wt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wt("uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];\n#define PI 3.141592653589793\n#define STANDARD 0\n#define COMBINED 1\n#define IGOR 2\n#define MULTIDIRECTIONAL 3\n#define BASIC 4\nfloat get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else\n{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else\n{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:wt("uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:wt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:wt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:wt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:wt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;\n#ifdef GLOBE\nif (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}\n#endif\nv_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:wt("uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:wt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:wt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:wt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:wt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:wt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:wt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:wt("in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758\n);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}","in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:wt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function wt(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/in ([\w]+) ([\w]+)/g),i=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=o?o.concat(i):i,a={};return{fragmentSource:e=e.replace(n,(e,t,n,r,i)=>(a[i]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nin ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`)),vertexSource:t=t.replace(n,(e,t,n,r,i)=>{const o="float"===r?"vec2":"vec4",s=i.match(/color/)?"color":o;return a[i]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nin ${n} ${o} a_${i};\nout ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${s}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nin ${n} ${o} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${s}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`}),staticAttributes:r,staticUniforms:s}}class xt{constructor(e,t,n){this.vertexBuffer=e,this.indexBuffer=t,this.segments=n}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var St=t.aJ([{name:"a_pos",type:"Int16",components:2}]);const Et="#define PROJECTION_MERCATOR",Tt="mercator";class Mt{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Tt}get shaderDefine(){return Et}get shaderPreludeCode(){return bt.projectionMercator}get vertexShaderPreludeCode(){return bt.projectionMercator.vertexSource}get subdivisionGranularity(){return t.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,n,r,i,o){if(this._cachedMesh)return this._cachedMesh;const s=new t.aL;s.emplaceBack(0,0),s.emplaceBack(t.$,0),s.emplaceBack(0,t.$),s.emplaceBack(t.$,t.$);const a=e.createVertexBuffer(s,St.members),l=t.aM.simpleSegment(0,0,4,2),c=new t.aN;c.emplaceBack(1,0,2),c.emplaceBack(1,2,3);const u=e.createIndexBuffer(c);return this._cachedMesh=new xt(a,u,l),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class At{constructor(e=0,t=0,n=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.C.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.C.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.C.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.C.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.ah((this.left+e-this.right)/2,0,e),i=t.ah((this.top+n-this.bottom)/2,0,n);return new t.P(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new At(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function kt(e,t){if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}function Ct(e){return Math.max(0,Math.floor(e))}class It{constructor(e,n,r,i,o,s){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=void 0===s||!!s,this._minZoom=n||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==o?60:o,this.setMaxBounds(),this._width=0,this._height=0,this._center=new t.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ct(this._zoom),this._scale=t.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new At,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,n,r){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=Ct(this._zoom),this._scale=t.af(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new At(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!r&&e.autoCalculateNearFarZ,n&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const n=t.aO(e,-180,180)*Math.PI/180;var i,o,s,a,l,c,u,h,d;this._bearingInRadians!==n&&(this._unmodified=!1,this._bearingInRadians=n,this._calcMatrices(),this._rotationMatrix=r(),i=this._rotationMatrix,s=-this._bearingInRadians,a=(o=this._rotationMatrix)[0],l=o[1],c=o[2],u=o[3],h=Math.sin(s),d=Math.cos(s),i[0]=a*d+c*h,i[1]=l*d+u*h,i[2]=a*-h+c*d,i[3]=l*-h+u*d)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const n=t.ah(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==n&&(this._unmodified=!1,this._pitchInRadians=n,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const t=e/180*Math.PI;this._rollInRadians!==t&&(this._unmodified=!1,this._rollInRadians=t,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return t.aP(this._fovInRadians)}setFov(e){e=t.ah(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=t.ae(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const n=this.getConstrained(this._center,e).zoom;this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this._tileZoom=Math.max(0,Math.floor(n)),this._scale=t.af(n),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,t){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=t,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}resize(e,t,n=!0){this._width=e,this._height=t,n&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&2===this._latRange.length&&this._lngRange&&2===this._lngRange.length?new H([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-t.ai,t.ai])}getConstrained(e,t){return this._callbacks.getConstrained(e,t)}getCameraQueryGeometry(e,n){if(1===n.length)return[n[0],e];{const{minX:r,minY:i,maxX:o,maxY:s}=t.a2.fromPoints(n).extend(e);return[new t.P(r,i),new t.P(o,i),new t.P(o,s),new t.P(r,s),new t.P(r,i)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:n}=this.getConstrained(this.center,this.zoom);this.setCenter(t),this.setZoom(n),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=t.ag(new Float64Array(16));t.N(e,e,[this._width/2,-this._height/2,1]),t.M(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=t.ag(new Float64Array(16)),t.N(e,e,[1,-1,1]),t.M(e,e,[-1,-1,0]),t.N(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,n,r,i){const o=void 0!==r?r:this.bearing,s=i=void 0!==i?i:this.pitch,a=t.a1.fromLngLat(e,n),l=-Math.cos(t.ae(s)),c=Math.sin(t.ae(s)),u=c*Math.sin(t.ae(o)),h=-c*Math.cos(t.ae(o));let d=this.elevation;const p=n-d;let f;l*p>=0||Math.abs(l)<.1?(f=1e4,d=n+f*l):f=-p/l;let m,g,y=t.aQ(1,a.y),v=0;do{if(v+=1,v>10)break;g=f/y,m=new t.a1(a.x+u*g,a.y+h*g),y=1/m.meterInMercatorCoordinateUnits()}while(Math.abs(f-g*y)>1e-12);return{center:m.toLngLat(),elevation:d,zoom:t.ak(this.height/2/Math.tan(this.fovInRadians/2)/g/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const n=t.aj(1,this.center.lat)*this.worldSize,r=this.cameraToCenterDistance/n,i=t.a1.fromLngLat(this.center,this.elevation),o=de(this.center,this.elevation,this.pitch,this.bearing,r);this._elevation=e;const s=this.calculateCenterFromCameraLngLatAlt(o.toLngLat(),t.aQ(o.z,i.y),this.bearing,this.pitch);this._elevation=s.elevation,this._center=s.center,this.setZoom(s.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=t.aj(1,this.center.lat)*this.worldSize;return de(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const n=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/n,e.canonical.y/n,1/n/t.$,1/n/t.$]}}class Pt{constructor(e,n){this.min=e,this.max=n,this.center=t.aR([],t.aS([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],r=t.aT(this.min),i=t.aT(this.max);for(let t=0;t<n.length;t++)r[t]=n[t]?this.min[t]:this.center[t],i[t]=n[t]?this.center[t]:this.max[t];return i[2]=this.max[2],new Pt(r,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let t=!0;for(let n=0;n<e.planes.length;n++){const r=this.intersectsPlane(e.planes[n]);if(0===r)return 0;1===r&&(t=!1)}return t?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let t=e[3],n=e[3];for(let r=0;r<3;r++)e[r]>0?(t+=e[r]*this.min[r],n+=e[r]*this.max[r]):(n+=e[r]*this.min[r],t+=e[r]*this.max[r]);return t>=0?2:n<0?0:1}}class Ot{distanceToTile2d(e,t,n,r){const i=r.distanceX([e,t]),o=r.distanceY([e,t]);return Math.hypot(i,o)}getWrap(e,t,n){return n}getTileBoundingVolume(e,n,r,i){var o,s;let a=0,l=0;if(null==i?void 0:i.terrain){const c=new t.Z(e.z,n,e.z,e.x,e.y),u=i.terrain.getMinMaxElevation(c);a=null!==(o=u.minElevation)&&void 0!==o?o:Math.min(0,r),l=null!==(s=u.maxElevation)&&void 0!==s?s:Math.max(0,r)}const c=1<<e.z;return new Pt([n+e.x/c,e.y/c,a],[n+(e.x+1)/c,(e.y+1)/c,l])}allowVariableZoom(e,n){const r=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,i=t.ah(78.5-r/2,0,60);return!!n.terrain||e.pitch>i}allowWorldCopies(){return!0}prepareNextFrame(){}}class Rt{constructor(e,t,n){this.points=e,this.planes=t,this.aabb=n}static fromInvProjectionMatrix(e,n=1,r=0,i,o){const s=o?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],a=Math.pow(2,r),l=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(r=>function(e,n,r,i){const o=t.aw([],e,n),s=1/o[3]/r*i;return t.aY(o,o,[s,s,1/o[3],s])}(r,e,n,a));i&&function(e,n,r,i){const o=i?4:0,s=i?0:4;let a=0;const l=[],c=[];for(let d=0;d<4;d++){const n=t.aU([],e[d+s],e[d+o]),r=t.aZ(n);t.aR(n,n,1/r),l.push(r),c.push(n)}for(let d=0;d<4;d++){const n=t.a_(e[d+o],c[d],r);a=null!==n&&n>=0?Math.max(a,n):Math.max(a,l[d])}const u=function(e,n){const r=t.aU([],e[n[0]],e[n[1]]),i=t.aU([],e[n[2]],e[n[1]]),o=[0,0,0,0];return t.aV(o,t.aW([],r,i)),o[3]=-t.aX(o,e[n[0]]),o}(e,n),h=function(e,n){const r=t.a$(e),i=t.b0([],e,1/r),o=t.aU([],n,t.aR([],i,t.aX(n,i))),s=t.a$(o);if(s>0){const e=Math.sqrt(1-i[3]*i[3]),r=t.aR([],i,-i[3]),a=t.aS([],r,t.aR([],o,e/s));return t.b1(n,a)}return null}(r,u);if(null!==h){const e=h/t.aX(c[0],u);a=Math.min(a,e)}for(let t=0;t<4;t++){const n=Math.min(a,l[t]);e[t+s]=[e[t+o][0]+c[t][0]*n,e[t+o][1]+c[t][1]*n,e[t+o][2]+c[t][2]*n,1]}}(l,s[0],i,o);const c=s.map(e=>{const n=t.aU([],l[e[0]],l[e[1]]),r=t.aU([],l[e[2]],l[e[1]]),i=t.aV([],t.aW([],n,r)),o=-t.aX(i,l[e[1]]);return i.concat(o)}),u=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],h=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const t of l)for(let e=0;e<3;e++)u[e]=Math.min(u[e],t[e]),h[e]=Math.max(h[e],t[e]);return new Rt(l,c,new Pt(u,h))}}class Dt{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,n){return this._helper.interpolatePadding(e,t,n)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t,n=!0){this._helper.resize(e,t,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,t){}constructor(e,t,n,r,i){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new It({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,t)=>this.getConstrained(e,t)},e,t,n,r,i),this._coveringTilesDetailsProvider=new Ot}clone(){const e=new Dt;return e.apply(this),e}apply(e,t,n){this._helper.apply(e,t,n)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const n=[new t.b2(0,e)];if(this._helper._renderWorldCopies){const r=this.screenPointToMercatorCoordinate(new t.P(0,0)),i=this.screenPointToMercatorCoordinate(new t.P(this._helper._width,0)),o=this.screenPointToMercatorCoordinate(new t.P(this._helper._width,this._helper._height)),s=this.screenPointToMercatorCoordinate(new t.P(0,this._helper._height)),a=Math.floor(Math.min(r.x,i.x,o.x,s.x)),l=Math.floor(Math.max(r.x,i.x,o.x,s.x)),c=1;for(let u=a-c;u<=l+c;u++)0!==u&&n.push(new t.b2(u,e))}return n}getCameraFrustum(){return Rt.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const t=this.screenPointToLocation(this.centerPoint,e),n=e?e.getElevationForLngLatZoom(t,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(n)}setLocationAtPoint(e,n){const r=t.aj(this.elevation,this.center.lat),i=this.screenPointToMercatorCoordinateAtZ(n,r),o=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,r),s=t.a1.fromLngLat(e),a=new t.a1(s.x-(i.x-o.x),s.y-(i.y-o.y));this.setCenter(null==a?void 0:a.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,n){return n?this.coordinatePoint(t.a1.fromLngLat(e),n.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(t.a1.fromLngLat(e))}screenPointToLocation(e,t){var n;return null===(n=this.screenPointToMercatorCoordinate(e,t))||void 0===n?void 0:n.toLngLat()}screenPointToMercatorCoordinate(e,t){if(t){const n=t.pointCoordinate(e);if(null!=n)return n}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,n){const r=n||0,i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.aw(i,i,this._pixelMatrixInverse),t.aw(o,o,this._pixelMatrixInverse);const s=i[3],a=o[3],l=i[1]/s,c=o[1]/a,u=i[2]/s,h=o[2]/a,d=u===h?0:(r-u)/(h-u);return new t.a1(t.C.number(i[0]/s,o[0]/a,d)/this.worldSize,t.C.number(l,c,d)/this.worldSize,r)}coordinatePoint(e,n=0,r=this._pixelMatrix){const i=[e.x*this.worldSize,e.y*this.worldSize,n,1];return t.aw(i,i,r),new t.P(i[0]/i[3],i[1]/i[3])}getBounds(){const e=Math.max(0,this._helper._height/2-ue(this));return(new H).extend(this.screenPointToLocation(new t.P(0,e))).extend(this.screenPointToLocation(new t.P(this._helper._width,e))).extend(this.screenPointToLocation(new t.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new t.P(0,this._helper._height)))}isPointOnMapSurface(e,t){return t?null!=t.pointCoordinate(e):e.y>this.height/2-ue(this)}calculatePosMatrix(e,n=!1,r){var i;const o=null!==(i=e.key)&&void 0!==i?i:t.b3(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),s=n?this._alignedPosMatrixCache:this._posMatrixCache;if(s.has(o)){const e=s.get(o);return r?e.f32:e.f64}const a=he(e,this.worldSize);t.O(a,n?this._alignedProjMatrix:this._viewProjMatrix,a);const l={f64:a,f32:new Float32Array(a)};return s.set(o,l),r?l.f32:l.f64}calculateFogMatrix(e){const n=e.key,r=this._fogMatrixCacheF32;if(r.has(n))return r.get(n);const i=he(e,this.worldSize);return t.O(i,this._fogMatrix,i),r.set(n,new Float32Array(i)),r.get(n)}getConstrained(e,n){n=t.ah(+n,this.minZoom,this.maxZoom);const r={center:new t.S(e.lng,e.lat),zoom:n};let i=this._helper._lngRange;if(!this._helper._renderWorldCopies&&null===i){const e=180-1e-10;i=[-e,e]}const o=this.tileSize*t.af(r.zoom);let s=0,a=o,l=0,c=o,u=0,h=0;const{x:d,y:p}=this.size;if(this._helper._latRange){const e=this._helper._latRange;s=t.U(e[1])*o,a=t.U(e[0])*o,a-s<p&&(u=p/(a-s))}i&&(l=t.aO(t.V(i[0])*o,0,o),c=t.aO(t.V(i[1])*o,0,o),c<l&&(c+=o),c-l<d&&(h=d/(c-l)));const{x:f,y:m}=le(o,e);let g,y;const v=Math.max(h||0,u||0);if(v){const e=new t.P(h?(c+l)/2:f,u?(a+s)/2:m);return r.center=ce(o,e).wrap(),r.zoom+=t.ak(v),r}if(this._helper._latRange){const e=p/2;m-e<s&&(y=s+e),m+e>a&&(y=a-e)}if(i){const e=(l+c)/2;let n=f;this._helper._renderWorldCopies&&(n=t.aO(f,e-o/2,e+o/2));const r=d/2;n-r<l&&(g=l+r),n+r>c&&(g=c-r)}if(void 0!==g||void 0!==y){const e=new t.P(null!=g?g:f,null!=y?y:m);r.center=ce(o,e).wrap()}return r}calculateCenterFromCameraLngLatAlt(e,t,n,r){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,n,r)}_calculateNearFarZIfNeeded(e,n,r){if(!this._helper.autoCalculateNearFarZ)return;const i=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),o=e-i*this._helper._pixelPerMeter/Math.cos(n),s=i<0?o:e,a=Math.PI/2+this.pitchInRadians,l=t.ae(this.fov)*(Math.abs(Math.cos(t.ae(this.roll)))*this.height+Math.abs(Math.sin(t.ae(this.roll)))*this.width)/this.height*(.5+r.y/this.height),c=Math.sin(l)*s/Math.sin(t.ah(Math.PI-a-l,.01,Math.PI-.01)),u=ue(this),h=Math.atan(u/this._helper.cameraToCenterDistance),d=t.ae(.75),p=h>d?2*h*(.5+r.y/(2*u)):d,f=Math.sin(p)*s/Math.sin(t.ah(Math.PI-a-p,.01,Math.PI-.01)),m=Math.min(c,f);this._helper._farZ=1.01*(Math.cos(Math.PI/2-n)*m+s),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,n=le(this.worldSize,this.center),r=n.x,i=n.y;this._helper._pixelPerMeter=t.aj(1,this.center.lat)*this.worldSize;const o=t.ae(Math.min(this.pitch,ae)),s=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(o));let a;this._calculateNearFarZIfNeeded(s,o,e),a=new Float64Array(16),t.b4(a,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),t.aq(this._invProjMatrix,a),a[8]=2*-e.x/this._helper._width,a[9]=2*e.y/this._helper._height,this._projectionMatrix=t.b5(a),t.N(a,a,[1,-1,1]),t.M(a,a,[0,0,-this._helper.cameraToCenterDistance]),t.b6(a,a,-this.rollInRadians),t.b7(a,a,this.pitchInRadians),t.b6(a,a,-this.bearingInRadians),t.M(a,a,[-r,-i,0]),this._mercatorMatrix=t.N([],a,[this.worldSize,this.worldSize,this.worldSize]),t.N(a,a,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=t.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,a),t.M(a,a,[0,0,-this.elevation]),this._viewProjMatrix=a,this._invViewProjMatrix=t.aq([],a);const l=[0,0,-1,1];t.aw(l,l,this._invViewProjMatrix),this._cameraPosition=[l[0]/l[3],l[1]/l[3],l[2]/l[3]],this._fogMatrix=new Float64Array(16),t.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,s,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,t.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),t.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),t.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),t.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),t.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),t.M(this._fogMatrix,this._fogMatrix,[-r,-i,0]),t.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),t.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=t.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,a);const c=this._helper._width%2/2,u=this._helper._height%2/2,h=Math.cos(this.bearingInRadians),d=Math.sin(-this.bearingInRadians),p=r-Math.round(r)+h*c+d*u,f=i-Math.round(i)+h*u+d*c,m=new Float64Array(a);if(t.M(m,m,[p>.5?p-1:p,f>.5?f-1:f,0]),this._alignedProjMatrix=m,a=t.aq(new Float64Array(16),this._pixelMatrix),!a)throw new Error("failed to invert matrix");this._pixelMatrixInverse=a,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new t.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.aw(n,n,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=t.aj(1,this.center.lat)*this.worldSize;return de(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,n){const r=t.a1.fromLngLat(e),i=[r.x*this.worldSize,r.y*this.worldSize,n,1];return t.aw(i,i,this._viewProjMatrix),i[2]/i[3]}getProjectionData(e){const{overscaledTileID:n,aligned:r,applyTerrainMatrix:i}=e,o=this._helper.getMercatorTileCoordinates(n),s=n?this.calculatePosMatrix(n,r,!0):null;let a;return a=n&&n.terrainRttPosMatrix32f&&i?n.terrainRttPosMatrix32f:s||t.b8(),{mainMatrix:a,tileMercatorCoords:o,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:a}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,t,n){return 1}transformLightDirection(e){return t.aT(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,n,r,i){const o=this.calculatePosMatrix(r);let s;i?(s=[e,n,i(e,n),1],t.aw(s,s,o)):(s=[e,n,0,1],Ge(s,s,o));const a=s[3];return{point:new t.P(s[0]/a,s[1]/a),signedDistanceFromCamera:a,isOccluded:!1}}populateCache(e){for(const t of e)this.calculatePosMatrix(t)}getMatrixForModel(e,n){const r=t.a1.fromLngLat(e,n),i=r.meterInMercatorCoordinateUnits(),o=t.b9();return t.M(o,o,[r.x,r.y,r.z]),t.b6(o,o,Math.PI),t.b7(o,o,Math.PI/2),t.N(o,o,[-i,i,i]),o}getProjectionDataForCustomLayer(e=!0){const n=new t.Z(0,0,0,0,0),r=this.getProjectionData({overscaledTileID:n,applyGlobeMatrix:e}),i=he(n,this.worldSize);t.O(i,this._viewProjMatrix,i),r.tileMercatorCoords=[0,0,1,1];const o=[t.$,t.$,this.worldSize/this._helper.pixelsPerMeter],s=t.ba();return t.N(s,i,o),r.fallbackMatrix=s,r.mainMatrix=s,r}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function Lt(){t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Nt(e){if(e.useSlerp)if(e.k<1){const n=t.bb(e.startEulerAngles.roll,e.startEulerAngles.pitch,e.startEulerAngles.bearing),r=t.bb(e.endEulerAngles.roll,e.endEulerAngles.pitch,e.endEulerAngles.bearing),i=new Float64Array(4);t.bc(i,n,r,e.k);const o=t.bd(i);e.tr.setRoll(o.roll),e.tr.setPitch(o.pitch),e.tr.setBearing(o.bearing)}else e.tr.setRoll(e.endEulerAngles.roll),e.tr.setPitch(e.endEulerAngles.pitch),e.tr.setBearing(e.endEulerAngles.bearing);else e.tr.setRoll(t.C.number(e.startEulerAngles.roll,e.endEulerAngles.roll,e.k)),e.tr.setPitch(t.C.number(e.startEulerAngles.pitch,e.endEulerAngles.pitch,e.k)),e.tr.setBearing(t.C.number(e.startEulerAngles.bearing,e.endEulerAngles.bearing,e.k))}function Ft(e,n,r,i,o){const s=o.padding,a=le(o.worldSize,r.getNorthWest()),l=le(o.worldSize,r.getNorthEast()),c=le(o.worldSize,r.getSouthEast()),u=le(o.worldSize,r.getSouthWest()),h=t.ae(-i),d=a.rotate(h),p=l.rotate(h),f=c.rotate(h),m=u.rotate(h),g=new t.P(Math.max(d.x,p.x,m.x,f.x),Math.max(d.y,p.y,m.y,f.y)),y=new t.P(Math.min(d.x,p.x,m.x,f.x),Math.min(d.y,p.y,m.y,f.y)),v=g.sub(y),_=(o.width-(s.left+s.right+n.left+n.right))/v.x,b=(o.height-(s.top+s.bottom+n.top+n.bottom))/v.y;if(b<0||_<0)return void Lt();const w=Math.min(t.ak(o.scale*Math.min(_,b)),e.maxZoom),x=t.P.convert(e.offset),S=new t.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(t.ae(i)),E=x.add(S).mult(o.scale/t.af(w));return{center:ce(o.worldSize,a.add(c).div(2).sub(E)),zoom:w,bearing:i}}class zt{get useGlobeControls(){return!1}handlePanInertia(e,t){return{easingOffset:e,easingCenter:t.center}}handleMapControlsRollPitchBearingZoom(e,t){e.bearingDelta&&t.setBearing(t.bearing+e.bearingDelta),e.pitchDelta&&t.setPitch(t.pitch+e.pitchDelta),e.rollDelta&&t.setRoll(t.roll+e.rollDelta),e.zoomDelta&&t.setZoom(t.zoom+e.zoomDelta)}handleMapControlsPan(e,t,n){e.around.distSqr(t.centerPoint)<.01||t.setLocationAtPoint(n,e.around)}cameraForBoxAndBearing(e,t,n,r,i){return Ft(e,t,n,r,i)}handleJumpToCenterZoom(e,n){e.zoom!==(void 0!==n.zoom?+n.zoom:e.zoom)&&e.setZoom(+n.zoom),void 0!==n.center&&e.setCenter(t.S.convert(n.center))}handleEaseTo(e,n){const r=e.zoom,i=e.padding,o={roll:e.roll,pitch:e.pitch,bearing:e.bearing},s={roll:void 0===n.roll?e.roll:n.roll,pitch:void 0===n.pitch?e.pitch:n.pitch,bearing:void 0===n.bearing?e.bearing:n.bearing},a=void 0!==n.zoom,l=!e.isPaddingEqual(n.padding);let c=!1;const u=a?+n.zoom:e.zoom;let h=e.centerPoint.add(n.offsetAsPoint);const d=e.screenPointToLocation(h),{center:p,zoom:f}=e.getConstrained(t.S.convert(n.center||d),null!=u?u:r);kt(e,p);const m=le(e.worldSize,d),g=le(e.worldSize,p).sub(m),y=t.af(f-r);return c=f!==r,{easeFunc:a=>{if(c&&e.setZoom(t.C.number(r,f,a)),t.be(o,s)||Nt({startEulerAngles:o,endEulerAngles:s,tr:e,k:a,useSlerp:o.roll!=s.roll}),l&&(e.interpolatePadding(i,n.padding,a),h=e.centerPoint.add(n.offsetAsPoint)),n.around)e.setLocationAtPoint(n.around,n.aroundPoint);else{const n=t.af(e.zoom-r),i=f>r?Math.min(2,y):Math.max(.5,y),o=Math.pow(i,1-a),s=ce(e.worldSize,m.add(g.mult(a*o)).mult(n));e.setLocationAtPoint(e.renderWorldCopies?s.wrap():s,h)}},isZooming:c,elevationCenter:p}}handleFlyTo(e,n){const r=void 0!==n.zoom,i=e.zoom,o=e.getConstrained(t.S.convert(n.center||n.locationAtOffset),r?+n.zoom:i),s=o.center,a=o.zoom;kt(e,s);const l=le(e.worldSize,n.locationAtOffset),c=le(e.worldSize,s).sub(l),u=c.mag(),h=t.af(a-i);let d;if(void 0!==n.minZoom){const r=Math.min(+n.minZoom,i,a),o=e.getConstrained(s,r).zoom;d=t.af(o-i)}return{easeFunc:(n,r,o,u)=>{e.setZoom(1===n?a:i+t.ak(r));const h=1===n?s:ce(e.worldSize,l.add(c.mult(o)).mult(r));e.setLocationAtPoint(e.renderWorldCopies?h.wrap():h,u)},scaleOfZoom:h,targetCenter:s,scaleOfMinZoom:d,pixelPathLength:u}}}class Ut{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Ut.Replace=[1,0],Ut.disabled=new Ut(Ut.Replace,t.bf.transparent,[!1,!1,!1,!1]),Ut.unblended=new Ut(Ut.Replace,t.bf.transparent,[!0,!0,!0,!0]),Ut.alphaBlended=new Ut([1,771],t.bf.transparent,[!0,!0,!0,!0]);const jt=2305;class Bt{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}Bt.disabled=new Bt(!1,1029,jt),Bt.backCCW=new Bt(!0,1029,jt),Bt.frontCCW=new Bt(!0,1028,jt);class Vt{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}Vt.ReadOnly=!1,Vt.ReadWrite=!0,Vt.disabled=new Vt(519,Vt.ReadOnly,[0,1]);const Ht=7680;class $t{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}$t.disabled=new $t({func:519,mask:0},0,0,Ht,Ht,Ht);const Yt=new WeakMap;function Gt(e){var t;if(Yt.has(e))return Yt.get(e);{const n=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return Yt.set(e,n),n}}class qt{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const n=e.context,r=n.gl;this._texFormat=r.RGBA,this._texType=r.UNSIGNED_BYTE;const i=new t.aL;i.emplaceBack(-1,-1),i.emplaceBack(2,-1),i.emplaceBack(-1,2);const o=new t.aN;o.emplaceBack(0,1,2),this._fullscreenTriangle=new xt(n.createVertexBuffer(i,St.members),n.createIndexBuffer(o),t.aM.simpleSegment(0,0,i.length,o.length)),this._resultBuffer=new Uint8Array(4),n.activeTexture.set(r.TEXTURE1);const s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=n.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(s),Gt(r)&&(this._pbo=r.createBuffer(),r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.bufferData(r.PIXEL_PACK_BUFFER,4,r.STREAM_READ),r.bindBuffer(r.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,t){const n=this._updateCount;return this._readbackQueue?n>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():n>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,t),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,t=e.gl;e.activeTexture.set(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,n){const r=this._cachedRenderContext.context,i=r.gl;if(this._bindFramebuffer(),r.viewport.set([0,0,this._texWidth,this._texHeight]),r.clear({color:t.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(r,i.TRIANGLES,Vt.disabled,$t.disabled,Ut.unblended,Bt.disabled,((e,t)=>({u_input:e,u_output_expected:t}))(e,n),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Gt(i)){i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.readBuffer(i.COLOR_ATTACHMENT0),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),i.bindBuffer(i.PIXEL_PACK_BUFFER,null);const e=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);i.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:e}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Gt(e)){const n=e.clientWaitSync(this._readbackQueue.sync,0,0);if(n===e.WAIT_FAILED)return t.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(n===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=qt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let t=0;return t+=e[0]/256,t+=e[1]/65536,t+=e[2]/16777216,e[3]<127&&(t=-t),t/128}}const Wt=t.$/128;function Kt(e,n){const r=void 0!==e.granularity?Math.max(e.granularity,1):1,i=r+(e.generateBorders?2:0),o=r+(e.extendToNorthPole||e.generateBorders?1:0)+(e.extendToSouthPole||e.generateBorders?1:0),s=i+1,a=o+1,l=e.generateBorders?-1:0,c=e.generateBorders||e.extendToNorthPole?-1:0,u=r+(e.generateBorders?1:0),h=r+(e.generateBorders||e.extendToSouthPole?1:0),d=s*a,p=i*o*6,f=s*a>65536;if(f&&"16bit"===n)throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const m=f||"32bit"===n,g=new Int16Array(2*d);let y=0;for(let b=c;b<=h;b++)for(let n=l;n<=u;n++){let i=n/r*t.$;-1===n&&(i=-Wt),n===r+1&&(i=t.$+Wt);let o=b/r*t.$;-1===b&&(o=e.extendToNorthPole?t.bh:-Wt),b===r+1&&(o=e.extendToSouthPole?t.bi:t.$+Wt),g[y++]=i,g[y++]=o}const v=m?new Uint32Array(p):new Uint16Array(p);let _=0;for(let t=0;t<o;t++)for(let e=0;e<i;e++){const n=e+1+t*s,r=e+(t+1)*s,i=e+1+(t+1)*s;v[_++]=e+t*s,v[_++]=r,v[_++]=n,v[_++]=n,v[_++]=r,v[_++]=i}return{vertices:g.buffer.slice(0),indices:v.buffer.slice(0),uses32bitIndices:m}}const Zt=new t.aK({fill:new t.bj(128,2),line:new t.bj(512,0),tile:new t.bj(128,32),stencil:new t.bj(128,1),circle:3});class Jt{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return bt.projectionGlobe}get vertexShaderPreludeCode(){return bt.projectionMercator.vertexSource}get subdivisionGranularity(){return Zt}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new qt(e));const n=t.U(this._errorQueryLatitudeDegrees),r=2*Math.atan(Math.exp(Math.PI-n*Math.PI*2))-.5*Math.PI,i=this._errorMeasurement.updateErrorLoop(n,r),o=s.now();i!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=i,this._errorMeasurementLastChangeTime=o);const a=Math.min(Math.max((o-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=t.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,t.bl(a))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,t,n,r,i){const o=("stencil"===i?Zt.stencil:Zt.tile).getGranularityForZoomLevel(t.z);return this._getMesh(e,{granularity:o,generateBorders:n,extendToNorthPole:0===t.y&&r,extendToSouthPole:t.y===(1<<t.z)-1&&r})}_getMesh(e,n){const r=this._getMeshKey(n);if(r in this._tileMeshCache)return this._tileMeshCache[r];const i=function(e,n){const r=Kt(n,"16bit"),i=t.aL.deserialize({arrayBuffer:r.vertices,length:r.vertices.byteLength/2/2}),o=t.aN.deserialize({arrayBuffer:r.indices,length:r.indices.byteLength/2/3});return new xt(e.createVertexBuffer(i,St.members),e.createIndexBuffer(o),t.aM.simpleSegment(0,0,i.length,o.length))}(e,n);return this._tileMeshCache[r]=i,i}recalculate(e){}hasTransition(){const e=s.now();let t=!1;return t=t||(e-this._errorMeasurementLastChangeTime)/1e3<.7,t=t||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,t}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const Xt=new t.r({type:new t.D(t.v.projection.type)});class Qt extends t.E{constructor(e){super(),this._transitionable=new t.t(Xt),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.F(0)),this._mercatorProjection=new Mt,this._verticalPerspectiveProjection=new Jt}get transitionState(){const e=this.properties.get("type");if("string"==typeof e&&"mercator"===e)return 0;if("string"==typeof e&&"vertical-perspective"===e)return 1;if(e instanceof t.bm){if("vertical-perspective"===e.from&&"mercator"===e.to)return 1-e.transition;if("mercator"===e.from&&"vertical-perspective"===e.to)return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,t,n,r,i){return this.currentProjection.getMeshFromTileID(e,t,n,r,i)}setProjection(e){this._transitionable.setValue("type",(null==e?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function en(e){const t=rn(e.worldSize,e.center.lat);return 2*Math.PI*t}function tn(e,n,r,i,o){const s=1/(1<<o),a=n/t.$*s+i*s,l=t.bo((e/t.$*s+r*s)*Math.PI*2+Math.PI,2*Math.PI),c=2*Math.atan(Math.exp(Math.PI-a*Math.PI*2))-.5*Math.PI,u=Math.cos(c),h=new Float64Array(3);return h[0]=Math.sin(l)*u,h[1]=Math.sin(c),h[2]=Math.cos(l)*u,h}function nn(e){return function(e,t){const n=Math.cos(t),r=new Float64Array(3);return r[0]=Math.sin(e)*n,r[1]=Math.sin(t),r[2]=Math.cos(e)*n,r}(e.lng*Math.PI/180,e.lat*Math.PI/180)}function rn(e,t){return e/(2*Math.PI)/Math.cos(t*Math.PI/180)}function on(e){const n=Math.asin(e[1])/Math.PI*180,r=Math.sqrt(e[0]*e[0]+e[2]*e[2]);if(r>1e-6){const i=e[0]/r,o=Math.acos(e[2]/r),s=(i>0?o:-o)/Math.PI*180;return new t.S(t.aO(s,-180,180),n)}return new t.S(0,n)}function sn(e){return Math.cos(e*Math.PI/180)}function an(e,n){const r=sn(e),i=sn(n);return t.ak(i/r)}function ln(e,n){const r=e.rotate(n.bearingInRadians),i=n.zoom+an(n.center.lat,0),o=t.bk(1/sn(n.center.lat),1/sn(Math.min(Math.abs(n.center.lat),60)),t.bn(i,7,3,0,1)),s=360/en({worldSize:n.worldSize,center:{lat:n.center.lat}});return new t.S(n.center.lng-r.x*s*o,t.ah(n.center.lat+r.y*s,-t.ai,t.ai))}function cn(e){const t=.5*e,n=Math.sin(t),r=Math.cos(t);return Math.log(n+r)-Math.log(r-n)}function un(e,n,r,i){const o=e.lat+r*i;if(Math.abs(r)>1){const s=(Math.sign(e.lat+r)!==Math.sign(e.lat)?-Math.abs(e.lat):Math.abs(e.lat))*Math.PI/180,a=Math.abs(e.lat+r)*Math.PI/180,l=cn(s+i*(a-s)),c=cn(s),u=cn(a);return new t.S(e.lng+n*((l-c)/(u-c)),o)}return new t.S(e.lng+n*i,o)}class hn{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=e}swapBuffers(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(e,t,n,r){const i=`${e.z}_${e.x}_${e.y}_${(null==r?void 0:r.terrain)?"t":""}`,o=this._cache.get(i);if(o)return o;const s=this._cachePrevious.get(i);if(s)return this._cache.set(i,s),s;const a=this._boundingVolumeFactory(e,t,n,r);return this._cache.set(i,a),this._hadAnyChanges=!0,a}}class dn{constructor(e,t,n,r){this.min=n,this.max=r,this.points=e,this.planes=t}static fromAabb(e,t){const n=[];for(let r=0;r<8;r++)n.push([1&~r?e[0]:t[0],1==(r>>1&1)?t[1]:e[1],1==(r>>2&1)?t[2]:e[2]]);return new dn(n,[[-1,0,0,t[0]],[1,0,0,-e[0]],[0,-1,0,t[1]],[0,1,0,-e[1]],[0,0,-1,t[2]],[0,0,1,-e[2]]],e,t)}static fromCenterSizeAngles(e,n,r){const i=t.br([],r[0],r[1],r[2]),o=t.bs([],[n[0],0,0],i),s=t.bs([],[0,n[1],0],i),a=t.bs([],[0,0,n[2]],i),l=[...e],c=[...e];for(let t=0;t<8;t++)for(let n=0;n<3;n++){const r=e[n]+o[n]*(1&~t?-1:1)+s[n]*(1==(t>>1&1)?1:-1)+a[n]*(1==(t>>2&1)?1:-1);l[n]=Math.min(l[n],r),c[n]=Math.max(c[n],r)}const u=[];for(let h=0;h<8;h++){const n=[...e];t.aS(n,n,t.aR([],o,1&~h?-1:1)),t.aS(n,n,t.aR([],s,1==(h>>1&1)?1:-1)),t.aS(n,n,t.aR([],a,1==(h>>2&1)?1:-1)),u.push(n)}return new dn(u,[[...o,-t.aX(o,u[0])],[...s,-t.aX(s,u[0])],[...a,-t.aX(a,u[0])],[-o[0],-o[1],-o[2],-t.aX(o,u[7])],[-s[0],-s[1],-s[2],-t.aX(s,u[7])],[-a[0],-a[1],-a[2],-t.aX(a,u[7])]],l,c)}intersectsFrustum(e){let t=!0;const n=this.points.length,r=this.planes.length,i=e.planes.length,o=e.points.length;for(let s=0;s<i;s++){const r=e.planes[s];let i=0;for(let e=0;e<n;e++){const t=this.points[e];r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]>=0&&i++}if(0===i)return 0;i<n&&(t=!1)}if(t)return 2;for(let s=0;s<r;s++){const t=this.planes[s];let n=0;for(let r=0;r<o;r++){const i=e.points[r];t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]>=0&&n++}if(0===n)return 0}return 1}intersectsPlane(e){const t=this.points.length;let n=0;for(let r=0;r<t;r++){const t=this.points[r];e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]>=0&&n++}return n===t?2:0===n?0:1}}function pn(e,t,n){const r=e-t;return r<0?-r:Math.max(0,r-n)}function fn(e,t,n,r,i){const o=e-n;let s;return s=o<0?Math.min(-o,1+o-i):o>1?Math.min(Math.max(o-i,0),1-o):0,Math.max(s,pn(t,r,i))}class mn{constructor(){this._boundingVolumeCache=new hn(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(e,t,n,r){const i=1<<n.z,o=1/i,s=n.x/i,a=n.y/i;let l=2;return l=Math.min(l,fn(e,t,s,a,o)),l=Math.min(l,fn(e,t,s+.5,-a-o,o)),l=Math.min(l,fn(e,t,s+.5,2-a-o,o)),l}getWrap(e,t,n){const r=1<<t.z,i=1/r,o=t.x/r,s=pn(e.x,o,i),a=pn(e.x,o-1,i),l=pn(e.x,o+1,i),c=Math.min(s,a,l);return c===l?1:c===a?-1:0}allowVariableZoom(e,t){return ye(e,t)>4}allowWorldCopies(){return!1}getTileBoundingVolume(e,t,n,r){return this._boundingVolumeCache.getTileBoundingVolume(e,t,n,r)}_computeTileBoundingVolume(e,n,r,i){var o,s;let a=0,l=0;if(null==i?void 0:i.terrain){const c=new t.Z(e.z,n,e.z,e.x,e.y),u=i.terrain.getMinMaxElevation(c);a=null!==(o=u.minElevation)&&void 0!==o?o:Math.min(0,r),l=null!==(s=u.maxElevation)&&void 0!==s?s:Math.max(0,r)}if(a/=t.bu,l/=t.bu,a+=1,l+=1,e.z<=0)return dn.fromAabb([-l,-l,-l],[l,l,l]);if(1===e.z)return dn.fromAabb([0===e.x?-l:0,0===e.y?0:-l,-l],[0===e.x?0:l,0===e.y?l:0,l]);{const n=[tn(0,0,e.x,e.y,e.z),tn(t.$,0,e.x,e.y,e.z),tn(t.$,t.$,e.x,e.y,e.z),tn(0,t.$,e.x,e.y,e.z)],r=[];for(const e of n)r.push(t.aR([],e,l));if(l!==a)for(const e of n)r.push(t.aR([],e,a));0===e.y&&r.push([0,1,0]),e.y===(1<<e.z)-1&&r.push([0,-1,0]);const i=[1,1,1],o=[-1,-1,-1];for(const e of r)for(let t=0;t<3;t++)i[t]=Math.min(i[t],e[t]),o[t]=Math.max(o[t],e[t]);const s=tn(t.$/2,t.$/2,e.x,e.y,e.z),c=t.aW([],[0,1,0],s);t.aV(c,c);const u=t.aW([],s,c);t.aV(u,u);const h=t.aW([],n[2],n[1]);t.aV(h,h);const d=t.aW([],n[0],n[3]);t.aV(d,d),r.push(t.aR([],s,l)),e.y>=(1<<e.z)/2&&r.push(t.aR([],tn(t.$/2,0,e.x,e.y,e.z),l)),e.y<(1<<e.z)/2&&r.push(t.aR([],tn(t.$/2,t.$,e.x,e.y,e.z),l));const p=gn(s,r),f=gn(u,r),m=[-s[0],-s[1],-s[2],p.max],g=[s[0],s[1],s[2],-p.min],y=[-u[0],-u[1],-u[2],f.max],v=[u[0],u[1],u[2],-f.min],_=[...h,0],b=[...d,0],w=[];return 0===e.y?w.push(t.bt(b,_,m),t.bt(b,_,g)):w.push(t.bt(y,_,m),t.bt(y,_,g),t.bt(y,b,m),t.bt(y,b,g)),e.y===(1<<e.z)-1?w.push(t.bt(b,_,m),t.bt(b,_,g)):w.push(t.bt(v,_,m),t.bt(v,_,g),t.bt(v,b,m),t.bt(v,b,g)),new dn(w,[m,g,y,v,_,b],i,o)}}}function gn(e,n){let r=1/0,i=-1/0;for(const o of n){const n=t.aX(e,o);r=Math.min(r,n),i=Math.max(i,n)}return{min:r,max:i}}class yn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,n){return this._helper.interpolatePadding(e,t,n)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t){this._helper.resize(e,t)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=t.bv(),this._projectionMatrix=t.b9(),this._globeViewProjMatrix32f=t.b8(),this._globeViewProjMatrixNoCorrection=t.b9(),this._globeViewProjMatrixNoCorrectionInverted=t.b9(),this._globeProjMatrixInverted=t.b9(),this._cameraPosition=t.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new It({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,t)=>this.getConstrained(e,t)}),this._coveringTilesDetailsProvider=new mn}clone(){const e=new yn;return e.apply(this),e}apply(e,t){this._globeLatitudeErrorCorrectionRadians=t||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=t.bp();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:t,applyGlobeMatrix:n}=e,r=this._helper.getMercatorTileCoordinates(t);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:r,clippingPlane:this._cachedClippingPlane,projectionTransition:n?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const n=this.pitchInRadians,r=this.cameraToCenterDistance/e,i=Math.sin(n)*r,o=Math.cos(n)*r+1,s=1/Math.sqrt(i*i+o*o)*1;let a=-i,l=o;const c=Math.sqrt(a*a+l*l);a/=c,l/=c;const u=[0,a,l];t.bw(u,u,[0,0,0],-this.bearingInRadians),t.bx(u,u,[0,0,0],-1*this.center.lat*Math.PI/180),t.by(u,u,[0,0,0],this.center.lng*Math.PI/180);const h=1/t.aZ(u);return t.aR(u,u,h),[...u,-s*h]}isLocationOccluded(e){return!this.isSurfacePointVisible(nn(e))}transformLightDirection(e){const n=this._helper._center.lng*Math.PI/180,r=this._helper._center.lat*Math.PI/180,i=Math.cos(r),o=[Math.sin(n)*i,Math.sin(r),Math.cos(n)*i],s=[o[2],0,-o[0]],a=[0,0,0];t.aW(a,s,o),t.aV(s,s),t.aV(a,a);const l=[0,0,0];return t.aV(l,[s[0]*e[0]+a[0]*e[1]+o[0]*e[2],s[1]*e[0]+a[1]*e[1]+o[1]*e[2],s[2]*e[0]+a[2]*e[1]+o[2]*e[2]]),l}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,n,r){const i=function(e,n,r){const i=1/(1<<r.z);return new t.a1(e/t.$*i+r.x*i,n/t.$*i+r.y*i)}(e,n,r.canonical),o=(s=i.y,[t.bo(i.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-s*Math.PI*2))-.5*Math.PI]);var s;return this.getCircleRadiusCorrection()/Math.cos(o[1])}projectTileCoordinates(e,n,r,i){const o=r.canonical,s=tn(e,n,o.x,o.y,o.z),a=1+(i?i(e,n):0)/t.bu,l=[s[0]*a,s[1]*a,s[2]*a,1];t.aw(l,l,this._globeViewProjMatrixNoCorrection);const c=this._cachedClippingPlane,u=c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]<0;return{point:new t.P(l[0]/l[3],l[1]/l[3]),signedDistanceFromCamera:l[3],isOccluded:u}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=rn(this.worldSize,this.center.lat),n=t.ba(),r=t.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),t.b4(n,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const i=this.centerOffset;n[8]=2*-i.x/this._helper._width,n[9]=2*i.y/this._helper._height,this._projectionMatrix=t.b5(n),this._globeProjMatrixInverted=t.ba(),t.aq(this._globeProjMatrixInverted,n),t.M(n,n,[0,0,-this.cameraToCenterDistance]),t.b6(n,n,this.rollInRadians),t.b7(n,n,-this.pitchInRadians),t.b6(n,n,this.bearingInRadians),t.M(n,n,[0,0,-e]);const o=t.bp();o[0]=e,o[1]=e,o[2]=e,t.b7(r,n,this.center.lat*Math.PI/180),t.bz(r,r,-this.center.lng*Math.PI/180),t.N(r,r,o),this._globeViewProjMatrixNoCorrection=r,t.b7(n,n,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),t.bz(n,n,-this.center.lng*Math.PI/180),t.N(n,n,o),this._globeViewProjMatrix32f=new Float32Array(n),this._globeViewProjMatrixNoCorrectionInverted=t.ba(),t.aq(this._globeViewProjMatrixNoCorrectionInverted,r);const s=t.bp();this._cameraPosition=t.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/e,t.bw(this._cameraPosition,this._cameraPosition,s,-this.rollInRadians),t.bx(this._cameraPosition,this._cameraPosition,s,this.pitchInRadians),t.bw(this._cameraPosition,this._cameraPosition,s,-this.bearingInRadians),t.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),t.bx(this._cameraPosition,this._cameraPosition,s,-this.center.lat*Math.PI/180),t.by(this._cameraPosition,this._cameraPosition,s,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const a=t.b5(this._globeViewProjMatrixNoCorrectionInverted);t.N(a,a,[1,1,-1]),this._cachedFrustum=Rt.fromInvProjectionMatrix(a,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(e){t.w("calculateFogMatrix is not supported on globe projection.");const n=t.ba();return t.ag(n),n}getVisibleUnwrappedCoordinates(e){return[new t.b2(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&t.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,n){if(!this._globeViewProjMatrixNoCorrection)return 1;const r=nn(e);t.aR(r,r,1+n/t.bu);const i=t.bv();return t.aw(i,[r[0],r[1],r[2],1],this._globeViewProjMatrixNoCorrection),i[2]/i[3]}populateCache(e){}getBounds(){const e=.5*this.width,n=.5*this.height,r=[new t.P(0,0),new t.P(e,0),new t.P(this.width,0),new t.P(this.width,n),new t.P(this.width,this.height),new t.P(e,this.height),new t.P(0,this.height),new t.P(0,n)],i=[];for(const t of r)i.push(this.unprojectScreenPoint(t));let o=0,s=0,a=0,l=0;const c=this.center;for(const h of i){const e=t.bA(c.lng,h.lng),n=t.bA(c.lat,h.lat);e<s&&(s=e),e>o&&(o=e),n<l&&(l=n),n>a&&(a=n)}const u=[c.lng+s,c.lat+l,c.lng+o,c.lat+a];return this.isSurfacePointOnScreen([0,1,0])&&(u[3]=90,u[0]=-180,u[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(u[1]=-90,u[0]=-180,u[2]=180),new H(u)}getConstrained(e,n){const r=t.ah(e.lat,-t.ai,t.ai),i=t.ah(+n,this.minZoom+an(0,r),this.maxZoom);return{center:new t.S(e.lng,r),zoom:i}}calculateCenterFromCameraLngLatAlt(e,t,n,r){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,n,r)}setLocationAtPoint(e,n){const r=nn(this.unprojectScreenPoint(n)),i=nn(e),o=t.bp();t.bB(o);const s=t.bp();t.by(s,r,o,-this.center.lng*Math.PI/180),t.bx(s,s,o,this.center.lat*Math.PI/180);const a=i[0]*i[0]+i[2]*i[2],l=s[0]*s[0];if(a<l)return;const c=Math.sqrt(a-l),u=-c,h=t.bC(i[0],i[2],s[0],c),d=t.bC(i[0],i[2],s[0],u),p=t.bp();t.by(p,i,o,-h);const f=t.bC(p[1],p[2],s[1],s[2]),m=t.bp();t.by(m,i,o,-d);const g=t.bC(m[1],m[2],s[1],s[2]),y=.5*Math.PI,v=f>=-y&&f<=y,_=g>=-y&&g<=y;let b,w;if(v&&_){const e=this.center.lng*Math.PI/180,n=this.center.lat*Math.PI/180;t.bD(h,e)+t.bD(f,n)<t.bD(d,e)+t.bD(g,n)?(b=h,w=f):(b=d,w=g)}else if(v)b=h,w=f;else{if(!_)return;b=d,w=g}const x=b/Math.PI*180,S=w/Math.PI*180,E=this.center.lat;this.setCenter(new t.S(x,t.ah(S,-90,90))),this.setZoom(this.zoom+an(E,this.center.lat))}locationToScreenPoint(e,n){const r=nn(e);if(n){const i=n.getElevationForLngLatZoom(e,this._helper._tileZoom);t.aR(r,r,1+i/t.bu)}return this._projectSurfacePointToScreen(r)}_projectSurfacePointToScreen(e){const n=t.bv();return t.aw(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],new t.P((.5*n[0]+.5)*this.width,(.5*-n[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,n){if(n){const t=n.pointCoordinate(e);if(t)return t}return t.a1.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,t){var n;return null===(n=this.screenPointToMercatorCoordinate(e,t))||void 0===n?void 0:n.toLngLat()}isPointOnMapSurface(e,t){const n=this._cameraPosition,r=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(n,r)}getRayDirectionFromPixel(e){const n=t.bv();n[0]=e.x/this.width*2-1,n[1]=-1*(e.y/this.height*2-1),n[2]=1,n[3]=1,t.aw(n,n,this._globeViewProjMatrixNoCorrectionInverted),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3];const r=t.bp();r[0]=n[0]-this._cameraPosition[0],r[1]=n[1]-this._cameraPosition[1],r[2]=n[2]-this._cameraPosition[2];const i=t.bp();return t.aV(i,r),i}isSurfacePointVisible(e){const t=this._cachedClippingPlane;return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const n=t.bv();return t.aw(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3],n[0]>-1&&n[0]<1&&n[1]>-1&&n[1]<1&&n[2]>-1&&n[2]<1}rayPlanetIntersection(e,n){const r=t.aX(e,n),i=t.bp(),o=t.bp();t.aR(o,n,r),t.aU(i,e,o);const s=1-t.aX(i,i);if(s<0)return null;const a=t.aX(e,e)-1,l=-r+(r<0?1:-1)*Math.sqrt(s),c=a/l,u=l;return{tMin:Math.min(c,u),tMax:Math.max(c,u)}}unprojectScreenPoint(e){const n=this._cameraPosition,r=this.getRayDirectionFromPixel(e),i=this.rayPlanetIntersection(n,r);if(i){const e=t.bp();t.aS(e,n,[r[0]*i.tMin,r[1]*i.tMin,r[2]*i.tMin]);const o=t.bp();return t.aV(o,e),on(o)}const o=this._cachedClippingPlane,s=o[0]*r[0]+o[1]*r[1]+o[2]*r[2],a=-t.b1(o,n)/s,l=t.bp();if(a>0)t.aS(l,n,[r[0]*a,r[1]*a,r[2]*a]);else{const e=t.bp();t.aS(e,n,[2*r[0],2*r[1],2*r[2]]);const i=t.b1(this._cachedClippingPlane,e);t.aU(l,e,[this._cachedClippingPlane[0]*i,this._cachedClippingPlane[1]*i,this._cachedClippingPlane[2]*i])}const c=function(e){const n=t.bp();return n[0]=e[0]*-e[3],n[1]=e[1]*-e[3],n[2]=e[2]*-e[3],{center:n,radius:Math.sqrt(1-e[3]*e[3])}}(o);return on(function(e,n,r){const i=t.bp();t.aU(i,r,e);const o=t.bp();return t.bq(o,e,i,n/t.a$(i)),o}(c.center,c.radius,l))}getMatrixForModel(e,n){const r=t.S.convert(e),i=1/t.bu,o=t.b9();return t.bz(o,o,r.lng/180*Math.PI),t.b7(o,o,-r.lat/180*Math.PI),t.M(o,o,[0,0,1+n/t.bu]),t.b7(o,o,.5*Math.PI),t.N(o,o,[i,i,i]),o}getProjectionDataForCustomLayer(e=!0){const n=this.getProjectionData({overscaledTileID:new t.Z(0,0,0,0,0),applyGlobeMatrix:e});return n.tileMercatorCoords=[0,0,1,1],n}getFastPathSimpleProjectionMatrix(e){}}class vn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,n){return this._helper.interpolatePadding(e,t,n)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t,n=!0){this._helper.resize(e,t,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,t){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=t,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new It({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,t)=>this.getConstrained(e,t)}),this._globeness=1,this._mercatorTransform=new Dt,this._verticalPerspectiveTransform=new yn}clone(){const e=new vn;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const t=this._mercatorTransform.getProjectionData(e),n=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?n.mainMatrix:t.mainMatrix,clippingPlane:n.clippingPlane,tileMercatorCoords:n.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:t.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return t.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return t.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,n,r){const i=this._mercatorTransform.getPitchedTextCorrection(e,n,r),o=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,n,r);return t.bk(i,o,this._globeness)}projectTileCoordinates(e,t,n,r){return this.currentTransform.projectTileCoordinates(e,t,n,r)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,t){return this.currentTransform.lngLatToCameraDepth(e,t)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,t){return this.currentTransform.getConstrained(e,t)}calculateCenterFromCameraLngLatAlt(e,t,n,r){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,n,r)}setLocationAtPoint(e,t){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,t),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,t),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,t){return this.currentTransform.locationToScreenPoint(e,t)}screenPointToMercatorCoordinate(e,t){return this.currentTransform.screenPointToMercatorCoordinate(e,t)}screenPointToLocation(e,t){return this.currentTransform.screenPointToLocation(e,t)}isPointOnMapSurface(e,t){return this.currentTransform.isPointOnMapSurface(e,t)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,t){return this.currentTransform.getMatrixForModel(e,t)}getProjectionDataForCustomLayer(e=!0){const t=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return t;const n=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return n.fallbackMatrix=t.mainMatrix,n}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class _n{get useGlobeControls(){return!0}handlePanInertia(e,n){const r=ln(e,n);return Math.abs(r.lng-n.center.lng)>180&&(r.lng=n.center.lng+179.5*Math.sign(r.lng-n.center.lng)),{easingCenter:r,easingOffset:new t.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,n){const r=e.around,i=n.screenPointToLocation(r);e.bearingDelta&&n.setBearing(n.bearing+e.bearingDelta),e.pitchDelta&&n.setPitch(n.pitch+e.pitchDelta),e.rollDelta&&n.setRoll(n.roll+e.rollDelta);const o=n.zoom;e.zoomDelta&&n.setZoom(n.zoom+e.zoomDelta);const s=n.zoom-o;if(0===s)return;const a=t.bA(n.center.lng,i.lng),l=a/(Math.abs(a/180)+1),c=t.bA(n.center.lat,i.lat),u=n.getRayDirectionFromPixel(r),h=n.cameraPosition,d=-1*t.aX(h,u),p=t.bp();t.aS(p,h,[u[0]*d,u[1]*d,u[2]*d]);const f=t.aZ(p)-1,m=Math.exp(.5*-Math.max(f-.3,0)),g=rn(n.worldSize,n.center.lat)/Math.min(n.width,n.height),y=t.bn(g,.9,.5,1,.25),v=(1-t.af(-s))*Math.min(m,y),_=n.center.lat,b=n.zoom,w=new t.S(n.center.lng+l*v,t.ah(n.center.lat+c*v,-t.ai,t.ai));n.setLocationAtPoint(i,r);const x=n.center,S=t.bn(Math.abs(a),45,85,0,1),E=t.bn(g,.75,.35,0,1),T=Math.pow(Math.max(S,E),.25),M=t.bA(x.lng,w.lng),A=t.bA(x.lat,w.lat);n.setCenter(new t.S(x.lng+M*T,x.lat+A*T).wrap()),n.setZoom(b+an(_,n.center.lat))}handleMapControlsPan(e,t,n){if(!e.panDelta)return;const r=t.center.lat,i=t.zoom;t.setCenter(ln(e.panDelta,t).wrap()),t.setZoom(i+an(r,t.center.lat))}cameraForBoxAndBearing(e,n,r,i,o){const s=Ft(e,n,r,i,o),a=n.left/o.width*2-1,l=(o.width-n.right)/o.width*2-1,c=n.top/o.height*-2+1,u=(o.height-n.bottom)/o.height*-2+1,h=t.bA(r.getWest(),r.getEast())<0,d=h?r.getEast():r.getWest(),p=h?r.getWest():r.getEast(),f=Math.max(r.getNorth(),r.getSouth()),m=Math.min(r.getNorth(),r.getSouth()),g=d+.5*t.bA(d,p),y=f+.5*t.bA(f,m),v=o.clone();v.setCenter(s.center),v.setBearing(s.bearing),v.setPitch(0),v.setRoll(0),v.setZoom(s.zoom);const _=v.modelViewProjectionMatrix,b=[nn(r.getNorthWest()),nn(r.getNorthEast()),nn(r.getSouthWest()),nn(r.getSouthEast()),nn(new t.S(p,y)),nn(new t.S(d,y)),nn(new t.S(g,f)),nn(new t.S(g,m))],w=nn(s.center);let x=Number.POSITIVE_INFINITY;for(const t of b)a<0&&(x=_n.getLesserNonNegativeNonNull(x,_n.solveVectorScale(t,w,_,"x",a))),l>0&&(x=_n.getLesserNonNegativeNonNull(x,_n.solveVectorScale(t,w,_,"x",l))),c>0&&(x=_n.getLesserNonNegativeNonNull(x,_n.solveVectorScale(t,w,_,"y",c))),u<0&&(x=_n.getLesserNonNegativeNonNull(x,_n.solveVectorScale(t,w,_,"y",u)));if(Number.isFinite(x)&&0!==x)return s.zoom=v.zoom+t.ak(x),s;Lt()}handleJumpToCenterZoom(e,n){const r=e.center.lat,i=e.getConstrained(n.center?t.S.convert(n.center):e.center,e.zoom).center;e.setCenter(i.wrap());const o=void 0!==n.zoom?+n.zoom:e.zoom+an(r,i.lat);e.zoom!==o&&e.setZoom(o)}handleEaseTo(e,n){const r=e.zoom,i=e.center,o=e.padding,s={roll:e.roll,pitch:e.pitch,bearing:e.bearing},a={roll:void 0===n.roll?e.roll:n.roll,pitch:void 0===n.pitch?e.pitch:n.pitch,bearing:void 0===n.bearing?e.bearing:n.bearing},l=void 0!==n.zoom,c=!e.isPaddingEqual(n.padding);let u=!1;const h=n.center?t.S.convert(n.center):i,d=e.getConstrained(h,r).center;kt(e,d);const p=e.clone();p.setCenter(d),p.setZoom(l?+n.zoom:r+an(i.lat,h.lat)),p.setBearing(n.bearing);const f=new t.P(t.ah(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),t.ah(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));p.setLocationAtPoint(d,f);const m=(n.offset&&n.offsetAsPoint.mag())>0?p.center:d,g=l?+n.zoom:r+an(i.lat,m.lat),y=r+an(i.lat,0),v=g+an(m.lat,0),_=t.bA(i.lng,m.lng),b=t.bA(i.lat,m.lat),w=t.af(v-y);return u=g!==r,{easeFunc:r=>{if(t.be(s,a)||Nt({startEulerAngles:s,endEulerAngles:a,tr:e,k:r,useSlerp:s.roll!=a.roll}),c&&e.interpolatePadding(o,n.padding,r),n.around)t.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(n.around,n.aroundPoint);else{const t=v>y?Math.min(2,w):Math.max(.5,w),n=Math.pow(t,1-r),o=un(i,_,b,r*n);e.setCenter(o.wrap())}if(u){const n=t.C.number(y,v,r)+an(0,e.center.lat);e.setZoom(n)}},isZooming:u,elevationCenter:m}}handleFlyTo(e,n){const r=void 0!==n.zoom,i=e.center,o=e.zoom,s=e.padding,a=!e.isPaddingEqual(n.padding),l=e.getConstrained(t.S.convert(n.center||n.locationAtOffset),o).center,c=r?+n.zoom:e.zoom+an(e.center.lat,l.lat),u=e.clone();u.setCenter(l),u.setZoom(c),u.setBearing(n.bearing);const h=new t.P(t.ah(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),t.ah(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));u.setLocationAtPoint(l,h);const d=u.center;kt(e,d);const p=function(e,n,r){const i=nn(n),o=nn(r),s=t.aX(i,o),a=Math.acos(s),l=en(e);return a/(2*Math.PI)*l}(e,i,d),f=o+an(i.lat,0),m=c+an(d.lat,0),g=t.af(m-f);let y;if("number"==typeof n.minZoom){const r=+n.minZoom+an(d.lat,0),i=Math.min(r,f,m)+an(0,d.lat),o=e.getConstrained(d,i).zoom+an(d.lat,0);y=t.af(o-f)}const v=t.bA(i.lng,d.lng),_=t.bA(i.lat,d.lat);return{easeFunc:(r,o,l,u)=>{const h=un(i,v,_,l);a&&e.interpolatePadding(s,n.padding,r);const p=1===r?d:h;e.setCenter(p.wrap());const m=f+t.ak(o);e.setZoom(1===r?c:m+an(0,p.lat))},scaleOfZoom:g,targetCenter:d,scaleOfMinZoom:y,pixelPathLength:p}}static solveVectorScale(e,t,n,r,i){const o="x"===r?[n[0],n[4],n[8],n[12]]:[n[1],n[5],n[9],n[13]],s=[n[3],n[7],n[11],n[15]],a=e[0]*o[0]+e[1]*o[1]+e[2]*o[2],l=e[0]*s[0]+e[1]*s[1]+e[2]*s[2],c=t[0]*o[0]+t[1]*o[1]+t[2]*o[2],u=t[0]*s[0]+t[1]*s[1]+t[2]*s[2];return c+i*l===a+i*u||s[3]*(a-c)+o[3]*(u-l)+a*u==c*l?null:(c+o[3]-i*u-i*s[3])/(c-a-i*u+i*l)}static getLesserNonNegativeNonNull(e,t){return null!==t&&t>=0&&t<e?t:e}}class bn{constructor(e){this._globe=e,this._mercatorCameraHelper=new zt,this._verticalPerspectiveCameraHelper=new _n}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,t){return this.currentHelper.handlePanInertia(e,t)}handleMapControlsRollPitchBearingZoom(e,t){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,t)}handleMapControlsPan(e,t,n){this.currentHelper.handleMapControlsPan(e,t,n)}cameraForBoxAndBearing(e,t,n,r,i){return this.currentHelper.cameraForBoxAndBearing(e,t,n,r,i)}handleJumpToCenterZoom(e,t){this.currentHelper.handleJumpToCenterZoom(e,t)}handleEaseTo(e,t){return this.currentHelper.handleEaseTo(e,t)}handleFlyTo(e,t){return this.currentHelper.handleFlyTo(e,t)}}const wn=(e,n)=>t.y(e,n&&n.filter(e=>"source.canvas"!==e.identifier)),xn=t.bE();class Sn extends t.E{constructor(e,n={}){super(),this._rtlPluginLoaded=()=>{for(const e in this.sourceCaches){const t=this.sourceCaches[e].getSource().type;"vector"!==t&&"geojson"!==t||this.sourceCaches[e].reload()}},this.map=e,this.dispatcher=new N(L(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(e,t)=>this.getGlyphs(e,t)),this.dispatcher.registerMessageHandler("GI",(e,t)=>this.getImages(e,t)),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new S(e._requestManager,n.localIdeographFontFamily),this.lineAtlas=new C(256,512),this.crossTileSymbolIndex=new vt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",t.bG()),re().on(ee,this._rtlPluginLoaded),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const n=t.getSource();if(n&&n.vectorLayerIds)for(const r in this._layers){const e=this._layers[r];e.source===n.id&&this._validateLayer(e)}})}setGlobalStateProperty(e,n){var r,i,o;this._checkLoaded();const s=null===n?null!==(o=null===(i=null===(r=this.stylesheet.state)||void 0===r?void 0:r[e])||void 0===i?void 0:i.default)&&void 0!==o?o:null:n;if(t.bH(s,this._globalState[e]))return this;this._globalState[e]=s;const a=this._findGlobalStateAffectedSources([e]);for(const t in this.sourceCaches)a.has(t)&&(this._reloadSource(t),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(e){this._checkLoaded();const n=[];for(const i in e)!t.bH(this._globalState[i],e[i].default)&&(n.push(i),this._globalState[i]=e[i].default);const r=this._findGlobalStateAffectedSources(n);for(const t in this.sourceCaches)r.has(t)&&(this._reloadSource(t),this._changed=!0)}_findGlobalStateAffectedSources(e){if(0===e.length)return new Set;const t=new Set;for(const n in this._layers){const r=this._layers[n],i=r.getLayoutAffectingGlobalStateRefs();for(const n of e)i.has(n)&&t.add(r.source)}return t}loadURL(e,n={},r){this.fire(new t.l("dataloading",{dataType:"style"})),n.validate="boolean"!=typeof n.validate||n.validate;const i=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const o=this._loadStyleRequest;t.j(i,this._loadStyleRequest).then(e=>{this._loadStyleRequest=null,this._load(e.data,n,r)}).catch(e=>{this._loadStyleRequest=null,e&&!o.signal.aborted&&this.fire(new t.k(e))})}loadJSON(e,n={},r){this.fire(new t.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,s.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,n.validate=!1!==n.validate,this._load(e,n,r)}).catch(()=>{})}loadEmpty(){this.fire(new t.l("dataloading",{dataType:"style"})),this._load(xn,{validate:!1})}_load(e,n,r){var i,o,s;const a=n.transformStyle?n.transformStyle(r,e):e;if(!n.validate||!wn(this,t.z(a))){this._loaded=!0,this.stylesheet=a;for(const e in a.sources)this.addSource(e,a.sources[e],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs),this._createLayers(),this.light=new M(this.stylesheet.light),this._setProjectionInternal((null===(i=this.stylesheet.projection)||void 0===i?void 0:i.type)||"mercator"),this.sky=new k(this.stylesheet.sky),this.map.setTerrain(null!==(o=this.stylesheet.terrain)&&void 0!==o?o:null),this.setGlobalState(null!==(s=this.stylesheet.state)&&void 0!==s?s:null),this.fire(new t.l("data",{dataType:"style"})),this.fire(new t.l("style.load"))}}_createLayers(){const e=t.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(e=>e.id),this._layers={},this._serializedLayers=null;for(const n of e){const e=t.bJ(n);e.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=e}}_loadSprite(e,n=!1,r=void 0){let i;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(e,n,r,i){return t._(this,void 0,void 0,function*(){const o=g(e),a=r>1?"@2x":"",l={},c={};for(const{id:e,url:r}of o){const o=n.transformRequest(y(r,a,".json"),"SpriteJSON");l[e]=t.j(o,i);const s=n.transformRequest(y(r,a,".png"),"SpriteImage");c[e]=f.getImage(s,i)}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(e,n){return t._(this,void 0,void 0,function*(){const t={};for(const r in e){t[r]={};const i=s.getImageCanvasContext((yield n[r]).data),o=(yield e[r]).data;for(const e in o){const{width:n,height:s,x:a,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m}=o[e];t[r][e]={data:null,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p,textFitWidth:f,textFitHeight:m,spriteData:{width:n,height:s,x:a,y:l,context:i}}}}return t})}(l,c)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const r=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter(t=>!(t in e)):[];for(const e of r)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const i in e[t]){const r="default"===t?i:`${t}:${i}`;this._spritesImagesIds[t].push(r),r in this.imageManager.images?this.imageManager.updateImage(r,e[t][i],!1):this.imageManager.addImage(r,e[t][i]),n&&(this._changedImages[r]=!0)}}}).catch(e=>{this._spriteRequest=null,i=e,this.fire(new t.k(i))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"})),r&&r(i)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const r=e.sourceLayer;if(!r)return;const i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.k(new Error(`Source layer "${r}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,n=!1){const r=this._serializedAllLayers();if(!e||0===e.length)return Object.values(n?t.bK(r):r);const i=[];for(const o of e)if(r[o]){const e=n?t.bK(r[o]):r[o];i.push(e)}return i}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const n of t){const t=this._layers[n];"custom"!==t.type&&(e[n]=t.serialize())}return e}hasTransitions(){var e,t,n;if(null===(e=this.light)||void 0===e?void 0:e.hasTransition())return!0;if(null===(t=this.sky)||void 0===t?void 0:t.hasTransition())return!0;if(null===(n=this.projection)||void 0===n?void 0:n.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(n){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const i in r){const e=this.sourceCaches[i];!!r[i]!=!!e.used&&e.fire(new t.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:i}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,n&&this.fire(new t.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,n={}){var r;this._checkLoaded();const i=this.serialize();if(e=n.transformStyle?n.transformStyle(i,e):e,(null===(r=n.validate)||void 0===r||r)&&wn(this,t.z(e)))return!1;(e=t.bK(e)).layers=t.bI(e.layers);const o=t.bL(i,e),s=this._getOperationsToPerform(o);if(s.unimplemented.length>0)throw new Error(`Unimplemented: ${s.unimplemented.join(", ")}.`);if(0===s.operations.length)return!1;for(const t of s.operations)t();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const t=[],n=[];for(const r of e)switch(r.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":t.push(()=>this.addLayer.apply(this,r.args));break;case"removeLayer":t.push(()=>this.removeLayer.apply(this,r.args));break;case"setPaintProperty":t.push(()=>this.setPaintProperty.apply(this,r.args));break;case"setLayoutProperty":t.push(()=>this.setLayoutProperty.apply(this,r.args));break;case"setFilter":t.push(()=>this.setFilter.apply(this,r.args));break;case"addSource":t.push(()=>this.addSource.apply(this,r.args));break;case"removeSource":t.push(()=>this.removeSource.apply(this,r.args));break;case"setLayerZoomRange":t.push(()=>this.setLayerZoomRange.apply(this,r.args));break;case"setLight":t.push(()=>this.setLight.apply(this,r.args));break;case"setGeoJSONSourceData":t.push(()=>this.setGeoJSONSourceData.apply(this,r.args));break;case"setGlyphs":t.push(()=>this.setGlyphs.apply(this,r.args));break;case"setSprite":t.push(()=>this.setSprite.apply(this,r.args));break;case"setTerrain":t.push(()=>this.map.setTerrain.apply(this,r.args));break;case"setSky":t.push(()=>this.setSky.apply(this,r.args));break;case"setProjection":this.setProjection.apply(this,r.args);break;case"setGlobalState":t.push(()=>this.setGlobalState.apply(this,r.args));break;case"setTransition":t.push(()=>{});break;default:n.push(r.command)}return{operations:t,unimplemented:n}}addImage(e,n){if(this.getImage(e))return this.fire(new t.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,r={}){if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.z.source,`sources.${e}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=this.sourceCaches[e]=new be(e,n,this.dispatcher);i.style=this,i.setEventedParent(this,()=>({isSourceLoaded:i.loaded(),source:i.serialize(),sourceId:e})),i.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.k(new Error(`Source "${e}" cannot be removed while layer "${r}" is using it.`)));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error(`There is no source with this ID=${e}`);const n=this.sourceCaches[e].getSource();if("geojson"!==n.type)throw new Error(`geojsonSource.type is ${n.type}, which is !== 'geojson`);n.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,n,r={}){this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.k(new Error(`Layer "${i}" already exists on this map.`)));let o;if("custom"===e.type){if(wn(this,t.bM(e)))return;o=t.bJ(e)}else{if("source"in e&&"object"==typeof e.source&&(this.addSource(i,e.source),e=t.bK(e),e=t.e(e,{source:i})),this._validate(t.z.layer,`layers.${i}`,e,{arrayIndex:-1},r))return;o=t.bJ(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}const s=n?this._order.indexOf(n):this._order.length;if(n&&-1===s)this.fire(new t.k(new Error(`Cannot add layer "${i}" before non-existing layer "${n}".`)));else{if(this._order.splice(s,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.k(new Error(`Cannot move layer "${e}" before non-existing layer "${n}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.k(new Error(`Cannot remove non-existing layer "${e}".`)));n.setEventedParent(null);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,n,r={}){this._checkLoaded();const i=this.getLayer(e);if(i){if(!t.bH(i.filter,n))return null==n?(i.setFilter(void 0),void this._updateLayer(i)):void(this._validate(t.z.filter,`layers.${i.id}.filter`,n,null,r)||(i.setFilter(t.bK(n)),this._updateLayer(i)))}else this.fire(new t.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.bK(this.getLayer(e).filter)}setLayoutProperty(e,n,r,i={}){this._checkLoaded();const o=this.getLayer(e);o?t.bH(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,n,r,i={}){this._checkLoaded();const o=this.getLayer(e);o?t.bH(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new t.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0===o)return void this.fire(new t.k(new Error(`The source '${r}' does not exist in the map's style.`)));const s=o.getSource().type;"geojson"===s&&i?this.fire(new t.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?(void 0===e.id&&this.fire(new t.k(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.sourceCaches[r];if(void 0===i)return void this.fire(new t.k(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.getSource().type,s="vector"===o?e.sourceLayer:void 0;"vector"!==o||s?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.k(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(s,e.id,n):this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===e.id&&this.fire(new t.k(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id)):void this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.k(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.bN(this.sourceCaches,e=>e.serialize()),n=this._serializeByIds(this._order,!0),r=this.map.getTerrain()||void 0,i=this.stylesheet;return t.bO({version:i.version,name:i.name,metadata:i.metadata,light:i.light,sky:i.sky,center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch,sprite:i.sprite,glyphs:i.glyphs,transition:i.transition,projection:i.projection,sources:e,layers:n,terrain:r},e=>void 0!==e)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(t(i)){n[i]=o;for(const t of e){const e=t[i];if(e)for(const t of e)r.push(t)}}}r.sort((e,t)=>t.intersectionZ-e.intersectionZ);const i=[];for(let o=this._order.length-1;o>=0;o--){const s=this._order[o];if(t(s))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[s];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.z.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!(Array.isArray(n.layers)||n.layers instanceof Set))return this.fire(new t.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const s=this._serializedAllLayers(),a=n.layers instanceof Set?n.layers:Array.isArray(n.layers)?new Set(n.layers):null,l=Object.assign(Object.assign({},n),{layers:a});for(const t in this.sourceCaches)n.layers&&!i[t]||o.push(U(this.sourceCaches[t],this._layers,s,e,l,r,this.map.terrain?(e,t,n)=>this.map.terrain.getElevation(e,t,n):void 0));return this.placement&&o.push(function(e,t,n,r,i,o,s){const a={},l=o.queryRenderedSymbols(r),c=[];for(const u of Object.keys(l).map(Number))c.push(s[u]);c.sort(j);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in n){const t=a[e]=a[e]||[],r=n[e];r.sort((e,t)=>{const n=u.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex});for(const e of r)t.push(e)}}return function(e,t,n){for(const r in e)for(const i of e[r])B(i,n[t[r].source]);return e}(a,e,n)}(this._layers,s,this.sourceCaches,e,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.z.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this.sourceCaches[e];return r?function(e,t){const n=e.getRenderableIds().map(t=>e.getTileByID(t)),r=[],i={};for(let o=0;o<n.length;o++){const e=n[o],s=e.tileID.canonical.key;i[s]||(i[s]=!0,e.querySourceFeatures(r,t))}return r}(r,n):[]}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const r=this.light.getLight();let i=!1;for(const s in e)if(!t.bH(e[s],r[s])){i=!0;break}if(!i)return;const o={now:s.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(o)}getProjection(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.sky}setSky(e,n={}){this._checkLoaded();const r=this.getSky();let i=!1;if(!e&&!r)return;if(e&&!r)i=!0;else if(!e&&r)i=!0;else for(const s in e)if(!t.bH(e[s],r[s])){i=!0;break}if(!i)return;const o={now:s.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,n),this.sky.updateTransitions(o)}_setProjectionInternal(e){const n=function(e){if(Array.isArray(e)){const t=new Qt({type:e});return{projection:t,transform:new vn,cameraHelper:new bn(t)}}switch(e){case"mercator":return{projection:new Mt,transform:new Dt,cameraHelper:new zt};case"globe":{const e=new Qt({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:e,transform:new vn,cameraHelper:new bn(e)}}case"vertical-perspective":return{projection:new Jt,transform:new yn,cameraHelper:new _n};default:return t.w(`Unknown projection name: ${e}. Falling back to mercator projection.`),{projection:new Mt,transform:new Dt,cameraHelper:new zt}}}(e);this.projection=n.projection,this.map.migrateProjection(n.transform,n.cameraHelper);for(const t in this.sourceCaches)this.sourceCaches[t].reload()}_validate(e,n,r,i,o={}){return(!o||!1!==o.validate)&&wn(this,e.call(t.z,t.e({key:n,style:this.serialize(),value:r,styleSpec:t.v},i)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),re().off(ee,this._rtlPluginLoaded);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,t,n,r,i=!1){let o=!1,a=!1;const l={};for(const s of this._order){const t=this._layers[s];if("symbol"!==t.type)continue;if(!l[t.source]){const e=this.sourceCaches[t.source];l[t.source]=e.getRenderableIds(!0).map(t=>e.getTileByID(t)).sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}const n=this.crossTileSymbolIndex.addLayer(t,l[t.source],e.center.lng);o=o||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((i=i||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.now(),e.zoom))&&(this.pauseablePlacement=new pt(e,this.map.terrain,this._order,i,t,n,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(const s of this._order){const e=this._layers[s];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,n){return t._(this,void 0,void 0,function*(){const e=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();const t=this.sourceCaches[n.source];return t&&t.setDependencies(n.tileID.key,n.type,n.icons),e})}getGlyphs(e,n){return t._(this,void 0,void 0,function*(){const e=yield this.glyphManager.getGlyphs(n.stacks),t=this.sourceCaches[n.source];return t&&t.setDependencies(n.tileID.key,n.type,[""]),e})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,n={}){this._checkLoaded(),e&&this._validate(t.z.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,n,r={},i){this._checkLoaded();const o=[{id:e,url:n}],s=[...g(this.stylesheet.sprite),...o];this._validate(t.z.sprite,"sprite",s,null,r)||(this.stylesheet.sprite=s,this._loadSprite(o,!0,i))}removeSprite(e){this._checkLoaded();const n=g(this.stylesheet.sprite);if(n.find(t=>t.id===e)){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;n.splice(n.findIndex(t=>t.id===e),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}else this.fire(new t.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return g(this.stylesheet.sprite)}setSprite(e,n={},r){this._checkLoaded(),e&&this._validate(t.z.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,r):(this._unloadSprite(),r&&r(null)))}}var En=t.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Tn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,n,r,i,o,s,a,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==r.length;for(let u=0;!c&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(c=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||c||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==s||this.boundDynamicVertexBuffer2!==a||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,n,r,i,o,s,a,l):(e.bindVertexArray.set(this.vao),s&&s.bind(),i&&i.dynamicDraw&&i.bind(),a&&a.bind(),l&&l.bind())}freshBind(e,t,n,r,i,o,s,a){const l=e.numAttributes,c=this.context,u=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=s,this.boundDynamicVertexBuffer3=a,t.enableAttributes(u,e);for(const h of n)h.enableAttributes(u,e);o&&o.enableAttributes(u,e),s&&s.enableAttributes(u,e),a&&a.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);for(const h of n)h.bind(),h.setVertexAttribPointers(u,e,i);o&&(o.bind(),o.setVertexAttribPointers(u,e,i)),r&&r.bind(),s&&(s.bind(),s.setVertexAttribPointers(u,e,i)),a&&(a.bind(),a.setVertexAttribPointers(u,e,i)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Mn=(e,n,r,i,o)=>({u_texture:0,u_ele_delta:e,u_fog_matrix:n,u_fog_color:r?r.properties.get("fog-color"):t.bf.white,u_fog_ground_blend:r?r.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:o?0:r?r.calculateFogBlendOpacity(i):0,u_horizon_color:r?r.properties.get("horizon-color"):t.bf.white,u_horizon_fog_blend:r?r.properties.get("horizon-fog-blend"):1,u_is_globe_mode:o?1:0}),An={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function kn(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}class Cn{constructor(e,n,r,i,o,s,a,l,c=[]){const u=e.gl;this.program=u.createProgram();const h=kn(n.staticAttributes),d=r?r.getBinderAttributes():[],p=h.concat(d),f=bt.prelude.staticUniforms?kn(bt.prelude.staticUniforms):[],m=a.staticUniforms?kn(a.staticUniforms):[],g=n.staticUniforms?kn(n.staticUniforms):[],y=r?r.getBinderUniforms():[],v=f.concat(m).concat(g).concat(y),_=[];for(const t of v)_.indexOf(t)<0&&_.push(t);const b=r?r.defines():[];Gt(u)&&b.unshift("#version 300 es"),o&&b.push("#define OVERDRAW_INSPECTOR;"),s&&b.push("#define TERRAIN3D;"),l&&b.push(l),c&&b.push(...c);let w=b.concat(bt.prelude.fragmentSource,a.fragmentSource,n.fragmentSource).join("\n"),x=b.concat(bt.prelude.vertexSource,a.vertexSource,n.vertexSource).join("\n");Gt(u)||(w=function(e){return e.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(w),x=function(e){return e.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(x));const S=u.createShader(u.FRAGMENT_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);if(u.shaderSource(S,w),u.compileShader(S),!u.getShaderParameter(S,u.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${u.getShaderInfoLog(S)}`);u.attachShader(this.program,S);const E=u.createShader(u.VERTEX_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);if(u.shaderSource(E,x),u.compileShader(E),!u.getShaderParameter(E,u.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${u.getShaderInfoLog(E)}`);u.attachShader(this.program,E),this.attributes={};const T={};this.numAttributes=p.length;for(let t=0;t<this.numAttributes;t++)p[t]&&(u.bindAttribLocation(this.program,t,p[t]),this.attributes[p[t]]=t);if(u.linkProgram(this.program),!u.getProgramParameter(this.program,u.LINK_STATUS))throw new Error(`Program failed to link: ${u.getProgramInfoLog(this.program)}`);u.deleteShader(E),u.deleteShader(S);for(let t=0;t<_.length;t++){const e=_[t];if(e&&!T[e]){const t=u.getUniformLocation(this.program,e);t&&(T[e]=t)}}this.fixedUniforms=i(e,T),this.terrainUniforms=((e,n)=>({u_depth:new t.bP(e,n.u_depth),u_terrain:new t.bP(e,n.u_terrain),u_terrain_dim:new t.bg(e,n.u_terrain_dim),u_terrain_matrix:new t.bR(e,n.u_terrain_matrix),u_terrain_unpack:new t.bS(e,n.u_terrain_unpack),u_terrain_exaggeration:new t.bg(e,n.u_terrain_exaggeration)}))(e,T),this.projectionUniforms=((e,n)=>({u_projection_matrix:new t.bR(e,n.u_projection_matrix),u_projection_tile_mercator_coords:new t.bS(e,n.u_projection_tile_mercator_coords),u_projection_clipping_plane:new t.bS(e,n.u_projection_clipping_plane),u_projection_transition:new t.bg(e,n.u_projection_transition),u_projection_fallback_matrix:new t.bR(e,n.u_projection_fallback_matrix)}))(e,T),this.binderUniforms=r?r.getUniforms(e,T):[]}draw(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v){const _=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o),a){e.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,a.depthTexture),e.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,a.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(a[e])}if(l)for(const w in l)this.projectionUniforms[An[w]].set(l[w]);if(s)for(const w in this.fixedUniforms)this.fixedUniforms[w].set(s[w]);m&&m.setUniforms(e,this.binderUniforms,p,{zoom:f});let b=0;switch(t){case _.LINES:b=2;break;case _.TRIANGLES:b=3;break;case _.LINE_STRIP:b=1}for(const w of d.get()){const n=w.vaos||(w.vaos={});(n[c]||(n[c]=new Tn)).bind(e,this,u,m?m.getPaintVertexBuffers():[],h,w.vertexOffset,g,y,v),_.drawElements(t,w.primitiveLength*b,_.UNSIGNED_SHORT,w.primitiveOffset*b*2)}}}function In(e,n,r){const i=1/t.aC(r,1,n.transform.tileZoom),o=Math.pow(2,r.tileID.overscaledZ),s=r.tileSize*Math.pow(2,n.transform.tileZoom)/o,a=s*(r.tileID.canonical.x+r.tileID.wrap*o),l=s*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,l>>16],u_pixel_coord_lower:[65535&a,65535&l]}}const Pn=(e,n,r,i)=>{const o=e.style.light,s=o.properties.get("position"),a=[s.x,s.y,s.z],l=t.bV();"viewport"===o.properties.get("anchor")&&t.bW(l,e.transform.bearingInRadians),t.bX(a,a,l);const c=e.transform.transformLightDirection(a),u=o.properties.get("color");return{u_lightpos:a,u_lightpos_globe:c,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+n,u_opacity:r,u_fill_translate:i}},On=(e,n,r,i,o,s,a)=>t.e(Pn(e,n,r,i),In(s,e,a),{u_height_factor:-Math.pow(2,o.overscaledZ)/a.tileSize/8}),Rn=(e,n,r,i)=>t.e(In(n,e,r),{u_fill_translate:i}),Dn=(e,t)=>({u_world:e,u_fill_translate:t}),Ln=(e,n,r,i,o)=>t.e(Rn(e,n,r,o),{u_world:i}),Nn=(e,n,r,i,o)=>{const s=e.transform;let a,l,c=0;if("map"===r.paint.get("circle-pitch-alignment")){const e=t.aC(n,1,s.zoom);a=!0,l=[e,e],c=e/(t.$*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*o}else a=!1,l=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_pitch_with_map:+a,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:l,u_globe_extrude_scale:c,u_translate:i}},Fn=e=>({u_pixel_extrude_scale:[1/e.width,1/e.height]}),zn=e=>({u_viewport_size:[e.width,e.height]}),Un=(e,t=1)=>({u_color:e,u_overlay:0,u_overlay_scale:t}),jn=(e,n,r,i)=>{const o=t.aC(e,1,n)/(t.$*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*i;return{u_extrude_scale:t.aC(e,1,n),u_intensity:r,u_globe_extrude_scale:o}},Bn=(e,n,r,i)=>{const o=t.L();t.bY(o,0,e.width,e.height,0,0,1);const s=e.context.gl;return{u_matrix:o,u_world:[s.drawingBufferWidth,s.drawingBufferHeight],u_image:r,u_color_ramp:i,u_opacity:n.paint.get("heatmap-opacity")}},Vn=(e,t,n)=>{const r=n.paint.get("hillshade-accent-color");let i;switch(n.paint.get("hillshade-method")){case"basic":i=4;break;case"combined":i=1;break;case"igor":i=2;break;case"multidirectional":i=3;break;default:i=0}const o=n.getIlluminationProperties();for(let s=0;s<o.directionRadians.length;s++)"viewport"===n.paint.get("hillshade-illumination-anchor")&&(o.directionRadians[s]+=e.transform.bearingInRadians);return{u_image:0,u_latrange:$n(0,t.tileID),u_exaggeration:n.paint.get("hillshade-exaggeration"),u_altitudes:o.altitudeRadians,u_azimuths:o.directionRadians,u_accent:r,u_method:i,u_highlights:o.highlightColor,u_shadows:o.shadowColor}},Hn=(e,n)=>{const r=n.stride,i=t.L();return t.bY(i,0,t.$,-t.$,0,0,1),t.M(i,i,[0,-t.$,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}};function $n(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.a1(0,i/r).toLngLat().lat,new t.a1(0,(i+1)/r).toLngLat().lat]}const Yn=(e,t,n=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:n,u_opacity:e.paint.get("color-relief-opacity")}),Gn=(e,n,r,i)=>{const o=e.transform;return{u_translation:Jn(e,n,r),u_ratio:i/t.aC(n,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},qn=(e,n,r,i,o)=>t.e(Gn(e,n,r,i),{u_image:0,u_image_height:o}),Wn=(e,n,r,i,o)=>{const s=e.transform,a=Zn(n,s);return{u_translation:Jn(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:i/t.aC(n,1,s.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[a,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},Kn=(e,n,r,i,o,s)=>{const a=e.lineAtlas,l=Zn(n,e.transform),c="round"===r.layout.get("line-cap"),u=a.getDash(o.from,c),h=a.getDash(o.to,c),d=u.width*s.fromScale,p=h.width*s.toScale;return t.e(Gn(e,n,r,i),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/p,-h.height/2],u_sdfgamma:a.width/(256*Math.min(d,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:s.t})};function Zn(e,n){return 1/t.aC(e,1,n.tileZoom)}function Jn(e,n,r){return t.aD(e.transform,n,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const Xn=(e,t,n,r,i)=>{return{u_tl_parent:e,u_scale_parent:t,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(s=r.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Qn(r.paint.get("raster-hue-rotate")),u_coords_top:[i[0].x,i[0].y,i[1].x,i[1].y],u_coords_bottom:[i[3].x,i[3].y,i[2].x,i[2].y]};var o,s};function Qn(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const er=(e,t,n,r,i,o,s,a,l,c,u,h,d)=>{const p=s.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:p.cameraToCenterDistance,u_pitch:p.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:p.width/p.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_label_plane_matrix:a,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+r,u_is_along_line:i,u_is_variable_anchor:o,u_texsize:h,u_texture:0,u_translation:c,u_pitched_scale:d}},tr=(e,n,r,i,o,s,a,l,c,u,h,d,p,f)=>{const m=a.transform;return t.e(er(e,n,r,i,o,s,a,l,c,u,h,d,f),{u_gamma_scale:i?Math.cos(m.pitch*Math.PI/180)*m.cameraToCenterDistance:1,u_device_pixel_ratio:a.pixelRatio,u_is_halo:1})},nr=(e,n,r,i,o,s,a,l,c,u,h,d,p)=>t.e(tr(e,n,r,i,o,s,a,l,c,u,!0,h,0,p),{u_texsize_icon:d,u_texture_icon:1}),rr=(e,t)=>({u_opacity:e,u_color:t}),ir=(e,n,r,i,o)=>t.e(function(e,n,r,i){const o=r.imageManager.getPattern(e.from.toString()),s=r.imageManager.getPattern(e.to.toString()),{width:a,height:l}=r.imageManager.getPixelSize(),c=Math.pow(2,i.tileID.overscaledZ),u=i.tileSize*Math.pow(2,r.transform.tileZoom)/c,h=u*(i.tileID.canonical.x+i.tileID.wrap*c),d=u*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:s.tl,u_pattern_br_b:s.br,u_texsize:[a,l],u_mix:n.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:s.displaySize,u_scale_a:n.fromScale,u_scale_b:n.toScale,u_tile_units_to_pixels:1/t.aC(i,1,r.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(r,o,n,i),{u_opacity:e}),or=(e,t)=>{},sr={fillExtrusion:(e,n)=>({u_lightpos:new t.bT(e,n.u_lightpos),u_lightpos_globe:new t.bT(e,n.u_lightpos_globe),u_lightintensity:new t.bg(e,n.u_lightintensity),u_lightcolor:new t.bT(e,n.u_lightcolor),u_vertical_gradient:new t.bg(e,n.u_vertical_gradient),u_opacity:new t.bg(e,n.u_opacity),u_fill_translate:new t.bU(e,n.u_fill_translate)}),fillExtrusionPattern:(e,n)=>({u_lightpos:new t.bT(e,n.u_lightpos),u_lightpos_globe:new t.bT(e,n.u_lightpos_globe),u_lightintensity:new t.bg(e,n.u_lightintensity),u_lightcolor:new t.bT(e,n.u_lightcolor),u_vertical_gradient:new t.bg(e,n.u_vertical_gradient),u_height_factor:new t.bg(e,n.u_height_factor),u_opacity:new t.bg(e,n.u_opacity),u_fill_translate:new t.bU(e,n.u_fill_translate),u_image:new t.bP(e,n.u_image),u_texsize:new t.bU(e,n.u_texsize),u_pixel_coord_upper:new t.bU(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.bU(e,n.u_pixel_coord_lower),u_scale:new t.bT(e,n.u_scale),u_fade:new t.bg(e,n.u_fade)}),fill:(e,n)=>({u_fill_translate:new t.bU(e,n.u_fill_translate)}),fillPattern:(e,n)=>({u_image:new t.bP(e,n.u_image),u_texsize:new t.bU(e,n.u_texsize),u_pixel_coord_upper:new t.bU(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.bU(e,n.u_pixel_coord_lower),u_scale:new t.bT(e,n.u_scale),u_fade:new t.bg(e,n.u_fade),u_fill_translate:new t.bU(e,n.u_fill_translate)}),fillOutline:(e,n)=>({u_world:new t.bU(e,n.u_world),u_fill_translate:new t.bU(e,n.u_fill_translate)}),fillOutlinePattern:(e,n)=>({u_world:new t.bU(e,n.u_world),u_image:new t.bP(e,n.u_image),u_texsize:new t.bU(e,n.u_texsize),u_pixel_coord_upper:new t.bU(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.bU(e,n.u_pixel_coord_lower),u_scale:new t.bT(e,n.u_scale),u_fade:new t.bg(e,n.u_fade),u_fill_translate:new t.bU(e,n.u_fill_translate)}),circle:(e,n)=>({u_camera_to_center_distance:new t.bg(e,n.u_camera_to_center_distance),u_scale_with_map:new t.bP(e,n.u_scale_with_map),u_pitch_with_map:new t.bP(e,n.u_pitch_with_map),u_extrude_scale:new t.bU(e,n.u_extrude_scale),u_device_pixel_ratio:new t.bg(e,n.u_device_pixel_ratio),u_globe_extrude_scale:new t.bg(e,n.u_globe_extrude_scale),u_translate:new t.bU(e,n.u_translate)}),collisionBox:(e,n)=>({u_pixel_extrude_scale:new t.bU(e,n.u_pixel_extrude_scale)}),collisionCircle:(e,n)=>({u_viewport_size:new t.bU(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.bQ(e,n.u_color),u_overlay:new t.bP(e,n.u_overlay),u_overlay_scale:new t.bg(e,n.u_overlay_scale)}),depth:or,clippingMask:or,heatmap:(e,n)=>({u_extrude_scale:new t.bg(e,n.u_extrude_scale),u_intensity:new t.bg(e,n.u_intensity),u_globe_extrude_scale:new t.bg(e,n.u_globe_extrude_scale)}),heatmapTexture:(e,n)=>({u_matrix:new t.bR(e,n.u_matrix),u_world:new t.bU(e,n.u_world),u_image:new t.bP(e,n.u_image),u_color_ramp:new t.bP(e,n.u_color_ramp),u_opacity:new t.bg(e,n.u_opacity)}),hillshade:(e,n)=>({u_image:new t.bP(e,n.u_image),u_latrange:new t.bU(e,n.u_latrange),u_exaggeration:new t.bg(e,n.u_exaggeration),u_altitudes:new t.b_(e,n.u_altitudes),u_azimuths:new t.b_(e,n.u_azimuths),u_accent:new t.bQ(e,n.u_accent),u_method:new t.bP(e,n.u_method),u_shadows:new t.bZ(e,n.u_shadows),u_highlights:new t.bZ(e,n.u_highlights)}),hillshadePrepare:(e,n)=>({u_matrix:new t.bR(e,n.u_matrix),u_image:new t.bP(e,n.u_image),u_dimension:new t.bU(e,n.u_dimension),u_zoom:new t.bg(e,n.u_zoom),u_unpack:new t.bS(e,n.u_unpack)}),colorRelief:(e,n)=>({u_image:new t.bP(e,n.u_image),u_unpack:new t.bS(e,n.u_unpack),u_dimension:new t.bU(e,n.u_dimension),u_elevation_stops:new t.bP(e,n.u_elevation_stops),u_color_stops:new t.bP(e,n.u_color_stops),u_color_ramp_size:new t.bP(e,n.u_color_ramp_size),u_opacity:new t.bg(e,n.u_opacity)}),line:(e,n)=>({u_translation:new t.bU(e,n.u_translation),u_ratio:new t.bg(e,n.u_ratio),u_device_pixel_ratio:new t.bg(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.bU(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_translation:new t.bU(e,n.u_translation),u_ratio:new t.bg(e,n.u_ratio),u_device_pixel_ratio:new t.bg(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.bU(e,n.u_units_to_pixels),u_image:new t.bP(e,n.u_image),u_image_height:new t.bg(e,n.u_image_height)}),linePattern:(e,n)=>({u_translation:new t.bU(e,n.u_translation),u_texsize:new t.bU(e,n.u_texsize),u_ratio:new t.bg(e,n.u_ratio),u_device_pixel_ratio:new t.bg(e,n.u_device_pixel_ratio),u_image:new t.bP(e,n.u_image),u_units_to_pixels:new t.bU(e,n.u_units_to_pixels),u_scale:new t.bT(e,n.u_scale),u_fade:new t.bg(e,n.u_fade)}),lineSDF:(e,n)=>({u_translation:new t.bU(e,n.u_translation),u_ratio:new t.bg(e,n.u_ratio),u_device_pixel_ratio:new t.bg(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.bU(e,n.u_units_to_pixels),u_patternscale_a:new t.bU(e,n.u_patternscale_a),u_patternscale_b:new t.bU(e,n.u_patternscale_b),u_sdfgamma:new t.bg(e,n.u_sdfgamma),u_image:new t.bP(e,n.u_image),u_tex_y_a:new t.bg(e,n.u_tex_y_a),u_tex_y_b:new t.bg(e,n.u_tex_y_b),u_mix:new t.bg(e,n.u_mix)}),raster:(e,n)=>({u_tl_parent:new t.bU(e,n.u_tl_parent),u_scale_parent:new t.bg(e,n.u_scale_parent),u_buffer_scale:new t.bg(e,n.u_buffer_scale),u_fade_t:new t.bg(e,n.u_fade_t),u_opacity:new t.bg(e,n.u_opacity),u_image0:new t.bP(e,n.u_image0),u_image1:new t.bP(e,n.u_image1),u_brightness_low:new t.bg(e,n.u_brightness_low),u_brightness_high:new t.bg(e,n.u_brightness_high),u_saturation_factor:new t.bg(e,n.u_saturation_factor),u_contrast_factor:new t.bg(e,n.u_contrast_factor),u_spin_weights:new t.bT(e,n.u_spin_weights),u_coords_top:new t.bS(e,n.u_coords_top),u_coords_bottom:new t.bS(e,n.u_coords_bottom)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.bP(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.bP(e,n.u_is_size_feature_constant),u_size_t:new t.bg(e,n.u_size_t),u_size:new t.bg(e,n.u_size),u_camera_to_center_distance:new t.bg(e,n.u_camera_to_center_distance),u_pitch:new t.bg(e,n.u_pitch),u_rotate_symbol:new t.bP(e,n.u_rotate_symbol),u_aspect_ratio:new t.bg(e,n.u_aspect_ratio),u_fade_change:new t.bg(e,n.u_fade_change),u_label_plane_matrix:new t.bR(e,n.u_label_plane_matrix),u_coord_matrix:new t.bR(e,n.u_coord_matrix),u_is_text:new t.bP(e,n.u_is_text),u_pitch_with_map:new t.bP(e,n.u_pitch_with_map),u_is_along_line:new t.bP(e,n.u_is_along_line),u_is_variable_anchor:new t.bP(e,n.u_is_variable_anchor),u_texsize:new t.bU(e,n.u_texsize),u_texture:new t.bP(e,n.u_texture),u_translation:new t.bU(e,n.u_translation),u_pitched_scale:new t.bg(e,n.u_pitched_scale)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.bP(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.bP(e,n.u_is_size_feature_constant),u_size_t:new t.bg(e,n.u_size_t),u_size:new t.bg(e,n.u_size),u_camera_to_center_distance:new t.bg(e,n.u_camera_to_center_distance),u_pitch:new t.bg(e,n.u_pitch),u_rotate_symbol:new t.bP(e,n.u_rotate_symbol),u_aspect_ratio:new t.bg(e,n.u_aspect_ratio),u_fade_change:new t.bg(e,n.u_fade_change),u_label_plane_matrix:new t.bR(e,n.u_label_plane_matrix),u_coord_matrix:new t.bR(e,n.u_coord_matrix),u_is_text:new t.bP(e,n.u_is_text),u_pitch_with_map:new t.bP(e,n.u_pitch_with_map),u_is_along_line:new t.bP(e,n.u_is_along_line),u_is_variable_anchor:new t.bP(e,n.u_is_variable_anchor),u_texsize:new t.bU(e,n.u_texsize),u_texture:new t.bP(e,n.u_texture),u_gamma_scale:new t.bg(e,n.u_gamma_scale),u_device_pixel_ratio:new t.bg(e,n.u_device_pixel_ratio),u_is_halo:new t.bP(e,n.u_is_halo),u_translation:new t.bU(e,n.u_translation),u_pitched_scale:new t.bg(e,n.u_pitched_scale)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.bP(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.bP(e,n.u_is_size_feature_constant),u_size_t:new t.bg(e,n.u_size_t),u_size:new t.bg(e,n.u_size),u_camera_to_center_distance:new t.bg(e,n.u_camera_to_center_distance),u_pitch:new t.bg(e,n.u_pitch),u_rotate_symbol:new t.bP(e,n.u_rotate_symbol),u_aspect_ratio:new t.bg(e,n.u_aspect_ratio),u_fade_change:new t.bg(e,n.u_fade_change),u_label_plane_matrix:new t.bR(e,n.u_label_plane_matrix),u_coord_matrix:new t.bR(e,n.u_coord_matrix),u_is_text:new t.bP(e,n.u_is_text),u_pitch_with_map:new t.bP(e,n.u_pitch_with_map),u_is_along_line:new t.bP(e,n.u_is_along_line),u_is_variable_anchor:new t.bP(e,n.u_is_variable_anchor),u_texsize:new t.bU(e,n.u_texsize),u_texsize_icon:new t.bU(e,n.u_texsize_icon),u_texture:new t.bP(e,n.u_texture),u_texture_icon:new t.bP(e,n.u_texture_icon),u_gamma_scale:new t.bg(e,n.u_gamma_scale),u_device_pixel_ratio:new t.bg(e,n.u_device_pixel_ratio),u_is_halo:new t.bP(e,n.u_is_halo),u_translation:new t.bU(e,n.u_translation),u_pitched_scale:new t.bg(e,n.u_pitched_scale)}),background:(e,n)=>({u_opacity:new t.bg(e,n.u_opacity),u_color:new t.bQ(e,n.u_color)}),backgroundPattern:(e,n)=>({u_opacity:new t.bg(e,n.u_opacity),u_image:new t.bP(e,n.u_image),u_pattern_tl_a:new t.bU(e,n.u_pattern_tl_a),u_pattern_br_a:new t.bU(e,n.u_pattern_br_a),u_pattern_tl_b:new t.bU(e,n.u_pattern_tl_b),u_pattern_br_b:new t.bU(e,n.u_pattern_br_b),u_texsize:new t.bU(e,n.u_texsize),u_mix:new t.bg(e,n.u_mix),u_pattern_size_a:new t.bU(e,n.u_pattern_size_a),u_pattern_size_b:new t.bU(e,n.u_pattern_size_b),u_scale_a:new t.bg(e,n.u_scale_a),u_scale_b:new t.bg(e,n.u_scale_b),u_pixel_coord_upper:new t.bU(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.bU(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.bg(e,n.u_tile_units_to_pixels)}),terrain:(e,n)=>({u_texture:new t.bP(e,n.u_texture),u_ele_delta:new t.bg(e,n.u_ele_delta),u_fog_matrix:new t.bR(e,n.u_fog_matrix),u_fog_color:new t.bQ(e,n.u_fog_color),u_fog_ground_blend:new t.bg(e,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new t.bg(e,n.u_fog_ground_blend_opacity),u_horizon_color:new t.bQ(e,n.u_horizon_color),u_horizon_fog_blend:new t.bg(e,n.u_horizon_fog_blend),u_is_globe_mode:new t.bg(e,n.u_is_globe_mode)}),terrainDepth:(e,n)=>({u_ele_delta:new t.bg(e,n.u_ele_delta)}),terrainCoords:(e,n)=>({u_texture:new t.bP(e,n.u_texture),u_terrain_coords_id:new t.bg(e,n.u_terrain_coords_id),u_ele_delta:new t.bg(e,n.u_ele_delta)}),projectionErrorMeasurement:(e,n)=>({u_input:new t.bg(e,n.u_input),u_output_expected:new t.bg(e,n.u_output_expected)}),atmosphere:(e,n)=>({u_sun_pos:new t.bT(e,n.u_sun_pos),u_atmosphere_blend:new t.bg(e,n.u_atmosphere_blend),u_globe_position:new t.bT(e,n.u_globe_position),u_globe_radius:new t.bg(e,n.u_globe_radius),u_inv_proj_matrix:new t.bR(e,n.u_inv_proj_matrix)}),sky:(e,n)=>({u_sky_color:new t.bQ(e,n.u_sky_color),u_horizon_color:new t.bQ(e,n.u_horizon_color),u_horizon:new t.bU(e,n.u_horizon),u_horizon_normal:new t.bU(e,n.u_horizon_normal),u_sky_horizon_blend:new t.bg(e,n.u_sky_horizon_blend),u_sky_blend:new t.bg(e,n.u_sky_blend)})};class ar{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const lr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class cr{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[lr[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ur{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class hr extends ur{getDefault(){return t.bf.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class dr extends ur{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class pr extends ur{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class fr extends ur{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class mr extends ur{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class gr extends ur{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class yr extends ur{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class vr extends ur{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class _r extends ur{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class br extends ur{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class wr extends ur{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class xr extends ur{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Sr extends ur{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class Er extends ur{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Tr extends ur{getDefault(){return t.bf.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Mr extends ur{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Ar extends ur{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class kr extends ur{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Cr extends ur{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Ir extends ur{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Pr extends ur{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Or extends ur{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Rr extends ur{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Dr extends ur{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Lr extends ur{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Nr extends ur{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Fr extends ur{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class zr extends ur{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const n=this.gl;Gt(n)?n.bindVertexArray(e):null===(t=n.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Ur extends ur{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class jr extends ur{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Br extends ur{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Vr extends ur{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Hr extends Vr{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class $r extends Vr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Yr extends Vr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const Gr="Framebuffer is not complete";class qr{constructor(e,t,n,r,i){this.context=e,this.width=t,this.height=n;const o=e.gl,s=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new Hr(e,s),r)this.depthAttachment=i?new Yr(e,s):new $r(e,s);else if(i)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error(Gr)}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Wr{constructor(e){var t,n;if(this.gl=e,this.clearColor=new hr(this),this.clearDepth=new dr(this),this.clearStencil=new pr(this),this.colorMask=new fr(this),this.depthMask=new mr(this),this.stencilMask=new gr(this),this.stencilFunc=new yr(this),this.stencilOp=new vr(this),this.stencilTest=new _r(this),this.depthRange=new br(this),this.depthTest=new wr(this),this.depthFunc=new xr(this),this.blend=new Sr(this),this.blendFunc=new Er(this),this.blendColor=new Tr(this),this.blendEquation=new Mr(this),this.cullFace=new Ar(this),this.cullFaceSide=new kr(this),this.frontFace=new Cr(this),this.program=new Ir(this),this.activeTexture=new Pr(this),this.viewport=new Or(this),this.bindFramebuffer=new Rr(this),this.bindRenderbuffer=new Dr(this),this.bindTexture=new Lr(this),this.bindVertexBuffer=new Nr(this),this.bindElementBuffer=new Fr(this),this.bindVertexArray=new zr(this),this.pixelStoreUnpack=new Ur(this),this.pixelStoreUnpackPremultiplyAlpha=new jr(this),this.pixelStoreUnpackFlipY=new Br(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Gt(e)){this.HALF_FLOAT=e.HALF_FLOAT;const r=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==r?void 0:r.RGBA16F_EXT,this.RGB16F=null!==(n=e.RGB16F)&&void 0!==n?n:null==r?void 0:r.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new ar(this,e,t)}createVertexBuffer(e,t,n){return new cr(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n,r){return new qr(this,e,t,n,r)}clear({color:e,depth:t,stencil:n}){const r=this.gl;let i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){t.bH(e.blendFunction,Ut.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Gt(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return Gt(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let Kr;function Zr(e,n,r,i,o){const s=e.context,a=e.transform,l=s.gl,c=e.useProgram("collisionBox"),u=[];let h=0,d=0;for(let t=0;t<i.length;t++){const p=i[t],f=n.getTile(p).getBucket(r);if(!f)continue;const m=o?f.textCollisionBox:f.iconCollisionBox,g=f.collisionCircleArray;g.length>0&&(u.push({circleArray:g,circleOffset:d,coord:p}),h+=g.length/4,d=h),m&&c.draw(s,l.LINES,Vt.disabled,$t.disabled,e.colorModeForRenderPass(),Bt.disabled,Fn(e.transform),e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),a.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,e.transform.zoom,null,null,m.collisionVertexBuffer)}if(!o||!u.length)return;const p=e.useProgram("collisionCircle"),f=new t.b$;f.resize(4*h),f._trim();let m=0;for(const t of u)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],o=t.circleArray[n+2],s=t.circleArray[n+3];f.emplace(m++,r,i,o,s,0),f.emplace(m++,r,i,o,s,1),f.emplace(m++,r,i,o,s,2),f.emplace(m++,r,i,o,s,3)}(!Kr||Kr.length<2*h)&&(Kr=function(e){const n=2*e,r=new t.c1;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(h));const g=s.createIndexBuffer(Kr,!0),y=s.createVertexBuffer(f,t.c0.members,!0);for(const v of u){const n=zn(e.transform);p.draw(s,l.TRIANGLES,Vt.disabled,$t.disabled,e.colorModeForRenderPass(),Bt.disabled,n,e.style.map.terrain&&e.style.map.terrain.getTerrainData(v.coord),null,r.id,y,g,t.aM.simpleSegment(0,2*v.circleOffset,v.circleArray.length,v.circleArray.length/2),null,e.transform.zoom,null,null,null)}y.destroy(),g.destroy()}const Jr=t.ag(new Float32Array(16));function Xr(e,n,r,i,o,s){const{horizontalAlign:a,verticalAlign:l}=t.aH(e);return new t.P((-(a-.5)*n/o+i[0])*s,(-(l-.5)*r/o+i[1])*s)}function Qr(e,n,r,i,o,s){const a=n.tileAnchorPoint.add(new t.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let e=i.mult(s);r||(e=e.rotate(-o));const t=a.add(e);return Ce(t.x,t.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(r){const t=ze(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(e),r=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0);return e.add(i.rotate(r))}return e.add(i)}function ei(e,n,r,i,o,s,a,l,c,u,h,d){const p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,g={};f.clear();for(let y=0;y<p.length;y++){const m=p.get(y),v=m.hidden||!m.crossTileID||e.allowVerticalPlacement&&!m.placedOrientation?null:i[m.crossTileID];if(v){const i=new t.P(m.anchorX,m.anchorY),p={getElevation:d,width:o.width,height:o.height,pitchedLabelPlaneMatrix:s,pitchWithMap:r,transform:o,tileAnchorPoint:i,translation:u,unwrappedTileID:h},y=r?je(i.x,i.y,p):ze(i.x,i.y,p),_=Ie(o.cameraToCenterDistance,y.signedDistanceFromCamera);let b=t.ap(e.textSizeData,l,m)*_/t.aB;r&&(b*=e.tilePixelRatio/a);const{width:w,height:x,anchor:S,textOffset:E,textBoxScale:T}=v,M=Xr(S,w,x,E,T,b),A=o.getPitchedTextCorrection(i.x+u[0],i.y+u[1],h),k=Qr(y.point,p,n,M,-o.bearingInRadians,A),C=e.allowVerticalPlacement&&m.placedOrientation===t.ao.vertical?Math.PI/2:0;for(let e=0;e<m.numGlyphs;e++)t.av(f,k,C);c&&m.associatedIconIndex>=0&&(g[m.associatedIconIndex]={shiftedAnchor:k,angle:C})}else Ye(m.numGlyphs,f)}if(c){m.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e);if(r.hidden)Ye(r.numGlyphs,m);else{const n=g[e];if(n)for(let e=0;e<r.numGlyphs;e++)t.av(m,n.shiftedAnchor,n.angle);else Ye(r.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function ti(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function ni(e,n,r,i,o,s,a,l,c,u,h,d,p){const f=e.context,m=f.gl,g=e.transform,y="map"===l,v="map"===c,_="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),b=y&&!v&&!_,w=!r.layout.get("symbol-sort-key").isConstant();let x=!1;const S=e.getDepthModeForSublayer(0,Vt.ReadOnly),E=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),T=[],M=g.getCircleRadiusCorrection();for(const A of i){const i=n.getTile(A),l=i.getBucket(r);if(!l)continue;const c=o?l.text:l.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;const h=c.programConfigurations.get(r.id),d=o||l.sdfIcons,f=o?l.textSizeData:l.iconSizeData,S=v||0!==g.pitch,k=e.useProgram(ti(d,o,l),h),C=t.an(f,g.zoom),I=e.style.map.terrain&&e.style.map.terrain.getTerrainData(A);let P,O,R,D,L=[0,0],N=null;if(o)O=i.glyphAtlasTexture,R=m.LINEAR,P=i.glyphAtlasTexture.size,l.iconsInText&&(L=i.imageAtlasTexture.size,N=i.imageAtlasTexture,D=S||e.options.rotating||e.options.zooming||"composite"===f.kind||"camera"===f.kind?m.LINEAR:m.NEAREST);else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;O=i.imageAtlasTexture,R=d||e.options.rotating||e.options.zooming||t||S?m.LINEAR:m.NEAREST,P=i.imageAtlasTexture.size}const F=t.aC(i,1,e.transform.zoom),z=Me(y,e.transform,F),U=t.L();t.aq(U,z);const j=Ae(v,y,e.transform,F),B=t.aD(g,i,s,a),V=g.getProjectionData({overscaledTileID:A,applyGlobeMatrix:!p,applyTerrainMatrix:!0}),H=E&&l.hasTextData(),$="none"!==r.layout.get("icon-text-fit")&&H&&l.hasIconData();if(_){const t=e.style.map.terrain?(t,n)=>e.style.map.terrain.getElevation(A,t,n):null,n="map"===r.layout.get("text-rotation-alignment");Oe(l,e,o,z,U,v,u,n,A.toUnwrapped(),g.width,g.height,B,t)}const Y=o&&E||$,G=_||Y?Jr:v?z:e.transform.clipSpaceToPixelsMatrix,q=d&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let W;W=d?l.iconsInText?nr(f.kind,C,b,v,_,Y,e,G,j,B,P,L,M):tr(f.kind,C,b,v,_,Y,e,G,j,B,o,P,0,M):er(f.kind,C,b,v,_,Y,e,G,j,B,o,P,M);const K={program:k,buffers:c,uniformValues:W,projectionData:V,atlasTexture:O,atlasTextureIcon:N,atlasInterpolation:R,atlasInterpolationIcon:D,isSDF:d,hasHalo:q};if(w&&l.canOverlap){x=!0;const e=c.segments.get();for(const n of e)T.push({segments:new t.aM([n]),sortKey:n.sortKey,state:K,terrainData:I})}else T.push({segments:c.segments,sortKey:0,state:K,terrainData:I})}x&&T.sort((e,t)=>e.sortKey-t.sortKey);for(const t of T){const n=t.state;if(f.activeTexture.set(m.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,m.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(m.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,ri(n.buffers,t.segments,r,e,n.program,S,h,d,i,n.projectionData,t.terrainData)),i.u_is_halo=0}ri(n.buffers,t.segments,r,e,n.program,S,h,d,n.uniformValues,n.projectionData,t.terrainData)}}function ri(e,t,n,r,i,o,s,a,l,c,u){const h=r.context;i.draw(h,h.gl.TRIANGLES,o,s,a,Bt.backCCW,l,u,c,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function ii(e,n,r,i,o){const s=e.context,a=s.gl,l=$t.disabled,c=new Ut([a.ONE,a.ONE],t.bf.transparent,[!0,!0,!0,!0]),u=n.getBucket(r);if(!u)return;const h=i.key;let d=r.heatmapFbos.get(h);d||(d=si(s,n.tileSize,n.tileSize),r.heatmapFbos.set(h,d)),s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,n.tileSize,n.tileSize]),s.clear({color:t.bf.transparent});const p=u.programConfigurations.get(r.id),f=e.useProgram("heatmap",p,!o),m=e.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),g=e.style.map.terrain.getTerrainData(i);f.draw(s,a.TRIANGLES,Vt.disabled,l,c,Bt.disabled,jn(n,e.transform.zoom,r.paint.get("heatmap-intensity"),1),g,m,r.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,r.paint,e.transform.zoom,p)}function oi(e,t,n,r,i){const o=e.context,s=o.gl,a=e.transform;o.setColorMode(e.colorModeForRenderPass());const l=ai(o,t),c=n.key,u=t.heatmapFbos.get(c);if(!u)return;o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get()),o.activeTexture.set(s.TEXTURE1),l.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=a.getProjectionData({overscaledTileID:n,applyTerrainMatrix:i,applyGlobeMatrix:!r});e.useProgram("heatmapTexture").draw(o,s.TRIANGLES,Vt.disabled,$t.disabled,e.colorModeForRenderPass(),Bt.disabled,Bn(e,t,0,1),null,h,t.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments,t.paint,a.zoom),u.destroy(),t.heatmapFbos.delete(c)}function si(e,t,n){var r,i;const o=e.gl,s=o.createTexture();o.bindTexture(o.TEXTURE_2D,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);const a=null!==(r=e.HALF_FLOAT)&&void 0!==r?r:o.UNSIGNED_BYTE,l=null!==(i=e.RGBA16F)&&void 0!==i?i:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,l,t,n,0,o.RGBA,a,null);const c=e.createFramebuffer(t,n,!1,!1);return c.colorAttachment.set(s),c}function ai(e,n){return n.colorRampTexture||(n.colorRampTexture=new t.T(e,n.colorRamp,e.gl.RGBA)),n.colorRampTexture}function li(e,t,n,r,i){if(!n||!r||!r.imageAtlas)return;const o=r.imageAtlas.patternPositions;let s=o[n.to.toString()],a=o[n.from.toString()];if(!s&&a&&(s=a),!a&&s&&(a=s),!s||!a){const e=i.getPaintProperty(t);s=o[e],a=o[e]}s&&a&&e.setConstantPatternPositions(s,a)}function ci(e,n,r,i,o,s,a,l){const c=e.context.gl,u="fill-pattern",h=r.paint.get(u),d=h&&h.constantOr(1),p=r.getCrossfadeParameters();let f,m,g,y,v;const _=e.transform,b=r.paint.get("fill-translate"),w=r.paint.get("fill-translate-anchor");a?(m=d&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",f=c.LINES):(m=d?"fillPattern":"fill",f=c.TRIANGLES);const x=h.constantOr(null);for(const S of i){const i=n.getTile(S);if(d&&!i.patternsLoaded())continue;const h=i.getBucket(r);if(!h)continue;const E=h.programConfigurations.get(r.id),T=e.useProgram(m,E),M=e.style.map.terrain&&e.style.map.terrain.getTerrainData(S);d&&(e.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),E.updatePaintBuffers(p)),li(E,u,x,i,r);const A=_.getProjectionData({overscaledTileID:S,applyGlobeMatrix:!l,applyTerrainMatrix:!0}),k=t.aD(_,i,b,w);if(a){y=h.indexBuffer2,v=h.segments2;const t=[c.drawingBufferWidth,c.drawingBufferHeight];g="fillOutlinePattern"===m&&d?Ln(e,p,i,t,k):Dn(t,k)}else y=h.indexBuffer,v=h.segments,g=d?Rn(e,p,i,k):{u_fill_translate:k};const C=e.stencilModeForClipping(S);T.draw(e.context,f,o,C,s,Bt.backCCW,g,M,A,r.id,h.layoutVertexBuffer,y,v,r.paint,e.transform.zoom,E)}}function ui(e,n,r,i,o,s,a,l){const c=e.context,u=c.gl,h="fill-extrusion-pattern",d=r.paint.get(h),p=d.constantOr(1),f=r.getCrossfadeParameters(),m=r.paint.get("fill-extrusion-opacity"),g=d.constantOr(null),y=e.transform;for(const v of i){const i=n.getTile(v),d=i.getBucket(r);if(!d)continue;const _=e.style.map.terrain&&e.style.map.terrain.getTerrainData(v),b=d.programConfigurations.get(r.id),w=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",b);p&&(e.context.activeTexture.set(u.TEXTURE0),i.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),b.updatePaintBuffers(f));const x=y.getProjectionData({overscaledTileID:v,applyGlobeMatrix:!l,applyTerrainMatrix:!0});li(b,h,g,i,r);const S=t.aD(y,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),E=r.paint.get("fill-extrusion-vertical-gradient"),T=p?On(e,E,m,S,v,f,i):Pn(e,E,m,S);w.draw(c,c.gl.TRIANGLES,o,s,a,Bt.backCCW,T,_,x,r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,e.transform.zoom,b,e.style.map.terrain&&d.centroidVertexBuffer)}}function hi(e,t,n,r,i,o,s,a,l){var c;const u=e.style.projection,h=e.context,d=e.transform,p=h.gl,f=[`#define NUM_ILLUMINATION_SOURCES ${n.paint.get("hillshade-highlight-color").values.length}`],m=e.useProgram("hillshade",null,!1,f),g=!e.options.moving;for(const y of r){const r=t.getTile(y),f=r.fbo;if(!f)continue;const v=u.getMeshFromTileID(h,y.canonical,a,!0,"raster"),_=null===(c=e.style.map.terrain)||void 0===c?void 0:c.getTerrainData(y);h.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,f.colorAttachment.get());const b=d.getProjectionData({overscaledTileID:y,aligned:g,applyGlobeMatrix:!l,applyTerrainMatrix:!0});m.draw(h,p.TRIANGLES,o,i[y.overscaledZ],s,Bt.backCCW,Vn(e,r,n),_,b,n.id,v.vertexBuffer,v.indexBuffer,v.segments)}}function di(e,n,r,i,o,s,a,l,c){var u;const h=e.style.projection,d=e.context,p=e.transform,f=d.gl,m=e.useProgram("colorRelief"),g=!e.options.moving;let y=!0,v=0;for(const _ of i){const i=n.getTile(_),b=i.dem;if(y){const e=f.getParameter(f.MAX_TEXTURE_SIZE),{elevationTexture:t,colorTexture:n}=r.getColorRampTextures(d,e,b.getUnpackVector());d.activeTexture.set(f.TEXTURE1),t.bind(f.NEAREST,f.CLAMP_TO_EDGE),d.activeTexture.set(f.TEXTURE4),n.bind(f.LINEAR,f.CLAMP_TO_EDGE),y=!1,v=t.size[0]}if(!b||!b.data)continue;const w=b.stride,x=b.getPixels();if(d.activeTexture.set(f.TEXTURE0),d.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(w),i.demTexture){const e=i.demTexture;e.update(x,{premultiply:!1}),e.bind(f.LINEAR,f.CLAMP_TO_EDGE)}else i.demTexture=new t.T(d,x,f.RGBA,{premultiply:!1}),i.demTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE);const S=h.getMeshFromTileID(d,_.canonical,l,!0,"raster"),E=null===(u=e.style.map.terrain)||void 0===u?void 0:u.getTerrainData(_),T=p.getProjectionData({overscaledTileID:_,aligned:g,applyGlobeMatrix:!c,applyTerrainMatrix:!0});m.draw(d,f.TRIANGLES,s,o[_.overscaledZ],a,Bt.backCCW,Yn(r,i.dem,v),E,T,r.id,S.vertexBuffer,S.indexBuffer,S.segments)}}const pi=[new t.P(0,0),new t.P(t.$,0),new t.P(t.$,t.$),new t.P(0,t.$)];function fi(e,t,n,r,i,o,s,a,l=!1,c=!1){const u=r[r.length-1].overscaledZ,h=e.context,d=h.gl,p=e.useProgram("raster"),f=e.transform,m=e.style.projection,g=e.colorModeForRenderPass(),y=!e.options.moving;for(const v of r){const r=e.getDepthModeForSublayer(v.overscaledZ-u,1===n.paint.get("raster-opacity")?Vt.ReadWrite:Vt.ReadOnly,d.LESS),_=t.getTile(v);_.registerFadeDuration(n.paint.get("raster-fade-duration"));const b=t.findLoadedParent(v,0),w=t.findLoadedSibling(v),x=mi(_,b||w||null,t,n,e.transform,e.style.map.terrain);let S,E;const T="nearest"===n.paint.get("raster-resampling")?d.NEAREST:d.LINEAR;h.activeTexture.set(d.TEXTURE0),_.texture.bind(T,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),h.activeTexture.set(d.TEXTURE1),b?(b.texture.bind(T,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),S=Math.pow(2,b.tileID.overscaledZ-_.tileID.overscaledZ),E=[_.tileID.canonical.x*S%1,_.tileID.canonical.y*S%1]):_.texture.bind(T,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),_.texture.useMipmap&&h.extTextureFilterAnisotropic&&e.transform.pitch>20&&d.texParameterf(d.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax);const M=e.style.map.terrain&&e.style.map.terrain.getTerrainData(v),A=f.getProjectionData({overscaledTileID:v,aligned:y,applyGlobeMatrix:!c,applyTerrainMatrix:!0}),k=Xn(E||[0,0],S||1,x,n,a),C=m.getMeshFromTileID(h,v.canonical,o,s,"raster");p.draw(h,d.TRIANGLES,r,i?i[v.overscaledZ]:$t.disabled,g,l?Bt.frontCCW:Bt.backCCW,k,M,A,n.id,C.vertexBuffer,C.indexBuffer,C.segments)}}function mi(e,n,r,i,o,a){const l=i.paint.get("raster-fade-duration");if(!a&&l>0){const i=s.now(),a=(i-e.timeAdded)/l,c=n?(i-n.timeAdded)/l:-1,u=r.getSource(),h=ye(o,{tileSize:u.tileSize,roundZoom:u.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),p=d&&e.refreshedUponExpiration?1:t.ah(d?a:1-c,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const gi=new t.bf(1,0,0,1),yi=new t.bf(0,1,0,1),vi=new t.bf(0,0,1,1),_i=new t.bf(1,0,1,1),bi=new t.bf(0,1,1,1);function wi(e,t,n,r){Si(e,0,t+n/2,e.transform.width,n,r)}function xi(e,t,n,r){Si(e,t-n/2,0,n,e.transform.height,r)}function Si(e,t,n,r,i,o){const s=e.context,a=s.gl;a.enable(a.SCISSOR_TEST),a.scissor(t*e.pixelRatio,n*e.pixelRatio,r*e.pixelRatio,i*e.pixelRatio),s.clear({color:o}),a.disable(a.SCISSOR_TEST)}function Ei(e,n,r){const i=e.context,o=i.gl,s=e.useProgram("debug"),a=Vt.disabled,l=$t.disabled,c=e.colorModeForRenderPass(),u="$debug",h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(r);i.activeTexture.set(o.TEXTURE0);const d=n.getTileByID(r.key).latestRawTileData,p=Math.floor((d&&d.byteLength||0)/1024),f=n.getTile(r).tileSize,m=512/Math.min(f,512)*(r.overscaledZ/e.transform.zoom)*.5;let g=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(g+=` => ${r.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,`${g} ${p}kB`);const y=e.transform.getProjectionData({overscaledTileID:r,applyGlobeMatrix:!0,applyTerrainMatrix:!0});s.draw(i,o.TRIANGLES,a,l,Ut.alphaBlended,Bt.disabled,Un(t.bf.transparent,m),null,y,u,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(i,o.LINE_STRIP,a,l,c,Bt.disabled,Un(t.bf.red),h,y,u,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function Ti(e,t,n,r){const{isRenderingGlobe:i}=r,o=e.context,s=o.gl,a=e.transform,l=e.colorModeForRenderPass(),c=e.getDepthModeFor3D(),u=e.useProgram("terrain");o.bindFramebuffer.set(null),o.viewport.set([0,0,e.width,e.height]);for(const h of n){const n=t.getTerrainMesh(h.tileID),r=e.renderToTexture.getTexture(h),d=t.getTerrainData(h.tileID);o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,r.texture);const p=t.getMeshFrameDelta(a.zoom),f=a.calculateFogMatrix(h.tileID.toUnwrapped()),m=Mn(p,f,e.style.sky,a.pitch,i),g=a.getProjectionData({overscaledTileID:h.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});u.draw(o,s.TRIANGLES,c,$t.disabled,l,Bt.backCCW,m,d,g,"terrain",n.vertexBuffer,n.indexBuffer,n.segments)}}function Mi(e,n){if(!n.mesh){const r=new t.aL;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(1,1),r.emplaceBack(-1,1);const i=new t.aN;i.emplaceBack(0,1,2),i.emplaceBack(0,2,3),n.mesh=new xt(e.createVertexBuffer(r,St.members),e.createIndexBuffer(i),t.aM.simpleSegment(0,0,r.length,i.length))}return n.mesh}class Ai{constructor(e,n){this.context=new Wr(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=be.maxUnderzooming+be.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vt}resize(e,t,n){if(this.width=Math.floor(e*n),this.height=Math.floor(t*n),this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const r of this.style._order)this.style._layers[r].resize()}setup(){const e=this.context,n=new t.aL;n.emplaceBack(0,0),n.emplaceBack(t.$,0),n.emplaceBack(0,t.$),n.emplaceBack(t.$,t.$),this.tileExtentBuffer=e.createVertexBuffer(n,St.members),this.tileExtentSegments=t.aM.simpleSegment(0,0,4,2);const r=new t.aL;r.emplaceBack(0,0),r.emplaceBack(t.$,0),r.emplaceBack(0,t.$),r.emplaceBack(t.$,t.$),this.debugBuffer=e.createVertexBuffer(r,St.members),this.debugSegments=t.aM.simpleSegment(0,0,4,5);const i=new t.c6;i.emplaceBack(0,0,0,0),i.emplaceBack(t.$,0,t.$,0),i.emplaceBack(0,t.$,0,t.$),i.emplaceBack(t.$,t.$,t.$,t.$),this.rasterBoundsBuffer=e.createVertexBuffer(i,En.members),this.rasterBoundsSegments=t.aM.simpleSegment(0,0,4,2);const o=new t.aL;o.emplaceBack(0,0),o.emplaceBack(t.$,0),o.emplaceBack(0,t.$),o.emplaceBack(t.$,t.$),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(o,St.members),this.rasterBoundsSegmentsPosOnly=t.aM.simpleSegment(0,0,4,5);const s=new t.aL;s.emplaceBack(0,0),s.emplaceBack(1,0),s.emplaceBack(0,1),s.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(s,St.members),this.viewportSegments=t.aM.simpleSegment(0,0,4,2);const a=new t.c7;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const l=new t.aN;l.emplaceBack(1,0,2),l.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(l);const c=this.context.gl;this.stencilClearMode=new $t({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO),this.tileExtentMesh=new xt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=t.L();t.bY(r,0,this.width,this.height,0,0,1),t.N(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]);const i={mainMatrix:r,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:r};this.useProgram("clippingMask",null,!0).draw(e,n.TRIANGLES,Vt.disabled,this.stencilClearMode,Ut.disabled,Bt.disabled,null,null,i,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t,n){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source,this.nextStencilID+t.length>256&&this.clearStencil();const r=this.context;r.setColorMode(Ut.disabled),r.setDepthMode(Vt.disabled);const i={};for(const o of t)i[o.key]=this.nextStencilID++;this._renderTileMasks(i,t,n,!0),this._renderTileMasks(i,t,n,!1),this._tileClippingMaskIDs=i}_renderTileMasks(e,t,n,r){const i=this.context,o=i.gl,s=this.style.projection,a=this.transform,l=this.useProgram("clippingMask");for(const c of t){const t=e[c.key],u=this.style.map.terrain&&this.style.map.terrain.getTerrainData(c),h=s.getMeshFromTileID(this.context,c.canonical,r,!0,"stencil"),d=a.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!n,applyTerrainMatrix:!0});l.draw(i,o.TRIANGLES,Vt.disabled,new $t({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),Ut.disabled,n?Bt.disabled:Bt.backCCW,null,u,d,"$clipping",h.vertexBuffer,h.indexBuffer,h.segments)}}_renderTilesDepthBuffer(){const e=this.context,t=e.gl,n=this.style.projection,r=this.transform,i=this.useProgram("depth"),o=this.getDepthModeFor3D(),s=ve(r,{tileSize:r.tileSize});for(const a of s){const s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(a),l=n.getMeshFromTileID(this.context,a.canonical,!0,!0,"raster"),c=r.getProjectionData({overscaledTileID:a,applyGlobeMatrix:!0,applyTerrainMatrix:!0});i.draw(e,t.TRIANGLES,o,$t.disabled,Ut.disabled,Bt.backCCW,null,s,c,"$clipping",l.vertexBuffer,l.indexBuffer,l.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new $t({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new $t({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const t=this.context.gl,n=e.sort((e,t)=>t.overscaledZ-e.overscaledZ),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const e={};for(let n=0;n<i;n++)e[n+r]=new $t({func:t.GEQUAL,mask:255},n+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=i,[e,n]}return[{[r]:$t.disabled},n]}stencilConfigForOverlapTwoPass(e){const t=this.context.gl,n=e.sort((e,t)=>t.overscaledZ-e.overscaledZ),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(this.clearStencil(),i>1){const e={},o={};for(let n=0;n<i;n++)e[n+r]=new $t({func:t.GREATER,mask:255},i+1+n,255,t.KEEP,t.KEEP,t.REPLACE),o[n+r]=new $t({func:t.GREATER,mask:255},1+n,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID=2*i+1,[e,o,n]}return this.nextStencilID=3,[{[r]:new $t({func:t.GREATER,mask:255},2,255,t.KEEP,t.KEEP,t.REPLACE)},{[r]:new $t({func:t.GREATER,mask:255},1,255,t.KEEP,t.KEEP,t.REPLACE)},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new Ut([e.CONSTANT_COLOR,e.ONE],new t.bf(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Ut.unblended:Ut.alphaBlended}getDepthModeForSublayer(e,t,n){if(!this.opaquePassEnabledForLayer())return Vt.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Vt(n||this.context.gl.LEQUAL,t,[r,r])}getDepthModeFor3D(){return new Vt(this.context.gl.LEQUAL,Vt.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){var r,i;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(s.now()),this.imageManager.beginFrame();const o=this.style._order,a=this.style.sourceCaches,l={},c={},u={},h={isRenderingToTexture:!1,isRenderingGlobe:(null===(r=e.projection)||void 0===r?void 0:r.transitionState)>0};for(const t in a){const e=a[t];e.used&&e.prepare(this.context),l[t]=e.getVisibleCoordinates(!1),c[t]=l[t].slice().reverse(),u[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<o.length;t++)if(this.style._layers[o[t]].is3D()){this.opaquePassCutoff=t;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of o){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=c[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,a[e.source],e,n,h)}if(null===(i=this.style.projection)||void 0===i||i.updateGPUdependent({context:this.context,useProgram:e=>this.useProgram(e)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.bf.black:t.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(e,t){const n=e.context,r=n.gl,i=((e,t,n)=>{const r=Math.cos(t.rollInRadians),i=Math.sin(t.rollInRadians),o=ue(t),s=t.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:e.properties.get("sky-color"),u_horizon_color:e.properties.get("horizon-color"),u_horizon:[(t.width/2-o*i)*n,(t.height/2+o*r)*n],u_horizon_normal:[-i,r],u_sky_horizon_blend:e.properties.get("sky-horizon-blend")*t.height/2*n,u_sky_blend:s}})(t,e.style.map.transform,e.pixelRatio),o=new Vt(r.LEQUAL,Vt.ReadWrite,[0,1]),s=$t.disabled,a=e.colorModeForRenderPass(),l=e.useProgram("sky"),c=Mi(n,t);l.draw(n,r.TRIANGLES,o,s,a,Bt.disabled,i,null,void 0,"sky",c.vertexBuffer,c.indexBuffer,c.segments)}(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[o[this.currentLayer]],t=a[e.source],n=l[e.source];this._renderTileClippingMasks(e,n,!1),this.renderLayer(this,t,e,n,h)}this.renderPass="translucent";let d=!1;for(this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){const e=this.style._layers[o[this.currentLayer]],t=a[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e,h))continue;this.opaquePassEnabledForLayer()||d||(d=!0,h.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const n=("symbol"===e.type?u:c)[e.source];this._renderTileClippingMasks(e,l[e.source],!!this.renderToTexture),this.renderLayer(this,t,e,n,h)}if(h.isRenderingGlobe&&function(e,n,r){const i=e.context,o=i.gl,s=e.useProgram("atmosphere"),a=new Vt(o.LEQUAL,Vt.ReadOnly,[0,1]),l=e.transform,c=function(e,n){const r=e.properties.get("position"),i=[-r.x,-r.y,-r.z],o=t.ag(new Float64Array(16));return"map"===e.properties.get("anchor")&&(t.b6(o,o,n.rollInRadians),t.b7(o,o,-n.pitchInRadians),t.b6(o,o,n.bearingInRadians),t.b7(o,o,n.center.lat*Math.PI/180),t.bz(o,o,-n.center.lng*Math.PI/180)),t.c5(i,i,o),i}(r,e.transform),u=l.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h=n.properties.get("atmosphere-blend")*u.projectionTransition;if(0===h)return;const d=rn(l.worldSize,l.center.lat),p=l.inverseProjectionMatrix,f=new Float64Array(4);f[3]=1,t.aw(f,f,l.modelViewProjectionMatrix),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[3]=1,t.aw(f,f,p),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[3]=1;const m=((e,t,n,r,i)=>({u_sun_pos:e,u_atmosphere_blend:t,u_globe_position:n,u_globe_radius:r,u_inv_proj_matrix:i}))(c,h,[f[0],f[1],f[2]],d,p),g=Mi(i,n);s.draw(i,o.TRIANGLES,a,$t.disabled,Ut.alphaBlended,Bt.disabled,m,null,null,"atmosphere",g.vertexBuffer,g.indexBuffer,g.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const e=function(e,t){let n=null;const r=Object.values(e._layers).flatMap(n=>n.source&&!n.isHidden(t)?[e.sourceCaches[n.source]]:[]),i=r.filter(e=>"vector"===e.getSource().type),o=r.filter(e=>"vector"!==e.getSource().type),s=e=>{(!n||n.getSource().maxzoom<e.getSource().maxzoom)&&(n=e)};return i.forEach(e=>s(e)),n||o.forEach(e=>s(e)),n}(this.style,this.transform.zoom);e&&function(e,t,n){for(let r=0;r<n.length;r++)Ei(e,t,n[r])}(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;wi(e,e.transform.height-(t.top||0),3,gi),wi(e,t.bottom||0,3,yi),xi(e,t.left||0,3,vi),xi(e,e.transform.width-(t.right||0),3,_i);const n=e.transform.centerPoint;!function(e,t,n,r){Si(e,t-1,n-10,2,20,r),Si(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,bi)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const n=this.terrainFacilitator.matrix,r=this.transform.modelViewProjectionMatrix;let i=this.terrainFacilitator.dirty;i||(i=e?!t.c8(n,r):!t.c9(n,r)),i||(i=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),i&&(t.ca(n,r),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,n){const r=e.context,i=r.gl,o=e.transform,s=Ut.unblended,a=new Vt(i.LEQUAL,Vt.ReadWrite,[0,1]),l=n.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");r.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.bf.transparent,depth:1});for(const t of l){const e=n.getTerrainMesh(t.tileID),l=n.getTerrainData(t.tileID),u=o.getProjectionData({overscaledTileID:t.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),h={u_ele_delta:n.getMeshFrameDelta(o.zoom)};c.draw(r,i.TRIANGLES,a,$t.disabled,s,Bt.backCCW,h,l,u,"terrain",e.vertexBuffer,e.indexBuffer,e.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,n){const r=e.context,i=r.gl,o=e.transform,s=Ut.unblended,a=new Vt(i.LEQUAL,Vt.ReadWrite,[0,1]),l=n.getCoordsTexture(),c=n.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");r.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.bf.transparent,depth:1}),n.coordsIndex=[];for(const t of c){const e=n.getTerrainMesh(t.tileID),c=n.getTerrainData(t.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture);const h={u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0,u_ele_delta:n.getMeshFrameDelta(o.zoom)},d=o.getProjectionData({overscaledTileID:t.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});u.draw(r,i.TRIANGLES,a,$t.disabled,s,Bt.backCCW,h,c,d,"terrain",e.vertexBuffer,e.indexBuffer,e.segments),n.coordsIndex.push(t.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}renderLayer(e,n,r,i,o){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||(i||[]).length)&&(this.id=r.id,t.cb(r)?function(e,n,r,i,o,s){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:a}=s,l=$t.disabled,c=e.colorModeForRenderPass();(r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,n,r,i,o,s,a,l,c){const u=n.transform,h=n.style.map.terrain,d="map"===o,p="map"===s;for(const f of e){const e=i.getTile(f),o=e.getBucket(r);if(!o||!o.text||!o.text.segments.get().length)continue;const s=t.an(o.textSizeData,u.zoom),m=t.aC(e,1,n.transform.zoom),g=Me(d,n.transform,m),y="none"!==r.layout.get("icon-text-fit")&&o.hasIconData();if(s){const n=Math.pow(2,u.zoom-e.tileID.overscaledZ),r=h?(e,t)=>h.getElevation(f,e,t):null;ei(o,d,p,c,u,g,n,s,y,t.aD(u,e,a,l),f.toUnwrapped(),r)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&ni(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),l,c,a),0!==r.paint.get("text-opacity").constantOr(1)&&ni(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),l,c,a),n.map.showCollisionBoxes&&(Zr(e,n,r,i,!0),Zr(e,n,r,i,!1))}(e,n,r,i,this.style.placement.variableOffsets,o):t.cc(r)?function(e,n,r,i,o){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=o,a=r.paint.get("circle-opacity"),l=r.paint.get("circle-stroke-width"),c=r.paint.get("circle-stroke-opacity"),u=!r.layout.get("circle-sort-key").isConstant();if(0===a.constantOr(1)&&(0===l.constantOr(1)||0===c.constantOr(1)))return;const h=e.context,d=h.gl,p=e.transform,f=e.getDepthModeForSublayer(0,Vt.ReadOnly),m=$t.disabled,g=e.colorModeForRenderPass(),y=[],v=p.getCircleRadiusCorrection();for(let _=0;_<i.length;_++){const o=i[_],a=n.getTile(o),l=a.getBucket(r);if(!l)continue;const c=r.paint.get("circle-translate"),h=r.paint.get("circle-translate-anchor"),d=t.aD(p,a,c,h),f=l.programConfigurations.get(r.id),m=e.useProgram("circle",f),g=l.layoutVertexBuffer,b=l.indexBuffer,w=e.style.map.terrain&&e.style.map.terrain.getTerrainData(o),x={programConfiguration:f,program:m,layoutVertexBuffer:g,indexBuffer:b,uniformValues:Nn(e,a,r,d,v),terrainData:w,projectionData:p.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!s,applyTerrainMatrix:!0})};if(u){const e=l.segments.get();for(const n of e)y.push({segments:new t.aM([n]),sortKey:n.sortKey,state:x})}else y.push({segments:l.segments,sortKey:0,state:x})}u&&y.sort((e,t)=>e.sortKey-t.sortKey);for(const t of y){const{programConfiguration:n,program:i,layoutVertexBuffer:o,indexBuffer:s,uniformValues:a,terrainData:l,projectionData:c}=t.state;i.draw(h,d.TRIANGLES,f,m,g,Bt.backCCW,a,l,c,r.id,o,s,t.segments,r.paint,e.transform.zoom,n)}}(e,n,r,i,o):t.cd(r)?function(e,n,r,i,o){if(0===r.paint.get("heatmap-opacity"))return;const s=e.context,{isRenderingToTexture:a,isRenderingGlobe:l}=o;if(e.style.map.terrain){for(const t of i){const i=n.getTile(t);n.hasRenderableParent(t)||("offscreen"===e.renderPass?ii(e,i,r,t,l):"translucent"===e.renderPass&&oi(e,r,t,a,l))}s.viewport.set([0,0,e.width,e.height])}else"offscreen"===e.renderPass?function(e,n,r,i){const o=e.context,s=o.gl,a=e.transform,l=$t.disabled,c=new Ut([s.ONE,s.ONE],t.bf.transparent,[!0,!0,!0,!0]);(function(e,n,r){const i=e.gl;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,n.width/4,n.height/4]);let o=r.heatmapFbos.get(t.c2);o?(i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),e.bindFramebuffer.set(o.framebuffer)):(o=si(e,n.width/4,n.height/4),r.heatmapFbos.set(t.c2,o))})(o,e,r),o.clear({color:t.bf.transparent});for(let t=0;t<i.length;t++){const u=i[t];if(n.hasRenderableParent(u))continue;const h=n.getTile(u),d=h.getBucket(r);if(!d)continue;const p=d.programConfigurations.get(r.id),f=e.useProgram("heatmap",p),m=a.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),g=a.getCircleRadiusCorrection();f.draw(o,s.TRIANGLES,Vt.disabled,l,c,Bt.backCCW,jn(h,a.zoom,r.paint.get("heatmap-intensity"),g),null,m,r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,a.zoom,p)}o.viewport.set([0,0,e.width,e.height])}(e,n,r,i):"translucent"===e.renderPass&&function(e,n){const r=e.context,i=r.gl;r.setColorMode(e.colorModeForRenderPass());const o=n.heatmapFbos.get(t.c2);o&&(r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1),ai(r,n).bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Vt.disabled,$t.disabled,e.colorModeForRenderPass(),Bt.disabled,Bn(e,n,0,1),null,null,n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom))}(e,r)}(e,n,r,i,o):t.ce(r)?function(e,n,r,i,o){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=o,a=r.paint.get("line-opacity"),l=r.paint.get("line-width");if(0===a.constantOr(1)||0===l.constantOr(1))return;const c=e.getDepthModeForSublayer(0,Vt.ReadOnly),u=e.colorModeForRenderPass(),h=r.paint.get("line-dasharray"),d=r.paint.get("line-pattern"),p=d.constantOr(1),f=r.paint.get("line-gradient"),m=r.getCrossfadeParameters(),g=p?"linePattern":h?"lineSDF":f?"lineGradient":"line",y=e.context,v=y.gl,_=e.transform;let b=!0;for(const w of i){const i=n.getTile(w);if(p&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;const a=o.programConfigurations.get(r.id),l=e.context.program.get(),x=e.useProgram(g,a),S=b||x.program!==l,E=e.style.map.terrain&&e.style.map.terrain.getTerrainData(w),T=d.constantOr(null);if(T&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[T.to.toString()],n=e.patternPositions[T.from.toString()];t&&n&&a.setConstantPatternPositions(t,n)}const M=_.getProjectionData({overscaledTileID:w,applyGlobeMatrix:!s,applyTerrainMatrix:!0}),A=_.getPixelScale(),k=p?Wn(e,i,r,A,m):h?Kn(e,i,r,A,h,m):f?qn(e,i,r,A,o.lineClipsArray.length):Gn(e,i,r,A);if(p)y.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),a.updatePaintBuffers(m);else if(h&&(S||e.lineAtlas.dirty))y.activeTexture.set(v.TEXTURE0),e.lineAtlas.bind(y);else if(f){const i=o.gradients[r.id];let s=i.texture;if(r.gradientVersion!==i.version){let a=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=w.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-w.canonical.z):1;a=t.ah(t.c3(o.maxLineLength/t.$*1024*i),256,y.maxTextureSize)}i.gradient=t.c4({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:a,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new t.T(y,i.gradient,v.RGBA),i.version=r.gradientVersion,s=i.texture}y.activeTexture.set(v.TEXTURE0),s.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}const C=e.stencilModeForClipping(w);x.draw(y,v.TRIANGLES,c,C,u,Bt.disabled,k,E,M,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,e.transform.zoom,a,o.layoutVertexBuffer2),b=!1}}(e,n,r,i,o):t.cf(r)?function(e,n,r,i,o){const s=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const{isRenderingToTexture:l}=o,c=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),h=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===s.constantOr(t.bf.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===h){const t=e.getDepthModeForSublayer(1,"opaque"===e.renderPass?Vt.ReadWrite:Vt.ReadOnly);ci(e,n,r,i,t,c,!1,l)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const t=e.getDepthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Vt.ReadOnly);ci(e,n,r,i,t,c,!0,l)}}(e,n,r,i,o):t.cg(r)?function(e,t,n,r,i){const o=n.paint.get("fill-extrusion-opacity");if(0===o)return;const{isRenderingToTexture:s}=i;if("translucent"===e.renderPass){const i=new Vt(e.context.gl.LEQUAL,Vt.ReadWrite,e.depthRangeFor3D);if(1!==o||n.paint.get("fill-extrusion-pattern").constantOr(1))ui(e,t,n,r,i,$t.disabled,Ut.disabled,s),ui(e,t,n,r,i,e.stencilModeFor3D(),e.colorModeForRenderPass(),s);else{const o=e.colorModeForRenderPass();ui(e,t,n,r,i,$t.disabled,o,s)}}}(e,n,r,i,o):t.ch(r)?function(e,n,r,i,o){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=o,a=e.context,l=e.style.projection.useSubdivision,c=e.getDepthModeForSublayer(0,Vt.ReadOnly),u=e.colorModeForRenderPass();if("offscreen"===e.renderPass)!function(e,n,r,i,o,s,a){const l=e.context,c=l.gl;for(const u of r){const r=n.getTile(u),h=r.dem;if(!h||!h.data)continue;if(!r.needsHillshadePrepare)continue;const d=h.dim,p=h.stride,f=h.getPixels();if(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(p),r.demTexture){const e=r.demTexture;e.update(f,{premultiply:!1}),e.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else r.demTexture=new t.T(l,f,c.RGBA,{premultiply:!1}),r.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);l.activeTexture.set(c.TEXTURE0);let m=r.fbo;if(!m){const e=new t.T(l,{width:d,height:d,data:null},c.RGBA);e.bind(c.LINEAR,c.CLAMP_TO_EDGE),m=r.fbo=l.createFramebuffer(d,d,!0,!1),m.colorAttachment.set(e.texture)}l.bindFramebuffer.set(m.framebuffer),l.viewport.set([0,0,d,d]),e.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,o,s,a,Bt.disabled,Hn(r.tileID,h),null,null,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),r.needsHillshadePrepare=!1}}(e,n,i,r,c,$t.disabled,u),a.viewport.set([0,0,e.width,e.height]);else if("translucent"===e.renderPass)if(l){const[t,o,a]=e.stencilConfigForOverlapTwoPass(i);hi(e,n,r,a,t,c,u,!1,s),hi(e,n,r,a,o,c,u,!0,s)}else{const[t,o]=e.getStencilConfigForOverlapAndUpdateStencilID(i);hi(e,n,r,o,t,c,u,!1,s)}}(e,n,r,i,o):t.ci(r)?function(e,t,n,r,i){if("translucent"!==e.renderPass)return;if(!r.length)return;const{isRenderingToTexture:o}=i,s=e.style.projection.useSubdivision,a=e.getDepthModeForSublayer(0,Vt.ReadOnly),l=e.colorModeForRenderPass();if(s){const[i,s,c]=e.stencilConfigForOverlapTwoPass(r);di(e,t,n,c,i,a,l,!1,o),di(e,t,n,c,s,a,l,!0,o)}else{const[i,s]=e.getStencilConfigForOverlapAndUpdateStencilID(r);di(e,t,n,s,i,a,l,!1,o)}}(e,n,r,i,o):t.cj(r)?function(e,t,n,r,i){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!r.length)return;const{isRenderingToTexture:o}=i,s=t.getSource(),a=e.style.projection.useSubdivision;if(s instanceof K)fi(e,t,n,r,null,!1,!1,s.tileCoords,s.flippedWindingOrder,o);else if(a){const[i,s,a]=e.stencilConfigForOverlapTwoPass(r);fi(e,t,n,a,i,!1,!0,pi,!1,o),fi(e,t,n,a,s,!0,!0,pi,!1,o)}else{const[i,s]=e.getStencilConfigForOverlapAndUpdateStencilID(r);fi(e,t,n,s,i,!1,!0,pi,!1,o)}}(e,n,r,i,o):t.ck(r)?function(e,t,n,r,i){const o=n.paint.get("background-color"),s=n.paint.get("background-opacity");if(0===s)return;const{isRenderingToTexture:a}=i,l=e.context,c=l.gl,u=e.style.projection,h=e.transform,d=h.tileSize,p=n.paint.get("background-pattern");if(e.isPatternMissing(p))return;const f=!p&&1===o.a&&1===s&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==f)return;const m=$t.disabled,g=e.getDepthModeForSublayer(0,"opaque"===f?Vt.ReadWrite:Vt.ReadOnly),y=e.colorModeForRenderPass(),v=e.useProgram(p?"backgroundPattern":"background"),_=r||ve(h,{tileSize:d,terrain:e.style.map.terrain});p&&(l.activeTexture.set(c.TEXTURE0),e.imageManager.bind(e.context));const b=n.getCrossfadeParameters();for(const w of _){const t=h.getProjectionData({overscaledTileID:w,applyGlobeMatrix:!a,applyTerrainMatrix:!0}),r=p?ir(s,e,p,{tileID:w,tileSize:d},b):rr(s,o),i=e.style.map.terrain&&e.style.map.terrain.getTerrainData(w),f=u.getMeshFromTileID(l,w.canonical,!1,!0,"raster");v.draw(l,c.TRIANGLES,g,m,y,Bt.backCCW,r,i,t,n.id,f.vertexBuffer,f.indexBuffer,f.segments)}}(e,0,r,i,o):t.cl(r)&&function(e,t,n,r){const{isRenderingGlobe:i}=r,o=e.context,s=n.implementation,a=e.style.projection,l=e.transform,c=l.getProjectionDataForCustomLayer(i),u={farZ:l.farZ,nearZ:l.nearZ,fov:l.fov*Math.PI/180,modelViewProjectionMatrix:l.modelViewProjectionMatrix,projectionMatrix:l.projectionMatrix,shaderData:{variantName:a.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;\nuniform mat4 u_projection_matrix;\n${a.shaderPreludeCode.vertexSource}`,define:a.shaderDefine},defaultProjectionData:c},h=s.renderingMode?s.renderingMode:"2d";if("offscreen"===e.renderPass){const t=s.prerender;t&&(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),t.call(s,o.gl,u),o.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),o.setStencilMode($t.disabled);const t="3d"===h?e.getDepthModeFor3D():e.getDepthModeForSublayer(0,Vt.ReadOnly);o.setDepthMode(t),s.render(o.gl,u),o.setDirty(),e.setBaseState(),o.bindFramebuffer.set(null)}}(e,0,r,o))}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}useProgram(e,t,n=!1,r=[]){this.cache=this.cache||{};const i=!!this.style.map.terrain,o=this.style.projection,s=n?bt.projectionMercator:o.shaderPreludeCode,a=n?Et:o.shaderDefine,l=e+(t?t.cacheKey:"")+`/${n?Tt:o.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(i?"/terrain":"")+(r?`/${r.join("/")}`:"");return this.cache[l]||(this.cache[l]=new Cn(this.context,bt[e],t,sr[e],this._showOverdrawInspector,i,s,a,r)),this.cache[l]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}function ki(e,t){let n,r=!1,i=null,o=null;const s=()=>{i=null,r&&(e.apply(o,n),i=setTimeout(s,t),r=!1)};return(...e)=>(r=!0,o=this,n=e,i||s(),i)}class Ci{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map(e=>e.split("=")).forEach(e=>{e[0]===this._hashName&&(t=e)}),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(!this._isValidHash(e))return!1;const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,e)},this._removeHash=()=>{const e=this._getCurrentHash();if(0===e.length)return;const t=e.join("/");let n=t;n.split("&").length>0&&(n=n.split("&")[0]),this._hashName&&(n=`${this._hashName}=${t}`);let r=window.location.hash.replace(n,"");r.startsWith("#&")?r=r.slice(0,1)+r.slice(2):"#"===r&&(r="");let i=window.location.href.replace(/(#.+)?$/,r);i=i.replace("&&","&"),window.history.replaceState(window.history.state,null,i)},this._updateHash=ki(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lng*i)/i,s=Math.round(t.lat*i)/i,a=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?`/${o}/${s}/${n}`:`${n}/${s}/${o}`,(a||l)&&(c+="/"+Math.round(10*a)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const e=this._hashName;let t=!1;const n=window.location.hash.slice(1).split("&").map(n=>{const r=n.split("=")[0];return r===e?(t=!0,`${r}=${c}`):n}).filter(e=>e);return t||n.push(`${e}=${c}`),`#${n.join("&")}`}return`#${c}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new t.S(+e[2],+e[1])}catch(e){return!1}const n=+e[0],r=+(e[3]||0),i=+(e[4]||0);return n>=this._map.getMinZoom()&&n<=this._map.getMaxZoom()&&r>=-180&&r<=180&&i>=this._map.getMinPitch()&&i<=this._map.getMaxPitch()}}const Ii={linearity:.3,easing:t.cm(0,0,.3,1)},Pi=t.e({deceleration:2500,maxSpeed:1400},Ii),Oi=t.e({deceleration:20,maxSpeed:1400},Ii),Ri=t.e({deceleration:1e3,maxSpeed:360},Ii),Di=t.e({deceleration:1e3,maxSpeed:90},Ii),Li=t.e({deceleration:1e3,maxSpeed:360},Ii);class Ni{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=s.now();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,roll:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,n.roll+=t.rollDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=zi(n.pan.mag(),r,t.e({},Pi,e||{})),s=n.pan.mult(o.amount/n.pan.mag()),a=this._map.cameraHelper.handlePanInertia(s,this._map.transform);i.center=a.easingCenter,i.offset=a.easingOffset,Fi(i,o)}if(n.zoom){const e=zi(n.zoom,r,Oi);i.zoom=this._map.transform.zoom+e.amount,Fi(i,e)}if(n.bearing){const e=zi(n.bearing,r,Ri);i.bearing=this._map.transform.bearing+t.ah(e.amount,-179,179),Fi(i,e)}if(n.pitch){const e=zi(n.pitch,r,Di);i.pitch=this._map.transform.pitch+e.amount,Fi(i,e)}if(n.roll){const e=zi(n.roll,r,Li);i.roll=this._map.transform.roll+t.ah(e.amount,-179,179),Fi(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),t.e(i,{noMoveStart:!0})}}function Fi(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function zi(e,n,r){const{maxSpeed:i,linearity:o,deceleration:s}=r,a=t.ah(e*o/(n/1e3),-i,i),l=Math.abs(a)/(s*o);return{easing:r.easing,duration:1e3*l,amount:a*(l/2)}}class Ui extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r,i={}){r=r instanceof MouseEvent?r:new MouseEvent(e,r);const o=a.mousePos(n.getCanvas(),r),s=n.unproject(o);super(e,t.e({point:o,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class ji extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,o=a.touchPos(n.getCanvasContainer(),i),s=o.map(e=>n.unproject(e)),l=o.reduce((e,t,n,r)=>e.add(t.div(r.length)),new t.P(0,0));super(e,{points:o,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class Bi extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class Vi{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Bi(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Ui(e.type,this._map,e))}mouseup(e){this._map.fire(new Ui(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Ui(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Ui(e.type,this._map,e))}mouseover(e){this._map.fire(new Ui(e.type,this._map,e))}mouseout(e){this._map.fire(new Ui(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ji(e.type,this._map,e))}touchmove(e){this._map.fire(new ji(e.type,this._map,e))}touchend(e){this._map.fire(new ji(e.type,this._map,e))}touchcancel(e){this._map.fire(new ji(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Ui(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Ui(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $i{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(t.P.convert(e),this._map.terrain)}}class Yi{constructor(e,t){this._map=e,this._tr=new $i(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(a.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=a.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);a.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=o-i+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,i=n;if(this.reset(),a.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.l("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.l(e,{originalEvent:n}))}}function Gi(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class qi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.P(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=Gi(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=Gi(n,t);for(const i in this.touches){const e=r[i];(!e||e.dist(this.touches[i])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Wi{constructor(e){this.singleTap=new qi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class Ki{constructor(e){this._tr=new $i(e),this._zoomIn=new Wi({numTouches:1,numTaps:2}),this._zoomOut=new Wi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n),o=this._tr;return r?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zi{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const t=this._moveFunction(...e);if(t.bearingDelta||t.pitchDelta||t.rollDelta||t.around||t.panDelta)return this._active=!0,t}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(t)?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const n=this._lastPoint;if(!n)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const r=Array.isArray(t)?t[0]:t;return!this._moved&&r.dist(n)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=r,this._move(n,r))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&a.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ji=0,Xi=2,Qi={[Ji]:1,[Xi]:2};class eo{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=a.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const n=Qi[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton)}isValidEndEvent(e){return a.mouseButton(e)===this._eventButton}}class to{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class no{constructor(e=new eo({checkCorrectEvent:()=>!0}),t=new to){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=t}_executeRelevantHandler(e,t,n){return e instanceof MouseEvent?t(e):"undefined"!=typeof TouchEvent&&e instanceof TouchEvent?n(e):void 0}startMove(e){this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.startMove(e),e=>this.oneFingerTouchMoveStateManager.startMove(e))}endMove(e){this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.endMove(e),e=>this.oneFingerTouchMoveStateManager.endMove(e))}isValidStartEvent(e){return this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.isValidStartEvent(e),e=>this.oneFingerTouchMoveStateManager.isValidStartEvent(e))}isValidMoveEvent(e){return this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.isValidMoveEvent(e),e=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(e))}isValidEndEvent(e){return this._executeRelevantHandler(e,e=>this.mouseMoveStateManager.isValidEndEvent(e),e=>this.oneFingerTouchMoveStateManager.isValidEndEvent(e))}}const ro=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=e=>{e.preventDefault()}};class io{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(e,t,n){if(this._active){if(!this._shouldBePrevented(n.length))return e.preventDefault(),this._calculateTransform(e,t,n);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&this._shouldBePrevented(n.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=Gi(r,n),o=new t.P(0,0),s=new t.P(0,0);let a=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(o._add(e),s._add(e.sub(n)),a++,i[t]=e)}if(this._touches=i,this._shouldBePrevented(a)||!s.mag())return;const l=s.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(a),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){if(!this._firstTwoTouches)return;e.preventDefault();const[r,i]=this._firstTwoTouches,o=so(n,t,r),s=so(n,t,i);if(!o||!s)return;const a=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],a,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=so(n,t,r),s=so(n,t,i);o&&s||(this._active&&a.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function so(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function ao(e,t){return Math.log(e/t)/Math.LN2}class lo extends oo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(ao(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ao(this._distance,n),pinchAround:t}}}function co(e,t){return 180*e.angleWith(t)/Math.PI}class uo extends oo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t,n){const r=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:co(this._vector,r),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=co(e,this._startVector);return Math.abs(n)<t}}function ho(e){return Math.abs(e.y)>Math.abs(e.x)}class po extends oo{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,n){super.touchstart(e,t,n),this._currentTouchCount=n.length}_start(e){this._lastPoints=e,ho(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,n){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return ho(e)&&ho(t)&&o}}const fo={panStep:100,bearingStep:15,pitchStep:10};class mo{constructor(e){this._tr=new $i(e);const t=fo;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:s=>{const a=this._tr;s.easeTo({duration:300,easeId:"keyboardHandler",easing:go,zoom:t?Math.round(a.zoom)+t*(e.shiftKey?2:1):a.zoom,bearing:a.bearing+n*this._bearingStep,pitch:a.pitch+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function go(e){return e*(2-e)}const yo=4.000244140625,vo=1/450;class _o{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},this._map=e,this._tr=new $i(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=vo}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=s.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%yo==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=a.mousePos(this._map.getCanvas(),e),r=this._tr;this._aroundPoint=this._aroundCenter?r.transform.locationToScreenPoint(t.S.convert(r.center)):n,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if("number"==typeof this._lastExpectedZoom){const t=e.zoom-this._lastExpectedZoom;"number"==typeof this._startZoom&&(this._startZoom+=t),"number"==typeof this._targetZoom&&(this._targetZoom+=t)}if(0!==this._delta){const n="wheel"===this._type&&Math.abs(this._delta)>yo?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==r&&(r=1/r);const i="number"!=typeof this._targetZoom?e.scale:t.af(this._targetZoom);this._targetZoom=e.getConstrained(e.getCameraLngLat(),t.ak(i*r)).zoom,"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"!=typeof this._targetZoom?e.zoom:this._targetZoom,r=this._startZoom,i=this._easing;let o,a=!1;if("wheel"===this._type&&r&&i){const e=s.now()-this._lastWheelEventTime,l=Math.min((e+5)/200,1),c=i(l);o=t.C.number(r,n,c),l<1?this._frameId||(this._frameId=!0):a=!0}else o=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=o,{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.co;if(this._prevEase){const e=this._prevEase,r=(s.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.cm(o,a,.25,1)}return this._prevEase={start:s.now(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class bo{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class wo{constructor(e){this._tr=new $i(e),this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xo{constructor(){this._tap=new Wi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,t,n){if(!this._swipePoint)if(this._tapTime){const r=t[0],i=e.timeStamp-this._tapTime<500,o=this._tapPoint.dist(r)<30;i&&o?n.length>0&&(this._swipePoint=r,this._swipeTouch=n[0].identifier):this.reset()}else this._tap.touchstart(e,t,n)}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){if(this._tapTime)this._swipePoint&&0===n.length&&this.reset();else{const r=this._tap.touchend(e,t,n);r&&(this._tapTime=e.timeStamp,this._tapPoint=r)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class So{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Eo{constructor(e,t,n,r){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=t,this._mousePitch=n,this._mouseRoll=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class To{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Mo{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=a.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const n=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),r=document.createElement("div");r.className="maplibregl-desktop-message",r.textContent=t,this._container.appendChild(r);const i=document.createElement("div");i.className="maplibregl-mobile-message",i.textContent=n,this._container.appendChild(i),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(a.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,n){this._enabled&&(this._map.fire(new t.l("cooperativegestureprevented",{gestureType:e,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ao=e=>e.zoom||e.drag||e.roll||e.pitch||e.rotate;class ko extends t.l{}function Co(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta||e.rollDelta}class Io{constructor(e,n){this.handleWindowEvent=e=>{this.handleEvent(e,`${e.type}Window`)},this.handleEvent=(e,n)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const r="renderFrame"===e.type?void 0:e,i={needsRenderFrame:!1},o={},s={};for(const{handlerName:u,handler:h,allowed:d}of this._handlers){if(!h.isEnabled())continue;let l;if(this._blockedByActive(s,d,u))h.reset();else if(h[n||e.type]){if(t.cp(e,n||e.type)){const t=a.mousePos(this._map.getCanvas(),e);l=h[n||e.type](e,t)}else if(t.cq(e,n||e.type)){const t=this._getMapTouches(e.touches),r=a.touchPos(this._map.getCanvas(),t);l=h[n||e.type](e,r,t)}else t.cr(n||e.type)||(l=h[n||e.type](e));this.mergeHandlerResult(i,o,l,u,r),l&&l.needsRenderFrame&&this._triggerRenderFrame()}(l||h.isActive())&&(s[u]=h)}const l={};for(const t in this._previousActiveHandlers)s[t]||(l[t]=r);this._previousActiveHandlers=s,(Object.keys(l).length||Co(i))&&(this._changes.push([i,o,l]),this._triggerRenderFrame()),(Object.keys(s).length||Co(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:c}=i;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ni(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,i,o]of this._listeners)a.addEventListener(t,i,t===document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[e,t,n]of this._listeners)a.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const n=this._map,r=n.getCanvasContainer();this._add("mapEvent",new Vi(n,e));const i=n.boxZoom=new Yi(n,e);this._add("boxZoom",i),e.interactive&&e.boxZoom&&i.enable();const o=n.cooperativeGestures=new Mo(n,e.cooperativeGestures);this._add("cooperativeGestures",o),e.cooperativeGestures&&o.enable();const s=new Ki(n),l=new wo(n);n.doubleClickZoom=new bo(l,s),this._add("tapZoom",s),this._add("clickZoom",l),e.interactive&&e.doubleClickZoom&&n.doubleClickZoom.enable();const c=new xo;this._add("tapDragZoom",c);const u=n.touchPitch=new po(n);this._add("touchPitch",u),e.interactive&&e.touchPitch&&n.touchPitch.enable(e.touchPitch);const h=()=>n.project(n.getCenter()),d=function({enable:e,clickTolerance:n,aroundCenter:r=!0,minPixelCenterThreshold:i=100,rotateDegreesPerPixelMoved:o=.8},s){const l=new eo({checkCorrectEvent:e=>0===a.mouseButton(e)&&e.ctrlKey||2===a.mouseButton(e)&&!e.ctrlKey});return new Zi({clickTolerance:n,move:(e,n)=>{const a=s();if(r&&Math.abs(a.y-e.y)>i)return{bearingDelta:t.cn(new t.P(e.x,n.y),n,a)};let l=(n.x-e.x)*o;return r&&n.y<a.y&&(l=-l),{bearingDelta:l}},moveStateManager:l,enable:e,assignEvents:ro})}(e,h),p=function({enable:e,clickTolerance:t,pitchDegreesPerPixelMoved:n=-.5}){const r=new eo({checkCorrectEvent:e=>0===a.mouseButton(e)&&e.ctrlKey||2===a.mouseButton(e)});return new Zi({clickTolerance:t,move:(e,t)=>({pitchDelta:(t.y-e.y)*n}),moveStateManager:r,enable:e,assignEvents:ro})}(e),f=function({enable:e,clickTolerance:t,rollDegreesPerPixelMoved:n=.3},r){const i=new eo({checkCorrectEvent:e=>2===a.mouseButton(e)&&e.ctrlKey});return new Zi({clickTolerance:t,move:(e,t)=>{const i=r();let o=(t.x-e.x)*n;return t.y<i.y&&(o=-o),{rollDelta:o}},moveStateManager:i,enable:e,assignEvents:ro})}(e,h);n.dragRotate=new Eo(e,d,p,f),this._add("mouseRotate",d,["mousePitch"]),this._add("mousePitch",p,["mouseRotate","mouseRoll"]),this._add("mouseRoll",f,["mousePitch"]),e.interactive&&e.dragRotate&&n.dragRotate.enable();const m=function({enable:e,clickTolerance:t}){const n=new eo({checkCorrectEvent:e=>0===a.mouseButton(e)&&!e.ctrlKey});return new Zi({clickTolerance:t,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:n,enable:e,assignEvents:ro})}(e),g=new io(e,n);n.dragPan=new So(r,m,g),this._add("mousePan",m),this._add("touchPan",g,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&n.dragPan.enable(e.dragPan);const y=new uo,v=new lo;n.touchZoomRotate=new To(r,v,y,c),this._add("touchRotate",y,["touchPan","touchZoom"]),this._add("touchZoom",v,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&n.touchZoomRotate.enable(e.touchZoomRotate);const _=n.scrollZoom=new _o(n,()=>this._triggerRenderFrame());this._add("scrollZoom",_,["mousePan"]),e.interactive&&e.scrollZoom&&n.scrollZoom.enable(e.scrollZoom);const b=n.keyboard=new mo(n);this._add("keyboard",b),e.interactive&&e.keyboard&&n.keyboard.enable(),this._add("blockableMapEvent",new Hi(n))}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ao(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}mergeHandlerResult(e,n,r,i,o){if(!r)return;t.e(e,r);const s={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=s),void 0!==r.panDelta&&(n.drag=s),void 0!==r.rollDelta&&(n.roll=s),void 0!==r.pitchDelta&&(n.pitch=s),void 0!==r.bearingDelta&&(n.rotate=s)}_applyChanges(){const e={},n={},r={};for(const[i,o,s]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),i.rollDelta&&(e.rollDelta=(e.rollDelta||0)+i.rollDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.e(n,o),t.e(r,s);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,t,n){const r=this._map,i=r._getTransformForUpdate(),o=r.terrain;if(!(Co(e)||o&&this._terrainMovement))return this._fireEvents(t,n,!0);r._stop(!0);let{panDelta:s,zoomDelta:a,bearingDelta:l,pitchDelta:c,rollDelta:u,around:h,pinchAround:d}=e;void 0!==d&&(h=d),h=h||r.transform.centerPoint,o&&!i.isPointOnMapSurface(h)&&(h=i.centerPoint);const p={panDelta:s,zoomDelta:a,rollDelta:u,pitchDelta:c,bearingDelta:l,around:h};this._map.cameraHelper.useGlobeControls&&!i.isPointOnMapSurface(h)&&(h=i.centerPoint);const f=h.distSqr(i.centerPoint)<.01?i.center:i.screenPointToLocation(s?h.sub(s):h);o?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(p,i),this._terrainMovement||!t.drag&&!t.zoom?t.drag&&this._terrainMovement?i.setCenter(i.screenPointToLocation(i.centerPoint.sub(s))):this._map.cameraHelper.handleMapControlsPan(p,i,f):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(p,i,f))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(p,i),this._map.cameraHelper.handleMapControlsPan(p,i,f)),r._applyUpdatedTransform(i),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)}_fireEvents(e,n,r){const i=Ao(this._eventsInProgress),o=Ao(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const l={};let c;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],c=n[e]||r,l[`${t}end`]=c)}for(const t in l)this._fireEvent(t,l[t]);const u=Ao(this._eventsInProgress),h=(i||o)&&!u;if(h&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const e=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&e.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(e)}if(r&&h){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&s.prefersReducedMotion?(this._map.fire(new t.l("moveend",{originalEvent:c})),n(this._map.getBearing())&&this._map.resetNorth()):(n(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:c})),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.l(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new ko("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Po extends t.E{constructor(e,t,n){super(),this._renderFrameCallback=()=>{const e=Math.min((s.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,this.cameraHelper=t,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,t){e.apply(this.transform),this.transform=e,this.cameraHelper=t}getCenter(){return new t.S(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,t){return this.jumpTo({elevation:e},t),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,n,r){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.e({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,n,r){return this.easeTo(t.e({zoom:e},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,n){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new t.l("movestart",n)).fire(new t.l("move",n)).fire(new t.l("moveend",n))),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,n,r){return this.easeTo(t.e({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.e({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.e({bearing:0,pitch:0,roll:0,duration:1e3},e),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}getRoll(){return this.transform.roll}setRoll(e,t){return this.jumpTo({roll:e},t),this}cameraForBounds(e,t){e=H.convert(e).adjustAntiMeridian();const n=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,t)}_cameraForBoxAndBearing(e,n,r,i){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const e=i.padding;i.padding={top:e,bottom:e,right:e,left:e}}const s=t.e(o,i.padding);i.padding=s;const a=this.transform,l=new H(e,n);return this.cameraHelper.cameraForBoxAndBearing(i,s,l,r,a)}fitBounds(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}fitScreenCoordinates(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(t.P.convert(e)),this.transform.screenPointToLocation(t.P.convert(n)),r,i),i,o)}_fitInternal(e,n,r){return e?(delete(n=t.e(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=this._getTransformForUpdate();let i=!1,o=!1,s=!1;const a=r.zoom;this.cameraHelper.handleJumpToCenterZoom(r,e);const l=r.zoom!==a;return"elevation"in e&&r.elevation!==+e.elevation&&r.setElevation(+e.elevation),"bearing"in e&&r.bearing!==+e.bearing&&(i=!0,r.setBearing(+e.bearing)),"pitch"in e&&r.pitch!==+e.pitch&&(o=!0,r.setPitch(+e.pitch)),"roll"in e&&r.roll!==+e.roll&&(s=!0,r.setRoll(+e.roll)),null==e.padding||r.isPaddingEqual(e.padding)||r.setPadding(e.padding),this._applyUpdatedTransform(r),this.fire(new t.l("movestart",n)).fire(new t.l("move",n)),l&&this.fire(new t.l("zoomstart",n)).fire(new t.l("zoom",n)).fire(new t.l("zoomend",n)),i&&this.fire(new t.l("rotatestart",n)).fire(new t.l("rotate",n)).fire(new t.l("rotateend",n)),o&&this.fire(new t.l("pitchstart",n)).fire(new t.l("pitch",n)).fire(new t.l("pitchend",n)),s&&this.fire(new t.l("rollstart",n)).fire(new t.l("roll",n)).fire(new t.l("rollend",n)),this.fire(new t.l("moveend",n))}calculateCameraOptionsFromTo(e,n,r,i=0){const o=t.a1.fromLngLat(e,n),s=t.a1.fromLngLat(r,i),a=s.x-o.x,l=s.y-o.y,c=s.z-o.z,u=Math.hypot(a,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(a,l),d=t.ak(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(a,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:s.toLngLat(),elevation:i,zoom:d,pitch:f,bearing:p}}calculateCameraOptionsFromCameraLngLatAltRotation(e,t,n,r,i){const o=this.transform.calculateCenterFromCameraLngLatAlt(e,t,n,r);return{center:o.center,elevation:o.elevation,zoom:o.zoom,bearing:n,pitch:r,roll:i}}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.co},e)).animate||!e.essential&&s.prefersReducedMotion)&&(e.duration=0);const r=this._getTransformForUpdate(),i=this.getBearing(),o=r.pitch,a=r.roll,l="bearing"in e?this._normalizeBearing(e.bearing,i):i,c="pitch"in e?+e.pitch:o,u="roll"in e?this._normalizeBearing(e.roll,a):a,h="padding"in e?e.padding:r.padding,d=t.P.convert(e.offset);let p,f;e.around&&(p=t.S.convert(e.around),f=r.locationToScreenPoint(p));const m={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},g=this.cameraHelper.handleEaseTo(r,{bearing:l,pitch:c,roll:u,padding:h,around:p,aroundPoint:f,offsetAsPoint:d,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||i!==l,this._pitching=this._pitching||c!==o,this._rolling=this._rolling||u!==a,this._padding=!r.isPaddingEqual(h),this._zooming=this._zooming||g.isZooming,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,m),this.terrain&&this._prepareElevation(g.elevationCenter),this._ease(t=>{g.easeFunc(t),this.terrain&&!e.freezeElevation&&this._updateElevation(t),this._applyUpdatedTransform(r),this._fireMoveEvents(n)},t=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n,t)},e),this}_prepareEase(e,n,r={}){this._moving=!0,n||r.moving||this.fire(new t.l("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.l("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.l("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.l("pitchstart",e)),this._rolling&&!r.rolling&&this.fire(new t.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(n-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.setElevation(t.C.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const t=e.getCameraLngLat(),n=e.getCameraAltitude(),r=this.terrain?this.terrain.getElevationForLngLatZoom(t,e.zoom):0;if(n<r){const n=this.calculateCameraOptionsFromTo(t,r,e.center,e.elevation);return{pitch:n.pitch,zoom:n.zoom}}return{}}_applyUpdatedTransform(e){const t=[];if(t.push(e=>this._elevateCameraIfInsideTerrain(e)),this.transformCameraUpdate&&t.push(e=>this.transformCameraUpdate(e)),!t.length)return;const n=e.clone();for(const r of t){const e=n.clone(),{center:t,zoom:i,roll:o,pitch:s,bearing:a,elevation:l}=r(e);t&&e.setCenter(t),void 0!==l&&e.setElevation(l),void 0!==i&&e.setZoom(i),void 0!==o&&e.setRoll(o),void 0!==s&&e.setPitch(s),void 0!==a&&e.setBearing(a),n.apply(e)}this.transform.apply(n)}_fireMoveEvents(e){this.fire(new t.l("move",e)),this._zooming&&this.fire(new t.l("zoom",e)),this._rotating&&this.fire(new t.l("rotate",e)),this._pitching&&this.fire(new t.l("pitch",e)),this._rolling&&this.fire(new t.l("roll",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const r=this._zooming,i=this._rotating,o=this._pitching,s=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,r&&this.fire(new t.l("zoomend",e)),i&&this.fire(new t.l("rotateend",e)),o&&this.fire(new t.l("pitchend",e)),s&&this.fire(new t.l("rollend",e)),this.fire(new t.l("moveend",e))}flyTo(e,n){if(!e.essential&&s.prefersReducedMotion){const r=t.Q(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(r,n)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.co},e);const r=this._getTransformForUpdate(),i=r.bearing,o=r.pitch,a=r.roll,l=r.padding,c="bearing"in e?this._normalizeBearing(e.bearing,i):i,u="pitch"in e?+e.pitch:o,h="roll"in e?this._normalizeBearing(e.roll,a):a,d="padding"in e?e.padding:r.padding,p=t.P.convert(e.offset);let f=r.centerPoint.add(p);const m=r.screenPointToLocation(f),g=this.cameraHelper.handleFlyTo(r,{bearing:c,pitch:u,roll:h,padding:d,locationAtOffset:m,offsetAsPoint:p,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let y=e.curve;const v=Math.max(r.width,r.height),_=v/g.scaleOfZoom,b=g.pixelPathLength;"number"==typeof g.scaleOfMinZoom&&(y=Math.sqrt(v/g.scaleOfMinZoom/b*2));const w=y*y;function x(e){const t=(_*_-v*v+(e?-1:1)*w*w*b*b)/(2*(e?_:v)*w*b);return Math.log(Math.sqrt(t*t+1)-t)}function S(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}const T=x(!1);let M=function(e){return E(T)/E(T+y*e)},A=function(e){return v*((E(T)*(S(t=T+y*e)/E(t))-S(T))/w)/b;var t},k=(x(!0)-T)/y;if(Math.abs(b)<2e-6||!isFinite(k)){if(Math.abs(v-_)<1e-6)return this.easeTo(e,n);const t=_<v?-1:1;k=Math.abs(Math.log(_/v))/y,A=()=>0,M=e=>Math.exp(t*y*e)}return e.duration="duration"in e?+e.duration:1e3*k/("screenSpeed"in e?+e.screenSpeed/y:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=i!==c,this._pitching=u!==o,this._rolling=h!==a,this._padding=!r.isPaddingEqual(d),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(g.targetCenter),this._ease(s=>{const m=s*k,y=1/M(m),v=A(m);this._rotating&&r.setBearing(t.C.number(i,c,s)),this._pitching&&r.setPitch(t.C.number(o,u,s)),this._rolling&&r.setRoll(t.C.number(a,h,s)),this._padding&&(r.interpolatePadding(l,d,s),f=r.centerPoint.add(p)),g.easeFunc(s,y,v,f),this.terrain&&!e.freezeElevation&&this._updateElevation(s),this._applyUpdatedTransform(r),this._fireMoveEvents(n)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){var n;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}return e||null===(n=this.handlers)||void 0===n||n.stop(!1),this}_ease(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=s.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=t.aO(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(t.S.convert(e),this.transform.tileZoom):null}}const Oo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ro{constructor(e=Oo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=a.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=a.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.title=n,e.setAttribute("aria-label",n)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(e=>"string"!=typeof e?"":e)):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const r in t){const n=t[r];if(n.used||n.usedForTerrain){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter(e=>String(e).trim()),e.sort((e,t)=>e.length-t.length),e=e.filter((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0});const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=a.sanitize(n),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Do{constructor(e={}){this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=a.create("div","maplibregl-ctrl");const t=a.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){a.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Lo{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const r of n)if(r.id===e)return void(r.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var No=t.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Fo extends t.E{constructor(e){super(),this._lastTilesetChange=s.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];const r={};for(const i of ve(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))r[i.key]=!0,this._renderableTilesKeys.push(i.key),this._tiles[i.key]||(i.terrainRttPosMatrix32f=new Float64Array(16),t.bY(i.terrainRttPosMatrix32f,0,t.$,t.$,0,0,1),this._tiles[i.key]=new ie(i,this.tileSize),this._lastTilesetChange=s.now());for(const t in this._tiles)r[t]||delete this._tiles[t]}freeRtt(e){for(const t in this._tiles){const n=this._tiles[t];(!e||n.tileID.equals(e)||n.tileID.isChildOf(e)||e.isChildOf(n.tileID))&&(n.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,t){return t?this._getTerrainCoordsForTileRanges(e,t):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const n={};for(const r of this._renderableTilesKeys){const i=this._tiles[r].tileID,o=e.clone(),s=t.ba();if(i.canonical.equals(e.canonical))t.bY(s,0,t.$,t.$,0,0,1);else if(i.canonical.isChildOf(e.canonical)){const n=i.canonical.z-e.canonical.z,r=i.canonical.x-(i.canonical.x>>n<<n),o=i.canonical.y-(i.canonical.y>>n<<n),a=t.$>>n;t.bY(s,0,a,a,0,0,1),t.M(s,s,[-r*a,-o*a,0])}else{if(!e.canonical.isChildOf(i.canonical))continue;{const n=e.canonical.z-i.canonical.z,r=e.canonical.x-(e.canonical.x>>n<<n),o=e.canonical.y-(e.canonical.y>>n<<n),a=t.$>>n;t.bY(s,0,t.$,t.$,0,0,1),t.M(s,s,[r*a,o*a,0]),t.N(s,s,[1/2**n,1/2**n,0])}}o.terrainRttPosMatrix32f=new Float32Array(s),n[r]=o}return n}_getTerrainCoordsForTileRanges(e,n){const r={};for(const i of this._renderableTilesKeys){const o=this._tiles[i].tileID;if(!this._isWithinTileRanges(o,n))continue;const s=e.clone(),a=t.ba();if(o.canonical.z===e.canonical.z){const n=e.canonical.x-o.canonical.x,r=e.canonical.y-o.canonical.y;t.bY(a,0,t.$,t.$,0,0,1),t.M(a,a,[n*t.$,r*t.$,0])}else if(o.canonical.z>e.canonical.z){const n=o.canonical.z-e.canonical.z,r=o.canonical.x-(o.canonical.x>>n<<n),i=o.canonical.y-(o.canonical.y>>n<<n),s=e.canonical.x-(o.canonical.x>>n),l=e.canonical.y-(o.canonical.y>>n),c=t.$>>n;t.bY(a,0,c,c,0,0,1),t.M(a,a,[-r*c+s*t.$,-i*c+l*t.$,0])}else{const n=e.canonical.z-o.canonical.z,r=e.canonical.x-(e.canonical.x>>n<<n),i=e.canonical.y-(e.canonical.y>>n<<n),s=(e.canonical.x>>n)-o.canonical.x,l=(e.canonical.y>>n)-o.canonical.y,c=t.$<<n;t.bY(a,0,c,c,0,0,1),t.M(a,a,[r*t.$+s*c,i*t.$+l*c,0])}s.terrainRttPosMatrix32f=new Float32Array(a),r[i]=s}return r}getSourceTile(e,t){const n=this.sourceCache._source;let r=e.overscaledZ-this.deltaZoom;if(r>n.maxzoom&&(r=n.maxzoom),r<n.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(r).key);let i=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!i||!i.dem)&&t)for(;r>=n.minzoom&&(!i||!i.dem);)i=this.sourceCache.getTileByID(e.scaledTo(r--).key);return i}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,t){return t[e.canonical.z]&&e.canonical.x>=t[e.canonical.z].minTileX&&e.canonical.x<=t[e.canonical.z].maxTileX&&e.canonical.y>=t[e.canonical.z].minTileY&&e.canonical.y<=t[e.canonical.z].maxTileY}}class zo{constructor(e,t,n){this._meshCache={},this.painter=e,this.sourceCache=new Fo(t),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,n,r,i=t.$){var o;if(!(n>=0&&n<i&&r>=0&&r<i))return 0;const s=this.getTerrainData(e),a=null===(o=s.tile)||void 0===o?void 0:o.dem;if(!a)return 0;const l=t.cs([],[n/i*t.$,r/i*t.$],s.u_terrain_matrix),c=[l[0]*a.dim,l[1]*a.dim],u=Math.floor(c[0]),h=Math.floor(c[1]),d=c[0]-u,p=c[1]-h;return a.get(u,h)*(1-d)*(1-p)+a.get(u+1,h)*d*(1-p)+a.get(u,h+1)*(1-d)*p+a.get(u+1,h+1)*d*p}getElevationForLngLatZoom(e,n){if(!t.ct(n,e.wrap()))return 0;const{tileID:r,mercatorX:i,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(e,n);return this.getElevation(r,i%t.$,o%t.$,t.$)}getElevation(e,n,r,i=t.$){return this.getDEMElevation(e,n,r,i)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,n=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new t.T(e,n,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new t.T(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.ag([])}const n=this.sourceCache.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const e=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new t.T(e,n.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),n.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const r=n&&n+n.tileID.key+e.key;if(r&&!this._demMatrixCache[r]){const r=this.sourceCache.sourceCache._source.maxzoom;let i=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=r?i=e.canonical.z-r:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>i<<i),s=e.canonical.y-(e.canonical.y>>i<<i),a=t.cu(new Float64Array(16),[1/(t.$<<i),1/(t.$<<i),0]);t.M(a,a,[o*t.$,s*t.$,0]),this._demMatrixCache[e.key]={matrix:a,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(e){const n=this.painter,r=n.width/devicePixelRatio,i=n.height/devicePixelRatio;return!this._fbo||this._fbo.width===r&&this._fbo.height===i||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new t.T(n.context,{width:r,height:i,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new t.T(n.context,{width:r,height:i,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=n.context.createFramebuffer(r,i,!0,!1),this._fbo.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,r,i))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,o=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,o+=4)n[o+0]=255&e,n[o+1]=255&t,n[o+2]=e>>8<<4|t>>8,n[o+3]=0;const r=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),i=new t.T(e,r,e.gl.RGBA,{premultiply:!1});return i.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=i,i}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const n=new Uint8Array(4),r=this.painter.context,i=r.gl,o=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),s=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),a=Math.round(this.painter.height/devicePixelRatio);r.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),i.readPixels(o,a-s-1,1,1,i.RGBA,i.UNSIGNED_BYTE,n),r.bindFramebuffer.set(null);const l=n[0]+(n[2]>>4<<8),c=n[1]+((15&n[2])<<8),u=this.coordsIndex[255-n[3]],h=u&&this.sourceCache.getTileByID(u);if(!h)return null;const d=this._coordsTextureSize,p=(1<<h.tileID.canonical.z)*d;return new t.a1((h.tileID.canonical.x*d+l)/p+h.tileID.wrap,(h.tileID.canonical.y*d+c)/p,this.getElevation(h.tileID,l,c,d))}depthAtPoint(e){const t=new Uint8Array(4),n=this.painter.context,r=n.gl;return n.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),r.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,r.RGBA,r.UNSIGNED_BYTE,t),n.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(e){var n;const r=(null===(n=this.painter.style.projection)||void 0===n?void 0:n.transitionState)>0,i=r&&0===e.canonical.y,o=r&&e.canonical.y===(1<<e.canonical.z)-1,s=`m_${i?"n":""}_${o?"s":""}`;if(this._meshCache[s])return this._meshCache[s];const a=this.painter.context,l=new t.cv,c=new t.aN,u=this.meshSize,h=t.$/u,d=u*u;for(let t=0;t<=u;t++)for(let e=0;e<=u;e++)l.emplaceBack(e*h,t*h,0);for(let t=0;t<d;t+=u+1)for(let e=0;e<u;e++)c.emplaceBack(e+t,u+e+t+1,u+e+t+2),c.emplaceBack(e+t,u+e+t+2,e+t+1);const p=l.length,f=p+(u+1),m=(u+1)*u,g=i?t.bh:0,y=i?0:1,v=o?t.bi:t.$,_=o?0:1;for(let t=0;t<=u;t++)l.emplaceBack(t*h,g,y);for(let t=0;t<=u;t++)l.emplaceBack(t*h,v,_);for(let t=0;t<u;t++)c.emplaceBack(m+t,f+t,f+t+1),c.emplaceBack(m+t,f+t+1,m+t+1),c.emplaceBack(0+t,p+t+1,p+t),c.emplaceBack(0+t,0+t+1,p+t+1);const b=l.length,w=b+2*(u+1);for(const S of[0,1])for(let e=0;e<=u;e++)for(const n of[0,1])l.emplaceBack(S*t.$,e*h,n);for(let t=0;t<2*u;t+=2)c.emplaceBack(b+t,b+t+1,b+t+3),c.emplaceBack(b+t,b+t+3,b+t+2),c.emplaceBack(w+t,w+t+3,w+t+1),c.emplaceBack(w+t,w+t+2,w+t+3);const x=new xt(a.createVertexBuffer(l,No.members),a.createIndexBuffer(c),t.aM.simpleSegment(0,0,l.length,c.length));return this._meshCache[s]=x,x}getMeshFrameDelta(e){return 2*Math.PI*t.bu/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,t){var n;const{tileID:r}=this._getOverscaledTileIDFromLngLatZoom(e,t);return null!==(n=this.getMinMaxElevation(r).minElevation)&&void 0!==n?n:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,n={minElevation:null,maxElevation:null};return t&&t.dem&&(n.minElevation=t.dem.min*this.exaggeration,n.maxElevation=t.dem.max*this.exaggeration),n}_getOverscaledTileIDFromLngLatZoom(e,n){const r=t.a1.fromLngLat(e.wrap()),i=(1<<n)*t.$,o=r.x*i,s=r.y*i,a=Math.floor(o/t.$),l=Math.floor(s/t.$);return{tileID:new t.Z(n,0,n,a,l),mercatorX:o,mercatorY:s}}}class Uo{constructor(e,t,n){this._context=e,this._size=t,this._tileSize=n,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const n=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),r=new t.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return r.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),n.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),n.colorAttachment.set(r.texture),{id:e,fbo:n,texture:r,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(t=>e.id!==t),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(e=>!e.inUse)}}const jo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Bo{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new Uo(e.context,30,t.sourceCache.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(n=>!e._layers[n].isHidden(t)),this._coordsAscending={};for(const n in e.sourceCaches){this._coordsAscending[n]={};const t=e.sourceCaches[n].getVisibleCoordinates(),r=e.sourceCaches[n].getSource(),i=r instanceof K?r.terrainTileRanges:null;for(const e of t){const t=this.terrain.sourceCache.getTerrainCoords(e,i);for(const e in t)this._coordsAscending[n][e]||(this._coordsAscending[n][e]=[]),this._coordsAscending[n][e].push(t[e])}}this._coordsAscendingStr={};for(const n of e._order){const t=e._layers[n],r=t.source;if(jo[t.type]&&!this._coordsAscendingStr[r]){this._coordsAscendingStr[r]={};for(const e in this._coordsAscending[r])this._coordsAscendingStr[r][e]=this._coordsAscending[r][e].map(e=>e.key).sort().join()}}for(const n of this._renderableTiles)for(const e in this._coordsAscendingStr){const t=this._coordsAscendingStr[e][n.tileID.key];t&&t!==n.rttCoords[e]&&(n.rtt=[])}}renderLayer(e,n){if(e.isHidden(this.painter.transform.zoom))return!1;const r=Object.assign(Object.assign({},n),{isRenderingToTexture:!0}),i=e.type,o=this.painter,s=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(jo[i]&&(this._prevType&&jo[this._prevType]||this._stacks.push([]),this._prevType=i,this._stacks[this._stacks.length-1].push(e.id),!s))return!0;if(jo[this._prevType]||jo[i]&&s){this._prevType=i;const e=this._stacks.length-1,n=this._stacks[e]||[];for(const i of this._renderableTiles){if(this.pool.isFull()&&(Ti(this.painter,this.terrain,this._rttTiles,r),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(i),i.rtt[e]){const t=this.pool.getObjectForId(i.rtt[e].id);if(t.stamp===i.rtt[e].stamp){this.pool.useObject(t);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),i.rtt[e]={id:s.id,stamp:s.stamp},o.context.bindFramebuffer.set(s.fbo.framebuffer),o.context.clear({color:t.bf.transparent,stencil:0}),o.currentStencilSource=void 0;for(let e=0;e<n.length;e++){const t=o.style._layers[n[e]],a=t.source?this._coordsAscending[t.source][i.tileID.key]:[i.tileID];o.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),o._renderTileClippingMasks(t,a,!0),o.renderLayer(o,o.style.sourceCaches[t.source],t,a,r),t.source&&(i.rttCoords[t.source]=this._coordsAscendingStr[t.source][i.tileID.key])}}return Ti(this.painter,this.terrain,this._rttTiles,r),this._rttTiles=[],this.pool.freeAllObjects(),jo[i]}return!1}}const Vo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ho=n,$o={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Oo,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Yo={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Go{constructor(e,n,r=!1){this.mousedown=e=>{this.startMove(e,a.mousePos(this.element,e)),a.addEventListener(window,"mousemove",this.mousemove),a.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=e=>{this.move(e,a.mousePos(this.element,e))},this.mouseup=e=>{this._rotatePitchHandler.dragEnd(e),this.offTemp()},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.startMove(e,this._startPos),a.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.addEventListener(window,"touchend",this.touchend))},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.move(e,this._lastPos))},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=n;const i=new no;this._rotatePitchHandler=new Zi({clickTolerance:3,move:(e,i)=>{const o=n.getBoundingClientRect(),s=new t.P((o.bottom-o.top)/2,(o.right-o.left)/2);return{bearingDelta:t.cn(new t.P(e.x,i.y),i,s),pitchDelta:r?-.5*(i.y-e.y):void 0}},moveStateManager:i,enable:!0,assignEvents:()=>{}}),this.map=e,a.addEventListener(n,"mousedown",this.mousedown),a.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(n,"touchcancel",this.reset)}startMove(e,t){this._rotatePitchHandler.dragStart(e,t),a.disableDrag()}move(e,t){const n=this.map,{bearingDelta:r,pitchDelta:i}=this._rotatePitchHandler.dragMove(e,t)||{};r&&n.setBearing(n.getBearing()+r),i&&n.setPitch(n.getPitch()+i)}off(){const e=this.element;a.removeEventListener(e,"mousedown",this.mousedown),a.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend),a.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){a.enableDrag(),a.removeEventListener(window,"mousemove",this.mousemove),a.removeEventListener(window,"mouseup",this.mouseup),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend)}}let qo;function Wo(e,n,r,i=!1){if(i||!r.getCoveringTilesDetailsProvider().allowWorldCopies())return null==e?void 0:e.wrap();const o=new t.S(e.lng,e.lat);if(e=new t.S(e.lng,e.lat),n){const i=new t.S(e.lng-360,e.lat),o=new t.S(e.lng+360,e.lat),s=r.locationToScreenPoint(e).distSqr(n);r.locationToScreenPoint(i).distSqr(n)<s?e=i:r.locationToScreenPoint(o).distSqr(n)<s&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationToScreenPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e.lng!==o.lng&&r.isPointOnMapSurface(r.locationToScreenPoint(e))?e:o}const Ko={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Zo(e,t,n){const r=e.classList;for(const i in Ko)r.remove(`maplibregl-${n}-anchor-${i}`);r.add(`maplibregl-${n}-anchor-${t}`)}class Jo extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()},this._onMapClick=e=>{const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},this._update=e=>{if(!this._map)return;const t=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!t)&&this._map.once("render",this._update),this._lngLat=Wo(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let n="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?n=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(n=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||e&&"moveend"!==e.type||(this._pos=this._pos.round()),a.setTransform(this._element,`${Ko[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${r} ${n}`),s.frameAsync(new AbortController).then(()=>{this._updateOpacity(e&&"moveend"===e.type)}).catch(()=>{})},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.l("dragstart"))),this.fire(new t.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.l("dragend")),this._state="inactive"},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div");const n=a.createNS("http://www.w3.org/2000/svg","svg"),r=41,i=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${r}px`),n.setAttributeNS(null,"width",`${i}px`),n.setAttributeNS(null,"viewBox",`0 0 ${i} ${r}`);const o=a.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const s=a.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=a.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=a.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=a.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=a.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=a.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=a.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=a.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=a.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=a.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=a.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(n),this._offset=t.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()}),Zo(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.S.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.abs(n)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var n,r;const i=null===(n=this._map)||void 0===n?void 0:n.terrain,o=this._map.transform.isLocationOccluded(this._lngLat);if(!i||o){const e=o?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==e&&(this._element.style.opacity=e))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const s=this._map,a=s.terrain.depthAtPoint(this._pos),l=s.terrain.getElevationForLngLatZoom(this._lngLat,s.transform.tileZoom);if(s.transform.lngLatToCameraDepth(this._lngLat,l)-a<.006)return void(this._element.style.opacity=this._opacity);const c=-this._offset.y/s.transform.pixelsPerMeter,u=Math.sin(s.getPitch()*Math.PI/180)*c,h=s.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),d=s.transform.lngLatToCameraDepth(this._lngLat,l+u)-h>.006;(null===(r=this._popup)||void 0===r?void 0:r.isOpen())&&d&&this._popup.remove(),this._element.style.opacity=d?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return(void 0===this._opacity||void 0===e&&void 0===t)&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const Xo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Qo=0,es=!1;const ts={maxWidth:100,unit:"metric"};function ns(e,t,n){const r=n&&n.maxWidth||100,i=e._container.clientHeight/2,o=e._container.clientWidth/2,s=e.unproject([o-r/2,i]),a=e.unproject([o+r/2,i]),l=Math.round(e.project(a).x-e.project(s).x),c=Math.min(r,l,e._container.clientWidth),u=s.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*u;n>5280?rs(t,c,n/5280,e._getUIString("ScaleControl.Miles")):rs(t,c,n,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?rs(t,c,u/1852,e._getUIString("ScaleControl.NauticalMiles")):u>=1e3?rs(t,c,u/1e3,e._getUIString("ScaleControl.Kilometers")):rs(t,c,u,e._getUIString("ScaleControl.Meters"))}function rs(e,t,n,r){const i=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(n);e.style.width=t*(i/n)+"px",e.innerHTML=`${i}&nbsp;${r}`}const is={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},os=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ss(e){if(e){if("number"==typeof e){const n=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(n,n),"top-right":new t.P(-n,n),bottom:new t.P(0,-e),"bottom-left":new t.P(n,-n),"bottom-right":new t.P(-n,-n),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const n=t.P.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return ss(new t.P(0,0))}const as=n;e.AJAXError=t.cz,e.Event=t.l,e.Evented=t.E,e.LngLat=t.S,e.MercatorCoordinate=t.a1,e.Point=t.P,e.addProtocol=t.cA,e.config=t.a,e.removeProtocol=t.cB,e.AttributionControl=Ro,e.BoxZoomHandler=Yi,e.CanvasSource=J,e.CooperativeGesturesHandler=Mo,e.DoubleClickZoomHandler=bo,e.DragPanHandler=So,e.DragRotateHandler=Eo,e.EdgeInsets=At,e.FullscreenControl=class extends t.E{constructor(e={}){super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){a.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=a.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);a.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},e.GeoJSONSource=W,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const n=new t.S(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.e({bearing:i},this.options.fitBoundsOptions),s=H.fromLngLat(n,r);this._map.fitBounds(s,o,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const n=new t.S(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&es)return;this.options.trackUserLocation&&this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=a.create("button","maplibregl-ctrl-geolocate",this._container),a.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Jo({element:this._dotElement}),this._circleElement=a.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Jo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",e=>{const n=(null==e?void 0:e[0])instanceof ResizeObserverEntry;e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||n||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.l("trackuserlocationend")),this.fire(new t.l("userlocationlostfocus")))})}},this.options=t.e({},Xo,e)}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return t._(this,arguments,void 0,function*(e=!1){if(void 0!==qo&&!e)return qo;if(void 0===window.navigator.permissions)return qo=!!window.navigator.geolocation,qo;try{const e=yield window.navigator.permissions.query({name:"geolocation"});qo="denied"!==e.state}catch(e){qo=!!window.navigator.geolocation}return qo})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qo=0,es=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const e=this._map.getBounds(),t=e.getSouthEast(),n=e.getNorthEast(),r=t.distanceTo(n),i=Math.ceil(this._accuracy/(r/this._map._container.clientHeight)*2);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qo--,es=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.l("trackuserlocationstart")),this.fire(new t.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qo++,Qo>1?(e={maximumAge:6e5,timeout:0},es=!0):(e=this.options.positionOptions,es=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},e.GlobeControl=class{constructor(){this._toggleProjection=()=>{var e;const t=null===(e=this._map.getProjection())||void 0===e?void 0:e.type;this._map.setProjection("mercator"!==t&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var e;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),"globe"===(null===(e=this._map.getProjection())||void 0===e?void 0:e.type)?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=a.create("button","maplibregl-ctrl-globe",this._container),a.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){a.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},e.Hash=Ci,e.ImageSource=K,e.KeyboardHandler=mo,e.LngLatBounds=H,e.LogoControl=Do,e.Map=class extends Po{constructor(e){var n,r;t.cw.mark(t.cx.create);const i=Object.assign(Object.assign(Object.assign({},$o),e),{canvasContextAttributes:Object.assign(Object.assign({},$o.canvasContextAttributes),e.canvasContextAttributes)});if(null!=i.minZoom&&null!=i.maxZoom&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=i.minPitch&&null!=i.maxPitch&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=i.minPitch&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=i.maxPitch&&i.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const o=new Dt,s=new zt;if(void 0!==i.minZoom&&o.setMinZoom(i.minZoom),void 0!==i.maxZoom&&o.setMaxZoom(i.maxZoom),void 0!==i.minPitch&&o.setMinPitch(i.minPitch),void 0!==i.maxPitch&&o.setMaxPitch(i.maxPitch),void 0!==i.renderWorldCopies&&o.setRenderWorldCopies(i.renderWorldCopies),super(o,s,{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Lo,this._controls=[],this._mapId=t.a7(),this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new t.l("webglcontextlost",{originalEvent:e}))},this._contextRestored=e=>{this._setupPainter(),this.resize(),this._update(),this.fire(new t.l("webglcontextrestored",{originalEvent:e}))},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},i.canvasContextAttributes),this._trackResize=!0===i.trackResize,this._bearingSnap=i.bearingSnap,this._centerClampedToGround=i.centerClampedToGround,this._refreshExpiredTiles=!0===i.refreshExpiredTiles,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=!0===i.crossSourceCollisions,this._collectResourceTiming=!0===i.collectResourceTiming,this._locale=Object.assign(Object.assign({},Vo),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===i.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=f.addThrottleControl(()=>this.isMoving()),this._requestManager=new m(i.transformRequest),"string"==typeof i.container){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;const t=ki(e=>{this._trackResize&&!this._removed&&(this.resize(e),this.redraw())},50);this._resizeObserver=new ResizeObserver(n=>{e?t(n):e=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Io(this,i),this._hash=i.hash&&new Ci("string"==typeof i.hash&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,elevation:i.elevation,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch,roll:i.roll}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,t.e({},i.fitBoundsOptions,{duration:0}))));const a="string"==typeof i.style||!("globe"===(null===(r=null===(n=i.style)||void 0===n?void 0:n.projection)||void 0===r?void 0:r.type));this.resize(null,a),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new Ro("boolean"==typeof i.attributionControl?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Do,i.logoPosition),this.on("style.load",()=>{if(a||this._resizeTransform(),this.transform.unmodified){const e=t.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(e)}}),this.on("data",e=>{this._update("style"===e.dataType),this.fire(new t.l(`${e.dataType}data`,e))}),this.on("dataloading",e=>{this.fire(new t.l(`${e.dataType}dataloading`,e))}),this.on("dataabort",e=>{this.fire(new t.l("sourcedataabort",e))})}_getMapId(){return this._mapId}setGlobalStateProperty(e,t){return this.style.setGlobalStateProperty(e,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,n,r){return null==r&&this.terrain&&(r=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(e,t,n,r)}resize(e,n=!0){const[r,i]=this._containerDimensions(),o=this._getClampedPixelRatio(r,i);if(this._resizeCanvas(r,i,o),this.painter.resize(r,i,o),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const t=this._getClampedPixelRatio(r,i);this._resizeCanvas(r,i,t),this.painter.resize(r,i,t)}this._resizeTransform(n);const s=!this._moving;return s&&(this.stop(),this.fire(new t.l("movestart",e)).fire(new t.l("move",e))),this.fire(new t.l("resize",e)),s&&this.fire(new t.l("moveend",e)),this}_resizeTransform(e=!0){var t;const[n,r]=this._containerDimensions();this.transform.resize(n,r,e),null===(t=this._requestedCameraState)||void 0===t||t.resize(n,r,e)}_getClampedPixelRatio(e,t){const{0:n,1:r}=this._maxCanvasSize,i=this.getPixelRatio(),o=e*i,s=t*i;return Math.min(o>n?n/o:1,s>r?r/s:1)*i}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(H.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.setMinZoom(e),this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.setMaxZoom(e),this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.setMinPitch(e),this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>180)throw new Error("maxPitch must be less than or equal to 180");if(e>=this.transform.minPitch)return this.transform.setMaxPitch(e),this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.setRenderWorldCopies(e),this._update()}project(e){return this.transform.locationToScreenPoint(t.S.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.screenPointToLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=t.filter(e=>this.getLayer(e)),s=0!==o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];s.length?r||(r=!0,n.call(this,new Ui(e,this,i.originalEvent,{features:s}))):r=!1};return{layers:t,listener:n,delegates:{mousemove:i,mouseout:()=>{r=!1}}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{const o=t.filter(e=>this.getLayer(e));(0!==o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new Ui(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new Ui(e,this,t.originalEvent)))};return{layers:t,listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=t.filter(e=>this.getLayer(e)),i=0!==r.length?this.queryRenderedFeatures(e.point,{layers:r}):[];i.length&&(e.features=i,n.call(this,e),delete e.features)};return{layers:t,listener:n,delegates:{[e]:r}}}}_saveDelegatedListener(e,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(t)}_removeDelegatedListener(e,t,n){if(!this._delegatedListeners||!this._delegatedListeners[e])return;const r=this._delegatedListeners[e];for(let i=0;i<r.length;i++){const e=r[i];if(e.listener===n&&e.layers.length===t.length&&e.layers.every(e=>t.includes(e))){for(const t in e.delegates)this.off(t,e.delegates[t]);return void r.splice(i,1)}}}on(e,t,n){if(void 0===n)return super.on(e,t);const r="string"==typeof t?[t]:t,i=this._createDelegatedListener(e,r,n);this._saveDelegatedListener(e,i);for(const o in i.delegates)this.on(o,i.delegates[o]);return{unsubscribe:()=>{this._removeDelegatedListener(e,r,n)}}}once(e,t,n){if(void 0===n)return super.once(e,t);const r="string"==typeof t?[t]:t,i=this._createDelegatedListener(e,r,n);for(const o in i.delegates){const t=i.delegates[o];i.delegates[o]=(...i)=>{this._removeDelegatedListener(e,r,n),t(...i)}}this._saveDelegatedListener(e,i);for(const o in i.delegates)this.once(o,i.delegates[o]);return this}off(e,t,n){return void 0===n?super.off(e,t):(this._removeDelegatedListener(e,"string"==typeof t?[t]:t,n),this)}queryRenderedFeatures(e,n){if(!this.style)return[];let r;const i=e instanceof t.P||Array.isArray(e),o=i?e:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(i?{}:e)||{},o instanceof t.P||"number"==typeof o[0])r=[t.P.convert(o)];else{const e=t.P.convert(o[0]),n=t.P.convert(o[1]);r=[e,new t.P(n.x,e.y),n,new t.P(e.x,n.y),e]}return this.style.queryRenderedFeatures(r,n,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,n){return!1!==(n=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){var n,r;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(e,t));const i=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new Sn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,i):this.style.loadJSON(e,t,i),this):(null===(r=null===(n=this.style)||void 0===n?void 0:n.projection)||void 0===r||r.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Sn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.transformRequest(e,"Style");t.j(r,new AbortController).then(e=>{this._updateDiff(e.data,n)}).catch(e=>{e&&this.fire(new t.k(e))})}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e,n)&&this._update(!0)}catch(r){t.w(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.k(new Error(`There is no source with ID '${e}'`)))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const n=this.style.sourceCaches[e.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);null===this.terrain&&n.reload();for(const r in this.style._layers){const n=this.style._layers[r];"hillshade"===n.type&&n.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),"color-relief"===n.type&&n.source===e.source&&t.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new zo(this.painter,n,e),this.painter.renderToTexture=new Bo(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=t=>{var n;"style"===t.dataType?this.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),"image"===(null===(n=t.source)||void 0===n?void 0:n.type)?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new t.l("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}setSourceTileLodParams(e,t,n){if(n){const r=this.getSource(n);if(!r)throw new Error(`There is no source with ID "${n}", cannot set LOD parameters`);r.calculateTileZoom=me(Math.max(1,e),Math.max(1,t))}else for(const r in this.style.sourceCaches)this.style.sourceCaches[r].getSource().calculateTileZoom=me(Math.max(1,e),Math.max(1,t));return this._update(!0),this}refreshTiles(e,n){const r=this.style.sourceCaches[e];if(!r)throw new Error(`There is no source cache with ID "${e}", cannot refresh tile`);void 0===n?r.reload(!0):r.refreshTiles(n.map(e=>new t.a4(e.z,e.x,e.y)))}addImage(e,n,r={}){const{pixelRatio:i=1,sdf:o=!1,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h}=r;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||t.b(n))){if(void 0===n.width||void 0===n.height)return this.fire(new t.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:r,height:s,data:d}=n,p=n;return this.style.addImage(e,{data:new t.R({width:r,height:s},new Uint8Array(d)),pixelRatio:i,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:o,version:0,userImage:p}),p.onAdd&&p.onAdd(this,e),this}}{const{width:r,height:d,data:p}=s.getImageData(n);this.style.addImage(e,{data:new t.R({width:r,height:d},p),pixelRatio:i,stretchX:a,stretchY:l,content:c,textFitWidth:u,textFitHeight:h,sdf:o,version:0})}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return this.fire(new t.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof HTMLImageElement||t.b(n)?s.getImageData(n):n,{width:o,height:a,data:l}=i;if(void 0===o||void 0===a)return this.fire(new t.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==r.data.width||a!==r.data.height)return this.fire(new t.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(n instanceof HTMLImageElement||t.b(n));return r.data.replace(l,c),this.style.updateImage(e,r),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.k(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e){return f.getImage(this._requestManager.transformRequest(e,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,r={}){return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,r={}){return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t,n={}){return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,n,e=>{e||this._update(!0)}),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,e=>{e||this._update(!0)}),this}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(e,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(e,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=a.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=a.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const n=this._containerDimensions(),r=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],r);const i=this._controlContainer=a.create("div","maplibregl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{o[e]=a.create("div",`maplibregl-ctrl-${e} `,i)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,t,n){this._canvas.width=Math.floor(n*e),this._canvas.height=Math.floor(n*t),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const e=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",n=>{t={requestedAttributes:e},n&&(t.statusMessage=n.statusMessage,t.type=n.type)},{once:!0});let n=null;if(n=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,e):this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e),!n){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new Ai(n,this.transform),l.testSupport(n)}migrateProjection(e,n){super.migrateProjection(e,n),this.painter.transform=e,this.fire(new t.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){var n,r,i,o,a;const l=this._idleTriggered?this._fadeDuration:0,c=(null===(n=this.style.projection)||void 0===n?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=s.now();this.style.zoomHistory.update(e,n);const r=new t.F(e,{now:n,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(u=!0,this._crossFadingFactor=i),this.style.update(r)}const h=(null===(r=this.style.projection)||void 0===r?void 0:r.transitionState)>0!==c;null===(i=this.style.projection)||void 0===i||i.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState(null===(o=this.style.projection)||void 0===o?void 0:o.transitionState,null===(a=this.style.projection)||void 0===a?void 0:a.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||h)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,l,this._crossSourceCollisions,h),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,showPadding:this.showPadding}),this.fire(new t.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.cw.mark(t.cx.load),this.fire(new t.l("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.l("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,t.cw.mark(t.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),f.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==n?void 0:n.loseContext)&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),a.remove(this._canvasContainer),a.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),t.cw.clearMetrics(),this._removed=!0,this.fire(new t.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,s.frame(this._frameRequest,e=>{t.cw.frame(e),this._frameRequest=null;try{this._render(e)}catch(e){if(!t.cy(e)&&!function(e){return e.message===Gr}(e))throw e}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return Ho}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(e){return this._lazyInitEmptyStyle(),this.style.setProjection(e),this._update(!0)}},e.MapMouseEvent=Ui,e.MapTouchEvent=ji,e.MapWheelEvent=Bi,e.Marker=Jo,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,t)=>{const n=this._map._getUIString(`NavigationControl.${t}`);e.title=n,e.setAttribute("aria-label",n)},this.options=t.e({},Yo,e),this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),a.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),a.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=a.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Go(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const n=a.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},e.Popup=class extends t.E{constructor(e){super(),this._updateOpacity=()=>{void 0!==this.options.locationOccludedOpacity&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new t.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=a.create("div","maplibregl-popup",this._map.getContainer()),this._tip=a.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Wo(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const t=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let n=this.options.anchor;const r=ss(this.options.offset);if(!n){const e=this._container.offsetWidth,i=this._container.offsetHeight;let o;o=t.y+r.bottom.y<i?["top"]:t.y>this._map.transform.height-i?["bottom"]:[],t.x<e/2?o.push("left"):t.x>this._map.transform.width-e/2&&o.push("right"),n=0===o.length?"bottom":o.join("-")}let i=t.add(r[n]);this.options.subpixelPositioning||(i=i.round()),a.setTransform(this._container,`${Ko[n]} translate(${i.x}px,${i.y}px)`),Zo(this._container,n,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=t.e(Object.create(is),e)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.S.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),n=document.createElement("body");let r;for(n.innerHTML=e;r=n.firstChild,r;)t.appendChild(r);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=a.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._container&&this._container.classList.add(e),this}removeClassName(e){return this._container&&this._container.classList.remove(e),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e}_createCloseButton(){this.options.closeButton&&(this._closeButton=a.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(os);e&&e.focus()}},e.RasterDEMTileSource=q,e.RasterTileSource=G,e.ScaleControl=class{constructor(e){this._onMove=()=>{ns(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,ns(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ts),e)}getDefaultPosition(){return"bottom-left"}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},e.ScrollZoomHandler=_o,e.Style=Sn,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=e}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=a.create("button","maplibregl-ctrl-terrain",this._container),a.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){a.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},e.TwoFingersTouchPitchHandler=po,e.TwoFingersTouchRotateHandler=uo,e.TwoFingersTouchZoomHandler=lo,e.TwoFingersTouchZoomRotateHandler=To,e.VectorTileSource=Y,e.VideoSource=Z,e.addSourceType=(e,n)=>t._(void 0,void 0,void 0,function*(){if(Q(e))throw new Error(`A source type called "${e}" already exists.`);((e,t)=>{X[e]=t})(e,n)}),e.clearPrewarmedResources=function(){const e=R;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(I),R=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.createTileMesh=Kt,e.getMaxParallelImageRequests=function(){return t.a.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return re().getRTLTextPluginStatus()},e.getVersion=function(){return as},e.getWorkerCount=function(){return P.workerCount},e.getWorkerUrl=function(){return t.a.WORKER_URL},e.importScriptInWorkers=function(e){return F().broadcast("IS",e)},e.prewarm=function(){L().acquire(I)},e.setMaxParallelImageRequests=function(e){t.a.MAX_PARALLEL_IMAGE_REQUESTS=e},e.setRTLTextPlugin=function(e,t){return re().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){P.workerCount=e},e.setWorkerUrl=function(e){t.a.WORKER_URL=e}}),e}()},16489(e,t,n){"use strict";n.d(t,{A:()=>a});const r=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o};var i=n(13153),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;const a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return o.call(e,t)}))}:i.A},16535(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[q]}function o(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===K}(e)||Array.isArray(e)||!!e[G]||!!(null===(t=e.constructor)||void 0===t?void 0:t[G])||d(e)||p(e))}function s(e,t,n){void 0===n&&(n=!1),0===a(e)?(n?Object.keys:Z)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function a(e){var t=e[q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:d(e)?2:p(e)?3:0}function l(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===a(e)?e.get(t):e[t]}function u(e,t,n){var r=a(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){return V&&e instanceof Map}function p(e){return H&&e instanceof Set}function f(e){return e.o||e.t}function m(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=J(e);delete t[q];for(var n=Z(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),v(e)||i(e)||!o(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&s(e,function(e,t){return g(t,!0)},!0)),e}function y(){r(2)}function v(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function _(e){var t=X[e];return t||r(18,e),t}function b(e,t){X[e]||(X[e]=t)}function w(){return j}function x(e,t){t&&(_("Patches"),e.u=[],e.s=[],e.v=t)}function S(e){E(e),e.p.forEach(M),e.p=null}function E(e){e===j&&(j=e.l)}function T(e){return j={p:[],l:j,h:e,m:!0,_:0}}function M(e){var t=e[q];0===t.i||1===t.i?t.j():t.g=!0}function A(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.O||_("ES5").S(t,e,i),i?(n[q].P&&(S(t),r(4)),o(e)&&(e=k(t,e),t.l||I(t,e)),t.u&&_("Patches").M(n[q].t,e,t.u,t.s)):e=k(t,n,[]),S(t),t.u&&t.v(t.u,t.s),e!==Y?e:void 0}function k(e,t,n){if(v(t))return t;var r=t[q];if(!r)return s(t,function(i,o){return C(e,r,t,i,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return I(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=m(r.k):r.o,o=i,a=!1;3===r.i&&(o=new Set(i),i.clear(),a=!0),s(o,function(t,o){return C(e,r,i,t,o,n,a)}),I(e,i,!1),n&&e.u&&_("Patches").N(r,n,e.u,e.s)}return r.o}function C(e,t,n,r,s,a,c){if(i(s)){var h=k(e,s,a&&t&&3!==t.i&&!l(t.R,r)?a.concat(r):void 0);if(u(n,r,h),!i(h))return;e.m=!1}else c&&n.add(s);if(o(s)&&!v(s)){if(!e.h.D&&e._<1)return;k(e,s),t&&t.A.l||I(e,s)}}function I(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&g(t,n)}function P(e,t){var n=e[q];return(n?f(n):e)[t]}function O(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function R(e){e.P||(e.P=!0,e.l&&R(e.l))}function D(e){e.o||(e.o=m(e.t))}function L(e,t,n){var r=d(t)?_("MapSet").F(t,n):p(t)?_("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:w(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=Q;n&&(i=[r],o=ee);var s=Proxy.revocable(i,o),a=s.revoke,l=s.proxy;return r.k=l,r.j=a,l}(t,n):_("ES5").J(t,n);return(n?n.A:w()).p.push(r),r}function N(e){return i(e)||r(22,e),function e(t){if(!o(t))return t;var n,r=t[q],i=a(t);if(r){if(!r.P&&(r.i<4||!_("ES5").K(r)))return r.t;r.I=!0,n=F(t,i),r.I=!1}else n=F(t,i);return s(n,function(t,i){r&&c(r.t,t)===i||u(n,t,e(i))}),3===i?new Set(n):n}(e)}function F(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return m(e)}function z(){(function(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[q];return Q.get(t,e)},set:function(t){var n=this[q];Q.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][q];if(!i.P)switch(i.i){case 5:r(i)&&R(i);break;case 4:n(i)&&R(i)}}}function n(e){for(var t=e.t,n=e.k,r=Z(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==q){var s=t[o];if(void 0===s&&!l(t,o))return!0;var a=n[o],c=a&&a[q];if(c?c.t!==s:!h(a,s))return!0}}var u=!!t[q];return r.length!==Z(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var o={};b("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=J(n);delete o[q];for(var s=Z(o),a=0;a<s.length;a++){var l=s[a];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:w(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,q,{value:o,writable:!0}),i},S:function(e,n,o){o?i(n)&&n[q].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[q];if(n){var i=n.t,o=n.k,a=n.R,c=n.i;if(4===c)s(o,function(t){t!==q&&(void 0!==i[t]||l(i,t)?a[t]||e(o[t]):(a[t]=!0,R(n)))}),s(i,function(e){void 0!==o[e]||l(o,e)||(a[e]=!1,R(n))});else if(5===c){if(r(n)&&(R(n),a.length=!0),o.length<i.length)for(var u=o.length;u<i.length;u++)a[u]=!1;else for(var h=i.length;h<o.length;h++)a[h]=!0;for(var d=Math.min(o.length,i.length),p=0;p<d;p++)o.hasOwnProperty(p)||(a[p]=!0),void 0===a[p]&&e(o[p])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})})(),function(){function e(e,t){function n(){this.constructor=e}a(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.o||(e.R=new Map,e.o=new Map(e.t))}function n(e){e.o||(e.o=new Set,e.t.forEach(function(t){if(o(t)){var n=L(e.A.h,t,e);e.p.set(t,n),e.o.add(n)}else e.o.add(t)}))}function i(e){e.g&&r(3,JSON.stringify(f(e)))}var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},l=function(){function n(e,t){return this[q]={i:2,l:t,A:t?t.A:w(),P:!1,I:!1,o:void 0,R:void 0,t:e,k:this,C:!1,g:!1},this}e(n,Map);var r=n.prototype;return Object.defineProperty(r,"size",{get:function(){return f(this[q]).size}}),r.has=function(e){return f(this[q]).has(e)},r.set=function(e,n){var r=this[q];return i(r),f(r).has(e)&&f(r).get(e)===n||(t(r),R(r),r.R.set(e,!0),r.o.set(e,n),r.R.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var n=this[q];return i(n),t(n),R(n),n.t.has(e)?n.R.set(e,!1):n.R.delete(e),n.o.delete(e),!0},r.clear=function(){var e=this[q];i(e),f(e).size&&(t(e),R(e),e.R=new Map,s(e.t,function(t){e.R.set(t,!1)}),e.o.clear())},r.forEach=function(e,t){var n=this;f(this[q]).forEach(function(r,i){e.call(t,n.get(i),i,n)})},r.get=function(e){var n=this[q];i(n);var r=f(n).get(e);if(n.I||!o(r))return r;if(r!==n.t.get(e))return r;var s=L(n.A.h,r,n);return t(n),n.o.set(e,s),s},r.keys=function(){return f(this[q]).keys()},r.values=function(){var e,t=this,n=this.keys();return(e={})[W]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,n=this.keys();return(e={})[W]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},r[W]=function(){return this.entries()},n}(),c=function(){function t(e,t){return this[q]={i:3,l:t,A:t?t.A:w(),P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,g:!1,C:!1},this}e(t,Set);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return f(this[q]).size}}),r.has=function(e){var t=this[q];return i(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},r.add=function(e){var t=this[q];return i(t),this.has(e)||(n(t),R(t),t.o.add(e)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[q];return i(t),n(t),R(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},r.clear=function(){var e=this[q];i(e),f(e).size&&(n(e),R(e),e.o.clear())},r.values=function(){var e=this[q];return i(e),n(e),e.o.values()},r.entries=function(){var e=this[q];return i(e),n(e),e.o.entries()},r.keys=function(){return this.values()},r[W]=function(){return this.values()},r.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();b("MapSet",{F:function(e,t){return new l(e,t)},T:function(e,t){return new c(e,t)}})}(),function(){function e(t){if(!o(t))return t;if(Array.isArray(t))return t.map(e);if(d(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(p(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return l(t,G)&&(n[G]=t[G]),n}function t(t){return i(t)?e(t):t}var n="add";b("Patches",{$:function(t,i){return i.forEach(function(i){for(var o=i.path,s=i.op,l=t,u=0;u<o.length-1;u++){var h=a(l),d=o[u];"string"!=typeof d&&"number"!=typeof d&&(d=""+d),0!==h&&1!==h||"__proto__"!==d&&"constructor"!==d||r(24),"function"==typeof l&&"prototype"===d&&r(24),"object"!=typeof(l=c(l,d))&&r(15,o.join("/"))}var p=a(l),f=e(i.value),m=o[o.length-1];switch(s){case"replace":switch(p){case 2:return l.set(m,f);case 3:r(16);default:return l[m]=f}case n:switch(p){case 1:return"-"===m?l.push(f):l.splice(m,0,f);case 2:return l.set(m,f);case 3:return l.add(f);default:return l[m]=f}case"remove":switch(p){case 1:return l.splice(m,1);case 2:return l.delete(m);case 3:return l.delete(i.value);default:return delete l[m]}default:r(17,s)}}),t},N:function(e,r,i,o){switch(e.i){case 0:case 4:case 2:return function(e,r,i,o){var a=e.t,u=e.o;s(e.R,function(e,s){var h=c(a,e),d=c(u,e),p=s?l(a,e)?"replace":n:"remove";if(h!==d||"replace"!==p){var f=r.concat(e);i.push("remove"===p?{op:p,path:f}:{op:p,path:f,value:d}),o.push(p===n?{op:"remove",path:f}:"remove"===p?{op:n,path:f,value:t(h)}:{op:"replace",path:f,value:t(h)})}})}(e,r,i,o);case 5:case 1:return function(e,r,i,o){var s=e.t,a=e.R,l=e.o;if(l.length<s.length){var c=[l,s];s=c[0],l=c[1];var u=[o,i];i=u[0],o=u[1]}for(var h=0;h<s.length;h++)if(a[h]&&l[h]!==s[h]){var d=r.concat([h]);i.push({op:"replace",path:d,value:t(l[h])}),o.push({op:"replace",path:d,value:t(s[h])})}for(var p=s.length;p<l.length;p++){var f=r.concat([p]);i.push({op:n,path:f,value:t(l[p])})}s.length<l.length&&o.push({op:"replace",path:r.concat(["length"]),value:s.length})}(e,r,i,o);case 3:return function(e,t,r,i){var o=e.t,s=e.o,a=0;o.forEach(function(e){if(!s.has(e)){var o=t.concat([a]);r.push({op:"remove",path:o,value:e}),i.unshift({op:n,path:o,value:e})}a++}),a=0,s.forEach(function(e){if(!o.has(e)){var s=t.concat([a]);r.push({op:n,path:s,value:e}),i.unshift({op:"remove",path:s,value:e})}a++})}(e,r,i,o)}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===Y?void 0:t}),r.push({op:"replace",path:[],value:e})}})}()}n.d(t,{Ay:()=>ie,Xu:()=>z});var U,j,B="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),V="undefined"!=typeof Map,H="undefined"!=typeof Set,$="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Y=B?Symbol.for("immer-nothing"):((U={})["immer-nothing"]=!0,U),G=B?Symbol.for("immer-draftable"):"__$immer_draftable",q=B?Symbol.for("immer-state"):"__$immer_state",W="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",K=""+Object.prototype.constructor,Z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,J=Object.getOwnPropertyDescriptors||function(e){var t={};return Z(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},X={},Q={get:function(e,t){if(t===q)return e;var n=f(e);if(!l(n,t))return function(e,t,n){var r,i=O(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!o(r)?r:r===P(e.t,t)?(D(e),e.o[t]=L(e.A.h,r,e)):r},has:function(e,t){return t in f(e)},ownKeys:function(e){return Reflect.ownKeys(f(e))},set:function(e,t,n){var r=O(f(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=P(f(e),t),o=null==i?void 0:i[q];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(h(n,i)&&(void 0!==n||l(e.t,t)))return!0;D(e),R(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==P(e.t,t)||t in e.t?(e.R[t]=!1,D(e),R(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=f(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},ee={};s(Q,function(e,t){ee[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ee.deleteProperty=function(e,t){return ee.set.call(this,e,t,void 0)},ee.set=function(e,t,n){return Q.set.call(this,e[0],t,n,e[0])};var te=function(){function e(e){var t=this;this.O=$,this.D=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var s=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return a.produce(e,function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))})}}var l;if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),o(e)){var c=T(t),u=L(t,e,void 0),h=!0;try{l=n(u),h=!1}finally{h?S(c):E(c)}return"undefined"!=typeof Promise&&l instanceof Promise?l.then(function(e){return x(c,i),A(e,c)},function(e){throw S(c),e}):(x(c,i),A(l,c))}if(!e||"object"!=typeof e){if(void 0===(l=n(e))&&(l=e),l===Y&&(l=void 0),t.D&&g(l,!0),i){var d=[],p=[];_("Patches").M(e,l,d,p),i(d,p)}return l}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var r,i,o=t.produce(e,n,function(e,t){r=e,i=t});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return[e,r,i]}):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){o(e)||r(8),i(e)&&(e=N(e));var t=T(this),n=L(this,e,void 0);return n[q].C=!0,E(t),n},t.finishDraft=function(e,t){var n=(e&&e[q]).A;return x(n,t),A(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!$&&r(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=_("Patches").$;return i(e)?o(e,t):this.produce(e,function(e){return o(e,t)})},e}(),ne=new te,re=ne.produce;ne.produceWithPatches.bind(ne),ne.setAutoFreeze.bind(ne),ne.setUseProxies.bind(ne),ne.applyPatches.bind(ne),ne.createDraft.bind(ne),ne.finishDraft.bind(ne);const ie=re},17044(e,t,n){"use strict";n.d(t,{a:()=>w,c:()=>g,d:()=>s,e:()=>p,f:()=>S,h:()=>b,j:()=>a,k:()=>x,m:()=>E,n:()=>o,p:()=>_,q:()=>v,r:()=>y,s:()=>h,t:()=>d,u:()=>m,v:()=>f,w:()=>u,x:()=>i});var r=n(12375);function i(e){const t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(n){}try{delete t[e]}catch(n){}})}function o(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function s(){return Date.now()}function a(e,t){void 0===t&&(t="x");const n=(0,r.a)();let i,o,s;const a=function(e){const t=(0,r.a)();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(o=a.transform||a.webkitTransform,o.split(",").length>6&&(o=o.split(", ").map(e=>e.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix("none"===o?"":o)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),"x"===t&&(o=n.WebKitCSSMatrix?s.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(o=n.WebKitCSSMatrix?s.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),o||0}function l(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function c(e){return"undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function u(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const r=n<0||arguments.length<=n?void 0:arguments[n];if(void 0!==r&&null!==r&&!c(r)){const n=Object.keys(Object(r)).filter(e=>t.indexOf(e)<0);for(let t=0,i=n.length;t<i;t+=1){const i=n[t],o=Object.getOwnPropertyDescriptor(r,i);void 0!==o&&o.enumerable&&(l(e[i])&&l(r[i])?r[i].__swiper__?e[i]=r[i]:u(e[i],r[i]):!l(e[i])&&l(r[i])?(e[i]={},r[i].__swiper__?e[i]=r[i]:u(e[i],r[i])):e[i]=r[i])}}}return e}function h(e,t,n){e.style.setProperty(t,n)}function d(e){let{swiper:t,targetPosition:n,side:i}=e;const o=(0,r.a)(),s=-t.translate;let a,l=null;const c=t.params.speed;t.wrapperEl.style.scrollSnapType="none",o.cancelAnimationFrame(t.cssModeFrameID);const u=n>s?"next":"prev",h=(e,t)=>"next"===u&&e>=t||"prev"===u&&e<=t,d=()=>{a=(new Date).getTime(),null===l&&(l=a);const e=Math.max(Math.min((a-l)/c,1),0),r=.5-Math.cos(e*Math.PI)/2;let u=s+r*(n-s);if(h(u,n)&&(u=n),t.wrapperEl.scrollTo({[i]:u}),h(u,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[i]:u})}),void o.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=o.requestAnimationFrame(d)};d()}function p(e,t){void 0===t&&(t="");const n=[...e.children];return e instanceof HTMLSlotElement&&n.push(...e.assignedElements()),t?n.filter(e=>e.matches(t)):n}function f(e,t){const n=t.contains(e);if(!n&&t instanceof HTMLSlotElement){return[...t.assignedElements()].includes(e)}return n}function m(e){try{return void console.warn(e)}catch(t){}}function g(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter(e=>!!e.trim())}(t)),n}function y(e,t){const n=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}function v(e,t){const n=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}function _(e,t){return(0,r.a)().getComputedStyle(e,null).getPropertyValue(t)}function b(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function w(e,t){const n=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&n.push(r):n.push(r),r=r.parentElement;return n}function x(e,t){t&&e.addEventListener("transitionend",function n(r){r.target===e&&(t.call(e,r),e.removeEventListener("transitionend",n))})}function S(e,t,n){const i=(0,r.a)();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function E(e){return(Array.isArray(e)?e:[e]).filter(e=>!!e)}},17437(e,t,n){"use strict";n.d(t,{AH:()=>u,i7:()=>h,mL:()=>c});var r=n(24684),i=n(96540),o=n(30041),s=n(71287),a=n(43741),l=(n(55655),n(4146),function(e,t){var n=arguments;if(null==t||!r.h.call(t,"css"))return i.createElement.apply(void 0,n);var o=n.length,s=new Array(o);s[0]=r.E,s[1]=(0,r.c)(e,t);for(var a=2;a<o;a++)s[a]=n[a];return i.createElement.apply(null,s)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(l||(l={}));var c=(0,r.w)(function(e,t){var n=e.styles,l=(0,a.J)([n],void 0,i.useContext(r.T)),c=i.useRef();return(0,s.i)(function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}},[t]),(0,s.i)(function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}},[t,l.name]),null});function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.J)(t)}function h(){var e=u.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},17726(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(96540);function i(e){return parseInt(r.version,10)>=19?e?.props?.ref||null:e?.ref||null}},17786(e,t,n){"use strict";n.d(t,{XW:()=>i,xg:()=>o});var r=n(64208);function i(e){return new s(t=>{t(e)})}function o(e){return new s((t,n)=>{n(e)})}class s{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new s((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(i){r(i)}else n(t)},e=>{if(t)try{n(t(e))}catch(i){r(i)}else r(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new s((t,n)=>{let r,i;return this.then(t=>{i=!1,r=t,e&&e()},t=>{i=!0,r=t,e&&e()}).then(()=>{i?n(r):t(r)})})}_executeHandlers(){if(0===this._state)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){const t=(e,t)=>{0===this._state&&((0,r.Qg)(t)?t.then(n,i):(this._state=e,this._value=t,this._executeHandlers()))},n=e=>{t(1,e)},i=e=>{t(2,e)};try{e(n,i)}catch(o){i(o)}}}},17965(e,t,n){"use strict";var r=n(16426),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,o,s,a,l,c,u=!1;t||(t={}),n=t.debug||!1;try{if(s=r(),a=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=i[t.format]||i.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))}),document.body.appendChild(c),a.selectNodeContents(c),l.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(h){n&&console.error("unable to copy using execCommand: ",h),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(h){n&&console.error("unable to copy using clipboardData: ",h),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(a):l.removeAllRanges()),c&&document.body.removeChild(c),s()}return u}},18056(e,t,n){"use strict";n.d(t,{Q:()=>o,d:()=>i});var r=n(14910);function i(e,t,n){r.j.document&&r.j.addEventListener(e,t,n)}function o(e,t,n){r.j.document&&r.j.removeEventListener(e,t,n)}},18139(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(49649);function i(e){const{variants:t,...n}=e,i={variants:t,style:(0,r.tT)(n),isProcessed:!0};return i.style===n||t&&t.forEach(e=>{"function"!==typeof e.style&&(e.style=(0,r.tT)(e.style))}),i}},18562(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(43407),i=n(38823);const o=function(e,t,n){var o=(e=e||{}).random||(e.rng||r.A)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return(0,i.A)(o)}},18843(e,t,n){"use strict";n.d(t,{Ay:()=>kt});var r=n(31635),i=Object.prototype.hasOwnProperty;function o(e){return"boolean"===typeof e}function s(e,t){for(var n=e.length-1;n>=0;n--)!0===t(e[n])&&e.splice(n,1)}function a(e){throw new Error("Unhandled case for value: '".concat(e,"'"))}var l=/\s+/,c=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,n=this.getClass(),r=n?n.split(l):[],i=e.split(l);t=i.shift();)-1===r.indexOf(t)&&r.push(t);return this.getAttrs().class=r.join(" "),this},e.prototype.removeClass=function(e){for(var t,n=this.getClass(),r=n?n.split(l):[],i=e.split(l);r.length&&(t=i.shift());){var o=r.indexOf(t);-1!==o&&r.splice(o,1)}return this.getAttrs().class=r.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){var e=this.getAttrs(),t=[];for(var n in e)i.call(e,n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")},e}();function u(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t}function h(e,t,n){var r=t/2,i=Math.ceil(r),o=-1*Math.floor(r),s="";return o<0&&(s=e.substr(o)),e.substr(0,i)+n+s}var d=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new c({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},n=this.createCssClass(e);return n&&(t.class=n),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var n=[t],r=e.getCssClassSuffixes(),i=0,o=r.length;i<o;i++)n.push(t+"-"+r[i]);return n.join(" ")}return""},e.prototype.processAnchorText=function(e){return e=this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t.length)return e;var n=t.length,r=t.location;return"smart"===r?function(e,t,n){var r,i;if(null==n?(n="&hellip;",i=3,r=8):(i=n.length,r=n.length),e.length<=t)return e;var o=t-i,s=function(e){var t={},n=e,r=n.match(/^([a-z]+):\/\//i);return r&&(t.scheme=r[1],n=n.slice(r[0].length)),(r=n.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=r[1],n=n.slice(r[0].length)),(r=n.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=r[1],n=n.slice(r[0].length)),(r=n.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=r[1],n=n.slice(r[0].length)),(r=n.match(/^#(.*?)$/i))&&(t.fragment=r[1]),t}(e);if(s.query){var a=s.query.match(/^(.*?)(?=(\?|#))(.*?)$/i);a&&(s.query=s.query.substr(0,a[1].length),e=u(s))}if(e.length<=t)return e;if(s.host&&(s.host=s.host.replace(/^www\./,""),e=u(s)),e.length<=t)return e;var l="";if(s.host&&(l+=s.host),l.length>=o)return s.host.length===t?(s.host.substr(0,t-i)+n).substr(0,o+r):h(l,o,n).substr(0,o+r);var c="";if(s.path&&(c+="/"+s.path),s.query&&(c+="?"+s.query),c){if((l+c).length>=o)return(l+c).length==t?(l+c).substr(0,t):(l+h(c,o-l.length,n)).substr(0,o+r);l+=c}if(s.fragment){var d="#"+s.fragment;if((l+d).length>=o)return(l+d).length==t?(l+d).substr(0,t):(l+h(d,o-l.length,n)).substr(0,o+r);l+=d}if(s.scheme&&s.host){var p=s.scheme+"://";if((l+p).length<o)return(p+l).substr(0,t)}if(l.length<=t)return l;var f="";return o>0&&(f=l.substr(-1*Math.floor(o/2))),(l.substr(0,Math.ceil(o/2))+n+f).substr(0,o+r)}(e,n):"middle"===r?function(e,t,n){if(e.length<=t)return e;var r,i;null==n?(n="&hellip;",r=8,i=3):(r=n.length,i=n.length);var o=t-i,s="";return o>0&&(s=e.substr(-1*Math.floor(o/2))),(e.substr(0,Math.ceil(o/2))+n+s).substr(0,o+r)}(e,n):function(e,t,n){return function(e,t,n){var r;return e.length>t&&(null==n?(n="&hellip;",r=3):r=n.length,e=e.substring(0,t-r)+n),e}(e,t,n)}(e,n)},e}(),p=function(){function e(e){this._=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.type]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}();function f(e){return e>=65&&e<=90||e>=97&&e<=122}function m(e){return e>=48&&e<=57}function g(e){return 34==e||39==e}function y(e){return e<8232?e<160?e>=9&&e<=13||32==e:e<5760?160==e:5760==e||e>=8192&&e<=8202:e<8287?e>=8232&&e<=8233||8239==e:e<12288?8287==e:12288==e||65279==e}function v(e){return e<4800?e<2949?e<2451?e<1425?e<768?e<192?e<169?e<65?e>=48&&e<=57:e>=65&&e<=90||e>=97&&e<=122:e<181?e>=169&&e<=170||174==e:181==e||186==e:e<710?e<216?e>=192&&e<=214:e>=216&&e<=246||e>=248&&e<=705:e<748?e>=710&&e<=721||e>=736&&e<=740:748==e||750==e:e<910?e<895?e<886?e>=768&&e<=884:e>=886&&e<=887||e>=890&&e<=893:e<904?895==e||902==e:e>=904&&e<=906||908==e:e<1155?e<931?e>=910&&e<=929:e>=931&&e<=1013||e>=1015&&e<=1153:e<1369?e>=1155&&e<=1327||e>=1329&&e<=1366:1369==e||e>=1377&&e<=1415:e<1808?e<1552?e<1476?e<1471?e>=1425&&e<=1469:1471==e||e>=1473&&e<=1474:e<1488?e>=1476&&e<=1477||1479==e:e>=1488&&e<=1514||e>=1520&&e<=1522:e<1749?e<1568?e>=1552&&e<=1562:e>=1568&&e<=1641||e>=1646&&e<=1747:e<1770?e>=1749&&e<=1756||e>=1759&&e<=1768:e>=1770&&e<=1788||1791==e:e<2230?e<2042?e<1869?e>=1808&&e<=1866:e>=1869&&e<=1969||e>=1984&&e<=2037:e<2112?2042==e||e>=2048&&e<=2093:e>=2112&&e<=2139||e>=2208&&e<=2228:e<2406?e<2260?e>=2230&&e<=2237:e>=2260&&e<=2273||e>=2275&&e<=2403:e<2437?e>=2406&&e<=2415||e>=2417&&e<=2435:e>=2437&&e<=2444||e>=2447&&e<=2448:e<2693?e<2579?e<2519?e<2486?e<2474?e>=2451&&e<=2472:e>=2474&&e<=2480||2482==e:e<2503?e>=2486&&e<=2489||e>=2492&&e<=2500:e>=2503&&e<=2504||e>=2507&&e<=2510:e<2534?e<2524?2519==e:e>=2524&&e<=2525||e>=2527&&e<=2531:e<2565?e>=2534&&e<=2545||e>=2561&&e<=2563:e>=2565&&e<=2570||e>=2575&&e<=2576:e<2631?e<2613?e<2602?e>=2579&&e<=2600:e>=2602&&e<=2608||e>=2610&&e<=2611:e<2620?e>=2613&&e<=2614||e>=2616&&e<=2617:2620==e||e>=2622&&e<=2626:e<2649?e<2635?e>=2631&&e<=2632:e>=2635&&e<=2637||2641==e:e<2662?e>=2649&&e<=2652||2654==e:e>=2662&&e<=2677||e>=2689&&e<=2691:e<2821?e<2759?e<2730?e<2703?e>=2693&&e<=2701:e>=2703&&e<=2705||e>=2707&&e<=2728:e<2741?e>=2730&&e<=2736||e>=2738&&e<=2739:e>=2741&&e<=2745||e>=2748&&e<=2757:e<2784?e<2763?e>=2759&&e<=2761:e>=2763&&e<=2765||2768==e:e<2809?e>=2784&&e<=2787||e>=2790&&e<=2799:2809==e||e>=2817&&e<=2819:e<2887?e<2858?e<2831?e>=2821&&e<=2828:e>=2831&&e<=2832||e>=2835&&e<=2856:e<2869?e>=2858&&e<=2864||e>=2866&&e<=2867:e>=2869&&e<=2873||e>=2876&&e<=2884:e<2911?e<2902?e>=2887&&e<=2888||e>=2891&&e<=2893:e>=2902&&e<=2903||e>=2908&&e<=2909:e<2929?e>=2911&&e<=2915||e>=2918&&e<=2927:2929==e||e>=2946&&e<=2947:e<3517?e<3205?e<3046?e<2984?e<2969?e<2958?e>=2949&&e<=2954:e>=2958&&e<=2960||e>=2962&&e<=2965:e<2974?e>=2969&&e<=2970||2972==e:e>=2974&&e<=2975||e>=2979&&e<=2980:e<3014?e<2990?e>=2984&&e<=2986:e>=2990&&e<=3001||e>=3006&&e<=3010:e<3024?e>=3014&&e<=3016||e>=3018&&e<=3021:3024==e||3031==e:e<3142?e<3086?e<3072?e>=3046&&e<=3055:e>=3072&&e<=3075||e>=3077&&e<=3084:e<3114?e>=3086&&e<=3088||e>=3090&&e<=3112:e>=3114&&e<=3129||e>=3133&&e<=3140:e<3160?e<3146?e>=3142&&e<=3144:e>=3146&&e<=3149||e>=3157&&e<=3158:e<3174?e>=3160&&e<=3162||e>=3168&&e<=3171:e>=3174&&e<=3183||e>=3200&&e<=3203:e<3333?e<3274?e<3242?e<3214?e>=3205&&e<=3212:e>=3214&&e<=3216||e>=3218&&e<=3240:e<3260?e>=3242&&e<=3251||e>=3253&&e<=3257:e>=3260&&e<=3268||e>=3270&&e<=3272:e<3296?e<3285?e>=3274&&e<=3277:e>=3285&&e<=3286||3294==e:e<3313?e>=3296&&e<=3299||e>=3302&&e<=3311:e>=3313&&e<=3314||e>=3329&&e<=3331:e<3423?e<3389?e<3342?e>=3333&&e<=3340:e>=3342&&e<=3344||e>=3346&&e<=3386:e<3402?e>=3389&&e<=3396||e>=3398&&e<=3400:e>=3402&&e<=3406||e>=3412&&e<=3415:e<3458?e<3430?e>=3423&&e<=3427:e>=3430&&e<=3439||e>=3450&&e<=3455:e<3482?e>=3458&&e<=3459||e>=3461&&e<=3478:e>=3482&&e<=3505||e>=3507&&e<=3515:e<3804?e<3722?e<3570?e<3535?e<3520?3517==e:e>=3520&&e<=3526||3530==e:e<3544?e>=3535&&e<=3540||3542==e:e>=3544&&e<=3551||e>=3558&&e<=3567:e<3664?e<3585?e>=3570&&e<=3571:e>=3585&&e<=3642||e>=3648&&e<=3662:e<3716?e>=3664&&e<=3673||e>=3713&&e<=3714:3716==e||e>=3719&&e<=3720:e<3754?e<3737?e<3725?3722==e:3725==e||e>=3732&&e<=3735:e<3749?e>=3737&&e<=3743||e>=3745&&e<=3747:3749==e||3751==e:e<3776?e<3757?e>=3754&&e<=3755:e>=3757&&e<=3769||e>=3771&&e<=3773:e<3784?e>=3776&&e<=3780||3782==e:e>=3784&&e<=3789||e>=3792&&e<=3801:e<4176?e<3902?e<3872?e<3840?e>=3804&&e<=3807:3840==e||e>=3864&&e<=3865:e<3895?e>=3872&&e<=3881||3893==e:3895==e||3897==e:e<3974?e<3913?e>=3902&&e<=3911:e>=3913&&e<=3948||e>=3953&&e<=3972:e<4038?e>=3974&&e<=3991||e>=3993&&e<=4028:4038==e||e>=4096&&e<=4169:e<4688?e<4301?e<4256?e>=4176&&e<=4253:e>=4256&&e<=4293||4295==e:e<4348?4301==e||e>=4304&&e<=4346:e>=4348&&e<=4680||e>=4682&&e<=4685:e<4746?e<4698?e>=4688&&e<=4694||4696==e:e>=4698&&e<=4701||e>=4704&&e<=4744:e<4786?e>=4746&&e<=4749||e>=4752&&e<=4784:e>=4786&&e<=4789||e>=4792&&e<=4798:e<11035?e<7416?e<6176?e<5873?e<4992?e<4824?e<4802?4800==e:e>=4802&&e<=4805||e>=4808&&e<=4822:e<4888?e>=4824&&e<=4880||e>=4882&&e<=4885:e>=4888&&e<=4954||e>=4957&&e<=4959:e<5121?e<5024?e>=4992&&e<=5007:e>=5024&&e<=5109||e>=5112&&e<=5117:e<5761?e>=5121&&e<=5740||e>=5743&&e<=5759:e>=5761&&e<=5786||e>=5792&&e<=5866:e<6002?e<5920?e<5888?e>=5873&&e<=5880:e>=5888&&e<=5900||e>=5902&&e<=5908:e<5984?e>=5920&&e<=5940||e>=5952&&e<=5971:e>=5984&&e<=5996||e>=5998&&e<=6e3:e<6108?e<6016?e>=6002&&e<=6003:e>=6016&&e<=6099||6103==e:e<6155?e>=6108&&e<=6109||e>=6112&&e<=6121:e>=6155&&e<=6157||e>=6160&&e<=6169:e<6783?e<6512?e<6400?e<6272?e>=6176&&e<=6263:e>=6272&&e<=6314||e>=6320&&e<=6389:e<6448?e>=6400&&e<=6430||e>=6432&&e<=6443:e>=6448&&e<=6459||e>=6470&&e<=6509:e<6608?e<6528?e>=6512&&e<=6516:e>=6528&&e<=6571||e>=6576&&e<=6601:e<6688?e>=6608&&e<=6617||e>=6656&&e<=6683:e>=6688&&e<=6750||e>=6752&&e<=6780:e<7040?e<6832?e<6800?e>=6783&&e<=6793:e>=6800&&e<=6809||6823==e:e<6992?e>=6832&&e<=6846||e>=6912&&e<=6987:e>=6992&&e<=7001||e>=7019&&e<=7027:e<7245?e<7168?e>=7040&&e<=7155:e>=7168&&e<=7223||e>=7232&&e<=7241:e<7376?e>=7245&&e<=7293||e>=7296&&e<=7304:e>=7376&&e<=7378||e>=7380&&e<=7414:e<8450?e<8130?e<8025?e<7960?e<7424?e>=7416&&e<=7417:e>=7424&&e<=7669||e>=7675&&e<=7957:e<8008?e>=7960&&e<=7965||e>=7968&&e<=8005:e>=8008&&e<=8013||e>=8016&&e<=8023:e<8031?e<8027?8025==e:8027==e||8029==e:e<8118?e>=8031&&e<=8061||e>=8064&&e<=8116:e>=8118&&e<=8124||8126==e:e<8205?e<8150?e<8134?e>=8130&&e<=8132:e>=8134&&e<=8140||e>=8144&&e<=8147:e<8178?e>=8150&&e<=8155||e>=8160&&e<=8172:e>=8178&&e<=8180||e>=8182&&e<=8188:e<8305?e<8252?8205==e:8252==e||8265==e:e<8336?8305==e||8319==e:e>=8336&&e<=8348||e>=8400&&e<=8432:e<8579?e<8486?e<8469?e<8455?8450==e:8455==e||e>=8458&&e<=8467:e<8482?8469==e||e>=8473&&e<=8477:8482==e||8484==e:e<8495?e<8488?8486==e:8488==e||e>=8490&&e<=8493:e<8517?e>=8495&&e<=8505||e>=8508&&e<=8511:e>=8517&&e<=8521||8526==e:e<9410?e<9e3?e<8592?e>=8579&&e<=8580:e>=8592&&e<=8703||e>=8986&&e<=8987:e<9193?9e3==e||9167==e:e>=9193&&e<=9203||e>=9208&&e<=9210:e<9723?e<9654?9410==e||e>=9642&&e<=9643:9654==e||9664==e:e<10548?e>=9723&&e<=9726||e>=9728&&e<=10175:e>=10548&&e<=10549||e>=11013&&e<=11015:e<43259?e<12445?e<11688?e<11520?e<11264?e<11088?e>=11035&&e<=11036:11088==e||11093==e:e<11360?e>=11264&&e<=11310||e>=11312&&e<=11358:e>=11360&&e<=11492||e>=11499&&e<=11507:e<11568?e<11559?e>=11520&&e<=11557:11559==e||11565==e:e<11647?e>=11568&&e<=11623||11631==e:e>=11647&&e<=11670||e>=11680&&e<=11686:e<11744?e<11712?e<11696?e>=11688&&e<=11694:e>=11696&&e<=11702||e>=11704&&e<=11710:e<11728?e>=11712&&e<=11718||e>=11720&&e<=11726:e>=11728&&e<=11734||e>=11736&&e<=11742:e<12330?e<11823?e>=11744&&e<=11775:11823==e||e>=12293&&e<=12294:e<12353?e>=12330&&e<=12341||e>=12347&&e<=12349:e>=12353&&e<=12438||e>=12441&&e<=12442:e<42512?e<12951?e<12549?e<12449?e>=12445&&e<=12447:e>=12449&&e<=12538||e>=12540&&e<=12543:e<12704?e>=12549&&e<=12589||e>=12593&&e<=12686:e>=12704&&e<=12730||e>=12784&&e<=12799:e<19968?e<12953?12951==e:12953==e||e>=13312&&e<=19893:e<42192?e>=19968&&e<=40917||e>=40960&&e<=42124:e>=42192&&e<=42237||e>=42240&&e<=42508:e<42891?e<42623?e<42560?e>=42512&&e<=42539:e>=42560&&e<=42610||e>=42612&&e<=42621:e<42775?e>=42623&&e<=42725||e>=42736&&e<=42737:e>=42775&&e<=42783||e>=42786&&e<=42888:e<43072?e<42928?e>=42891&&e<=42926:e>=42928&&e<=42935||e>=42999&&e<=43047:e<43216?e>=43072&&e<=43123||e>=43136&&e<=43205:e>=43216&&e<=43225||e>=43232&&e<=43255:e<55243?e<43744?e<43488?e<43312?e<43261?43259==e:43261==e||e>=43264&&e<=43309:e<43392?e>=43312&&e<=43347||e>=43360&&e<=43388:e>=43392&&e<=43456||e>=43471&&e<=43481:e<43600?e<43520?e>=43488&&e<=43518:e>=43520&&e<=43574||e>=43584&&e<=43597:e<43642?e>=43600&&e<=43609||e>=43616&&e<=43638:e>=43642&&e<=43714||e>=43739&&e<=43741:e<43824?e<43785?e<43762?e>=43744&&e<=43759:e>=43762&&e<=43766||e>=43777&&e<=43782:e<43808?e>=43785&&e<=43790||e>=43793&&e<=43798:e>=43808&&e<=43814||e>=43816&&e<=43822:e<44012?e<43868?e>=43824&&e<=43866:e>=43868&&e<=43877||e>=43888&&e<=44010:e<44032?e>=44012&&e<=44013||e>=44016&&e<=44025:e>=44032&&e<=55203||e>=55216&&e<=55238:e<64848?e<64298?e<64112?e<55296?e>=55243&&e<=55291:e>=55296&&e<=57343||e>=63744&&e<=64109:e<64275?e>=64112&&e<=64217||e>=64256&&e<=64262:e>=64275&&e<=64279||e>=64285&&e<=64296:e<64320?e<64312?e>=64298&&e<=64310:e>=64312&&e<=64316||64318==e:e<64326?e>=64320&&e<=64321||e>=64323&&e<=64324:e>=64326&&e<=64433||e>=64467&&e<=64829:e<65296?e<65024?e<64914?e>=64848&&e<=64911:e>=64914&&e<=64967||e>=65008&&e<=65019:e<65136?e>=65024&&e<=65039||e>=65056&&e<=65071:e>=65136&&e<=65140||e>=65142&&e<=65276:e<65474?e<65345?e>=65296&&e<=65305||e>=65313&&e<=65338:e>=65345&&e<=65370||e>=65382&&e<=65470:e<65490?e>=65474&&e<=65479||e>=65482&&e<=65487:e>=65490&&e<=65495||e>=65498&&e<=65500}function _(e){return e<58?e<44?33==e:44==e||46==e:e<63?e>=58&&e<=59:63==e||94==e}function b(e){return e<91?40==e:91==e||123==e}function w(e){return e<93?41==e:93==e||125==e}var x=/^(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|travelersinsurance|verm\xf6gensberatung|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|verm\xf6gensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--mgbcpq6gpa1a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbc0a9azcg|xn--nqv7fs00ema|americanfamily|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq480n2rg|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|wolterskluwer|xn--cckwcxetd|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--4dbrk0ce|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nextdirect|properties|protection|prudential|realestate|republican|restaurant|schaeffler|tatamotors|technology|university|vlaanderen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--q7ce6a|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|institute|insurance|kuokgroup|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|pramerica|richardli|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--qxa6a|xn--tckwe|xn--vhquv|yodobashi|\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|builders|business|capetown|catering|catholic|cipriani|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|mckinsey|memorial|merckmsd|mortgage|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|softbank|software|stcgroup|supplies|training|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|banamex|bauhaus|bestbuy|booking|brother|capital|caravan|careers|channel|charity|chintai|citadel|clubmed|college|cologne|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hotmail|hyundai|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lanxess|lasalle|latrobe|leclerc|limited|lincoln|markets|monster|netbank|netflix|network|neustar|okinawa|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|singles|staples|storage|support|surgery|systems|temasek|theater|theatre|tickets|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|yamaxun|youtube|zuerich|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0627\u0644\u0628\u062d\u0631\u064a\u0646|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|abbott|abbvie|africa|agency|airbus|airtel|alipay|alsace|alstom|amazon|anquan|aramco|author|bayern|beauty|berlin|bharti|bostik|boston|broker|camera|career|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kindle|kosher|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|monash|mormon|moscow|museum|nagoya|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|pictet|quebec|racing|realty|reisen|repair|report|review|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|walter|webcam|xihuan|yachts|yandex|zappos|\u043c\u043e\u0441\u043a\u0432\u0430|\u043e\u043d\u043b\u0430\u0439\u043d|\u0627\u0628\u0648\u0638\u0628\u064a|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0645\u0627\u0631\u0627\u062a|\u0641\u0644\u0633\u0637\u064a\u0646|\u0645\u0644\u064a\u0633\u064a\u0627|\u092d\u093e\u0930\u0924\u092e\u094d|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dance|deals|delta|drive|dubai|earth|edeka|email|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|irish|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|loans|locus|lotte|lotto|mango|media|miami|money|movie|music|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|\u05d9\u05e9\u05e8\u05d0\u05dc|\u0627\u06cc\u0631\u0627\u0646|\u0628\u0627\u0632\u0627\u0631|\u0628\u06be\u0627\u0631\u062a|\u0633\u0648\u062f\u0627\u0646|\u0633\u0648\u0631\u064a\u0629|\u0647\u0645\u0631\u0627\u0647|\u092d\u093e\u0930\u094b\u0924|\u0938\u0902\u0917\u0920\u0928|\u09ac\u09be\u0982\u09b2\u09be|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u5609\u91cc\u5927\u9152\u5e97|aarp|able|aero|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|dvag|erni|fage|fail|fans|farm|fast|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kids|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|read|reit|rent|rest|rich|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scot|seat|seek|sexy|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|\u0434\u0435\u0442\u0438|\u0441\u0430\u0439\u0442|\u0628\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0680\u0627\u0631\u062a|\u062a\u0648\u0646\u0633|\u0634\u0628\u0643\u0629|\u0639\u0631\u0627\u0642|\u0639\u0645\u0627\u0646|\u0645\u0648\u0642\u0639|\u092d\u093e\u0930\u0924|\u09ad\u09be\u09b0\u09a4|\u09ad\u09be\u09f0\u09a4|\u0a2d\u0a3e\u0a30\u0a24|\u0aad\u0abe\u0ab0\u0aa4|\u0b2d\u0b3e\u0b30\u0b24|\u0cad\u0cbe\u0cb0\u0ca4|\u0dbd\u0d82\u0d9a\u0dcf|\u30a2\u30de\u30be\u30f3|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u30dd\u30a4\u30f3\u30c8|\u7ec4\u7ec7\u673a\u6784|\u96fb\u8a0a\u76c8\u79d1|\u9999\u683c\u91cc\u62c9|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|ceo|cfa|cfd|com|cpa|crs|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gay|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|llp|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|scb|sew|sex|sfr|ski|sky|soy|spa|srl|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|\u0431\u0435\u043b|\u043a\u043e\u043c|\u049b\u0430\u0437|\u043c\u043a\u0434|\u043c\u043e\u043d|\u043e\u0440\u0433|\u0440\u0443\u0441|\u0441\u0440\u0431|\u0443\u043a\u0440|\u0570\u0561\u0575|\u05e7\u05d5\u05dd|\u0639\u0631\u0628|\u0642\u0637\u0631|\u0643\u0648\u0645|\u0645\u0635\u0631|\u0915\u0949\u092e|\u0928\u0947\u091f|\u0e04\u0e2d\u0e21|\u0e44\u0e17\u0e22|\u0ea5\u0eb2\u0ea7|\u30b9\u30c8\u30a2|\u30bb\u30fc\u30eb|\u307f\u3093\u306a|\u4e2d\u6587\u7f51|\u4e9a\u9a6c\u900a|\u5929\u4e3b\u6559|\u6211\u7231\u4f60|\u65b0\u52a0\u5761|\u6de1\u9a6c\u9521|\u98de\u5229\u6d66|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|\u03b5\u03bb|\u03b5\u03c5|\u0431\u0433|\u0435\u044e|\u0440\u0444|\u10d2\u10d4|\ub2f7\ub137|\ub2f7\ucef4|\uc0bc\uc131|\ud55c\uad6d|\u30b3\u30e0|\u4e16\u754c|\u4e2d\u4fe1|\u4e2d\u56fd|\u4e2d\u570b|\u4f01\u4e1a|\u4f5b\u5c71|\u4fe1\u606f|\u5065\u5eb7|\u516b\u5366|\u516c\u53f8|\u516c\u76ca|\u53f0\u6e7e|\u53f0\u7063|\u5546\u57ce|\u5546\u5e97|\u5546\u6807|\u5609\u91cc|\u5728\u7ebf|\u5927\u62ff|\u5a31\u4e50|\u5bb6\u96fb|\u5e7f\u4e1c|\u5fae\u535a|\u6148\u5584|\u624b\u673a|\u62db\u8058|\u653f\u52a1|\u653f\u5e9c|\u65b0\u95fb|\u65f6\u5c1a|\u66f8\u7c4d|\u673a\u6784|\u6e38\u620f|\u6fb3\u9580|\u70b9\u770b|\u79fb\u52a8|\u7f51\u5740|\u7f51\u5e97|\u7f51\u7ad9|\u7f51\u7edc|\u8054\u901a|\u8c37\u6b4c|\u8d2d\u7269|\u901a\u8ca9|\u96c6\u56e2|\u98df\u54c1|\u9910\u5385|\u9999\u6e2f)$/,S=/https?:\/\//i,E=new RegExp("^"+S.source,"i"),T=/^(javascript|vbscript):/i,M=/^[A-Za-z][-.+A-Za-z0-9]*:(\/\/)?([^:/]*)/,A=/^(?:\/\/)?([^/#?:]+)/,k=f;function C(e){return f(e)||m(e)||43===e||45===e||46===e}var I=v;function P(e){return 95===e||I(e)}function O(e){return v(e)||((t=e)<91?t<47?t>=35&&t<=43||45==t:t<61?47==t:61==t||64==t:t<95?91==t||93==t:t<123?95==t:t>=123&&t<=126||10003==t)||_(e);var t}function R(e){return 47===e||63===e||35===e}function D(e){return x.test(e.toLowerCase())}var L=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,N=/[:/?#]/;var F=/^(https?:\/\/)?(?:www\.)?/i,z=/^\/\//,U=function(e){function t(t){var n=e.call(this,t)||this;return n.type="url",n.url="",n.urlMatchType="scheme",n.protocolRelativeMatch=!1,n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.protocolPrepended=!1,n.urlMatchType=t.urlMatchType,n.url=t.url,n.protocolRelativeMatch=t.protocolRelativeMatch,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return(0,r.C6)(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||"scheme"===this.urlMatchType||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=e.replace(z,"")),this.stripPrefix.scheme&&(e=e.replace(E,"")),this.stripPrefix.www&&(e=function(e){return e.includes("www.")?e.replace(F,"$1"):e}(e)),this.stripTrailingSlash&&(e=function(e){"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1));return e}(e)),this.decodePercentEncoding&&(e=function(e){var t=e.replace(/%(?:22|26|27|3C|3E)/gi,function(e){return"%22"===e?"&quot;":"%26"===e?"&amp;":"%27"===e?"&#39;":"%3C"===e||"%3c"===e?"&lt;":"&gt;"});if(t.includes("%"))try{return decodeURIComponent(t)}catch(n){}return t}(e)),e},t}(p);var j=/^mailto:/i,B=v;function V(e){return B(e)||((t=e)<47?t<42?33==t||t>=35&&t<=39:t>=42&&t<=43||45==t:t<63?47==t||61==t:t<94?63==t:t>=94&&t<=96||t>=123&&t<=126);var t}var H=function(e){function t(t){var n=e.call(this,t)||this;return n.type="email",n.email="",n.email=t.email,n}return(0,r.C6)(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(p);function $(e){return 95===e||v(e)}var Y=["twitter","facebook","instagram","tiktok","youtube"],G=function(e){function t(t){var n=e.call(this,t)||this;return n.type="hashtag",n.serviceName="twitter",n.hashtag="",n.serviceName=t.serviceName,n.hashtag=t.hashtag,n}return(0,r.C6)(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;case"tiktok":return"https://www.tiktok.com/tag/"+t;case"youtube":return"https://youtube.com/hashtag/"+t;default:a(e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&t.push(n),t},t}(p),q={twitter:/^@\w{1,15}$/,instagram:/^@[_\w]{1,30}$/,soundcloud:/^@[-a-z0-9_]{3,25}$/,tiktok:/^@[.\w]{1,23}[\w]$/,youtube:/^@[-.\xb7\w]{3,30}$/};function W(e){return 45===e||46===e||95===e||f(e)||m(e)}var K=["twitter","instagram","soundcloud","tiktok","youtube"],Z=function(e){function t(t){var n=e.call(this,t)||this;return n.type="mention",n.serviceName="twitter",n.mention="",n.mention=t.mention,n.serviceName=t.serviceName,n}return(0,r.C6)(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;case"tiktok":return"https://www.tiktok.com/@"+this.mention;case"youtube":return"https://youtube.com/@"+this.mention;default:a(this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&t.push(n),t},t}(p),J=/[-. ()]/,X=new RegExp("^".concat(/(?:(?:(?:(\+)?\d{1,3}[-. ]?)?\(?\d{3}\)?[-. ]?\d{3}[-. ]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-. ]?(?:\d[-. ]?){6,12}\d+))([,;]+[0-9]+#?)*/.source,"|").concat(/(0([1-9]-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"$"));function Q(e){return 45===e||46===e||32===e}function ee(e){return 44===e||59===e}var te=function(e){function t(t){var n=e.call(this,t)||this;return n.type="phone",n.number="",n.plusSign=!1,n.number=t.number,n.plusSign=t.plusSign,n}return(0,r.C6)(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(p),ne=function(){function e(e,t){this.charIdx=0,this.matches=[],this._stateMachines=[],this.schemeUrlMachinesCount=0,this.text=e,this.tagBuilder=t.tagBuilder,this.stripPrefix=t.stripPrefix,this.stripTrailingSlash=t.stripTrailingSlash,this.decodePercentEncoding=t.decodePercentEncoding,this.hashtagServiceName=t.hashtagServiceName,this.mentionServiceName=t.mentionServiceName}return Object.defineProperty(e.prototype,"stateMachines",{get:function(){return this._stateMachines},enumerable:!1,configurable:!0}),e.prototype.addMachine=function(e){this._stateMachines.push(e),Xe(e)&&this.schemeUrlMachinesCount++},e.prototype.removeMachine=function(e){this._stateMachines=this._stateMachines.filter(function(t){return t!==e}),Xe(e)&&this.schemeUrlMachinesCount--},e.prototype.hasSchemeUrlMachine=function(){return this.schemeUrlMachinesCount>0},e}();function re(e,t,n){var r=e.charIdx;if(35===n)e.addMachine({type:2,startIdx:r,state:28,acceptStateReached:!1});else if(64===n)e.addMachine(function(e,t){return{type:3,startIdx:e,state:t,acceptStateReached:!1}}(r,30));else if(47===n)e.addMachine(Ze(r,11));else if(43===n)e.addMachine(Je(r,37));else if(40===n)e.addMachine(Je(r,32));else{if(m(n)&&(e.addMachine(Je(r,38)),e.addMachine(function(e,t){return{type:0,startIdx:e,state:t,acceptStateReached:!1,matchType:2,octetsEncountered:1}}(r,13))),B(n)){var i="m"===t.toLowerCase()?15:22;e.addMachine(function(e,t){return{type:1,startIdx:e,state:t,acceptStateReached:!1}}(r,i))}k(n)&&e.addMachine(Ke(r,0)),v(n)&&e.addMachine(Ze(r,5))}}function ie(e,t,n){58===n?t.state=2:45===n?t.state=1:C(n)||e.removeMachine(t)}function oe(e,t,n){var r=e.charIdx;45===n||(47===n?(e.removeMachine(t),e.addMachine(Ze(r,11))):C(n)?t.state=0:e.removeMachine(t))}function se(e,t,n){var r=e.charIdx;47===n?t.state=3:46===n?e.removeMachine(t):I(n)?(t.state=5,k(n)&&e.addMachine(Ke(r,0))):e.removeMachine(t)}function ae(e,t,n){47===n?t.state=4:O(n)?(t.state=10,t.acceptStateReached=!0):Ge(e,t)}function le(e,t,n,r){47===r?(t.state=10,t.acceptStateReached=!0):I(r)?(t.state=5,t.acceptStateReached=!0):e.removeMachine(t)}function ce(e,t,n){47===n?t.state=12:e.removeMachine(t)}function ue(e,t,n){I(n)?t.state=5:e.removeMachine(t)}function he(e,t,n){46===n?t.state=7:45===n?t.state=6:58===n?t.state=8:R(n)?t.state=10:P(n)||Ge(e,t)}function de(e,t,n,r){45===r||(46===r?Ge(e,t):I(r)?t.state=5:Ge(e,t))}function pe(e,t,n,r){46===r?Ge(e,t):I(r)?(t.state=5,t.acceptStateReached=!0):Ge(e,t)}function fe(e,t,n){46===n?t.state=14:58===n?t.state=8:m(n)||(R(n)?t.state=10:v(n)?e.removeMachine(t):Ge(e,t))}function me(e,t,n){m(n)?(t.octetsEncountered++,4===t.octetsEncountered&&(t.acceptStateReached=!0),t.state=13):Ge(e,t)}function ge(e,t,n){m(n)?t.state=9:Ge(e,t)}function ye(e,t,n){m(n)||(R(n)?t.state=10:Ge(e,t))}function ve(e,t,n){O(n)||Ge(e,t)}function _e(e,t,n,r){"a"===n.toLowerCase()?t.state=16:Me(e,t,r)}function be(e,t,n,r){"i"===n.toLowerCase()?t.state=17:Me(e,t,r)}function we(e,t,n,r){"l"===n.toLowerCase()?t.state=18:Me(e,t,r)}function xe(e,t,n,r){"t"===n.toLowerCase()?t.state=19:Me(e,t,r)}function Se(e,t,n,r){"o"===n.toLowerCase()?t.state=20:Me(e,t,r)}function Ee(e,t,n){58===n?t.state=21:Me(e,t,n)}function Te(e,t,n){V(n)?t.state=22:e.removeMachine(t)}function Me(e,t,n){46===n?t.state=23:64===n?t.state=24:V(n)?t.state=22:e.removeMachine(t)}function Ae(e,t,n){46===n||64===n?e.removeMachine(t):V(n)?t.state=22:e.removeMachine(t)}function ke(e,t,n){I(n)?t.state=25:e.removeMachine(t)}function Ce(e,t,n){46===n?t.state=27:45===n?t.state=26:P(n)||Ge(e,t)}function Ie(e,t,n){45===n||46===n?Ge(e,t):P(n)?t.state=25:Ge(e,t)}function Pe(e,t,n){46===n||45===n?Ge(e,t):I(n)?(t.state=25,t.acceptStateReached=!0):Ge(e,t)}function Oe(e,t,n){$(n)?(t.state=29,t.acceptStateReached=!0):e.removeMachine(t)}function Re(e,t,n){$(n)||Ge(e,t)}function De(e,t,n){W(n)?(t.state=31,t.acceptStateReached=!0):e.removeMachine(t)}function Le(e,t,n){W(n)||(v(n)?e.removeMachine(t):Ge(e,t))}function Ne(e,t,n,r){m(r)?t.state=38:(e.removeMachine(t),re(e,n,r))}function Fe(e,t,n,r){m(r)?t.state=33:e.removeMachine(t),re(e,n,r)}function ze(e,t,n){m(n)?t.state=34:e.removeMachine(t)}function Ue(e,t,n){m(n)?t.state=35:e.removeMachine(t)}function je(e,t,n){41===n?t.state=36:e.removeMachine(t)}function Be(e,t,n,r){m(r)?t.state=38:Q(r)?t.state=39:e.removeMachine(t)}function Ve(e,t,n,r){var i=e.charIdx;t.acceptStateReached=!0,ee(r)?t.state=40:35===r?t.state=41:m(r)||(40===r?t.state=32:Q(r)?t.state=39:(Ge(e,t),k(r)&&e.addMachine(Ke(i,0))))}function He(e,t,n,r){m(r)?t.state=38:40===r?t.state=32:(Ge(e,t),re(e,n,r))}function $e(e,t,n){ee(n)||(35===n?t.state=41:m(n)?t.state=38:Ge(e,t))}function Ye(e,t,n){ee(n)?t.state=40:m(n)?e.removeMachine(t):Ge(e,t)}function Ge(e,t){var n=e.matches,r=e.text,i=e.charIdx,o=e.tagBuilder,s=e.stripPrefix,l=e.stripTrailingSlash,c=e.decodePercentEncoding,u=e.hashtagServiceName,h=e.mentionServiceName;if(e.removeMachine(t),t.acceptStateReached){var d,p,f=t.startIdx,m=r.slice(t.startIdx,i);switch(m=function(e){for(var t={"(":0,"{":0,"[":0},n=0;n<e.length;n++){var r=e.charAt(n);b(o=e.charCodeAt(n))?t[r]++:w(o)&&t[We[r]]--}var i=e.length-1;for(;i>=0;){var o;r=e.charAt(i);if(w(o=e.charCodeAt(i))){var s=We[r];if(!(t[s]<0))break;t[s]++,i--}else{if(!_(o))break;i--}}return e.slice(0,i+1)}(m),t.type){case 0:if(64===r.charCodeAt(t.startIdx-1))return;switch(t.matchType){case 0:var g=S.exec(m);if(g&&(f+=g.index,m=m.slice(g.index)),!function(e){if(T.test(e))return!1;var t=e.match(M);if(!t)return!1;var n=!!t[1],r=t[2];return!!n||!(-1===r.indexOf(".")||!/[A-Za-z]/.test(r))}(m))return;break;case 1:if(!function(e){var t=e.match(A);if(!t)return!1;var n=t[0].split(".");return!(n.length<2)&&!!D(n[n.length-1])}(m))return;break;case 2:if(!function(e){var t=e.split(N,1)[0];return L.test(t)}(m))return;break;default:a(t)}n.push(new U({tagBuilder:o,matchedText:m,offset:f,urlMatchType:qe(t.matchType),url:m,protocolRelativeMatch:"//"===m.slice(0,2),stripPrefix:s,stripTrailingSlash:l,decodePercentEncoding:c}));break;case 1:D(m.split(".").pop())&&n.push(new H({tagBuilder:o,matchedText:m,offset:f,email:m.replace(j,"")}));break;case 2:m.length<=140&&n.push(new G({tagBuilder:o,matchedText:m,offset:f,serviceName:u,hashtag:m.slice(1)}));break;case 3:p=m,q[h].test(p)&&n.push(new Z({tagBuilder:o,matchedText:m,offset:f,serviceName:h,mention:m.slice(1)}));break;case 4:if(m=m.replace(/ +$/g,""),("+"===(d=m).charAt(0)||J.test(d))&&X.test(d)){var y=m.replace(/[^0-9,;#]/g,"");n.push(new te({tagBuilder:o,matchedText:m,offset:f,number:y,plusSign:"+"===m.charAt(0)}))}break;default:a(t)}}}function qe(e){switch(e){case 0:return"scheme";case 1:return"tld";case 2:return"ipV4";default:a(e)}}var We={")":"(","}":"{","]":"["};function Ke(e,t){return{type:0,startIdx:e,state:t,acceptStateReached:!1,matchType:0}}function Ze(e,t){return{type:0,startIdx:e,state:t,acceptStateReached:!1,matchType:1}}function Je(e,t){return{type:4,startIdx:e,state:t,acceptStateReached:!1}}function Xe(e){return 0===e.type&&0===e.matchType}var Qe=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing},et=new Qe,tt=function(e,t){this.charIdx=0,this.state=0,this.currentDataIdx=0,this.currentTag=et,this.html=e,this.callbacks=t};function nt(e,t){"<"===t&&Et(e)}function rt(e,t,n){"!"===t?e.state=13:"/"===t?(e.state=2,e.currentTag=new Qe((0,r.Cl)((0,r.Cl)({},e.currentTag),{isClosing:!0}))):"<"===t?Et(e):f(n)?(e.state=3,e.currentTag=new Qe((0,r.Cl)((0,r.Cl)({},e.currentTag),{isOpening:!0}))):(e.state=0,e.currentTag=et)}function it(e,t,n){y(n)?(e.currentTag=new Qe((0,r.Cl)((0,r.Cl)({},e.currentTag),{name:Mt(e)})),e.state=4):"<"===t?Et(e):"/"===t?(e.currentTag=new Qe((0,r.Cl)((0,r.Cl)({},e.currentTag),{name:Mt(e)})),e.state=12):">"===t?(e.currentTag=new Qe((0,r.Cl)((0,r.Cl)({},e.currentTag),{name:Mt(e)})),Tt(e)):f(n)||m(n)||":"===t||St(e)}function ot(e,t,n){">"===t?St(e):f(n)?e.state=3:St(e)}function st(e,t,n){var r;y(n)||("/"===t?e.state=12:">"===t?Tt(e):"<"===t?Et(e):"="===t||g(n)||((r=n)>=0&&r<=31||127==r)?St(e):e.state=5)}function at(e,t,n){y(n)?e.state=6:"/"===t?e.state=12:"="===t?e.state=7:">"===t?Tt(e):"<"===t?Et(e):g(n)&&St(e)}function lt(e,t,n){y(n)||("/"===t?e.state=12:"="===t?e.state=7:">"===t?Tt(e):"<"===t?Et(e):g(n)?St(e):e.state=5)}function ct(e,t,n){y(n)||('"'===t?e.state=8:"'"===t?e.state=9:/[>=`]/.test(t)?St(e):"<"===t?Et(e):e.state=10)}function ut(e,t){'"'===t&&(e.state=11)}function ht(e,t){"'"===t&&(e.state=11)}function dt(e,t,n){y(n)?e.state=4:">"===t?Tt(e):"<"===t&&Et(e)}function pt(e,t,n){y(n)?e.state=4:"/"===t?e.state=12:">"===t?Tt(e):"<"===t?Et(e):(e.state=4,function(e){e.charIdx--}(e))}function ft(e,t){">"===t?(e.currentTag=new Qe((0,r.Cl)((0,r.Cl)({},e.currentTag),{isClosing:!0})),Tt(e)):St(e)}function mt(e){var t=e.html,n=e.charIdx;"--"===t.slice(n,n+2)?(e.charIdx++,e.currentTag=new Qe((0,r.Cl)((0,r.Cl)({},e.currentTag),{type:"comment"})),e.state=14):"DOCTYPE"===t.slice(n,n+7).toUpperCase()?(e.charIdx+=6,e.currentTag=new Qe((0,r.Cl)((0,r.Cl)({},e.currentTag),{type:"doctype"})),e.state=20):St(e)}function gt(e,t){"-"===t?e.state=15:">"===t?St(e):e.state=16}function yt(e,t){"-"===t?e.state=18:">"===t?St(e):e.state=16}function vt(e,t){"-"===t&&(e.state=17)}function _t(e,t){e.state="-"===t?18:16}function bt(e,t){">"===t?Tt(e):"!"===t?e.state=19:"-"===t||(e.state=16)}function wt(e,t){"-"===t?e.state=17:">"===t?Tt(e):e.state=16}function xt(e,t){">"===t?Tt(e):"<"===t&&Et(e)}function St(e){e.state=0,e.currentTag=et}function Et(e){e.state=1,e.currentTag=new Qe({idx:e.charIdx})}function Tt(e){var t=e.html.slice(e.currentDataIdx,e.currentTag.idx);t&&e.callbacks.onText(t,e.currentDataIdx);var n=e.currentTag;"comment"===n.type?e.callbacks.onComment(n.idx):"doctype"===n.type?e.callbacks.onDoctype(n.idx):(n.isOpening&&e.callbacks.onOpenTag(n.name,n.idx),n.isClosing&&e.callbacks.onCloseTag(n.name,n.idx)),St(e),e.currentDataIdx=e.charIdx+1}function Mt(e){var t=e.currentTag.idx+(e.currentTag.isClosing?2:1);return e.html.slice(t,e.charIdx).toLowerCase()}function At(e,t){return e.getOffset()-t.getOffset()}const kt=function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.tagBuilder=null,this.urls=function(e){null==e&&(e=!0);return o(e)?{schemeMatches:e,tldMatches:e,ipV4Matches:e}:{schemeMatches:!o(e.schemeMatches)||e.schemeMatches,tldMatches:!o(e.tldMatches)||e.tldMatches,ipV4Matches:!o(e.ipV4Matches)||e.ipV4Matches}}(t.urls),this.email=o(t.email)?t.email:this.email,this.phone=o(t.phone)?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow=o(t.newWindow)?t.newWindow:this.newWindow,this.stripPrefix=function(e){null==e&&(e=!0);return o(e)?{scheme:e,www:e}:{scheme:!o(e.scheme)||e.scheme,www:!o(e.www)||e.www}}(t.stripPrefix),this.stripTrailingSlash=o(t.stripTrailingSlash)?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding=o(t.decodePercentEncoding)?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var n=this.mention;if(!1!==n&&-1===K.indexOf(n))throw new Error("invalid `mention` cfg '".concat(n,"' - see docs"));var i,s=this.hashtag;if(!1!==s&&-1===Y.indexOf(s))throw new Error("invalid `hashtag` cfg '".concat(s,"' - see docs"));this.truncate="number"===typeof(i=t.truncate)?{length:i,location:"end"}:(0,r.Cl)({length:Number.POSITIVE_INFINITY,location:"end"},i),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,n){return new e(n).link(t)},e.parse=function(t,n){return new e(n).parse(t)},e.prototype.parse=function(e){var t=this,n=["a","style","script"],i=0,o=[];return function(e,t){for(var n=new tt(e,t),r=e.length;n.charIdx<r;){var i=e.charAt(n.charIdx),o=e.charCodeAt(n.charIdx);switch(n.state){case 0:nt(n,i);break;case 1:rt(n,i,o);break;case 2:ot(n,i,o);break;case 3:it(n,i,o);break;case 4:st(n,i,o);break;case 5:at(n,i,o);break;case 6:lt(n,i,o);break;case 7:ct(n,i,o);break;case 8:ut(n,i);break;case 9:ht(n,i);break;case 10:dt(n,i,o);break;case 11:pt(n,i,o);break;case 12:ft(n,i);break;case 13:mt(n);break;case 14:gt(n,i);break;case 15:yt(n,i);break;case 16:vt(n,i);break;case 17:_t(n,i);break;case 18:bt(n,i);break;case 19:wt(n,i);break;case 20:xt(n,i);break;default:a(n.state)}n.charIdx++}n.currentDataIdx<n.charIdx&&function(e){var t=e.html.slice(e.currentDataIdx,e.charIdx);e.callbacks.onText(t,e.currentDataIdx),e.currentDataIdx=e.charIdx+1}(n)}(e,{onOpenTag:function(e){n.indexOf(e)>=0&&i++},onText:function(e,n){if(0===i){var s=e.split(/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),a=n;s.forEach(function(e,n){if(n%2===0){var i=t.parseText(e,a);o.push.apply(o,(0,r.fX)([],(0,r.zs)(i),!1))}a+=e.length})}},onCloseTag:function(e){n.indexOf(e)>=0&&(i=Math.max(i-1,0))},onComment:function(){},onDoctype:function(){}}),o=this.compactMatches(o),o=this.removeUnwantedMatches(o)},e.prototype.compactMatches=function(e){e.sort(At);for(var t=0;t<e.length-1;){var n=e[t],r=n.getOffset(),i=n.getMatchedText().length;if(t+1<e.length&&e[t+1].getOffset()===r){var o=e[t+1].getMatchedText().length>i?t:t+1;e.splice(o,1)}else t++}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||s(e,function(e){return"hashtag"===e.getType()}),this.email||s(e,function(e){return"email"===e.getType()}),this.phone||s(e,function(e){return"phone"===e.getType()}),this.mention||s(e,function(e){return"mention"===e.getType()}),this.urls.schemeMatches||s(e,function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()}),this.urls.tldMatches||s(e,function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()}),this.urls.ipV4Matches||s(e,function(e){return"url"===e.getType()&&"ipV4"===e.getUrlMatchType()}),e},e.prototype.parseText=function(e,t){t=t||0;for(var n=function(e,t){for(var n=new ne(e,t);n.charIdx<n.text.length;n.charIdx++){var r=e.charAt(n.charIdx),i=e.charCodeAt(n.charIdx);if(0===n.stateMachines.length)re(n,r,i);else{for(var o=n.stateMachines.length-1;o>=0;o--){var s=n.stateMachines[o];switch(s.state){case 11:ce(n,s,i);break;case 12:ue(n,s,i);break;case 0:ie(n,s,i);break;case 1:oe(n,s,i);break;case 2:se(n,s,i);break;case 3:ae(n,s,i);break;case 4:le(n,s,0,i);break;case 5:he(n,s,i);break;case 6:de(n,s,0,i);break;case 7:pe(n,s,0,i);break;case 13:fe(n,s,i);break;case 14:me(n,s,i);break;case 8:ge(n,s,i);break;case 9:ye(n,s,i);break;case 10:ve(n,s,i);break;case 15:_e(n,s,r,i);break;case 16:be(n,s,r,i);break;case 17:we(n,s,r,i);break;case 18:xe(n,s,r,i);break;case 19:Se(n,s,r,i);break;case 20:Ee(n,s,i);break;case 21:Te(n,s,i);break;case 22:Me(n,s,i);break;case 23:Ae(n,s,i);break;case 24:ke(n,s,i);break;case 25:Ce(n,s,i);break;case 26:Ie(n,s,i);break;case 27:Pe(n,s,i);break;case 28:Oe(n,s,i);break;case 29:Re(n,s,i);break;case 30:De(n,s,i);break;case 31:Le(n,s,i);break;case 32:Fe(n,s,r,i);break;case 33:ze(n,s,i);break;case 34:Ue(n,s,i);break;case 35:je(n,s,i);break;case 36:Be(n,s,0,i);break;case 37:Ne(n,s,r,i);break;case 38:Ve(n,s,0,i);break;case 39:He(n,s,r,i);break;case 40:$e(n,s,i);break;case 41:Ye(n,s,i);break;default:a(s.state)}}if(!n.hasSchemeUrlMachine()&&n.charIdx>0&&k(i)){var l=n.text.charCodeAt(n.charIdx-1);k(l)||n.addMachine(Ke(n.charIdx,0))}}}for(var c=n.stateMachines.length-1;c>=0;c--)n.stateMachines.forEach(function(e){return Ge(n,e)});return n.matches}(e,{tagBuilder:this.getTagBuilder(),stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding,hashtagServiceName:this.hashtag,mentionServiceName:this.mention||"twitter"}),r=0,i=n.length;r<i;r++)n[r].setOffset(t+n[r].getOffset());return n},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),n=new Array(2*t.length+1),r=0,i=0,o=t.length;i<o;i++){var s=t[i];n.push(e.substring(r,s.getOffset())),n.push(this.createMatchReturnVal(s)),r=s.getOffset()+s.getMatchedText().length}return n.push(e.substring(r)),n.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"===typeof t?t:!1===t?e.getMatchedText():t instanceof c?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new d({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="4.1.5",e}()},18845(e,t,n){"use strict";n.d(t,{O:()=>r});const r=globalThis},19042(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(33831),i=n(16489),o=n(27422);const s=function(e){return(0,r.A)(e,o.A,i.A)}},19282(e,t,n){"use strict";n.d(t,{Ow:()=>s,Yz:()=>d,Z9:()=>a,pq:()=>l});var r=n(95200),i=n(26674),o=n(18845);const s=["debug","info","warn","error","log","assert","trace"],a={};function l(e){if(!("console"in o.O))return e();const t=o.O.console,n={},r=Object.keys(a);r.forEach(e=>{const r=a[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}function c(){return h().enabled}function u(e,...t){i.T&&c()&&l(()=>{o.O.console[e](`Sentry Logger [${e}]:`,...t)})}function h(){return i.T?(0,r.BY)("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const d={enable:function(){h().enabled=!0},disable:function(){h().enabled=!1},isEnabled:c,log:function(...e){u("log",...e)},warn:function(...e){u("warn",...e)},error:function(...e){u("error",...e)}}},19888(e,t,n){"use strict";e.exports=n(58493)},21154(e,t,n){"use strict";n.d(t,{n:()=>d});var r=n(96540),i=n(12295),o=n(36801),s=n(8448),a=n(94323);class l extends a.Q{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const n=this.options;this.options=this.client.defaultMutationOptions(e),(0,i.f8)(n,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,o.$)(),t="loading"===e.status,n={...e,isLoading:t,isPending:t,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=n}notify(e){s.j.batch(()=>{var t,n,r,i;if(this.mutateOptions&&this.hasListeners())if(e.onSuccess)null==(t=(n=this.mutateOptions).onSuccess)||t.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(i=this.mutateOptions).onSettled)||r.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var o,s,a,l;null==(o=(s=this.mutateOptions).onError)||o.call(s,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(l=this.mutateOptions).onSettled)||a.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)})})}}var c=n(56266),u=n(63064),h=n(42657);function d(e,t,n){const o=(0,i.GR)(e,t,n),a=(0,u.jE)({context:o.context}),[d]=r.useState(()=>new l(a,o));r.useEffect(()=>{d.setOptions(o)},[d,o]);const f=(0,c.r)(r.useCallback(e=>d.subscribe(s.j.batchCalls(e)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),m=r.useCallback((e,t)=>{d.mutate(e,t).catch(p)},[d]);if(f.error&&(0,h.G)(d.options.useErrorBoundary,[f.error]))throw f.error;return{...f,mutate:m,mutateAsync:f.mutate}}function p(){}},21340(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"sv",weekdays:"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),weekdaysShort:"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),weekdaysMin:"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekStart:1,yearStart:4,ordinal:function(e){var t=e%10;return"["+e+(1===t||2===t?"a":"e")+"]"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},relativeTime:{future:"om %s",past:"f\xf6r %s sedan",s:"n\xe5gra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en m\xe5nad",MM:"%d m\xe5nader",y:"ett \xe5r",yy:"%d \xe5r"}};return n.default.locale(r,null,!0),r}(n(74353))},21362(e,t,n){"use strict";function r(e,t,n=void 0){const r={};for(const i in e){const o=e[i];let s="",a=!0;for(let e=0;e<o.length;e+=1){const r=o[e];r&&(s+=(!0===a?"":" ")+t(r),a=!1,n&&n[r]&&(s+=" "+n[r]))}r[i]=s}return r}n.d(t,{A:()=>r})},22080(e,t,n){"use strict";n.d(t,{A:()=>d});var r=n(89469);const i=function(){this.__data__=new r.A,this.size=0};const o=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const s=function(e){return this.__data__.get(e)};const a=function(e){return this.__data__.has(e)};var l=n(68335),c=n(62050);const u=function(e,t){var n=this.__data__;if(n instanceof r.A){var i=n.__data__;if(!l.A||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new c.A(i)}return n.set(e,t),this.size=n.size,this};function h(e){var t=this.__data__=new r.A(e);this.size=t.size}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=s,h.prototype.has=a,h.prototype.set=u;const d=h},22162(e,t,n){"use strict";var r=n(96540),i=n(19888);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var p=s(e,h[0],h[1]);return l(function(){d.hasValue=!0,d.value=p},[p]),u(p),p}},22799(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function x(e){return w(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return x(e)||w(e)===u},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===_||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},23149(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},23224(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(78781),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);const s=function(e){return(e=(0,r.A)(e))&&o.test(e)?e.replace(i,"\\$&"):e}},23460(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(71680),i=n(96540);function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var a=s(r),l=o(i),c=s(i),u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},u(e,t)};var h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)};function d(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function p(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var m=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]=(this.listeners[e]||[]).concat(t)},e.prototype.off=function(e,t){this.listeners[e]=(this.listeners[e]||[]).filter(function(e){return e!==t})},e.prototype.emit=function(e,t){(this.listeners[e]||[]).forEach(function(e){e(t)})},e}(),g=function(){function e(){}return e.arePropertiesEqual=function(t,n){var r=e.coerceUnknownToProperties(t),i=e.coerceUnknownToProperties(n),o=Object.keys(r),s=Object.keys(i);return o.length===s.length&&o.every(function(e){return e in i&&r[e]===i[e]})},e.coerceUnknownToProperties=function(e){return"object"===typeof e&&null!==e?e:{}},e}(),y=function(){function e(){}return e.isUserEqual=function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)&&(null===e||void 0===e?void 0:e.deviceId)===(null===t||void 0===t?void 0:t.deviceId)&&(null===e||void 0===e?void 0:e.userId)===(null===t||void 0===t?void 0:t.userId)&&g.arePropertiesEqual(null===e||void 0===e?void 0:e.properties,null===t||void 0===t?void 0:t.properties)&&g.arePropertiesEqual(null===e||void 0===e?void 0:e.identifiers,null===t||void 0===t?void 0:t.identifiers)},e}(),v=function(e){function t(t,n){var r=e.call(this)||this;return r._currentUser=null,r.client=a.createInstance(t,h(h({},n),{SDK_NAME_HEADER:"react-sdk",SDK_VERSION_HEADER:"11.52.0"})),r.getSessionId=r.getSessionId.bind(r),r.getUser=r.getUser.bind(r),r.setUser=r.setUser.bind(r),r.setUserId=r.setUserId.bind(r),r.setDeviceId=r.setDeviceId.bind(r),r.setUserProperty=r.setUserProperty.bind(r),r.setUserProperties=r.setUserProperties.bind(r),r.updateUserProperties=r.updateUserProperties.bind(r),r.updatePushSubscriptions=r.updatePushSubscriptions.bind(r),r.updateSmsSubscriptions=r.updateSmsSubscriptions.bind(r),r.updateKakaoSubscriptions=r.updateKakaoSubscriptions.bind(r),r.resetUser=r.resetUser.bind(r),r.variation=r.variation.bind(r),r.variationDetail=r.variationDetail.bind(r),r.isFeatureOn=r.isFeatureOn.bind(r),r.featureFlagDetail=r.featureFlagDetail.bind(r),r.track=r.track.bind(r),r.trackPageView=r.trackPageView.bind(r),r.remoteConfig=r.remoteConfig.bind(r),r.onReady=r.onReady.bind(r),r.onInitialized=r.onInitialized.bind(r),r.showUserExplorer=r.showUserExplorer.bind(r),r.hideUserExplorer=r.hideUserExplorer.bind(r),r.fetch=r.fetch.bind(r),r.close=r.close.bind(r),r.setInAppMessageListener=r.setInAppMessageListener.bind(r),r.getExperiment=r.getExperiment.bind(r),r.setPhoneNumber=r.setPhoneNumber.bind(r),r.unsetPhoneNumber=r.unsetPhoneNumber.bind(r),r.emitUpdatedUser=r.emitUpdatedUser.bind(r),r.getDisplayedInAppMessageView=r.getDisplayedInAppMessageView.bind(r),(null===n||void 0===n?void 0:n.devTool)&&(null===n||void 0===n?void 0:n.autoOpenDevTool)&&"undefined"!==typeof window&&r.showUserExplorer(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getSessionId=function(){return this.client.getSessionId()},t.prototype.getUser=function(){return this.client.getUser()},t.prototype.setUser=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.setUser(e),this.emitUpdatedUser(this.getUser()),[2]})})},t.prototype.setUserId=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.setUserId(e),this.emitUpdatedUser(this.getUser()),[2]})})},t.prototype.setDeviceId=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.setDeviceId(e),this.emitUpdatedUser(this.getUser()),[2]})})},t.prototype.setUserProperty=function(e,t){return d(this,void 0,void 0,function(){return p(this,function(n){return this.client.setUserProperty(e,t),this.emitUpdatedUser(this.getUser()),[2]})})},t.prototype.setUserProperties=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.setUserProperties(e),this.emitUpdatedUser(this.getUser()),[2]})})},t.prototype.updateUserProperties=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.updateUserProperties(e),this.emitUpdatedUser(this.getUser()),[2]})})},t.prototype.updatePushSubscriptions=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.updatePushSubscriptions(e),[2]})})},t.prototype.updateSmsSubscriptions=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.updateSmsSubscriptions(e),[2]})})},t.prototype.updateKakaoSubscriptions=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.updateKakaoSubscriptions(e),[2]})})},t.prototype.resetUser=function(){return d(this,void 0,void 0,function(){return p(this,function(e){return this.client.resetUser(),this.emitUpdatedUser(this.getUser()),[2]})})},t.prototype.variation=function(e,t,n){return this.client.variation(e,t||void 0,n)},t.prototype.variationDetail=function(e,t,n){return this.client.variationDetail(e,t||void 0,n)},t.prototype.isFeatureOn=function(e,t){return this.client.isFeatureOn(e,t||void 0)},t.prototype.featureFlagDetail=function(e,t){return this.client.featureFlagDetail(e,t||void 0)},t.prototype.track=function(e,t){this.client.track(e,t||void 0)},t.prototype.trackPageView=function(e){this.client.trackPageView(h(h({},e),{user:(null===e||void 0===e?void 0:e.user)||void 0}))},t.prototype.remoteConfig=function(e){return this.client.remoteConfig(e||void 0)},t.prototype.onReady=function(e,t){this.client.onReady(e,t)},t.prototype.getExperiment=function(e){return this.client.getExperiment(e)},t.prototype.onInitialized=function(e){return this.client.onInitialized(e)},t.prototype.emitUpdatedUser=function(e){y.isUserEqual(this._currentUser,e)||this.emit("user-updated",e),this._currentUser=e},t.prototype.showUserExplorer=function(){this.client.showUserExplorer()},t.prototype.hideUserExplorer=function(){this.client.hideUserExplorer()},t.prototype.fetch=function(){return this.client.fetch()},t.prototype.setInAppMessageListener=function(e){this.client.setInAppMessageListener(e)},t.prototype.close=function(){this.client.close()},t.prototype.setPhoneNumber=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.client.setPhoneNumber(e),[2]})})},t.prototype.unsetPhoneNumber=function(){return d(this,void 0,void 0,function(){return p(this,function(e){return this.client.unsetPhoneNumber(),[2]})})},t.prototype.getDisplayedInAppMessageView=function(){return this.client.getDisplayedInAppMessageView()},t}(m);var _=i.createContext({hackle:void 0,userVersion:0,initialized:!1}),b=_.Consumer,w=_.Provider;var x=r.Logger.log;function S(e,t){void 0===t&&(t="A");var n=E(e,t);return{isLoading:n.isLoading,variation:n.decision.variation}}function E(e,t){void 0===t&&(t="A");var n=i.useContext(_),o=n.hackle,s=n.userVersion,a=n.initialized,l=i.useCallback(function(){return a?(null===o||void 0===o?void 0:o.variationDetail(e))||r.Decision.of(t,r.DecisionReason.EXCEPTION):r.Decision.of(t,r.DecisionReason.SDK_NOT_READY)},[t,e,o,a]),c=f(i.useState(function(){return A(o)?(x.error("HackleClient is not existed"),r.Decision.of(t,r.DecisionReason.EXCEPTION)):l()}),2),u=c[0],h=c[1],d={key:e,userVersion:s,initialized:a},p=f(i.useState(d),2),m=p[0],g=p[1];return k(m,d)||(g(d),h(l())),{isLoading:!a,decision:u}}function T(e){var t=M(e);return{isLoading:t.isLoading,isOn:t.decision.isOn}}function M(e){var t=i.useContext(_),n=t.hackle,o=t.userVersion,s=t.initialized,a=i.useCallback(function(){return s?(null===n||void 0===n?void 0:n.featureFlagDetail(e))||r.FeatureFlagDecision.off(r.DecisionReason.EXCEPTION):r.FeatureFlagDecision.off(r.DecisionReason.SDK_NOT_READY)},[e,n,s]),l=f(i.useState(function(){return A(n)?(x.error("HackleClient is not existed"),r.FeatureFlagDecision.off(r.DecisionReason.EXCEPTION)):a()}),2),c=l[0],u=l[1],h={key:e,userVersion:o,initialized:s},d=f(i.useState(h),2),p=d[0],m=d[1];return k(p,h)||(m(h),u(a())),{isLoading:!s,decision:c}}function A(e){return!e}function k(e,t){return e.initialized===t.initialized&&e.key===t.key&&e.userVersion===t.userVersion}var C=function(e){var t,n=e.experimentKey,r=e.children,i=S(n),o=i.isLoading,s=i.variation;return o?null:r&&"function"===typeof r?r(s):(c.Children.forEach(r,function(e){c.isValidElement(e)&&(e.props.variation?s===e.props.variation&&(t=e):e.props.default&&(t=e))}),t?c.cloneElement(t,{variation:s}):null)};var I=function(e){e.variation;var t=e.children;return c.createElement(c.Fragment,null,t)},P=function(e){var t=T(e.featureKey),n=t.isLoading,r=t.isOn;return n?null:l.default.createElement(l.default.Fragment,null,e.children(r))};t.HackleContext=_,t.HackleContextConsumer=b,t.HackleContextProvider=w,t.HackleExperiment=C,t.HackleFeature=P,t.HackleProvider=function(e){var t=e.hackleClient,n=e.user,r=e.timeout,o=void 0===r?3e3:r,s=e.supportSSR,a=void 0!==s&&s,c=e.children,u=f(i.useState({hackle:t,initialized:!1,userVersion:0}),2),d=u[0],p=u[1];return i.useEffect(function(){"undefined"!==typeof n&&null!==n&&t.setUser(n)},[n]),i.useEffect(function(){var e=function(){p(function(e){return h(h({},e),{userVersion:e.userVersion+1})})};return t.on("user-updated",e),function(){t.off("user-updated",e)}},[t]),i.useEffect(function(){t.onInitialized({timeout:o}).then(function(){p(function(e){return h(h({},e),{initialized:!0})})},function(){p(function(e){return h(h({},e),{initialized:!0})})}).catch(function(){p(function(e){return h(h({},e),{initialized:!0})})})},[t]),a||d.initialized?l.default.createElement(w,{value:d},c):null},t.HackleVariation=I,t.createInstance=function(e,t){return new v(e,t)},t.useFeature=function(e){var t=i.useContext(_),n=t.hackle,r=t.userVersion,o=t.initialized,s=i.useCallback(function(){return(null===n||void 0===n?void 0:n.isFeatureOn(e))||!1},[e,n,o]),a=f(i.useState(function(){return A(n)?("undefined"!==typeof window&&x.error("HackleClient is not existed"),!1):s()}),2),l=a[0],c=a[1],u={key:e,userVersion:r,initialized:o},h=f(i.useState(u),2),d=h[0],p=h[1];return k(d,u)||(p(u),c(s())),l},t.useFeatureFlagDetail=function(e){var t=i.useContext(_),n=t.hackle,o=t.userVersion,s=t.initialized,a=i.useCallback(function(){return(null===n||void 0===n?void 0:n.featureFlagDetail(e))||r.FeatureFlagDecision.off(r.DecisionReason.EXCEPTION)},[e,n,s]),l=f(i.useState(function(){return A(n)?("undefined"!==typeof window&&x.error("HackleClient is not existed"),r.FeatureFlagDecision.off(r.DecisionReason.EXCEPTION)):a()}),2),c=l[0],u=l[1],h={key:e,userVersion:o,initialized:s},d=f(i.useState(h),2),p=d[0],m=d[1];return k(p,h)||(m(h),u(a())),c},t.useLoadableFeature=T,t.useLoadableFeatureDetail=M,t.useLoadableRemoteConfig=function(){var e=i.useContext(_),t=e.hackle,n=e.userVersion,o=e.initialized,s=i.useCallback(function(){return o&&(null===t||void 0===t?void 0:t.remoteConfig())||new r.EmptyHackleRemoteConfig},[t,o]),a=f(i.useState(function(){return A(t)&&x.error("HackleClient is not existed"),s()}),2),l=a[0],c=a[1],u={userVersion:n,initialized:o},h=f(i.useState(u),2),d=h[0],p=h[1];return k(d,u)||(p(u),c(s())),{isLoading:!o,remoteConfig:l}},t.useLoadableVariation=S,t.useLoadableVariationDetail=E,t.useRemoteConfig=function(){var e=i.useContext(_),t=e.hackle,n=e.userVersion,o=e.initialized,s=i.useCallback(function(){return(null===t||void 0===t?void 0:t.remoteConfig())||new r.EmptyHackleRemoteConfig},[t,o]),a=f(i.useState(function(){return A(t)&&x.error("HackleClient is not existed"),s()}),2),l=a[0],c=a[1],u={userVersion:n,initialized:o},h=f(i.useState(u),2),d=h[0],p=h[1];return k(d,u)||(p(u),c(s())),l},t.useTrack=function(){var e=i.useContext(_).hackle;return A(e)?(x.error("HackleClient is not existed"),function(){}):function(t){return null===e||void 0===e?void 0:e.track(t)}},t.useVariation=function(e,t){void 0===t&&(t="A");var n=i.useContext(_),r=n.hackle,o=n.userVersion,s=n.initialized,a=i.useCallback(function(){return s&&(null===r||void 0===r?void 0:r.variation(e))||t},[t,e,r,s]),l=f(i.useState(function(){return A(r)?("undefined"!==typeof window&&x.error("HackleClient is not existed"),t):a()}),2),c=l[0],u=l[1],h={key:e,userVersion:o,initialized:s},d=f(i.useState(h),2),p=d[0],m=d[1];return k(p,h)||(m(h),u(a())),c},t.useVariationDetail=function(e,t){void 0===t&&(t="A");var n=i.useContext(_),o=n.hackle,s=n.userVersion,a=n.initialized,l=i.useCallback(function(){return(null===o||void 0===o?void 0:o.variationDetail(e))||r.Decision.of(t,r.DecisionReason.EXCEPTION)},[t,e,o,a]),c=f(i.useState(function(){return A(o)?("undefined"!==typeof window&&x.error("HackleClient is not existed"),r.Decision.of(t,r.DecisionReason.EXCEPTION)):l()}),2),u=c[0],h=c[1],d={key:e,userVersion:s,initialized:a},p=f(i.useState(d),2),m=p[0],g=p[1];return k(m,d)||(g(d),h(l())),u},Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},24337(e,t,n){"use strict";n.d(t,{c:()=>i,q:()=>r});const r=e=>e.scrollTop;function i(e,t){const{timeout:n,easing:r,style:i={}}=e;return{duration:i.transitionDuration??("number"===typeof n?n:n[t.mode]||0),easing:i.transitionTimingFunction??("object"===typeof r?r[t.mode]:r),delay:i.transitionDelay}}},24684(e,t,n){"use strict";n.d(t,{E:()=>m,T:()=>u,c:()=>p,h:()=>h,w:()=>c});var r=n(96540),i=n(55655),o=n(30041),s=n(43741),a=n(71287),l=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null),c=(l.Provider,function(e){return(0,r.forwardRef)(function(t,n){var i=(0,r.useContext)(l);return e(t,i,n)})}),u=r.createContext({});var h={}.hasOwnProperty,d="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",p=function(e,t){var n={};for(var r in t)h.call(t,r)&&(n[r]=t[r]);return n[d]=e,n},f=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,o.SF)(t,n,r),(0,a.s)(function(){return(0,o.sk)(t,n,r)}),null},m=c(function(e,t,n){var i=e.css;"string"===typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var a=e[d],l=[i],c="";"string"===typeof e.className?c=(0,o.Rk)(t.registered,l,e.className):null!=e.className&&(c=e.className+" ");var p=(0,s.J)(l,void 0,r.useContext(u));c+=t.key+"-"+p.name;var m={};for(var g in e)h.call(e,g)&&"css"!==g&&g!==d&&(m[g]=e[g]);return m.className=c,n&&(m.ref=n),r.createElement(r.Fragment,null,r.createElement(f,{cache:t,serialized:p,isStringTag:"string"===typeof a}),r.createElement(a,m))})},24902(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(96540);function i(...e){const t=r.useRef(void 0),n=r.useCallback(t=>{const n=e.map(e=>{if(null==e)return null;if("function"===typeof e){const n=e,r=n(t);return"function"===typeof r?r:()=>{n(null)}}return e.current=t,()=>{e.current=null}});return()=>{n.forEach(e=>e?.())}},e);return r.useMemo(()=>e.every(e=>null==e)?null:e=>{t.current&&(t.current(),t.current=void 0),null!=e&&(t.current=n(e))},e)}},25175(e,t,n){"use strict";n.d(t,{A:()=>u});var r=n(2383),i=n(53098);const o=function(e){return(0,i.A)(e)&&"[object Arguments]"==(0,r.A)(e)};var s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(e){return(0,i.A)(e)&&a.call(e,"callee")&&!l.call(e,"callee")};const u=c},25264(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var i=a(n(96540)),o=a(n(17965)),s=["text","onCopy","options","children"];function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(l,e);var t,n,r,a=p(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(f(e=a.call.apply(a,[this].concat(n))),"onClick",function(t){var n=e.props,r=n.text,s=n.onCopy,a=n.children,l=n.options,c=i.default.Children.only(a),u=(0,o.default)(r,l);s&&s(r,u),c&&c.props&&"function"===typeof c.props.onClick&&c.props.onClick(t)}),e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=u(e,s),r=i.default.Children.only(t);return i.default.cloneElement(r,c(c({},n),{},{onClick:this.onClick}))}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.default.PureComponent);t.CopyToClipboard=y,g(y,"defaultProps",{onCopy:void 0,options:void 0})},25353(e,t,n){"use strict";n.d(t,{A:()=>i});var r=/^(?:0|[1-9]\d*)$/;const i=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},25540(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{A:()=>i})},26674(e,t,n){"use strict";n.d(t,{T:()=>r});const r="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},26898(e,t,n){"use strict";var r=n(71680);function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function o(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var s,a="https://devtools.hackle.io",l=function(e,t){var n=(t||document).querySelector(e);if(!n)throw Error("HackleDevtools Failed when getting element.");return n},c="hackle-devtools",u="hackle-devtools__toggler",h="hackle-devtools__shadowWrapper",d="hackle-devtools__iframeWrapper",p="hackle-devtools__iframe",f="hackle-devtools__style",m={iframeWrapper:'\n  <template id="'.concat(d,'-template">\n    <div id="').concat(d,'">\n      <iframe id="').concat(p,'"></iframe>\n    </div>\n  </template>\n'),shadowWrapper:'\n  <template id="'.concat(h,'-template">\n    <div id="').concat(h,'" style="position:fixed; z-index:10000001; left:24px; bottom: 61px; height: 0;"></div>\n  </template>\n'),toggler:'\n  <template id="'.concat(u,'-template">\n    <button id="').concat(u,'" type="button">\n    </button>\n  </template>\n\n'),stylesheet:'\n  <template id="'.concat(f,'-template">\n    <style id="').concat(f,'">\n      #').concat(u," {\n        width: 45px;\n        height: 45px;\n        display: block;\n        background-image: url(").concat("https://cdn.hackle.io/images/20230330/84a95e8b-339b-412e-9200-f3655b5eb91b.png",");\n        background-size: contain;\n        background-color: white;\n\n        border: 2px solid white;\n        border-radius: 50%;\n        cursor: pointer;\n        box-shadow: 0px 0px 10px 3px #CACACA;\n      }\n      #").concat(u,".hide {\n        display: none;\n      }\n      #").concat(u," > img {\n        width: 100%;\n        height: 100%;\n      }\n      #").concat(p," {\n        width: 100%;\n        height: 100%;\n        border: none;\n        border-radius: 8px;\n      }\n      #").concat(d," {\n        width:420px;\n        height:80%;\n        min-height:580px;\n        max-height:620px;\n        border-radius:18px;\n        position:fixed;\n        left:24px;\n        bottom:18px;\n        animation: fade 0.5s;\n        background-color: #F5F5F5;\n        overflow: hidden;\n        box-shadow: rgba(255, 255, 255, 0.12) 0px 0px 2px 0px inset, rgba(0, 0, 0, 0.05) 0px 0px 2px 1px, rgba(0, 0, 0, 0.3) 0px 12px 60px;\n      }\n\n      @media screen and (max-width: 768px) {\n        #").concat(d," {\n          width: 100vw;\n          min-height: unset;\n          max-height: unset;\n          left: 0;\n        }\n      }\n      @keyframes fade {\n        from {\n            opacity: 0;\n        }\n        to {\n            opacity: 1;\n        }\n      }\n    </style>\n  </template>\n")};t.IF=void 0,(s=t.IF||(t.IF={})).INIT="HACKLE-EVENT_INIT",s.CLOSE="HACKLE-EVENT_CLOSE",s.USER="HACKLE-EVENT_USER",s.DECISION_AB_GET="HACKLE-EVENT_GET_AB_DECISION",s.DECISION_FF_GET="HACKLE-EVENT_GET_FF_DECISION",s.OVERRIDE_AB_GET="HACKLE-EVENT_GET_AB_OVERRIDE",s.OVERRIDE_AB_SET="HACKLE-EVENT_SET_AB_OVERRIDE",s.OVERRIDE_AB_RESET="HACKLE-EVENT_RESET_AB_OVERRIDE",s.OVERRIDE_AB_RESET_ALL="HACKLE-EVENT_RESET_ALL_AB_OVERRIDE",s.OVERRIDE_FF_GET="HACKLE-EVENT_GET_FF_OVERRIDE",s.OVERRIDE_FF_SET="HACKLE-EVENT_SET_FF_OVERRIDE",s.OVERRIDE_FF_RESET="HACKLE-EVENT_RESET_FF_OVERRIDE",s.OVERRIDE_FF_RESET_ALL="HACKLE-EVENT_RESET_ALL_FF_OVERRIDE";var g=function(e){return"string"==typeof e.type&&Object.values(t.IF).includes(e.type)},y=function(e){return g(e)&&e.type===t.IF.CLOSE},v=function(e){return g(e)&&e.type===t.IF.INIT},_=function(e){return g(e)&&e.type===t.IF.USER},b=function(e){return g(e)&&e.type===t.IF.DECISION_AB_GET},w=function(e){return g(e)&&e.type===t.IF.DECISION_FF_GET},x=function(e){return g(e)&&e.type===t.IF.OVERRIDE_AB_GET},S=function(e){return g(e)&&e.type===t.IF.OVERRIDE_FF_GET},E=function(e){return g(e)&&e.type===t.IF.OVERRIDE_AB_SET},T=function(e){return g(e)&&e.type===t.IF.OVERRIDE_FF_SET},M=function(e){return g(e)&&e.type===t.IF.OVERRIDE_AB_RESET},A=function(e){return g(e)&&e.type===t.IF.OVERRIDE_FF_RESET},k=function(e){return g(e)&&e.type===t.IF.OVERRIDE_AB_RESET_ALL},C=function(e){return g(e)&&e.type===t.IF.OVERRIDE_FF_RESET_ALL},I=function(){function e(e,t){this.port=e,this.opposite=t,this.port.start()}return e.prototype.receive=function(e,t){this.port.addEventListener("message",function(n){e(n.data)&&t(n.data.payload)})},e.prototype.post=function(e){this.port.postMessage(e)},e.prototype.close=function(){this.port.close(),this.opposite.close()},e}(),P=r.Logger.log,O=function(){function e(e){this.transceiver=e}return e.connectTo=function(n,r){return i(this,void 0,void 0,function(){var i,s,l,c,u,h;return o(this,function(o){switch(o.label){case 0:return l=new Promise(function(e){s=e,i=setTimeout(function(){e({port1:void 0,port2:void 0})},5e3)}),window.addEventListener("message",function(e){if(v(e.data)&&n.contentWindow){var o=new MessageChannel,l=o.port1,c=o.port2;n.contentWindow.postMessage({type:t.IF.INIT},"".concat(a,"/").concat(r),[c]),clearTimeout(i),null==s||s({port1:l,port2:c})}}),[4,l];case 1:return c=o.sent(),u=c.port1,h=c.port2,u&&h?[2,new e(new I(u,h))]:(P.error("Timeout occurred while loading devtools."),[2])}})})},e.prototype.addMessageListener=function(e,t){this.transceiver.receive(e,t)},e.prototype.applyChannel=function(e){e(this.transceiver)},e.prototype.close=function(){this.transceiver.close()},e}(),R=r.Logger.log,D=function(){function e(e,t){this.devtoolSubPath=e,this.channel=t,this.channelManager=null,this.shadowRoot=void 0,this.initialize()}return e.prototype.getShadowWrapper=function(e){return l("#".concat(h),e)},e.prototype.getIFrameWrapper=function(e){return l("#".concat(d),e)},e.prototype.getToggler=function(e){return l("#".concat(u),e)},e.prototype.getIFrame=function(e){return l("#".concat(p),e)},e.prototype.getTemplate=function(e){return l("#".concat(e,"-template"))},e.prototype.createMessageChannel=function(){return i(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return(e=this.getIFrame(this.shadowRoot)).src="".concat(a,"/").concat(this.devtoolSubPath),[4,O.connectTo(e,this.devtoolSubPath)];case 1:return(t=n.sent())?(this.channelManager=t,t.addMessageListener(y,this.hide.bind(this)),t.applyChannel(this.channel),[2]):(this.hide(),[2])}})})},e.prototype.initialize=function(){"undefined"!=typeof window?document.getElementById(c)||this.createRoot():R.error("HackleDevtools called before window loaded.")},e.prototype.show=function(){var e,t=this.getTemplate(d);null===(e=this.shadowRoot)||void 0===e||e.appendChild(t.content.cloneNode(!0)),this.createMessageChannel()},e.prototype.createRoot=function(){var e=this,t=document.createElement("div");t.id="hackle-devtools",Object.values(m).forEach(function(e){return t.insertAdjacentHTML("beforeend",e)}),document.body.appendChild(t);var n=this.getTemplate(h);t.appendChild(n.content);var r,i,o,s,a,l,c,d=this.getShadowWrapper();i=!1,o=0,s=0,a=function(e){if(!i){var t=e instanceof TouchEvent?e.touches[0]:e;o=t.clientX,s=t.clientY,i=!0,window.addEventListener("mousemove",l),window.addEventListener("touchmove",l,{passive:!1})}},l=function(e){if(i){r.classList.add("dragged");var t=e instanceof TouchEvent?e.touches[0]:e,n=o-t.clientX,a=s-t.clientY;o=t.clientX,s=t.clientY,r.style.left=r.offsetLeft-n+"px",r.style.top=r.offsetTop-a+"px",e.preventDefault()}},c=function(){i=!1,window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l)},(r=d).addEventListener("mousedown",a),r.addEventListener("mouseup",c),r.addEventListener("touchstart",a,{passive:!1}),r.addEventListener("touchend",c);var p=d.attachShadow({mode:"open"});this.shadowRoot=p;var g=this.getTemplate(u),y=this.getTemplate(f);p.appendChild(y.content),p.appendChild(g.content);var v=this.getToggler(p);v.addEventListener("click",function(){d.classList.contains("dragged")?d.classList.remove("dragged"):(e.show(),v.classList.add("hide"))},!0)},e.prototype.hide=function(){this.getToggler(this.shadowRoot).classList.remove("hide"),this.getIFrameWrapper(this.shadowRoot).remove()},e.prototype.close=function(){var e;try{null===(e=this.channelManager)||void 0===e||e.close(),l("#".concat(c)).remove()}catch(e){R.error("Failed to close HackleDevtools.")}},e}(),L=function(){function e(){}return e.userExplorer=function(n){try{e.devtoolInstance=new D("/user-explorer",function(e){return function(n){n.receive(_,function(){var r={type:t.IF.USER,payload:e.currentUser()};n.post(r)}),n.receive(b,function(){var r={type:t.IF.DECISION_AB_GET,payload:e.getAbTestDecisions()};n.post(r)}),n.receive(x,function(){var r={type:t.IF.OVERRIDE_AB_GET,payload:e.getAbTestOverrides()};n.post(r)}),n.receive(E,function(t){t&&e.setAbTestOverride(t.experiment,t.variationId)}),n.receive(M,function(t){t&&e.resetAbTestOverride(t.experiment)}),n.receive(k,function(){e.resetAllAbTestOverride()}),n.receive(w,function(){var r={type:t.IF.DECISION_FF_GET,payload:e.getFeatureFlagDecisions()};n.post(r)}),n.receive(S,function(){var r={type:t.IF.OVERRIDE_FF_GET,payload:e.getFeatureFlagOverrides()};n.post(r)}),n.receive(T,function(t){t&&e.setFeatureFlagOverride(t.experiment,t.variationId)}),n.receive(A,function(t){t&&e.resetFeatureFlagOverride(t.experiment)}),n.receive(C,function(){e.resetAllFeatureFlagOverride()})}}(n))}catch(e){R.error("Failed to initialize HackleDevTools.")}},e.close=function(){e.devtoolInstance?e.devtoolInstance.close():R.error("There is no active HackleDevtools.")},e.devtoolInstance=null,e}();t.Ay=L},27422(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(2505),i=n(14453),o=n(38446);const s=function(e){return(0,o.A)(e)?(0,r.A)(e):(0,i.A)(e)}},27879(e,t,n){"use strict";function r(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}n.d(t,{t:()=>r})},27937(e,t,n){"use strict";function r(e,t){if(null==e)return e;if(0===e.length&&(!t||t&&""!==e))return null;const n=e instanceof Array?e[0]:e;return null==n||t||""!==n?n:null}function i(e){const t=r(e);if(null==t)return t;if(""===t)return null;return+t}function o(e){const t=r(e,!0);return null==t?t:String(t)}n.d(t,{NumberParam:()=>a,QueryParamProvider:()=>M,StringParam:()=>s,useQueryParams:()=>P});const s={encode:function(e){return null==e?e:String(e)},decode:o},a={encode:function(e){return null==e?e:String(e)},decode:i};'{}[],":'.split("").map(e=>[e,encodeURIComponent(e)]);function l(e,t){const n={},r=Object.keys(t);for(const i of r){const r=t[i];e[i]?n[i]=e[i].encode(t[i]):n[i]=null==r?r:String(r)}return n}var c=n(96540);const u=new class{constructor(){this.paramsMap=new Map,this.registeredParams=new Map}set(e,t,n,r){this.paramsMap.set(e,{stringified:t,decoded:n,decode:r})}has(e,t,n){if(!this.paramsMap.has(e))return!1;const r=this.paramsMap.get(e);return!!r&&(r.stringified===t&&(null==n||r.decode===n))}get(e){var t;if(this.paramsMap.has(e))return null==(t=this.paramsMap.get(e))?void 0:t.decoded}registerParams(e){for(const t of e){const e=this.registeredParams.get(t)||0;this.registeredParams.set(t,e+1)}}unregisterParams(e){for(const t of e){const e=(this.registeredParams.get(t)||0)-1;e<=0?(this.registeredParams.delete(t),this.paramsMap.has(t)&&this.paramsMap.delete(t)):this.registeredParams.set(t,e)}}clear(){this.paramsMap.clear(),this.registeredParams.clear()}};function h(e,t,n,r){var i;if(!n||!t.length)return e;let o={...e},s=!1;for(const a of t)Object.prototype.hasOwnProperty.call(o,a)||(o[a]=null!=(i=n[a])?i:r,s=!0);return s?o:e}const d=Object.prototype.hasOwnProperty;function p(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function f(e,t,n){var r,i;if(p(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(let a=0;a<o.length;a++){const s=null!=(i=null==(r=null==n?void 0:n[o[a]])?void 0:r.equals)?i:p;if(!d.call(t,o[a])||!s(e[o[a]],t[o[a]]))return!1}return!0}function m(e,t,n){const r={},i=Object.keys(t);for(const o of i){const i=t[o],s=e[o];let a;if(n.has(o,s,i.decode))a=n.get(o);else{if(a=i.decode(s),i.equals&&n.has(o,s)){const e=n.get(o);i.equals(a,e)&&(a=e)}void 0!==a&&n.set(o,s,a,i.decode)}void 0===a&&void 0!==i.default&&(a=i.default),r[o]=a}return r}function g(){let e;return function(t,n,r){const i=m(t,n,r);return null!=e&&f(e,i)?e:(e=i,i)}}let y,v,_,b={};const w=(e,t,n)=>{if(y===t&&_===e&&v===n)return b;y=t,_=e;const r=e(null!=t?t:"");v=n;const i=function(e){if(e)return Object.fromEntries(e.split("\n").map(e=>e.split("\0")))}(n);for(let[o,s]of Object.entries(r)){(null==i?void 0:i[o])&&(delete r[o],o=i[o],r[o]=s);const e=b[o];f(s,e)&&(r[o]=e)}return b=r,r};function x(e,t){null==t&&(t={});const n={...e,...t};return t.params&&e.params&&(n.params={...e.params,...t.params}),n}const S={adapter:{},options:{searchStringToObject:function(e){const t=new URLSearchParams(e),n={};for(let[r,i]of t)Object.prototype.hasOwnProperty.call(n,r)?Array.isArray(n[r])?n[r].push(i):n[r]=[n[r],i]:n[r]=i;return n},objectToSearchString:function(e){const t=new URLSearchParams,n=Object.entries(e);for(const[r,i]of n)if(void 0!==i&&null!==i)if(Array.isArray(i))for(const e of i)t.append(r,null!=e?e:"");else t.append(r,i);return t.toString()},updateType:"pushIn",includeKnownParams:void 0,includeAllParams:!1,removeDefaultsFromUrl:!1,enableBatching:!1,skipUpdateWhenNoChange:!0}},E=c.createContext(S);function T({children:e,adapter:t,options:n}){const{adapter:r,options:i}=c.useContext(E),o=c.useMemo(()=>({adapter:null!=t?t:r,options:x(i,n)}),[t,n,r,i]);return c.createElement(E.Provider,{value:o},e)}function M({children:e,adapter:t,options:n}){const r=t;return r?c.createElement(r,null,t=>c.createElement(T,{adapter:t,options:n},e)):c.createElement(T,{options:n},e)}function A({changes:e,updateType:t,currentSearchString:n,paramConfigMap:r,options:i}){const{searchStringToObject:o,objectToSearchString:s}=i;let a;null==t&&(t=i.updateType);const c=w(o,n),d=h(r,Object.keys(e),i.params);let p,f;if("function"===typeof e){p=e(m(c,d,u))}else p=e;return a=l(d,p),i.removeDefaultsFromUrl&&function(e,t){var n;for(const r in e)void 0!==(null==(n=t[r])?void 0:n.default)&&void 0!==e[r]&&t[r].encode(t[r].default)===e[r]&&(e[r]=void 0)}(a,d),a=function(e,t){var n;let r={};for(const i in e)null!=(null==(n=t[i])?void 0:n.urlName)?r[t[i].urlName]=e[i]:r[i]=e[i];return r}(a,d),f=s("push"===t||"replace"===t?a:{...c,...a}),(null==f?void 0:f.length)&&"?"!==f[0]&&(f=`?${f}`),null!=f?f:""}const k=e=>e(),C=e=>setTimeout(()=>e(),0),I=[];function P(e,t){const{adapter:n,options:r}=function(){const e=c.useContext(E);if(void 0===e||e===S)throw new Error("useQueryParams must be used within a QueryParamProvider");return e}(),[i]=(0,c.useState)(g),{paramConfigMap:o,options:a}=function(e,t){let n,r;void 0===e?(n={},r=t):Array.isArray(e)?(n=Object.fromEntries(e.map(e=>[e,"inherit"])),r=t):(n=e,r=t);return{paramConfigMap:n,options:r}}(e,t),l=(0,c.useMemo)(()=>x(r,a),[r,a]);let d=function(e,t){var n,r,i;const o={};let a=!1;const l=Object.keys(e);let c=l;if(t.includeKnownParams||!1!==t.includeKnownParams&&0===l.length){const e=Object.keys(null!=(n=t.params)?n:{});c.push(...e)}for(const u of c){const n=e[u];null==n||"object"!==typeof n?(a=!0,o[u]=null!=(i=null==(r=t.params)?void 0:r[u])?i:s):o[u]=n}return a?o:e}(o,l);const p=w(l.searchStringToObject,n.location.search,function(e){let t;for(const n in e)if(e[n].urlName){const r=`${e[n].urlName}\0${n}`;t?t.push(r):t=[r]}return t?t.join("\n"):void 0}(d));l.includeAllParams&&(d=h(d,Object.keys(p),l.params,s));const f=i(p,d,u),m=Object.keys(d).join("\0");(0,c.useEffect)(()=>{const e=m.split("\0");return u.registerParams(e),()=>{u.unregisterParams(e)}},[m]);const y={adapter:n,paramConfigMap:d,options:l},v=(0,c.useRef)(y);null==v.current&&(v.current=y),(0,c.useEffect)(()=>{v.current.adapter=n,v.current.paramConfigMap=d,v.current.options=l},[n,d,l]);const[_]=(0,c.useState)(()=>(e,t)=>{const{adapter:n,paramConfigMap:r,options:i}=v.current;null==t&&(t=i.updateType),function(e,{immediate:t}={}){I.push(e);let n=t?k:C;1===I.length&&n(()=>{const t=I.slice();I.length=0;const n=t[0].currentSearchString;let r;for(let e=0;e<t.length;++e)r=A(0===e?t[e]:{...t[e],currentSearchString:r});e.options.skipUpdateWhenNoChange&&r===n||function({searchString:e,adapter:t,navigate:n,updateType:r}){const i={...t.location,search:e};n&&("string"===typeof r&&r.startsWith("replace")?t.replace(i):t.push(i))}({searchString:null!=r?r:"",adapter:t[t.length-1].adapter,navigate:!0,updateType:t[t.length-1].updateType})})}({changes:e,updateType:t,currentSearchString:n.location.search,paramConfigMap:r,options:i,adapter:n},{immediate:!i.enableBatching})});return[f,_]}},28059(e,t,n){"use strict";n.d(t,{h:()=>s});var r=n(96540);function i(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const o=r.createContext(i()),s=()=>r.useContext(o)},28562(e,t,n){"use strict";n.d(t,{A:()=>y});var r=n(89610);const i=n(41917).A["__core-js_shared__"];var o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const s=function(e){return!!o&&o in e};var a=n(23149),l=n(81121),c=/^\[object .+?Constructor\]$/,u=Function.prototype,h=Object.prototype,d=u.toString,p=h.hasOwnProperty,f=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const m=function(e){return!(!(0,a.A)(e)||s(e))&&((0,r.A)(e)?f:c).test((0,l.A)(e))};const g=function(e,t){return null==e?void 0:e[t]};const y=function(e,t){var n=g(e,t);return m(n)?n:void 0}},28811(e,t,n){"use strict";n.d(t,{YW:()=>M});const r=Symbol.for("@ts-pattern/matcher"),i=Symbol.for("@ts-pattern/isVariadic"),o="@ts-pattern/anonymous-select-key",s=e=>Boolean(e&&"object"==typeof e),a=e=>e&&!!e[r],l=(e,t,n)=>{if(a(e)){const i=e[r](),{matched:o,selections:s}=i.match(t);return o&&s&&Object.keys(s).forEach(e=>n(e,s[e])),o}if(s(e)){if(!s(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let r=[],o=[],s=[];for(const t of e.keys()){const n=e[t];a(n)&&n[i]?s.push(n):s.length?o.push(n):r.push(n)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(t.length<r.length+o.length)return!1;const e=t.slice(0,r.length),i=0===o.length?[]:t.slice(-o.length),a=t.slice(r.length,0===o.length?1/0:-o.length);return r.every((t,r)=>l(t,e[r],n))&&o.every((e,t)=>l(e,i[t],n))&&(0===s.length||l(s[0],a,n))}return e.length===t.length&&e.every((e,r)=>l(e,t[r],n))}return Reflect.ownKeys(e).every(i=>{const o=e[i];return(i in t||a(s=o)&&"optional"===s[r]().matcherType)&&l(o,t[i],n);var s})}return Object.is(t,e)},c=e=>{var t,n,i;return s(e)?a(e)?null!=(t=null==(n=(i=e[r]()).getSelectionKeys)?void 0:n.call(i))?t:[]:Array.isArray(e)?u(e,c):u(Object.values(e),c):[]},u=(e,t)=>e.reduce((e,n)=>e.concat(t(n)),[]);function h(e){return Object.assign(e,{optional:()=>d(e),and:t=>p(e,t),or:t=>f(e,t),select:t=>void 0===t?g(e):g(t,e)})}function d(e){return h({[r]:()=>({match:t=>{let n={};const r=(e,t)=>{n[e]=t};return void 0===t?(c(e).forEach(e=>r(e,void 0)),{matched:!0,selections:n}):{matched:l(e,t,r),selections:n}},getSelectionKeys:()=>c(e),matcherType:"optional"})})}function p(...e){return h({[r]:()=>({match:t=>{let n={};const r=(e,t)=>{n[e]=t};return{matched:e.every(e=>l(e,t,r)),selections:n}},getSelectionKeys:()=>u(e,c),matcherType:"and"})})}function f(...e){return h({[r]:()=>({match:t=>{let n={};const r=(e,t)=>{n[e]=t};return u(e,c).forEach(e=>r(e,void 0)),{matched:e.some(e=>l(e,t,r)),selections:n}},getSelectionKeys:()=>u(e,c),matcherType:"or"})})}function m(e){return{[r]:()=>({match:t=>({matched:Boolean(e(t))})})}}function g(...e){const t="string"==typeof e[0]?e[0]:void 0,n=2===e.length?e[1]:"string"==typeof e[0]?void 0:e[0];return h({[r]:()=>({match:e=>{let r={[null!=t?t:o]:e};return{matched:void 0===n||l(n,e,(e,t)=>{r[e]=t}),selections:r}},getSelectionKeys:()=>[null!=t?t:o].concat(void 0===n?[]:c(n))})})}function y(e){return!0}function v(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"bigint"==typeof e}h(m(y)),h(m(y));const w=e=>Object.assign(h(e),{startsWith:t=>{return w(p(e,(n=t,m(e=>_(e)&&e.startsWith(n)))));var n},endsWith:t=>{return w(p(e,(n=t,m(e=>_(e)&&e.endsWith(n)))));var n},minLength:t=>w(p(e,(e=>m(t=>_(t)&&t.length>=e))(t))),length:t=>w(p(e,(e=>m(t=>_(t)&&t.length===e))(t))),maxLength:t=>w(p(e,(e=>m(t=>_(t)&&t.length<=e))(t))),includes:t=>{return w(p(e,(n=t,m(e=>_(e)&&e.includes(n)))));var n},regex:t=>{return w(p(e,(n=t,m(e=>_(e)&&Boolean(e.match(n))))));var n}}),x=(w(m(_)),e=>Object.assign(h(e),{between:(t,n)=>x(p(e,((e,t)=>m(n=>v(n)&&e<=n&&t>=n))(t,n))),lt:t=>x(p(e,(e=>m(t=>v(t)&&t<e))(t))),gt:t=>x(p(e,(e=>m(t=>v(t)&&t>e))(t))),lte:t=>x(p(e,(e=>m(t=>v(t)&&t<=e))(t))),gte:t=>x(p(e,(e=>m(t=>v(t)&&t>=e))(t))),int:()=>x(p(e,m(e=>v(e)&&Number.isInteger(e)))),finite:()=>x(p(e,m(e=>v(e)&&Number.isFinite(e)))),positive:()=>x(p(e,m(e=>v(e)&&e>0))),negative:()=>x(p(e,m(e=>v(e)&&e<0)))})),S=(x(m(v)),e=>Object.assign(h(e),{between:(t,n)=>S(p(e,((e,t)=>m(n=>b(n)&&e<=n&&t>=n))(t,n))),lt:t=>S(p(e,(e=>m(t=>b(t)&&t<e))(t))),gt:t=>S(p(e,(e=>m(t=>b(t)&&t>e))(t))),lte:t=>S(p(e,(e=>m(t=>b(t)&&t<=e))(t))),gte:t=>S(p(e,(e=>m(t=>b(t)&&t>=e))(t))),positive:()=>S(p(e,m(e=>b(e)&&e>0))),negative:()=>S(p(e,m(e=>b(e)&&e<0)))}));S(m(b)),h(m(function(e){return"boolean"==typeof e})),h(m(function(e){return"symbol"==typeof e})),h(m(function(e){return null==e})),h(m(function(e){return null!=e}));class E extends Error{constructor(e){let t;try{t=JSON.stringify(e)}catch(o){t=e}super(`Pattern matching error: no pattern matches value ${t}`),this.input=void 0,this.input=e}}const T={matched:!1,value:void 0};function M(e){return new A(e,T)}class A{constructor(e,t){this.input=void 0,this.state=void 0,this.input=e,this.state=t}with(...e){if(this.state.matched)return this;const t=e[e.length-1],n=[e[0]];let r;3===e.length&&"function"==typeof e[1]?r=e[1]:e.length>2&&n.push(...e.slice(1,e.length-1));let i=!1,s={};const a=(e,t)=>{i=!0,s[e]=t},c=!n.some(e=>l(e,this.input,a))||r&&!Boolean(r(this.input))?T:{matched:!0,value:t(i?o in s?s[o]:s:this.input,this.input)};return new A(this.input,c)}when(e,t){if(this.state.matched)return this;const n=Boolean(e(this.input));return new A(this.input,n?{matched:!0,value:t(this.input,this.input)}:T)}otherwise(e){return this.state.matched?this.state.value:e(this.input)}exhaustive(e=k){return this.state.matched?this.state.value:e(this.input)}run(){return this.exhaustive()}returnType(){return this}narrow(){return this}}function k(e){throw new E(e)}},28989(e,t){"use strict";var n=60103,r=60106,i=60107,o=60108,s=60114,a=60109,l=60110,c=60112,u=60113,h=60120,d=60115,p=60116,f=60121,m=60122,g=60117,y=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),r=_("react.portal"),i=_("react.fragment"),o=_("react.strict_mode"),s=_("react.profiler"),a=_("react.provider"),l=_("react.context"),c=_("react.forward_ref"),u=_("react.suspense"),h=_("react.suspense_list"),d=_("react.memo"),p=_("react.lazy"),f=_("react.block"),m=_("react.server.block"),g=_("react.fundamental"),y=_("react.debug_trace_mode"),v=_("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case d:case a:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return b(e)===l}},29008(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e){return e}},30016(e,t,n){"use strict";n.d(t,{A:()=>m});var r=n(96540),i=n(34164),o=n(21362),s=n(67695),a=n(13202),l=n(85078),c=n(99798),u=n(96148),h=n(32520);function d(e){return(0,h.Ay)("MuiBackdrop",e)}(0,u.A)("MuiBackdrop",["root","invisible"]);var p=n(74848);const f=(0,s.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),m=r.forwardRef(function(e,t){const n=(0,a.b)({props:e,name:"MuiBackdrop"}),{children:r,className:s,component:u="div",invisible:h=!1,open:m,components:g={},componentsProps:y={},slotProps:v={},slots:_={},TransitionComponent:b,transitionDuration:w,...x}=n,S={...n,component:u,invisible:h},E=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,o.A)(r,d,t)})(S),T={component:u,slots:{transition:b,root:g.Root,..._},slotProps:{...y,...v}},[M,A]=(0,l.A)("root",{elementType:f,externalForwardedProps:T,className:(0,i.A)(E.root,s),ownerState:S}),[k,C]=(0,l.A)("transition",{elementType:c.A,externalForwardedProps:T,ownerState:S});return(0,p.jsx)(k,{in:m,timeout:w,...x,...C,children:(0,p.jsx)(M,{"aria-hidden":!0,...A,ref:t,children:r})})})},30041(e,t,n){"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")}),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},30115(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=s.length)return!1;for(l=a;0!==l--;)if(!o(e[l],s[l]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!o(l.value[1],s.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((a=e.length)!=s.length)return!1;for(l=a;0!==l--;)if(e[l]!==s[l])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof s.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof s.toString)return e.toString()===s.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(l=a;0!==l--;)if(!Object.prototype.hasOwnProperty.call(s,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!o(e[c[l]],s[c[l]]))return!1;return!0}return e!==e&&s!==s}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},30301(e,t,n){"use strict";n.d(t,{A:()=>r});const r=n(24902).A},30318(e,t,n){"use strict";n.d(t,{N:()=>c});var r=n(14910),i=n(97806),o=n(18056);let s=-1;const a=new Set,l=e=>{if(function(e){return"pagehide"===e.type||"hidden"===r.j.document?.visibilityState}(e)&&s>-1){if("visibilitychange"===e.type||"pagehide"===e.type)for(const e of a)e();isFinite(s)||(s="visibilitychange"===e.type?e.timeStamp:0,(0,o.Q)("prerenderingchange",l,!0))}},c=()=>{if(r.j.document&&s<0){const e=(0,i.b)(),t=r.j.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(t=>"hidden"===t.name&&t.startTime>e)[0]?.startTime;s=t??("hidden"!==r.j.document?.visibilityState||r.j.document?.prerendering?1/0:0),(0,o.d)("visibilitychange",l,!0),(0,o.d)("pagehide",l,!0),(0,o.d)("prerenderingchange",l,!0)}return{get firstHiddenTime(){return s},onHidden(e){a.add(e)}}}},30655(e){"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(n){t=!1}e.exports=t},31158(e,t,n){"use strict";n.d(t,{LZ:()=>p,ao:()=>m,k1:()=>g});var r=n(7313),i=n(57968),o=n(74611),s=n(63944),a=n(71111),l=n(54704),c=n(46403),u=n(5915),h=n(88728);const d="_frozenDsc";function p(e,t){const n=e;(0,c.my)(n,d,t)}function f(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},o={environment:n.environment||r.U,release:n.release,public_key:i,trace_id:e,org_id:(0,a.ul)(t)};return t.emit("createDsc",o),o}function m(e,t){const n=t.getPropagationContext();return n.dsc||f(n.traceId,e)}function g(e){const t=(0,i.KU)();if(!t)return{};const n=(0,u.zU)(e),r=(0,u.et)(n),a=r.data,c=n.spanContext().traceState,p=c?.get("sentry.sample_rate")??a[o.sy]??a[o.Ef];function m(e){return"number"!==typeof p&&"string"!==typeof p||(e.sample_rate=`${p}`),e}const g=n[d];if(g)return m(g);const y=c?.get("sentry.dsc"),v=y&&(0,s.yD)(y);if(v)return m(v);const _=f(e.spanContext().traceId,t),b=a[o.i_],w=r.description;return"url"!==b&&w&&(_.transaction=w),(0,l.f)()&&(_.sampled=String((0,u.pK)(n)),_.sample_rand=c?.get("sentry.sample_rand")??(0,h.L)(n).scope?.getPropagationContext().sampleRand.toString()),m(_),t.emit("createDsc",_,n),_}},31349(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-tw",weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(e,t){return"W"===t?e+"\u9031":e+"\u65e5"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},relativeTime:{future:"%s\u5167",past:"%s\u524d",s:"\u5e7e\u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"},meridiem:function(e,t){var n=100*e+t;return n<600?"\u51cc\u6668":n<900?"\u65e9\u4e0a":n<1100?"\u4e0a\u5348":n<1300?"\u4e2d\u5348":n<1800?"\u4e0b\u5348":"\u665a\u4e0a"}};return n.default.locale(r,null,!0),r}(n(74353))},31355(e,t,n){"use strict";n.d(t,{A:()=>r});const r="$$material"},31635(e,t,n){"use strict";n.d(t,{C6:()=>i,Cl:()=>o,Tt:()=>s,fX:()=>l,zs:()=>a});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function a(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError},32389(e,t,n){"use strict";n.d(t,{x6:()=>F,TO:()=>A,r9:()=>D,Bd:()=>z});var r=n(96540),i=n(58168),o=n(34915),s=n.n(o),a=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function l(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(s()[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var i=new RegExp(a),o=null;null!==(o=i.exec(e));)if(o[0].trim())if(o[1]){var l=o[1].trim(),c=[l,""];l.indexOf("=")>-1&&(c=l.split("=")),t.attrs[c[0]]=c[1],i.lastIndex--}else o[2]&&(t.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return t}var c=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,u=/^\s*$/,h=Object.create(null);function d(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(d,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var p={parse:function(e,t){t||(t={}),t.components||(t.components=h);var n,r=[],i=[],o=-1,s=!1;if(0!==e.indexOf("<")){var a=e.indexOf("<");r.push({type:"text",content:-1===a?e:e.substring(0,a)})}return e.replace(c,function(a,c){if(s){if(a!=="</"+n.name+">")return;s=!1}var h,d="/"!==a.charAt(1),p=a.startsWith("\x3c!--"),f=c+a.length,m=e.charAt(f);if(p){var g=l(a);return o<0?(r.push(g),r):((h=i[o]).children.push(g),r)}if(d&&(o++,"tag"===(n=l(a)).type&&t.components[n.name]&&(n.type="component",s=!0),n.voidElement||s||!m||"<"===m||n.children.push({type:"text",content:e.slice(f,e.indexOf("<",f))}),0===o&&r.push(n),(h=i[o-1])&&h.children.push(n),i[o]=n),(!d||n.voidElement)&&(o>-1&&(n.voidElement||n.name===a.slice(2,-1))&&(o--,n=-1===o?r:i[o]),!s&&"<"!==m&&m)){h=-1===o?r:i[o].children;var y=e.indexOf("<",f),v=e.slice(f,-1===y?void 0:y);u.test(v)&&(v=" "),(y>-1&&o+h.length>=0||" "!==v)&&h.push({type:"text",content:v})}}),r},stringify:function(e){return e.reduce(function(e,t){return e+d("",t)},"")}};const f=p;function m(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"===typeof t[0]&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const g={};function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"===typeof t[0]&&g[t[0]]||("string"===typeof t[0]&&(g[t[0]]=new Date),m(...t))}const v=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}};function _(e,t,n){e.loadNamespaces(t,v(e,n))}function b(e,t,n,r){"string"===typeof n&&(n=[n]),n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,v(e,r))}const w=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,x={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},S=e=>x[e];let E,T={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(w,S)};function M(){return T}function A(){return E}function k(e,t){if(!e)return!1;const n=e.props?e.props.children:e.children;return t?n.length>0:!!n}function C(e){if(!e)return[];const t=e.props?e.props.children:e.children;return e.props&&e.props.i18nIsDynamicList?I(t):t}function I(e){return Array.isArray(e)?e:[e]}function P(e,t){if(!e)return"";let n="";const i=I(e),o=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return i.forEach((e,i)=>{if("string"===typeof e)n+=`${e}`;else if((0,r.isValidElement)(e)){const r=Object.keys(e.props).length,s=o.indexOf(e.type)>-1,a=e.props.children;if(!a&&s&&0===r)n+=`<${e.type}/>`;else if(a||s&&0===r)if(e.props.i18nIsDynamicList)n+=`<${i}></${i}>`;else if(s&&1===r&&"string"===typeof a)n+=`<${e.type}>${a}</${e.type}>`;else{const e=P(a,t);n+=`<${i}>${e}</${i}>`}else n+=`<${i}></${i}>`}else if(null===e)m("Trans: the passed in value is invalid - seems you passed in a null child.");else if("object"===typeof e){const{format:t,...r}=e,i=Object.keys(r);if(1===i.length){const e=t?`${i[0]}, ${t}`:i[0];n+=`{{${e}}}`}else m("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else m("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)}),n}function O(e,t,n,o,s,a){if(""===t)return[];const l=o.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(l.map(e=>`<${e}`).join("|")).test(t);if(!e&&!c&&!a)return[t];const u={};!function e(t){I(t).forEach(t=>{"string"!==typeof t&&(k(t)?e(C(t)):"object"!==typeof t||(0,r.isValidElement)(t)||Object.assign(u,t))})}(e);const h=f.parse(`<0>${t}</0>`),d={...u,...s};function p(e,t,n){const i=C(e),o=g(i,t.children,n);return function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every(e=>(0,r.isValidElement)(e))}(i)&&0===o.length||e.props&&e.props.i18nIsDynamicList?i:o}function m(e,t,n,o,s){e.dummy?(e.children=t,n.push((0,r.cloneElement)(e,{key:o},s?void 0:t))):n.push(...r.Children.map([e],e=>{const n={...e.props};return delete n.i18nIsDynamicList,r.createElement(e.type,(0,i.A)({},n,{key:o,ref:e.ref},s?{}:{children:t}))}))}function g(t,i,s){const u=I(t);return I(i).reduce((t,i,h)=>{const f=i.children&&i.children[0]&&i.children[0].content&&n.services.interpolator.interpolate(i.children[0].content,d,n.language);if("tag"===i.type){let a=u[parseInt(i.name,10)];1!==s.length||a||(a=s[0][i.name]),a||(a={});const y=0!==Object.keys(i.attrs).length?function(e,t){const n={...t};return n.props=Object.assign(e.props,t.props),n}({props:i.attrs},a):a,v=(0,r.isValidElement)(y),_=v&&k(i,!0)&&!i.voidElement,b=c&&"object"===typeof y&&y.dummy&&!v,w="object"===typeof e&&null!==e&&Object.hasOwnProperty.call(e,i.name);if("string"===typeof y){const e=n.services.interpolator.interpolate(y,d,n.language);t.push(e)}else if(k(y)||_){m(y,p(y,i,s),t,h)}else if(b){m(y,g(u,i.children,s),t,h)}else if(Number.isNaN(parseFloat(i.name)))if(w){m(y,p(y,i,s),t,h,i.voidElement)}else if(o.transSupportBasicHtmlNodes&&l.indexOf(i.name)>-1)if(i.voidElement)t.push((0,r.createElement)(i.name,{key:`${i.name}-${h}`}));else{const e=g(u,i.children,s);t.push((0,r.createElement)(i.name,{key:`${i.name}-${h}`},e))}else if(i.voidElement)t.push(`<${i.name} />`);else{const e=g(u,i.children,s);t.push(`<${i.name}>${e}</${i.name}>`)}else if("object"!==typeof y||v)m(y,f,t,h,1!==i.children.length||!f);else{const e=i.children[0]?f:null;e&&t.push(e)}}else if("text"===i.type){const e=o.transWrapTextNodes,s=a?o.unescape(n.services.interpolator.interpolate(i.content,d,n.language)):n.services.interpolator.interpolate(i.content,d,n.language);e?t.push((0,r.createElement)(e,{key:`${i.name}-${h}`},s)):t.push(s)}return t},[])}return C(g([{dummy:!0,children:e||[]}],h,I(e||[]))[0])}function R(e){let{children:t,count:n,parent:i,i18nKey:o,context:s,tOptions:a={},values:l,defaults:c,components:u,ns:h,i18n:d,t:p,shouldUnescape:f,...m}=e;const g=d||A();if(!g)return y("You will need to pass in an i18next instance by using i18nextReactModule"),t;const v=p||g.t.bind(g)||(e=>e);s&&(a.context=s);const _={...M(),...g.options&&g.options.react};let b=h||v.ns||g.options&&g.options.defaultNS;b="string"===typeof b?[b]:b||["translation"];const w=P(t,_),x=c||w||_.transEmptyNodeValue||o,{hashTransKey:S}=_,E=o||(S?S(w||x):w||x);g.options&&g.options.interpolation&&g.options.interpolation.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...g.options.interpolation.defaultVariables}:{...g.options.interpolation.defaultVariables});const T=l?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},k={...a,count:n,...l,...T,defaultValue:x,ns:b},C=E?v(E,k):x;u&&Object.keys(u).forEach(e=>{const t=u[e];"function"===typeof t.type||!t.props||!t.props.children||C.indexOf(`${e}/>`)<0&&C.indexOf(`${e} />`)<0||(u[e]=r.createElement(function(){return r.createElement(r.Fragment,null,t)},null))});const I=O(u||t,C,g,_,k,f),R=void 0!==i?i:_.defaultTransParent;return R?(0,r.createElement)(R,m,I):I}const D={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T={...T,...e}}(e.options.react),function(e){E=e}(e)}},L=(0,r.createContext)();class N{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function F(e){let{children:t,count:n,parent:i,i18nKey:o,context:s,tOptions:a={},values:l,defaults:c,components:u,ns:h,i18n:d,t:p,shouldUnescape:f,...m}=e;const{i18n:g,defaultNS:y}=(0,r.useContext)(L)||{},v=d||g||A(),_=p||v&&v.t.bind(v);return R({children:t,count:n,parent:i,i18nKey:o,context:s,tOptions:a,values:l,defaults:c,components:u,ns:h||_&&_.ns||y||v&&v.options&&v.options.defaultNS,i18n:v,t:p,shouldUnescape:f,...m})}function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:n}=t,{i18n:i,defaultNS:o}=(0,r.useContext)(L)||{},s=n||i||A();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new N),!s){y("You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>"string"===typeof t?t:t&&"object"===typeof t&&"string"===typeof t.defaultValue?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}s.options.react&&void 0!==s.options.react.wait&&y("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...M(),...s.options.react,...t},{useSuspense:l,keyPrefix:c}=a;let u=e||o||s.options&&s.options.defaultNS;u="string"===typeof u?[u]:u||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(u);const h=(s.isInitialized||s.initializedStoreOnce)&&u.every(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.languages[0],i=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;const s=(e,n)=>{const r=t.services.backendConnector.state[`${e}|${n}`];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!s(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||!(t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages))||!(!s(r,e)||i&&!s(o,e)))}(e,t,n):(y("i18n.languages were undefined or empty",t.languages),!0)}(e,s,a));function d(){return s.getFixedT(t.lng||null,"fallback"===a.nsMode?u:u[0],c)}const[p,f]=(0,r.useState)(d);let m=u.join();t.lng&&(m=`${t.lng}${m}`);const g=((e,t)=>{const n=(0,r.useRef)();return(0,r.useEffect)(()=>{n.current=t?n.current:e},[e,t]),n.current})(m),v=(0,r.useRef)(!0);(0,r.useEffect)(()=>{const{bindI18n:e,bindI18nStore:n}=a;function r(){v.current&&f(d)}return v.current=!0,h||l||(t.lng?b(s,t.lng,u,()=>{v.current&&f(d)}):_(s,u,()=>{v.current&&f(d)})),h&&g&&g!==m&&v.current&&f(d),e&&s&&s.on(e,r),n&&s&&s.store.on(n,r),()=>{v.current=!1,e&&s&&e.split(" ").forEach(e=>s.off(e,r)),n&&s&&n.split(" ").forEach(e=>s.store.off(e,r))}},[s,m]);const w=(0,r.useRef)(!0);(0,r.useEffect)(()=>{v.current&&!w.current&&f(d),w.current=!1},[s,c]);const x=[p,s,h];if(x.t=p,x.i18n=s,x.ready=h,h)return x;if(!h&&!l)return x;throw new Promise(e=>{t.lng?b(s,t.lng,u,()=>e()):_(s,u,()=>e())})}},32520(e,t,n){"use strict";n.d(t,{Ay:()=>s});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})(),o={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function s(e,t,n="Mui"){const r=o[t];return r?`${n}-${r}`:`${i.generate(e)}-${t}`}},33044(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e,t,n){return"function"===typeof e?e(t,n):e}},33092(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e){return"string"===typeof e}},33372(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(93781);function i(e=8,t=(0,r.LX)({spacing:e})){if(e.mui)return e;const n=(...e)=>{return(0===e.length?[1]:e).map(e=>{const n=t(e);return"number"===typeof n?`${n}px`:n}).join(" ")};return n.mui=!0,n}},33783(e,t,n){"use strict";var r=n(54094),i=n(50771),o=function(){throw Error("Airbridge can not be runned on server side")},s={init:o,get isSDKEnabled(){return window.airbridge.isSDKEnabled},startTracking:o,stopTracking:o,fetchResource:o,openBanner:o,setBanner:o,setDownloads:o,setDeeplinks:o,openDeeplink:o,sendWeb:o,createTouchpoint:o,setUserID:o,clearUserID:o,setUserEmail:o,clearUserEmail:o,setUserPhone:o,clearUserPhone:o,setUserAttribute:o,removeUserAttribute:o,clearUserAttributes:o,setUserAlias:o,removeUserAlias:o,clearUserAlias:o,clearUser:o,setUserId:o,setUserAttributes:o,setDeviceAlias:o,removeDeviceAlias:o,clearDeviceAlias:o,createTrackingLink:o,events:{send:o,signIn:o,signUp:o,signOut:o,purchased:o,addedToCart:o,productDetailsViewEvent:o,homeViewEvent:o,productListViewEvent:o,searchResultViewEvent:o,wait:o}};"undefined"!==typeof window&&function(){(0,r.default)();for(var e=function(e){var t=e.pop();if(!t||"isSDKEnabled"===t)return"continue";e.reduce(function(e,t){return e[t]},s)[t]=function(){var n=e.reduce(function(e,t){return e[t]},window.airbridge);n[t].apply(n,arguments)}},t=0,n=(0,i.FlatKeys)(s);t<n.length;t++)e(n[t])}();var a=s;t.Ay=a,window.createAirbridge},33831(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(76912),i=n(92049);const o=function(e,t,n){var o=t(e);return(0,i.A)(e)?o:(0,r.A)(o,n(e))}},33900(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"it",weekdays:"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"qualche secondo",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:function(e){return e+"\xba"}};return n.default.locale(r,null,!0),r}(n(74353))},34164(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function i(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{$:()=>i,A:()=>o});const o=i},34558(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(72559);const i=function(e,t){return e<t};var o=n(29008);const s=function(e){return e&&e.length?(0,r.A)(e,o.A,i):void 0}},34578(e,t,n){"use strict";function r(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}n.d(t,{A:()=>r})},34632(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="function"!==typeof t[0]&&t.shift(),i=t;if("undefined"===typeof r)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];var a="undefined"===typeof e,l="undefined"===typeof t;return a&&l&&r?r:i.reduce(function(e,n,r){if("undefined"===typeof n)throw new TypeError("An undefined reducer was passed in at index "+r);return n.apply(void 0,[e,t].concat(o))},a&&!l&&r?r:e)}}},34915(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},35345(e){"use strict";e.exports=URIError},35418(e,t,n){"use strict";n.d(t,{Ad:()=>T,Lw:()=>x,so:()=>S});var r=n(96540),i=n(74848),o=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))u.call(t,n)&&h(e,n,t[n]);return e},p=(e,t)=>s(e,a(t)),f=(0,r.memo)(({isOpen:e,overlayId:t,overlayDispatch:n,controller:o})=>((0,r.useEffect)(()=>{requestAnimationFrame(()=>{n({type:"OPEN",overlayId:t})})},[n,t]),(0,i.jsx)(o,{isOpen:e,overlayId:t,close:()=>n({type:"CLOSE",overlayId:t}),unmount:()=>n({type:"REMOVE",overlayId:t})})));function m(){return`overlay-kit-${Math.random().toString(36).slice(2,11)}`}function g(e){let[t,n]=function(e){function t(t){let n=Object.keys(t).reduce((n,r)=>{let i=`${e}:${r}`;return p(d({},n),{[i]:function(e){t[r](e)}})},{});!function(...e){let t="undefined"!=typeof document,n="undefined"!=typeof navigator&&"ReactNative"===navigator.product;!t&&!n||(0,r.useLayoutEffect)(...e)}(()=>(Object.keys(n).forEach(e=>{M.off(e,n[e]),M.on(e,n[e])}),()=>Object.keys(n).forEach(e=>{M.off(e,n[e])})),[n])}function n(t){return(...n)=>function(e,t){M.emit(e,t)}(`${e}:${String(t)}`,n[0])}return[t,n]}(`${e}/overlay-kit`),i=(e,t)=>{var r;let i=null!=(r=null==t?void 0:t.overlayId)?r:m(),o=m();return n("open")({controller:e,overlayId:i,componentKey:o}),i},o=n("close"),s=n("unmount"),a=n("closeAll"),l=n("unmountAll");return{open:i,openAsync:(e,t)=>((t,n,r)=>new Promise((i,o)=>{var s=t=>{try{l(r.next(t))}catch(e){o(e)}},a=t=>{try{l(r.throw(t))}catch(e){o(e)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,a);l((r=r.apply(t,n)).next())}))(this,null,function*(){return new Promise(n=>{i((t,...r)=>{let i=p(d({},t),{close:e=>{n(e),t.close()}});return e(i,...r)},t)})}),close:o,unmount:s,closeAll:a,unmountAll:l,useOverlayEvent:t}}var y=Symbol("Null");function v(){let[e,t]=function(e){let t=(0,r.createContext)(y);return t.displayName=null!=e?e:"SafeContext",[t.Provider,function(){let e=(0,r.useContext)(t);if(e===y){let e=new Error(`[${t.displayName}]: Provider not found.`);throw e.name="[Error] Context",e}return e}]}("overlay-kit/OverlayContext");return{OverlayContextProvider:e,useCurrentOverlay:function(){return t().current},useOverlayData:function(){return t().overlayData}}}var _=(e,t,n)=>{var r,i;let o=e.filter(e=>!0===t[e].isOpen),s=o.findIndex(e=>e===n);return s===o.length-1?null!=(r=o[s-1])?r:null:null!=(i=o.at(-1))?i:null};function b(e,t){switch(t.type){case"ADD":{if(null!=e.overlayData[t.overlay.id]&&!1===e.overlayData[t.overlay.id].isOpen){let n=e.overlayData[t.overlay.id];return null==n||n.isOpen?e:p(d({},e),{current:t.overlay.id,overlayData:p(d({},e.overlayData),{[t.overlay.id]:p(d({},n),{isOpen:!0})})})}let n=e.overlayOrderList.includes(t.overlay.id);if(n&&!0===e.overlayData[t.overlay.id].isOpen)throw new Error(`You can't open the multiple overlays with the same overlayId(${t.overlay.id}). Please set a different id.`);return{current:t.overlay.id,overlayOrderList:[...e.overlayOrderList.filter(e=>e!==t.overlay.id),t.overlay.id],overlayData:n?e.overlayData:p(d({},e.overlayData),{[t.overlay.id]:t.overlay})}}case"OPEN":{let n=e.overlayData[t.overlayId];return null==n||n.isOpen?e:p(d({},e),{overlayData:p(d({},e.overlayData),{[t.overlayId]:p(d({},n),{isOpen:!0,isMounted:!0})})})}case"CLOSE":{let n=e.overlayData[t.overlayId];if(null==n||!n.isOpen)return e;let r=_(e.overlayOrderList,e.overlayData,t.overlayId);return p(d({},e),{current:r,overlayData:p(d({},e.overlayData),{[t.overlayId]:p(d({},e.overlayData[t.overlayId]),{isOpen:!1})})})}case"REMOVE":{if(null==e.overlayData[t.overlayId])return e;let n=e.overlayOrderList.filter(e=>e!==t.overlayId);if(e.overlayOrderList.length===n.length)return e;let r=d({},e.overlayData);return delete r[t.overlayId],{current:_(e.overlayOrderList,e.overlayData,t.overlayId),overlayOrderList:n,overlayData:r}}case"CLOSE_ALL":return 0===Object.keys(e.overlayData).length?e:p(d({},e),{current:null,overlayData:Object.keys(e.overlayData).reduce((t,n)=>p(d({},t),{[n]:p(d({},e.overlayData[n]),{isOpen:!1})}),{})});case"REMOVE_ALL":return{current:null,overlayOrderList:[],overlayData:{}}}}function w(){let e=g(m()),{useOverlayEvent:t}=e,n=((e,t)=>{var n={};for(var r in e)c.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&l)for(var r of l(e))t.indexOf(r)<0&&u.call(e,r)&&(n[r]=e[r]);return n})(e,["useOverlayEvent"]),{OverlayContextProvider:o,useCurrentOverlay:s,useOverlayData:a}=v();return{overlay:n,OverlayProvider:function({children:e}){let[n,s]=(0,r.useReducer)(b,{current:null,overlayOrderList:[],overlayData:{}}),a=(0,r.useRef)(n),l=(0,r.useCallback)(({controller:e,overlayId:t,componentKey:n})=>{s({type:"ADD",overlay:{id:t,componentKey:n,isOpen:!1,isMounted:!1,controller:e}})},[]),c=(0,r.useCallback)(e=>{s({type:"CLOSE",overlayId:e})},[]),u=(0,r.useCallback)(e=>{s({type:"REMOVE",overlayId:e})},[]),h=(0,r.useCallback)(()=>{s({type:"CLOSE_ALL"})},[]),d=(0,r.useCallback)(()=>{s({type:"REMOVE_ALL"})},[]);return t({open:l,close:c,unmount:u,closeAll:h,unmountAll:d}),a.current!==n&&(n.overlayOrderList.forEach(e=>{let t=a.current.overlayData,r=n.overlayData;if(null!=t[e]&&!0===t[e].isMounted){let n=!1===t[e].isOpen,i=!0===r[e].isOpen;n&&i&&requestAnimationFrame(()=>{s({type:"OPEN",overlayId:e})})}}),a.current=n),(0,r.useEffect)(()=>()=>{s({type:"REMOVE_ALL"})},[]),(0,i.jsxs)(o,{value:n,children:[e,n.overlayOrderList.map(e=>{let{id:t,componentKey:r,isOpen:o,controller:a}=n.overlayData[e];return(0,i.jsx)(f,{isOpen:o,controller:a,overlayId:t,overlayDispatch:s},r)})]})},useCurrentOverlay:s,useOverlayData:a}}var{overlay:x,OverlayProvider:S,useCurrentOverlay:E,useOverlayData:T}=w();var M=function(e){return{all:e=e||new Map,on(t,n){let r=e.get(t);r?r.push(n):e.set(t,[n])},off(t,n){let r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit(t,n){let r=e.get(t);r&&r.slice().forEach(e=>{e(n)}),r=e.get("*"),r&&r.slice().forEach(e=>{e(t,n)})}}}()},35947(e,t,n){"use strict";n.d(t,{Er:()=>a,Mn:()=>l});var r=n(13235),i=n(64208),o=n(93177),s=n(14910);const a="__sentry_xhr_v3__";function l(e){(0,r.s5)("xhr",e),(0,r.AS)("xhr",c)}function c(){if(!s.j.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const s=new Error,l=1e3*(0,o.zf)(),c=(0,i.Kg)(n[0])?n[0].toUpperCase():void 0,u=function(e){if((0,i.Kg)(e))return e;try{return e.toString()}catch{}return}(n[1]);if(!c||!u)return e.apply(t,n);t[a]={method:c,url:u,request_headers:{}},"POST"===c&&u.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const h=()=>{const e=t[a];if(e&&4===t.readyState){try{e.status_code=t.status}catch{}const n={endTimestamp:1e3*(0,o.zf)(),startTimestamp:l,xhr:t,virtualError:s};(0,r.aj)("xhr",n)}};return"onreadystatechange"in t&&"function"===typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(h(),e.apply(t,n))}):t.addEventListener("readystatechange",h),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,o]=n,s=t[a];return s&&(0,i.Kg)(r)&&(0,i.Kg)(o)&&(s.request_headers[r.toLowerCase()]=o),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const i=t[a];if(!i)return e.apply(t,n);void 0!==n[0]&&(i.body=n[0]);const s={startTimestamp:1e3*(0,o.zf)(),xhr:t};return(0,r.aj)("xhr",s),e.apply(t,n)}})}},36227(e,t,n){"use strict";n.d(t,{Jz:()=>i,wq:()=>o});var r=n(9123);function i(e,t,n=(0,r.Wk)()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function o(e,{statusCode:t,headers:n},i=(0,r.Wk)()){const o={...e},s=n?.["x-sentry-rate-limits"],a=n?.["retry-after"];if(s)for(const r of s.trim().split(",")){const[e,t,,,n]=r.split(":",5),s=parseInt(e,10),a=1e3*(isNaN(s)?60:s);if(t)for(const r of t.split(";"))"metric_bucket"===r&&n&&!n.split(";").includes("custom")||(o[r]=i+a);else o.all=i+a}else a?o.all=i+function(e,t=(0,r.Wk)()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const i=Date.parse(`${e}`);return isNaN(i)?6e4:i-t}(a,i):429===t&&(o.all=i+6e4);return o}},36289(e,t,n){"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},36556(e,t,n){"use strict";var r=n(70453),i=n(73126),o=i([r("%String.prototype.indexOf%")]);e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&o(e,".prototype.")>-1?i([n]):n}},36801(e,t,n){"use strict";n.d(t,{$:()=>l,s:()=>a});var r=n(52904),i=n(8448),o=n(91931),s=n(94255);class a extends o.k{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||r.U,this.observers=[],this.state=e.state||l(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return null!=(e=null==(t=this.retryer)?void 0:t.continue())?e:this.execute()}async execute(){const e=()=>{var e;return this.retryer=(0,s.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t="loading"===this.state.status;try{var n,r,i,o,a,l,c,u;if(!t){var h,d,p,f;this.dispatch({type:"loading",variables:this.options.variables}),await(null==(h=(d=this.mutationCache.config).onMutate)?void 0:h.call(d,this.state.variables,this));const e=await(null==(p=(f=this.options).onMutate)?void 0:p.call(f,this.state.variables));e!==this.state.context&&this.dispatch({type:"loading",context:e,variables:this.state.variables})}const s=await e();return await(null==(n=(r=this.mutationCache.config).onSuccess)?void 0:n.call(r,s,this.state.variables,this.state.context,this)),await(null==(i=(o=this.options).onSuccess)?void 0:i.call(o,s,this.state.variables,this.state.context)),await(null==(a=(l=this.mutationCache.config).onSettled)?void 0:a.call(l,s,null,this.state.variables,this.state.context,this)),await(null==(c=(u=this.options).onSettled)?void 0:c.call(u,s,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:s}),s}catch(S){try{var m,g,y,v,_,b,w,x;throw await(null==(m=(g=this.mutationCache.config).onError)?void 0:m.call(g,S,this.state.variables,this.state.context,this)),await(null==(y=(v=this.options).onError)?void 0:y.call(v,S,this.state.variables,this.state.context)),await(null==(_=(b=this.mutationCache.config).onSettled)?void 0:_.call(b,void 0,S,this.state.variables,this.state.context,this)),await(null==(w=(x=this.options).onSettled)?void 0:w.call(x,void 0,S,this.state.variables,this.state.context)),S}finally{this.dispatch({type:"error",error:S})}}}dispatch(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,s.v_)(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}})(this.state),i.j.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function l(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}},37007(e){"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,s,c;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"===typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"===typeof l)r(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},37445(e,t,n){"use strict";n.d(t,{n:()=>a});var r=n(96540),i=n(69242);const{useSyncExternalStoreWithSelector:o}=i,s=e=>e;function a(e,t=s,n){const i=o(e.subscribe,e.getState,e.getInitialState,t,n);return r.useDebugValue(i),i}},37498(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(65387),i=n(45996);const o=(0,r.A)();const s=function(e=o){return(0,i.A)(e)}},37685(e,t,n){"use strict";n.d(t,{Ay:()=>S});var r=n(96540),i=n(98587),o=n(58168);function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=n(25540),l=n(4146);function c(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}var u=r.createContext();var h={initialChunks:{}},d="PENDING",p="REJECTED";var f=function(e){return e};function m(e){var t=e.defaultResolveComponent,n=void 0===t?f:t,m=e.render,g=e.onLoad;function y(e,t){void 0===t&&(t={});var f=function(e){return"function"===typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),y={};function v(e){return t.cacheKey?t.cacheKey(e):f.resolve?f.resolve(e):"static"}function _(e,r,i){var o=t.resolveComponent?t.resolveComponent(e,r):n(e);return l(i,o,{preload:!0}),o}var b=function(e){var t=v(e),n=y[t];return n&&n.status!==p||((n=f.requireAsync(e)).status=d,y[t]=n,n.then(function(){n.status="RESOLVED"},function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:f.resolve(e),chunkName:f.chunkName(e),error:t?t.message:t}),n.status=p})),n},w=function(e){var t=function(t){return r.createElement(u.Consumer,null,function(n){return r.createElement(e,Object.assign({__chunkExtractor:n},t))})};return e.displayName&&(t.displayName=e.displayName+"WithChunkExtractor"),t}(function(e){function n(n){var r;return(r=e.call(this,n)||this).state={result:null,error:null,loading:!0,cacheKey:v(n)},c(!n.__chunkExtractor||f.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),n.__chunkExtractor?(!1===t.ssr||(f.requireAsync(n).catch(function(){return null}),r.loadSync(),n.__chunkExtractor.addChunk(f.chunkName(n))),s(r)):(!1!==t.ssr&&(f.isReady&&f.isReady(n)||f.chunkName&&h.initialChunks[f.chunkName(n)])&&r.loadSync(),r)}(0,a.A)(n,e),n.getDerivedStateFromProps=function(e,t){var n=v(e);return(0,o.A)({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===p&&this.setCache(),this.state.loading&&this.loadAsync()},r.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},r.componentWillUnmount=function(){this.mounted=!1},r.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},r.getCacheKey=function(){return v(this.props)},r.getCache=function(){return y[this.getCacheKey()]},r.setCache=function(e){void 0===e&&(e=void 0),y[this.getCacheKey()]=e},r.triggerOnLoad=function(){var e=this;g&&setTimeout(function(){g(e.state.result,e.props)})},r.loadSync=function(){if(this.state.loading)try{var e=_(f.requireSync(this.props),this.props,x);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:f.resolve(this.props),chunkName:f.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},r.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then(function(t){var n=_(t,e.props,x);e.safeSetState({result:n,loading:!1},function(){return e.triggerOnLoad()})}).catch(function(t){return e.safeSetState({error:t,loading:!1})}),t},r.resolveAsync=function(){var e=this.props,t=(e.__chunkExtractor,e.forwardedRef,(0,i.A)(e,["__chunkExtractor","forwardedRef"]));return b(t)},r.render=function(){var e=this.props,n=e.forwardedRef,r=e.fallback,s=(e.__chunkExtractor,(0,i.A)(e,["forwardedRef","fallback","__chunkExtractor"])),a=this.state,l=a.error,c=a.loading,u=a.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===d)throw this.loadAsync();if(l)throw l;var h=r||t.fallback||null;return c?h:m({fallback:h,result:u,options:t,props:(0,o.A)({},s,{ref:n})})},n}(r.Component)),x=r.forwardRef(function(e,t){return r.createElement(w,Object.assign({forwardedRef:t},e))});return x.displayName="Loadable",x.preload=function(e){x.load(e)},x.load=function(e){return b(e)},x}return{loadable:y,lazy:function(e,t){return y(e,(0,o.A)({},t,{suspense:!0}))}}}var g=m({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,n=e.props;return r.createElement(t,n)}}),y=g.loadable,v=g.lazy,_=m({onLoad:function(e,t){e&&t.forwardedRef&&("function"===typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),b=_.loadable,w=_.lazy;var x=y;x.lib=b,v.lib=w;const S=x},37720(e,t,n){"use strict";var r=n(74765),i=n(920),o=Object.prototype.hasOwnProperty,s=Array.isArray,a=i(),l=function(e,t){return a.set(e,t),e},c=function(e){return a.has(e)},u=function(e){return a.get(e)},h=function(e,t){a.set(e,t)},d=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),p=function(e,t){for(var n=t&&t.plainObjects?{__proto__:null}:{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n},f=1024;e.exports={arrayToObject:p,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},combine:function(e,t,n,r){if(c(e)){var i=u(e)+1;return e[i]=t,h(e,i),e}var o=[].concat(e,t);return o.length>n?l(p(o,{plainObjects:r}),o.length-1):o},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];"object"===typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:o,prop:c}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(s(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},encode:function(e,t,n,i,o){if(0===e.length)return e;var s=e;if("symbol"===typeof e?s=Symbol.prototype.toString.call(e):"string"!==typeof e&&(s=String(e)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var a="",l=0;l<s.length;l+=f){for(var c=s.length>=f?s.slice(l,l+f):s,u=[],h=0;h<c.length;++h){var p=c.charCodeAt(h);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||o===r.RFC1738&&(40===p||41===p)?u[u.length]=c.charAt(h):p<128?u[u.length]=d[p]:p<2048?u[u.length]=d[192|p>>6]+d[128|63&p]:p<55296||p>=57344?u[u.length]=d[224|p>>12]+d[128|p>>6&63]+d[128|63&p]:(h+=1,p=65536+((1023&p)<<10|1023&c.charCodeAt(h)),u[u.length]=d[240|p>>18]+d[128|p>>12&63]+d[128|p>>6&63]+d[128|63&p])}a+=u.join("")}return a},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isOverflow:c,isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(s(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==typeof n&&"function"!==typeof n){if(s(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];if(c(t)){var i=u(t)+1;t[i]=n,h(t,i)}else(r&&(r.plainObjects||r.allowPrototypes)||!o.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t){if(c(n)){for(var a=Object.keys(n),d=r&&r.plainObjects?{__proto__:null,0:t}:{0:t},f=0;f<a.length;f++){d[parseInt(a[f],10)+1]=n[a[f]]}return l(d,u(n)+1)}return[t].concat(n)}var m=t;return s(t)&&!s(n)&&(m=p(t,r)),s(t)&&s(n)?(n.forEach(function(n,i){if(o.call(t,i)){var s=t[i];s&&"object"===typeof s&&n&&"object"===typeof n?t[i]=e(s,n,r):t.push(n)}else t[i]=n}),t):Object.keys(n).reduce(function(t,i){var s=n[i];return o.call(t,i)?t[i]=e(t[i],s,r):t[i]=s,t},m)}}},37796(e,t,n){"use strict";n.d(t,{A:()=>oe});var r=n(4076),i=n(836),o=n(79672);const s={black:"#000",white:"#fff"},a={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},l={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},c={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},u={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},h={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},d={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},p={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function f(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:s.white,default:s.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const m=f();function g(){return{text:{primary:s.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:s.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const y=g();function v(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,o.a)(e.main,i):"dark"===t&&(e.dark=(0,o.e$)(e.main,s)))}function _(e,t,n,r,i){const o=i.light||i,s=i.dark||1.5*i;t[n]||(t.hasOwnProperty(r)?t[n]=t[r]:"light"===n?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(100*o).toFixed(0)}%)`:"dark"===n&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(100*s).toFixed(0)}%)`))}function b(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:b=.2,colorSpace:w,...x}=e,S=e.primary||function(e="light"){return"dark"===e?{main:h[200],light:h[50],dark:h[400]}:{main:h[700],light:h[400],dark:h[800]}}(t),E=e.secondary||function(e="light"){return"dark"===e?{main:l[200],light:l[50],dark:l[400]}:{main:l[500],light:l[300],dark:l[700]}}(t),T=e.error||function(e="light"){return"dark"===e?{main:c[500],light:c[300],dark:c[700]}:{main:c[700],light:c[400],dark:c[800]}}(t),M=e.info||function(e="light"){return"dark"===e?{main:d[400],light:d[300],dark:d[700]}:{main:d[700],light:d[500],dark:d[900]}}(t),A=e.success||function(e="light"){return"dark"===e?{main:p[400],light:p[300],dark:p[700]}:{main:p[800],light:p[500],dark:p[900]}}(t),k=e.warning||function(e="light"){return"dark"===e?{main:u[400],light:u[300],dark:u[700]}:{main:"#ed6c02",light:u[500],dark:u[900]}}(t);function C(e){if(w)return function(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}(e);return(0,o.eM)(e,y.text.primary)>=n?y.text.primary:m.text.primary}const I=({color:e,name:t,mainShade:n=500,lightShade:i=300,darkShade:o=700})=>{if(!(e={...e}).main&&e[n]&&(e.main=e[n]),!e.hasOwnProperty("main"))throw new Error((0,r.A)(11,t?` (${t})`:"",n));if("string"!==typeof e.main)throw new Error((0,r.A)(12,t?` (${t})`:"",JSON.stringify(e.main)));return w?(_(w,e,"light",i,b),_(w,e,"dark",o,b)):(v(e,"light",i,b),v(e,"dark",o,b)),e.contrastText||(e.contrastText=C(e.main)),e};let P;"light"===t?P=f():"dark"===t&&(P=g());return(0,i.A)({common:{...s},mode:t,primary:I({color:S,name:"primary"}),secondary:I({color:E,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:T,name:"error"}),warning:I({color:k,name:"warning"}),info:I({color:M,name:"info"}),success:I({color:A,name:"success"}),grey:a,contrastThreshold:n,getContrastText:C,augmentColor:I,tonalOffset:b,...P},x)}function w(e=""){function t(...n){if(!n.length)return"";const r=n[0];return"string"!==typeof r||r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${r}`:`, var(--${e?`${e}-`:""}${r}${t(...n.slice(1))})`}return(n,...r)=>`var(--${e?`${e}-`:""}${n}${t(...r)})`}var x=n(33372),S=n(93781);function E(e){const t={};return Object.entries(e).forEach(e=>{const[n,r]=e;"object"===typeof r&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)}),t}const T=(e,t,n,r=[])=>{let i=e;t.forEach((e,o)=>{o===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])})};function M(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},s={};var a,l;return a=(e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r=`--${n?`${n}-`:""}${e.join("-")}`,l=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some(t=>e.includes(t))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t)(e,t);Object.assign(i,{[r]:l}),T(o,e,`var(${r})`,a),T(s,e,`var(${r}, ${l})`,a)}},l=e=>"vars"===e[0],function e(t,n=[],r=[]){Object.entries(t).forEach(([t,i])=>{(!l||l&&!l([...n,t]))&&void 0!==i&&null!==i&&("object"===typeof i&&Object.keys(i).length>0?e(i,[...n,t],Array.isArray(i)?[...r,t]:r):a([...n,t],i,r))})}(e),{css:i,vars:o,varsWithDefaults:s}}const A=function(e,t={}){const{getSelector:n=v,disableCssColorScheme:r,colorSchemeSelector:o,enableContrastVars:s}=t,{colorSchemes:a={},components:l,defaultColorScheme:c="light",...u}=e,{vars:h,css:d,varsWithDefaults:p}=M(u,t);let f=p;const m={},{[c]:g,...y}=a;if(Object.entries(y||{}).forEach(([e,n])=>{const{vars:r,css:o,varsWithDefaults:s}=M(n,t);f=(0,i.A)(f,s),m[e]={css:o,vars:r}}),g){const{css:e,vars:n,varsWithDefaults:r}=M(g,t);f=(0,i.A)(f,r),m[c]={css:e,vars:n}}function v(t,n){let r=o;if("class"===o&&(r=".%s"),"data"===o&&(r="[data-%s]"),o?.startsWith("data-")&&!o.includes("%s")&&(r=`[${o}="%s"]`),t){if("media"===r){if(e.defaultColorScheme===t)return":root";const r=a[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${r})`]:{":root":n}}}if(r)return e.defaultColorScheme===t?`:root, ${r.replace("%s",String(t))}`:r.replace("%s",String(t))}return":root"}return{vars:f,generateThemeVars:()=>{let e={...h};return Object.entries(m).forEach(([,{vars:t}])=>{e=(0,i.A)(e,t)}),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function o(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:{...n}}:e)}o(n(void 0,{...d}),d);const{[i]:l,...c}=m;if(l){const{css:e}=l,t=a[i]?.palette?.mode,s=!r&&t?{colorScheme:t,...e}:{...e};o(n(i,{...s}),s)}return Object.entries(c).forEach(([e,{css:t}])=>{const i=a[e]?.palette?.mode,s=!r&&i?{colorScheme:i,...t}:{...t};o(n(e,{...s}),s)}),s&&t.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),t}}};var k=n(98762),C=n(95548),I=n(65387);var P=n(93445);function O(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}const R=["none",O(0,2,1,-1,0,1,1,0,0,1,3,0),O(0,3,1,-2,0,2,2,0,0,1,5,0),O(0,3,3,-2,0,3,4,0,0,1,8,0),O(0,2,4,-1,0,4,5,0,0,1,10,0),O(0,3,5,-1,0,5,8,0,0,1,14,0),O(0,3,5,-1,0,6,10,0,0,1,18,0),O(0,4,5,-2,0,7,10,1,0,2,16,1),O(0,5,5,-3,0,8,10,1,0,3,14,2),O(0,5,6,-3,0,9,12,1,0,3,16,2),O(0,6,6,-3,0,10,14,1,0,4,18,3),O(0,6,7,-4,0,11,15,1,0,4,20,3),O(0,7,8,-4,0,12,17,2,0,5,22,4),O(0,7,8,-4,0,13,19,2,0,5,24,4),O(0,7,9,-4,0,14,21,2,0,5,26,4),O(0,8,9,-5,0,15,22,2,0,6,28,5),O(0,8,10,-5,0,16,24,2,0,6,30,5),O(0,8,11,-5,0,17,26,2,0,6,32,5),O(0,9,11,-5,0,18,28,2,0,7,34,6),O(0,9,12,-6,0,19,29,2,0,7,36,6),O(0,10,13,-6,0,20,31,3,0,8,38,7),O(0,10,13,-6,0,21,33,3,0,8,40,7),O(0,10,14,-6,0,22,35,3,0,8,42,7),O(0,11,14,-7,0,23,36,3,0,9,44,8),O(0,11,15,-7,0,24,38,3,0,9,46,8)],D={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},L={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function N(e){return`${Math.round(e)}ms`}function F(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function z(e){const t={...D,...e.easing},n={...L,...e.duration};return{getAutoHeightDuration:F,create:(e=["all"],r={})=>{const{duration:i=n.standard,easing:o=t.easeInOut,delay:s=0,...a}=r;return(Array.isArray(e)?e:[e]).map(e=>`${e} ${"string"===typeof i?i:N(i)} ${o} ${"string"===typeof s?s:N(s)}`).join(",")},...e,easing:t,duration:n}}const U={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function j(e){return(0,i.Q)(e)||"undefined"===typeof e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)}function B(e={}){const t={...e};return function e(t){const n=Object.entries(t);for(let r=0;r<n.length;r++){const[o,s]=n[r];!j(s)||o.startsWith("unstable_")?delete t[o]:(0,i.Q)(s)&&(t[o]={...s},e(t[o]))}}(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(t,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}function V(e){return"number"===typeof e?`${(100*e).toFixed(0)}%`:`calc((${e}) * 100%)`}function H(e){Object.assign(e,{alpha(t,n){const r=this||e;return r.colorSpace?`oklch(from ${t} l c h / ${"string"===typeof n?`calc(${n})`:n})`:r.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${"string"===typeof n?`calc(${n})`:n})`:(0,o.X4)(t,(e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let n=0;for(let r=0;r<t.length;r+=1)n+=+t[r];return n})(n))},lighten(t,n){const r=this||e;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${t}, #fff ${V(n)})`:(0,o.a)(t,n)},darken(t,n){const r=this||e;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${t}, #000 ${V(n)})`:(0,o.e$)(t,n)}})}const $=function(e={},...t){const{breakpoints:n,mixins:o={},spacing:s,palette:a={},transitions:l={},typography:c={},shape:u,colorSpace:h,...d}=e;if(e.vars&&void 0===e.generateThemeVars)throw new Error((0,r.A)(20));const p=b({...a,colorSpace:h}),f=(0,I.A)(e);let m=(0,i.A)(f,{mixins:(g=f.breakpoints,y=o,{toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}},...y}),palette:p,shadows:R.slice(),typography:(0,P.A)(p,c),transitions:z(l),zIndex:{...U}});var g,y;return m=(0,i.A)(m,d),m=t.reduce((e,t)=>(0,i.A)(e,t),m),m.unstable_sxConfig={...k.A,...d?.unstable_sxConfig},m.unstable_sx=function(e){return(0,C.A)({sx:e,theme:this})},m.toRuntimeSource=B,H(m),m};var Y=n(34578);const G=[...Array(25)].map((e,t)=>{if(0===t)return"none";const n=(0,Y.A)(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function q(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function W(e){return"dark"===e?G:[]}function K(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Z=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],J=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if("class"===i&&(o=".%s"),"data"===i&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const i={};return Z(e.cssVarPrefix).forEach(e=>{i[e]=n[e],delete n[e]}),"media"===o?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",t)]:i,[`${r}, ${o.replace("%s",t)}`]:n}:{[r]:{...n,...i}}}if(o&&"media"!==o)return`${r}, ${o.replace("%s",String(t))}`}else if(t){if("media"===o)return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(o)return o.replace("%s",String(t))}return r};function X(e,t,n){!e[t]&&n&&(e[t]=n)}function Q(e){return"string"===typeof e&&e.startsWith("hsl")?(0,o.YL)(e):e}function ee(e,t){`${t}Channel`in e||(e[`${t}Channel`]=(0,o.Me)(Q(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().\nTo suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}const te=e=>{try{return e()}catch(t){}};function ne(e,t,n,r,i){if(!n)return;n=!0===n?{}:n;const o="dark"===i?"dark":"light";if(!r)return void(t[i]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r,colorSpace:i,...o}=e,s=b({...t,colorSpace:i});return{palette:s,opacity:{...q(s.mode),...n},overlays:r||W(s.mode),...o}}({...n,palette:{mode:o,...n?.palette},colorSpace:e}));const{palette:s,...a}=$({...r,palette:{mode:o,...n?.palette},colorSpace:e});return t[i]={...n,palette:s,opacity:{...q(o),...n?.opacity},overlays:n?.overlays||W(o)},a}function re(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:s,disableCssColorScheme:a=!1,cssVarPrefix:l="mui",nativeColor:c=!1,shouldSkipGeneratingVar:u=K,colorSchemeSelector:h=(n.light&&n.dark?"media":void 0),rootSelector:d=":root",...p}=e,f=Object.keys(n)[0],g=s||(n.light&&"light"!==f?"light":f),v=((e="mui")=>w(e))(l),{[g]:_,light:b,dark:T,...M}=n,I={...M};let P,O=_;if(("dark"===g&&!("dark"in n)||"light"===g&&!("light"in n))&&(O=!0),!O)throw new Error((0,r.A)(21,g));c&&(P="oklch");const R=ne(P,I,O,p,g);b&&!I.light&&ne(P,I,b,void 0,"light"),T&&!I.dark&&ne(P,I,T,void 0,"dark");let D={defaultColorScheme:g,...R,cssVarPrefix:l,colorSchemeSelector:h,rootSelector:d,getCssVar:v,colorSchemes:I,font:{...E(R.typography),...R.font},spacing:(L=p.spacing,"number"===typeof L?`${L}px`:"string"===typeof L||"function"===typeof L||Array.isArray(L)?L:"8px")};var L;Object.keys(D.colorSchemes).forEach(e=>{const t=D.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return v(e,t[r][i])};function r(e,t,n){if(P){let r;return e===o.Cg&&(r=`transparent ${(100*(1-n)).toFixed(0)}%`),e===o.Nd&&(r=`#000 ${(100*n).toFixed(0)}%`),e===o.j4&&(r=`#fff ${(100*n).toFixed(0)}%`),`color-mix(in ${P}, ${t}, ${r})`}return e(t,n)}var i;if("light"===t.mode&&(X(t.common,"background","#fff"),X(t.common,"onBackground","#000")),"dark"===t.mode&&(X(t.common,"background","#000"),X(t.common,"onBackground","#fff")),i=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach(e=>{i[e]||(i[e]={})}),"light"===t.mode){X(t.Alert,"errorColor",r(o.Nd,t.error.light,.6)),X(t.Alert,"infoColor",r(o.Nd,t.info.light,.6)),X(t.Alert,"successColor",r(o.Nd,t.success.light,.6)),X(t.Alert,"warningColor",r(o.Nd,t.warning.light,.6)),X(t.Alert,"errorFilledBg",n("palette-error-main")),X(t.Alert,"infoFilledBg",n("palette-info-main")),X(t.Alert,"successFilledBg",n("palette-success-main")),X(t.Alert,"warningFilledBg",n("palette-warning-main")),X(t.Alert,"errorFilledColor",te(()=>t.getContrastText(t.error.main))),X(t.Alert,"infoFilledColor",te(()=>t.getContrastText(t.info.main))),X(t.Alert,"successFilledColor",te(()=>t.getContrastText(t.success.main))),X(t.Alert,"warningFilledColor",te(()=>t.getContrastText(t.warning.main))),X(t.Alert,"errorStandardBg",r(o.j4,t.error.light,.9)),X(t.Alert,"infoStandardBg",r(o.j4,t.info.light,.9)),X(t.Alert,"successStandardBg",r(o.j4,t.success.light,.9)),X(t.Alert,"warningStandardBg",r(o.j4,t.warning.light,.9)),X(t.Alert,"errorIconColor",n("palette-error-main")),X(t.Alert,"infoIconColor",n("palette-info-main")),X(t.Alert,"successIconColor",n("palette-success-main")),X(t.Alert,"warningIconColor",n("palette-warning-main")),X(t.AppBar,"defaultBg",n("palette-grey-100")),X(t.Avatar,"defaultBg",n("palette-grey-400")),X(t.Button,"inheritContainedBg",n("palette-grey-300")),X(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),X(t.Chip,"defaultBorder",n("palette-grey-400")),X(t.Chip,"defaultAvatarColor",n("palette-grey-700")),X(t.Chip,"defaultIconColor",n("palette-grey-700")),X(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),X(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),X(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),X(t.LinearProgress,"primaryBg",r(o.j4,t.primary.main,.62)),X(t.LinearProgress,"secondaryBg",r(o.j4,t.secondary.main,.62)),X(t.LinearProgress,"errorBg",r(o.j4,t.error.main,.62)),X(t.LinearProgress,"infoBg",r(o.j4,t.info.main,.62)),X(t.LinearProgress,"successBg",r(o.j4,t.success.main,.62)),X(t.LinearProgress,"warningBg",r(o.j4,t.warning.main,.62)),X(t.Skeleton,"bg",P?r(o.Cg,t.text.primary,.11):`rgba(${n("palette-text-primaryChannel")} / 0.11)`),X(t.Slider,"primaryTrack",r(o.j4,t.primary.main,.62)),X(t.Slider,"secondaryTrack",r(o.j4,t.secondary.main,.62)),X(t.Slider,"errorTrack",r(o.j4,t.error.main,.62)),X(t.Slider,"infoTrack",r(o.j4,t.info.main,.62)),X(t.Slider,"successTrack",r(o.j4,t.success.main,.62)),X(t.Slider,"warningTrack",r(o.j4,t.warning.main,.62));const e=P?r(o.Nd,t.background.default,.6825):(0,o.Y9)(t.background.default,.8);X(t.SnackbarContent,"bg",e),X(t.SnackbarContent,"color",te(()=>P?y.text.primary:t.getContrastText(e))),X(t.SpeedDialAction,"fabHoverBg",(0,o.Y9)(t.background.paper,.15)),X(t.StepConnector,"border",n("palette-grey-400")),X(t.StepContent,"border",n("palette-grey-400")),X(t.Switch,"defaultColor",n("palette-common-white")),X(t.Switch,"defaultDisabledColor",n("palette-grey-100")),X(t.Switch,"primaryDisabledColor",r(o.j4,t.primary.main,.62)),X(t.Switch,"secondaryDisabledColor",r(o.j4,t.secondary.main,.62)),X(t.Switch,"errorDisabledColor",r(o.j4,t.error.main,.62)),X(t.Switch,"infoDisabledColor",r(o.j4,t.info.main,.62)),X(t.Switch,"successDisabledColor",r(o.j4,t.success.main,.62)),X(t.Switch,"warningDisabledColor",r(o.j4,t.warning.main,.62)),X(t.TableCell,"border",r(o.j4,r(o.Cg,t.divider,1),.88)),X(t.Tooltip,"bg",r(o.Cg,t.grey[700],.92))}if("dark"===t.mode){X(t.Alert,"errorColor",r(o.j4,t.error.light,.6)),X(t.Alert,"infoColor",r(o.j4,t.info.light,.6)),X(t.Alert,"successColor",r(o.j4,t.success.light,.6)),X(t.Alert,"warningColor",r(o.j4,t.warning.light,.6)),X(t.Alert,"errorFilledBg",n("palette-error-dark")),X(t.Alert,"infoFilledBg",n("palette-info-dark")),X(t.Alert,"successFilledBg",n("palette-success-dark")),X(t.Alert,"warningFilledBg",n("palette-warning-dark")),X(t.Alert,"errorFilledColor",te(()=>t.getContrastText(t.error.dark))),X(t.Alert,"infoFilledColor",te(()=>t.getContrastText(t.info.dark))),X(t.Alert,"successFilledColor",te(()=>t.getContrastText(t.success.dark))),X(t.Alert,"warningFilledColor",te(()=>t.getContrastText(t.warning.dark))),X(t.Alert,"errorStandardBg",r(o.Nd,t.error.light,.9)),X(t.Alert,"infoStandardBg",r(o.Nd,t.info.light,.9)),X(t.Alert,"successStandardBg",r(o.Nd,t.success.light,.9)),X(t.Alert,"warningStandardBg",r(o.Nd,t.warning.light,.9)),X(t.Alert,"errorIconColor",n("palette-error-main")),X(t.Alert,"infoIconColor",n("palette-info-main")),X(t.Alert,"successIconColor",n("palette-success-main")),X(t.Alert,"warningIconColor",n("palette-warning-main")),X(t.AppBar,"defaultBg",n("palette-grey-900")),X(t.AppBar,"darkBg",n("palette-background-paper")),X(t.AppBar,"darkColor",n("palette-text-primary")),X(t.Avatar,"defaultBg",n("palette-grey-600")),X(t.Button,"inheritContainedBg",n("palette-grey-800")),X(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),X(t.Chip,"defaultBorder",n("palette-grey-700")),X(t.Chip,"defaultAvatarColor",n("palette-grey-300")),X(t.Chip,"defaultIconColor",n("palette-grey-300")),X(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),X(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),X(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),X(t.LinearProgress,"primaryBg",r(o.Nd,t.primary.main,.5)),X(t.LinearProgress,"secondaryBg",r(o.Nd,t.secondary.main,.5)),X(t.LinearProgress,"errorBg",r(o.Nd,t.error.main,.5)),X(t.LinearProgress,"infoBg",r(o.Nd,t.info.main,.5)),X(t.LinearProgress,"successBg",r(o.Nd,t.success.main,.5)),X(t.LinearProgress,"warningBg",r(o.Nd,t.warning.main,.5)),X(t.Skeleton,"bg",P?r(o.Cg,t.text.primary,.13):`rgba(${n("palette-text-primaryChannel")} / 0.13)`),X(t.Slider,"primaryTrack",r(o.Nd,t.primary.main,.5)),X(t.Slider,"secondaryTrack",r(o.Nd,t.secondary.main,.5)),X(t.Slider,"errorTrack",r(o.Nd,t.error.main,.5)),X(t.Slider,"infoTrack",r(o.Nd,t.info.main,.5)),X(t.Slider,"successTrack",r(o.Nd,t.success.main,.5)),X(t.Slider,"warningTrack",r(o.Nd,t.warning.main,.5));const e=P?r(o.j4,t.background.default,.985):(0,o.Y9)(t.background.default,.98);X(t.SnackbarContent,"bg",e),X(t.SnackbarContent,"color",te(()=>P?m.text.primary:t.getContrastText(e))),X(t.SpeedDialAction,"fabHoverBg",(0,o.Y9)(t.background.paper,.15)),X(t.StepConnector,"border",n("palette-grey-600")),X(t.StepContent,"border",n("palette-grey-600")),X(t.Switch,"defaultColor",n("palette-grey-300")),X(t.Switch,"defaultDisabledColor",n("palette-grey-600")),X(t.Switch,"primaryDisabledColor",r(o.Nd,t.primary.main,.55)),X(t.Switch,"secondaryDisabledColor",r(o.Nd,t.secondary.main,.55)),X(t.Switch,"errorDisabledColor",r(o.Nd,t.error.main,.55)),X(t.Switch,"infoDisabledColor",r(o.Nd,t.info.main,.55)),X(t.Switch,"successDisabledColor",r(o.Nd,t.success.main,.55)),X(t.Switch,"warningDisabledColor",r(o.Nd,t.warning.main,.55)),X(t.TableCell,"border",r(o.Nd,r(o.Cg,t.divider,1),.68)),X(t.Tooltip,"bg",r(o.Cg,t.grey[700],.92))}ee(t.background,"default"),ee(t.background,"paper"),ee(t.common,"background"),ee(t.common,"onBackground"),ee(t,"divider"),Object.keys(t).forEach(e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&X(t[e],"mainChannel",(0,o.Me)(Q(n.main))),n.light&&X(t[e],"lightChannel",(0,o.Me)(Q(n.light))),n.dark&&X(t[e],"darkChannel",(0,o.Me)(Q(n.dark))),n.contrastText&&X(t[e],"contrastTextChannel",(0,o.Me)(Q(n.contrastText))),"text"===e&&(ee(t[e],"primary"),ee(t[e],"secondary")),"action"===e&&(n.active&&ee(t[e],"active"),n.selected&&ee(t[e],"selected")))})}),D=t.reduce((e,t)=>(0,i.A)(e,t),D);const N={prefix:l,disableCssColorScheme:a,shouldSkipGeneratingVar:u,getSelector:J(D),enableContrastVars:c},{vars:F,generateThemeVars:z,generateStyleSheets:U}=A(D,N);return D.vars=F,Object.entries(D.colorSchemes[D.defaultColorScheme]).forEach(([e,t])=>{D[e]=t}),D.generateThemeVars=z,D.generateStyleSheets=U,D.generateSpacing=function(){return(0,x.A)(p.spacing,(0,S.LX)(this))},D.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(h),D.spacing=D.generateSpacing(),D.shouldSkipGeneratingVar=u,D.unstable_sxConfig={...k.A,...p?.unstable_sxConfig},D.unstable_sx=function(e){return(0,C.A)({sx:e,theme:this})},D.toRuntimeSource=B,D}function ie(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...!0!==n&&n,palette:b({...!0===n?{}:n.palette,mode:t})})}function oe(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:i=(n?void 0:{light:!0}),defaultColorScheme:o=n?.mode,...s}=e,a=o||"light",l=i?.[a],c={...i,...n?{[a]:{..."boolean"!==typeof l&&l,palette:n}}:void 0};if(!1===r){if(!("colorSchemes"in e))return $(e,...t);let r=n;"palette"in e||c[a]&&(!0!==c[a]?r=c[a].palette:"dark"===a&&(r={mode:"dark"}));const i=$({...e,palette:r},...t);return i.defaultColorScheme=a,i.colorSchemes=c,"light"===i.palette.mode&&(i.colorSchemes.light={...!0!==c.light&&c.light,palette:i.palette},ie(i,"dark",c.dark)),"dark"===i.palette.mode&&(i.colorSchemes.dark={...!0!==c.dark&&c.dark,palette:i.palette},ie(i,"light",c.light)),i}return n||"light"in c||"light"!==a||(c.light=!0),re({...s,colorSchemes:c,defaultColorScheme:a,..."boolean"!==typeof r&&r},...t)}},38446(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(89610),i=n(5254);const o=function(e){return null!=e&&(0,i.A)(e.length)&&!(0,r.A)(e)}},38823(e,t,n){"use strict";n.d(t,{A:()=>s});for(var r=n(8227),i=[],o=0;o<256;++o)i.push((o+256).toString(16).substr(1));const s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,r.A)(n))throw TypeError("Stringified UUID is invalid");return n}},39172(e,t,n){"use strict";n.d(t,{A:()=>q});const r=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var i=n(22080),o=n(55407);const s=function(e,t,n,r){var s=n.length,a=s,l=!r;if(null==e)return!a;for(e=Object(e);s--;){var c=n[s];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<a;){var u=(c=n[s])[0],h=e[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in e))return!1}else{var p=new i.A;if(r)var f=r(h,d,u,e,t,p);if(!(void 0===f?(0,o.A)(d,h,3,r,p):f))return!1}}return!0};var a=n(23149);const l=function(e){return e===e&&!(0,a.A)(e)};var c=n(27422);const u=function(e){for(var t=(0,c.A)(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,l(i)]}return t};const h=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const d=function(e){var t=u(e);return 1==t.length&&t[0][2]?h(t[0][0],t[0][1]):function(n){return n===e||s(n,e,t)}};var p=n(92049),f=n(61882),m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;const y=function(e,t){if((0,p.A)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,f.A)(e))||(g.test(e)||!m.test(e)||null!=t&&e in Object(t))};var v=n(62050);function _(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(_.Cache||v.A),n}_.Cache=v.A;const b=_;var w=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,x=/\\(\\)?/g;const S=function(e){var t=b(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(w,function(e,n,r,i){t.push(r?i.replace(x,"$1"):n||e)}),t});var E=n(78781);const T=function(e,t){return(0,p.A)(e)?e:y(e,t)?[e]:S((0,E.A)(e))};const M=function(e){if("string"==typeof e||(0,f.A)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};const A=function(e,t){for(var n=0,r=(t=T(t,e)).length;null!=e&&n<r;)e=e[M(t[n++])];return n&&n==r?e:void 0};const k=function(e,t,n){var r=null==e?void 0:A(e,t);return void 0===r?n:r};const C=function(e,t){return null!=e&&t in Object(e)};var I=n(25175),P=n(25353),O=n(5254);const R=function(e,t,n){for(var r=-1,i=(t=T(t,e)).length,o=!1;++r<i;){var s=M(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&(0,O.A)(i)&&(0,P.A)(s,i)&&((0,p.A)(e)||(0,I.A)(e))};const D=function(e,t){return null!=e&&R(e,t,C)};const L=function(e,t){return y(e)&&l(t)?h(M(e),t):function(n){var r=k(n,e);return void 0===r&&r===t?D(n,e):(0,o.A)(t,r,3)}};var N=n(29008);const F=function(e){return function(t){return null==t?void 0:t[e]}};const z=function(e){return function(t){return A(t,e)}};const U=function(e){return y(e)?F(M(e)):z(e)};const j=function(e){return"function"==typeof e?e:null==e?N.A:"object"==typeof e?(0,p.A)(e)?L(e[0],e[1]):d(e):U(e)};var B=n(50751),V=1/0;const H=function(e){return e?(e=(0,B.A)(e))===V||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};const $=function(e){var t=H(e),n=t%1;return t===t?n?t-n:t:0};var Y=Math.max,G=Math.min;const q=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return void 0!==n&&(o=$(n),o=n<0?Y(i+o,0):G(o,i-1)),r(e,j(t,3),o,!0)}},39241(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(18139);const i={theme:void 0};const o=function(e){let t,n;return function(o){let s=t;return void 0!==s&&o.theme===n||(i.theme=o.theme,s=(0,r.A)(e(i)),t=s,n=o.theme),s}}},39407(e,t,n){"use strict";n.d(t,{A:()=>r});const r=n(97102).A},39612(e,t,n){"use strict";n.d(t,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(97102),i=n(7196);function o(e,t,n=!0){if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce((e,t)=>e&&e[t]?e[t]:null,e);if(null!=n)return n}return t.split(".").reduce((e,t)=>e&&null!=e[t]?e[t]:null,e)}function s(e,t,n,r=n){let i;return i="function"===typeof e?e(n):Array.isArray(e)?e[n]||r:o(e,n)||r,t&&(i=t(i,r,e)),i}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,a)||{};return(0,i.NI)(e,c,e=>{let i=s(u,l,e);return e===i&&"string"===typeof e&&(i=s(u,l,`${t}${"default"===e?"":(0,r.A)(e)}`,e)),!1===n?i:{[n]:i}})};return c.propTypes={},c.filterProps=[t],c}},40367(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e,t){return function(n){return e(t(n))}}},40860(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"vi",weekdays:"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),months:"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),weekStart:1,weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),ordinal:function(e){return e},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [n\u0103m] YYYY",LLL:"D MMMM [n\u0103m] YYYY HH:mm",LLLL:"dddd, D MMMM [n\u0103m] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},relativeTime:{future:"%s t\u1edbi",past:"%s tr\u01b0\u1edbc",s:"v\xe0i gi\xe2y",m:"m\u1ed9t ph\xfat",mm:"%d ph\xfat",h:"m\u1ed9t gi\u1edd",hh:"%d gi\u1edd",d:"m\u1ed9t ng\xe0y",dd:"%d ng\xe0y",M:"m\u1ed9t th\xe1ng",MM:"%d th\xe1ng",y:"m\u1ed9t n\u0103m",yy:"%d n\u0103m"}};return n.default.locale(r,null,!0),r}(n(74353))},41200(e,t,n){"use strict";n.d(t,{A:()=>l});var r=n(41917);const i=function(){return!1};var o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===o?r.A.Buffer:void 0;const l=(a?a.isBuffer:void 0)||i},41237(e){"use strict";e.exports=EvalError},41333(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(var r in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},41917(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(72136),i="object"==typeof self&&self&&self.Object===Object&&self;const o=r.A||i||Function("return this")()},42657(e,t,n){"use strict";function r(e,t){return"function"===typeof e?e(...t):!!e}n.d(t,{G:()=>r})},42706(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"da",weekdays:"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),weekdaysShort:"s\xf8n._man._tirs._ons._tors._fre._l\xf8r.".split("_"),weekdaysMin:"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj_juni_juli_aug._sept._okt._nov._dec.".split("_"),weekStart:1,yearStart:4,ordinal:function(e){return e+"."},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},relativeTime:{future:"om %s",past:"%s siden",s:"f\xe5 sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en m\xe5ned",MM:"%d m\xe5neder",y:"et \xe5r",yy:"%d \xe5r"}};return n.default.locale(r,null,!0),r}(n(74353))},43164(e,t,n){"use strict";n.d(t,{a9:()=>H,hT:()=>G,Pt:()=>$,wv:()=>q,YG:()=>Y,tC:()=>ne});var r=n(19282),i=n(51685),o=n(4693),s=n(14910);const a=(e,t,n,r)=>{let i,o;return s=>{t.value>=0&&(s||r)&&(o=t.value-(i??0),(o||void 0===i)&&(i=t.value,t.delta=o,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}};var l=n(30318);var c=n(97806),u=n(4692);const h=(e,t=-1)=>{const n=(0,u.z)();let r="navigate";n&&(s.j.document?.prerendering||(0,c.b)()>0?r="prerender":s.j.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-")));return{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},d=new WeakMap;function p(e,t){try{return d.get(e)||d.set(e,new t),d.get(e)}catch(n){return new t}}class f{constructor(){f.prototype.__init.call(this),f.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){if(e.hadRecentInput)return;const t=this._sessionEntries[0],n=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),this._onAfterProcessingUnexpectedShift?.(e)}}const m=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},g=e=>{let t=!1;return()=>{t||(e(),t=!0)}},y=e=>{s.j.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},v=[1800,3e3],_=[.1,.25],b=(e,t={})=>{((e,t={})=>{y(()=>{const n=(0,l.N)(),r=h("FCP");let i;const o=m("paint",e=>{for(const t of e)"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<n.firstHiddenTime&&(r.value=Math.max(t.startTime-(0,c.b)(),0),r.entries.push(t),i(!0)))});o&&(i=a(e,r,v,t.reportAllChanges))})})(g(()=>{const n=h("CLS",0);let r;const i=(0,l.N)(),o=p(t,f),c=e=>{for(const t of e)o._processEntry(t);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},u=m("layout-shift",c);u&&(r=a(e,n,_,t.reportAllChanges),i.onHidden(()=>{c(u.takeRecords()),r(!0)}),s.j?.setTimeout?.(r))}))};let w=0,x=1/0,S=0;const E=e=>{e.forEach(e=>{e.interactionId&&(x=Math.min(x,e.interactionId),S=Math.max(S,e.interactionId),w=S?(S-x)/7+1:0)})};let T;const M=()=>T?w:performance.interactionCount||0,A=()=>{"interactionCount"in performance||T||(T=m("event",E,{type:"event",buffered:!0,durationThreshold:0}))};let k=0;class C{constructor(){C.prototype.__init.call(this),C.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){k=M(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor((M()-k)/50));return this._longestInteractionList[e]}_processEntry(e){if(this._onBeforeProcessingEntry?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this._longestInteractionList.at(-1);let n=this._longestInteractionMap.get(e.interactionId);if(n||this._longestInteractionList.length<10||e.duration>t._latency){if(n?e.duration>n._latency?(n.entries=[e],n._latency=e.duration):e.duration===n._latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(n.id,n),this._longestInteractionList.push(n)),this._longestInteractionList.sort((e,t)=>t._latency-e._latency),this._longestInteractionList.length>10){const e=this._longestInteractionList.splice(10);for(const t of e)this._longestInteractionMap.delete(t.id)}this._onAfterProcessingINPCandidate?.(n)}}}var I=n(18056);const P=e=>{const t=s.j.requestIdleCallback||s.j.setTimeout;"hidden"===s.j.document?.visibilityState?e():(e=g(e),(0,I.d)("visibilitychange",e,{once:!0,capture:!0}),(0,I.d)("pagehide",e,{once:!0,capture:!0}),t(()=>{e(),(0,I.Q)("visibilitychange",e,{capture:!0}),(0,I.Q)("pagehide",e,{capture:!0})}))},O=[200,500];class R{_processEntry(e){this._onBeforeProcessingEntry?.(e)}}const D=[2500,4e3],L=[800,1800],N=e=>{s.j.document?.prerendering?y(()=>N(e)):"complete"!==s.j.document?.readyState?addEventListener("load",()=>N(e),!0):setTimeout(e)},F={},z={};let U,j,B,V;function H(e,t=!1){return Q("cls",e,K,U,t)}function $(e,t=!1){return Q("lcp",e,Z,j,t)}function Y(e){return Q("ttfb",e,J,B)}function G(e){return Q("inp",e,X,V)}function q(e,t){return ee(e,t),z[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);m(e,t=>{W(e,{entries:t})},t)}(e),z[e]=!0),te(e,t)}function W(e,t){const n=F[e];if(n?.length)for(const a of n)try{a(t)}catch(s){o.T&&r.Yz.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${(0,i.qQ)(a)}\nError:`,s)}}function K(){return b(e=>{W("cls",{metric:e}),U=e},{reportAllChanges:!0})}function Z(){return((e,t={})=>{y(()=>{const n=(0,l.N)(),r=h("LCP");let i;const o=p(t,R),s=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)o._processEntry(t),t.startTime<n.firstHiddenTime&&(r.value=Math.max(t.startTime-(0,c.b)(),0),r.entries=[t],i())},u=m("largest-contentful-paint",s);if(u){i=a(e,r,D,t.reportAllChanges);const n=g(()=>{s(u.takeRecords()),u.disconnect(),i(!0)}),o=e=>{e.isTrusted&&(P(n),(0,I.Q)(e.type,o,{capture:!0}))};for(const e of["keydown","click","visibilitychange"])(0,I.d)(e,o,{capture:!0})}})})(e=>{W("lcp",{metric:e}),j=e},{reportAllChanges:!0})}function J(){return((e,t={})=>{const n=h("TTFB"),r=a(e,n,L,t.reportAllChanges);N(()=>{const e=(0,u.z)();e&&(n.value=Math.max(e.responseStart-(0,c.b)(),0),n.entries=[e],r(!0))})})(e=>{W("ttfb",{metric:e}),B=e})}function X(){return((e,t={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=(0,l.N)();y(()=>{A();const r=h("INP");let i;const o=p(t,C),s=e=>{P(()=>{for(const n of e)o._processEntry(n);const t=o._estimateP98LongestInteraction();t&&t._latency!==r.value&&(r.value=t._latency,r.entries=t.entries,i())})},l=m("event",s,{durationThreshold:t.durationThreshold??40});i=a(e,r,O,t.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{s(l.takeRecords()),i(!0)}))})})(e=>{W("inp",{metric:e}),V=e})}function Q(e,t,n,r,i=!1){let o;return ee(e,t),z[e]||(o=n(),z[e]=!0),r&&t({metric:r}),te(e,t,i?o:void 0)}function ee(e,t){F[e]=F[e]||[],F[e].push(t)}function te(e,t,n){return()=>{n&&n();const r=F[e];if(!r)return;const i=r.indexOf(t);-1!==i&&r.splice(i,1)}}function ne(e){return"duration"in e}},43407(e,t,n){"use strict";var r;n.d(t,{A:()=>o});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}},43516(e,t,n){"use strict";n.d(t,{Ay:()=>l});var r=n(96540),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};var o=function(e){var t=e.animate,n=void 0===t||t,o=e.animateBegin,s=e.backgroundColor,a=void 0===s?"#f5f6f7":s,l=e.backgroundOpacity,c=void 0===l?1:l,u=e.baseUrl,h=void 0===u?"":u,d=e.children,p=e.foregroundColor,f=void 0===p?"#eee":p,m=e.foregroundOpacity,g=void 0===m?1:m,y=e.gradientRatio,v=void 0===y?2:y,_=e.gradientDirection,b=void 0===_?"left-right":_,w=e.uniqueKey,x=e.interval,S=void 0===x?.25:x,E=e.rtl,T=void 0!==E&&E,M=e.speed,A=void 0===M?1.2:M,k=e.style,C=void 0===k?{}:k,I=e.title,P=void 0===I?"Loading...":I,O=e.beforeMask,R=void 0===O?null:O,D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["animate","animateBegin","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","gradientDirection","uniqueKey","interval","rtl","speed","style","title","beforeMask"]),L=w||Math.random().toString(36).substring(6),N=L+"-diff",F=L+"-animated-diff",z=L+"-aria",U=T?{transform:"scaleX(-1)"}:null,j="0; "+S+"; 1",B=A+"s",V="top-bottom"===b?"rotate(90)":void 0;return(0,r.createElement)("svg",i({"aria-labelledby":z,role:"img",style:i(i({},C),U)},D),P?(0,r.createElement)("title",{id:z},P):null,R&&(0,r.isValidElement)(R)?R:null,(0,r.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+h+"#"+N+")",style:{fill:"url("+h+"#"+F+")"}}),(0,r.createElement)("defs",null,(0,r.createElement)("clipPath",{id:N},d),(0,r.createElement)("linearGradient",{id:F,gradientTransform:V},(0,r.createElement)("stop",{offset:"0%",stopColor:a,stopOpacity:c},n&&(0,r.createElement)("animate",{attributeName:"offset",values:-v+"; "+-v+"; 1",keyTimes:j,dur:B,repeatCount:"indefinite",begin:o})),(0,r.createElement)("stop",{offset:"50%",stopColor:f,stopOpacity:g},n&&(0,r.createElement)("animate",{attributeName:"offset",values:-v/2+"; "+-v/2+"; "+(1+v/2),keyTimes:j,dur:B,repeatCount:"indefinite",begin:o})),(0,r.createElement)("stop",{offset:"100%",stopColor:a,stopOpacity:c},n&&(0,r.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+v),keyTimes:j,dur:B,repeatCount:"indefinite",begin:o})))))},s=function(e){return e.children?(0,r.createElement)(o,i({},e)):(0,r.createElement)(a,i({},e))},a=function(e){return(0,r.createElement)(s,i({viewBox:"0 0 476 124"},e),(0,r.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,r.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,r.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,r.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,r.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,r.createElement)("circle",{cx:"20",cy:"20",r:"20"}))};const l=s},43626(e,t,n){"use strict";n.d(t,{t:()=>a});var r=n(94323),i=n(12295);const o=["online","offline"];class s extends r.Q{constructor(){super(),this.setup=e=>{if(!i.S$&&window.addEventListener){const t=()=>e();return o.forEach(e=>{window.addEventListener(e,t,!1)}),()=>{o.forEach(e=>{window.removeEventListener(e,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"===typeof e?this.setOnline(e):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine}}const a=new s},43674(e,t,n){"use strict";n.d(t,{M:()=>r});const r="10.36.0"},43741(e,t,n){"use strict";n.d(t,{J:()=>f});var r=n(83969),i=n(36289),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,i.A)(function(e){return a(e)?e:e.replace(o,"-$&").toLowerCase()}),u=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,function(e,t,n){return d={name:t,styles:n,next:d},t})}return 1===r.A[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return d={name:i.name,styles:i.styles,next:d},i.name;var o=n;if(void 0!==o.styles){var s=o.next;if(void 0!==s)for(;void 0!==s;)d={name:s.name,styles:s.styles,next:d},s=s.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s){var a=s;null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":l(a)&&(r+=c(o)+":"+u(o,a)+";")}else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var d=h(e,t,s);switch(o){case"animation":case"animationName":r+=c(o)+":"+d+";";break;default:r+=o+"{"+d+"}"}}else for(var p=0;p<s.length;p++)l(s[p])&&(r+=c(o)+":"+u(o,s[p])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=d,p=n(e);return d=a,h(e,t,p)}}var f=n;if(null==t)return f;var m=t[f];return void 0!==m?m:f}var d,p=/label:\s*([^\s;{]+)\s*(;|$)/g;function f(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";d=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=h(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++){if(i+=h(n,t,e[s]),r)i+=o[s]}p.lastIndex=0;for(var a,l="";null!==(a=p.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:d}}},43988(e,t,n){"use strict";n.d(t,{A:()=>r});const r=n(41917).A.Uint8Array},44173(e,t,n){"use strict";function r(e,t){return e.then(function(e){return[null,e]}).catch(function(e){return t&&Object.assign(e,t),[e,void 0]})}n.d(t,{to:()=>r})},44363(e,t,n){"use strict";e.exports=n(22799)},45228(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(a[c]=o[c]);if(t){s=t(o);for(var u=0;u<s.length;u++)r.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},45588(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var i;n.d(t,{Gh:()=>D,HS:()=>L,Oi:()=>a,Rr:()=>d,VV:()=>j,aE:()=>ee,pX:()=>B,pb:()=>A,rc:()=>i,tH:()=>U,ue:()=>y,yD:()=>R,zR:()=>s}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const o="popstate";function s(e){return void 0===e&&(e={}),p(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,e)}function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,i){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,t,n,s){void 0===s&&(s={});let{window:l=document.defaultView,v5Compat:d=!1}=s,p=l.history,f=i.Pop,m=null,g=y();function y(){return(p.state||{idx:null}).idx}function v(){f=i.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:f,location:b.location,delta:t})}function _(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),a(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(r({},p.state,{idx:g}),""));let b={get action(){return f},get location(){return e(l,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(o,v),m=e,()=>{l.removeEventListener(o,v),m=null}},createHref:e=>t(l,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=i.Push;let r=u(b.location,e,t);n&&n(r,e),g=y()+1;let o=c(r,g),s=b.createHref(r);try{p.pushState(o,"",s)}catch(a){if(a instanceof DOMException&&"DataCloneError"===a.name)throw a;l.location.assign(s)}d&&m&&m({action:f,location:b.location,delta:1})},replace:function(e,t){f=i.Replace;let r=u(b.location,e,t);n&&n(r,e),g=y();let o=c(r,g),s=b.createHref(r);p.replaceState(o,"",s),d&&m&&m({action:f,location:b.location,delta:0})},go:e=>p.go(e)};return b}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));const m=new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n,i){return void 0===n&&(n=[]),void 0===i&&(i={}),e.map((e,o)=>{let s=[...n,String(o)],l="string"===typeof e.id?e.id:s.join("-");if(a(!0!==e.index||!e.children,"Cannot specify children on an index route"),a(!i[l],'Found a route id collision on id "'+l+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=r({},e,t(e),{id:l});return i[l]=n,n}{let n=r({},e,t(e),{id:l,children:void 0});return i[l]=n,e.children&&(n.children=g(e.children,t,s,i)),n}})}function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let i=A(("string"===typeof t?d(t):t).pathname||"/",n);if(null==i)return null;let o=_(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=M(i);s=E(o[a],e,r)}return s}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(a(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let l=L([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(a(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),_(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:S(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=b(r.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),i&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,x=e=>"*"===e;function S(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=-2),t&&(r+=2),n.filter(e=>!x(e)).reduce((e,t)=>e+(w.test(t)?3:""===t?1:10),r)}function E(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:L([o,u.pathname]),pathnameBase:N(L([o,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(o=L([o,u.pathnameBase]))}return s}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:s,pattern:e}}function M(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const k=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function C(e,t){void 0===t&&(t="/");let n,{pathname:r,search:i="",hash:o=""}="string"===typeof e?d(e):e;if(r)if(s=r,k.test(s))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),l(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?I(r.substring(1),"/"):I(r,t)}else n=t;var s;return{pathname:n,search:F(i),hash:z(o)}}function I(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function D(e,t,n,i){let o;void 0===i&&(i=!1),"string"===typeof e?o=d(e):(o=r({},e),a(!o.pathname||!o.pathname.includes("?"),P("?","pathname","search",o)),a(!o.pathname||!o.pathname.includes("#"),P("#","pathname","hash",o)),a(!o.search||!o.search.includes("#"),P("#","search","hash",o)));let s,l=""===e||""===o.pathname,c=l?"/":o.pathname;if(null==c)s=n;else{let e=t.length-1;if(!i&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=C(o,s),h=c&&"/"!==c&&c.endsWith("/"),p=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!p||(u.pathname+="/"),u}const L=e=>e.join("/").replace(/\/\/+/g,"/"),N=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class U extends Error{}class j{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],H=new Set(V),$=["get",...V],Y=new Set($),G=new Set([301,302,303,307,308]),q=new Set([307,308]),W={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},K={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Z={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},J=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),Q="remix-router-transitions";function ee(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement,o=!n;let s;if(a(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;s=e=>({hasErrorBoundary:t(e)})}else s=X;let c,h,d,p={},m=g(e.routes,s,void 0,p),_=e.basename||"/",b=e.dataStrategy||ue,w=e.patchRoutesOnNavigation,x=r({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),S=null,E=new Set,T=null,M=null,k=null,C=null!=e.hydrationData,I=y(m,e.history.location,_),P=!1,O=null;if(null==I&&!w){let t=Ee(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=Se(m);I=n,O={[r.id]:t}}if(I&&!e.hydrationData){ct(I,m,e.history.location.pathname).active&&(I=null)}if(I)if(I.some(e=>e.route.lazy))h=!1;else if(I.some(e=>e.route.loader))if(x.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null;if(n){let e=I.findIndex(e=>void 0!==n[e.route.id]);h=I.slice(0,e+1).every(e=>!oe(e.route,t,n))}else h=I.every(e=>!oe(e.route,t,n))}else h=null!=e.hydrationData;else h=!0;else if(h=!1,I=[],x.v7_partialHydration){let t=ct(null,m,e.history.location.pathname);t.active&&t.matches&&(P=!0,I=t.matches)}let R,D,L={historyAction:e.history.action,location:e.history.location,matches:I,initialized:h,navigation:W,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||O,fetchers:new Map,blockers:new Map},N=i.Pop,F=!1,z=!1,U=new Map,j=null,V=!1,H=!1,$=[],Y=new Set,G=new Map,ee=0,re=-1,se=new Map,ae=new Set,ce=new Map,ge=new Map,ye=new Set,ve=new Map,Me=new Map;function Pe(e,t){void 0===t&&(t={}),L=r({},L,e);let n=[],i=[];x.v7_fetcherPersist&&L.fetchers.forEach((e,t)=>{"idle"===e.state&&(ye.has(t)?i.push(t):n.push(t))}),ye.forEach(e=>{L.fetchers.has(e)||G.has(e)||i.push(e)}),[...E].forEach(e=>e(L,{deletedFetchers:i,viewTransitionOpts:t.viewTransitionOpts,flushSync:!0===t.flushSync})),x.v7_fetcherPersist?(n.forEach(e=>L.fetchers.delete(e)),i.forEach(e=>Je(e))):i.forEach(e=>ye.delete(e))}function Oe(t,n,o){var s,a;let l,{flushSync:u}=void 0===o?{}:o,h=null!=L.actionData&&null!=L.navigation.formMethod&&De(L.navigation.formMethod)&&"loading"===L.navigation.state&&!0!==(null==(s=t.state)?void 0:s._isRedirect);l=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:h?L.actionData:null;let d=n.loaderData?be(L.loaderData,n.loaderData,n.matches||[],n.errors):L.loaderData,p=L.blockers;p.size>0&&(p=new Map(p),p.forEach((e,t)=>p.set(t,Z)));let f,g=!0===F||null!=L.navigation.formMethod&&De(L.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(c&&(m=c,c=void 0),V||N===i.Pop||(N===i.Push?e.history.push(t,t.state):N===i.Replace&&e.history.replace(t,t.state)),N===i.Pop){let e=U.get(L.location.pathname);e&&e.has(t.pathname)?f={currentLocation:L.location,nextLocation:t}:U.has(t.pathname)&&(f={currentLocation:t,nextLocation:L.location})}else if(z){let e=U.get(L.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),U.set(L.location.pathname,e)),f={currentLocation:L.location,nextLocation:t}}Pe(r({},n,{actionData:l,loaderData:d,historyAction:N,location:t,initialized:!0,navigation:W,revalidation:"idle",restoreScrollPosition:lt(t,n.matches||L.matches),preventScrollReset:g,blockers:p}),{viewTransitionOpts:f,flushSync:!0===u}),N=i.Pop,F=!1,z=!1,V=!1,H=!1,$=[]}async function Re(t,n,o){R&&R.abort(),R=null,N=t,V=!0===(o&&o.startUninterruptedRevalidation),function(e,t){if(T&&k){let n=at(e,t);T[n]=k()}}(L.location,L.matches),F=!0===(o&&o.preventScrollReset),z=!0===(o&&o.enableViewTransition);let s=c||m,a=o&&o.overrideNavigation,l=null!=o&&o.initialHydration&&L.matches&&L.matches.length>0&&!P?L.matches:y(s,n,_),u=!0===(o&&o.flushSync);if(l&&L.initialized&&!H&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(L.location,n)&&!(o&&o.submission&&De(o.submission.formMethod)))return void Oe(n,{matches:l},{flushSync:u});let h=ct(l,s,n.pathname);if(h.active&&h.matches&&(l=h.matches),!l){let{error:e,notFoundMatches:t,route:r}=ot(n.pathname);return void Oe(n,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:u})}R=new AbortController;let d,p=me(e.history,n,R.signal,o&&o.submission);if(o&&o.pendingError)d=[xe(l).route.id,{type:f.error,error:o.pendingError}];else if(o&&o.submission&&De(o.submission.formMethod)){let t=await async function(t,n,r,o,s,a){void 0===a&&(a={});qe();let l,c=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(n,r);if(Pe({navigation:c},{flushSync:!0===a.flushSync}),s){let e=await ut(o,n.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let t=xe(e.partialMatches).route.id;return{matches:e.partialMatches,pendingActionResult:[t,{type:f.error,error:e.error}]}}if(!e.matches){let{notFoundMatches:e,error:t,route:r}=ot(n.pathname);return{matches:e,pendingActionResult:[r.id,{type:f.error,error:t}]}}o=e.matches}let u=Ue(o,n);if(u.route.action||u.route.lazy){if(l=(await Ye("action",L,t,[u],o,null))[u.route.id],t.signal.aborted)return{shortCircuited:!0}}else l={type:f.error,error:Ee(405,{method:t.method,pathname:n.pathname,routeId:u.route.id})};if(Ie(l)){let n;if(a&&null!=a.replace)n=a.replace;else{n=fe(l.response.headers.get("Location"),new URL(t.url),_,e.history)===L.location.pathname+L.location.search}return await $e(t,l,!0,{submission:r,replace:n}),{shortCircuited:!0}}if(ke(l))throw Ee(400,{type:"defer-action"});if(Ce(l)){let e=xe(o,u.route.id);return!0!==(a&&a.replace)&&(N=i.Push),{matches:o,pendingActionResult:[e.route.id,l]}}return{matches:o,pendingActionResult:[u.route.id,l]}}(p,n,o.submission,l,h.active,{replace:o.replace,flushSync:u});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,r]=t.pendingActionResult;if(Ce(r)&&B(r.error)&&404===r.error.status)return R=null,void Oe(n,{matches:t.matches,loaderData:{},errors:{[e]:r.error}})}l=t.matches||l,d=t.pendingActionResult,a=Be(n,o.submission),u=!1,h.active=!1,p=me(e.history,p.url,p.signal)}let{shortCircuited:g,matches:v,loaderData:b,errors:w}=await async function(t,n,i,o,s,a,l,u,h,d,p){let f=s||Be(n,a),g=a||l||je(f),y=!V&&(!x.v7_partialHydration||!h);if(o){if(y){let e=ze(p);Pe(r({navigation:f},void 0!==e?{actionData:e}:{}),{flushSync:d})}let e=await ut(i,n.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let t=xe(e.partialMatches).route.id;return{matches:e.partialMatches,loaderData:{},errors:{[t]:e.error}}}if(!e.matches){let{error:e,notFoundMatches:t,route:r}=ot(n.pathname);return{matches:t,loaderData:{},errors:{[r.id]:e}}}i=e.matches}let v=c||m,[b,w]=ie(e.history,L,i,g,n,x.v7_partialHydration&&!0===h,x.v7_skipActionErrorRevalidation,H,$,Y,ye,ce,ae,v,_,p);if(st(e=>!(i&&i.some(t=>t.route.id===e))||b&&b.some(t=>t.route.id===e)),re=++ee,0===b.length&&0===w.length){let e=et();return Oe(n,r({matches:i,loaderData:{},errors:p&&Ce(p[1])?{[p[0]]:p[1].error}:null},we(p),e?{fetchers:new Map(L.fetchers)}:{}),{flushSync:d}),{shortCircuited:!0}}if(y){let e={};if(!o){e.navigation=f;let t=ze(p);void 0!==t&&(e.actionData=t)}w.length>0&&(e.fetchers=function(e){return e.forEach(e=>{let t=L.fetchers.get(e.key),n=Ve(void 0,t?t.data:void 0);L.fetchers.set(e.key,n)}),new Map(L.fetchers)}(w)),Pe(e,{flushSync:d})}w.forEach(e=>{Xe(e.key),e.controller&&G.set(e.key,e.controller)});let S=()=>w.forEach(e=>Xe(e.key));R&&R.signal.addEventListener("abort",S);let{loaderResults:E,fetcherResults:T}=await Ge(L,i,b,w,t);if(t.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",S);w.forEach(e=>G.delete(e.key));let M=Te(E);if(M)return await $e(t,M.result,!0,{replace:u}),{shortCircuited:!0};if(M=Te(T),M)return ae.add(M.key),await $e(t,M.result,!0,{replace:u}),{shortCircuited:!0};let{loaderData:A,errors:k}=_e(L,i,E,p,w,T,ve);ve.forEach((e,t)=>{e.subscribe(n=>{(n||e.done)&&ve.delete(t)})}),x.v7_partialHydration&&h&&L.errors&&(k=r({},L.errors,k));let C=et(),I=tt(re),P=C||I||w.length>0;return r({matches:i,loaderData:A,errors:k},P?{fetchers:new Map(L.fetchers)}:{})}(p,n,l,h.active,a,o&&o.submission,o&&o.fetcherSubmission,o&&o.replace,o&&!0===o.initialHydration,u,d);g||(R=null,Oe(n,r({matches:v||l},we(d),{loaderData:b,errors:w})))}function ze(e){return e&&!Ce(e[1])?{[e[0]]:e[1].data}:L.actionData?0===Object.keys(L.actionData).length?null:L.actionData:void 0}async function $e(o,s,l,c){let{submission:h,fetcherSubmission:d,preventScrollReset:p,replace:f}=void 0===c?{}:c;s.response.headers.has("X-Remix-Revalidate")&&(H=!0);let m=s.response.headers.get("Location");a(m,"Expected a Location header on the redirect Response"),m=fe(m,new URL(o.url),_,e.history);let g=u(L.location,m,{_isRedirect:!0});if(n){let n=!1;if(s.response.headers.has("X-Remix-Reload-Document"))n=!0;else if(J.test(m)){const r=e.history.createURL(m);n=r.origin!==t.location.origin||null==A(r.pathname,_)}if(n)return void(f?t.location.replace(m):t.location.assign(m))}R=null;let y=!0===f||s.response.headers.has("X-Remix-Replace")?i.Replace:i.Push,{formMethod:v,formAction:b,formEncType:w}=L.navigation;!h&&!d&&v&&b&&w&&(h=je(L.navigation));let x=h||d;if(q.has(s.response.status)&&x&&De(x.formMethod))await Re(y,g,{submission:r({},x,{formAction:m}),preventScrollReset:p||F,enableViewTransition:l?z:void 0});else{let e=Be(g,h);await Re(y,g,{overrideNavigation:e,fetcherSubmission:d,preventScrollReset:p||F,enableViewTransition:l?z:void 0})}}async function Ye(e,t,n,r,i,o){let a,l={};try{a=await he(b,e,t,n,r,i,o,p,s)}catch(c){return r.forEach(e=>{l[e.route.id]={type:f.error,error:c}}),l}for(let[s,u]of Object.entries(a))if(Ae(u)){let e=u.result;l[s]={type:f.redirect,response:pe(e,n,s,i,_,x.v7_relativeSplatPath)}}else l[s]=await de(u);return l}async function Ge(t,n,r,i,o){let s=t.matches,a=Ye("loader",t,o,r,n,null),l=Promise.all(i.map(async n=>{if(n.matches&&n.match&&n.controller){let r=(await Ye("loader",t,me(e.history,n.path,n.controller.signal),[n.match],n.matches,n.key))[n.match.route.id];return{[n.key]:r}}return Promise.resolve({[n.key]:{type:f.error,error:Ee(404,{pathname:n.path})}})})),c=await a,u=(await l).reduce((e,t)=>Object.assign(e,t),{});return await Promise.all([Le(n,c,o.signal,s,t.loaderData),Ne(n,u,i)]),{loaderResults:c,fetcherResults:u}}function qe(){H=!0,$.push(...st()),ce.forEach((e,t)=>{G.has(t)&&Y.add(t),Xe(t)})}function We(e,t,n){void 0===n&&(n={}),L.fetchers.set(e,t),Pe({fetchers:new Map(L.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Ke(e,t,n,r){void 0===r&&(r={});let i=xe(L.matches,t);Je(e),Pe({errors:{[i.route.id]:n},fetchers:new Map(L.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Ze(e){return ge.set(e,(ge.get(e)||0)+1),ye.has(e)&&ye.delete(e),L.fetchers.get(e)||K}function Je(e){let t=L.fetchers.get(e);!G.has(e)||t&&"loading"===t.state&&se.has(e)||Xe(e),ce.delete(e),se.delete(e),ae.delete(e),x.v7_fetcherPersist&&ye.delete(e),Y.delete(e),L.fetchers.delete(e)}function Xe(e){let t=G.get(e);t&&(t.abort(),G.delete(e))}function Qe(e){for(let t of e){let e=He(Ze(t).data);L.fetchers.set(t,e)}}function et(){let e=[],t=!1;for(let n of ae){let r=L.fetchers.get(n);a(r,"Expected fetcher: "+n),"loading"===r.state&&(ae.delete(n),e.push(n),t=!0)}return Qe(e),t}function tt(e){let t=[];for(let[n,r]of se)if(r<e){let e=L.fetchers.get(n);a(e,"Expected fetcher: "+n),"loading"===e.state&&(Xe(n),se.delete(n),t.push(n))}return Qe(t),t.length>0}function nt(e){L.blockers.delete(e),Me.delete(e)}function rt(e,t){let n=L.blockers.get(e)||Z;a("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(L.blockers);r.set(e,t),Pe({blockers:r})}function it(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===Me.size)return;Me.size>1&&l(!1,"A router only supports one blocker at a time");let i=Array.from(Me.entries()),[o,s]=i[i.length-1],a=L.blockers.get(o);return a&&"proceeding"===a.state?void 0:s({currentLocation:t,nextLocation:n,historyAction:r})?o:void 0}function ot(e){let t=Ee(404,{pathname:e}),n=c||m,{matches:r,route:i}=Se(n);return st(),{notFoundMatches:r,route:i,error:t}}function st(e){let t=[];return ve.forEach((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),ve.delete(r))}),t}function at(e,t){if(M){return M(e,t.map(e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,L.loaderData)))||e.key}return e.key}function lt(e,t){if(T){let n=at(e,t),r=T[n];if("number"===typeof r)return r}return null}function ct(e,t,n){if(w){if(!e){return{active:!0,matches:v(t,n,_,!0)||[]}}if(Object.keys(e[0].params).length>0){return{active:!0,matches:v(t,n,_,!0)}}}return{active:!1,matches:null}}async function ut(e,t,n,r){if(!w)return{type:"success",matches:e};let i=e;for(;;){let e=null==c,a=c||m,l=p;try{await w({signal:n,path:t,matches:i,fetcherKey:r,patch:(e,t)=>{n.aborted||le(e,t,a,l,s)}})}catch(o){return{type:"error",error:o,partialMatches:i}}finally{e&&!n.aborted&&(m=[...m])}if(n.aborted)return{type:"aborted"};let u=y(a,t,_);if(u)return{type:"success",matches:u};let h=v(a,t,_,!0);if(!h||i.length===h.length&&i.every((e,t)=>e.route.id===h[t].route.id))return{type:"success",matches:null};i=h}}return d={get basename(){return _},get future(){return x},get state(){return L},get routes(){return m},get window(){return t},initialize:function(){if(S=e.history.listen(t=>{let{action:n,location:r,delta:i}=t;if(D)return D(),void(D=void 0);l(0===Me.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let o=it({currentLocation:L.location,nextLocation:r,historyAction:n});if(o&&null!=i){let t=new Promise(e=>{D=e});return e.history.go(-1*i),void rt(o,{state:"blocked",location:r,proceed(){rt(o,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),t.then(()=>e.history.go(i))},reset(){let e=new Map(L.blockers);e.set(o,Z),Pe({blockers:e})}})}return Re(n,r)}),n){!function(e,t){try{let n=e.sessionStorage.getItem(Q);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(n){}}(t,U);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(Q,JSON.stringify(r))}catch(n){l(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(t,U);t.addEventListener("pagehide",e),j=()=>t.removeEventListener("pagehide",e)}return L.initialized||Re(i.Pop,L.location,{initialHydration:!0}),d},subscribe:function(e){return E.add(e),()=>E.delete(e)},enableScrollRestoration:function(e,t,n){if(T=e,k=t,M=n||null,!C&&L.navigation===W){C=!0;let e=lt(L.location,L.matches);null!=e&&Pe({restoreScrollPosition:e})}return()=>{T=null,k=null,M=null}},navigate:async function t(n,o){if("number"===typeof n)return void e.history.go(n);let s=te(L.location,L.matches,_,x.v7_prependBasename,n,x.v7_relativeSplatPath,null==o?void 0:o.fromRouteId,null==o?void 0:o.relative),{path:a,submission:l,error:c}=ne(x.v7_normalizeFormMethod,!1,s,o),h=L.location,d=u(L.location,a,o&&o.state);d=r({},d,e.history.encodeLocation(d));let p=o&&null!=o.replace?o.replace:void 0,f=i.Push;!0===p?f=i.Replace:!1===p||null!=l&&De(l.formMethod)&&l.formAction===L.location.pathname+L.location.search&&(f=i.Replace);let m=o&&"preventScrollReset"in o?!0===o.preventScrollReset:void 0,g=!0===(o&&o.flushSync),y=it({currentLocation:h,nextLocation:d,historyAction:f});if(!y)return await Re(f,d,{submission:l,pendingError:c,preventScrollReset:m,replace:o&&o.replace,enableViewTransition:o&&o.viewTransition,flushSync:g});rt(y,{state:"blocked",location:d,proceed(){rt(y,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),t(n,o)},reset(){let e=new Map(L.blockers);e.set(y,Z),Pe({blockers:e})}})},fetch:function(t,n,r,i){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Xe(t);let s=!0===(i&&i.flushSync),l=c||m,u=te(L.location,L.matches,_,x.v7_prependBasename,r,x.v7_relativeSplatPath,n,null==i?void 0:i.relative),h=y(l,u,_),d=ct(h,l,u);if(d.active&&d.matches&&(h=d.matches),!h)return void Ke(t,n,Ee(404,{pathname:u}),{flushSync:s});let{path:p,submission:f,error:g}=ne(x.v7_normalizeFormMethod,!0,u,i);if(g)return void Ke(t,n,g,{flushSync:s});let v=Ue(h,p),b=!0===(i&&i.preventScrollReset);f&&De(f.formMethod)?async function(t,n,r,i,o,s,l,u,h){function d(e){if(!e.route.action&&!e.route.lazy){let e=Ee(405,{method:h.formMethod,pathname:r,routeId:n});return Ke(t,n,e,{flushSync:l}),!0}return!1}if(qe(),ce.delete(t),!s&&d(i))return;let p=L.fetchers.get(t);We(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(h,p),{flushSync:l});let f=new AbortController,g=me(e.history,r,f.signal,h);if(s){let e=await ut(o,new URL(g.url).pathname,g.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void Ke(t,n,e.error,{flushSync:l});if(!e.matches)return void Ke(t,n,Ee(404,{pathname:r}),{flushSync:l});if(d(i=Ue(o=e.matches,r)))return}G.set(t,f);let v=ee,b=await Ye("action",L,g,[i],o,t),w=b[i.route.id];if(g.signal.aborted)return void(G.get(t)===f&&G.delete(t));if(x.v7_fetcherPersist&&ye.has(t)){if(Ie(w)||Ce(w))return void We(t,He(void 0))}else{if(Ie(w))return G.delete(t),re>v?void We(t,He(void 0)):(ae.add(t),We(t,Ve(h)),$e(g,w,!1,{fetcherSubmission:h,preventScrollReset:u}));if(Ce(w))return void Ke(t,n,w.error)}if(ke(w))throw Ee(400,{type:"defer-action"});let S=L.navigation.location||L.location,E=me(e.history,S,f.signal),T=c||m,M="idle"!==L.navigation.state?y(T,L.navigation.location,_):L.matches;a(M,"Didn't find any matches after fetcher action");let A=++ee;se.set(t,A);let k=Ve(h,w.data);L.fetchers.set(t,k);let[C,I]=ie(e.history,L,M,h,S,!1,x.v7_skipActionErrorRevalidation,H,$,Y,ye,ce,ae,T,_,[i.route.id,w]);I.filter(e=>e.key!==t).forEach(e=>{let t=e.key,n=L.fetchers.get(t),r=Ve(void 0,n?n.data:void 0);L.fetchers.set(t,r),Xe(t),e.controller&&G.set(t,e.controller)}),Pe({fetchers:new Map(L.fetchers)});let P=()=>I.forEach(e=>Xe(e.key));f.signal.addEventListener("abort",P);let{loaderResults:O,fetcherResults:D}=await Ge(L,M,C,I,E);if(f.signal.aborted)return;f.signal.removeEventListener("abort",P),se.delete(t),G.delete(t),I.forEach(e=>G.delete(e.key));let F=Te(O);if(F)return $e(E,F.result,!1,{preventScrollReset:u});if(F=Te(D),F)return ae.add(F.key),$e(E,F.result,!1,{preventScrollReset:u});let{loaderData:z,errors:U}=_e(L,M,O,void 0,I,D,ve);if(L.fetchers.has(t)){let e=He(w.data);L.fetchers.set(t,e)}tt(A),"loading"===L.navigation.state&&A>re?(a(N,"Expected pending action"),R&&R.abort(),Oe(L.navigation.location,{matches:M,loaderData:z,errors:U,fetchers:new Map(L.fetchers)})):(Pe({errors:U,loaderData:be(L.loaderData,z,M,U),fetchers:new Map(L.fetchers)}),H=!1)}(t,n,p,v,h,d.active,s,b,f):(ce.set(t,{routeId:n,path:p}),async function(t,n,r,i,o,s,l,c,u){let h=L.fetchers.get(t);We(t,Ve(u,h?h.data:void 0),{flushSync:l});let d=new AbortController,p=me(e.history,r,d.signal);if(s){let e=await ut(o,new URL(p.url).pathname,p.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void Ke(t,n,e.error,{flushSync:l});if(!e.matches)return void Ke(t,n,Ee(404,{pathname:r}),{flushSync:l});i=Ue(o=e.matches,r)}G.set(t,d);let f=ee,m=await Ye("loader",L,p,[i],o,t),g=m[i.route.id];ke(g)&&(g=await Fe(g,p.signal,!0)||g);G.get(t)===d&&G.delete(t);if(p.signal.aborted)return;if(ye.has(t))return void We(t,He(void 0));if(Ie(g))return re>f?void We(t,He(void 0)):(ae.add(t),void await $e(p,g,!1,{preventScrollReset:c}));if(Ce(g))return void Ke(t,n,g.error);a(!ke(g),"Unhandled fetcher deferred data"),We(t,He(g.data))}(t,n,p,v,h,d.active,s,b,f))},revalidate:function(){qe(),Pe({revalidation:"loading"}),"submitting"!==L.navigation.state&&("idle"!==L.navigation.state?Re(N||L.historyAction,L.navigation.location,{overrideNavigation:L.navigation,enableViewTransition:!0===z}):Re(L.historyAction,L.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Ze,deleteFetcher:function(e){let t=(ge.get(e)||0)-1;t<=0?(ge.delete(e),ye.add(e),x.v7_fetcherPersist||Je(e)):ge.set(e,t),Pe({fetchers:new Map(L.fetchers)})},dispose:function(){S&&S(),j&&j(),E.clear(),R&&R.abort(),L.fetchers.forEach((e,t)=>Je(t)),L.blockers.forEach((e,t)=>nt(t))},getBlocker:function(e,t){let n=L.blockers.get(e)||Z;return Me.get(e)!==t&&Me.set(e,t),n},deleteBlocker:nt,patchRoutes:function(e,t){let n=null==c;le(e,t,c||m,p,s),n&&(m=[...m],Pe({}))},_internalFetchControllers:G,_internalActiveDeferreds:ve,_internalSetRoutes:function(e){p={},c=g(e,s,void 0,p)}},d}Symbol("deferred");function te(e,t,n,r,i,o,s,a){let l,c;if(s){l=[];for(let e of t)if(l.push(e),e.route.id===s){c=e;break}}else l=t,c=t[t.length-1];let u=D(i||".",R(l,o),A(e.pathname,n)||e.pathname,"path"===a);if(null==i&&(u.search=e.search,u.hash=e.hash),(null==i||""===i||"."===i)&&c){let e=ze(u.search);if(c.route.index&&!e)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&e){let e=new URLSearchParams(u.search),t=e.getAll("index");e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();u.search=n?"?"+n:""}}return r&&"/"!==n&&(u.pathname="/"===u.pathname?n:L([n,u.pathname])),h(u)}function ne(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Re(r.formMethod))return{path:n,error:Ee(405,{method:r.formMethod})};let i,o,s=()=>({path:n,error:Ee(400,{type:"invalid-body"})}),l=r.formMethod||"get",c=e?l.toUpperCase():l.toLowerCase(),u=Me(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!De(c))return s();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"},""):String(r.body);return{path:n,submission:{formMethod:c,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!De(c))return s();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:c,formAction:u,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(m){return s()}}}if(a("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=ge(r.formData),o=r.formData;else if(r.body instanceof FormData)i=ge(r.body),o=r.body;else if(r.body instanceof URLSearchParams)i=r.body,o=ye(i);else if(null==r.body)i=new URLSearchParams,o=new FormData;else try{i=new URLSearchParams(r.body),o=ye(i)}catch(m){return s()}let p={formMethod:c,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:o,json:void 0,text:void 0};if(De(p.formMethod))return{path:n,submission:p};let f=d(n);return t&&f.search&&ze(f.search)&&i.append("index",""),f.search="?"+i,{path:h(f),submission:p}}function re(e,t,n){void 0===n&&(n=!1);let r=e.findIndex(e=>e.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function ie(e,t,n,i,o,s,a,l,c,u,h,d,p,f,m,g){let v=g?Ce(g[1])?g[1].error:g[1].data:void 0,_=e.createURL(t.location),b=e.createURL(o),w=n;s&&t.errors?w=re(n,Object.keys(t.errors)[0],!0):g&&Ce(g[1])&&(w=re(n,g[0]));let x=g?g[1].statusCode:void 0,S=a&&x&&x>=400,E=w.filter((e,n)=>{let{route:o}=e;if(o.lazy)return!0;if(null==o.loader)return!1;if(s)return oe(o,t.loaderData,t.errors);if(function(e,t,n){let r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||c.some(t=>t===e.route.id))return!0;let a=t.matches[n],u=e;return ae(e,r({currentUrl:_,currentParams:a.params,nextUrl:b,nextParams:u.params},i,{actionResult:v,actionStatus:x,defaultShouldRevalidate:!S&&(l||_.pathname+_.search===b.pathname+b.search||_.search!==b.search||se(a,u))}))}),T=[];return d.forEach((e,o)=>{if(s||!n.some(t=>t.route.id===e.routeId)||h.has(o))return;let a=y(f,e.path,m);if(!a)return void T.push({key:o,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let c=t.fetchers.get(o),d=Ue(a,e.path),g=!1;p.has(o)?g=!1:u.has(o)?(u.delete(o),g=!0):g=c&&"idle"!==c.state&&void 0===c.data?l:ae(d,r({currentUrl:_,currentParams:t.matches[t.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},i,{actionResult:v,actionStatus:x,defaultShouldRevalidate:!S&&l})),g&&T.push({key:o,routeId:e.routeId,path:e.path,matches:a,match:d,controller:new AbortController})}),[E,T]}function oe(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=null!=t&&void 0!==t[e.id],i=null!=n&&void 0!==n[e.id];return!(!r&&i)&&("function"===typeof e.loader&&!0===e.loader.hydrate||!r&&!i)}function se(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function ae(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function le(e,t,n,r,i){var o;let s;if(e){let t=r[e];a(t,"No route found to patch children into: routeId = "+e),t.children||(t.children=[]),s=t.children}else s=n;let l=g(t.filter(e=>!s.some(t=>ce(e,t))),i,[e||"_","patch",String((null==(o=s)?void 0:o.length)||"0")],r);s.push(...l)}function ce(e,t){return"id"in e&&"id"in t&&e.id===t.id||e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive&&(!(e.children&&0!==e.children.length||t.children&&0!==t.children.length)||e.children.every((e,n)=>{var r;return null==(r=t.children)?void 0:r.some(t=>ce(e,t))}))}async function ue(e){let{matches:t}=e,n=t.filter(e=>e.shouldLoad);return(await Promise.all(n.map(e=>e.resolve()))).reduce((e,t,r)=>Object.assign(e,{[n[r].route.id]:t}),{})}async function he(e,t,n,i,o,s,c,u,h,d){let p=s.map(e=>e.route.lazy?async function(e,t,n){if(!e.lazy)return;let i=await e.lazy();if(!e.lazy)return;let o=n[e.id];a(o,"No route found in manifest");let s={};for(let r in i){let e=void 0!==o[r]&&"hasErrorBoundary"!==r;l(!e,'Route "'+o.id+'" has a static property "'+r+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+r+'" will be ignored.'),e||m.has(r)||(s[r]=i[r])}Object.assign(o,s),Object.assign(o,r({},t(o),{lazy:void 0}))}(e.route,h,u):void 0),g=s.map((e,n)=>{let s=p[n],l=o.some(t=>t.route.id===e.route.id);return r({},e,{shouldLoad:l,resolve:async n=>(n&&"GET"===i.method&&(e.route.lazy||e.route.loader)&&(l=!0),l?async function(e,t,n,r,i,o){let s,l,c=r=>{let s,a=new Promise((e,t)=>s=t);l=()=>s(),t.signal.addEventListener("abort",l);let c=i=>"function"!==typeof r?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+n.route.id+"]")):r({request:t,params:n.params,context:o},...void 0!==i?[i]:[]),u=(async()=>{try{return{type:"data",result:await(i?i(e=>c(e)):c())}}catch(e){return{type:"error",result:e}}})();return Promise.race([u,a])};try{let i=n.route[e];if(r)if(i){let e,[t]=await Promise.all([c(i).catch(t=>{e=t}),r]);if(void 0!==e)throw e;s=t}else{if(await r,i=n.route[e],!i){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw Ee(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:f.data,result:void 0}}s=await c(i)}else{if(!i){let e=new URL(t.url);throw Ee(404,{pathname:e.pathname+e.search})}s=await c(i)}a(void 0!==s.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(u){return{type:f.error,result:u}}finally{l&&t.signal.removeEventListener("abort",l)}return s}(t,i,e,s,n,d):Promise.resolve({type:f.data,result:void 0}))})}),y=await e({matches:g,request:i,params:s[0].params,fetcherKey:c,context:d});try{await Promise.all(p)}catch(v){}return y}async function de(e){let{result:t,type:n}=e;if(Oe(t)){let e;try{let n=t.headers.get("Content-Type");e=n&&/\bapplication\/json\b/.test(n)?null==t.body?null:await t.json():await t.text()}catch(h){return{type:f.error,error:h}}return n===f.error?{type:f.error,error:new j(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:f.data,data:e,statusCode:t.status,headers:t.headers}}var r,i,o,s,a,l,c,u;return n===f.error?Pe(t)?t.data instanceof Error?{type:f.error,error:t.data,statusCode:null==(o=t.init)?void 0:o.status,headers:null!=(s=t.init)&&s.headers?new Headers(t.init.headers):void 0}:{type:f.error,error:new j((null==(r=t.init)?void 0:r.status)||500,void 0,t.data),statusCode:B(t)?t.status:void 0,headers:null!=(i=t.init)&&i.headers?new Headers(t.init.headers):void 0}:{type:f.error,error:t,statusCode:B(t)?t.status:void 0}:function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(t)?{type:f.deferred,deferredData:t,statusCode:null==(a=t.init)?void 0:a.status,headers:(null==(l=t.init)?void 0:l.headers)&&new Headers(t.init.headers)}:Pe(t)?{type:f.data,data:t.data,statusCode:null==(c=t.init)?void 0:c.status,headers:null!=(u=t.init)&&u.headers?new Headers(t.init.headers):void 0}:{type:f.data,data:t}}function pe(e,t,n,r,i,o){let s=e.headers.get("Location");if(a(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!J.test(s)){let a=r.slice(0,r.findIndex(e=>e.route.id===n)+1);s=te(new URL(t.url),a,i,!0,s,o),e.headers.set("Location",s)}return e}function fe(e,t,n,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(J.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r);if(i.includes(o.protocol))throw new Error("Invalid redirect location");let s=null!=A(o.pathname,n);if(o.origin===t.origin&&s)return o.pathname+o.search+o.hash}try{let t=r.createURL(e);if(i.includes(t.protocol))throw new Error("Invalid redirect location")}catch(o){}return e}function me(e,t,n,r){let i=e.createURL(Me(t)).toString(),o={signal:n};if(r&&De(r.formMethod)){let{formMethod:e,formEncType:t}=r;o.method=e.toUpperCase(),"application/json"===t?(o.headers=new Headers({"Content-Type":t}),o.body=JSON.stringify(r.json)):"text/plain"===t?o.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?o.body=ge(r.formData):o.body=r.formData}return new Request(i,o)}function ge(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function ye(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function ve(e,t,n,r,i){let o,s={},l=null,c=!1,u={},h=n&&Ce(n[1])?n[1].error:void 0;return e.forEach(n=>{if(!(n.route.id in t))return;let d=n.route.id,p=t[d];if(a(!Ie(p),"Cannot handle redirect results in processLoaderData"),Ce(p)){let t=p.error;if(void 0!==h&&(t=h,h=void 0),l=l||{},i)l[d]=t;else{let n=xe(e,d);null==l[n.route.id]&&(l[n.route.id]=t)}s[d]=void 0,c||(c=!0,o=B(p.error)?p.error.status:500),p.headers&&(u[d]=p.headers)}else ke(p)?(r.set(d,p.deferredData),s[d]=p.deferredData.data,null==p.statusCode||200===p.statusCode||c||(o=p.statusCode),p.headers&&(u[d]=p.headers)):(s[d]=p.data,p.statusCode&&200!==p.statusCode&&!c&&(o=p.statusCode),p.headers&&(u[d]=p.headers))}),void 0!==h&&n&&(l={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:l,statusCode:o||200,loaderHeaders:u}}function _e(e,t,n,i,o,s,l){let{loaderData:c,errors:u}=ve(t,n,i,l,!1);return o.forEach(t=>{let{key:n,match:i,controller:o}=t,l=s[n];if(a(l,"Did not find corresponding fetcher result"),!o||!o.signal.aborted)if(Ce(l)){let t=xe(e.matches,null==i?void 0:i.route.id);u&&u[t.route.id]||(u=r({},u,{[t.route.id]:l.error})),e.fetchers.delete(n)}else if(Ie(l))a(!1,"Unhandled fetcher revalidation redirect");else if(ke(l))a(!1,"Unhandled fetcher deferred data");else{let t=He(l.data);e.fetchers.set(n,t)}}),{loaderData:c,errors:u}}function be(e,t,n,i){let o=r({},t);for(let r of n){let n=r.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(o[n]=t[n]):void 0!==e[n]&&r.route.loader&&(o[n]=e[n]),i&&i.hasOwnProperty(n))break}return o}function we(e){return e?Ce(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function xe(e,t){return(t?e.slice(0,e.findIndex(e=>e.route.id===t)+1):[...e]).reverse().find(e=>!0===e.route.hasErrorBoundary)||e[0]}function Se(e){let t=1===e.length?e[0]:e.find(e=>e.index||!e.path||"/"===e.path)||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ee(e,t){let{pathname:n,routeId:r,method:i,type:o,message:s}=void 0===t?{}:t,a="Unknown Server Error",l="Unknown @remix-run/router error";return 400===e?(a="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===o?l="defer() is not supported in actions":"invalid-body"===o&&(l="Unable to encode submission body")):403===e?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):404===e?(a="Not Found",l='No route matches URL "'+n+'"'):405===e&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new j(e||500,a,new Error(l),!0)}function Te(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[e,r]=t[n];if(Ie(r))return{key:e,result:r}}}function Me(e){return h(r({},"string"===typeof e?d(e):e,{hash:""}))}function Ae(e){return Oe(e.result)&&G.has(e.result.status)}function ke(e){return e.type===f.deferred}function Ce(e){return e.type===f.error}function Ie(e){return(e&&e.type)===f.redirect}function Pe(e){return"object"===typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function Oe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Re(e){return Y.has(e.toLowerCase())}function De(e){return H.has(e.toLowerCase())}async function Le(e,t,n,r,i){let o=Object.entries(t);for(let s=0;s<o.length;s++){let[a,l]=o[s],c=e.find(e=>(null==e?void 0:e.route.id)===a);if(!c)continue;let u=r.find(e=>e.route.id===c.route.id),h=null!=u&&!se(u,c)&&void 0!==(i&&i[c.route.id]);ke(l)&&h&&await Fe(l,n,!1).then(e=>{e&&(t[a]=e)})}}async function Ne(e,t,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:s}=n[r],l=t[i];e.find(e=>(null==e?void 0:e.route.id)===o)&&(ke(l)&&(a(s,"Expected an AbortController for revalidating fetcher deferred result"),await Fe(l,s.signal,!0).then(e=>{e&&(t[i]=e)})))}}async function Fe(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:f.data,data:e.deferredData.unwrappedData}}catch(r){return{type:f.error,error:r}}return{type:f.data,data:e.deferredData.data}}}function ze(e){return new URLSearchParams(e).getAll("index").some(e=>""===e)}function Ue(e,t){let n="string"===typeof t?d(t).search:t.search;if(e[e.length-1].route.index&&ze(n||""))return e[e.length-1];let r=O(e);return r[r.length-1]}function je(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:o,json:s}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=o?{formMethod:t,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0}:void 0!==s?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}:void 0}function Be(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ve(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function He(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}},45734(e,t,n){"use strict";function r(e,t,n=2){if(!t||"object"!==typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const i={...e};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=r(i[o],t[o],n-1));return i}n.d(t,{h:()=>r})},45996(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(96540),i=n(24684);const o=function(e=null){const t=r.useContext(i.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},46403(e,t,n){"use strict";n.d(t,{GS:()=>a,HF:()=>f,W4:()=>h,my:()=>l,pO:()=>c,sp:()=>u});var r=n(26674),i=n(57726),o=n(19282),s=n(64208);function a(e,t,n){if(!(t in e))return;const i=e[t];if("function"!==typeof i)return;const s=n(i);"function"===typeof s&&c(s,i);try{e[t]=s}catch{r.T&&o.Yz.log(`Failed to replace method "${t}" in object`,e)}}function l(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{r.T&&o.Yz.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function c(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,l(e,"__sentry_original__",t)}catch{}}function u(e){return e.__sentry_original__}function h(e){if((0,s.bJ)(e))return{message:e.message,name:e.name,stack:e.stack,...p(e)};if((0,s.xH)(e)){const t={type:e.type,target:d(e.target),currentTarget:d(e.currentTarget),...p(e)};return"undefined"!==typeof CustomEvent&&(0,s.tH)(e,CustomEvent)&&(t.detail=e.detail),t}return e}function d(e){try{return(0,s.vq)(e)?(0,i.Hd)(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function p(e){if("object"===typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function f(e){const t=Object.keys(h(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}},46942(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},46996(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(55407);const i=function(e,t){return(0,r.A)(e,t)}},47040(e,t,n){"use strict";n.d(t,{NJ:()=>s,a3:()=>l,m7:()=>c});var r=n(26674),i=n(19282);const o=n(18845).O;function s(){return"history"in o&&!!o.history}function a(){if(!("fetch"in o))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function l(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function c(){if("string"===typeof EdgeRuntime)return!0;if(!a())return!1;if(l(o.fetch))return!0;let e=!1;const t=o.document;if(t&&"function"===typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=l(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){r.T&&i.Yz.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}},47081(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"th",weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"},ordinal:function(e){return e+"."}};return n.default.locale(r,null,!0),r}(n(74353))},47119(e){"use strict";e.exports="undefined"!==typeof Reflect&&Reflect&&Reflect.apply},47317(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(e){return e+"\xba"}};return n.default.locale(r,null,!0),r}(n(74353))},47581(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isToday=function(){var e="YYYY-MM-DD",t=n();return this.format(e)===t.format(e)}}}()},47767(e,t,n){"use strict";var r;n.d(t,{BV:()=>L,C5:()=>O,Ix:()=>D,Rq:()=>l,V8:()=>P,Zp:()=>y,g:()=>v,jb:()=>c,ph:()=>_,qh:()=>R,sp:()=>a,wE:()=>F,wQ:()=>m,zy:()=>f});var i=n(96540),o=n(45588);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}const a=i.createContext(null);const l=i.createContext(null);const c=i.createContext(null);const u=i.createContext(null);const h=i.createContext({outlet:null,matches:[],isDataRoute:!1});const d=i.createContext(null);function p(){return null!=i.useContext(u)}function f(){return p()||(0,o.Oi)(!1),i.useContext(u).location}function m(){return i.useContext(u).navigationType}function g(e){i.useContext(c).static||i.useLayoutEffect(e)}function y(){let{isDataRoute:e}=i.useContext(h);return e?function(){let{router:e}=A(T.UseNavigateStable),t=C(M.UseNavigateStable),n=i.useRef(!1);return g(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,s({fromRouteId:t},i)))},[e,t])}():function(){p()||(0,o.Oi)(!1);let e=i.useContext(a),{basename:t,future:n,navigator:r}=i.useContext(c),{matches:s}=i.useContext(h),{pathname:l}=f(),u=JSON.stringify((0,o.yD)(s,n.v7_relativeSplatPath)),d=i.useRef(!1);return g(()=>{d.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!d.current)return;if("number"===typeof n)return void r.go(n);let s=(0,o.Gh)(n,JSON.parse(u),l,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:(0,o.HS)([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,u,l,e])}()}function v(){let{matches:e}=i.useContext(h),t=e[e.length-1];return t?t.params:{}}function _(e,t,n,r){p()||(0,o.Oi)(!1);let{navigator:a}=i.useContext(c),{matches:l}=i.useContext(h),d=l[l.length-1],m=d?d.params:{},g=(d&&d.pathname,d?d.pathnameBase:"/");d&&d.route;let y,v=f();if(t){var _;let e="string"===typeof t?(0,o.Rr)(t):t;"/"===g||(null==(_=e.pathname)?void 0:_.startsWith(g))||(0,o.Oi)(!1),y=e}else y=v;let b=y.pathname||"/",w=b;if("/"!==g){let e=g.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=(0,o.ue)(e,{pathname:w});let S=E(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},m,e.params),pathname:(0,o.HS)([g,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:(0,o.HS)([g,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,r);return t&&S?i.createElement(u.Provider,{value:{location:s({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:o.rc.Pop}},S):S}function b(){let e=function(){var e;let t=i.useContext(d),n=k(M.UseRouteError),r=C(M.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,o.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const w=i.createElement(b,null);class x extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(h.Provider,{value:this.props.routeContext},i.createElement(d.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(a);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(h.Provider,{value:t},r)}function E(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||(0,o.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<l.length;i++){let e=l[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,l=h>=0?l.slice(0,h+1):[l[0]];break}}}return l.reduceRight((e,r,o)=>{let s,a=!1,d=null,p=null;var f;n&&(s=c&&r.route.id?c[r.route.id]:void 0,d=r.route.errorElement||w,u&&(h<0&&0===o?(f="route-fallback",!1||I[f]||(I[f]=!0),a=!0,p=null):h===o&&(a=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(l.slice(0,o+1)),g=()=>{let t;return t=s?d:a?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(S,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(x,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var T=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(T||{}),M=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(M||{});function A(e){let t=i.useContext(a);return t||(0,o.Oi)(!1),t}function k(e){let t=i.useContext(l);return t||(0,o.Oi)(!1),t}function C(e){let t=function(){let e=i.useContext(h);return e||(0,o.Oi)(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||(0,o.Oi)(!1),n.route.id}const I={};function P(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}(r||(r=n.t(i,2))).startTransition;function O(e){let{to:t,replace:n,state:r,relative:s}=e;p()||(0,o.Oi)(!1);let{future:a,static:l}=i.useContext(c),{matches:u}=i.useContext(h),{pathname:d}=f(),m=y(),g=(0,o.Gh)(t,(0,o.yD)(u,a.v7_relativeSplatPath),d,"path"===s),v=JSON.stringify(g);return i.useEffect(()=>m(JSON.parse(v),{replace:n,state:r,relative:s}),[m,v,s,n,r]),null}function R(e){(0,o.Oi)(!1)}function D(e){let{basename:t="/",children:n=null,location:r,navigationType:a=o.rc.Pop,navigator:l,static:h=!1,future:d}=e;p()&&(0,o.Oi)(!1);let f=t.replace(/^\/*/,"/"),m=i.useMemo(()=>({basename:f,navigator:l,static:h,future:s({v7_relativeSplatPath:!1},d)}),[f,d,l,h]);"string"===typeof r&&(r=(0,o.Rr)(r));let{pathname:g="/",search:y="",hash:v="",state:_=null,key:b="default"}=r,w=i.useMemo(()=>{let e=(0,o.pb)(g,f);return null==e?null:{location:{pathname:e,search:y,hash:v,state:_,key:b},navigationType:a}},[f,g,y,v,_,b,a]);return null==w?null:i.createElement(c.Provider,{value:m},i.createElement(u.Provider,{children:n,value:w}))}function L(e){let{children:t,location:n}=e;return _(N(t),n)}new Promise(()=>{});i.Component;function N(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,N(e.props.children,s));e.type!==R&&(0,o.Oi)(!1),e.props.index&&e.props.children&&(0,o.Oi)(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=N(e.props.children,s)),n.push(a)}),n}function F(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:i.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:i.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:i.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}},48648(e){"use strict";e.exports="undefined"!==typeof Reflect&&Reflect.getPrototypeOf||null},49372(e,t,n){"use strict";n.d(t,{T:()=>Ot});var r=n(64251),i=n(26674),o=n(19282);const s=[];function a(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach(e=>{e.isDefaultInstance=!0}),Array.isArray(n))r=[...t,...n];else if("function"===typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;return function(e){const t={};return e.forEach(e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.values(t)}(r)}function l(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function c(e,t,n){if(n[t.name])i.T&&o.Yz.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,s.includes(t.name)||"function"!==typeof t.setupOnce||(t.setupOnce(),s.push(t.name)),t.setup&&"function"===typeof t.setup&&t.setup(e),"function"===typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,r)=>n(t,r,e))}if("function"===typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign((t,r)=>n(t,r,e),{id:t.name});e.addEventProcessor(r)}i.T&&o.Yz.log(`Integration installed: ${t.name}`)}}function u(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}var h=n(9600),d=n(70125);const p=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],f=(e={})=>{let t;return{name:"EventFilters",setup(n){const r=n.getOptions();t=g(e,r)},processEvent(n,r,s){if(!t){const n=s.getOptions();t=g(e,n)}return function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;const n=e.transaction;return!!n&&(0,d.Xr)(n,t)}(e,t.ignoreTransactions))return i.T&&o.Yz.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${(0,h.$X)(e)}`),!0}else{if(function(e,t){if(!t?.length)return!1;return u(e).some(e=>(0,d.Xr)(e,t))}(e,t.ignoreErrors))return i.T&&o.Yz.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${(0,h.$X)(e)}`),!0;if(function(e){if(!e.exception?.values?.length)return!1;return!e.message&&!e.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value)}(e))return i.T&&o.Yz.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${(0,h.$X)(e)}`),!0;if(function(e,t){if(!t?.length)return!1;const n=y(e);return!!n&&(0,d.Xr)(n,t)}(e,t.denyUrls))return i.T&&o.Yz.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${(0,h.$X)(e)}.\nUrl: ${y(e)}`),!0;if(!function(e,t){if(!t?.length)return!0;const n=y(e);return!n||(0,d.Xr)(n,t)}(e,t.allowUrls))return i.T&&o.Yz.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${(0,h.$X)(e)}.\nUrl: ${y(e)}`),!0}return!1}(n,t)?null:n}}},m=(e={})=>({...f(e),name:"InboundFilters"});function g(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:p],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function y(e){try{const t=[...e.exception?.values??[]].reverse().find(e=>void 0===e.mechanism?.parent_id&&e.stacktrace?.frames?.length),n=t?.stacktrace?.frames;return n?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch{return i.T&&o.Yz.error(`Cannot extract url for event ${(0,h.$X)(e)}`),null}}var v=n(57968),_=n(46403);let b;const w=new WeakMap,x=()=>({name:"FunctionToString",setupOnce(){b=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=(0,_.sp)(this),n=w.has((0,v.KU)())&&void 0!==t?t:this;return b.apply(n,e)}}catch{}},setup(e){w.set(e,!0)}});var S=n(51685);const E=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!M(e,t))return!1;if(!T(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=A(t),r=A(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!M(e,t))return!1;if(!T(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return i.T&&o.Yz.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}};function T(e,t){let n=(0,S.RV)(e),r=(0,S.RV)(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const e=r[i],t=n[i];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function M(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch{return!1}}function A(e){return e.exception?.values?.[0]}function k(e,t){!0===t.debug&&(i.T?o.Yz.enable():(0,o.pq)(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}));(0,v.o5)().update(t.initialScope);const n=new e(t);return function(e){(0,v.o5)().setClient(e)}(n),n.init(),n}function C(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function I(e,t,n){return t||`${function(e){return`${C(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:"7"};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}var P=n(7313),O=n(75330),R=n(95200),D=n(71111),L=n(72808);function N(e,t){const n=t??F(e)??[];if(0===n.length)return;const r=e.getOptions(),i=function(e,t,n,r){const i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=(0,D.SB)(r)),(0,L.h4)(i,[(o=e,[{type:"log",item_count:o.length,content_type:"application/vnd.sentry.items.log+json"},{items:o}])]);var o}(n,r._metadata,r.tunnel,e.getDsn());z().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function F(e){return z().get(e)}function z(){return(0,R.BY)("clientToLogBufferMap",()=>new WeakMap)}function U(e,t){const n=t??j(e)??[];if(0===n.length)return;const r=e.getOptions(),i=function(e,t,n,r){const i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=(0,D.SB)(r)),(0,L.h4)(i,[(o=e,[{type:"trace_metric",item_count:o.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:o}])]);var o}(n,r._metadata,r.tunnel,e.getDsn());B().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(i)}function j(e){return B().get(e)}function B(){return(0,R.BY)("clientToMetricBufferMap",()=>new WeakMap)}var V=n(59328),H=n(31158),$=n(17786);const Y=Symbol.for("SentryBufferFullError");function G(e=100){const t=new Set;function n(e){t.delete(e)}return{get $(){return Array.from(t)},add:function(r){if(!(t.size<e))return(0,$.xg)(Y);const i=r();return t.add(i),i.then(()=>n(i),()=>n(i)),i},drain:function(e){if(!t.size)return(0,$.XW)(!0);const n=Promise.allSettled(Array.from(t)).then(()=>!0);if(!e)return n;const r=[n,new Promise(t=>setTimeout(()=>t(!1),e))];return Promise.race(r)}}}var q=n(36227);var W=n(93177);var K=n(64208),Z=n(45734),J=n(91773),X=n(59671),Q=n(9123),ee=n(84347),te=n(5915),ne=n(74611);const re="Not capturing exception because it's already been captured.",ie="Discarded session because of missing or non-string release",oe=Symbol.for("SentryInternalError"),se=Symbol.for("SentryDoNotSendEventError");function ae(e){return{message:e,[oe]:!0}}function le(e){return{message:e,[se]:!0}}function ce(e){return!!e&&"object"===typeof e&&oe in e}function ue(e){return!!e&&"object"===typeof e&&se in e}function he(e,t,n,r,i){let o,s=0,a=!1;e.on(n,()=>{s=0,clearTimeout(o),a=!1}),e.on(t,t=>{s+=r(t),s>=8e5?i(e):a||(a=!0,o=setTimeout(()=>{i(e)},5e3))}),e.on("flush",()=>{i(e)})}class de{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=G(e.transportOptions?.bufferSize??64),e.dsn?this._dsn=(0,D.AD)(e.dsn):i.T&&o.Yz.warn("No DSN provided, client will not send events."),this._dsn){const t=I(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&he(this,"afterCaptureLog","flushLogs",ye,N);(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&he(this,"afterCaptureMetric","flushMetrics",ge,U)}captureException(e,t,n){const r=(0,h.eJ)();if((0,h.GR)(e))return i.T&&o.Yz.log(re),r;const s={event_id:r,...t};return this._process(()=>this.eventFromException(e,s).then(e=>this._captureEvent(e,s,n)).then(e=>e),"error"),s.event_id}captureMessage(e,t,n,r){const i={event_id:(0,h.eJ)(),...n},o=(0,K.NF)(e)?e:String(e),s=(0,K.sO)(e),a=s?this.eventFromMessage(o,t,i):this.eventFromException(e,i);return this._process(()=>a.then(e=>this._captureEvent(e,i,r)),s?"unknown":"error"),i.event_id}captureEvent(e,t,n){const r=(0,h.eJ)();if(t?.originalException&&(0,h.GR)(t.originalException))return i.T&&o.Yz.log(re),r;const s={event_id:r,...t},a=e.sdkProcessingMetadata||{},l=a.capturedSpanScope,c=a.capturedSpanIsolationScope,u=pe(e.type);return this._process(()=>this._captureEvent(e,s,l||n,c),u),s.event_id}captureSession(e){this.sendSession(e),(0,V.qO)(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const t=this._transport;if(!t)return!0;this.emit("flush");const n=await this._isClientDoneProcessing(e),r=await t.flush(e);return n&&r}async close(e){const t=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),t}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];c(this,e,this._integrations),t||l(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=(0,O.V7)(e,this._dsn,this._options._metadata,this._options.tunnel);for(const r of t.attachments||[])n=(0,L.W3)(n,(0,L.bm)(r));this.sendEnvelope(n).then(t=>this.emit("afterSendEvent",e,t))}sendSession(e){const{release:t,environment:n=P.U}=this._options;if("aggregates"in e){const r=e.attrs||{};if(!r.release&&!t)return void(i.T&&o.Yz.warn(ie));r.release=r.release||t,r.environment=r.environment||n,e.attrs=r}else{if(!e.release&&!t)return void(i.T&&o.Yz.warn(ie));e.release=e.release||t,e.environment=e.environment||n}this.emit("beforeSendSession",e);const r=(0,O.LE)(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){const r=`${e}:${t}`;i.T&&o.Yz.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){const n=this._hooks[e]=this._hooks[e]||new Set,r=(...e)=>t(...e);return n.add(r),()=>{n.delete(r)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach(e=>e(...t))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(t){return i.T&&o.Yz.error("Error while sending envelope:",t),{}}return i.T&&o.Yz.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach(t=>{t&&c(e,t,n)}),n}(this,e),l(this,e)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,r=!1;const i=t.exception?.values;if(i){r=!0,n=!1;for(const e of i)if(!1===e.mechanism?.handled){n=!0;break}}const o="ok"===e.status;(o&&0===e.errors||o&&n)&&((0,V.qO)(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}async _isClientDoneProcessing(e){let t=0;for(;!e||t<e;){if(await new Promise(e=>setTimeout(e,1)),!this._numProcessing)return!0;t++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){const i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o?.length&&(t.integrations=o),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),(0,X.mG)(i,e,t,n,this,r).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:(0,v.vn)(n),...e.contexts};const r=(0,H.ao)(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:r,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},n=(0,v.o5)(),r=(0,v.rm)()){return i.T&&fe(e)&&o.Yz.log(`Captured error event \`${u(e)[0]||"<unknown>"}\``),this._processEvent(e,t,n,r).then(e=>e.event_id,e=>{i.T&&(ue(e)?o.Yz.log(e.message):ce(e)?o.Yz.warn(e.message):o.Yz.warn(e))})}_processEvent(e,t,n,r){const i=this.getOptions(),{sampleRate:o}=i,s=me(e),a=fe(e),l=`before send for type \`${e.type||"error"}\``,c="undefined"===typeof o?void 0:(0,J.i)(o);if(a&&"number"===typeof c&&(0,Q.hY)()>c)return this.recordDroppedEvent("sample_rate","error"),(0,$.xg)(le(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const u=pe(e.type);return this._prepareEvent(e,t,n,r).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",u),le("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const n=function(e,t,n,r){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:s,ignoreSpans:a}=t;let l=n;if(fe(l)&&i)return i(l,r);if(me(l)){if(s||a){const t=function(e){const{trace_id:t,parent_span_id:n,span_id:r,status:i,origin:o,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:s?.[ne.E1],exclusive_time:s?.[ne.jG],measurements:e.measurements,is_segment:!0}}(l);if(a?.length&&(0,ee.e)(t,a))return null;if(s){const e=s(t);e?l=(0,Z.h)(n,{type:"transaction",timestamp:(c=e).timestamp,start_timestamp:c.start_timestamp,transaction:c.description,contexts:{trace:{trace_id:c.trace_id,span_id:c.span_id,parent_span_id:c.parent_span_id,op:c.op,status:c.status,origin:c.origin,data:{...c.data,...c.profile_id&&{[ne.E1]:c.profile_id},...c.exclusive_time&&{[ne.jG]:c.exclusive_time}}}},measurements:c.measurements}):(0,te.xl)()}if(l.spans){const t=[],n=l.spans;for(const e of n)if(a?.length&&(0,ee.e)(e,a))(0,ee.R)(n,e);else if(s){const n=s(e);n?t.push(n):((0,te.xl)(),t.push(e))}else t.push(e);const r=l.spans.length-t.length;r&&e.recordDroppedEvent("before_send","span",r),l.spans=t}}if(o){if(l.spans){const e=l.spans.length;l.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(l,r)}}var c;return l}(this,i,e,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if((0,K.Qg)(e))return e.then(e=>{if(!(0,K.Qd)(e)&&null!==e)throw ae(n);return e},e=>{throw ae(`${t} rejected with ${e}`)});if(!(0,K.Qd)(e)&&null!==e)throw ae(n);return e}(n,l)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",u),s){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw le(`${l} returned \`null\`, will not send event.`)}const o=n.getSession()||r.getSession();if(a&&o&&this._updateSessionFromEvent(o,i),s){const e=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const c=i.transaction_info;if(s&&c&&i.transaction!==e.transaction){const e="custom";i.transaction_info={...c,source:e}}return this.sendEvent(i,t),i}).then(null,e=>{if(ue(e)||ce(e))throw e;throw this.captureException(e,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:e}),ae(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)})}_process(e,t){this._numProcessing++,this._promiseBuffer.add(e).then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e===Y&&this.recordDroppedEvent("queue_overflow",t),e))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}})}_flushOutcomes(){i.T&&o.Yz.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(i.T&&o.Yz.log("No outcomes to send"));if(!this._dsn)return void(i.T&&o.Yz.log("No dsn provided, will not send outcomes"));i.T&&o.Yz.log("Sending outcomes:",e);const t=function(e,t,n){const r=[{type:"client_report"},{timestamp:n||(0,W.lu)(),discarded_events:e}];return(0,L.h4)(t?{dsn:t}:{},[r])}(e,this._options.tunnel&&(0,D.SB)(this._dsn));this.sendEnvelope(t)}}function pe(e){return"replay_event"===e?"replay":e||"error"}function fe(e){return void 0===e.type}function me(e){return"transaction"===e.type}function ge(e){let t=0;return e.name&&(t+=2*e.name.length),t+=8,t+ve(e.attributes)}function ye(e){let t=0;return e.message&&(t+=2*e.message.length),t+ve(e.attributes)}function ve(e){if(!e)return 0;let t=0;return Object.values(e).forEach(e=>{Array.isArray(e)?t+=e.length*_e(e[0]):(0,K.sO)(e)?t+=_e(e):t+=100}),t}function _e(e){return"string"===typeof e?2*e.length:"number"===typeof e?8:"boolean"===typeof e?4:0}var be=n(50925),we=n(43674);function xe(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(e=>({name:`${r}:@sentry/${e}`,version:we.M})),version:we.M}),e._metadata=i}function Se(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}var Ee=n(94837);function Te(e){return function(e){return(0,K.bJ)(e)&&"__sentry_fetch_url_host__"in e&&"string"===typeof e.__sentry_fetch_url_host__}(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function Me(e,t){const n=Ce(e,t),r={type:Oe(t),value:Re(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Ae(e,t,n,r){const i=(0,v.KU)(),o=i?.getOptions().normalizeDepth,s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),a={__serialized__:(0,Ee.cd)(t,o)};if(s)return{exception:{values:[Me(e,s)]},extra:a};const l={exception:{values:[{type:(0,K.xH)(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Ne(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=Ce(e,n);t.length&&(l.exception.values[0].stacktrace={frames:t})}return l}function ke(e,t){return{exception:{values:[Me(e,t)]}}}function Ce(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&Ie.test(e.message))return 1;return 0}(t),i=function(e){if("number"===typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,i)}catch{}return[]}const Ie=/Minified React error #\d+;/i;function Pe(e){return"undefined"!==typeof WebAssembly&&"undefined"!==typeof WebAssembly.Exception&&e instanceof WebAssembly.Exception}function Oe(e){const t=e?.name;if(!t&&Pe(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function Re(e){const t=e?.message;return Pe(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"===typeof t.error.message?Te(t.error):Te(e):"No error message"}function De(e,t,n,r,i){let o;if((0,K.T2)(t)&&t.error){return ke(e,t.error)}if((0,K.BD)(t)||(0,K.W6)(t)){const i=t;if("stack"in t)o=ke(e,t);else{const t=i.name||((0,K.BD)(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;o=Le(e,s,n,r),(0,h.gO)(o,s)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}if((0,K.bJ)(t))return ke(e,t);if((0,K.Qd)(t)||(0,K.xH)(t)){return o=Ae(e,t,n,i),(0,h.M6)(o,{synthetic:!0}),o}return o=Le(e,t,n,r),(0,h.gO)(o,`${t}`,void 0),(0,h.M6)(o,{synthetic:!0}),o}function Le(e,t,n,r){const i={};if(r&&n){const r=Ce(e,n);r.length&&(i.exception={values:[{value:t,stacktrace:{frames:r}}]}),(0,h.M6)(i,{synthetic:!0})}if((0,K.NF)(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i}function Ne(e,{isUnhandledRejection:t}){const n=(0,_.HF)(e),r=t?"promise rejection":"exception";if((0,K.T2)(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if((0,K.xH)(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}var Fe=n(54386);class ze extends de{constructor(e){const t=(n=e,{release:"string"===typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Fe.jf.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...n});var n;xe(t,"browser",["browser"],Fe.jf.SENTRY_SDK_SOURCE||(0,be.e)()),t._metadata?.sdk&&(t._metadata.sdk.settings={infer_ip:t.sendDefaultPii?"auto":"never",...t._metadata.sdk.settings}),super(t);const{sendDefaultPii:r,sendClientReports:i,enableLogs:o,_experiments:s,enableMetrics:a}=this._options,l=a??s?.enableMetrics??!0;Fe.jf.document&&(i||o||l)&&Fe.jf.document.addEventListener("visibilitychange",()=>{"hidden"===Fe.jf.document.visibilityState&&(i&&this._flushOutcomes(),o&&N(this),l&&U(this))}),r&&this.on("beforeSendSession",Se)}eventFromException(e,t){return function(e,t,n,r){const i=De(e,t,n?.syntheticException||void 0,r);return(0,h.M6)(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),(0,$.XW)(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,i){const o=Le(e,t,r?.syntheticException||void 0,i);return o.level=n,r?.event_id&&(o.event_id=r.event_id),(0,$.XW)(o)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,r)}}var Ue=n(18845),je=n(13235);function Be(){"console"in Ue.O&&o.Ow.forEach(function(e){e in Ue.O.console&&(0,_.GS)(Ue.O.console,e,function(t){return o.Z9[e]=t,function(...t){const n={args:t,level:e};(0,je.aj)("console",n);const r=o.Z9[e];r?.apply(Ue.O.console,t)}})})}var Ve=n(51564),He=n(6810),$e=n(57726),Ye=n(27879);function Ge(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}var qe=n(67607),We=n(61221),Ke=n(35947),Ze=n(85761),Je=n(62745);const Xe=1024,Qe=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&function(e){const t="console";(0,je.s5)(t,e),(0,je.AS)(t,Be)}(function(e){return function(t){if((0,v.KU)()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:(0,Ye.t)(t.level),message:(0,d.gt)(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${(0,d.gt)(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}(0,He.Z)(n,{input:t.args,level:t.level})}}(e)),t.dom&&(0,We.i)(function(e,t){return function(n){if((0,v.KU)()!==e)return;let r,i,s="object"===typeof t?t.serializeAttribute:void 0,a="object"===typeof t&&"number"===typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>Xe&&(Je.T&&o.Yz.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=Xe),"string"===typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=(0,$e.Hd)(t,{keyAttrs:s,maxStringLength:a}),i=(0,$e.xE)(t)}catch{r="<unknown>"}if(0===r.length)return;const l={category:`ui.${n.name}`,message:r};i&&(l.data={"ui.component_name":i}),(0,He.Z)(l,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&(0,Ke.Mn)(function(e){return function(t){if((0,v.KU)()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,i=t.xhr[Ke.Er];if(!n||!r||!i)return;const{method:o,url:s,status_code:a,body:l}=i,c={method:o,url:s,status_code:a},u={xhr:t.xhr,input:l,startTimestamp:n,endTimestamp:r},h={category:"xhr",data:c,type:"http",level:Ge(a)};e.emit("beforeOutgoingRequestBreadcrumb",h,u),(0,He.Z)(h,u)}}(e)),t.fetch&&(0,Ve.ur)(function(e){return function(t){if((0,v.KU)()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const i=t.fetchData,o={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},s={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",s,o),(0,He.Z)(s,o)}else{const i=t.response,o={...t.fetchData,status_code:i?.status};t.fetchData.request_body_size,t.fetchData.response_body_size;const s={input:t.args,response:i,startTimestamp:n,endTimestamp:r},a={category:"fetch",data:o,type:"http",level:Ge(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",a,s),(0,He.Z)(a,s)}}}(e)),t.history&&(0,Ze._)(function(e){return function(t){if((0,v.KU)()!==e)return;let n=t.from,r=t.to;const i=(0,qe.Dl)(Fe.jf.location.href);let o=n?(0,qe.Dl)(n):void 0;const s=(0,qe.Dl)(r);o?.path||(o=i),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),(0,He.Z)({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){(0,v.KU)()===e&&(0,He.Z)({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:(0,h.$X)(t)},{event:t})}}(e))}}};const et=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],tt=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&(0,_.GS)(Fe.jf,"setTimeout",nt),t.setInterval&&(0,_.GS)(Fe.jf,"setInterval",nt),t.requestAnimationFrame&&(0,_.GS)(Fe.jf,"requestAnimationFrame",rt),t.XMLHttpRequest&&"XMLHttpRequest"in Fe.jf&&(0,_.GS)(XMLHttpRequest.prototype,"send",it);const e=t.eventTarget;if(e){(Array.isArray(e)?e:et).forEach(e=>function(e,t){const n=Fe.jf,r=n[e]?.prototype;if(!r?.hasOwnProperty?.("addEventListener"))return;(0,_.GS)(r,"addEventListener",function(n){return function(r,i,o){try{"function"===typeof i.handleEvent&&(i.handleEvent=(0,Fe.LV)(i.handleEvent,{mechanism:{data:{handler:(0,S.qQ)(i),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&function(e,t,n){e&&"object"===typeof e&&"removeEventListener"in e&&"function"===typeof e.removeEventListener&&e.removeEventListener(t,n)}(this,r,i),n.apply(this,[r,(0,Fe.LV)(i,{mechanism:{data:{handler:(0,S.qQ)(i),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),o])}}),(0,_.GS)(r,"removeEventListener",function(e){return function(t,n,r){try{const i=n.__sentry_wrapped__;i&&e.call(this,t,i,r)}catch{}return e.call(this,t,n,r)}})}(e,t))}}}};function nt(e){return function(...t){const n=t[0];return t[0]=(0,Fe.LV)(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${(0,S.qQ)(e)}`}}),e.apply(this,t)}}function rt(e){return function(t){return e.apply(this,[(0,Fe.LV)(t,{mechanism:{data:{handler:(0,S.qQ)(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function it(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in n&&"function"===typeof n[e]&&(0,_.GS)(n,e,function(t){const n={mechanism:{data:{handler:(0,S.qQ)(t)},handled:!1,type:`auto.browser.browserapierrors.xhr.${e}`}},r=(0,_.sp)(t);return r&&(n.mechanism.data.handler=(0,S.qQ)(r)),(0,Fe.LV)(t,n)})}),e.apply(this,t)}}const ot=()=>({name:"BrowserSession",setupOnce(){"undefined"!==typeof Fe.jf.document?((0,r.J0)({ignoreDuration:!0}),(0,r.J5)(),(0,Ze._)(({from:e,to:t})=>{void 0!==e&&e!==t&&((0,r.J0)({ignoreDuration:!0}),(0,r.J5)())})):Je.T&&o.Yz.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}});var st=n(80491),at=n(99411);const lt=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){(0,st.L)(t=>{const{stackParser:n,attachStacktrace:i}=ut();if((0,v.KU)()!==e||(0,Fe.jN)())return;const{msg:o,url:s,line:a,column:l,error:c}=t,u=function(e,t,n,r){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},l=a.frames=a.frames||[],c=r,u=n,h=function(e){if(!(0,K.Kg)(e)||0===e.length)return;if(e.startsWith("data:"))return`<${(0,qe.zm)(e,!1)}>`;return e}(t)??(0,$e.$N)();0===l.length&&l.push({colno:c,filename:h,function:S.yF,in_app:!0,lineno:u});return e}(De(n,c||o,void 0,i,!1),s,a,l);u.level="error",(0,r.r)(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}(e),ct("onerror")),t.onunhandledrejection&&(!function(e){(0,at.r)(t=>{const{stackParser:n,attachStacktrace:i}=ut();if((0,v.KU)()!==e||(0,Fe.jN)())return;const o=function(e){if((0,K.sO)(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),s=(0,K.sO)(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:De(n,o,void 0,i,!0);s.level="error",(0,r.r)(s,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}(e),ct("onunhandledrejection"))}}};function ct(e){Je.T&&o.Yz.log(`Global Handler attached: ${e}`)}function ut(){const e=(0,v.KU)();return e?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const ht=()=>({name:"HttpContext",preprocessEvent(e){if(!Fe.jf.navigator&&!Fe.jf.location&&!Fe.jf.document)return;const t=(0,Fe.AP)(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});function dt(e,t,n,r,i,o){if(!i.exception?.values||!o||!(0,K.tH)(o.originalException,Error))return;const s=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;s&&(i.exception.values=pt(e,t,r,o.originalException,n,i.exception.values,s,0))}function pt(e,t,n,r,i,o,s,a){if(o.length>=n+1)return o;let l=[...o];if((0,K.tH)(r[i],Error)){ft(s,a);const o=e(t,r[i]),c=l.length;mt(o,i,c,a),l=pt(e,t,n,r[i],i,[o,...l],o,c)}return Array.isArray(r.errors)&&r.errors.forEach((r,o)=>{if((0,K.tH)(r,Error)){ft(s,a);const c=e(t,r),u=l.length;mt(c,`errors[${o}]`,u,a),l=pt(e,t,n,r,i,[c,...l],c,u)}}),l}function ft(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function mt(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const gt=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,i){dt(Me,i.getOptions().stackParser,n,t,e,r)}}};function yt(e,t,n,r){const i={filename:e,function:"<anonymous>"===t?S.yF:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}const vt=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,_t=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,bt=/\((\S*)(?::(\d+))(?::(\d+))\)/,wt=/at (.+?) ?\(data:(.+?),/,xt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,St=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Et=[[30,e=>{const t=e.match(wt);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=vt.exec(e);if(n){const[,e,t,r]=n;return yt(e,S.yF,+t,+r)}const r=_t.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){const e=bt.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}const[e,t]=Mt(r[1]||S.yF,r[2]);return yt(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,e=>{const t=xt.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=St.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||S.yF;return[n,e]=Mt(n,e),yt(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]],Tt=(0,S.gd)(...Et),Mt=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:S.yF,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var At=n(3594);function kt(e,t=(0,At.qd)("fetch")){let n=0,r=0;return function(e,t,n=G(e.bufferSize||64)){let r={};return{send:function(s){const a=[];if((0,L.yH)(s,(t,n)=>{const i=(0,L.zk)(n);(0,q.Jz)(r,i)?e.recordDroppedEvent("ratelimit_backoff",i):a.push(t)}),0===a.length)return Promise.resolve({});const l=(0,L.h4)(s[0],a),c=t=>{(0,L.hP)(l,["client_report"])?i.T&&o.Yz.warn(`Dropping client report. Will not send outcomes (reason: ${t}).`):(0,L.yH)(l,(n,r)=>{e.recordDroppedEvent(t,(0,L.zk)(r))})};return n.add(()=>t({body:(0,L.bN)(l)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&i.T&&o.Yz.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=(0,q.wq)(r,e),e),e=>{throw c("network_error"),i.T&&o.Yz.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===Y)return i.T&&o.Yz.error("Skipped sending event because buffer is full."),c("queue_overflow"),Promise.resolve({});throw e})},flush:e=>n.drain(e)}}(e,async function(i){const o=i.body.length;n+=o,r++;const s={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const n=await t(e.url,s);return{statusCode:n.status,headers:{"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")}}}catch(a){throw(0,At.y7)("fetch"),a}finally{n-=o,r--}},G(e.bufferSize||40))}function Ct(){return!!function(){if("undefined"===typeof Fe.jf.window)return!1;const e=Fe.jf;if(e.nw)return!1;const t=e.chrome||e.browser;if(!t?.runtime?.id)return!1;const n=(0,$e.$N)(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Fe.jf===Fe.jf.top&&r.some(e=>n.startsWith(`${e}://`)))}()&&(Je.T&&(0,o.pq)(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0)}function It(e={}){const t=!e.skipBrowserExtensionCheck&&Ct();let n=null==e.defaultIntegrations?[m(),x(),tt(),Qe(),lt(),gt(),E(),ht(),ot()]:e.defaultIntegrations;const r={...e,enabled:!t&&e.enabled,stackParser:(0,S.vk)(e.stackParser||Tt),integrations:a({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||kt};return k(ze,r)}var Pt=n(96540);function Ot(e){const t={...e};return xe(t,"react"),(0,r.o)("react",{version:Pt.version}),It(t)}},49565(e,t,n){"use strict";n.d(t,{A:()=>y});var r=n(96540),i=n(34164),o=n(21362),s=n(79672),a=n(67695),l=n(53356),c=n(39241),u=n(13202),h=n(34578),d=n(96148),p=n(32520);function f(e){return(0,p.Ay)("MuiPaper",e)}(0,d.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var m=n(74848);const g=(0,a.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((0,c.A)(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),y=r.forwardRef(function(e,t){const n=(0,u.b)({props:e,name:"MuiPaper"}),r=(0,l.A)(),{className:a,component:c="div",elevation:d=1,square:p=!1,variant:y="elevation",...v}=n,_={...n,component:c,elevation:d,square:p,variant:y},b=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,s={root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]};return(0,o.A)(s,f,i)})(_);return(0,m.jsx)(g,{as:c,ownerState:_,className:(0,i.A)(b.root,a),ref:t,...v,style:{..."elevation"===y&&{"--Paper-shadow":(r.vars||r).shadows[d],...r.vars&&{"--Paper-overlay":r.vars.overlays?.[d]},...!r.vars&&"dark"===r.palette.mode&&{"--Paper-overlay":`linear-gradient(${(0,s.X4)("#fff",(0,h.A)(d))}, ${(0,s.X4)("#fff",(0,h.A)(d))})`}},...v.style}})})},49649(e,t,n){"use strict";n.d(t,{Ay:()=>y,HX:()=>v,tT:()=>b});var r=n(58168),i=n(24684),o=n(43741),s=n(71287),a=n(30041),l=n(96540),c=n(36289),u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=(0,c.A)(function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),d=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?h:d},f=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,a.SF)(t,n,r),(0,s.s)(function(){return(0,a.sk)(t,n,r)}),null},g=function e(t,n){var s,c,u=t.__emotion_real===t,h=u&&t.__emotion_base||t;void 0!==n&&(s=n.label,c=n.target);var d=f(t,n,u),g=d||p(h),y=!g("as");return function(){var v=arguments,_=u&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==s&&_.push("label:"+s+";"),null==v[0]||void 0===v[0].raw)_.push.apply(_,v);else{var b=v[0];_.push(b[0]);for(var w=v.length,x=1;x<w;x++)_.push(v[x],b[x])}var S=(0,i.w)(function(e,t,n){var r=y&&e.as||h,s="",u=[],f=e;if(null==e.theme){for(var v in f={},e)f[v]=e[v];f.theme=l.useContext(i.T)}"string"===typeof e.className?s=(0,a.Rk)(t.registered,u,e.className):null!=e.className&&(s=e.className+" ");var b=(0,o.J)(_.concat(u),t.registered,f);s+=t.key+"-"+b.name,void 0!==c&&(s+=" "+c);var w=y&&void 0===d?p(r):g,x={};for(var S in e)y&&"as"===S||w(S)&&(x[S]=e[S]);return x.className=s,n&&(x.ref=n),l.createElement(l.Fragment,null,l.createElement(m,{cache:t,serialized:b,isStringTag:"string"===typeof r}),l.createElement(r,x))});return S.displayName=void 0!==s?s:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",S.defaultProps=t.defaultProps,S.__emotion_real=S,S.__emotion_base=h,S.__emotion_styles=_,S.__emotion_forwardProp=d,Object.defineProperty(S,"toString",{value:function(){return"."+c}}),S.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:f(S,i,!0)})).apply(void 0,_)},S}}.bind(null);function y(e,t){return g(e,t)}function v(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){g[e]=g(e)});const _=[];function b(e){return _[0]=e,(0,o.J)(_)}},49713(e,t,n){"use strict";n.d(t,{$I:()=>ke,Ap:()=>Ae,E6:()=>De,GC:()=>Er,H9:()=>Me,II:()=>Ee,UR:()=>Tr,V1:()=>X,ZH:()=>Se,am:()=>Ne,b5:()=>Le,bB:()=>Re,bm:()=>Oe,cK:()=>Pe,g0:()=>xr,jc:()=>Ce,kG:()=>Sr,mD:()=>Ie,t1:()=>ro,y2:()=>J,yL:()=>Te,yW:()=>Z});var r=n(96540),i=n(40961),o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"/></svg>',s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"/></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"/></svg>',l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" height="17" viewBox="0 0 17 17" width="17"><path d="M8.5 0a8.5 8.5 0 110 17 8.5 8.5 0 010-17zm3.364 5.005a.7.7 0 00-.99 0l-2.44 2.44-2.439-2.44-.087-.074a.7.7 0 00-.903 1.064l2.44 2.439-2.44 2.44-.074.087a.7.7 0 001.064.903l2.439-2.441 2.44 2.441.087.074a.7.7 0 00.903-1.064l-2.441-2.44 2.441-2.439.074-.087a.7.7 0 00-.074-.903z" fill="currentColor" fill-rule="evenodd"/></svg>',u='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M360-160q-33 0-56.5-23.5T280-240q0-33 23.5-56.5T360-320q33 0 56.5 23.5T440-240q0 33-23.5 56.5T360-160Zm240 0q-33 0-56.5-23.5T520-240q0-33 23.5-56.5T600-320q33 0 56.5 23.5T680-240q0 33-23.5 56.5T600-160ZM360-400q-33 0-56.5-23.5T280-480q0-33 23.5-56.5T360-560q33 0 56.5 23.5T440-480q0 33-23.5 56.5T360-400Zm240 0q-33 0-56.5-23.5T520-480q0-33 23.5-56.5T600-560q33 0 56.5 23.5T680-480q0 33-23.5 56.5T600-400ZM360-640q-33 0-56.5-23.5T280-720q0-33 23.5-56.5T360-800q33 0 56.5 23.5T440-720q0 33-23.5 56.5T360-640Zm240 0q-33 0-56.5-23.5T520-720q0-33 23.5-56.5T600-800q33 0 56.5 23.5T680-720q0 33-23.5 56.5T600-640Z"/></svg>',h=function(e,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},h(e,t)};function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)};function f(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}"function"==typeof SuppressedError&&SuppressedError;var m,g=function(){function e(){this.nr=0,this._keys=1,this._subscribers={}}return e.prototype.subscribe=function(e){var t=this._keys++;return this._subscribers[t]=e,this.nr++,t},e.prototype.unsubscribe=function(e){this.nr--,delete this._subscribers[e]},e.prototype.next=function(e){for(var t=this._subscribers,n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];t[i]&&t[i](e)}},e}(),y=[],v=!1,_="undefined"!=typeof window,b=_&&window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),w=_?navigator.userAgent:"",x=_?navigator.platform:"",S=_?navigator.maxTouchPoints:0,E=w&&/Safari/.test(w);if(/Android/i.test(w))m="android",v=!0,(T=w.match(/Android\s+([\d.]+)/i))&&(y=T[0].replace("Android ","").split("."));else if(/iPhone|iPad|iPod/i.test(w)||/iPhone|iPad|iPod/i.test(x)||"MacIntel"===x&&S>1){var T;m="ios",v=!0,(T=w.match(/OS\s+([\d_]+)/i))&&(y=T[0].replace(/_/g,".").replace("OS ","").split("."))}else/Windows Phone/i.test(w)?(m="wp",v=!0):/Windows|MSIE/i.test(w)&&(m="windows");var M=+y[0],A=(y[1],{}),k={},C={},I=new g;function P(){var e,t="",n="";for(var r in e="android"===m?"material":"wp"===m||"windows"===m?"windows":"ios",k){if(k[r].baseTheme===e&&!1!==k[r].auto&&r!==e+"-dark"){t=r;break}r===e?t=r:n||(n=r)}return t||n}function O(e,t,n){var r=k[t];k[e]=p({},r,{auto:n,baseTheme:t}),C.theme=P()}var R={clearIcon:c,labelStyle:"inline"};k.ios={Calendar:{nextIconH:a,nextIconV:s,prevIconH:o,prevIconV:l},Checkbox:{position:"end"},Datepicker:{clearIcon:c,display:"bottom"},Dropdown:R,Eventcalendar:{chevronIconDown:s,dragIcon:u,nextIconH:a,nextIconV:s,prevIconH:o,prevIconV:l},Input:R,Radio:{position:"end"},Scroller:{itemHeight:34,minWheelWidth:55,rows:5,scroll3d:!0},SegmentedGroup:{drag:!0},Select:{clearIcon:c,display:"bottom"},Textarea:R},O("ios-dark","ios");var D='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',L='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',N='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M23.12 11.12L21 9l-9 9 9 9 2.12-2.12L16.24 18z"/></svg>',F='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M15 9l-2.12 2.12L19.76 18l-6.88 6.88L15 27l9-9z"/></svg>',z='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>',U='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>',j='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',B={clearIcon:z,dropdownIcon:D,inputStyle:"box",labelStyle:"floating",notch:!0,ripple:!0},V="material";k[V]={Button:{ripple:!0},Calendar:{downIcon:D,nextIconH:F,nextIconV:U,prevIconH:N,prevIconV:j,upIcon:L},Datepicker:{clearIcon:z,display:"center"},Dropdown:B,Eventcalendar:{chevronIconDown:U,colorEventList:!0,downIcon:D,dragIcon:u,nextIconH:F,nextIconV:U,prevIconH:N,prevIconV:j,upIcon:L},Input:B,ListItem:{ripple:!0},Scroller:{rows:3},Select:{clearIcon:z,display:"center",rows:3},Textarea:B},O("material-dark",V);var H='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19.03 4.28l-11 11-.686.72.687.72 11 11 1.44-1.44L10.187 16l10.28-10.28-1.437-1.44z"/></svg>',$='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M12.97 4.28l-1.44 1.44L21.814 16 11.53 26.28l1.44 1.44 11-11 .686-.72-.687-.72-11-11z"/></svg>',Y='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M15 4v20.063L8.22 17.28l-1.44 1.44 8.5 8.5.72.686.72-.687 8.5-8.5-1.44-1.44L17 24.063V4h-2z"/></svg>',G='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M16 4.094l-.72.687-8.5 8.5 1.44 1.44L15 7.936V28h2V7.937l6.78 6.782 1.44-1.44-8.5-8.5-.72-.686z"/></svg>',q='<svg fill="#000000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32px" height="32px"><path d="M 7.21875 5.78125 L 5.78125 7.21875 L 14.5625 16 L 5.78125 24.78125 L 7.21875 26.21875 L 16 17.4375 L 24.78125 26.21875 L 26.21875 24.78125 L 17.4375 16 L 26.21875 7.21875 L 24.78125 5.78125 L 16 14.5625 Z"/></svg>',W={clearIcon:q,inputStyle:"box",labelStyle:"stacked"},K="windows";k[K]={Calendar:{nextIconH:$,nextIconV:Y,prevIconH:H,prevIconV:G},Checkbox:{position:"start"},Datepicker:{clearIcon:q,display:"center"},Dropdown:W,Eventcalendar:{chevronIconDown:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M4.22 10.78l-1.44 1.44 12.5 12.5.72.686.72-.687 12.5-12.5-1.44-1.44L16 22.564 4.22 10.78z"/></svg>',dragIcon:u,nextIconH:$,nextIconV:Y,prevIconH:H,prevIconV:G},Input:W,Scroller:{itemHeight:44,minWheelWidth:88,rows:6},Select:{clearIcon:q,display:"center",rows:6},Textarea:W},O("windows-dark",K),C.theme=P();var Z={setText:"S\xe6t",cancelText:"Annuller",clearText:"Ryd",closeText:"Luk",selectedText:"{count} valgt",selectedPluralText:"{count} valgt",dateFormat:"DD/MM/YYY",dateFormatFull:"DDDD, D. MMMM YYYY",dateFormatLong:"DDD. D. MMM. YYYY.",dateWheelFormat:"|DDD. D. MMM.|",dayNames:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],dayNamesShort:["S\xf8n","Man","Tir","Ons","Tor","Fre","L\xf8r"],dayNamesMin:["S","M","T","O","T","F","L"],dayText:"Dag",hourText:"Timer",minuteText:"Minutter",fromText:"Start",monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],monthText:"M\xe5ned",secondText:"Sekunder",amText:"am",pmText:"pm",timeFormat:"HH.mm",yearText:"\xc5r",toText:"Slut",nowText:"Nu",todayText:"I dag",firstDay:1,dateText:"Dato",timeText:"Tid",allDayText:"Hele dagen",noEventsText:"Ingen begivenheder",eventText:"Begivenheder",eventsText:"Begivenheder",moreEventsText:"{count} mere",weekText:"Uge {count}",rangeStartLabel:"Start",rangeEndLabel:"Slut",rangeStartHelp:"V\xe6lg",rangeEndHelp:"V\xe6lg",filterEmptyText:"Ingen resultater",filterPlaceholderText:"S\xf8g"},J={setText:"OK",cancelText:"Abbrechen",clearText:"L\xf6schen",closeText:"Schlie\xdfen",selectedText:"{count} ausgew\xe4hlt",dateFormat:"DD.MM.YYYY",dateFormatFull:"DDDD, D. MMMM YYYY",dateFormatLong:"DDD. D. MMM. YYYY",dateWheelFormat:"|DDD. D. MMM.|",dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["S","M","D","M","D","F","S"],dayText:"Tag",hourText:"Stunde",minuteText:"Minuten",fromText:"Von",monthNames:["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],monthText:"Monat",secondText:"Sekunden",timeFormat:"HH:mm",yearText:"Jahr",nowText:"Jetzt",pmText:"pm",amText:"am",todayText:"Heute",toText:"Bis",firstDay:1,dateText:"Datum",timeText:"Zeit",allDayText:"Ganzt\xe4gig",noEventsText:"Keine Ereignisse",eventText:"Ereignis",eventsText:"Ereignisse",moreEventsText:"{count} weiteres Element",moreEventsPluralText:"{count} weitere Elemente",weekText:"Woche {count}",rangeStartLabel:"Von",rangeEndLabel:"Bis",rangeStartHelp:"Ausw\xe4hlen",rangeEndHelp:"Ausw\xe4hlen",filterEmptyText:"Keine Treffer",filterPlaceholderText:"Suchen"},X={setText:"Aceptar",cancelText:"Cancelar",clearText:"Borrar",closeText:"Cerrar",selectedText:"{count} seleccionado",selectedPluralText:"{count} seleccionados",dateFormat:"DD/MM/YYYY",dateFormatFull:"DDDD, MMMM D. YYYY",dateFormatLong:"DDD, MMM. D. YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],dayNamesShort:["Do","Lu","Ma","Mi","Ju","Vi","S\xe1"],dayNamesMin:["D","L","M","M","J","V","S"],dayText:"D\xeda",hourText:"Horas",minuteText:"Minutos",fromText:"Iniciar",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],monthText:"Mes",secondText:"Segundos",timeFormat:"H:mm",yearText:"A&ntilde;o",toText:"Final",nowText:"Ahora",pmText:"pm",amText:"am",todayText:"Hoy",firstDay:1,dateText:"Fecha",timeText:"Tiempo",allDayText:"Todo el d\xeda",noEventsText:"No hay eventos",eventText:"Evento",eventsText:"Eventos",moreEventsText:"{count} m\xe1s",weekText:"Semana {count}",rangeStartLabel:"Iniciar",rangeEndLabel:"Final",rangeStartHelp:"Seleccionar",rangeEndHelp:"Seleccionar",filterEmptyText:"Sin resultados",filterPlaceholderText:"Buscar"},Q=void 0,ee=pe(3),te=pe(4),ne=pe(7);function re(e,t,n){return Math.max(t,Math.min(e,n))}function ie(e,t){return p({},e,t)}function oe(e){return Array.isArray(e)}function se(e){return e-parseFloat(e)>=0}function ae(e){return"number"==typeof e}function le(e){return"string"==typeof e}function ce(e){return e===Q||null===e||""===e}function ue(e){return void 0===e}function he(e){return"object"==typeof e}function de(e){return null!==e&&e!==Q&&""+e!="false"}function pe(e){return Array.apply(0,Array(Math.max(0,e)))}function fe(e){return e!==Q?e+(se(e)?"px":""):""}function me(){}function ge(e,t){void 0===t&&(t=2);for(var n=e+"";n.length<t;)n="0"+n;return n}function ye(e){return Math.round(e)}function ve(e,t){return _e(e/t)*t}function _e(e){return Math.floor(e)}function be(e,t){e._cdr?setTimeout(t):t()}function we(e,t){return xe(e,t)}function xe(e,t,n){for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t(o,i))return n?i:o}return n?-1:Q}pe(24);var Se={setText:"Terminer",cancelText:"Annuler",clearText:"Effacer",closeText:"Fermer",selectedText:"{count} s\xe9lectionn\xe9",selectedPluralText:"{count} s\xe9lectionn\xe9s",dateFormat:"DD/MM/YYYY",dateFormatFull:"DDDD D MMMM YYYY",dateFormatLong:"DDD D MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim.","Lun.","Mar.","Mer.","Jeu.","Ven.","Sam."],dayNamesMin:["D","L","M","M","J","V","S"],dayText:"Jour",monthText:"Mois",fromText:"D\xe9marrer",monthNames:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],monthNamesShort:["Janv.","F\xe9vr.","Mars","Avril","Mai","Juin","Juil.","Ao\xfbt","Sept.","Oct.","Nov.","D\xe9c."],hourText:"Heures",minuteText:"Minutes",secondText:"Secondes",timeFormat:"HH:mm",yearText:"Ann\xe9e",toText:"Fin",nowText:"Maintenant",pmText:"pm",amText:"am",todayText:"Aujourd'hui",firstDay:1,dateText:"Date",timeText:"Heure",allDayText:"Toute la journ\xe9e",noEventsText:"Aucun \xe9v\xe9nement",eventText:"\xc9v\xe9nement",eventsText:"\xc9v\xe9nements",moreEventsText:"{count} autre",moreEventsPluralText:"{count} autres",weekText:"Semaine {count}",rangeStartLabel:"D\xe9but",rangeEndLabel:"Fin",rangeStartHelp:"Choisir",rangeEndHelp:"Choisir",filterEmptyText:"Aucun r\xe9sultat",filterPlaceholderText:"Rechercher"},Ee={setText:"OK",cancelText:"Annulla",clearText:"Chiarire",closeText:"Chiudere",selectedText:"{count} selezionato",selectedPluralText:"{count} selezionati",dateFormat:"DD/MM/YYYY",dateFormatFull:"DDDD D MMMM YYYY",dateFormatLong:"DDD D MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],dayNamesShort:["Do","Lu","Ma","Me","Gi","Ve","Sa"],dayNamesMin:["D","L","M","M","G","V","S"],dayText:"Giorno",hourText:"Ore",minuteText:"Minuti",fromText:"Inizio",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],monthText:"Mese",secondText:"Secondi",timeFormat:"HH:mm",yearText:"Anno",toText:"Fine",nowText:"Ora",pmText:"pm",amText:"am",todayText:"Oggi",firstDay:1,dateText:"Data",timeText:"Volta",allDayText:"Tutto il giorno",noEventsText:"Nessun evento",eventText:"Evento",eventsText:"Eventi",moreEventsText:"{count} altro",moreEventsPluralText:"altri {count}",weekText:"Settimana {count}",rangeStartLabel:"Inizio",rangeEndLabel:"Fine",rangeStartHelp:"Scegli",rangeEndHelp:"Scegli",filterEmptyText:"Nessun risultato",filterPlaceholderText:"Cerca"},Te={setText:"\u30bb\u30c3\u30c8",cancelText:"\u30ad\u30e3\u30f3\u30bb\u30eb",clearText:"\u30af\u30ea\u30a2",closeText:"\u30af\u30ed\u30fc\u30ba",selectedText:"{count} \u9078\u629e",dateFormat:"YYYY\u5e74MM\u6708DD\u65e5",dateFormatFull:"YYYY\u5e74MM\u6708DD\u65e5",dateFormatLong:"YYYY\u5e74MM\u6708DD\u65e5",dateWheelFormat:"|M\u6708D\u65e5 DDD|",dayNames:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],dayNamesShort:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],dayNamesMin:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],dayText:"\u65e5",hourText:"\u6642",minuteText:"\u5206",fromText:"\u958b\u59cb",monthNames:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],monthNamesShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],monthText:"\u6708",secondText:"\u79d2",timeFormat:"H:mm",yearText:"\u5e74",toText:"\u7d42\u308f\u308a",nowText:"\u4eca",pmText:"\u5348\u5f8c",amText:"\u5348\u524d",yearSuffix:"\u5e74",monthSuffix:"\u6708",daySuffix:"\u65e5",todayText:"\u4eca\u65e5",dateText:"\u65e5\u4ed8",timeText:"\u6642\u9593",allDayText:"\u7d42\u65e5",noEventsText:"\u30a4\u30d9\u30f3\u30c8\u306f\u3042\u308a\u307e\u305b\u3093",eventText:"\u30a4\u30d9\u30f3\u30c8",eventsText:"\u30a4\u30d9\u30f3\u30c8",moreEventsText:"\u4ed6 {count} \u4ef6",weekText:"{count}\u9031\u76ee",rangeStartLabel:"\u958b\u59cb",rangeEndLabel:"\u7d42\u308f\u308a",rangeStartHelp:"\u9078\u629e",rangeEndHelp:"\u9078\u629e",filterEmptyText:"\u691c\u7d22\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093",filterPlaceholderText:"\u63a2\u3059"},Me={setText:"Instellen",cancelText:"Annuleren",clearText:"Leegmaken",closeText:"Sluiten",selectedText:"{count} gekozen",dateFormat:"DD-MM-YYYY",dateFormatFull:"DDDD D MMMM YYYY",dateFormatLong:"DD-MM-YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],dayNamesShort:["Zo","Ma","Di","Wo","Do","Vr","Za"],dayNamesMin:["Z","M","D","W","D","V","Z"],dayText:"Dag",hourText:"Uur",minuteText:"Minuten",fromText:"Start",monthNames:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],monthText:"Maand",secondText:"Seconden",timeFormat:"HH:mm",yearText:"Jaar",toText:"Einde",nowText:"Nu",pmText:"pm",amText:"am",todayText:"Vandaag",firstDay:1,dateText:"Datum",timeText:"Tijd",allDayText:"Hele dag",noEventsText:"Geen activiteiten",eventText:"Activiteit",eventsText:"Activiteiten",moreEventsText:"nog {count}",weekText:"Week {count}",rangeStartLabel:"Start",rangeEndLabel:"Einde",rangeStartHelp:"Kies",rangeEndHelp:"Kies",filterEmptyText:"Niets gevonden",filterPlaceholderText:"Zoek"},Ae={setText:"OK",cancelText:"Avbryt",clearText:"T\xf8mme",closeText:"Lukk",selectedText:"{count} valgt",dateFormat:"DD.MM.YYY",dateFormatFull:"DDDD D. MMMM YYYY",dateFormatLong:"DDD. D. MMM. YYYY",dateWheelFormat:"|DDD. D. MMM.|",dayNames:["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],dayNamesShort:["S\xf8","Ma","Ti","On","To","Fr","L\xf8"],dayNamesMin:["S","M","T","O","T","F","L"],dayText:"Dag",hourText:"Time",minuteText:"Minutt",fromText:"Start",monthNames:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],monthText:"M\xe5ned",secondText:"Sekund",timeFormat:"HH:mm",yearText:"\xc5r",toText:"End",nowText:"N\xe5",pmText:"pm",amText:"am",todayText:"I dag",firstDay:1,dateText:"Dato",timeText:"Tid",allDayText:"Hele dagen",noEventsText:"Ingen hendelser",eventText:"Hendelse",eventsText:"Hendelser",moreEventsText:"{count} mere",weekText:"Uke {count}",rangeStartLabel:"Start",rangeEndLabel:"End",rangeStartHelp:"Velg",rangeEndHelp:"Velg",filterEmptyText:"Ingen treff",filterPlaceholderText:"S\xf8k"},ke={setText:"Zastosuj",cancelText:"Anuluj",clearText:"Oczy\u015bci\u0107",closeText:"Zako\u0144czenie",selectedText:"Wyb\xf3r: {count}",dateFormat:"YYYY-MM-DD",dateFormatFull:"DDDD, D MMMM YYYY",dateFormatLong:"DDD, D MMM YYYY",dateWheelFormat:"|DDD D.MM|",dayNames:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"],dayNamesShort:["Nie.","Pon.","Wt.","\u015ar.","Czw.","Pt.","Sob."],dayNamesMin:["N","P","W","\u015a","C","P","S"],dayText:"Dzie\u0144",hourText:"Godziny",minuteText:"Minuty",fromText:"Rozpocz\u0119cie",monthNames:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017adziernik","Listopad","Grudzie\u0144"],monthNamesShort:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa\u017a","Lis","Gru"],monthText:"Miesi\u0105c",secondText:"Sekundy",timeFormat:"HH:mm",yearText:"Rok",toText:"Koniec",nowText:"Teraz",amText:"am",pmText:"pm",todayText:"Dzisiaj",firstDay:1,dateText:"Data",timeText:"Czas",allDayText:"Ca\u0142y dzie\u0144",noEventsText:"Brak wydarze\u0144",eventText:"Wydarze\u0144",eventsText:"Wydarzenia",moreEventsText:"Jeszcze {count}",weekText:"Tydzie\u0144 {count}",rangeStartLabel:"Rozpocz\u0119cie",rangeEndLabel:"Koniec",rangeStartHelp:"Wybierz",rangeEndHelp:"Wybierz",filterEmptyText:"Brak wynik\xf3w",filterPlaceholderText:"Szukaj"},Ce={setText:"Seleccionar",cancelText:"Cancelar",clearText:"Claro",closeText:"Fechar",selectedText:"{count} selecionado",selectedPluralText:"{count} selecionados",dateFormat:"DD-MM-YYYY",dateFormatFull:"DDDD, D MMMM YYYY",dateFormatLong:"DDD, D MMM, YYYY",dateWheelFormat:"|DDD D de MMM|",dayNames:["Domingo","Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],dayNamesMin:["D","S","T","Q","Q","S","S"],dayText:"Dia",hourText:"Horas",minuteText:"Minutos",fromText:"In\xedcio",monthNames:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],monthText:"M\xeas",secondText:"Segundo",timeFormat:"HH:mm",yearText:"Ano",toText:"Fim",nowText:"Actualizar",pmText:"pm",amText:"am",todayText:"Hoje",firstDay:1,dateText:"Data",timeText:"Tempo",allDayText:"Todo o dia",noEventsText:"Nenhum evento",eventText:"Evento",eventsText:"Eventos",moreEventsText:"Mais {count}",weekText:"Semana {count}",rangeStartLabel:"In\xedcio",rangeEndLabel:"Fim",rangeStartHelp:"Escolha",rangeEndHelp:"Escolha",filterEmptyText:"Nenhum resultado",filterPlaceholderText:"Pesquisa"},Ie={setText:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",clearText:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",selectedText:"{count} \u0412\u044b\u0431\u0440\u0430\u0442\u044c",dateFormat:"DD.MM.YYYY",dateFormatFull:"DDDD, D MMMM YYYY",dateFormatLong:"DDD, D MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],dayNamesMin:["\u0432","\u043f","\u0432","\u0441","\u0447","\u043f","\u0441"],dayText:"\u0414\u0435\u043d\u044c",hourText:"\u0427\u0430\u0441",minuteText:"\u041c\u0438\u043d\u0443\u0442",fromText:"\u041d\u0430\u0447\u0430\u043b\u043e",monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],monthNamesShort:["\u042f\u043d\u0432","\u0424\u0435\u0432","\u041c\u0430\u0440","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","\u0410\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a"],monthText:"\u041c\u0435\u0441\u044f\u0446",secondText:"\u0421\u0435\u043a\u0443\u043d\u0434",timeFormat:"HH:mm",yearText:"\u0413\u043e\u0434",toText:"\u041a\u043e\u043d\u0435\u0446",nowText:"\u0421\u0435\u0439\u0447\u0430\u0441",amText:"am",pmText:"pm",todayText:"C\u0435\u0433\u043e\u0434\u043d\u044f",firstDay:1,dateText:"\u0414\u0430\u0442\u0430",timeText:"\u0412\u0440\u0435\u043c\u044f",allDayText:"\u0412\u0435\u0441\u044c \u0434\u0435\u043d\u044c",noEventsText:"\u041d\u0435\u0442 \u0441\u043e\u0431\u044b\u0442\u0438\u0439",eventText:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",eventsText:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",moreEventsText:"\u0415\u0449\u0451 {count}",weekText:"\u041d\u0435\u0434\u0435\u043b\u044f {count}",rangeStartLabel:"\u041d\u0430\u0447\u0430\u043b\u043e",rangeEndLabel:"\u041a\u043e\u043d\u0435\u0446",rangeStartHelp:"\u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c",rangeEndHelp:"\u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c",filterEmptyText:"\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",filterPlaceholderText:"\u041f\u043e\u0438\u0441\u043a"},Pe={setText:"OK",cancelText:"Avbryt",clearText:"Klara",closeText:"St\xe4ng",selectedText:"{count} vald",dateFormat:"YYYY-MM-DD",dateFormatFull:"DDDD D MMMM YYYY",dateFormatLong:"DDD D MMM. YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],dayNamesShort:["S\xf6","M\xe5","Ti","On","To","Fr","L\xf6"],dayNamesMin:["S","M","T","O","T","F","L"],dayText:"Dag",hourText:"Timme",minuteText:"Minut",fromText:"Start",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],monthText:"M\xe5nad",secondText:"Sekund",timeFormat:"HH:mm",yearText:"\xc5r",toText:"Slut",nowText:"Nu",pmText:"pm",amText:"am",todayText:"I dag",firstDay:1,dateText:"Datum",timeText:"Tid",allDayText:"Heldag",noEventsText:"Inga aktiviteter",eventText:"H\xe4ndelse",eventsText:"H\xe4ndelser",moreEventsText:"{count} till",weekText:"Vecka {count}",rangeStartLabel:"Start",rangeEndLabel:"Slut",rangeStartHelp:"V\xe4lj",rangeEndHelp:"V\xe4lj",filterEmptyText:"Inga tr\xe4ffar",filterPlaceholderText:"S\xf6k"},Oe={setText:"\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32",cancelText:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",clearText:"\u0e25\u0e49\u0e32\u0e07",closeText:"\u0e1b\u0e34\u0e14",selectedText:"{count} \u0e40\u0e25\u0e37\u0e2d\u0e01",dateFormat:"DD/MM/YYYY",dateFormatFull:"\u0e27\u0e31\u0e19DDDD\u0e17\u0e35\u0e48 D MMMM YYYY",dateFormatLong:"\u0e27\u0e31\u0e19DDD\u0e17\u0e35\u0e48 D MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c","\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c","\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23","\u0e1e\u0e38\u0e18","\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35","\u0e28\u0e38\u0e01\u0e23\u0e4c","\u0e40\u0e2a\u0e32\u0e23\u0e4c"],dayNamesShort:["\u0e2d\u0e32.","\u0e08.","\u0e2d.","\u0e1e.","\u0e1e\u0e24.","\u0e28.","\u0e2a."],dayNamesMin:["\u0e2d\u0e32.","\u0e08.","\u0e2d.","\u0e1e.","\u0e1e\u0e24.","\u0e28.","\u0e2a."],dayText:"\u0e27\u0e31\u0e19",hourText:"\u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",minuteText:"\u0e19\u0e32\u0e17\u0e35",fromText:"\u0e08\u0e32\u0e01",monthNames:["\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21","\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c","\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21","\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19","\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21","\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19","\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21","\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21","\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19","\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21","\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19","\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21"],monthNamesShort:["\u0e21.\u0e04.","\u0e01.\u0e1e.","\u0e21\u0e35.\u0e04.","\u0e40\u0e21.\u0e22.","\u0e1e.\u0e04.","\u0e21\u0e34.\u0e22.","\u0e01.\u0e04.","\u0e2a.\u0e04.","\u0e01.\u0e22.","\u0e15.\u0e04.","\u0e1e.\u0e22.","\u0e18.\u0e04."],monthText:"\u0e40\u0e14\u0e37\u0e2d\u0e19",secondText:"\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",timeFormat:"HH:mm",yearText:"\u0e1b\u0e35",toText:"\u0e16\u0e36\u0e07",nowText:"\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49",pmText:"pm",amText:"am",firstDay:0,dateText:"\u0e27\u0e31\u0e19",timeText:"\u0e40\u0e27\u0e25\u0e32",todayText:"\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49",eventText:"\u0e40\u0e2b\u0e15\u0e38\u0e01\u0e32\u0e23\u0e13\u0e4c",eventsText:"\u0e40\u0e2b\u0e15\u0e38\u0e01\u0e32\u0e23\u0e13\u0e4c",allDayText:"\u0e15\u0e25\u0e2d\u0e14\u0e27\u0e31\u0e19",noEventsText:"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21",moreEventsText:"\u0e2d\u0e35\u0e01 {count} \u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21",weekText:"\u0e2a\u0e31\u0e1b\u0e14\u0e32\u0e2b\u0e4c\u0e17\u0e35\u0e48 {count}",rangeStartLabel:"\u0e08\u0e32\u0e01",rangeEndLabel:"\u0e16\u0e36\u0e07",rangeStartHelp:"\u0e40\u0e25\u0e37\u0e2d\u0e01",rangeEndHelp:"\u0e40\u0e25\u0e37\u0e2d\u0e01",filterEmptyText:"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e1c\u0e25\u0e25\u0e31\u0e1e\u0e18\u0e4c",filterPlaceholderText:"\u0e04\u0e49\u0e19\u0e2b\u0e32"},Re={setText:"Se\xe7",cancelText:"\u0130ptal",clearText:"Temizleyin",closeText:"Kapatmak",selectedText:"{count} se\xe7ilmi\u015f",dateFormat:"DD.MM.YYYY",dateFormatFull:"D MMMM DDDD YYYY",dateFormatLong:"D MMMM DDD, YYYY",dateWheelFormat:"|D MMM DDD|",dayNames:["Pazar","Pazartesi","Sal\u0131","\xc7ar\u015famba","Per\u015fembe","Cuma","Cumartesi"],dayNamesShort:["Paz","Pzt","Sal","\xc7ar","Per","Cum","Cmt"],dayNamesMin:["P","P","S","\xc7","P","C","C"],dayText:"G\xfcn",hourText:"Saat",minuteText:"Dakika",fromText:"Ba\u015fla",monthNames:["Ocak","\u015eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011fustos","Eyl\xfcl","Ekim","Kas\u0131m","Aral\u0131k"],monthNamesShort:["Oca","\u015eub","Mar","Nis","May","Haz","Tem","A\u011fu","Eyl","Eki","Kas","Ara"],monthText:"Ay",secondText:"Saniye",timeFormat:"HH:mm",yearText:"Y\u0131l",toText:"Son",nowText:"\u015eimdi",pmText:"pm",amText:"am",todayText:"Bug\xfcn",firstDay:1,dateText:"Tarih",timeText:"Zaman",allDayText:"T\xfcm g\xfcn",noEventsText:"Etkinlik Yok",eventText:"Etkinlik",eventsText:"Etkinlikler",moreEventsText:"{count} tane daha",weekText:"{count}. Hafta",rangeStartLabel:"Ba\u015fla",rangeEndLabel:"Son",rangeStartHelp:"Se\xe7",rangeEndHelp:"Se\xe7",filterEmptyText:"Sonu\xe7 Yok",filterPlaceholderText:"Aray\u0131n"},De={setText:"\u0110\u1eb7t",cancelText:"H\u1ee7y b\xf2",clearText:"X\xf3a",closeText:"\u0110\xf3ng",selectedText:"{count} ch\u1ecdn",dateFormat:"DD/MM/YYYY",dateFormatFull:"DDDD, D MMMM YYYY",dateFormatLong:"DDD D, MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Ch\u1ee7 Nh\u1eadt","Th\u1ee9 Hai","Th\u1ee9 Ba","Th\u1ee9 T\u01b0","Th\u1ee9 N\u0103m","Th\u1ee9 S\xe1u","Th\u1ee9 B\u1ea3y"],dayNamesShort:["CN","T2","T3","T4","T5","T6","T7"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],dayText:"",hourText:"Gi\u1edd",minuteText:"Ph\xfat",fromText:"T\u1eeb",monthNames:["Th\xe1ng M\u1ed9t","Th\xe1ng Hai","Th\xe1ng Ba","Th\xe1ng T\u01b0","Th\xe1ng N\u0103m","Th\xe1ng S\xe1u","Th\xe1ng B\u1ea3y","Th\xe1ng T\xe1m","Th\xe1ng Ch\xedn","Th\xe1ng M\u01b0\u1eddi","Th\xe1ng M\u01b0\u1eddi M\u1ed9t","Th\xe1ng M\u01b0\u1eddi Hai"],monthNamesShort:["Th\xe1ng 1","Th\xe1ng 2","Th\xe1ng 3","Th\xe1ng 4","Th\xe1ng 5","Th\xe1ng 6","Th\xe1ng 7","Th\xe1ng 8","Th\xe1ng 9","Th\xe1ng 10","Th\xe1ng 11","Th\xe1ng 12"],monthText:"Th\xe1ng",secondText:"Gi\xe2y",timeFormat:"H:mm",yearText:"N\u0103m",toText:"T\u1edbi",nowText:"B\xe2y gi\u1edd",pmText:"pm",amText:"am",firstDay:0,dateText:"Ng\xe0y",timeText:"H\xf4\u0340i",todayText:"H\xf4m nay",eventText:"S\u1ef1 ki\u1ec7n",eventsText:"S\u1ef1 ki\u1ec7n",allDayText:"C\u1ea3 ng\xe0y",noEventsText:"Kh\xf4ng c\xf3 s\u1ef1 ki\u1ec7n",moreEventsText:"{count} th\u1ebb kh\xe1c",weekText:"Tu\u1ea7n {count}",rangeStartLabel:"T\u1eeb",rangeEndLabel:"T\u1edbi",rangeStartHelp:"Ch\u1ecdn",rangeEndHelp:"Ch\u1ecdn",filterEmptyText:"Kh\xf4ng k\u1ebft qu\u1ea3",filterPlaceholderText:"T\xecm ki\u1ebfm"},Le={setText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",clearText:"\u660e\u786e",closeText:"\u5173\u95ed",selectedText:"{count} \u9009",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateFormatFull:"YYYY\u5e74M\u6708D\u65e5",dateFormatLong:"YYYY\u5e74M\u6708D\u65e5",dateWheelFormat:"|M\u6708D\u65e5 DDD|",dayNames:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],dayNamesShort:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],dayNamesMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],dayText:"\u65e5",hourText:"\u65f6",minuteText:"\u5206",fromText:"\u5f00\u59cb\u65f6\u95f4",monthNames:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],monthNamesShort:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"],monthText:"\u6708",secondText:"\u79d2",timeFormat:"H:mm",yearText:"\u5e74",toText:"\u7ed3\u675f\u65f6\u95f4",nowText:"\u5f53\u524d",pmText:"\u4e0b\u5348",amText:"\u4e0a\u5348",yearSuffix:"\u5e74",monthSuffix:"\u6708",daySuffix:"\u65e5",todayText:"\u4eca\u5929",dateText:"\u65e5",timeText:"\u65f6\u95f4",allDayText:"\u5168\u5929",noEventsText:"\u65e0\u4e8b\u4ef6",eventText:"\u6d3b\u52a8",eventsText:"\u6d3b\u52a8",moreEventsText:"\u4ed6 {count} \u4ef6",weekText:"\u7b2c {count} \u9031",rangeStartLabel:"\u5f00\u59cb\u65f6\u95f4",rangeEndLabel:"\u7ed3\u675f\u65f6\u95f4",rangeStartHelp:"\u9009\u53d6",rangeEndHelp:"\u9009\u53d6",filterEmptyText:"\u6ca1\u6709\u7ed3\u679c",filterPlaceholderText:"\u641c\u7d22"};var Ne={},Fe=new Date(1970,0,1),ze=864e5;function Ue(e){return!!e._mbsc}function je(e,t,n){var r=n||t.dataTimezone||t.displayTimezone,i=t.timezonePlugin;if(r&&i&&Ue(e)){var o=e.clone();return o.setTimezone(r),o.toISOString()}return e}var Be={amText:"am",dateFormat:"MM/DD/YYYY",dateFormatFull:"DDDD, MMMM D, YYYY",dateFormatLong:"D DDD MMM YYYY",dateText:"Date",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["S","M","T","W","T","F","S"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daySuffix:"",dayText:"Day",firstDay:0,fromText:"Start",getDate:nt,hourText:"Hour",minuteText:"Minute",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthSuffix:"",monthText:"Month",pmText:"pm",quarterText:"Q{count}",secondText:"Second",separator:" ",shortYearCutoff:"+10",timeFormat:"h:mm A",timeText:"Time",toText:"End",todayText:"Today",weekText:"Week {count}",yearSuffix:"",yearText:"Year",getMonth:function(e){return e.getMonth()},getDay:function(e){return e.getDate()},getYear:function(e){return e.getFullYear()},getMaxDayOfMonth:function(e,t){return 32-new Date(e,t,32,12).getDate()},getWeekNumber:function(e){var t=new Date(+e);t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));var n=new Date(t.getFullYear(),0,1);return Math.ceil(((t-n)/864e5+1)/7)}},Ve=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[T\s](\d{2}):?(\d{2})(?::?(\d{2})(?:\.(\d{3}))?)?((Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/,He=/^((\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function $e(e,t,n){var r,i,o={y:1,m:2,d:3,h:4,i:5,s:6,u:7,tz:8};if(n)for(var s=0,a=Object.keys(o);s<a.length;s++)(i=e[o[r=a[s]]-t])&&(n[r]="tz"===r?i:1)}function Ye(e){return+new Date(1970,0,1,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())-+Fe}function Ge(e,t){var n=st(e,t);return n.setHours(0,0,0,0),n}function qe(e,t){var n=st(e,t);return n.setHours(23,59,59,999),n}function We(e,t,n,r,i){return(!t&&!i||e.exclusiveEndDates)&&n&&r&&n<r?st(t?Q:e,+r-1):r}function Ke(e){return e.getFullYear()+"-"+ge(e.getMonth()+1)+"-"+ge(e.getDate())}function Ze(e,t){return Ue(e)&&!t?e.createDate(e.getFullYear(),e.getMonth(),e.getDate()):nt(e.getFullYear(),e.getMonth(),e.getDate())}function Je(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}function Xe(e,t){return ye((Je(t)-Je(e))/ze)}function Qe(e,t,n){var r=e.getFullYear(),i=e.getMonth(),o=e.getDay(),s=n===Q?t.firstDay:n;return new Date(r,i,s-(s-o>0?7:0)-o+e.getDate())}function et(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function tt(e,t,n){return n.getYear(e)===n.getYear(t)&&n.getMonth(e)===n.getMonth(t)}function nt(e,t,n,r,i,o,s){var a=new Date(e,t,n,r||0,i||0,o||0,s||0);return 23===a.getHours()&&0===(r||0)&&a.setHours(a.getHours()+2),a}function rt(e){return e.getTime}function it(e,t){return st(e,t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function ot(e){return e?new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()):e}function st(e,t,n,r,i,o,s,a){return null===t?null:t&&(ae(t)||le(t))&&ue(n)?at(t,e):e&&e.timezonePlugin?e.timezonePlugin.createDate(e,t,n,r,i,o,s,a):he(t)?new Date(t):ue(t)?new Date:new Date(t,n||0,r||1,i||0,o||0,s||0,a||0)}function at(e,t,n,r,i){var o;if(le(e)&&(e=e.trim()),!e)return null;var s=t&&t.timezonePlugin;if(s&&!i){var a=Ue(e)?e:s.parse(e,t);return a.setTimezone(t.displayTimezone),a}if(rt(e))return e;if(e._isAMomentObject)return e.toDate();if(ae(e))return new Date(e);o=He.exec(e);var l=t&&t.defaultValue,c=at((oe(l)?l[0]:l)||new Date),u=c.getFullYear(),h=c.getMonth(),d=c.getDate();return o?($e(o,2,r),new Date(u,h,d,o[2]?+o[2]:0,o[3]?+o[3]:0,o[4]?+o[4]:0,o[5]?+o[5]:0)):(o=Ve.exec(e))?($e(o,0,r),new Date(o[1]?+o[1]:u,o[2]?o[2]-1:h,o[3]?+o[3]:d,o[4]?+o[4]:0,o[5]?+o[5]:0,o[6]?+o[6]:0,o[7]?+o[7]:0)):ut(n,e,t)}function lt(e,t,n,r,i){var o=_&&window.moment||t.moment,s=t.timezonePlugin&&(t.dataTimezone||t.displayTimezone),a=s?"iso8601":t.returnFormat;if(s&&i)return je(e,t);if(e){if("moment"===a&&o)return o(e);if("locale"===a)return ct(n,e,t);if("iso8601"===a)return function(e,t){var n="",r="";return e&&(t.h&&(r+=ge(e.getHours())+":"+ge(e.getMinutes()),t.s&&(r+=":"+ge(e.getSeconds())),t.u&&(r+="."+ge(e.getMilliseconds(),3)),t.tz&&(r+=t.tz)),t.y?(n+=e.getFullYear(),t.m&&(n+="-"+ge(e.getMonth()+1),t.d&&(n+="-"+ge(e.getDate())),t.h&&(n+="T"+r))):t.h&&(n=r)),n}(e,r)}return e}function ct(e,t,n){var r,i,o="",s=!1,a=function(t){for(var n=0,i=r;i+1<e.length&&e.charAt(i+1)===t;)n++,i++;return n},l=function(e){var t=a(e);return r+=t,t},c=function(e,t,n){var r=""+t;if(l(e))for(;r.length<n;)r="0"+r;return r},u=function(e,t,n,r){return 3===l(e)?r[t]:n[t]};for(r=0;r<e.length;r++)if(s)"'"!==e.charAt(r)||l("'")?o+=e.charAt(r):s=!1;else switch(e.charAt(r)){case"D":o+=a("D")>1?u("D",t.getDay(),n.dayNamesShort,n.dayNames):c("D",n.getDay(t),2);break;case"M":o+=a("M")>1?u("M",n.getMonth(t),n.monthNamesShort,n.monthNames):c("M",n.getMonth(t)+1,2);break;case"Y":i=n.getYear(t),o+=3===l("Y")?i:(i%100<10?"0":"")+i%100;break;case"h":var h=t.getHours();o+=c("h",h>12?h-12:0===h?12:h,2);break;case"H":o+=c("H",t.getHours(),2);break;case"m":o+=c("m",t.getMinutes(),2);break;case"s":o+=c("s",t.getSeconds(),2);break;case"a":o+=t.getHours()>11?n.pmText:n.amText;break;case"A":o+=t.getHours()>11?n.pmText.toUpperCase():n.amText.toUpperCase();break;case"'":l("'")?o+="'":s=!0;break;default:o+=e.charAt(r)}return o}function ut(e,t,n){var r=p({},Be,n),i=r.defaultValue,o=at((oe(i)?i[0]:i)||new Date);if(!t)return o;e||(e=r.dateFormat+r.separator+r.timeFormat);var s,a=r.shortYearCutoff,l=r.getYear(o),c=r.getMonth(o)+1,u=r.getDay(o),h=o.getHours(),d=o.getMinutes(),f=0,m=-1,g=!1,y=0,v=function(t){for(var n=0,r=s;r+1<e.length&&e.charAt(r+1)===t;)n++,r++;return n},_=function(e){var t=v(e);return s+=t,t},b=function(e){var n=_(e),r=new RegExp("^\\d{1,"+(n>=2?4:2)+"}"),i=t.substr(y).match(r);return i?(y+=i[0].length,parseInt(i[0],10)):0},w=function(e,n,r){for(var i=3===_(e)?r:n,o=0;o<i.length;o++)if(t.substr(y,i[o].length).toLowerCase()===i[o].toLowerCase())return y+=i[o].length,o+1;return 0},x=function(){y++};for(s=0;s<e.length;s++)if(g)"'"!==e.charAt(s)||_("'")?x():g=!1;else switch(e.charAt(s)){case"Y":l=b("Y");break;case"M":c=v("M")<2?b("M"):w("M",r.monthNamesShort,r.monthNames);break;case"D":v("D")<2?u=b("D"):w("D",r.dayNamesShort,r.dayNames);break;case"H":h=b("H");break;case"h":h=b("h");break;case"m":d=b("m");break;case"s":f=b("s");break;case"a":m=w("a",[r.amText,r.pmText],[r.amText,r.pmText])-1;break;case"A":m=w("A",[r.amText,r.pmText],[r.amText,r.pmText])-1;break;case"'":_("'")?x():g=!0;break;default:x()}if(l<100){var S;S=l<=(le(a)?(new Date).getFullYear()%100+parseInt(a,10):+a)?0:-100,l+=(new Date).getFullYear()-(new Date).getFullYear()%100+S}h=-1===m?h:m&&h<12?h+12:m||12!==h?h:0;var E=r.getDate(l,c-1,u,h,d,f);return r.getYear(E)!==l||r.getMonth(E)+1!==c||r.getDay(E)!==u?o:E}function ht(e,t,n){if(e===t)return!0;if(oe(e)&&!e.length&&null===t||oe(t)&&!t.length&&null===e)return!0;if(null===e||null===t||e===Q||t===Q)return!1;if(le(e)&&le(t))return e===t;var r=n&&n.dateFormat;if(oe(e)||oe(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++){var o=e[i],s=t[i];if(!(le(o)&&le(s)?o===s:+at(o,n,r)==+at(s,n,r)))return!1}return!0}return+at(e,n,r)==+at(t,n,r)}function dt(e){return Ue(e)?e.clone():new Date(e)}function pt(e,t){var n=dt(e);return n.setDate(n.getDate()+t),n}function ft(e,t,n){return t&&e<t?new Date(t):n&&e>n?new Date(n):e}_&&"undefined"==typeof Symbol&&(window.Symbol={toPrimitive:"toPrimitive"});var mt=_?document:Q,gt=_?window:Q,yt=["Webkit","Moz"],vt=mt&&mt.createElement("div").style,_t=mt&&mt.createElement("canvas"),bt=_t&&_t.getContext&&_t.getContext("2d",{willReadFrequently:!0}),wt=gt&&gt.CSS,xt=wt&&wt.supports,St={},Et=gt&&gt.requestAnimationFrame||function(e){return setTimeout(e,20)},Tt=gt&&gt.cancelAnimationFrame||function(e){clearTimeout(e)},Mt=vt&&vt.animationName!==Q,At="ios"===m&&!E,kt=At&&gt&&gt.webkit&&gt.webkit.messageHandlers,Ct=vt&&vt.touchAction===Q||At&&!kt,It=function(){if(!vt||vt.transform!==Q)return"";for(var e=0,t=yt;e<t.length;e++){var n=t[e];if(vt[n+"Transform"]!==Q)return n}return""}(),Pt=It?"-"+It.toLowerCase()+"-":"",Ot=xt&&xt("(transform-style: preserve-3d)");xt&&(xt("position","sticky")||xt("position","-webkit-sticky"));function Rt(e,t,n,r){e&&e.addEventListener(t,n,r)}function Dt(e,t,n,r){e&&e.removeEventListener(t,n,r)}function Lt(e){return _?e&&e.ownerDocument?e.ownerDocument:mt:Q}function Nt(e,t){var n=le(e)?t.querySelector(e):e;return n||(n=t.body),n}function Ft(e){return e.scrollLeft!==Q?e.scrollLeft:e.pageXOffset}function zt(e){return e.scrollTop!==Q?e.scrollTop:e.pageYOffset}function Ut(e){return _?e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:gt:Q}function jt(e,t){var n=getComputedStyle(e),r=(It?n[It+"Transform"]:n.transform).split(")")[0].split(", ");return+(t?r[13]||r[5]:r[12]||r[4])||0}function Bt(e){if(!bt||!e)return"#000";if(St[e])return St[e];bt.fillStyle=e,bt.fillRect(0,0,1,1);var t=bt.getImageData(0,0,1,1),n=t?t.data:[0,0,0],r=.299*+n[0]+.587*+n[1]+.114*+n[2]<130?"#fff":"#000";return St[e]=r,r}function Vt(e,t,n,r,i,o){var s,a=+new Date,l=ye(e.scrollLeft),c=ye(e.scrollTop),u=t===Q?l:Math.max(0,ye(t))*(i?-1:1),h=n===Q?c:Math.max(0,ye(n));return r?(s=!0,function t(){var n=Math.min(1,(+new Date-a)/468),r=.5*(1-Math.cos(Math.PI*n)),i=ye(l+(u-l)*r),d=ye(c+(h-c)*r);e.scrollLeft=i,e.scrollTop=d,i!==u||d!==h?Et(function(){t()}):o&&(s=!1,o())}()):(e.scrollLeft=u,e.scrollTop=h,o&&o()),function(t,n){u=t===Q?u:Math.max(0,ye(t))*(i?-1:1),h=n===Q?h:Math.max(0,ye(n)),r&&s||(e.scrollLeft=u,e.scrollTop=h)}}function Ht(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=Ut(e);return r!==Q&&(n.top+=zt(r),n.left+=Ft(r)),n}function $t(e,t){var n=e&&(e.matches||e.msMatchesSelector);return n&&n.call(e,t)}function Yt(e,t,n){for(;e&&!$t(e,t);){if(e===n||e.nodeType===e.DOCUMENT_NODE)return null;e=e.parentNode}return e}function Gt(e,t,n){var r;try{r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n})}catch(e){(r=document.createEvent("Event")).initEvent(t,!0,!0),r.detail=n}e.dispatchEvent(r)}function qt(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}var Wt,Kt=Q,Zt="onAnimationEnd",Jt="onContextMenu",Xt="onKeyDown",Qt=(0,r.createContext)({}),en=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._setEl=function(e){t._el=e?e._el||e:null},t}return d(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._baseValue},set:function(e){this._baseValue=e},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){this._baseInit(),this._init(),this._mounted(),this._updated()},t.prototype.componentDidUpdate=function(){this._updated()},t.prototype.componentWillUnmount=function(){this._destroy(),this._baseDestroy()},t.prototype.render=function(){return this._opt=this.context,this._willUpdate(),this._template(this.s,this.state)},t.prototype._safeHtml=function(e){return{__html:e}},t.prototype._init=function(){},t.prototype._baseInit=function(){},t.prototype._emit=function(e,t){},t.prototype._mounted=function(){},t.prototype._updated=function(){},t.prototype._destroy=function(){},t.prototype._baseDestroy=function(){},t.prototype._willUpdate=function(){},t.prototype._template=function(e,t){},t.contextType=Qt,t}(r.PureComponent),tn=0,nn={large:992,medium:768,small:576,xlarge:1200,xsmall:0};b&&(Wt=b.matches,b.addListener(function(e){Wt=e.matches,I.next()}));var rn,on,sn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.s={},t.state={},t._mbsc=!0,t._v={version:"5.35.2"},t._uid=++tn,t._proxyHook=function(e){t._hook(e.type,e)},t}return d(t,e),Object.defineProperty(t.prototype,"nativeElement",{get:function(){return this._el},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){},t.prototype._hook=function(e,t){var n=this.s;if(t.inst=this,t.type=e,n[e])return n[e](t,this);this._emit(e,t)},t.prototype._baseInit=function(){var e=this;if(this.constructor.defaults){this._optChange=I.subscribe(function(){e.forceUpdate()});var t=this.props.modules;if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n];i.init&&i.init(this)}}this._hook("onInit",{})},t.prototype._baseDestroy=function(){this._optChange!==Q&&I.unsubscribe(this._optChange),this._hook("onDestroy",{})},t.prototype._render=function(e,t){},t.prototype._willUpdate=function(){this._merge(),this._render(this.s,this.state)},t.prototype._resp=function(e){var t,n=e.responsive,r=-1,i=this.state.width;if(i===Q&&(i=375),n&&i)for(var o=0,s=Object.keys(n);o<s.length;o++){var a=s[o],l=n[a],c=l.breakpoint||nn[a];i>=c&&c>r&&(t=l,r=c)}return t},t.prototype._merge=function(){var e,t,n=this.constructor,r=n.defaults,i=this._opt||{},o={};if(this._prevS=this.s||{},r){for(var s in this.props)this.props[s]!==Q&&(o[s]=this.props[s]);var a=o.locale||i.locale||A.locale||{},l=o.calendarSystem||a.calendarSystem||i.calendarSystem||A.calendarSystem,c=o.theme||i.theme||A.theme,u=o.themeVariant||i.themeVariant||A.themeVariant;"auto"!==c&&c||(c=C.theme||""),"dark"!==u&&(!Wt||"auto"!==u&&u)||!k[c+"-dark"]||(c+="-dark"),o.theme=c;var h=(t=k[c])&&t[n._name];e=p({},r,h,a,A,i,l,o);var d=this._resp(e);this._respProps=d,d&&(e=p({},e,d))}else e=p({},this.props),t=k[e.theme];var f=t&&t.baseTheme;e.baseTheme=f,this.s=e,this._className=e.cssClass||e.class||e.className||"",this._rtl=" mbsc-"+(e.rtl?"rtl":"ltr"),this._theme=" mbsc-"+e.theme+(f?" mbsc-"+f:""),this._touchUi="auto"===e.touchUi||e.touchUi===Q?v:e.touchUi,this._hb="ios"!==m||"ios"!==e.theme&&"ios"!==f?"":" mbsc-hb"},t.defaults=Q,t._name="",t}(en),an=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t){return t._hasChildren?(0,r.createElement)("span",{onClick:e.onClick,className:t._cssClass},e.name):(0,r.createElement)("span",{onClick:e.onClick,className:t._cssClass,dangerouslySetInnerHTML:t._svg,"v-html":Q})}(e,this)},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._render=function(e){this._hasChildren=e.name!==Q&&!le(e.name),this._cssClass=this._className+" mbsc-icon"+this._theme+(e.name&&!this._hasChildren?-1!==e.name.indexOf(" ")?" "+e.name:" mbsc-font-icon mbsc-icon-"+e.name:""),this._svg=e.svg?this._safeHtml(e.svg):Q},t}(sn)),ln="animationstart",cn="blur",un="change",hn="click",dn="contextmenu",pn="dblclick",fn="focus",mn="focusin",gn="input",yn="keydown",vn="mousedown",_n="mousemove",bn="mouseup",wn="mouseenter",xn="mouseleave",Sn="mousewheel",En="resize",Tn="scroll",Mn="touchstart",An="touchmove",kn="touchend",Cn="touchcancel",In="wheel",Pn=0;function On(e,t,n){var r=(n?"page":"client")+t;return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0][r]:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0][r]:e[r]}function Rn(e){!Pn||rn||e.isMbscTap||"TEXTAREA"===e.target.nodeName&&e.type===vn||(e.stopPropagation(),e.preventDefault())}function Dn(e){Ut(e.target).__mbscFocusVisible=!1}function Ln(e){Ut(e.target).__mbscFocusVisible=!0}function Nn(e){e&&setTimeout(function(){e.style.opacity="0",e.style.transition="opacity linear .4s",setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},400)},200)}function Fn(e,t){var n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y={},v=Ut(e),_=Lt(e);function b(e){if(e.type===Mn)on=!0;else if(on)return e.type===vn&&(on=!1),!0;return!1}function w(){l&&(Nn(o),o=function(e,t,n){var r=e.getBoundingClientRect(),i=t-r.left,o=n-r.top,s=Math.max(i,e.offsetWidth-i),a=Math.max(o,e.offsetHeight-o),l=2*Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),c=mt.createElement("span");c.classList.add("mbsc-ripple");var u=c.style;return u.backgroundColor=getComputedStyle(e).color,u.width=l+"px",u.height=l+"px",u.top=n-r.top-l/2+"px",u.left=t-r.left-l/2+"px",e.appendChild(c),setTimeout(function(){u.opacity=".2",u.transform="scale(1)",u.transition="opacity linear .1s, transform cubic-bezier(0, 0, 0.2, 1) .4s"},30),c}(e,d,p)),t.onPress(),n=!0}function x(e,o){r=!1,Nn(e),clearTimeout(i),i=setTimeout(function(){n&&(t.onRelease(),n=!1)},o)}function S(s){if(!b(s)&&(s.type!==vn||0===s.button&&!s.ctrlKey)){if(u=On(s,"X"),h=On(s,"Y"),d=u,p=h,n=!1,r=!1,c=!1,g=!0,y.moved=c,y.startX=u,y.startY=h,y.endX=d,y.endY=p,y.deltaX=0,y.deltaY=0,y.domEvent=s,y.isTouch=on,y.target=e,Nn(o),t.onStart){var a=t.onStart(y);l=a&&a.ripple}t.onPress&&(r=!0,clearTimeout(i),i=setTimeout(w,50)),s.type===vn&&(Rt(_,_n,E),Rt(_,bn,T)),Rt(_,dn,D)}}function E(e){g&&(d=On(e,"X"),p=On(e,"Y"),f=d-u,m=p-h,!c&&(Math.abs(f)>9||Math.abs(m)>9)&&(c=!0,x(o)),y.moved=c,y.endX=d,y.endY=p,y.deltaX=f,y.deltaY=m,y.domEvent=e,y.isTouch=e.type===An,t.onMove&&t.onMove(y))}function T(e){g&&(r&&!n&&(clearTimeout(i),i=null,w()),y.domEvent=e,y.isTouch=e.type===kn,t.onEnd&&t.onEnd(y),x(o,75),g=!1,e.type===kn&&t.click&&Ct&&!c&&function(e,t){if(!t.mbscClick){var n=(e.originalEvent||e).changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),r.isMbscTap=!0,r.isIonicTap=!0,rn=!0,t.mbscChange=!0,t.mbscClick=!0,t.dispatchEvent(r),rn=!1,Pn++,setTimeout(function(){Pn--},500),setTimeout(function(){delete t.mbscClick})}}(e,e.target),e.type===bn&&(Dt(_,_n,E),Dt(_,bn,T)),Dt(_,dn,D))}function M(e){b(e)||(a=!0,t.onHoverIn(e))}function A(e){a&&t.onHoverOut(e),a=!1}function k(e){t.onKeyDown(e)}function C(e){(t.keepFocus||v.__mbscFocusVisible)&&(s=!0,t.onFocus(e))}function I(e){s&&t.onBlur(e),s=!1}function P(e){t.onChange(e)}function O(e){t.onInput(e)}function R(e){y.domEvent=e,on||t.onDoubleClick(y)}function D(e){on&&e.preventDefault()}if(Rt(e,vn,S),Rt(e,Mn,S,{passive:!0}),Rt(e,An,E,{passive:!1}),Rt(e,kn,T),Rt(e,Cn,T),t.onChange&&Rt(e,un,P),t.onInput&&Rt(e,gn,O),t.onHoverIn&&Rt(e,wn,M),t.onHoverOut&&Rt(e,xn,A),t.onKeyDown&&Rt(e,yn,k),t.onFocus&&v&&(Rt(e,fn,C),!t.keepFocus)){var L=v.__mbscFocusCount||0;0===L&&(Rt(v,vn,Dn,!0),Rt(v,yn,Ln,!0)),v.__mbscFocusCount=++L}return t.onBlur&&Rt(e,cn,I),t.onDoubleClick&&Rt(e,pn,R),function(){if(i&&clearTimeout(i),t.onFocus&&v&&!t.keepFocus){var n=v.__mbscFocusCount||0;v.__mbscFocusCount=--n,n<=0&&(Dt(v,vn,Dn),Dt(v,yn,Ln))}Dt(e,gn,O),Dt(e,vn,S),Dt(e,Mn,S,{passive:!0}),Dt(e,An,E,{passive:!1}),Dt(e,kn,T),Dt(e,Cn,T),Dt(_,_n,E),Dt(_,bn,T),Dt(_,dn,D),Dt(e,un,P),Dt(e,wn,M),Dt(e,xn,A),Dt(e,yn,k),Dt(e,fn,C),Dt(e,cn,I),Dt(e,pn,R)}}_&&(["mousedown",wn,vn,bn,hn].forEach(function(e){mt.addEventListener(e,Rn,!0)}),"android"===m&&M<5&&mt.addEventListener(un,function(e){var t=e.target;Pn&&"checkbox"===t.type&&!t.mbscChange&&(e.stopPropagation(),e.preventDefault()),delete t.mbscChange},!0));var zn=13,Un=32,jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t,n){var i=t.props,o=i.ariaLabel;i.children,i.className,i.color;var s=i.endIcon;i.endIconSrc;var a=i.endIconSvg;i.hasChildren,i.hidden;var l=i.icon;i.iconSrc;var c=i.iconSvg;i.ripple,i.rtl;var u=i.role,h=i.startIcon;i.startIconSrc;var d=i.startIconSvg;i.tag,i.tabIndex,i.theme,i.themeVariant,i.variant;var m=f(i,["ariaLabel","children","className","color","endIcon","endIconSrc","endIconSvg","hasChildren","hidden","icon","iconSrc","iconSvg","ripple","rtl","role","startIcon","startIconSrc","startIconSvg","tag","tabIndex","theme","themeVariant","variant"]),g=p({"aria-label":o,className:t._cssClass,ref:t._setEl},m),y=(0,r.createElement)(r.Fragment,null,t._isIconOnly&&(0,r.createElement)(an,{className:t._iconClass,name:l,svg:c,theme:e.theme}),t._hasStartIcon&&(0,r.createElement)(an,{className:t._startIconClass,name:h,svg:d,theme:e.theme}),n,t._hasEndIcon&&(0,r.createElement)(an,{className:t._endIconClass,name:s,svg:a,theme:e.theme}));return"span"===e.tag?(0,r.createElement)("span",p({role:u,"aria-disabled":e.disabled,tabIndex:t._tabIndex},g),y):"a"===e.tag?(0,r.createElement)("a",p({"aria-disabled":e.disabled,tabIndex:t._tabIndex},g),y):(0,r.createElement)("button",p({role:u,tabIndex:t._tabIndex},g),y)}(e,this,e.children)},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._mounted=function(){var e=this;this._unlisten=Fn(this._el,{click:!0,onBlur:function(){e.setState({hasFocus:!1})},onFocus:function(){e.setState({hasFocus:!0})},onHoverIn:function(){e.s.disabled||e.setState({hasHover:!0})},onHoverOut:function(){e.setState({hasHover:!1})},onKeyDown:function(t){switch(t.keyCode){case zn:case Un:e._el.click(),t.preventDefault()}},onPress:function(){e.setState({isActive:!0})},onRelease:function(){e.setState({isActive:!1})},onStart:function(){return{ripple:e.s.ripple&&!e.s.disabled}}})},t.prototype._render=function(e,t){var n=this,r=e.disabled;this._isIconOnly=!(!e.icon&&!e.iconSvg),this._hasStartIcon=!(!e.startIcon&&!e.startIconSvg),this._hasEndIcon=!(!e.endIcon&&!e.endIconSvg),this._tabIndex=r||e.hidden?Q:e.tabIndex||0,this._cssClass=this._className+" mbsc-reset mbsc-font mbsc-button"+this._theme+this._rtl+" mbsc-button-"+e.variant+(this._isIconOnly?" mbsc-icon-button":"")+(r?" mbsc-disabled":"")+(e.color?" mbsc-button-"+e.color:"")+(t.hasFocus&&!r?" mbsc-focus":"")+(t.isActive&&!r?" mbsc-active":"")+(t.hasHover&&!r?" mbsc-hover":""),this._iconClass="mbsc-button-icon"+this._rtl,this._startIconClass=this._iconClass+" mbsc-button-icon-start",this._endIconClass=this._iconClass+" mbsc-button-icon-end",e.disabled&&t.hasHover&&setTimeout(function(){n.setState({hasHover:!1})})},t.prototype._destroy=function(){this._unlisten&&this._unlisten()},t.defaults={ripple:!1,role:"button",tag:"button",variant:"standard"},t._name="Button",t}(sn)),Bn={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},Vn={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},Hn={byday:"weekDays",bymonth:"month",bymonthday:"day",bysetpos:"pos",dtstart:"from",freq:"repeat",wkst:"weekStart"};function $n(e,t,n,r,i){var o=at(t.start,t.allDay?Q:n),s=at(t.end,t.allDay?Q:n),a=s-o;for(r&&(t.start=o,t.end=s),o=Ze(o),s=Ze(pt(We(n,t.allDay,o,s,i),1));o<s||!a;)Yn(e,o,t),o=pt(o,1),a=1}function Yn(e,t,n){var r=Ke(t);e[r]||(e[r]=[],e[r].date=Ze(t,!0)),e[r].push(n)}function Gn(e,t,n,r,i,o){var s={};if(i)for(var a=0,l=Xn(i);a<l.length;a++)s[Ke(at(l[a]))]=!0;if(o)for(var c=0,u=Qn(o,e,e,t,n,r);c<u.length;c++)s[Ke(u[c].d)]=!0;return s}function qn(e){return le(e)||e.getTime||e.toDate?e:e.start||e.date}function Wn(e,t,n){var r=t.original?t.original.start:t.start,i=t.allDay||!r,o=e.timezonePlugin,s=t.timezone||e.dataTimezone||e.displayTimezone;return o&&!i?{dataTimezone:s,displayTimezone:n?s:e.displayTimezone,timezonePlugin:o}:Q}function Kn(e){for(var t={},n=0,r=e.split(";");n<r.length;n++){var i=r[n].split("="),o=i[0].trim().toLowerCase(),s=i[1].trim();t[Hn[o]||o]=s}return t}function Zn(e,t,n,r){for(var i=null,o=0,s=e;o<s.length;o++){var a=s[o];if(a.recurring){var l=at(a.start||a.date),c=Qn(a.recurring,l,l,t,Q,n,a.reccurringException,a.recurringExceptionRule,"first");(!i||c<i)&&(i=c)}else if(a.start&&a.end){var u=at(a.start,n,r);at(a.end,n,r)>t&&(i=u<=t?t:i&&i<u?i:u)}else{var h=at(qn(a),n,r);h>t&&(!i||h<i)&&(i=h)}}return i}function Jn(e,t,n,r){var i=t;e.sort(function(e,t){return at(qn(e),n,r)-at(qn(t),n,r)});for(var o=0,s=e;o<s.length;o++){var a=s[o];if(a.recurring){var l=at(a.start||a.date),c=Qn(a.recurring,l,l,t,Q,n,a.reccurringException,a.recurringExceptionRule,"last");c>i&&(i=c)}else if(a.start&&a.end){var u=at(a.start,n,r),h=at(a.end,n,r);h>i&&Xe(i,u)<=1&&(i=h)}else{var d=at(qn(a),n,r);d>i&&Xe(i,d)<=1&&(i=d)}}return i}function Xn(e){return e?oe(e)?e:le(e)?e.split(","):[e]:[]}function Qn(e,t,n,r,i,o,s,a,l){le(e)&&(e=Kn(e));for(var c,u,h=o.getYear,d=o.getMonth,p=o.getDay,f=o.getDate,m=o.getMaxDayOfMonth,g=(e.repeat||"").toLowerCase(),y=e.interval||1,v=e.count,_=e.from?at(e.from):t||(1!==y||v!==Q?new Date:r),b=Ze(_),w=h(_),x=d(_),S=p(_),E=e.from?_:t||new Date,T=d(E)+1,M=p(E),A=n?n.getHours():0,k=n?n.getMinutes():0,C=n?n.getSeconds():0,I=e.until?at(e.until):1/0,P=_<r,O=P?r:Ze(_),R="first"===l,D="last"===l,L=R||D||!i||I<i?I:i,N=v===Q?1/0:v,F=(e.weekDays||Bn[E.getDay()]).split(","),z=Vn[(e.weekStart||"MO").trim().toUpperCase()],U=e.day,j=e.month,B=oe(U)?U.length?U:[M]:((U||M)+"").split(","),V=oe(j)?j.length?j:[T]:((j||T)+"").split(","),H=[],$=e.pos!==Q,Y=$?+e.pos:1,G=[],q=i?Gn(t,r,i,o,s,a):{},W=!0,K=0,Z=0,J=null,X=r,ee=0,te=F;ee<te.length;ee++){var ne=te[ee];G.push(Vn[ne.trim().toUpperCase()])}var re=function(){if(i||(q=Gn(u,u,pt(u,1),o,s,a)),!q[Ke(u)]&&u>=O)if(R)J=!J||u<J?u:J,W=!1;else if(D){var e=Xe(X,u);X=u>X&&e<=1?u:X,W=e<=1}else H.push({d:u,i:Z});Z++},ie=function(e,t){for(var n=[],r=0,i=G;r<i.length;r++)for(var o=Qe(e,{firstDay:i[r]});o<t;o.setDate(o.getDate()+7))o.getMonth()===e.getMonth()&&n.push(+o);n.sort();var s=n[Y<0?n.length+Y:Y-1];u=s?new Date(s):t,(u=f(h(u),d(u),p(u),A,k,C))>=_&&(u<=L&&Z<N?s&&re():W=!1)};switch(g){case"daily":for(Z=v&&P?_e(Xe(_,r)/y):0;W;)(u=f(w,x,S+Z*y,A,k,C))<=L&&Z<N?re():W=!1;break;case"weekly":var se=G,ae=Qe(_,{firstDay:z}),ce=ae.getDay();for(se.sort(function(e,t){return(e=(e-=ce)<0?e+7:e)-((t-=ce)<0?t+7:t)});W;){for(var ue=0,he=se;ue<he.length;ue++)c=pt(ae,(ne=he[ue])<z?ne-z+7:ne-z),(u=f(h(c),d(c),p(c)+7*K*y,A,k,C))<=L&&Z<N?u>=b&&re():W=!1;K++}break;case"monthly":for(;W;){var de=m(w,x+K*y);if($)ie(f(w,x+K*y,1),f(w,x+K*y+1,1));else for(var pe=0,fe=B;pe<fe.length;pe++){var me=fe[pe];(u=f(w,x+K*y,(xe=+me)<0?de+xe+1:xe,A,k,C))<=L&&Z<N?de>=xe&&u>=b&&re():W=!1}K++}break;case"yearly":for(;W;){for(var ge=0,ye=V;ge<ye.length;ge++){var ve=+ye[ge];if(de=m(w+K*y,ve-1),$)ie(f(w+K*y,ve-1,1),f(w+K*y,ve,1));else for(var be=0,we=B;be<we.length;be++){var xe;me=we[be],(u=f(w+K*y,ve-1,(xe=+me)<0?de+xe+1:xe,A,k,C))<=L&&Z<N?de>=xe&&u>=b&&re():W=!1}}K++}}return R?J:D?X:H}function er(e,t,n,r,i,o){var s={};if(!e)return Q;for(var a=0,l=e;a<l.length;a++){var c=l[a],u=Wn(r,c,!0),h=Wn(r,c),d=qn(c),f=at(d,h);if(c.recurring)for(var m=le(d)&&He.test(d)?null:at(d),g=st(u,f),y=c.end?at(c.end,u):g,v="00:00"===c.end?pt(y,1):y,_=+v-+g,b=g&&v?Xe(g,v)+1:1,w=pt(t,-Math.max(1,b)),x=pt(n,1),S=0,E=Qn(c.recurring,m,g,w,x,r,c.recurringException,c.recurringExceptionRule);S<E.length;S++){var T=E[S],M=T.d,A=p({},c);if(c.start?A.start=st(u,M.getFullYear(),M.getMonth(),M.getDate(),g.getHours(),g.getMinutes(),g.getSeconds()):(A.allDay=!0,A.start=st(Q,M.getFullYear(),M.getMonth(),M.getDate())),c.end)if(c.allDay){var k=pt(M,Xe(g,v));A.end=new Date(k.getFullYear(),k.getMonth(),k.getDate(),v.getHours(),v.getMinutes(),v.getSeconds())}else A.end=st(u,+A.start+_);A.nr=T.i,A.occurrenceId=A.id+"_"+Ke(A.start),A.original=c,A.start&&A.end?$n(s,A,r,i,o):Yn(s,M,A)}else c.start&&c.end?$n(s,c,r,i,o):f&&Yn(s,f,c)}return s}var tr=1,nr="multi-year",rr="year",ir="month",or="page",sr=ie(Be,{dateText:"Date",eventText:"event",eventsText:"events",moreEventsText:"{count} more",nextPageText:"Next page",prevPageText:"Previous page",showEventTooltip:!0,showToday:!0,timeText:"Time"});function ar(e,t){var n=t.refDate?at(t.refDate):Fe,r=t.showCalendar?t.calendarType:t.eventRange,i=(t.showCalendar?"year"===r?1:"week"===r?t.weeks:t.size:t.eventRangeSize)||1,o=t.getDate,s="week"===r?Qe(n,t):n,a=t.getYear(s),l=t.getMonth(s),c=t.getDay(s);switch(r){case"year":return o(a+e*i,0,1);case"week":return o(a,l,c+7*i*e);case"day":return o(a,l,c+i*e);default:return o(a,l+e*i,1)}}function lr(e,t){var n,r=t.refDate?at(t.refDate):Fe,i=t.getYear,o=t.getMonth,s=t.showCalendar?t.calendarType:t.eventRange,a=(t.showCalendar?"year"===s?1:"week"===s?t.weeks:t.size:t.eventRangeSize)||1;switch(s){case"year":n=i(e)-i(r);break;case"week":n=Xe(Qe(r,t),Qe(e,t))/7;break;case"day":n=Xe(r,e);break;case"month":n=o(e)-o(r)+12*(i(e)-i(r));break;default:return Q}return _e(n/a)}function cr(e,t){var n=t.refDate?at(t.refDate):Fe;return _e((t.getYear(e)-t.getYear(n))/12)}function ur(e,t){var n=t.refDate?at(t.refDate):Fe;return t.getYear(e)-t.getYear(n)}function hr(e,t){var n=t.refDate?at(t.refDate):Fe;return t.getMonth(e)-t.getMonth(n)+12*(t.getYear(e)-t.getYear(n))}function dr(e,t){return"auto"===e?Math.max(1,Math.min(3,Math.floor(t?t/296:1))):e?+e:1}function pr(e,t,n,r,i,o,s,a,l,c,u,h,d,p){t=t||{};for(var f={},m=-1===i?1/0:i,g={},y={},v=[],_=n,b=0,w=r;_<r;){var x=Ke(_),S=_.getDay(),E=e.getDay(_),T=c?e.getDate(e.getYear(_),e.getMonth(_)+1,1):Q,M=l&&(S===a||1===E&&c)||+_==+n,A=Qe(_,e),k=fr(t[x]||[],e),C=0,I=0,P=0;M&&(g={},y={},v=[],w=l?pt(A,o):r,T&&T<w&&(w=T)),s&&(k=k.filter(function(e){return e.allDay}));var O=k.length,R=[];if(u)O&&R.push([{id:"count_"+ +_,count:O}]);else{for(;C<m&&P<O;){var D=k[P],L=D.allDay||!D.start,N=Wn(e,D),F=at(D.start||D.date,N),z=D.end?at(D.end,N):F,U=We(e,L,F,z,!p),j=pt(Ze(U),1),B=U<w?j:w,V=F?", "+e.fromText+": "+ct("DDDD, MMMM D, YYYY",F,e):"",H=U?", "+e.toText+": "+ct("DDDD, MMMM D, YYYY",U,e):"",$=p&&!L,Y=$?+F:+Ze(it(e,F)),G=$?+z+(+z==+F?1:0):+it(e,j)-1;D.id===Q&&(D.id="mbsc_"+tr++);var q=D.occurrenceId||D.id,W=$&&et(_,F)?Ye(F)/ze*100:0,K=$&&U<w?100-(Ye(U)+1)/ze*100:0,Z=100*Xe(_,B)-W-K,J=y[q],X=g[q]||[],ee={endTime:G,event:D,id:q,isExact:$,label:(D.title||D.text||"")+V+H,lastDay:T,position:{left:(e.rtl?Q:W)+"%",right:(e.rtl?W:Q)+"%",width:Z+"%"},showText:et(_,F)||M,startTime:Y};if(J!==Q){for(var te=0;te<=J;te++)R[te]||(R[te]=[]);R[J].push(ee),X.push(x),I++}else{te=0;for(var ne=!0;te<=v.length&&ne;){ne=!1;for(var re=0,ie=v[te]||[];re<ie.length&&!ne;){var oe=ie[re];oe.startTime<G&&oe.endTime>Y&&(ne=!0),re++}!R[te]&&te<m&&(R[te]=[]),!ne&&te<m&&(v[te]||(v[te]=[]),R[te].push(ee),v[te].push(ee),y[q]=te,g[q]=[x],I++),te++}}p||(C=R.reduce(function(e,t){return e+(t.length?1:0)},0)),P++}if(I<O){var se=m-1,ae=O-I+R[se].length,le=h||"",ce=(ae>1&&d||le).replace(/{count}/,ae+""),ue=R[se][0];X=ue&&g[ue.id]||[],R[se]=[{id:"more_"+ ++b,more:ce,label:ce}];for(var he=0,de=X;he<de.length;he++){var pe=f[de[he]];if(pe&&!pe.data[se][0].more){var fe=pe.data[se].length,me=(fe>1&&d||le).replace(/{count}/,fe+"");pe.data[se]=[{id:"more_"+ ++b,more:me,label:me}]}}}}f[x]={data:R,events:k},_=Ze(pt(_,1))}return f}function fr(e,t){return e&&e.slice(0).sort(t.eventOrder||function(e,n){var r=at(e.start||e.date,t),i=at(n.start||e.date,t),o=e.title||e.text,s=n.title||n.text,a=e.order!==Q&&n.order!==Q&&e.order!==n.order,l=a?e.order:r?+r*(e.allDay?1:10):0,c=a?n.order:i?+i*(n.allDay?1:10):0;return l===c?o>s?1:-1:l-c})}function mr(e,t,n){return!(!1===e||!1===n||!t)}var gr=(0,r.createContext)({}),yr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.componentWillUnmount=function(){this._changes&&this._changes.unsubscribe(this._handler)},t.prototype.render=function(){var e=this,t=this.props,n=t.host,i=t.component,o=t.view,s=f(t,["host","component","view"]),a=o||n&&n._calendarView;return a&&!this._changes&&(this._changes=a.s.instanceService.onComponentChange,this._handler=this._changes.subscribe(function(){e.forceUpdate()})),(0,r.createElement)(gr.Consumer,null,function(e){var t=e.instance||o||n&&n._calendarView;return t&&(0,r.createElement)(i,p({inst:t},s))})},t}(r.PureComponent),vr=function(e){var t=e.inst,n=e.className;return(0,r.createElement)(jn,{ariaLabel:t.s.prevPageText,className:"mbsc-calendar-button "+(n||""),disabled:t._isPrevDisabled(),iconSvg:t._prevIcon,onClick:t.prevPage,theme:t.s.theme,themeVariant:t.s.themeVariant,type:"button",variant:"flat"})},_r=function(e){var t=e.inst,n=e.className;return(0,r.createElement)(jn,{ariaLabel:t.s.nextPageText,disabled:t._isNextDisabled(),className:"mbsc-calendar-button "+(n||""),iconSvg:t._nextIcon,onClick:t.nextPage,theme:t.s.theme,themeVariant:t.s.themeVariant,type:"button",variant:"flat"})},br=function(e){var t=e.inst,n=e.className;return(0,r.createElement)(jn,{className:"mbsc-calendar-button mbsc-calendar-button-today "+(n||""),onClick:t._onTodayClick,theme:t.s.theme,themeVariant:t.s.themeVariant,type:"button",variant:"flat"},t.s.todayText)},wr=function(e){var t=e.inst,n=e.className,i=t.s,o=t._theme,s=t._view;return(0,r.createElement)("div",{"aria-live":"polite",className:(n||"")+o},t._title.map(function(e,n){return(1===t._pageNr||0===n||t._hasPicker||s===or)&&(0,r.createElement)(jn,{className:"mbsc-calendar-button"+(t._pageNr>1?" mbsc-flex-1-1":""),"data-index":n,onClick:t._onPickerBtnClick,key:n,theme:i.theme,themeVariant:i.themeVariant,type:"button",variant:"flat"},(t._hasPicker||s===or)&&(e.title?(0,r.createElement)("span",{className:"mbsc-calendar-title"+o},e.title):(0,r.createElement)(r.Fragment,null,t._yearFirst&&(0,r.createElement)("span",{className:"mbsc-calendar-title mbsc-calendar-year"+o},e.yearTitle),(0,r.createElement)("span",{className:"mbsc-calendar-title mbsc-calendar-month"+o},e.monthTitle),!t._yearFirst&&(0,r.createElement)("span",{className:"mbsc-calendar-title mbsc-calendar-year"+o},e.yearTitle))),!t._hasPicker&&s!==or&&(0,r.createElement)("span",{className:"mbsc-calendar-title"+o},t._viewTitle),i.downIcon&&1===t._pageNr?(0,r.createElement)(an,{svg:s===or?i.downIcon:i.upIcon,theme:i.theme}):null)}))},xr=function(e){var t=e.calendar,n=e.view,i=f(e,["calendar","view"]);return(0,r.createElement)(yr,p({component:vr,host:t,view:n},i))};xr._name="CalendarPrev";var Sr=function(e){var t=e.calendar,n=e.view,i=f(e,["calendar","view"]);return(0,r.createElement)(yr,p({component:_r,host:t,view:n},i))};Sr._name="CalendarNext";var Er=function(e){var t=e.calendar,n=e.view,i=f(e,["calendar","view"]);return(0,r.createElement)(yr,p({component:br,host:t,view:n},i))};Er._name="CalendarToday";var Tr=function(e){var t=e.calendar,n=e.view,i=f(e,["calendar","view"]);return(0,r.createElement)(yr,p({component:wr,host:t,view:n},i))};Tr._name="CalendarNav";var Mr,Ar,kr=0;function Cr(e,t,n){var r,i,o,s,a,l,c,u=0;function h(){i.style.width="100000px",i.style.height="100000px",r.scrollLeft=1e5,r.scrollTop=1e5,l.scrollLeft=1e5,l.scrollTop=1e5}function d(){var e=+new Date;s=0,c||(e-u>200&&!r.scrollTop&&!r.scrollLeft&&(u=e,h()),s||(s=Et(d)))}function p(){a||(a=Et(f))}function f(){a=0,h(),t()}return gt&&gt.ResizeObserver?(Mr||(Mr=new gt.ResizeObserver(function(e){a||(a=Et(function(){for(var t=0,n=e;t<n.length;t++){var r=n[t];r.target.__mbscResize&&r.target.__mbscResize()}a=0}))})),kr++,e.__mbscResize=function(){n?n.run(t):t()},Mr.observe(e)):o=mt&&mt.createElement("div"),o&&(o.innerHTML='<div class="mbsc-resize"><div class="mbsc-resize-i mbsc-resize-x"></div></div><div class="mbsc-resize"><div class="mbsc-resize-i mbsc-resize-y"></div></div>',o.dir="ltr",l=o.childNodes[1],r=o.childNodes[0],i=r.childNodes[0],e.appendChild(o),Rt(r,"scroll",p),Rt(l,"scroll",p),n?n.runOutsideAngular(function(){Et(d)}):Et(d)),{detach:function(){Mr?(kr--,delete e.__mbscResize,Mr.unobserve(e),kr||(Mr=Q)):(o&&(Dt(r,"scroll",p),Dt(l,"scroll",p),e.removeChild(o),Tt(a),o=Q),c=!0)}}}var Ir="input,select,textarea,button",Pr=Ir+',[tabindex="0"]',Or={enter:zn,esc:27,space:Un},Rr=_&&/(iphone|ipod)/i.test(w)&&M>=7&&M<15;function Dr(e,t){var n=e.s,r=[],i={cancel:{cssClass:"mbsc-popup-button-close",name:"cancel",text:n.cancelText},close:{cssClass:"mbsc-popup-button-close",name:"close",text:n.closeText},ok:{cssClass:"mbsc-popup-button-primary",keyCode:zn,name:"ok",text:n.okText},set:{cssClass:"mbsc-popup-button-primary",keyCode:zn,name:"set",text:n.setText}};return t&&t.length?(t.forEach(function(t){var n=le(t)?i[t]||{text:t}:t;n.handler&&!le(n.handler)||(le(n.handler)&&(n.name=n.handler),n.handler=function(t){e._onButtonClick({domEvent:t,button:n})}),r.push(n)}),r):Q}function Lr(e,t){void 0===t&&(t=0);var n=e._prevModal;return n&&n!==e&&t<10?n.isVisible()?n:Lr(n,t+1):Q}var Nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastFocus=+new Date,t._setActive=function(e){t._active=e},t._setContent=function(e){t._content=e},t._setLimitator=function(e){t._limitator=e},t._setPopup=function(e){t._popup=e},t._setWrapper=function(e){t._wrapper=e},t._onOverlayClick=function(){t._isOpen&&t.s.closeOnOverlayClick&&!t._preventClose&&t._close("overlay")},t._onDocClick=function(e){t.s.showOverlay||e.target===t.s.focusElm||Ar!==t||t._onOverlayClick(),t._preventClose=!1},t._onMouseDown=function(e){t.s.showOverlay||(t._target=e.target)},t._onMouseUp=function(e){t._target&&t._popup&&t._popup.contains(t._target)&&!t._popup.contains(e.target)&&(t._preventClose=!0),t._target=!1},t._onPopupClick=function(){t.s.showOverlay||(t._preventClose=!0)},t._onAnimationEnd=function(e){e.target===t._popup&&(t._isClosing&&(t._onClosed(),t._isClosing=!1,t.state.isReady?t.setState({isReady:!1}):t.forceUpdate()),t._isOpening&&(t._onOpened(),t._isOpening=!1,t.forceUpdate()))},t._onButtonClick=function(e){var n=e.domEvent,r=e.button;t._hook("onButtonClick",{domEvent:n,button:r}),/cancel|close|ok|set/.test(r.name)&&t._close(r.name)},t._onFocus=function(e){var n=+new Date;Ar===t&&e.target.nodeType&&t._ctx.contains(e.target)&&t._popup&&!t._popup.contains(e.target)&&n-t._lastFocus>100&&e.target!==t.s.focusElm&&(t._lastFocus=n,t._active.focus())},t._onKeyDown=function(e){var n=t.s,r=e.keyCode,i=n.focusElm&&!n.focusOnOpen?n.focusElm:Q;if((r===Un&&!$t(e.target,Ir)||t._lock&&(38===r||40===r))&&e.preventDefault(),n.focusTrap&&9===r){var o=t._popup.querySelectorAll(Pr),s=[],a=-1,l=0,c=-1,u=Q;qt(o,function(e){e.disabled||!e.offsetHeight&&!e.offsetWidth||(s.push(e),a++,e===t._doc.activeElement&&(c=a))}),e.shiftKey&&(l=a,a=0),c===a?u=i||s[l]:e.target===i&&(u=s[l]),u&&(u.focus(),e.preventDefault())}},t._onContentScroll=function(e){!t._lock||e.type===An&&"stylus"===e.touches[0].touchType||e.preventDefault()},t._onScroll=function(e){var n=t.s;n.closeOnScroll?t._close("scroll"):(t._hasContext||"anchored"===n.display)&&t.position()},t._onWndKeyDown=function(e){var n=t.s,r=e.keyCode;if(Ar===t&&r!==Q){if(t._hook("onKeyDown",{keyCode:r}),n.closeOnEsc&&27===r&&t._close("esc"),r===zn&&$t(e.target,'textarea,button,input[type="button"],input[type="submit"]')&&!e.shiftKey)return;if(t._buttons)for(var i=0,o=t._buttons;i<o.length;i++)for(var s=o[i],a=0,l=oe(s.keyCode)?s.keyCode:[s.keyCode];a<l.length;a++){var c=l[a];if(!s.disabled&&c!==Q&&(c===r||Or[c]===r))return void s.handler(e)}}},t._onResize=function(){var e=t._wrapper,n=t._hasContext;if(e){t._vpWidth=Math.min(e.clientWidth,n?1/0:t._win.innerWidth),t._vpHeight=Math.min(e.clientHeight,n?1/0:t._win.innerHeight),t._maxWidth=t._limitator.offsetWidth,t._maxHeight=t.s.maxHeight!==Q||t._vpWidth<768||t._vpHeight<650?t._limitator.offsetHeight:600,t._round=!1===t.s.touchUi||t._popup.offsetWidth<t._vpWidth&&t._vpWidth>t._maxWidth;var r={isLarge:t._round,maxPopupHeight:t._maxHeight,maxPopupWidth:t._maxWidth,target:e,windowHeight:t._vpHeight,windowWidth:t._vpWidth};!1===t._hook("onResize",r)||r.cancel||t.position()}},t}return d(t,e),t.prototype.open=function(){this._isOpen||this.setState({isOpen:!0})},t.prototype.close=function(){this._close()},t.prototype.isVisible=function(){return!!this._isOpen},t.prototype.position=function(){if(this._isOpen){var e=this.s,t=this.state,n=this._wrapper,r=this._popup,i=this._hasContext,o=this._round,s=e.anchor,a=e.anchorAlign,l=e.rtl,c=zt(this._scrollCont),u=Ft(this._scrollCont),h=this._vpWidth,d=this._vpHeight,p=this._maxWidth,f=this._maxHeight,m=Math.min(r.offsetWidth,p),g=Math.min(r.offsetHeight,f),y=e.showArrow;this._lock=e.scrollLock&&this._content.scrollHeight<=this._content.clientHeight,i&&(n.style.top=c+"px",n.style.left=u+"px");var v=!1===this._hook("onPosition",{isLarge:o,maxPopupHeight:f,maxPopupWidth:p,target:this._wrapper,windowHeight:d,windowWidth:h});if("anchored"!==e.display||v)this.setState({height:d,isLarge:o,isReady:!0,showArrow:y,width:h});else{var _=0,b=0,w=re(t.modalLeft||0,8,h-m-8),x=t.modalTop||8,S="bottom",E={},T=y?16:4,M=(n.offsetWidth-h)/2,A=(n.offsetHeight-d)/2;if(i){var k=this._ctx.getBoundingClientRect();b=k.top,_=k.left}if(s&&function(e,t){for(var n=t;n&&n.parentNode;){if(n.parentNode===e)return!0;(n=n.parentNode)instanceof DocumentFragment&&(n=n.host)}return!1}(this._ctx,s)){var C=s.getBoundingClientRect(),I=C.top-b,P=C.left-_,O=s.offsetWidth,R=s.offsetHeight;if(w=re(w="start"===a&&!l||"end"===a&&l?P:"end"===a&&!l||"start"===a&&l?P+O-m:P-(m-O)/2,8,h-m-8),x=I+R+T,E={left:re(P+O/2-w-M,30,m-30)+"px"},x+g+T>d)if(I-g-T>0)S="top",x=I-g-T;else if(!e.disableLeftRight){var D=P-m-8>0;(D||P+O+m+8<=h)&&((x=re(I-(g-R)/2,8,d-g-8))+g+8>d&&(x=Math.max(d-g-8,0)),E={top:re(I+R/2-x-A,30,g-30)+"px"},S=D?"left":"right",w=D?P-m:P+O)}}else y=!1;"top"!==S&&"bottom"!==S||x+g+T>d&&(x=Math.max(d-g-T,0),y=!1),this.setState({arrowPos:E,bubblePos:S,height:d,isLarge:o,isReady:!0,modalLeft:w,modalTop:x,showArrow:y,width:h})}}},t.prototype._render=function(e,t){"bubble"===e.display&&(e.display="anchored");var n=e.animation,r=e.display,i=this._prevS,o="anchored"===r,s="inline"!==r,a=e.fullScreen&&s,l=!!s&&(e.isOpen===Q?t.isOpen:e.isOpen);if(l&&(e.windowWidth!==i.windowWidth||e.display!==i.display||e.showArrow!==i.showArrow||e.touchUi!==i.touchUi||e.anchor!==i.anchor&&"anchored"===e.display)&&(this._shouldPosition=!0),this._limits={maxHeight:fe(e.maxHeight),maxWidth:fe(e.maxWidth)},this._style={height:a?"100%":fe(e.height),left:o&&t.modalLeft?t.modalLeft+"px":"",maxHeight:fe(this._maxHeight||e.maxHeight),maxWidth:fe(this._maxWidth||e.maxWidth),top:o&&t.modalTop?t.modalTop+"px":"",width:a?"100%":fe(e.width)},this._hasContext="body"!==e.context&&e.context!==Q,this._needsLock=Rr&&!this._hasContext&&"anchored"!==r&&e.scrollLock,this._isModal=s,this._flexButtons="center"===r||!this._touchUi&&!a&&("top"===r||"bottom"===r),n!==Q&&!0!==n)this._animation=le(n)?n:"";else switch(r){case"bottom":this._animation="slide-up";break;case"top":this._animation="slide-down";break;default:this._animation="pop"}e.buttons?e.buttons===i.buttons&&e.locale===i.locale||(this._buttons=Dr(this,e.buttons)):this._buttons=Q,e.headerText!==i.headerText&&(this._headerText=e.headerText?this._safeHtml(e.headerText):Q),e.context!==i.context&&(this._contextChanged=!0),l&&!this._isOpen&&this._onOpen(),!l&&this._isOpen&&this._onClose(),this._isOpen=l,this._isVisible=l||this._isClosing},t.prototype._updated=function(){var e=this,t=this.s,n=this._wrapper;if(!mt||!this._contextChanged&&this._ctx||(this._ctx=Nt(t.context,mt),this._contextChanged=!1,!this._justOpened)){if(n){if(this._justOpened){var r=this._ctx,i=this._hasContext,o=this._doc=Lt(n),s=this._win=Ut(n),a=o.activeElement;if(!this._hasWidth&&t.responsive){var l=Math.min(n.clientWidth,i?1/0:s.innerWidth),c=Math.min(n.clientHeight,i?1/0:s.innerHeight);if(this._hasWidth=!0,l!==this.state.width||c!==this.state.height)return void be(this,function(){e.setState({height:c,width:l})})}if(this._scrollCont=i?r:s,this._observer=Cr(n,this._onResize,this._zone),this._prevFocus=t.focusElm||a,r.__mbscModals=(r.__mbscModals||0)+1,this._needsLock){if(!r.__mbscIOSLock){var u=zt(this._scrollCont),h=Ft(this._scrollCont);r.style.left=-h+"px",r.style.top=-u+"px",r.__mbscScrollLeft=h,r.__mbscScrollTop=u,r.classList.add("mbsc-popup-open-ios"),r.parentElement.classList.add("mbsc-popup-open-ios")}r.__mbscIOSLock=(r.__mbscIOSLock||0)+1}i&&r.classList.add("mbsc-popup-ctx"),t.focusTrap&&Rt(s,mn,this._onFocus),t.focusElm&&!t.focusOnOpen&&Rt(t.focusElm,yn,this._onKeyDown),Rt(this._scrollCont,An,this._onContentScroll,{passive:!1}),Rt(this._scrollCont,In,this._onContentScroll,{passive:!1}),Rt(this._scrollCont,Sn,this._onContentScroll,{passive:!1}),setTimeout(function(){t.focusOnOpen&&a&&a.blur(),Mt&&e._animation||e._onOpened(),Rt(o,vn,e._onMouseDown),Rt(o,bn,e._onMouseUp),Rt(o,hn,e._onDocClick)}),this._hook("onOpen",{target:this._wrapper})}this._shouldPosition&&be(this,function(){e._onResize()}),this._justOpened=!1,this._justClosed=!1,this._shouldPosition=!1}}else be(this,function(){e.forceUpdate()})},t.prototype._destroy=function(){this._isOpen&&(this._onClosed(),this._unlisten(),Ar===this&&(Ar=Lr(this)))},t.prototype._onOpen=function(){var e=this;Mt&&this._animation&&(this._isOpening=!0,this._isClosing=!1),this._justOpened=!0,this._preventClose=!1,this.s.setActive&&Ar!==this&&setTimeout(function(){e._prevModal=Ar,Ar=e})},t.prototype._onClose=function(){var e=this;Mt&&this._animation?(this._isClosing=!0,this._isOpening=!1):setTimeout(function(){e._onClosed(),e.setState({isReady:!1})}),this._hasWidth=!1,this._unlisten()},t.prototype._onOpened=function(){var e=this.s;if(e.focusOnOpen){var t=e.activeElm,n=t?le(t)?this._popup.querySelector(t)||this._active:t:this._active;n&&n.focus&&n.focus()}Rt(this._win,yn,this._onWndKeyDown),Rt(this._scrollCont,Tn,this._onScroll)},t.prototype._onClosed=function(){var e=this,t=this._ctx,n=this._prevFocus,r=this.s.focusOnClose&&n&&n.focus&&n!==this._doc.activeElement;t.__mbscModals&&t.__mbscModals--,this._justClosed=!0,this._needsLock&&(t.__mbscIOSLock&&t.__mbscIOSLock--,t.__mbscIOSLock||(t.classList.remove("mbsc-popup-open-ios"),t.parentElement.classList.remove("mbsc-popup-open-ios"),t.style.left="",t.style.top="",function(e,t){e.scrollTo?e.scrollTo(t,e.scrollY):e.scrollLeft=t}(this._scrollCont,t.__mbscScrollLeft||0),function(e,t){e.scrollTo?e.scrollTo(e.scrollX,t):e.scrollTop=t}(this._scrollCont,t.__mbscScrollTop||0))),this._hasContext&&!t.__mbscModals&&t.classList.remove("mbsc-popup-ctx"),this._hook("onClosed",{focus:r}),r&&n.focus(),setTimeout(function(){Ar===e&&(Ar=Lr(e))})},t.prototype._unlisten=function(){Dt(this._win,yn,this._onWndKeyDown),Dt(this._scrollCont,Tn,this._onScroll),Dt(this._scrollCont,An,this._onContentScroll,{passive:!1}),Dt(this._scrollCont,In,this._onContentScroll,{passive:!1}),Dt(this._scrollCont,Sn,this._onContentScroll,{passive:!1}),Dt(this._doc,vn,this._onMouseDown),Dt(this._doc,bn,this._onMouseUp),Dt(this._doc,hn,this._onDocClick),this.s.focusTrap&&Dt(this._win,mn,this._onFocus),this.s.focusElm&&Dt(this.s.focusElm,yn,this._onKeyDown),this._observer&&(this._observer.detach(),this._observer=null)},t.prototype._close=function(e){this._isOpen&&(this.s.isOpen===Q&&this.setState({isOpen:!1}),this._hook("onClose",{source:e}))},t.defaults={buttonVariant:"flat",cancelText:"Cancel",closeOnEsc:!0,closeOnOverlayClick:!0,closeText:"Close",contentPadding:!0,display:"center",focusOnClose:!0,focusOnOpen:!0,focusTrap:!0,maxWidth:600,okText:"Ok",scrollLock:!0,setActive:!0,setText:"Set",showArrow:!0,showOverlay:!0},t}(sn);function Fr(e,t,n){void 0===n&&(n=0),n>10?(delete e.__mbscTimer,t(e,e)):(clearTimeout(e.__mbscTimer),e.__mbscTimer=setTimeout(function(){e.getInputElement?e.getInputElement().then(function(r){r?(delete e.__mbscTimer,t(r,e)):Fr(e,t,n+1)}):Fr(e,t,n+1)},10))}function zr(e,t){if(e)if(function(e){return e.getInputElement||e.tagName&&"ion-input"===e.tagName.toLowerCase()}(e))Fr(e,t);else if(e.vInput)t(e.vInput.nativeElement);else if(e._el)t(e._el);else if(e.instance&&e.instance._el)t(e.instance._el);else if(1===e.nodeType)t(e);else if(le(e)){var n=mt.querySelector(e);n&&t(n)}}function Ur(e,t,n,r,i){if(!e||1!==e.nodeType)return me;var o,s=function(){(n.s.showOnClick||n.s.showOnFocus)&&m&&!n._allowTyping&&(g.readOnly=!0)},a=function(t){var r=n.s;s(),i&&i(t),!r.showOnClick||r.disabled||n._popup._isVisible&&e===n._popup._prevFocus||setTimeout(function(){n._focusElm=e,n._anchor=r.anchor||e,n.open()})},l=function(e){n.s.showOnClick&&(n.s.showOnFocus&&(n._preventShow=!0),n._allowTyping||e.preventDefault())},c=function(e){n.s.showOnClick&&(n._isOpen?e.keyCode===zn&&n._allowTyping&&e.stopPropagation():(e.keyCode===Un&&e.preventDefault(),e.keyCode!==zn&&e.keyCode!==Un||a(e)))},u=function(e){s(),n.s.showOnFocus&&(n._preventShow?n._preventShow=!1:a(e))},h=function(){m&&(g.readOnly=o)},d=function(e){r&&r(e)},p=function(){f.document.activeElement===e&&(s(),n._preventShow=!0)},f=Ut(e),m=$t(e,"input,select"),g=e;return m&&(g.autocomplete="off",o=g.readOnly),Rt(t||e,hn,a),Rt(e,vn,l),Rt(e,yn,c),Rt(e,fn,u),Rt(e,cn,h),Rt(e,un,d),Rt(f,fn,p),function(){m&&(g.readOnly=o),Dt(e,hn,a),Dt(e,vn,l),Dt(e,yn,c),Dt(e,fn,u),Dt(e,cn,h),Dt(e,un,d),Dt(f,fn,p)}}var jr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._nullSupport=!0,t._onInputChange=function(e,n){var r=e.detail||(n!==Q?n:e.target.value);if(r!==t._tempValueText&&!t._preventChange){t._readValue(r,!0),t._valueTextChange=r!==t._tempValueText;var i=ce(r)?null:t._get(t._tempValueRep);t.value=i,t._valueChange(i)}t._preventChange=!1},t._onResize=function(e){t._hook("onResize",e)},t._onWrapperResize=function(){t._wrapper&&t._onResize({windowWidth:t._wrapper.offsetWidth})},t._onPopupClose=function(e){/cancel|esc|overlay|scroll/.test(e.source)&&t._hook("onCancel",{value:t.value,valueText:t._valueText}),t.close()},t._onPopupClosed=function(e){e.focus&&(t._preventShow=!0),t._hook("onClosed",e),t._onClosed()},t._onPopupKey=function(e){13===e.keyCode&&t._onEnterKey(e)},t._onPopupOpen=function(e){e.value=t.value,e.valueText=t._valueText,t._hook("onOpen",e)},t._onButtonClick=function(e){var n=e.domEvent,r=e.button;"set"===r.name&&t.set(),t._popup&&t._popup._onButtonClick({domEvent:n,button:r})},t._setInput=function(e){t._el=e&&e.nativeElement?e.nativeElement:e},t._setPopup=function(e){t._popup=e},t._setWrapper=function(e){t._wrapper=e},t._shouldValidate=function(e,t){return!1},t._valueEquals=function(e,t){return e===t},t._copy=function(e){return e},t._format=function(e){return e},t._get=function(e){return e},t._parse=function(e,t){return e},t}return d(t,e),t.prototype.open=function(){this._inst?this._inst.open():this.s.isOpen===Q&&this.setState({isOpen:!0})},t.prototype.close=function(){if("inline"!==this.s.display)if(this._inst)this._inst.close();else{var e={value:this.value,valueText:this._valueText};this.s.isOpen===Q&&this.setState({isOpen:!1}),this._hook("onClose",e)}},t.prototype.set=function(){this._valueRep=this._copy(this._tempValueRep),this._valueText=this._tempValueText,this._value=this.value=this._get(this._valueRep),this._valueChange(this.value)},t.prototype.position=function(){this._inst?this._inst.position():this._popup&&this._popup.position()},t.prototype.isVisible=function(){return this._inst?this._inst.isVisible():!!this._popup&&this._popup.isVisible()},t.prototype.getVal=function(){return this._nullSupport&&ce(this._value)?this.s.selectMultiple?[]:null:this._get(this._valueRep)},t.prototype.setVal=function(e){this.value=e,this.setState({value:e})},t.prototype.getTempVal=function(){return this._get(this._tempValueRep)},t.prototype.setTempVal=function(e){this._tempValueSet=!0,this._tempValueRep=this._parse(e),this._setOrUpdate(!0)},t.prototype._change=function(e){},t.prototype._render=function(e,t){var n=this,r=this.props||{},i=this._respProps||{},o=this._opt||{},s=this._prevS;this._touchUi||(e.display=i.display||r.display||o.display||A.display||"anchored",e.showArrow=i.showArrow||r.showArrow||!1),"bubble"===e.display&&(e.display="anchored"),this._scrollLock=e.scrollLock;var a=e.isOpen!==Q?e.isOpen:t.isOpen,l=e.modelValue!==Q?e.modelValue:e.value,c=l!==Q?l:t.value===Q?e.defaultValue:t.value;if(this._showInput=e.showInput!==Q?e.showInput:"inline"!==e.display&&e.element===Q,(!this._buttons||e.buttons!==s.buttons||e.display!==s.display||e.setText!==s.setText||e.cancelText!==s.cancelText||e.closeText!==s.closeText||e.touchUi!==s.touchUi)&&(this._buttons=Dr(this,e.buttons||("inline"===e.display||"anchored"===e.display&&!this._touchUi?[]:["cancel","set"])),this._live=!0,this._buttons&&this._buttons.length))for(var u=0,h=this._buttons;u<h.length;u++){var d=h[u];"ok"!==d.name&&"set"!==d.name||(this._live=!1)}this._onRender(e);var p=!this._valueEquals(c,this._value)||this._tempValueRep===Q||this._shouldValidate(e,s);if(p||e.defaultSelection!==s.defaultSelection||e.invalid!==s.invalid||e.valid!==s.valid){p?this._readValue(c):this._validateTemp(c);var f=this._get(this._tempValueRep),m=!(this._valueEquals(c,f)||this._nullSupport&&ce(c));this._setHeader(),clearTimeout(this._handler),this._handler=setTimeout(function(){n.value=c,m&&n._valueChange(f),n._valueEquals(n._tempValue,f)||n._inst!==Q||n._hook("onTempChange",{value:f})})}if(e.headerText!==s.headerText&&this._setHeader(),a&&!this._isOpen){if(!this._tempValueSet||this._live){var g=this._get(this._tempValueRep),y=this._get(this._valueRep);this._tempValueRep=this._copy(this._valueRep),this._tempValueText=this._format(this._tempValueRep),this._tempValue=g,this._setHeader(),this._valueEquals(g,y)||setTimeout(function(){n._hook("onTempChange",{value:y})})}this._onOpen()}this._allowTyping=e.inputTyping&&!v&&!this._touchUi,this._anchorAlign=e.anchorAlign||(this._touchUi?"center":"start"),this._cssClass="mbsc-picker "+(e.cssClass||""),this._isOpen=a,this._maxWidth=e.maxWidth,this._valueTextChange=this._valueTextChange||this._oldValueText!==this._valueText,this._oldValueText=this._valueText,this._value=c,this._shouldInitInput=this._shouldInitInput||s.display===Q||"inline"===e.display&&"inline"!==s.display||"inline"!==e.display&&"inline"===s.display||e.element!==s.element},t.prototype._updated=function(){var e=this,t=this.s,n=this._input;this._shouldInitInput&&!this._inst&&(this._unlisten(),this._wrapper&&"inline"===t.display&&(this._observer=Cr(this._wrapper,this._onWrapperResize,this._zone)),zr(t.element||this._el,function(n,r){e._el=n,"inline"!==t.display&&(e._resetEl=Ur(n,r,e,e._onInputChange)),$t(n,"input,select")&&(e._input=n,e._write(n))})),this._valueTextChange&&n&&this._write(n),setTimeout(function(){t.responsive&&"inline"!==t.display&&gt&&e.state.width===Q&&e._onResize({windowWidth:gt.innerWidth})}),this._shouldInitInput=!1,this._valueTextChange=!1,this._anchor=t.anchor||this._focusElm||t.element||this._el},t.prototype._writeValue=function(e,t,n){var r=e.value;return e.value=t,r!==t},t.prototype._destroy=function(){this._unlisten(),this._shouldInitInput=!0},t.prototype._setHeader=function(){var e=this.s.headerText;this._headerText=e?e.replace(/\{value\}/i,this._tempValueText||"&nbsp;"):Q},t.prototype._setOrUpdate=function(e){var t=this._get(this._tempValueRep);this._tempValue=t,this._tempValueText=this._format(this._tempValueRep),this._setHeader(),e||this._hook("onTempChange",{value:t}),this._live?this.set():this.forceUpdate()},t.prototype._validate=function(){},t.prototype._onRender=function(e){},t.prototype._onClosed=function(){},t.prototype._onOpen=function(){},t.prototype._onEnterKey=function(e){this.set(),this.close()},t.prototype._valueChange=function(e){this.s.value===Q&&this.setState({value:e}),this._change(e),this._hook("onChange",{value:e,valueText:this._tempValueText})},t.prototype._readValue=function(e,t){this._tempValueRep=this._parse(e,t),this._validateTemp(e)},t.prototype._validateTemp=function(e){this._validate(),this._tempValueText=this._format(this._tempValueRep),this._valueRep=this._copy(this._tempValueRep),this._valueText=ce(e)?"":this._tempValueText},t.prototype._unlisten=function(){this._resetEl&&(this._resetEl(),this._resetEl=Q),this._observer&&(this._observer.detach(),this._observer=Q)},t.prototype._write=function(e){var t=this,n=this._value;this._writeValue(e,this._valueText||"",n)&&setTimeout(function(){t._preventChange=!0,Gt(e,gn),Gt(e,un)});var r=e.__mbscFormInst;r&&r.setOptions({pickerMap:this._valueMap,pickerValue:n})},t.defaults={cancelText:"Cancel",closeText:"Close",focusOnClose:"android"!==m,okText:"Ok",setText:"Set",showOnFocus:v},t}(sn);function Br(e,t,n,r,i,o){var s=Ke(t);if(i&&+t<i||o&&+t>o)return!0;if(r&&r[s])return!1;var a=n&&n[s];if(a)for(var l=0,c=a;l<c.length;l++){var u=c[l],h=u.start,d=u.end,p=u.allDay;if(!h||!d||p)return u;var f=We(e,p,h,d),m=Ge(e,t),g=qe(e,f);if(!et(h,d)&&(+h==+m||+f==+g||!et(t,h)&&!et(t,d)&&t>h&&t<d))return u}return!1}function Vr(e,t,n,r,i,o,s){var a,l,c=!0,u=!0,h=0,d=0;+e<n&&(e=st(t,n)),+e>r&&(e=st(t,r));var p=t.getYear(e),f=t.getMonth(e),m=t.getDate(p,f-1,1),g=t.getDate(p,f+2,1),y=+m>n?+m:n,v=+g<r?+g:r;if(i||(o=er(t.valid,m,g,t,!0,!0),i=er(t.invalid,m,g,t,!0,!0)),!Br(t,e,i,o,n,r))return e;for(a=e,l=e;c&&+a<v&&h<100;)c=Br(t,a=pt(a,1),i,o,n,r),h++;for(;u&&+l>y&&d<100;)u=Br(t,l=pt(l,-1),i,o,n,r),d++;return c&&u?e:1!==s||c?-1!==s||u?tt(e,a,t)&&!c?a:tt(e,l,t)&&!u?l:u||d>=h&&!c?a:l:l:a}var Hr={},$r=" - ",Yr=["calendar"],Gr=[{recurring:{repeat:"daily"}}];function qr(e){return"start"===e?"end":"start"}function Wr(e,t){var n=Qe(new Date(e),t,t.firstSelectDay!==Q?t.firstSelectDay:t.firstDay),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+t.selectSize-1);return{start:n,end:r}}var Kr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._iso={},t._tempDate=null,t._onActiveChange=function(e){t._active=e.date,t.forceUpdate()},t._onResize=function(e){var n=e.windowWidth;e.cancel=t.state.width!==n,t.setState({isLarge:e.isLarge,maxPopupWidth:e.maxPopupWidth,width:n,widthType:n>600?"md":"sm"})},t._onDayHoverIn=function(e){var n=e.date,r=e.hidden;t.setState({hoverDate:r?Q:+n})},t._onDayHoverOut=function(e){var n=e.date;t.state.hoverDate===+n&&t.setState({hoverDate:Q})},t._onCellClick=function(e){t._lastSelected=it(t.s,e.date),e.active=t._activeSelect,t._hook("onCellClick",e)},t._onCalendarChange=function(e){t._tempValueSet=!1;var n,r,i=t.s,o=t._copy(t._tempValueRep),s=(r=function(e){return it(i,e)},oe(n=e.value)?n.map(r):r(n)),a="preset-range"===i.select,l="range"===i.select,c=l&&t._newSelection,u=(l||a)&&i.exclusiveEndDates&&!t._hasTime;if(u&&o.end&&(o.end=+Ge(i,st(i,o.end-1))),t._hasTime&&t._selectedTime&&!l)if(t.s.selectMultiple){var h=s[s.length-1];h&&h.setHours(t._selectedTime.getHours(),t._selectedTime.getMinutes())}else s.setHours(t._selectedTime.getHours(),t._selectedTime.getMinutes());if(l||a){var d=t._getDate(o),p=d.filter(function(e){return null!==e}),f=p.map(function(e){return+e}),m=p.map(function(e){return+Ze(e)}),g=s.filter(function(e){return m.indexOf(+e)<0})[0];if(a){if(g){var y=Wr(+g,i),v=y.start,_=y.end;o.start=+v,o.end=+_}}else{var b=!t._hasTime,w=t._renderControls,x=t._activeSelect,S=qr(x);if(g){switch(t._hasTime&&t._selectedTime&&g.setHours(t._selectedTime.getHours(),t._selectedTime.getMinutes(),t._selectedTime.getSeconds(),t._selectedTime.getMilliseconds()),f.length){case 0:(o={})[x]=+g;break;case 1:if(w){o[x]=+g;break}f[0]>+g||"start"===t._activeSelect?t._hasTime?o[x]=+g:(o={start:+g},b=!1):o.end=+g;break;case 2:if(w){o[x]=+g;break}f[0]>+g||"start"===t._activeSelect?t._hasTime?o[x]=+g:(o={start:+g},"end"===t._activeSelect&&(b=!1)):"end"===t._activeSelect&&(o.end=+g)}w&&o.start&&o.end&&o.start>o.end&&(o={start:+g},t._setActiveSelect("end"))}else{var E=void 0;E=1===f.length?st(i,f[0]):t._lastSelected,t._hasTime&&t._selectedTime?E.setHours(t._selectedTime.getHours(),t._selectedTime.getMinutes(),t._selectedTime.getSeconds(),t._selectedTime.getMilliseconds()):!i.exclusiveEndDates&&!t._hasTime&&"end"===t._activeSelect&&d[0]&&et(E,d[0])&&E.setHours(23,59,59,999),w||t._hasTime?o[x]=+E:"start"===t._activeSelect?o={start:+E}:o.end=+E}if(o.start&&o.end){if(o.start>o.end){var T=st(i,o.start),M=st(i,o.end);et(T,M)?(M.setHours(T.getHours(),T.getMinutes(),T.getSeconds(),T.getMilliseconds()),o.end=+M):o.end=Q}if(i.minRange&&o.end){var A=t._hasTime?o.start+i.minRange:+pt(st(i,o.start),i.minRange-1);o.end<A&&(!t._hasTime||"start"===x)&&(o.end=Q)}if(i.maxRange&&o.end&&(A=t._hasTime?o.start+i.maxRange:+pt(st(i,o.start),i.maxRange)-1,o.end>A&&(!t._hasTime||"start"===x)&&(o.end=Q)),o.end&&"start"===x&&!i.inRangeInvalid){var k=i.valid?pt(Jn(i.valid,st(i,o.start),i),1):Zn(i.invalid||[],st(i,o.start),i);null!==k&&+k<o.end&&(o.end=Q)}}b&&(t._newSelection||!t._renderControls||t._newSelection===Q&&"inline"===t.s.display)&&(t._setActiveSelect(S),t._newSelection=!1)}}else if(o={date:{}},t.s.selectMultiple)for(var C=0,I=s;C<I.length;C++){var P=I[C];o.date[+P]=P}else{if(t._hasTime){var O=t._selectedTime||new Date;s.setHours(O.getHours(),O.getMinutes(),O.getSeconds(),O.getMilliseconds())}o.date[+s]=s}t._tempValueRep=o,u&&o.end&&(o.end=+Ge(i,pt(st(i,o.end),1))),t._setOrUpdate(),!t._live||t.s.selectMultiple&&!l||t._hasTime||l&&(!o.start||!o.end||c)||t.close()},t._onDatetimeChange=function(e){var n=t.s,r="range"===n.select,i=it(n,e.value),o=t._hasTime?i:Ze(i),s=+o;t._tempValueSet=!1;var a=t._copy(t._tempValueRep),l=r&&n.exclusiveEndDates&&!t._hasTime;if(l&&a.end&&(a.end=+Ge(n,st(n,a.end-1))),r)if("start"===t._activeSelect){if(t._hasTime&&t._selectedTime&&o.setHours(t._selectedTime.getHours(),t._selectedTime.getMinutes(),t._selectedTime.getSeconds(),t._selectedTime.getMilliseconds()),a.start=s,a.end){var c=n.minRange&&!t._hasTime?24*(n.minRange-1)*60*60*1e3-1:n.minRange||0;a.end-a.start<c&&(a.end=Q)}}else t._hasTime?t._selectedTime&&o.setHours(t._selectedTime.getHours(),t._selectedTime.getMinutes(),t._selectedTime.getSeconds(),t._selectedTime.getMilliseconds()):a.start!==+Ze(o)||n.exclusiveEndDates||o.setHours(23,59,59,999),a.end=+o;else{if(t._hasTime&&t._hasDate&&n.controls.indexOf("datetime")<0){var u=t._selectedTime||new Date;o.setHours(u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds())}else t._selectedTime=st(n,o);(a={date:{}}).date[+o]=o}t._tempValueRep=a,l&&a.end&&(a.end=+Ge(n,pt(st(n,a.end),1))),t._setOrUpdate()},t._onTempDateChange=function(e){var n=e.value;if(!t._selectedTime){var r=st(t.s);n.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())}t._tempDate=n},t._onTimePartChange=function(e){t._tempValueSet=!1;var n=t.s,r="range"===n.select,i=it(n,e.value);if(t._selectedTime=i,r){var o=t._getDate(t._tempValueRep),s="start"===t._activeSelect?0:1;o[s]?((a=st(n,o[s])).setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),o[s]=a,"start"===t._activeSelect&&+a>+o[1]&&(o.length=1),t._tempValueRep=t._parse(o)):t._selectedTime.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}else if(!n.selectMultiple){var a;if(a=t._getDate(t._tempValueRep)||t._tempDate)a.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t._tempValueRep={date:{}},t._tempValueRep.date[+a]=a;else if(t._selectedTime.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t._live)return void t.forceUpdate()}t._setOrUpdate()},t._changeActiveTab=function(e){t.setState({activeTab:e.target.value})},t._changeActiveSelect=function(e){var n=e.target.value;t._setActiveSelect(n),t.setActiveDate(n)},t._clearEnd=function(){t._tempValueRep.end=Q,t._hasTimegrid&&(t._selectedTime=Q),t._setOrUpdate()},t._clearStart=function(){t._tempValueRep={},t._newSelection=!0,t._hasTimegrid&&(t._selectedTime=Q),t._setOrUpdate()},t._shouldValidate=function(e,t){return e.controls!==t.controls||e.dataTimezone!==t.dataTimezone||e.displayTimezone!==t.displayTimezone||e.dateFormat!==t.dateFormat||e.timeFormat!==t.timeFormat||e.locale!==t.locale||e.min!==t.min||e.max!==t.max},t._valueEquals=function(e,n){var r=oe(e)&&0===e.length||e===Q||null===e,i=oe(n)&&0===n.length||n===Q||null===n;return r&&r===i||ht(e,n,t.s)},t._copy=function(e){var t=e.date?p({},e.date):e.date;return p({},e,{date:t})},t._format=function(e){var n=t.s,r=[];if(!n)return"";if("date"===n.select){var i=e.date;for(var o in i)i[o]!==Q&&null!==i[o]&&r.push(ct(t._valueFormat,i[o],n));return n.selectMultiple?r.join(", "):r[0]}if(e.start&&r.push(ct(t._valueFormat,st(n,e.start),n)),e.end){r.length||r.push("");var s=st(n,e.end-(n.exclusiveEndDates&&!t._hasTime?1:0));r.push(ct(t._valueFormat,s,n))}return t._tempStartText=r[0]||"",t._tempEndText=r[1]||"",r.join($r)},t._get=function(e){var n=t.s,r=t._valueFormat,i=t._iso,o=t._getDate(e);return oe(o)?o.map(function(e){return e?lt(e,n,r,i,t._hasTime):null}):null===o?null:lt(o,n,r,i,t._hasTime)},t._parse=function(e,n){var r=t.s,i={},o="date"!==r.select,s=r.selectMultiple,a=[];if(ce(e)){var l=r.defaultSelection;e=s||o?l:null===l||t._live&&"inline"!==r.display?null:l||new Date}if(le(e)&&(o||s)?a=e.split(o?$r:","):oe(e)?a=e:e&&!oe(e)&&(a=[e]),o){var c=a[0],u=a[1],h=at(c,r,t._valueFormat,t._iso,n),d=at(u,r,t._valueFormat,t._iso,n);n&&h&&(h=it(r,h)),n&&d&&(d=it(r,d)),i.start=h?+h:Q,i.end=d?+d:Q}else{i.date={};for(var p=0,f=a;p<f.length;p++){var m=f[p];if(!ce(m)){var g=at(m,r,t._valueFormat,t._iso,n);if(g){n&&(g=it(r,g));var y=+Ze(g);i.date[y]=g,t._hasTime&&(t._selectedTime=new Date(g))}}}}return i},t._onInputClickRange=function(e){var n=e.target===t._startInput||t._renderControls?"start":"end";t._setActiveSelect(n)},t._onInputChangeRange=function(e){var n=t._startInput,r=t._endInput,i=(n?n.value:"")+(r&&r.value?$r+r.value:"");t._onInputChange(e,i)},t}return d(t,e),t.prototype.setActiveDate=function(e){var t=qr(e);this._activeSelect=e;var n=this._tempValueRep[e],r=this._tempValueRep[t];this._tempValueRep.start&&this._tempValueRep.end||!n&&r?this._newSelection=!1:n&&!r&&(this._newSelection=!0),n&&(this._active=n),!n&&this._hasTimegrid&&(this._selectedTime=Q),this.forceUpdate()},t.prototype.getTempVal=function(){return e.prototype.getTempVal.call(this)},t.prototype.setTempVal=function(t){e.prototype.setTempVal.call(this,t)},t.prototype.navigate=function(e){this._active=+at(e),this.forceUpdate()},t.prototype.setVal=function(t){if("range"===this.s.select&&t){var n=t[0],r=t[1];this._savedStartValue=+at(n,this.s,this._valueFormat),this._savedEndValue=+at(r,this.s,this._valueFormat)}e.prototype.setVal.call(this,t)},t.prototype._render=function(t,n){var r=this;t.inRangeInvalid&&(t.rangeEndInvalid=!1),"preset-range"===t.select&&(t.controls=Yr),t.exclusiveEndDates===Q&&(t.exclusiveEndDates=!!t.displayTimezone);var i=this._hasTime,o=this._hasDate=!!we(t.controls,function(e){return/date|calendar/.test(e)}),s=this._hasTime=!!we(t.controls,function(e){return/time/.test(e)});s||(t.timezonePlugin=t.dataTimezone=t.displayTimezone=Q),!t.valid||t.invalid&&!s||(t.invalid=Gr);var a=this._prevS;t.buttons;var l=t.calendarSize;t.children,t.className;var c=t.controls;t.cssClass,t.element,t.modelValue,t.onDestroy,t.onInit,t.onTempChange,t.responsive;var u=t.select,h=t.selectMultiple,d=t.tabs,m=f(t,["buttons","calendarSize","children","className","controls","cssClass","element","modelValue","onDestroy","onInit","onTempChange","responsive","select","selectMultiple","tabs"]),g=n.widthType||"sm",y="date"!==u;if(this._renderTabs=c.length>1&&("auto"===d?"sm"===g:d),u!==a.select&&this._tempValueRep)if(y&&this._tempValueRep.date){var v=Object.keys(this._tempValueRep.date).map(function(e){return+e}).sort(),_=v[0],b=v[1];this._tempValueRep.start=_,this._tempValueRep.end=b,this._tempValueRep.date=Q,this._tempValueText=this._format(this._tempValueRep),setTimeout(function(){r.set()})}else if(!y&&(this._tempValueRep.start||this._tempValueRep.end)){this._tempValueRep.date||(this._tempValueRep.date={});var w=this._tempValueRep.start||this._tempValueRep.end;this._tempValueRep.date[w]=new Date(w);var x=this._tempValueRep.end||this._tempValueRep.start;x!==w&&t.selectMultiple&&(this._tempValueRep.date[x]=new Date(x)),this._tempValueRep.start=Q,this._tempValueRep.end=Q,this._tempValueText=this._format(this._tempValueRep),setTimeout(function(){r.set()})}t.min!==a.min&&(this._min=ce(t.min)?Q:at(t.min,t,t.dateFormat)),t.max!==a.max&&(this._max=ce(t.max)?Q:at(t.max,t,t.dateFormat)),t.minTime!==a.minTime&&(this._minTime=ce(t.minTime)?Q:at(t.minTime,t,t.timeFormat)),t.maxTime!==a.maxTime&&(this._maxTime=ce(t.maxTime)?Q:at(t.maxTime,t,t.timeFormat));var S=this._tempValueRep&&this._tempValueRep.end,E=this._tempValueRep&&this._tempValueRep.start,T=(o?t.dateFormat:"")+(s?(o?t.separator:"")+t.timeFormat:""),M=c!==a.controls;if(M){this._controls=[],this._controlsClass="",this._hasCalendar=!1,this._hasTimegrid=!1;for(var A=0,k=c;A<k.length;A++)"timegrid"===(W=k[A])&&(this._hasTimegrid=!0),"calendar"===W&&(this._hasCalendar=!0),this._controls.push({Component:Hr["calendar"===W?"Calendar":"timegrid"===W?"Timegrid":"Datetime"],name:W,title:"time"===W||"timegrid"===W?t.timeText:t.dateText}),this._controlsClass+=" mbsc-datepicker-control-"+W;s||(this._selectedTime=Q)}if(this._renderControls=y&&"preset-range"!==u&&(t.showRangeLabels===Q||t.showRangeLabels),this._nullSupport="inline"!==t.display||"date"!==u||!0===t.selectMultiple,this._valueFormat=T,this._activeTab=n.activeTab||c[0],e.prototype._render.call(this,t,n),M&&y&&t.exclusiveEndDates&&s!==i&&(S||E)){var C=this._savedStartValue,I=this._savedEndValue;setTimeout(function(){if(s)r._tempValueRep.start=C||E,r._tempValueRep.end=I||S;else{r._savedStartValue=E,r._savedEndValue=S,r._clearSaved=!1;var e=p({},t,{dataTimezone:r.props.dataTimezone,displayTimezone:r.props.displayTimezone,timezonePlugin:r.props.timezonePlugin});if(E&&(r._tempValueRep.start=+ot(Ge(e,st(e,E)))),S){var n=st(e,S-1);r._tempValueRep.end=+ot(st(e,+qe(e,n)+1))}}r._valueText=r._tempValueText=r._format(r._tempValueRep),r._valueTextChange=!0,r.set()}),this._valueTextChange=!1}var P,O=t.value!==Q?t.value!==a.value:n.value!==this._prevStateValue;if(y&&this._clearSaved&&O&&(this._savedEndValue=this._savedStartValue=Q),this._clearSaved=!0,t.headerText===a.headerText&&t.selectCounter===a.selectCounter&&t.selectMultiple===a.selectMultiple||this._setHeader(),this._scrollLock=t.scrollLock!==Q?t.scrollLock:!this._hasTimegrid,this._showInput=t.showInput!==Q?t.showInput:this._showInput&&(!y||!t.startInput&&!t.endInput),this._shouldInitInputs=this._shouldInitInputs||u!==a.select||t.startInput!==a.startInput||t.endInput!==a.endInput,this._shouldInitInput=this._shouldInitInput||this._shouldInitInputs,M||t.dateWheels!==a.dateWheels||t.timeWheels!==a.timeWheels||t.dateFormat!==a.dateFormat||t.timeFormat!==a.timeFormat){var R=t.dateWheels||t.dateFormat,D=t.timeWheels||t.timeFormat,L=this._iso={};o&&(/y/i.test(R)&&(L.y=1),/M/.test(R)&&(L.y=1,L.m=1),/d/i.test(R)&&(L.y=1,L.m=1,L.d=1)),s&&(/h/i.test(D)&&(L.h=1),/m/.test(D)&&(L.i=1),/s/i.test(D)&&(L.s=1))}if(y?(this._activeSelect===Q&&this._setActiveSelect("start",!0),P=this._selectionNotReady()):(this._activeSelect=Q,P=!1),this._buttons){var N=we(this._buttons,function(e){return"set"===e.name});N&&N.disabled!==P&&(N.disabled=P,this._buttons=this._buttons.slice())}var F=this._activeSelect;this._needsWidth=("anchored"===t.display||"center"===t.display||"inline"!==t.display&&n.isLarge||c.length>1&&!d)&&t.width===Q;var z=t.max!==Q?at(t.max,t,T):Q,U=t.min!==Q?at(t.min,t,T):Q;this._maxLimited=z,this._minLimited=U;var j=this._tempValueRep.start;if(j&&(this._prevStart!==j||a.valid!==t.valid||a.invalid!==t.invalid)){var B=st(t,j);this._nextInvalid=t.valid?pt(Jn(t.valid,B,t),1):Zn(t.invalid||[],B,t)}var V="end"===F&&j;if(V){if(!t.inRangeInvalid){var H=this._nextInvalid;H&&(t.rangeEndInvalid?this._maxLimited=st(t,+pt(H,1)-1):this._maxLimited=st(t,+H-1))}this._hasCalendar&&!s||(!this._minLimited||at(this._minLimited,t,T)<st(t,j))&&(this._minLimited=st(t,this._tempValueRep.start))}if(this._minTimeLimited=this._minLimited,V){if(t.minRange){var $=s?this._tempValueRep.start+t.minRange:+pt(st(t,this._tempValueRep.start),t.minRange)-1;(!this._minLimited||+at(this._minLimited,t,T)<$)&&(this._minLimited=st(t,$),this._minTimeLimited=this._minLimited)}if(this._minTimeLimited===Q&&this._tempValueRep.start&&this._tempValueRep.end&&(this._minTimeLimited=st(t,+this._tempValueRep.start)),t.maxRange!==Q){var Y=s?this._tempValueRep.start+t.maxRange:+pt(st(t,this._tempValueRep.start),t.maxRange)-1;(!this._maxLimited||+at(this._maxLimited,t,T)>Y)&&(this._maxLimited=st(t,Y))}}for(var G=0,q=this._controls;G<q.length;G++){var W=q[G],K=p({},m,{display:"inline",isOpen:t.isOpen||n.isOpen,max:this._maxLimited,min:this._minLimited});if(t.rangeEndInvalid&&V&&this._nextInvalid&&(K.valid=(K.valid||[]).concat([this._nextInvalid])),"calendar"===W.name){K.min=this._minLimited?Ze(this._minLimited):Q,K.max=this._maxLimited?Ze(this._maxLimited):Q,K.selectRange=y,K.width=this._needsWidth?296*dr(t.pages,n.maxPopupWidth):Q,"week"===t.calendarType&&l?K.weeks=l:K.size=l;var Z="auto"===t.pages?3:t.pages||1;if(this._maxWidth=t.maxWidth||(Z>2?296*Z:Q),y){var J=this._getDate(this._tempValueRep),X=J[1];X&&t.exclusiveEndDates&&!s&&(J[1]=st(t,+X-1));var ee=J.filter(function(e){return null!==e}).map(function(e){return+Ze(e)}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e){return new Date(e)});if(K.value=ee,t.rangeHighlight)if(K.rangeStart=J[0]&&+Ze(ot(J[0])),K.rangeEnd=J[1]&&+Ze(ot(J[1])),K.onDayHoverIn=this._onDayHoverIn,K.onDayHoverOut=this._onDayHoverOut,"preset-range"===u){if(n.hoverDate){var te=Wr(n.hoverDate,t);_=te.start,b=te.end,K.hoverStart=+_,K.hoverEnd=+b}}else"end"===F&&J[0]&&(K.hoverStart=K.rangeEnd||K.rangeStart,K.hoverEnd=n.hoverDate),"start"===F&&J[1]&&this._renderControls&&(K.hoverStart=n.hoverDate,K.hoverEnd=K.rangeStart||K.rangeEnd)}else K.selectMultiple=h,K.value=this._getDate(this._tempValueRep);for(var ne=oe(K.value)?K.value:[K.value],ie=K.min?+K.min:-1/0,se=K.max?+K.max:1/0,ae=void 0,le=0,ue=ne;le<ue.length;le++){var he=ue[le];!ae&&he&&he>=ie&&+Ze(he)<=se&&(ae=+he)}!ae&&y&&ne.length&&(ae=+ne[0]),ae===this._selectedDate&&this._active!==Q&&t.min===a.min&&t.max===a.max||(this._selectedDate=ae,this._active=ae?+Ze(new Date(ae)):re(this._active||+Ze(new Date),ie,se));var de=t.dateWheels||t.dateFormat,pe=/d/i.test(de)?or:/m/i.test(de)?rr:/y/i.test(de)?nr:or;K.active=this._active,K.onActiveChange=this._onActiveChange,K.onChange=this._onCalendarChange,K.onCellClick=this._onCellClick,K.onCellHoverIn=this._proxyHook,K.onCellHoverOut=this._proxyHook,K.onLabelClick=this._proxyHook,K.onPageChange=this._proxyHook,K.onPageLoaded=this._proxyHook,K.onPageLoading=this._proxyHook,K.selectView=pe}else{var fe=Object.keys(this._tempValueRep.date||{});if(K.displayStyle="bottom"!==t.display&&"top"!==t.display||!this._hasCalendar&&!this._renderTabs?t.display:"center",K.mode=W.name,"time"!==W.name&&"timegrid"!==W.name||!o)if(K.onChange=this._onDatetimeChange,K.onTempChange=this._onTempDateChange,y){var me=this._tempValueRep[F],ge=this._tempValueRep[qr(F)];K.value=me?st(t,me):ge&&!o?st(t,ge):null,"end"===F&&t.exclusiveEndDates&&!s&&(K.value=st(t,+K.value-1))}else{var ye=this._tempValueRep.date&&this._tempValueRep.date[fe[0]],ve=ye;ye&&(s||(ve=Ze(ye))),K.value=ve||null}else{if(K.onChange=this._onTimePartChange,y){var _e=this._tempValueRep[F],be=void 0;this._selectedTime&&(!this._minTimeLimited||this._selectedTime>this._minTimeLimited?be=this._selectedTime:(be=st(t,this._minTimeLimited)).setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),this._selectedTime.getSeconds(),this._selectedTime.getMilliseconds()));var xe=st(t);xe.setSeconds(0,0),this._selectedTime=_e?st(t,_e):be||("time"===W.name?xe:Q),K.value=this._selectedTime}else if(!t.selectMultiple){var Se=this._tempValueRep.date&&this._tempValueRep.date[fe[0]]||(this._hasCalendar?this._selectedTime:null),Ee=this._tempDate,Te=this._selectedTime;!Se&&Ee&&Te&&(Se=st(t,Ee)).setHours(Te.getHours(),Te.getMinutes(),Te.getSeconds(),Te.getMilliseconds()),this._selectedTime=K.value=Se}K.min=this._minTimeLimited,K.max=this._maxLimited}if("time"===W.name||"timegrid"===W.name){var Me=K.value||ft(new Date,K.min,K.max);if(this._minTime){var Ae=this._minTime;ie=new Date(Me.getFullYear(),Me.getMonth(),Me.getDate(),Ae.getHours(),Ae.getMinutes(),Ae.getSeconds(),Ae.getMilliseconds()),(!K.min||ie>K.min)&&(K.min=ie)}if(this._maxTime){var ke=this._maxTime;se=new Date(Me.getFullYear(),Me.getMonth(),Me.getDate(),ke.getHours(),ke.getMinutes(),ke.getSeconds(),ke.getMilliseconds()),(!K.max||se<K.max)&&(K.max=se)}}}W.options=K}this._prevStart=this._tempValueRep.start,this._prevStateValue=n.value},t.prototype._updated=function(){var t=this,n=this.s;if(this._shouldInitInputs){if(this._resetInputs(),"range"===n.select){var r=n.startInput;r&&this._setupInput("start",r);var i=n.endInput;i&&this._setupInput("end",i),!n.element||this._startInput!==n.element&&this._endInput!==n.element||(this._shouldInitInput=!1,clearTimeout(n.element.__mbscTimer))}this._shouldInitInputs=!1}var o=this._valueTextChange;if(e.prototype._updated.call(this),"range"===n.select&&o){var s=function(e,n){e.value=n,setTimeout(function(){t._preventChange=!0,Gt(e,gn),Gt(e,un)})};this._startInput&&s(this._startInput,this._getValueText("start")),this._endInput&&s(this._endInput,this._getValueText("end"))}},t.prototype._onEnterKey=function(t){this._selectionNotReady()||e.prototype._onEnterKey.call(this,t)},t.prototype._setupInput=function(e,t){var n=this;zr(t,function(t,r){var i=Ur(t,r,n,n._onInputChangeRange,n._onInputClickRange);"start"===e?(n._startInput=t,n._resetStartInput=i):(n._endInput=t,n._resetEndInput=i);var o=n._getValueText(e),s=o!==t.value;t.value=o,s&&setTimeout(function(){n._preventChange=!0,Gt(t,gn),Gt(t,un)})})},t.prototype._destroy=function(){this._resetInputs(),e.prototype._destroy.call(this)},t.prototype._setHeader=function(){var t=this.s;if(t.selectCounter&&t.selectMultiple){var n=Object.keys(this._tempValueRep&&this._tempValueRep.date||{}).length;this._headerText=(n>1&&t.selectedPluralText||t.selectedText).replace(/{count}/,""+n)}else e.prototype._setHeader.call(this)},t.prototype._validate=function(){if(!(this._max<=this._min)){var e=this.s,t=this._min?+this._min:-1/0,n=this._max?+this._max:1/0;if("date"===e.select){var r=this._tempValueRep.date;if(!e.selectMultiple)for(var i=0,o=Object.keys(r);i<o.length;i++){var s=o[i],a=r[s],l=Vr(a,e,t,n);+l!=+a&&(delete r[s],r[+Ze(l)]=l)}}else if("preset-range"!==e.select){var c=this._getDate(this._tempValueRep),u=c[0],h=c[1];u&&(u=Vr(u,e,t,n),e.inRangeInvalid||this._prevStart&&this._prevStart===+u&&e.invalid===this._prevS.invalid||(this._nextInvalid=e.valid?pt(Jn(e.valid,u,e),1):Zn(e.invalid||[],u,e))),h&&(h=!e.inRangeInvalid&&this._nextInvalid&&this._nextInvalid<=h?e.rangeEndInvalid?this._nextInvalid:pt(this._nextInvalid,-1):Vr(h,e,t,n)),u&&h&&u>h&&("end"===this._activeSelect?u=h:h=u),u&&(this._prevStart=this._tempValueRep.start=+u),h&&(this._tempValueRep.end=+h)}}},t.prototype._getDate=function(e){var t=this.s;if("date"!==t.select){var n=e.start?st(t,e.start):null,r=e.end?st(t,e.end):null;return n||r?[n,r]:[]}if(t.selectMultiple){var i=[],o=e.date;if(o)for(var s=0,a=Object.keys(o);s<a.length;s++){var l=a[s];i.push(st(t,+l))}return i}var c=Object.keys(e.date||{});return c.length?st(t,e.date[c[0]]):null},t.prototype._onClosed=function(){this._active=this._activeSelect=Q,this._hasTimegrid&&(this._selectedTime=Q)},t.prototype._onOpen=function(){this._newSelection=!0},t.prototype._resetInputs=function(){this._resetStartInput&&(this._resetStartInput(),this._resetStartInput=Q),this._resetEndInput&&(this._resetEndInput(),this._resetEndInput=Q)},t.prototype._getValueText=function(e){return this._valueText.split($r)["start"===e?0:1]||""},t.prototype._selectionNotReady=function(){var e=!1;if("range"===this.s.select){var t=(this._get(this._tempValueRep||{})||[]).filter(function(e){return e});(e=!t.length)||(e=this._hasCalendar&&!this._hasTime||this._renderControls?t.length<2:!this._tempValueRep[this._activeSelect])}return e},t.prototype._setActiveSelect=function(e,t){var n=this;this._activeSelect!==e&&(t?setTimeout(function(){return n._hook("onActiveDateChange",{active:e})}):this._hook("onActiveDateChange",{active:e})),this._activeSelect=e},t.defaults=p({},Be,jr.defaults,{activeElm:'.mbsc-calendar-cell[tabindex="0"]',controls:Yr,inRangeInvalid:!1,inputTyping:!0,rangeEndHelp:"Please select",rangeEndLabel:"End",rangeHighlight:!0,rangeStartHelp:"Please select",rangeStartLabel:"Start",select:"date",selectSize:7,selectedText:"{count} selected",showOnClick:!0}),t._name="Datepicker",t}(jr),Zr=function(){function e(){this.pageSize=0,this._prevS={},this._s={}}return e.prototype.options=function(e,t){var n=this._s=p({},this._s,e),r=this._prevS,i=n.getDate,o=n.getYear,s=n.getMonth,a=n.showCalendar,l=n.calendarType,c=n.startDay,u=n.endDay,h=n.firstDay,d="week"===l,f=a?d?n.weeks:6:0,m=n.min===r.min&&this.minDate?this.minDate:ce(n.min)?-1/0:at(n.min),g=n.max===r.max&&this.maxDate?this.maxDate:ce(n.max)?1/0:at(n.max),y=n.activeDate||+new Date,v=re(y,+m,+g),_=this.forcePageChange||v!==y&&(v<+this.firstDay||v>=+this.lastDay),b=new Date(v),w=v!==r.activeDate,x=n.calendarType!==r.calendarType||n.eventRange!==r.eventRange||n.firstDay!==r.firstDay||n.eventRangeSize!==r.eventRangeSize||n.refDate!==r.refDate||a!==r.showCalendar||n.size!==r.size||n.weeks!==r.weeks,S=_||this.pageIndex===Q||x||!this.preventPageChange&&w&&(v<+this.firstDay||v>=+this.lastDay)?lr(b,n):this.pageIndex,E="year"===l?12:n.size||1,T=E>1&&!d,M=T?1:dr(n.pages,this.pageSize),A="vertical"===n.calendarScroll&&"auto"!==n.pages&&(n.pages===Q||1===n.pages),k=n.showOuterDays!==Q?n.showOuterDays:!A&&M<2&&(d||!E||E<2),C=T?0:1,I=ar(S,n),P=ar(S+M,n);a||"week"!==n.eventRange||c===Q||u===Q||(I=pt(I,c-h+(c<h?7:0)),P=pt(I,7*n.eventRangeSize+u-c+1-(u<c?0:7)));var O=a&&k?Qe(I,n):I,R=T?i(o(P),s(P)-1,1):ar(S+M-1,n),D=a&&k?pt(Qe(R,n),7*f):P,L=a?Qe(ar(S-C,n),n):I,N=a?Qe(ar(S+M+C-1,n),n):P,F=a?pt(T?Qe(R,n):N,7*f):P,z=this.pageIndex===Q,U=L,j=F;if(!a&&"week"===n.resolution&&("year"===n.eventRange||"month"===n.eventRange)){var B=u-c+1+(u<c?7:0);if(I.getDay()!==c&&(U=(H=pt(V=Qe(I,n,c),B))<=I?pt(V,7):V),P.getDay()!==c){var V,H=pt(V=Qe(P,n,c),B);j=V>P?pt(H,-7):H}}var $=!1;S!==Q&&($=+U!=+this.viewStart||+j!=+this.viewEnd,this.pageIndex=S),this.firstDay=I,this.lastDay=P,this.firstPageDay=O,this.lastPageDay=D,this.viewStart=U,this.viewEnd=j,this.forcePageChange=!1,this.preventPageChange=!1,this.minDate=m,this.maxDate=g,this._prevS=n,this._prevS.activeDate=v,S!==Q&&($||t)&&($&&!z&&this._pageChange(),this._pageLoading($))},e.prototype._pageChange=function(){this._s.onPageChange&&this._s.onPageChange({firstDay:this.firstPageDay,lastDay:this.lastPageDay,month:"month"===this._s.calendarType?this.firstDay:Q,type:"onPageChange",viewEnd:this.viewEnd,viewStart:this.viewStart})},e.prototype._pageLoading=function(e){this._s.onPageLoading&&this._s.onPageLoading({firstDay:this.firstPageDay,lastDay:this.lastPageDay,month:"month"===this._s.calendarType?this.firstDay:Q,type:"onPageLoading",viewChanged:e,viewEnd:this.viewEnd,viewStart:this.viewStart})},e}(),Jr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._navService=new Zr,t._update=0,t._onDayClick=function(e){var n=t.s,r=it(n,e.date),i=+r;if(!e.disabled){if(n.selectMultiple){var o=t._tempValueRep;o[i]?delete o[i]:(n.selectMax===Q||Object.keys(o).length<n.selectMax)&&(o[i]=r),t._tempValueRep=p({},o)}else n.selectRange||(t._tempValueRep={}),t._tempValueRep[i]=r;t._navService.preventPageChange=n.selectRange,t._hook("onCellClick",e),t._hook("onChange",{value:t._get()})}},t._onTodayClick=function(){var e=new Date,n=+Ze(e);t.s.selectRange||t.s.selectMultiple||(t._tempValueRep={},t._tempValueRep[n]=e,t._hook("onChange",{value:t._get()}))},t._onActiveChange=function(e){t._navService.forcePageChange=e.pageChange,t._update++,t._hook("onActiveChange",e)},t._setCal=function(e){t._calendarView=e},t}return d(t,e),t.prototype._render=function(e){for(var t={},n=e.value,r=0,i=n?oe(n)?n:[n]:[];r<i.length;r++){var o=i[r];if(null!==o){var s=at(o,e,e.dateFormat);t[+Ze(s)]=s}}this._tempValueRep=t,this._navService.options({activeDate:e.active,calendarType:e.calendarType,firstDay:e.firstDay,getDate:e.getDate,getDay:e.getDay,getMonth:e.getMonth,getYear:e.getYear,max:e.max,min:e.min,onPageChange:e.onPageChange,onPageLoading:e.onPageLoading,pages:e.pages,refDate:e.refDate,showCalendar:!0,showOuterDays:e.showOuterDays,size:e.size,weeks:e.weeks})},t.prototype._get=function(){var e=this.s,t=e.selectRange,n=this._tempValueRep;if(e.selectMultiple||t){for(var r=[],i=0,o=Object.keys(n);i<o.length;i++){var s=o[i];r.push(st(e,+n[s]))}return r}var a=Object.keys(n||{});return a.length?st(e,n[a[0]]):null},t.defaults=p({},sr,{calendarScroll:"horizontal",calendarType:"month",selectedText:"{count} selected",showControls:!0,weeks:1}),t._name="Calendar",t}(sn),Xr=function(){function e(){this.onInstanceReady=new g,this.onComponentChange=new g}return Object.defineProperty(e.prototype,"instance",{get:function(){return this._inst},set:function(e){this._inst=e,this.onInstanceReady.next(e)},enumerable:!0,configurable:!0}),e}(),Qr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={height:"sm",pageSize:0,pickerSize:0,width:"sm"},t._dim={},t._months=[1,2,3],t._title=[],t.PAGE_VIEW=or,t.MONTH_VIEW=ir,t.YEAR_VIEW=rr,t.MULTI_YEAR_VIEW=nr,t.nextPage=function(){switch(t._prevDocClick(),t._view){case ir:t._activeMonthChange(1);break;case nr:t._activeYearsChange(1);break;case rr:t._activeYearChange(1);break;default:t._activeChange(1)}},t.prevPage=function(){switch(t._prevDocClick(),t._view){case ir:t._activeMonthChange(-1);break;case nr:t._activeYearsChange(-1);break;case rr:t._activeYearChange(-1);break;default:t._activeChange(-1)}},t._changeView=function(e){var n=t.s,r=t._view,i=t._hasPicker,o=n.selectView,s=n.navView,a=n.showCalendar&&"year"===n.calendarType;if(!e){switch(r){case or:e=s||(a?nr:rr);break;case ir:e=rr;break;case nr:e=a||s===nr?or:rr;break;default:e=i&&s===rr||o===rr||t._prevView!==nr?nr:s===ir?ir:or}o!==nr&&s!==nr||(e=nr)}r===or&&(t._activeMonth=t._active);var l=i&&e===o;t._prevView=r,t.setState({view:e,viewClosing:l?Q:r,viewOpening:l?Q:e})},t._onDayHoverIn=function(e){t._disableHover||(t._hook("onDayHoverIn",e),t._hoverTimer=setTimeout(function(){var n=Ke(e.date);t._labels&&(e.labels=t._labels[n]),t._marked&&(e.marked=t._marked[n]),t._isHover=!0,t._hook("onCellHoverIn",e)},150))},t._onDayHoverOut=function(e){if(!t._disableHover&&(t._hook("onDayHoverOut",e),clearTimeout(t._hoverTimer),t._isHover)){var n=Ke(e.date);t._labels&&(e.labels=t._labels[n]),t._marked&&(e.marked=t._marked[n]),t._isHover=!1,t._hook("onCellHoverOut",e)}},t._onLabelClick=function(e){t._isLabelClick=!0,t._hook("onLabelClick",e)},t._onDayClick=function(e){t._shouldFocus=!t._isLabelClick,t._prevAnim=!1,t._isLabelClick=!1,t._hook("onDayClick",e)},t._onTodayClick=function(e){t._prevAnim=!1,t._hook("onActiveChange",{date:+ot(st(t.s)),today:!0}),t._hook("onTodayClick",{})},t._onNavDayClick=function(e){if(!e.disabled){var n=e.date,r=lr(n,t.s);t._prevDocClick(),t._changeView(or),t._shouldFocus=!0,t._prevAnim=!t._hasPicker,t._hook("onActiveChange",{date:+n,nav:!0,pageChange:r!==t._pageIndex,today:!0})}},t._onMonthClick=function(e){if(!e.disabled){var n=t.s,r=new Date(e.date);if(n.selectView===rr)t._hook("onDayClick",e);else if(t._prevDocClick(),t._shouldFocus=!0,t._prevAnim=!t._hasPicker,t._activeMonth=+r,n.navView===rr||n.navView===Q){var i=lr(r,n);t._changeView(or),t._hook("onActiveChange",{date:+r,nav:!0,pageChange:i!==t._pageIndex,today:!0})}else t._changeView(ir)}},t._onYearClick=function(e){if(!e.disabled){var n=e.date,r=t.s,i=r.selectView;if(i===nr)t._hook("onDayClick",e);else if(t._shouldFocus=!0,t._prevAnim=i===rr,t._activeMonth=+n,t._prevDocClick(),r.navView===nr||"year"===r.calendarType){var o=lr(n,r);t._changeView(or),t._hook("onActiveChange",{date:+n,pageChange:o!==t._pageIndex,today:!0})}else t._changeView(rr)}},t._onPageChange=function(e){t._isSwipeChange=!0,t._activeChange(e.diff)},t._onMonthPageChange=function(e){t._activeMonthChange(e.diff)},t._onYearPageChange=function(e){t._activeYearChange(e.diff)},t._onYearsPageChange=function(e){t._activeYearsChange(e.diff)},t._onAnimationEnd=function(e){t._disableHover=!1,t._isIndexChange&&(t._pageLoaded(),t._isIndexChange=!1)},t._onStart=function(){clearTimeout(t._hoverTimer)},t._onGestureStart=function(e){t._disableHover=!0,t._hook("onGestureStart",e)},t._onGestureEnd=function(e){t._prevDocClick()},t._onPickerClose=function(){t.setState({view:or})},t._onPickerOpen=function(){var e=t._pickerCont.clientHeight,n=t._pickerCont.clientWidth;t.setState({pickerSize:t._isVertical?e:n})},t._onPickerBtnClick=function(e){t._view===or&&(t._pickerBtn=e.currentTarget),t._prevDocClick(),t._changeView()},t._onDocClick=function(){var e=t.s.selectView;t._prevClick||t._hasPicker||t._view===e||t._changeView(e)},t._onViewAnimationEnd=function(){t.state.viewClosing&&t.setState({viewClosing:Q}),t.state.viewOpening&&t.setState({viewOpening:Q})},t._onResize=function(){if(t._body&&_){var e=t.s,n=t.state,r=e.showCalendar,i=r?t._body.querySelector(".mbsc-calendar-body-inner"):t._body,o=t._el.offsetWidth,s=t._el.offsetHeight,a=i.clientHeight,l=i.clientWidth,c=t._isVertical?a:l,u=t._hasPicker?n.pickerSize:c,h=r!==Q,d="sm",p="sm",f=Q,m=!1,g=0,y=0;if(e.responsiveStyle&&!t._isGrid&&(a>300&&(p="md"),l>767&&(d="md")),d!==n.width||p!==n.height)t._shouldCheckSize=!0,t.setState({width:d,height:p});else{if(t._labels&&r){var v=i.querySelector(".mbsc-calendar-text"),b=i.querySelector(".mbsc-calendar-day-inner"),w=b.querySelector(".mbsc-calendar-labels"),x=v?function(e){return parseFloat(getComputedStyle(e).marginBottom||"0")}(v):2,S=v?v.offsetHeight:18;g=w.offsetTop,m=i.scrollHeight>i.clientHeight,y=S+x,f=Math.max(1,_e((b.clientHeight-g)/y))}t._hook("onResize",{height:s,target:t._el,width:o}),e.navService.pageSize=c;var E=t._shouldPageLoad?(n.update||0)+1:n.update;t.setState({cellTextHeight:g,hasScrollY:m,labelHeight:y,maxLabels:f,pageSize:c,pickerSize:u,ready:h,update:E})}}},t._onKeyDown=function(e){var n,r=t.s,i=t._view,o=i===or?t._active:t._activeMonth,s=new Date(o),a=r.getYear(s),l=r.getMonth(s),c=r.getDay(s),u=r.getDate,h=r.weeks,d="month"===r.calendarType;if(i===nr){var p=void 0;switch(e.keyCode){case 37:p=a-1*t._rtlNr;break;case 39:p=a+1*t._rtlNr;break;case 38:p=a-3;break;case 40:p=a+3;break;case 36:p=t._getPageYears(t._yearsIndex);break;case 35:p=t._getPageYears(t._yearsIndex)+11;break;case 33:p=a-12;break;case 34:p=a+12}p&&t._minYears<=p&&t._maxYears>=p&&(e.preventDefault(),t._shouldFocus=!0,t._prevAnim=!1,t._activeMonth=+u(p,0,1),t.forceUpdate())}else if(i===rr){switch(e.keyCode){case 37:n=u(a,l-1*t._rtlNr,1);break;case 39:n=u(a,l+1*t._rtlNr,1);break;case 38:n=u(a,l-3,1);break;case 40:n=u(a,l+3,1);break;case 36:n=u(a,0,1);break;case 35:n=u(a,11,1);break;case 33:n=u(a-1,l,1);break;case 34:n=u(a+1,l,1)}n&&t._minYear<=n&&t._maxYear>=n&&(e.preventDefault(),t._shouldFocus=!0,t._prevAnim=!1,t._activeMonth=+n,t.forceUpdate())}else{switch(e.keyCode){case 37:n=u(a,l,c-1*t._rtlNr);break;case 39:n=u(a,l,c+1*t._rtlNr);break;case 38:n=u(a,l,c-7);break;case 40:n=u(a,l,c+7);break;case 36:n=u(a,l,1);break;case 35:n=u(a,l+1,0);break;case 33:n=e.altKey?u(a-1,l,c):d?u(a,l-1,c):u(a,l,c-7*h);break;case 34:n=e.altKey?u(a+1,l,c):d?u(a,l+1,c):u(a,l,c+7*h)}if(n&&t._minDate<=n&&t._maxDate>=n){e.preventDefault();var f=lr(n,r);t._shouldFocus=!0,t._prevAnim=!1,i===ir?(t._activeMonth=+n,t.forceUpdate()):(t._pageChange=r.noOuterChange&&f!==t._pageIndex,t._hook("onActiveChange",{date:+n,pageChange:t._pageChange}))}}},t._setHeader=function(e){t._headerElement=e},t._setBody=function(e){t._body=e},t._setPickerCont=function(e){t._pickerCont=e},t}return d(t,e),t.prototype._getPageDay=function(e){return+ar(e,this.s)},t.prototype._getPageStyle=function(e,t,n,r){var i;return(i={})[(It?It+"T":"t")+"ransform"]="translate"+this._axis+"("+100*(e-t)*this._rtlNr+"%)",i.position=e===n?"relative":"",i.width=100/(r||1)+"%",i},t.prototype._getPageMonth=function(e){var t=this.s,n=t.refDate?at(t.refDate):Fe,r=t.getYear(n),i=t.getMonth(n);return+t.getDate(r,i+e,1)},t.prototype._getPageYear=function(e){var t=this.s,n=t.refDate?at(t.refDate):Fe;return t.getYear(n)+e},t.prototype._getPageYears=function(e){var t=this.s,n=t.refDate?at(t.refDate):Fe;return t.getYear(n)+12*e},t.prototype._getPickerClass=function(e){var t,n=e===this.s.selectView?" mbsc-calendar-picker-main":"",r="mbsc-calendar-picker",i=this._hasPicker,o=this.state,s=o.viewClosing,a=o.viewOpening;switch(e){case or:t=i?"":(a===or?"in-down":"")+(s===or?"out-down":"");break;case ir:t=i&&s===or?"":(a===ir?"in-down":"")+(s===ir?"out-down":"");break;case nr:t=i&&s===or?"":(a===nr?"in-up":"")+(s===nr?"out-up":"");break;default:t=!i||a!==or&&s!==or?(a===rr?s===nr?"in-down":"in-up":"")+(s===rr?a===nr?"out-down":"out-up":""):""}return r+n+(Mt&&t?" "+r+"-"+t:"")},t.prototype._isNextDisabled=function(e){if(!this._hasPicker||e){var t=this._view;if(t===nr)return this._yearsIndex+1>this._maxYearsIndex;if(t===rr)return this._yearIndex+1>this._maxYearIndex;if(t===ir)return this._monthIndex+1>this._maxMonthIndex}return this._pageIndex+1>this._maxIndex},t.prototype._isPrevDisabled=function(e){if(!this._hasPicker||e){var t=this._view;if(t===nr)return this._yearsIndex-1<this._minYearsIndex;if(t===rr)return this._yearIndex-1<this._minYearIndex;if(t===ir)return this._monthIndex-1<this._minMonthIndex}return this._pageIndex-1<this._minIndex},t.prototype._render=function(e,t){var n=e.getDate,r=e.getYear,i=e.getMonth,o=e.showCalendar,s=e.calendarType,a=e.eventRange,l=e.eventRangeSize||1,c=e.firstDay,u="week"===s,h="month"===s,d="year"===s?12:+(e.size||1),p=d>1&&!u,f=o?u?e.weeks:6:0,m=e.activeDate||this._active||+new Date,g=m!==this._active,y=new Date(m),v=this._prevS,_=e.dateFormat,b=e.monthNames,w=e.yearSuffix,x=se(e.labelList)?+e.labelList+1:"all"===e.labelList?-1:0,S=e.labelList!==v.labelList,E=e.navService,T=E.pageIndex,M=E.firstDay,A=E.lastDay,k=E.viewStart,C=E.viewEnd;if(this._minDate=E.minDate,this._maxDate=E.maxDate,ce(e.min))this._minIndex=-1/0,this._minYears=-1/0,this._minYearsIndex=-1/0,this._minYear=-1/0,this._minYearIndex=-1/0,this._minMonthIndex=-1/0;else{var I=Ze(this._minDate);this._minDate=Ze(I),this._minYear=n(r(I),i(I),1),this._minYears=r(I),this._minIndex=lr(I,e),this._minYearIndex=ur(I,e),this._minYearsIndex=cr(I,e),this._minMonthIndex=hr(I,e)}if(ce(e.max))this._maxIndex=1/0,this._maxYears=1/0,this._maxYearsIndex=1/0,this._maxYear=1/0,this._maxYearIndex=1/0,this._maxMonthIndex=1/0;else{var P=this._maxDate;this._maxYear=n(r(P),i(P)+1,1),this._maxYears=r(P),this._maxIndex=lr(P,e),this._maxYearIndex=ur(P,e),this._maxYearsIndex=cr(P,e),this._maxMonthIndex=hr(P,e)}var O=s!==v.calendarType||a!==v.eventRange||c!==v.firstDay||e.eventRangeSize!==v.eventRangeSize||e.refDate!==v.refDate||e.showCalendar!==v.showCalendar||e.weeks!==v.weeks;O&&this._pageIndex!==Q&&(this._prevAnim=!0),g&&(this._activeMonth=m),this._view=t.view||e.selectView,this._yearsIndex=cr(new Date(this._activeMonth),e),this._yearIndex=ur(new Date(this._activeMonth),e),this._monthIndex=hr(new Date(this._activeMonth),e);var R=p?1:dr(e.pages,t.pageSize),D="vertical"===e.calendarScroll&&"auto"!==e.pages&&(e.pages===Q||1===e.pages),L=e.showOuterDays!==Q?e.showOuterDays:!D&&R<2&&(u||!d||d<2),N=_.search(/m/i),F=_.search(/y/i);if(this._view===ir){var z=new Date(this._getPageMonth(this._monthIndex)),U=b[i(z)],j=r(z)+w;this._viewTitle=F<N?j+" "+U:U+" "+j}else if(this._view===rr)this._viewTitle=this._getPageYear(this._yearIndex)+"";else if(this._view===nr){var B=this._getPageYears(this._yearsIndex);this._viewTitle=B+" - "+(B+11)}if(p&&(this._monthsMulti=[],T!==Q)){for(var V=_e(.96*t.pageSize/325.6)||1;d%V;)V--;for(var H=0;H<d/V;++H){for(var $=[],Y=0;Y<V;++Y)$.push(+n(r(M),i(M)+H*V+Y,1));this._monthsMulti.push($)}}(s!==v.calendarType||e.theme!==v.theme||e.calendarScroll!==v.calendarScroll||e.hasContent!==v.hasContent||e.showCalendar!==v.showCalendar||e.showSchedule!==v.showSchedule||e.showWeekNumbers!==v.showWeekNumbers||e.weeks!==v.weeks||S)&&(this._shouldCheckSize=!0),v.width===e.width&&v.height===e.height||(this._dim={height:fe(e.height),width:fe(e.width)}),this._cssClass="mbsc-calendar mbsc-font mbsc-flex-col"+this._theme+this._rtl+(t.ready?"":" mbsc-hidden")+(p?" mbsc-calendar-grid-view":" mbsc-calendar-height-"+t.height+" mbsc-calendar-width-"+t.width)+" "+e.cssClass,this._dayNames="sm"===t.width||p?e.dayNamesMin:e.dayNamesShort,this._isSwipeChange=!1,this._yearFirst=F<N,this._pageNr=R,this._variableRow=x;var G=e.pageLoad!==v.pageLoad,q=+k!=+this._viewStart||+C!=+this._viewEnd;if(this._pageIndex!==Q&&q&&(this._isIndexChange=!this._isSwipeChange&&!O),T!==Q&&(this._pageIndex=T),T!==Q&&(e.marked!==v.marked||e.colors!==v.colors||e.labels!==v.labels||e.invalid!==v.invalid||e.valid!==v.valid||t.maxLabels!==this._maxLabels||q||S||G)){this._maxLabels=t.maxLabels,this._viewStart=k,this._viewEnd=C;var W=e.labelsMap||er(e.labels,k,C,e,!1,!e.eventExact),K=W&&pr(e,W,k,C,this._variableRow||this._maxLabels||1,7,!1,c,!0,!L,e.showLabelCount,e.moreEventsText,e.moreEventsPluralText,e.eventExact);K&&!this._labels&&(this._shouldCheckSize=!0),(K&&t.maxLabels||!K)&&(this._shouldPageLoad=!this._isIndexChange||this._prevAnim||!o||G||p||!!x),this._labelsLayout=K,this._labels=W,this._marked=W?Q:e.marksMap||er(e.marked,k,C,e,!1,!0),this._colors=er(e.colors,k,C,e,!1,!0),this._valid=er(e.valid,k,C,e,!0,!0),this._invalid=er(e.invalid,k,C,e,!0,!0)}if(q||g||a!==v.eventRange||l!==v.eventRangeSize||e.monthNames!==v.monthNames){this._title=[];var Z=pt(A,-1),J=T===Q?y:M;if(u){J=y;for(var X=0,ee=Object.keys(e.selectedDates);X<ee.length;X++){var te=ee[X];if(+te>=+M&&+te<+A){J=new Date(+te);break}}}if(this._pageNr>1)for(H=0;H<R;H++){var ne=n(r(M),i(M)+H,1),re=r(ne)+w,ie=b[i(ne)];this._title.push({yearTitle:re,monthTitle:ie})}else{var oe={yearTitle:r(J)+w,monthTitle:b[i(J)]},ae=e.showSchedule&&1===l?a:o?s:a,le=a&&!o&&(!e.showSchedule||l>1);switch(ae){case"year":oe.title=r(M)+w,l>1&&(oe.title+=" - "+(r(Z)+w));break;case"month":if(l>1&&!o){var ue=b[i(M)],he=r(M)+w,de=this._yearFirst?he+" "+ue:ue+" "+he,pe=b[i(Z)],me=r(Z)+w,ge=this._yearFirst?me+" "+pe:pe+" "+me;oe.title=de+" - "+ge}else p&&(oe.title=r(M)+w);break;case"day":case"week":if(le){var ye=_.search(/d/i)<N?"D MMM, YYYY":"MMM D, YYYY";oe.title=ct(ye,M,e),("week"===ae||l>1)&&(oe.title+=" - "+ct(ye,Z,e))}}this._title.push(oe)}}this._active=m,this._hasPicker=e.hasPicker||p||!h||!o||"md"===t.width&&!1!==e.hasPicker,this._axis=D?"Y":"X",this._rtlNr=!D&&e.rtl?-1:1,this._weeks=f,this._nextIcon=D?e.nextIconV:e.rtl?e.prevIconH:e.nextIconH,this._prevIcon=D?e.prevIconV:e.rtl?e.nextIconH:e.prevIconH,this._mousewheel=e.mousewheel===Q?D:e.mousewheel,this._isGrid=p,this._isVertical=D,this._showOuter=L,this._showDaysTop=D||!!x&&1===d},t.prototype._mounted=function(){this._observer=Cr(this._el,this._onResize,this._zone),this._doc=Lt(this._el),Rt(this._doc,hn,this._onDocClick)},t.prototype._updated=function(){var e=this;if(this._shouldCheckSize?(setTimeout(function(){e._onResize()}),this._shouldCheckSize=!1):this._shouldPageLoad&&(this._pageLoaded(),this._shouldPageLoad=!1),this._shouldFocus&&setTimeout(function(){e._focusActive(),e._shouldFocus=!1}),this.s.instanceService&&this.s.instanceService.onComponentChange.next({}),this._pageChange=!1,this._variableRow&&this.s.showCalendar){var t=this._body.querySelector(".mbsc-calendar-body-inner"),n=t.scrollHeight>t.clientHeight;n!==this.state.hasScrollY&&(this._shouldCheckSize=!0,this.setState({hasScrollY:n}))}},t.prototype._destroy=function(){this._observer&&this._observer.detach(),Dt(this._doc,hn,this._onDocClick),clearTimeout(this._hoverTimer)},t.prototype._getActiveCell=function(){var e=this._view,t=e===or?this._body:this._pickerCont,n=e===nr?"year":e===rr?"month":"cell";return t&&t.querySelector(".mbsc-calendar-"+n+' .mbsc-calendar-cell-text[tabindex="0"]')},t.prototype._focusActive=function(){var e=this._getActiveCell();e&&e.focus()},t.prototype._pageLoaded=function(){var e=this.s.navService;this._hook("onPageLoaded",{activeElm:this._getActiveCell(),firstDay:e.firstPageDay,lastDay:e.lastPageDay,month:"month"===this.s.calendarType?e.firstDay:Q,viewEnd:e.viewEnd,viewStart:e.viewStart})},t.prototype._activeChange=function(e){var t=this._pageIndex+e;(e<0&&this._minIndex<=t||e>0&&this._maxIndex>=t)&&(this._prevAnim=!1,this._pageChange=!0,this._hook("onActiveChange",{date:this._getPageDay(t),dir:e,pageChange:!0}))},t.prototype._activeMonthChange=function(e){var t=this._monthIndex+e;this._minMonthIndex<=t&&this._maxMonthIndex>=t&&(this._prevAnim=!1,this._activeMonth=this._getPageMonth(t),this.forceUpdate())},t.prototype._activeYearsChange=function(e){var t=this._yearsIndex+e;if(this._minYearsIndex<=t&&this._maxYearsIndex>=t){var n=this._getPageYears(t);this._prevAnim=!1,this._activeMonth=+this.s.getDate(n,0,1),this.forceUpdate()}},t.prototype._activeYearChange=function(e){var t=this._yearIndex+e;if(this._minYearIndex<=t&&this._maxYearIndex>=t){var n=this._getPageYear(t);this._prevAnim=!1,this._activeMonth=+this.s.getDate(n,0,1),this.forceUpdate()}},t.prototype._prevDocClick=function(){var e=this;this._prevClick=!0,setTimeout(function(){e._prevClick=!1})},t}(sn),ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.render=function(){var e=this.props.context;return e?(0,i.createPortal)(this.props.children,e):null},t}(r.Component),ti=ei,ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e,t){return function(e,t,n,i){var o,s,a=n._hb,l=n._rtl,c=n._theme,u=e.display,h=((o={})[Xt]=n._onKeyDown,o),d=((s={})[Zt]=n._onAnimationEnd,s);return n._isModal?n._isVisible?(0,r.createElement)(ti,{context:n._ctx},(0,r.createElement)("div",p({className:"mbsc-font mbsc-flex mbsc-popup-wrapper mbsc-popup-wrapper-"+u+c+l+" "+n._className+(e.fullScreen?" mbsc-popup-wrapper-"+u+"-full":"")+(n._touchUi?"":" mbsc-popup-pointer")+(n._round?" mbsc-popup-round":"")+(n._hasContext?" mbsc-popup-wrapper-ctx":"")+(t.isReady?"":" mbsc-popup-hidden"),ref:n._setWrapper},h),e.showOverlay&&(0,r.createElement)("div",{className:"mbsc-popup-overlay mbsc-popup-overlay-"+u+c+(n._isClosing?" mbsc-popup-overlay-out":"")+(n._isOpening&&t.isReady?" mbsc-popup-overlay-in":""),onClick:n._onOverlayClick}),(0,r.createElement)("div",{className:"mbsc-popup-limits mbsc-popup-limits-"+u,ref:n._setLimitator,style:n._limits}),(0,r.createElement)("div",p({className:"mbsc-flex-col mbsc-popup mbsc-popup-"+u+(e.fullScreen?"-full":"")+c+a+(t.bubblePos&&t.showArrow&&"anchored"===u?" mbsc-popup-anchored-"+t.bubblePos:"")+(n._isClosing?" mbsc-popup-"+n._animation+"-out":"")+(n._isOpening&&t.isReady?" mbsc-popup-"+n._animation+"-in":""),role:"dialog","aria-label":e.ariaLabel,"aria-modal":"true",ref:n._setPopup,style:n._style,onClick:n._onPopupClick},d),"anchored"===u&&t.showArrow&&(0,r.createElement)("div",{className:"mbsc-popup-arrow-wrapper mbsc-popup-arrow-wrapper-"+t.bubblePos+c},(0,r.createElement)("div",{className:"mbsc-popup-arrow mbsc-popup-arrow-"+t.bubblePos+c,style:t.arrowPos})),(0,r.createElement)("div",{className:"mbsc-popup-focus",tabIndex:-1,ref:n._setActive}),(0,r.createElement)("div",{className:"mbsc-flex-col mbsc-flex-1-1 mbsc-popup-body mbsc-popup-body-"+u+c+a+(e.fullScreen?" mbsc-popup-body-"+u+"-full":"")+(n._round?" mbsc-popup-body-round":"")},n._headerText&&(0,r.createElement)("div",{className:"mbsc-flex-none mbsc-popup-header mbsc-popup-header-"+u+c+a+(n._buttons?"":" mbsc-popup-header-no-buttons"),dangerouslySetInnerHTML:n._headerText,"v-html":Q}),(0,r.createElement)("div",{className:"mbsc-flex-1-1 mbsc-popup-content"+(e.contentPadding?" mbsc-popup-padding":""),ref:n._setContent},i),n._buttons&&(0,r.createElement)("div",{className:"mbsc-flex-none mbsc-popup-buttons mbsc-popup-buttons-"+u+c+l+a+(n._flexButtons?" mbsc-flex":"")+(e.fullScreen?" mbsc-popup-buttons-"+u+"-full":"")},n._buttons.map(function(t,i){return(0,r.createElement)(jn,{color:t.color,className:"mbsc-popup-button mbsc-popup-button-"+u+l+a+(n._flexButtons?" mbsc-popup-button-flex":"")+" "+(t.cssClass||""),icon:t.icon,disabled:t.disabled,key:i,theme:e.theme,themeVariant:e.themeVariant,variant:t.variant||e.buttonVariant,onClick:t.handler},t.text)})))))):null:(0,r.createElement)(r.Fragment,null,i)}(e,t,this,e.children)},t}(Nr),ri={},ii=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onClick=function(e){if(t._isDrag)e.stopPropagation();else{t._triggerEvent("onClick",e);var n=t.s,r=ri[n.id];r&&n.selected&&r.next({hasFocus:!1})}},t._onRightClick=function(e){t._triggerEvent("onRightClick",e)},t._onDocTouch=function(e){Dt(t._doc,Mn,t._onDocTouch),Dt(t._doc,vn,t._onDocTouch),t._isDrag=!1,t._hook("onDragModeOff",{domEvent:e,event:t.s.event})},t._updateState=function(e){(t.s.showText||t._hasResizeEnd)&&t.setState(e)},t._triggerEvent=function(e,n){t._hook(e,{domEvent:n,label:t.s.event,target:t._el})},t}return d(t,e),t.prototype._mounted=function(){var e,t=this,n=this.s,r=this._el,i=n.id,o=n.isPicker,s=ri[i];s||(s=new g,ri[i]=s),this._unsubscribe=s.subscribe(this._updateState),this._doc=Lt(r),this._unlisten=Fn(r,{keepFocus:!0,onBlur:function(){o||s.next({hasFocus:!1})},onDoubleClick:function(e){e.domEvent.stopPropagation(),t._hook("onDoubleClick",{domEvent:e.domEvent,label:t.s.event,target:r})},onEnd:function(n){if(t._isDrag){var i=t.s,o=p({},n);o.domEvent.preventDefault(),o.event=i.event,i.resize&&e?(o.resize=!0,o.direction=e):i.drag&&(o.drag=!0),t._hook("onDragEnd",o),i.isUpdate||(t._isDrag=!1),r&&o.moved&&r.blur()}clearTimeout(t._touchTimer),e=Q},onFocus:function(){o||s.next({hasFocus:!0})},onHoverIn:function(e){t._isDrag||o||(s.next({hasHover:!0}),t._triggerEvent("onHoverIn",e))},onHoverOut:function(e){s.next({hasHover:!1}),t._triggerEvent("onHoverOut",e)},onKeyDown:function(e){var n=t.s.event;switch(e.keyCode){case zn:case Un:r.click(),e.preventDefault();break;case 8:case 46:n&&!1!==n.editable&&t._hook("onDelete",{domEvent:e,event:n,source:"calendar"})}},onMove:function(n){var r=t.s,i=p({},n);if(i.event=r.event,e)i.resize=!0,i.direction=e;else{if(!r.drag)return;i.drag=!0}r.event&&!1!==r.event.editable&&(t._isDrag?(i.domEvent.preventDefault(),t._hook("onDragMove",i)):(Math.abs(i.deltaX)>7||Math.abs(i.deltaY)>7)&&(clearTimeout(t._touchTimer),i.isTouch||(t._isDrag=!0,t._hook("onDragStart",i))))},onStart:function(n){var r=t.s,i=p({},n),o=i.domEvent.target;if(i.event=r.event,r.resize&&o.classList.contains("mbsc-calendar-label-resize"))e=o.classList.contains("mbsc-calendar-label-resize-start")?"start":"end",i.resize=!0,i.direction=e;else{if(!r.drag)return;i.drag=!0}r.event&&!1!==r.event.editable&&(!t._isDrag&&i.isTouch||i.domEvent.stopPropagation(),t._isDrag?t._hook("onDragStart",i):i.isTouch&&(t._touchTimer=setTimeout(function(){t._hook("onDragModeOn",i),t._hook("onDragStart",i),t._isDrag=!0},350)))}}),this._isDrag&&(Rt(this._doc,Mn,this._onDocTouch),Rt(this._doc,vn,this._onDocTouch))},t.prototype._destroy=function(){if(this._el&&this._el.blur(),this._unsubscribe){var e=this.s.id,t=ri[e];t&&(t.unsubscribe(this._unsubscribe),t.nr||delete ri[e])}this._unlisten&&this._unlisten(),Dt(this._doc,Mn,this._onDocTouch),Dt(this._doc,vn,this._onDocTouch)},t.prototype._render=function(e,t){var n,r,i,o,s,a,l=e.event,c=new Date(e.date),u=e.render||e.renderContent,h=!1;if(this._isDrag=this._isDrag||e.isUpdate,this._content=Q,this._title=e.more||e.count||!e.showEventTooltip?Q:function(e){if(mt&&e){var t=mt.createElement("div");return t.innerHTML=e,t.textContent.trim()}return e||""}(l.tooltip||l.title||l.text),this._tabIndex=e.isActiveMonth&&e.showText&&!e.isPicker?0:-1,l){var d=l.allDay,p=d?Q:e;n=l.start?at(l.start,p):null,r=l.end?at(l.end,p):null;var f=n&&r&&We(e,d,n,r,!e.isExact),m=pt(Qe(c,e),7),g=e.lastDay&&e.lastDay<m?e.lastDay:m;i=!(h=n&&f&&!et(n,f))||n&&et(n,c),o=!h||f&&et(f,c),s=!h||(e.showText?f<g:o),this._hasResizeStart=e.resize&&i,this._hasResizeEnd=e.resize&&s;var y=l.color;if(!y&&l.resource&&e.resourcesMap){var v=e.resourcesMap[oe(l.resource)?l.resource[0]:l.resource];y=v&&v.color}e.showText&&(this._textColor=y?Bt(y):Q),this._color=e.render||e.template?Q:l.textColor&&!y?"transparent":y}if(l&&e.showText&&(u||e.contentTemplate||e.template)){var _=l.allDay||!n||h&&!i&&!o;if(this._data={end:!_&&o&&r?ct(e.timeFormat,r,e):"",id:l.id,isMultiDay:h,original:l,start:!_&&i&&n?ct(e.timeFormat,n,e):"",title:this._title},u){var b=u(this._data);le(b)?a=b:this._content=b}}else a=e.more||e.count||e.showText&&(l.title||l.text)||"";a!==this._text&&(this._text=a,this._html=a?this._safeHtml(a):Q,this._shouldEnhance=a&&l&&e.showText&&!!u),this._cssClass="mbsc-calendar-text"+this._theme+this._rtl+(t.hasFocus&&!e.inactive&&!e.selected||e.selected&&e.showText?" mbsc-calendar-label-active ":"")+(!t.hasHover||e.inactive||this._isDrag?"":" mbsc-calendar-label-hover")+(e.more?" mbsc-calendar-text-more":e.render||e.template?" mbsc-calendar-custom-label":" mbsc-calendar-label")+(e.inactive?" mbsc-calendar-label-inactive":"")+(e.isUpdate?" mbsc-calendar-label-dragging":"")+(e.hidden?" mbsc-calendar-label-hidden":"")+(i?" mbsc-calendar-label-start":"")+(s?" mbsc-calendar-label-end":"")+(s&&h&&o?" mbsc-calendar-label-hide-resize-end":"")+(l&&!1===l.editable?" mbsc-readonly-event":"")+(l&&l.cssClass?" "+l.cssClass:"")},t}(sn),oi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t){var n,i=e.event&&!1!==e.event.editable,o=((n={})[Jt]=t._onRightClick,n);return(0,r.createElement)("div",p({className:"mbsc-calendar-label-wrapper",ref:t._setEl,role:e.showText?"button":Q,style:e.position,tabIndex:t._tabIndex,title:t._title,onClick:t._onClick},o),(0,r.createElement)("div",{className:t._cssClass,"data-id":e.showText&&e.event?e.event.id:null,style:{color:t._color}},t._hasResizeStart&&i&&(0,r.createElement)("div",{className:"mbsc-calendar-label-resize mbsc-calendar-label-resize-start"+t._rtl+(e.isUpdate?" mbsc-calendar-label-resize-start-touch":"")}),t._hasResizeEnd&&i&&(0,r.createElement)("div",{className:"mbsc-calendar-label-resize mbsc-calendar-label-resize-end"+t._rtl+(e.isUpdate?" mbsc-calendar-label-resize-end-touch":"")}),e.showText&&!e.more&&!e.render&&(0,r.createElement)("div",{className:"mbsc-calendar-label-background"+t._theme}),e.showText&&!e.more&&e.render?t._html?(0,r.createElement)("div",{dangerouslySetInnerHTML:t._html},Q):t._content:(0,r.createElement)("div",{className:"mbsc-calendar-label-inner"+t._theme,style:{color:t._textColor}},(0,r.createElement)("div",{"aria-hidden":"true",className:"mbsc-calendar-label-text"+t._theme,dangerouslySetInnerHTML:t._html,style:{color:e.event&&e.event.textColor}},t._content),e.label&&(0,r.createElement)("div",{className:"mbsc-hidden-content"},e.label))))}(e,this)},t}(ii),si=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onClick=function(e){t._cellClick("onDayClick",e)},t._onRightClick=function(e){t._cellClick("onDayRightClick",e)},t._onLabelClick=function(e){t._labelClick("onLabelClick",e)},t._onLabelDoubleClick=function(e){t._labelClick("onLabelDoubleClick",e)},t._onLabelRightClick=function(e){t._labelClick("onLabelRightClick",e)},t._onLabelHoverIn=function(e){t._labelClick("onLabelHoverIn",e)},t._onLabelHoverOut=function(e){t._labelClick("onLabelHoverOut",e)},t._setBtn=function(e){t._btn=e},t}return d(t,e),t.prototype._mounted=function(){var e,t,n,r=this;this._unlistenBtn=Fn(this._btn,{onBlur:function(){r.setState({hasFocus:!1})},onFocus:function(){r.setState({hasFocus:!0})}}),this._unlisten=Fn(this._el,{click:!0,onDoubleClick:function(e){var t=r.s;t.clickToCreate&&"single"!==t.clickToCreate&&t.labels&&!t.disabled&&t.display&&(r._hook("onLabelUpdateStart",e),r._hook("onLabelUpdateEnd",e)),r._cellClick("onDayDoubleClick",e.domEvent)},onEnd:function(i){e&&(i.domEvent.preventDefault(),r._hook("onLabelUpdateEnd",i),e=!1),clearTimeout(n),e=!1,t=!1},onHoverIn:function(e){var t=r.s;t.disabled||r.setState({hasHover:!0}),r._hook("onHoverIn",{date:new Date(t.date),domEvent:e,hidden:!t.display,outer:t.outer,target:r._el})},onHoverOut:function(e){var t=r.s;r.setState({hasHover:!1}),r._hook("onHoverOut",{date:new Date(t.date),domEvent:e,hidden:!t.display,outer:t.outer,target:r._el})},onKeyDown:function(e){switch(e.keyCode){case zn:case Un:e.preventDefault(),r._onClick(e)}},onMove:function(i){e&&r.s.dragToCreate?(i.domEvent.preventDefault(),r._hook("onLabelUpdateMove",i)):t&&r.s.dragToCreate&&(Math.abs(i.deltaX)>7||Math.abs(i.deltaY)>7)?(e=!i.isTouch,r._hook("onLabelUpdateStart",i)):clearTimeout(n)},onStart:function(i){var o=r.s;i.create=!0,o.disabled||!o.dragToCreate&&!o.clickToCreate||!o.labels||e||Yt(i.domEvent.target,".mbsc-calendar-text",r._el)||(i.isTouch&&o.dragToCreate?n=setTimeout(function(){r._hook("onLabelUpdateStart",i),r._hook("onLabelUpdateModeOn",i),e=!0},350):"single"===o.clickToCreate?(r._hook("onLabelUpdateStart",i),e=!0):t=!i.isTouch)}})},t.prototype._render=function(e,t){var n=st(e),r=e.date,i=e.colors,o=e.display,s=e.dragData,a=e.hoverEnd,l=e.hoverStart,c=e.labels,u=e.rangeEnd,h=e.rangeStart,d=new Date(r),p=Ke(d),f=et(n,d),m=c&&c.events,g=i&&i[0],y=g&&g.background,v=g&&g.highlight,_="",b="";this._draggedLabel=s&&s.draggedDates&&s.draggedDates[p],this._draggedLabelOrig=s&&s.originDates&&s.originDates[p],this._todayClass=f?" mbsc-calendar-today":"",this._cellStyles=y&&o?{backgroundColor:y,color:Bt(y)}:Q,this._circleStyles=v?{backgroundColor:v,color:Bt(g.highlight)}:Q,this._ariaLabel="day"===e.type?(f?e.todayText+", ":"")+e.day+", "+e.month+" "+e.text+", "+e.year:"month"===e.type?e.month:"",o&&((h&&r>=h&&r<=(u||h)||u&&r<=u&&r>=(h||u))&&(b=" mbsc-range-day"+(r===(h||u)?" mbsc-range-day-start":"")+(r===(u||h)?" mbsc-range-day-end":"")),l&&a&&r>=l&&r<=a&&(b+=" mbsc-range-hover"+(r===l?" mbsc-range-hover-start mbsc-hover":"")+(r===a?" mbsc-range-hover-end mbsc-hover":""))),e.marks&&e.marks.forEach(function(e){_+=e.cellCssClass?" "+e.cellCssClass:""}),i&&i.forEach(function(e){_+=e.cellCssClass?" "+e.cellCssClass:""}),m&&m.forEach(function(e){_+=e.cellCssClass?" "+e.cellCssClass:""}),this._cssClass="mbsc-calendar-cell mbsc-flex-1-0-0 mbsc-calendar-"+e.type+this._theme+this._rtl+this._hb+_+(c?" mbsc-calendar-day-labels":"")+(i?" mbsc-calendar-day-colors":"")+(e.outer?" mbsc-calendar-day-outer":"")+(e.hasMarks?" mbsc-calendar-day-marked":"")+(e.disabled?" mbsc-disabled":"")+(o?"":" mbsc-calendar-day-empty")+(e.selected?" mbsc-selected":"")+(t.hasFocus?" mbsc-focus":"")+(!t.hasHover||r!==l&&r!==a&&(l||a)?"":" mbsc-hover")+(this._draggedLabel?" mbsc-calendar-day-highlight":"")+b,this._data={date:d,events:e.events||[],selected:e.selected}},t.prototype._destroy=function(){this._unlistenBtn&&this._unlistenBtn(),this._unlisten&&this._unlisten()},t.prototype._cellClick=function(e,t){var n=this.s;n.display&&this._hook(e,{date:new Date(n.date),disabled:n.disabled,domEvent:t,outer:n.outer,selected:n.selected,source:"calendar",target:this._el})},t.prototype._labelClick=function(e,t){var n=this.s;t.date=new Date(n.date),t.labels=n.labels.events,this._hook(e,t)},t}(sn),ai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t){var n,i,o=t._draggedLabel,s=t._draggedLabelOrig,a=t._theme,l=((n={})[Jt]=t._onRightClick,n),c=function(n,i,o){return(0,r.createElement)(oi,{key:n.id,amText:e.amText,count:n.count?n.count+" "+(n.count>1?e.eventsText:e.eventText):Q,date:e.date,dataTimezone:e.dataTimezone,displayTimezone:e.displayTimezone,drag:e.dragToMove,resize:mr(n.event&&n.event.resize,e.dragToResize),event:n.event,exclusiveEndDates:e.exclusiveEndDates,firstDay:e.firstDay,hidden:i,id:n.id,inactive:!o&&n.event&&e.dragData&&e.dragData.draggedEvent&&n.event.id===e.dragData.draggedEvent.id,isActiveMonth:e.isActiveMonth,isExact:n.isExact,isPicker:e.isPicker,isUpdate:o,label:n.label,lastDay:n.lastDay,more:n.more,position:n.position,pmText:e.pmText,resourcesMap:e.resourcesMap,rtl:e.rtl,selected:n.event&&e.selectedEventsMap&&!(!e.selectedEventsMap[n.id]&&!e.selectedEventsMap[n.event.id]),showEventTooltip:e.showEventTooltip,showText:n.showText||!!n.count||!!n.more||o,theme:e.theme,timeFormat:e.timeFormat,timezonePlugin:e.timezonePlugin,render:e.renderLabel,renderContent:e.renderLabelContent,onClick:t._onLabelClick,onDoubleClick:t._onLabelDoubleClick,onRightClick:t._onLabelRightClick,onHoverIn:t._onLabelHoverIn,onHoverOut:t._onLabelHoverOut,onDelete:e.onLabelDelete,onDragStart:e.onLabelUpdateStart,onDragMove:e.onLabelUpdateMove,onDragEnd:e.onLabelUpdateEnd,onDragModeOn:e.onLabelUpdateModeOn,onDragModeOff:e.onLabelUpdateModeOff})};return e.renderDay&&(i=e.renderDay(t._data)),e.renderDayContent&&(i=e.renderDayContent(t._data)),le(i)&&(i=(0,r.createElement)("div",{dangerouslySetInnerHTML:t._safeHtml(i)}),t._shouldEnhance=!0),(0,r.createElement)("div",p({ref:t._setEl,className:t._cssClass,onClick:t._onClick,style:t._cellStyles},l),(0,r.createElement)("div",{className:"mbsc-calendar-cell-inner mbsc-calendar-"+e.type+"-inner"+a+("day"===e.type?"":t._hb)+(e.display?"":" mbsc-calendar-day-hidden")},e.renderDay?i:(0,r.createElement)(r.Fragment,null,1===e.text&&(0,r.createElement)("div",{"aria-hidden":"true",className:"mbsc-calendar-month-name"+a+t._rtl},e.monthShort),(0,r.createElement)("div",{"aria-describedby":e.isActiveMonth?"mbsc-calendar-day-desc-"+e.date:Q,"aria-disabled":e.disabled?"true":Q,"aria-label":t._ariaLabel,"aria-pressed":e.selected,className:"mbsc-calendar-cell-text mbsc-calendar-"+e.type+"-text"+a+t._todayClass,role:"button",ref:t._setBtn,style:t._circleStyles,tabIndex:e.disabled?Q:e.active?0:-1},e.text),e.marks&&(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"mbsc-calendar-marks"+a+t._rtl},e.marks.map(function(e,t){return(0,r.createElement)("div",{className:"mbsc-calendar-mark "+(e.markCssClass||"")+a,key:t,style:{background:e.color}})}))),e.renderDayContent&&i),e.labels&&(0,r.createElement)("div",null,s&&s.event&&(0,r.createElement)("div",{className:"mbsc-calendar-labels mbsc-calendar-labels-dragging"},c(s,!!e.dragData.draggedDates,!0)),o&&o.event&&(0,r.createElement)("div",{className:"mbsc-calendar-labels mbsc-calendar-labels-dragging"},c(o,!1,!0)),(0,r.createElement)("div",{id:e.isActiveMonth?"mbsc-calendar-day-desc-"+e.date:Q,className:"mbsc-calendar-labels"},e.labels.data.map(function(e,t){return(0,r.createElement)("div",{key:t,className:"mbsc-calendar-labels-row"},!e.length&&(0,r.createElement)("div",{className:"mbsc-calendar-text mbsc-calendar-text-placeholder"}),e.map(function(e){return c(e)}))})),(0,r.createElement)("div",{className:"mbsc-calendar-text mbsc-calendar-text-placeholder"}))))}(e,this)},t}(si),li=function(e){var t=e.firstDay,n=e.hidden,i=e.rtl,o=e.theme,s=e.dayNamesShort,a=e.showWeekNumbers,l=e.hasScroll;return(0,r.createElement)("div",{"aria-hidden":"true",className:"mbsc-calendar-week-days mbsc-flex"+(n?" mbsc-hidden":"")},a&&(0,r.createElement)("div",{className:"mbsc-calendar-week-day mbsc-flex-none mbsc-calendar-week-nr"+o+i}),ne.map(function(e,n){return(0,r.createElement)("div",{className:"mbsc-calendar-week-day mbsc-flex-1-0-0"+o+i,key:n},s[(n+t)%7])}),l&&(0,r.createElement)("div",{className:"mbsc-schedule-fake-scroll-y"}))},ci=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t){var n=e.showWeekNumbers,i=e.showWeekDays?(0,r.createElement)(li,{dayNamesShort:e.dayNamesShort,firstDay:e.firstDay,rtl:t._rtl,showWeekNumbers:n,theme:t._theme}):null;return(0,r.createElement)("div",{"aria-hidden":e.isActive?Q:"true",className:"mbsc-calendar-table mbsc-flex-col mbsc-flex-1-1"+(e.isActive?" mbsc-calendar-table-active":"")},i,t._rows.map(function(i,o){var s=n?t._getWeekNr(e,i[0].date):"";return(0,r.createElement)("div",{className:"mbsc-calendar-row mbsc-flex mbsc-flex-1-0",key:o,style:{minHeight:t._rowHeights[o]+"px"}},n&&(0,r.createElement)("div",{className:"mbsc-calendar-cell mbsc-flex-none mbsc-calendar-day mbsc-calendar-week-nr"+t._theme},(0,r.createElement)("div",{"aria-hidden":"true"},s),(0,r.createElement)("div",{className:"mbsc-hidden-content"},e.weekText.replace("{count}",s))),i.map(function(n,i){return(0,r.createElement)(ai,{active:n.display&&t._isActive(n.date),amText:e.amText,clickToCreate:e.clickToCreate,colors:n.colors,date:n.date,day:n.day,disabled:t._isInvalid(n.date),display:n.display,dataTimezone:e.dataTimezone,displayTimezone:e.displayTimezone,dragData:e.dragData,dragToCreate:e.dragToCreate,dragToResize:e.dragToResize,dragToMove:e.dragToMove,eventText:e.eventText,events:n.events,eventsText:e.eventsText,exclusiveEndDates:e.exclusiveEndDates,firstDay:e.firstDay,hasMarks:e.hasMarks,hoverEnd:e.hoverEnd,hoverStart:e.hoverStart,isActiveMonth:e.isActive,isPicker:e.isPicker,key:n.date,labels:n.labels,pmText:e.pmText,marks:n.marks,month:n.month,monthShort:n.monthShort,onDayClick:e.onDayClick,onDayDoubleClick:e.onDayDoubleClick,onDayRightClick:e.onDayRightClick,onLabelClick:e.onLabelClick,onLabelDoubleClick:e.onLabelDoubleClick,onLabelRightClick:e.onLabelRightClick,onLabelHoverIn:e.onLabelHoverIn,onLabelHoverOut:e.onLabelHoverOut,onLabelDelete:e.onLabelDelete,onLabelUpdateStart:e.onLabelUpdateStart,onLabelUpdateMove:e.onLabelUpdateMove,onLabelUpdateEnd:e.onLabelUpdateEnd,onLabelUpdateModeOn:e.onLabelUpdateModeOn,onLabelUpdateModeOff:e.onLabelUpdateModeOff,outer:n.outer,renderDay:e.renderDay,renderDayContent:e.renderDayContent,renderLabel:e.renderLabel,renderLabelContent:e.renderLabelContent,rangeEnd:e.rangeEnd,rangeStart:e.rangeStart,resourcesMap:e.resourcesMap,selectedEventsMap:e.selectedEventsMap,rtl:e.rtl,showEventTooltip:e.showEventTooltip,selected:t._isSelected(n.date),text:n.text,theme:e.theme,timeFormat:e.timeFormat,timezonePlugin:e.timezonePlugin,todayText:e.todayText,type:"day",year:n.year,onHoverIn:e.onDayHoverIn,onHoverOut:e.onDayHoverOut})}))}))}(e,this)},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._isActive=function(e){return this.s.isActive&&e===this.s.activeDate},t.prototype._isInvalid=function(e){var t=this.s;return Br(t,it(t,new Date(e)),t.invalid,t.valid,+t.min,+t.max)},t.prototype._isSelected=function(e){var t=new Date(e),n=it(this.s,t);return!!this.s.selectedDates[+n]},t.prototype._getWeekNr=function(e,t){var n=new Date(t);return""+e.getWeekNumber(e.getDate(n.getFullYear(),n.getMonth(),n.getDate()+(7-e.firstDay+1)%7))},t.prototype._render=function(e){var t=e.weeks||6,n=e.firstDay,r=new Date(e.firstPageDay),i=e.getYear(r),o=e.getMonth(r),s=e.getDay(r),a=e.getDate(i,o,s).getDay(),l=n-a>0?7:0,c=[],u=0;this._rowHeights=[],this._rows=[],this._days=ne;for(var h=0;h<7*t;h++){var d=e.getDate(i,o,h+n-l-a+s),p=Ke(d),f=e.getMonth(d),m=f!==o&&"week"!==e.calendarType,g=e.marked&&e.marked[p],y=g?e.showSingleMark?[{}]:g:null,v=e.labels&&e.labels[p],_=v?v.data.length:0,b=h%7==0;if(e.variableRow){if(b&&m&&h)break;_>u&&(u=_),h%7==6&&(this._rowHeights.push(u*(e.labelHeight||20)+(e.cellTextHeight||0)+3),u=0)}b&&(c=[],this._rows.push(c)),c.push({colors:e.colors&&e.colors[p],date:+d,day:e.dayNames[d.getDay()],display:!m||e.showOuter,events:e.events&&e.events[p],labels:v,marks:y,month:e.monthNames[f],monthShort:e.monthNamesShort[f],outer:m,text:e.getDay(d),year:e.getYear(d)})}},t}(sn));function ui(e,t,n,r){var i;if(!(t<n||t>r)){if(oe(e)){var o=e.length,s=t%o;i=e[s>=0?s:s+o]}else i=e(t);return i}}var hi=function(e){function t(){var t,n,r=null!==e&&e.apply(this,arguments)||this;return r._currPos=0,r._delta=0,r._endPos=0,r._lastRaf=0,r._maxSnapScroll=0,r._margin=0,r._scrollEnd=(t=function(){Tt(r._raf),r._raf=!1,r._onEnd(),r._hasScrolled=!1},function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];clearTimeout(n),n=setTimeout(function(){t.apply(void 0,e)},200)}),r._setInnerEl=function(e){r._innerEl=e},r._setScrollEl=function(e){r._scrollEl=e},r._setScrollEl3d=function(e){r._scrollEl3d=e},r._setScrollbarEl=function(e){r._scrollbarEl=e},r._setScrollbarContEl=function(e){r._scrollbarContEl=e},r._onStart=function(e){var t=r.s;r._hook("onStart",{}),t.changeOnEnd&&r._isScrolling||!t.mouseSwipe&&!e.isTouch||!t.swipe||(r._started=!0,r._hasScrolled=r._isScrolling,r._currX=e.startX,r._currY=e.startY,r._delta=0,r._velocityX=0,r._velocityY=0,r._startPos=jt(r._scrollEl,r._isVertical),r._timestamp=+new Date,r._isScrolling&&(Tt(r._raf),r._raf=!1,r._scroll(r._startPos)))},r._onMove=function(e){var t=e.domEvent,n=r.s;r._isVertical||n.scrollLock||r._hasScrolled?t.cancelable&&t.preventDefault():t.type===An&&(Math.abs(e.deltaY)>7||!n.swipe)&&(r._started=!1),r._started&&(r._delta=r._isVertical?e.deltaY:e.deltaX,(r._hasScrolled||Math.abs(r._delta)>r._threshold)&&(r._hasScrolled||r._hook("onGestureStart",{}),r._hasScrolled=!0,r._isScrolling=!0,r._raf||(r._raf=Et(function(){return r._move(e)}))))},r._onEnd=function(){if(r._started=!1,r._hasScrolled){var e,t=r.s,n=17*(r._isVertical?r._velocityY:r._velocityX),i=r._maxSnapScroll,o=r._delta;o+=n*n*.5*(n<0?-1:1),i&&(o=re(o,-r._round*i,r._round*i));var s=re(ye((r._startPos+o)/r._round)*r._round,r._min,r._max),a=ye(-s*r._rtlNr/t.itemSize)+r._offset,l=o>0?r._isVertical?270:360:r._isVertical?90:180,c=a-t.selectedIndex;e=t.time||Math.max(1e3,3*Math.abs(s-r._currPos)),r._hook("onGestureEnd",{direction:l,index:a}),r._delta=0,r._scroll(s,e),c&&!t.changeOnEnd&&(r._hook("onIndexChange",{index:a,diff:c}),t.selectedIndex===r._prevIndex&&t.selectedIndex!==a&&r.forceUpdate())}},r._onClick=function(e){r._hasScrolled&&(r._hasScrolled=!1,e.stopPropagation(),e.preventDefault())},r._onScroll=function(e){e.target.scrollTop=0,e.target.scrollLeft=0},r._onMouseWheel=function(e){var t=r._isVertical?e.deltaY===Q?e.wheelDelta||e.detail:e.deltaY:e.deltaX;if(t&&r.s.mousewheel){if(e.preventDefault(),r._hook("onStart",{}),r._started||(r._delta=0,r._velocityX=0,r._velocityY=0,r._startPos=r._currPos,r._hook("onGestureStart",{})),e.deltaMode&&1===e.deltaMode&&(t*=15),t=re(-t,-r._scrollSnap,r._scrollSnap),r._delta+=t,r._maxSnapScroll&&Math.abs(r._delta)>r._round*r._maxSnapScroll&&(t=0),r._startPos+r._delta<r._min&&(r._startPos=r._min,r._delta=0,t=0),r._startPos+r._delta>r._max&&(r._startPos=r._max,r._delta=0,t=0),r._raf||(r._raf=Et(function(){return r._move()})),!t&&r._started)return;r._hasScrolled=!0,r._isScrolling=!0,r._started=!0,r._scrollEnd()}},r._onTrackStart=function(e){e.stopPropagation();var t={domEvent:e,startX:On(e,"X",!0),startY:On(e,"Y",!0)};if(r._onStart(t),r._trackStartX=t.startX,r._trackStartY=t.startY,e.target===r._scrollbarEl)Rt(r._doc,bn,r._onTrackEnd),Rt(r._doc,_n,r._onTrackMove);else{var n=Ht(r._scrollbarContEl).top,i=(t.startY-n)/r._barContSize;r._startPos=r._currPos=r._max+(r._min-r._max)*i,r._hasScrolled=!0,r._onEnd()}},r._onTrackMove=function(e){var t=r._barContSize,n=On(e,"X",!0),i=On(e,"Y",!0),o=(r._isVertical?i-r._trackStartY:n-r._trackStartX)/t;r._isInfinite?r._delta=-(r._maxSnapScroll*r._round*2+t)*o:r._delta=(r._min-r._max-t)*o,(r._hasScrolled||Math.abs(r._delta)>r._threshold)&&(r._hasScrolled||r._hook("onGestureStart",{}),r._hasScrolled=!0,r._isScrolling=!0,r._raf||(r._raf=Et(function(){return r._move({endX:n,endY:i},!r._isInfinite)})))},r._onTrackEnd=function(){r._delta=0,r._startPos=r._currPos,r._onEnd(),Dt(r._doc,bn,r._onTrackEnd),Dt(r._doc,_n,r._onTrackMove)},r._onTrackClick=function(e){e.stopPropagation()},r}return d(t,e),t.prototype._render=function(e,t){var n=this._prevS,r=e.batchSize,i=e.batchSize3d,o=e.itemNr||1,s=e.itemSize,a=e.selectedIndex,l=n.selectedIndex,c=t.index===Q?a:t.index,u=[],h=[],d=a-l,p=c-this._currIndex,f=e.minIndex,m=e.maxIndex,g=e.items,y=e.offset;this._currIndex=c,this._isVertical="Y"===e.axis,this._threshold=this._isVertical?e.thresholdY:e.thresholdX,this._rtlNr=!this._isVertical&&e.rtl?-1:1,this._round=e.snap?s:1;for(var v=this._round;v>44;)v/=2;if(this._scrollSnap=ye(44/v)*v,g){for(var _=c-r;_<c+o+r;_++)u.push({key:_,data:ui(g,_,f,m)});if(e.scroll3d)for(_=c-i;_<c+o+i;_++)h.push({key:_,data:ui(g,_,f,m)});this.visibleItems=u,this.visible3dItems=h,this._maxSnapScroll=r,this._isInfinite="function"==typeof g}this._offset===Q&&(this._offset=a);var b=-(a-this._offset)*s*this._rtlNr;if(Math.abs(d)>r&&b!==this._endPos){var w=d+r*(d>0?-1:1);this._offset+=w,this._margin-=w}if(y&&y!==n.offset&&(this._offset+=y,this._margin-=y),p&&(this._margin+=p),this._max=f!==Q?-(f-this._offset)*s*this._rtlNr:1/0,this._min=m!==Q?-(m-this._offset-(e.spaceAround?0:o-1))*s*this._rtlNr:-1/0,-1===this._rtlNr){var x=this._min;this._min=this._max,this._max=x}this._min>this._max&&(this._min=this._max);var S=e.visibleSize*s;this._barContSize=S,this._barSize=Math.max(20,S*S/(this._max-this._min+S)),this._cssClass=this._className+" mbsc-ltr"},t.prototype._mounted=function(){var e=this._el,t=this._scrollbarContEl;this._doc=Lt(e),Rt(this.s.scroll3d?this._innerEl:e,Tn,this._onScroll),Rt(e,hn,this._onClick,!0),Rt(e,Sn,this._onMouseWheel,{passive:!1}),Rt(e,In,this._onMouseWheel,{passive:!1}),Rt(t,vn,this._onTrackStart),Rt(t,hn,this._onTrackClick),this._unlisten=Fn(e,{onEnd:this._onEnd,onHoverIn:function(){t.classList.add("mbsc-scroller-bar-hover")},onHoverOut:function(){t.classList.remove("mbsc-scroller-bar-hover")},onMove:this._onMove,onStart:this._onStart,prevDef:!0})},t.prototype._updated=function(){var e=this.s,t=e.batchSize,n=e.itemSize,r=e.selectedIndex,i=this._prevIndex,o=!e.prevAnim&&(i!==Q&&i!==r||this._isAnimating),s=-(r-this._offset)*n*this._rtlNr;e.margin&&(this._scrollEl.style.marginTop=this._isVertical?(this._margin-t)*n+"px":""),this._started||this._scroll(s,o?this._isAnimating||e.time||1e3:0),this._prevIndex=r},t.prototype._destroy=function(){Dt(this.s.scroll3d?this._innerEl:this._el,Tn,this._onScroll),Dt(this._el,hn,this._onClick,!0),Dt(this._el,Sn,this._onMouseWheel,{passive:!1}),Dt(this._el,In,this._onMouseWheel,{passive:!1}),Dt(this._scrollbarContEl,vn,this._onTrackStart),Dt(this._scrollbarContEl,hn,this._onTrackClick),Tt(this._raf),this._raf=!1,this._scroll(0),this._unlisten()},t.prototype._anim=function(e){var t=this;return this._raf=Et(function(){var n=t.s,r=+new Date;if(t._raf){if((t._currPos-t._endPos)*-e<4)return t._currPos=t._endPos,t._raf=!1,t._isAnimating=0,t._isScrolling=!1,t._infinite(t._currPos),t._hook("onAnimationEnd",{}),void t._scrollbarContEl.classList.remove("mbsc-scroller-bar-started");r-t._lastRaf>100&&(t._lastRaf=r,t._currPos=jt(t._scrollEl,t._isVertical),n.changeOnEnd||t._infinite(t._currPos)),t._raf=t._anim(e)}})},t.prototype._infinite=function(e){var t=this.s;if(t.itemSize){var n=ye(-e*this._rtlNr/t.itemSize)+this._offset,r=n-this._currIndex;r&&(t.changeOnEnd?this._hook("onIndexChange",{index:n,diff:r}):this.setState({index:n}))}},t.prototype._scroll=function(e,t){var n=this.s,r=n.itemSize,i=this._isVertical,o=this._scrollEl.style,s=It?It+"T":"t",a=t?Pt+"transform "+ye(t)+"ms "+n.easing:"";if(o[s+"ransform"]="translate3d("+(i?"0,"+e+"px,":e+"px,0,")+"0)",o[s+"ransition"]=a,this._endPos=e,n.scroll3d){var l=this._scrollEl3d.style,c=360/(2*n.batchSize3d);l[s+"ransform"]="translateY(-50%) rotateX("+-e/r*c+"deg)",l[s+"ransition"]=a}if(this._scrollbarEl){var u=this._scrollbarEl.style,h=this._isInfinite?(this._maxSnapScroll*this._round-this._delta)/(this._maxSnapScroll*this._round*2):(e-this._max)/(this._min-this._max),d=re((this._barContSize-this._barSize)*h,0,this._barContSize-this._barSize);u[s+"ransform"]="translate3d("+(i?"0,"+d+"px,":d+"px,0,")+"0)",u[s+"ransition"]=a}t?(Tt(this._raf),this._isAnimating=t,this._scrollbarContEl.classList.add("mbsc-scroller-bar-started"),this._raf=this._anim(e>this._currPos?1:-1)):(this._currPos=e,n.changeOnEnd||this._infinite(e))},t.prototype._move=function(e,t){var n=this._currX,r=this._currY,i=this._timestamp,o=this._maxSnapScroll;if(e){this._currX=e.endX,this._currY=e.endY,this._timestamp=+new Date;var s=this._timestamp-i;if(s>0&&s<100){var a=(this._currX-n)/s,l=(this._currY-r)/s;this._velocityX=.7*a+.3*this._velocityX,this._velocityY=.7*l+.3*this._velocityY}}o&&!t&&(this._delta=re(this._delta,-this._round*o,this._round*o)),this._scroll(re(this._startPos+this._delta,this._min-this.s.itemSize,this._max+this.s.itemSize)),this._raf=!1},t.defaults={axis:"Y",batchSize:40,easing:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",mouseSwipe:!0,mousewheel:!0,prevDef:!0,selectedIndex:0,spaceAround:!0,stopProp:!0,swipe:!0,thresholdX:10,thresholdY:5},t}(sn),di=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t,n){var i;return e.itemRenderer&&(n=t.visibleItems.map(function(n){return e.itemRenderer(n,t._offset)}),e.scroll3d&&(i=t.visible3dItems.map(function(n){return e.itemRenderer(n,t._offset,!0)}))),(0,r.createElement)("div",{ref:t._setEl,className:t._cssClass,style:e.styles},(0,r.createElement)("div",{ref:t._setInnerEl,className:e.innerClass,style:e.innerStyles},(0,r.createElement)("div",{ref:t._setScrollEl,className:"mbsc-scrollview-scroll"+t._rtl},n)),e.scroll3d&&(0,r.createElement)("div",{ref:t._setScrollEl3d,style:{height:e.itemSize+"px"},className:"mbsc-scroller-items-3d"},i),(0,r.createElement)("div",{ref:t._setScrollbarContEl,className:"mbsc-scroller-bar-cont "+t._rtl+(e.scrollBar&&t._barSize!==t._barContSize?"":" mbsc-scroller-bar-hidden")+(t._started?" mbsc-scroller-bar-started":"")},(0,r.createElement)("div",{className:"mbsc-scroller-bar"+t._theme,ref:t._setScrollbarEl,style:{height:t._barSize+"px"}})))}(e,this,e.children)},t}(hi),pi=0,fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e,t){return function(e,t,n,i){var o,s;pi++;var a=n._variableRow,l=n._view!==or,c=((o={})[Zt]=n._onViewAnimationEnd,o),u=((s={})[Xt]=n._onKeyDown,s),h=function(i,o){return(0,r.createElement)(ci,p({},o,{activeDate:n._active,amText:e.amText,calendarType:e.calendarType,cellTextHeight:t.cellTextHeight,clickToCreate:e.clickToCreate,colors:n._colors,dayNames:e.dayNames,dayNamesShort:n._dayNames,dataTimezone:e.dataTimezone,displayTimezone:e.displayTimezone,eventText:e.eventText,events:e.eventMap,eventsText:e.eventsText,exclusiveEndDates:e.exclusiveEndDates,firstDay:e.firstDay,firstPageDay:i,getDate:e.getDate,getDay:e.getDay,getMonth:e.getMonth,getWeekNumber:e.getWeekNumber,getYear:e.getYear,hasMarks:!!n._marked,hoverEnd:e.hoverEnd,hoverStart:e.hoverStart,isPicker:e.isPicker,invalid:n._invalid,labels:n._labelsLayout,labelHeight:t.labelHeight,marked:n._marked,max:n._maxDate,min:n._minDate,monthNames:e.monthNames,monthNamesShort:e.monthNamesShort,onDayClick:n._onDayClick,onDayDoubleClick:e.onDayDoubleClick,onDayRightClick:e.onDayRightClick,onDayHoverIn:n._onDayHoverIn,onDayHoverOut:n._onDayHoverOut,onLabelClick:n._onLabelClick,onLabelDoubleClick:e.onLabelDoubleClick,onLabelRightClick:e.onLabelRightClick,onLabelHoverIn:e.onLabelHoverIn,onLabelHoverOut:e.onLabelHoverOut,onLabelDelete:e.onLabelDelete,pmText:e.pmText,rangeEnd:e.rangeEnd,rangeStart:e.rangeStart,resourcesMap:e.resourcesMap,rtl:e.rtl,selectedDates:e.selectedDates,selectedEventsMap:e.selectedEventsMap,showEventTooltip:e.showEventTooltip,showOuter:n._showOuter,showWeekDays:!n._showDaysTop,showWeekNumbers:e.showWeekNumbers,showSingleMark:!!e.marksMap,todayText:e.todayText,theme:e.theme,timeFormat:e.timeFormat,timezonePlugin:e.timezonePlugin,valid:n._valid,weeks:n._weeks,weekText:e.weekText,renderDay:e.renderDay,renderDayContent:e.renderDayContent,renderLabel:e.renderLabel,renderLabelContent:e.renderLabelContent,variableRow:n._variableRow}))},d=n._showDaysTop&&e.showCalendar?(0,r.createElement)(li,{dayNamesShort:n._dayNames,rtl:n._rtl,theme:n._theme,firstDay:e.firstDay,hasScroll:t.hasScrollY,hidden:n._view!==or&&!n._hasPicker,showWeekNumbers:e.showWeekNumbers}):null,f={axis:n._axis,batchSize:1,changeOnEnd:!0,className:"mbsc-calendar-scroll-wrapper"+n._theme,data:pi,easing:"ease-out",itemSize:t.pickerSize,items:n._months,mousewheel:n._mousewheel,prevAnim:n._prevAnim,rtl:e.rtl,snap:!0,time:200},m=(0,r.createElement)("div",{ref:n._setPickerCont,className:n._hasPicker?"mbsc-calendar-picker-wrapper":""},(t.view===nr||t.viewClosing===nr||e.selectView===nr)&&(0,r.createElement)("div",p({className:n._getPickerClass(nr)},c),(0,r.createElement)(di,p({key:"years",itemRenderer:function(t,i){var o=t.key,s=n._getPageYears(o),a=e.getYear(new Date(n._active)),l=e.getYear(new Date(n._activeMonth));return(0,r.createElement)("div",{"aria-hidden":n._yearsIndex===o?Q:"true",className:"mbsc-calendar-picker-slide mbsc-calendar-slide"+n._theme+n._rtl,key:o,style:n._getPageStyle(o,i,n._yearsIndex)},(0,r.createElement)("div",{className:"mbsc-calendar-table mbsc-flex-col"},te.map(function(t,i){return(0,r.createElement)("div",{className:"mbsc-calendar-row mbsc-flex mbsc-flex-1-0",key:i},ee.map(function(t,o){var c=s+3*i+o,u=+e.getDate(c,0,1);return(0,r.createElement)(ai,{active:c===l,date:u,display:!0,selected:c===a,disabled:c<n._minYears||c>n._maxYears,rtl:e.rtl,text:c+e.yearSuffix,theme:e.theme,type:"year",onDayClick:n._onYearClick,key:c})}))})))},maxIndex:n._maxYearsIndex,minIndex:n._minYearsIndex,onGestureEnd:n._onGestureEnd,onIndexChange:n._onYearsPageChange,selectedIndex:n._yearsIndex},f))),(t.view===rr||t.viewClosing===rr||e.selectView===rr)&&(0,r.createElement)("div",p({className:n._getPickerClass(rr)},c),(0,r.createElement)(di,p({key:"year",itemRenderer:function(t,i){var o=t.key,s=n._getPageYear(o),a=new Date(n._activeMonth),l=e.getYear(a),c=e.getMonth(a),u=new Date(n._active),h=e.getYear(u),d=e.getMonth(u);return(0,r.createElement)("div",{"aria-hidden":n._yearIndex===o?Q:"true",className:"mbsc-calendar-picker-slide mbsc-calendar-slide"+n._theme+n._rtl,key:o,style:n._getPageStyle(o,i,n._yearIndex)},(0,r.createElement)("div",{className:"mbsc-calendar-table mbsc-flex-col"},te.map(function(t,i){return(0,r.createElement)("div",{className:"mbsc-calendar-row mbsc-flex mbsc-flex-1-0",key:i},ee.map(function(t,o){var a=e.getDate(s,3*i+o,1),u=e.getYear(a),p=e.getMonth(a);return(0,r.createElement)(ai,{active:u===l&&p===c,date:+a,display:!0,selected:u===h&&p===d,disabled:a<n._minYear||a>=n._maxYear,month:e.monthNames[p],rtl:e.rtl,text:e.monthNamesShort[p],theme:e.theme,type:"month",onDayClick:n._onMonthClick,key:+a})}))})))},maxIndex:n._maxYearIndex,minIndex:n._minYearIndex,onGestureEnd:n._onGestureEnd,onIndexChange:n._onYearPageChange,selectedIndex:n._yearIndex},f))),n._hasPicker&&(t.view===ir||t.viewClosing===ir)&&(0,r.createElement)("div",p({className:n._getPickerClass(ir)},c),(0,r.createElement)(di,p({key:"month",itemRenderer:function(t,i){var o=t.key;return(0,r.createElement)("div",{className:"mbsc-calendar-picker-slide mbsc-calendar-slide"+n._theme+n._rtl,key:o,style:n._getPageStyle(o,i,1)},(0,r.createElement)(ci,{activeDate:n._activeMonth,dataTimezone:e.dataTimezone,dayNames:e.dayNames,dayNamesShort:e.dayNamesMin,displayTimezone:e.displayTimezone,firstDay:e.firstDay,firstPageDay:n._getPageMonth(o),getDate:e.getDate,getDay:e.getDay,getMonth:e.getMonth,getYear:e.getYear,isActive:o>=n._monthIndex&&o<n._monthIndex+1,max:n._maxDate,min:n._minDate,monthNames:e.monthNames,monthNamesShort:e.monthNamesShort,onDayClick:n._onNavDayClick,rtl:e.rtl,selectedDates:e.selectedDates,showOuter:!0,showWeekDays:!n._showDaysTop,theme:e.theme,timezonePlugin:e.timezonePlugin,todayText:e.todayText}))},maxIndex:n._maxMonthIndex,minIndex:n._minMonthIndex,onGestureEnd:n._onGestureEnd,onIndexChange:n._onMonthPageChange,selectedIndex:n._monthIndex},f))));return(0,r.createElement)("div",{className:n._cssClass,ref:n._setEl,style:n._dim,onClick:me},(0,r.createElement)("div",{className:"mbsc-calendar-wrapper mbsc-flex-col"+n._theme+n._hb+(e.hasContent||!e.showCalendar?" mbsc-calendar-wrapper-fixed mbsc-flex-none":" mbsc-flex-1-1")},(0,r.createElement)("div",{className:"mbsc-calendar-header"+n._theme+n._hb+(n._showDaysTop?" mbsc-calendar-header-vertical":""),ref:n._setHeader},e.showControls&&function(){var t,i;if(e.renderHeader)le(t=e.renderHeader())&&(t!==n._headerHTML&&(n._headerHTML=t,n._shouldEnhanceHeader=!0),i=n._safeHtml(t));else{var o=n._pageNr>1;t=(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Tr,{className:"mbsc-flex mbsc-flex-1-1 mbsc-calendar-title-wrapper"}),(0,r.createElement)(xr,{className:"mbsc-calendar-button-prev"+(o?" mbsc-calendar-button-prev-multi":"")}),e.showToday&&(0,r.createElement)(Er,{className:"mbsc-calendar-header-today"}),(0,r.createElement)(Sr,{className:"mbsc-calendar-button-next"+(o?" mbsc-calendar-button-next-multi":"")}))}var s=(0,r.createElement)("div",{className:"mbsc-calendar-controls mbsc-flex"+n._theme,dangerouslySetInnerHTML:i},t);return(0,r.createElement)(gr.Provider,{children:s,value:{instance:n}})}(),d),(0,r.createElement)("div",p({className:"mbsc-calendar-body mbsc-flex-col mbsc-flex-1-1"+n._theme,ref:n._setBody},u),e.showCalendar&&(0,r.createElement)("div",{className:"mbsc-calendar-body-inner mbsc-flex-col mbsc-flex-1-1"+(a?" mbsc-calendar-body-inner-variable":"")},n._isGrid?(0,r.createElement)("div",{"aria-hidden":l?"true":Q,className:"mbsc-calendar-grid mbsc-flex-1-1 mbsc-flex-col"+n._theme+n._hb},n._monthsMulti.map(function(t,i){return(0,r.createElement)("div",{key:i,className:"mbsc-calendar-grid-row mbsc-flex mbsc-flex-1-1"},t.map(function(t,i){return(0,r.createElement)("div",{key:i,className:"mbsc-calendar-grid-item mbsc-flex-col mbsc-flex-1-1"+n._theme},(0,r.createElement)("div",{className:"mbsc-calendar-month-title"+n._theme},e.monthNames[e.getMonth(new Date(t))]),h(t,{isActive:!0}))}))})):a?(0,r.createElement)("div",{"aria-hidden":l?"true":Q,className:"mbsc-calendar-slide mbsc-calendar-slide-active "+n._getPickerClass(or)},h(+e.navService.firstDay,{dragData:e.dragData,dragToCreate:e.dragToCreate,dragToMove:e.dragToMove,dragToResize:e.dragToResize,isActive:!0,onLabelUpdateEnd:e.onLabelUpdateEnd,onLabelUpdateModeOff:e.onLabelUpdateModeOff,onLabelUpdateModeOn:e.onLabelUpdateModeOn,onLabelUpdateMove:e.onLabelUpdateMove,onLabelUpdateStart:e.onLabelUpdateStart})):e.selectView===or&&(0,r.createElement)("div",p({"aria-hidden":l?"true":Q,className:n._getPickerClass(or)},c),(0,r.createElement)(di,p({},f,{itemNr:n._pageNr,itemSize:t.pageSize/n._pageNr,itemRenderer:function(t,i){var o=t.key,s=o>=n._pageIndex&&o<n._pageIndex+n._pageNr&&n._view===or,a={dragData:e.dragData,dragToCreate:e.dragToCreate,dragToMove:e.dragToMove,dragToResize:e.dragToResize,isActive:s,onLabelUpdateEnd:e.onLabelUpdateEnd,onLabelUpdateModeOff:e.onLabelUpdateModeOff,onLabelUpdateModeOn:e.onLabelUpdateModeOn,onLabelUpdateMove:e.onLabelUpdateMove,onLabelUpdateStart:e.onLabelUpdateStart};return(0,r.createElement)("div",{className:"mbsc-calendar-slide"+(s?" mbsc-calendar-slide-active":"")+n._theme+n._rtl,key:o,style:n._getPageStyle(o,i,n._pageIndex,n._pageNr)},h(n._getPageDay(o),a))},maxIndex:n._maxIndex,minIndex:n._minIndex,mouseSwipe:e.mouseSwipe,onAnimationEnd:n._onAnimationEnd,onGestureStart:n._onGestureStart,onIndexChange:n._onPageChange,onStart:n._onStart,selectedIndex:n._pageIndex,swipe:e.swipe}))),!n._hasPicker&&m))),i,n._hasPicker&&(0,r.createElement)(ni,{anchor:n._pickerBtn,closeOnScroll:!0,contentPadding:!1,context:e.context,cssClass:"mbsc-calendar-popup",display:"anchored",isOpen:n._view!==or,locale:e.locale,onClose:n._onPickerClose,onOpen:n._onPickerOpen,rtl:e.rtl,scrollLock:!1,showOverlay:!1,theme:e.theme,themeVariant:e.themeVariant},(0,r.createElement)("div",p({},u),(0,r.createElement)("div",{className:"mbsc-calendar-controls mbsc-flex"+n._theme},(0,r.createElement)("div",{"aria-live":"polite",className:"mbsc-calendar-picker-button-wrapper mbsc-calendar-title-wrapper mbsc-flex mbsc-flex-1-1"+n._theme},(0,r.createElement)(jn,{className:"mbsc-calendar-button",onClick:n._onPickerBtnClick,theme:e.theme,themeVariant:e.themeVariant,type:"button",variant:"flat"},n._viewTitle)),(0,r.createElement)(jn,{className:"mbsc-calendar-button",ariaLabel:e.prevPageText,disabled:n._isPrevDisabled(!0),iconSvg:n._prevIcon,onClick:n.prevPage,theme:e.theme,themeVariant:e.themeVariant,type:"button",variant:"flat"}),(0,r.createElement)(jn,{className:"mbsc-calendar-button",ariaLabel:e.nextPageText,disabled:n._isNextDisabled(!0),iconSvg:n._nextIcon,onClick:n.nextPage,theme:e.theme,themeVariant:e.themeVariant,type:"button",variant:"flat"})),m)))}(e,t,this,e.children)},t.prototype._updated=function(){e.prototype._updated.call(this),this._shouldEnhanceHeader&&(Kt(this._headerElement,{view:this}),this._shouldEnhanceHeader=!1)},t}(Qr),mi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._instanceService=new Xr,t}return d(t,e),t.prototype._template=function(e){return function(e,t){return(0,r.createElement)(fi,{ref:t._setCal,refDate:e.refDate,activeDate:e.active,amText:e.amText,cssClass:t._className+" mbsc-flex-1-1 mbsc-calendar-"+e.display,calendarScroll:e.calendarScroll,calendarType:e.calendarType,colors:e.colors,context:e.context,dataTimezone:e.dataTimezone,displayTimezone:e.displayTimezone,timezonePlugin:e.timezonePlugin,downIcon:e.downIcon,exclusiveEndDates:e.exclusiveEndDates,hoverEnd:e.hoverEnd,hoverStart:e.hoverStart,invalid:e.invalid,instanceService:t._instanceService,isPicker:!0,labels:e.labels,marked:e.marked,max:e.max,min:e.min,mousewheel:e.mousewheel,navService:t._navService,nextIconH:e.nextIconH,nextIconV:e.nextIconV,nextPageText:e.nextPageText,noOuterChange:e.selectRange,onActiveChange:t._onActiveChange,onCellHoverIn:e.onCellHoverIn,onCellHoverOut:e.onCellHoverOut,onDayClick:t._onDayClick,onDayHoverIn:e.onDayHoverIn,onDayHoverOut:e.onDayHoverOut,onLabelClick:e.onLabelClick,onPageChange:e.onPageChange,onPageLoaded:e.onPageLoaded,onPageLoading:e.onPageLoading,onTodayClick:t._onTodayClick,pages:e.pages,pmText:e.pmText,prevIconH:e.prevIconH,prevIconV:e.prevIconV,prevPageText:e.prevPageText,renderDay:e.renderDay,renderDayContent:e.renderDayContent,renderHeader:e.renderCalendarHeader,rangeEnd:e.rangeEnd,rangeStart:e.rangeStart,rtl:e.rtl,selectedDates:t._tempValueRep,selectView:e.selectView,showCalendar:!0,showControls:e.showControls,showOuterDays:e.showOuterDays,showToday:!1,showWeekNumbers:e.showWeekNumbers,size:e.size,theme:e.theme,themeVariant:e.themeVariant,update:t._update,upIcon:e.upIcon,valid:e.valid,weeks:e.weeks,width:e.width,getDate:e.getDate,getDay:e.getDay,getMaxDayOfMonth:e.getMaxDayOfMonth,getMonth:e.getMonth,getWeekNumber:e.getWeekNumber,getYear:e.getYear,dateFormat:e.dateFormat,dayNames:e.dayNames,dayNamesMin:e.dayNamesMin,dayNamesShort:e.dayNamesShort,eventText:e.eventText,eventsText:e.eventsText,firstDay:e.firstDay,fromText:e.fromText,monthNames:e.monthNames,monthNamesShort:e.monthNamesShort,moreEventsPluralText:e.moreEventsPluralText,moreEventsText:e.moreEventsText,todayText:e.todayText,toText:e.toText,weekText:e.weekText,yearSuffix:e.yearSuffix})}(e,this)},t}(Jr);function gi(e,t,n,r){var i=e.min===Q?-1/0:e.min,o=e.max===Q?1/0:e.max,s=_i(e,t),a=bi(e,s),l=a,c=a,u=0,h=0;if(n&&n.get(a)){for(;s-u>=i&&n.get(l)&&u<100;)l=bi(e,s-++u);for(;s+h<o&&n.get(c)&&h<100;)c=bi(e,s+ ++h);if(n.get(l)&&n.get(c))return a;a=(h<u&&h&&-1!==r||!u||s-u<0||1===r)&&!n.get(c)?c:l}return a}function yi(e){return e!==Q?e.value!==Q?e.value:e.display!==Q?e.display:e:e}function vi(e,t){if(e.getItem)return e.getItem(t);var n=e.data||[],r=n.length,i=t%r;return e._circular?n[i>=0?i:i+r]:n[re(t,0,r-1)]}function _i(e,t){var n=e.multiple?t&&t.length&&t[0]||Q:t;return(e.getIndex?+e.getIndex(t):e._map.get(n))||0}function bi(e,t){return yi(vi(e,t))}function wi(e,t,n,r){e._key=t,e._map=new Map,e._circular=n===Q?e.circular===Q?e.data&&e.data.length>(r||5):e.circular:oe(n)?n[t]:n,e.data&&(e.min=e._circular?Q:0,e.max=e._circular?Q:e.data.length-1,e.data.forEach(function(t,n){e._map.set(yi(t),n)}))}var xi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._indexes=[],t._activeIndexes=[],t._wheels=[],t._batches=[],t._lastIndexes=[],t._onSet=function(){t._hook("onChange",{value:t._get(t._tempValueRep)})},t._onActiveChange=function(e){var n=e.wheel,r=e.index,i=n._key;t._activeIndexes[i]=r;var o=t._indexes,s=o[i];t._scroll3d?s=r:r-s>=t._rows?s++:r<s&&s--,o[i]=s,t.forceUpdate()},t._onWheelIndexChange=function(e){var n=t.s,r=e.wheel,i=r._key,o=r.multiple,s=bi(r,e.index),a=t._disabled&&t._disabled[i]&&t._disabled[i].get(s),l=[],c=n.selectOnScroll;(c||!e.click)&&(t._lastIndexes[i]=t._indexes[i]=e.index,t._indexes.forEach(function(e,n){var r=t._wheelMap[n],i=r.data?r.data.length:0;t._batches[n]=i?_e(e/i):0,l[n]=i})),t._activeIndexes[i]=e.index;var u=t._get(t._tempValueRep),h=!!e.click&&!a,d=c||h;if(o){if(h){var p=(t._tempValueRep[i]||[]).slice();!1===e.selected?p.push(s):!0===e.selected&&p.splice(p.indexOf(s),1),t._tempValueRep[i]=p}}else d&&(t._tempValueRep[i]=s);if(n.onWheelMove&&e.index!==Q){var f=n.onWheelMove({dataItem:vi(r,e.index),selection:d,wheelIndex:i});f&&f.forEach(function(e,n){if(e!==Q&&(t._tempValueRep[n]=e),!d){var r=t._wheelMap[n],i=_i(r,e);t._constrainIndex(i,r)}})}d&&t._validate(i,e.diff>0?1:-1),c&&t._tempValueRep.forEach(function(e,n){var r=t._wheelMap[n],i=r.data?r.data.length:0,o=t._indexes[n],s=_i(r,e)+t._batches[n]*i;t._activeIndexes[n]=t._lastIndexes[n]=t._indexes[n]=s,r._offset=i!==l[n]?s-o:0});var m=t._get(t._tempValueRep);!t._valueEquals(u,m)||h&&ce(n.value)&&!e.wheel.isGroup?t._hook("onChange",{value:m,itemTap:h,closeOnTap:r.closeOnTap}):t.forceUpdate()},t}return d(t,e),t.prototype._initWheels=function(){var e=this,t=0,n=this.s.wheels||[];this._wheelMap=[],n.forEach(function(n){n.forEach(function(n){wi(n,t,e._circular,e._rows),e._wheelMap[t]=n,t++})}),this._wheels=n},t.prototype._render=function(e,t){var n=this,r=this.props||{},i=this._respProps||{},o=this._prevS,s=!!this._touchUi&&e.circular,a=this._touchUi?e.rows:i.rows||r.rows||7;if(this._displayStyle=e.displayStyle||e.display,this._scroll3d=e.scroll3d&&this._touchUi&&Ot,(e.itemHeight!==o.itemHeight||a!==this._rows)&&(this._rows=a,this._lineStyle={height:e.itemHeight+"px"},this._scroll3d)){var l="translateZ("+(e.itemHeight*a/2+3)+"px";this._overlayStyle={},this._overlayStyle[Pt+"transform"]=l,this._lineStyle[Pt+"transform"]="translateY(-50%) "+l}if(e.wheels===o.wheels&&s===this._circular||(this._batches=[],this._shouldSetIndex=!0,this._circular=s,this._initWheels()),!this._valueEquals(e.value,o.value)||this._tempValueRep===Q||this._shouldValidate(e,o)||e.invalid!==o.invalid||e.valid!==o.valid){this._tempValueRep=this._parse(e.value),this._shouldSetIndex=!0,this._validate();var c=this._get(this._tempValueRep),u=!this._valueEquals(e.value,c),h=u&&!ce(e.value);setTimeout(function(){h?n._hook("onChange",{value:c}):u&&n._hook("onTempChange",{value:c})})}this._shouldSetIndex&&(this._setIndexes(),this._shouldSetIndex=this._indexFromValue=!1),e.wheels!==o.wheels&&o.wheels!==Q&&setTimeout(function(){for(var e=0,t=n._wheelMap;e<t.length;e++){var r=t[e];n._onWheelIndexChange({diff:0,index:n._indexes[r._key],wheel:r})}})},t.prototype._validate=function(e,t){var n=this;if(this.s.validate){var r=this.s.validate.call(this._el,{direction:t,index:e,values:this._tempValueRep.slice(0),wheels:this._wheelMap});this._disabled=r.disabled,r.init&&this._initWheels(),r.indexes&&r.indexes.forEach(function(e,t){if(e!==Q){var r=n._wheelMap[t],i=_i(r,e);n._constrainIndex(i,r)}}),r.valid?this._tempValueRep=r.valid.slice(0):this._wheelMap.forEach(function(e,r){n._tempValueRep[r]=gi(e,n._tempValueRep[r],n._disabled&&n._disabled[r],t)})}},t.prototype._setIndexes=function(){var e=this,t=this._indexes||[];this._indexes=[],this._activeIndexes=[],this._tempValueRep.forEach(function(n,r){var i=e._wheelMap[r],o=i.data?i.data.length:0,s=_i(i,n);if(e.s.selectOnScroll)e._activeIndexes[r]=e._indexes[r]=s+(e._batches[r]||0)*o;else{var a=s;e._indexFromValue||(a=e._prevS.wheels!==e.s.wheels?0:t[r])!==Q&&(a=function(e,t){if(e.getItem&&e.getIndex)return e.getIndex(yi(e.getItem(t)));var n=(e.data||[]).length,r=t%n;return n?r>=0?r:r+n:0}(i,a)+(e._batches[r]||0)*o),e._constrainIndex(a,i)}})},t.prototype._constrainIndex=function(e,t){var n=t._key;e!==Q&&t.data?(t.spaceAround||(e=re(e,0,Math.max(t.data.length-this._rows,0))),this._activeIndexes[n]=this._indexes[n]=e):this._activeIndexes[n]=this._indexes[n]=this._lastIndexes[n]||0},t.prototype._shouldValidate=function(e,t){return!!e.shouldValidate&&e.shouldValidate(e,t)},t.prototype._valueEquals=function(e,t){return this.s.valueEquality?this.s.valueEquality(e,t):e===t},t.prototype._get=function(e){return this.s.getValue?this.s.getValue(e):e},t.prototype._parse=function(e){return this.s.parseValue?this.s.parseValue(e):e},t.defaults={itemHeight:40,rows:5,selectOnScroll:!0},t._name="Scroller",t}(sn),Si=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t){var n;if(e.renderItem&&e.data!==Q){var i=e.renderItem(e.data),o=le(i)?{__html:i}:Q;n=o?(0,r.createElement)("div",{dangerouslySetInnerHTML:o}):(0,r.createElement)("div",null,i)}else n=e.text;return(0,r.createElement)("div",{"aria-disabled":e.disabled?"true":Q,"aria-hidden":n===Q||e.is3d?"true":Q,"aria-selected":e.selected?"true":Q,ref:t._setEl,tabIndex:e.active?0:Q,className:t._cssClass,role:"option",style:t._style,onClick:t._onClick},e.checkmark&&(0,r.createElement)("span",{className:t._checkmarkClass}),n)}(e,this)},t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onClick=function(){var e=t.s;e.text===Q||e.isGroup||t._hook("onClick",{index:e.index,selected:e.selected,disabled:e.disabled})},t}return d(t,e),t.prototype._mounted=function(){var e=this;this._unlisten=Fn(this._el,{click:!0,keepFocus:!1,onBlur:function(){e.setState({hasFocus:!1})},onFocus:function(){e.setState({hasFocus:!0})},onHoverIn:function(){e.s.text!==Q&&e.setState({hasHover:!0})},onHoverOut:function(){e.s.text!==Q&&e.setState({hasHover:!1})},onKeyDown:function(t){(t.keyCode===Un||!e.s.multiple&&t.keyCode===zn)&&e._onClick()},onPress:function(){e.s.text!==Q&&e.setState({isActive:!0})},onRelease:function(){e.s.text!==Q&&e.setState({isActive:!1})}})},t.prototype._destroy=function(){this._unlisten()},t.prototype._render=function(e,t){var n=e.height;this._cssClass="mbsc-scroller-wheel-"+(e.isGroup?"header":"item")+this._theme+this._rtl+(e.checkmark&&!e.isGroup?" mbsc-wheel-item-checkmark":"")+(e.is3d?" mbsc-scroller-wheel-item-3d":"")+(e.scroll3d&&!e.is3d?" mbsc-scroller-wheel-item-2d":"")+(e.selected&&!e.is3d?" mbsc-selected":"")+(e.selected&&e.is3d?" mbsc-selected-3d":"")+(e.disabled?" mbsc-disabled":"")+(e.multiple&&!e.isGroup?" mbsc-wheel-item-multi":"")+(t.hasHover?" mbsc-hover":"")+(t.hasFocus?" mbsc-focus":"")+(t.isActive?" mbsc-active":""),this._style={height:n+"px",lineHeight:n+"px"},this._checkmarkClass=this._theme+this._rtl+" mbsc-wheel-checkmark"+(e.selected?" mbsc-selected":""),e.is3d&&(this._transform="rotateX("+(e.offset-e.index)*e.angle3d%360+"deg) translateZ("+n*e.rows/2+"px)",this._style[Pt+"transform"]=this._transform)},t}(sn)),Ei=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onIndexChange=function(e){e.wheel=t.s.wheel,t._hook("onIndexChange",e)},t._onItemClick=function(e){t._hook("onIndexChange",{click:!0,index:e.index,wheel:t.s.wheel,selected:e.selected})},t._onKeyDown=function(e){var n=0;38===e.keyCode?n=-1:40===e.keyCode&&(n=1);var r=t.s,i=r.activeIndex+n,o=!(i<r.minIndex||i>r.maxIndex);if(n&&e.preventDefault(),n&&o){var s=r.selectOnScroll?"onIndexChange":"onActiveChange";t._shouldFocus=!0,t._hook(s,{diff:n,index:i,wheel:r.wheel})}else e.keyCode===zn&&r.multiple&&t._hook("onSet",{})},t}return d(t,e),t.prototype._getText=function(e){return e!==Q?e.display!==Q?e.display:e:Q},t.prototype._getValue=function(e){return e?e.value!==Q?e.value:e.display!==Q?e.display:e:e},t.prototype._isActive=function(e,t,n){var r=this.s,i=r.scroll3d&&r.multiple?n:!n;return r.activeIndex===e.key&&t&&i},t.prototype._isSelected=function(e){var t=this.s,n=t.selectedValues,r=this._getValue(e.data);return t.multiple?!(!n||!n.indexOf)&&n.indexOf(r)>=0:t.selectOnScroll?e.key===t.selectedIndex:r!==Q&&r===n},t.prototype._isDisabled=function(e){var t=this.s.disabled,n=e&&e.disabled,r=this._getValue(e);return!!(n||t&&t.get(r))},t.prototype._render=function(e){var t=e.rows,n=e.itemHeight,r=e.wheel._key,i=2*ye((n-.03*(n*t/2+3))/2);this._items=e.wheel.getItem||e.wheel.data||[],this._batchSize3d=ye(1.8*t),this._angle3d=360/(2*this._batchSize3d),this._style={height:2*ye(t*n*(e.scroll3d?1.1:1)/2)+"px"},this._itemNr=e.wheel.spaceAround?1:t,this._innerStyle={height:(e.scroll3d?i:e.wheel.spaceAround?n:n*t)+"px"},this._wheelStyle=e.wheelWidth?{width:(oe(e.wheelWidth)?e.wheelWidth[r]:e.wheelWidth)+"px"}:{maxWidth:(oe(e.maxWheelWidth)?e.maxWheelWidth[r]:e.maxWheelWidth)+"px",minWidth:(oe(e.minWheelWidth)?e.minWheelWidth[r]:e.minWheelWidth)+"px"},e.scroll3d&&(this._innerStyle[Pt+"transform"]="translateY(-50%) translateZ("+(n*t/2+3)+"px")},t.prototype._updated=function(){if(this._shouldFocus){var e=this._el.querySelector('[tabindex="0"]');e&&setTimeout(function(){e.focus()}),this._shouldFocus=!1}},t}(sn),Ti=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t){var n,i=((n={})[Xt]=t._onKeyDown,n);return(0,r.createElement)("div",p({"aria-multiselectable":e.multiple?"true":Q,"aria-label":e.wheel.label,className:"mbsc-scroller-wheel-wrapper mbsc-scroller-wheel-wrapper-"+e.wheel._key+" "+(e.wheel.cssClass||"")+(e.scroll3d?" mbsc-scroller-wheel-wrapper-3d":"")+t._theme+t._rtl,ref:t._setEl,role:"listbox",style:t._wheelStyle},i),(0,r.createElement)(di,{batchSize3d:t._batchSize3d,className:"mbsc-scroller-wheel"+(e.scroll3d?" mbsc-scroller-wheel-3d":"")+t._theme,innerClass:"mbsc-scroller-wheel-cont mbsc-scroller-wheel-cont-"+e.display+(e.scroll3d?" mbsc-scroller-wheel-cont-3d":"")+(e.multiple?" mbsc-scroller-wheel-multi":"")+t._theme,innerStyles:t._innerStyle,items:t._items,itemSize:e.itemHeight,itemRenderer:function(n,i,o){if(n!==Q){var s=t._getText(n.data);return(0,r.createElement)(Si,{active:t._isActive(n,s,o),angle3d:t._angle3d,data:n.data,disabled:t._isDisabled(n.data),height:e.itemHeight,index:n.key,is3d:o,isGroup:n.data&&n.data.isGroup,key:n.key,multiple:e.multiple,onClick:t._onItemClick,offset:i,checkmark:e.wheel.checkmark,renderItem:e.renderItem,rows:e.rows,rtl:e.rtl,scroll3d:e.scroll3d,selected:t._isSelected(n),text:s,theme:e.theme})}return null},itemNr:t._itemNr,margin:!0,maxIndex:e.maxIndex,minIndex:e.minIndex,onIndexChange:t._onIndexChange,offset:e.wheel._offset,rtl:e.rtl,scroll3d:e.scroll3d,scrollBar:!t._touchUi,selectedIndex:e.selectedIndex,snap:!0,spaceAround:e.wheel.spaceAround,styles:t._style,visibleSize:e.rows}))}(e,this)},t}(Ei),Mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t){var n=e.renderPreContent?e.renderPreContent(e.preContentData):"",i=e.renderInContent?e.renderInContent(e.preContentData):"";return(0,r.createElement)(r.Fragment,null,n,(0,r.createElement)("div",{className:"mbsc-scroller mbsc-scroller-"+t._displayStyle+t._theme+t._rtl+(t._touchUi?" mbsc-scroller-touch":" mbsc-scroller-pointer")+("inline"===e.display?" mbsc-font ":" ")+t._className},i,t._wheels.map(function(n,i){return(0,r.createElement)("div",{key:i,className:"mbsc-scroller-wheel-group-cont"+(e.scroll3d?" mbsc-scroller-wheel-group-cont-3d":"")+t._theme},e.selectOnScroll&&(0,r.createElement)("div",{className:"mbsc-scroller-wheel-line"+t._theme,style:t._lineStyle}),(0,r.createElement)("div",{className:"mbsc-flex mbsc-scroller-wheel-group"+(e.scroll3d?" mbsc-scroller-wheel-group-3d":"")+t._theme},(0,r.createElement)("div",{className:"mbsc-scroller-wheel-overlay mbsc-scroller-wheel-overlay-"+t._displayStyle+t._theme,style:t._overlayStyle}),n.map(function(n,i){return(0,r.createElement)(Ti,{activeIndex:t._activeIndexes[n._key],disabled:t._disabled&&t._disabled[n._key],display:t._displayStyle,key:i,itemHeight:e.itemHeight,onActiveChange:t._onActiveChange,onIndexChange:t._onWheelIndexChange,onSet:t._onSet,maxIndex:n.max,maxWheelWidth:e.maxWheelWidth,minIndex:n.min,minWheelWidth:e.minWheelWidth,multiple:n.multiple,renderItem:e.renderItem,rows:t._rows,scroll3d:t._scroll3d,selectedIndex:t._indexes[n._key],selectedValues:t._tempValueRep[n._key],selectOnScroll:e.selectOnScroll,theme:e.theme,touchUi:e.touchUi,rtl:e.rtl,wheel:n,wheelWidth:e.wheelWidth})})))})))}(e,this)},t}(xi),Ai={ios:50,material:46,windows:50},ki=["a","h","i","s","tt"];function Ci(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m){for(var g=et(h,d)?d:Ge(e,d),y=et(h,p)?p:qe(e,p),v=o.a(g),_=o.a(y),b=!0,w=!0,x=!1,S=0,E=0,T=0;T<n;T++){var M=r[i[C=ki[T]]];if(M!==Q){var A=b?o[C](g):0,k=w?o[C](y):s[C];t&&1===T&&(A+=v?12:0,k+=_?12:0,M+=r[i.a]?12:0),(b||w)&&A<M&&M<k&&(x=!0),M!==A&&(b=!1),M!==k&&(w=!1)}}if(!f){for(T=n+1;T<4;T++){var C;i[C=ki[T]]!==Q&&(o[C](g)>0&&b&&(S=a[l]),o[C](y)<s[C]&&w&&(E=a[l]))}w&&m&&!E&&(E=999!==y.getMilliseconds()?a[l]:0)}if(b||w||x)for(A=b&&!x?o[l](g)+S:0,k=w&&!x?o[l](y)-E:s[l],T=A;T<=k;T+=a[l])c[u].set(T,!f)}function Ii(e,t){var n=new Date(e);return t?_e(+n/864e5):n.getMonth()+12*(n.getFullYear()-1970)}function Pi(e){return e.getFullYear()+"-"+ge(e.getMonth()+1)+"-"+ge(e.getDate())}function Oi(e){return e.getMilliseconds()}function Ri(e){return e.getHours()>11?1:0}var Di=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._preset="date",t._innerValues={},t._parseDate=function(e){var n=t.s;return e||(t._innerValues={}),t._getArray(at(e||n.defaultSelection||new Date,n,t._format),!!e)},t._getDate=function(e){var n,r,i=t.s,o=t._getArrayPart,s=t._wheelOrder,a=new Date((new Date).setHours(0,0,0,0));if(null===e||e===Q)return null;if(s.dd!==Q){var l=e[s.dd].split("-");n=new Date(l[0],l[1]-1,l[2])}s.tt!==Q&&(r=new Date(+Fe+e[s.tt]%86400*1e3));var c=o(e,"y",n,a),u=o(e,"m",n,a),h=Math.min(o(e,"d",n,a),i.getMaxDayOfMonth(c,u)),d=o(e,"h",r,a);return i.getDate(c,u,h,t._hasAmPm&&o(e,"a",r,a)?d+12:d,o(e,"i",r,a),o(e,"s",r,a),o(e,"u",r,a))},t._validate=function(e){var n=e.direction,r=e.index,i=e.values,o=e.wheels,s=[],a=t.s,l=a.stepHour,c=a.stepMinute,u=a.stepSecond,h=a.mode||t._preset,d=t._wheelOrder,p=t._getDatePart,f=t._max,m=t._min,g=it(a,t._getDate(i)),y=a.getYear(g),v=a.getMonth(g),_=a.getDate(y,v-1,1),b=a.getDate(y,v+2,1);r!==d.y&&r!==d.m&&r!==d.d&&r!==d.dd&&r!==Q||(t._valids=er(a.valid,_,b,a,!0,!0),t._invalids=er(a.invalid,_,b,a,!0,!0));var w=t._valids,x=t._invalids,S=Vr(g,a,m?+m:-1/0,f?+f:1/0,x,w,n),E=t._getArray(S),T=t._wheels&&t._wheels[0][d.d],M=p.y(S),A=p.m(S),k=a.getMaxDayOfMonth(M,A),C={y:m?m.getFullYear():-1/0,m:0,d:1,h:0,i:0,s:0,a:0,tt:0},I={y:f?f.getFullYear():1/0,m:11,d:31,h:ve(t._hasAmPm?11:23,l),i:ve(59,c),s:ve(59,u),a:1,tt:86400},P={y:1,m:1,d:1,h:l,i:c,s:u,a:1,tt:t._timeStep},O=!1,R=!0,D=!0;if(["dd","y","m","d","tt","a","h","i","s"].forEach(function(e){var t=C[e],n=I[e],r=p[e](S),i=d[e];if(R&&m&&(t=p[e](m)),D&&f&&(n=p[e](f)),r<t&&(r=t),r>n&&(r=n),"dd"===e||"tt"===e||"a"===e&&i===Q||(R&&(R=r===t),D&&(D=r===n)),i!==Q){if(s[i]=new Map,"y"!==e&&"dd"!==e)for(var o=C[e];o<=I[e];o+=P[e])(o<t||o>n)&&s[i].set(o,!0);if("d"===e&&x)for(var l in x)if(!w||!w[l]){var c=at(l,a),u=a.getYear(c),h=a.getMonth(c);u===M&&h===A&&Br(a,c,x,w)&&s[i].set(a.getDay(c),!0)}}}),/time/i.test(h)){var L=x&&x[Ke(S)],N=w&&w[Ke(S)];ki.forEach(function(e,r){var i=d[e];if(i!==Q){var l=a.valid?N:L;if(l){if(a.valid)for(var c=0;c<=I[e];c++)s[i].set(c,!0);for(var u=0,h=l;u<h.length;u++){var f=h[u],m=f.start,g=f.end;m&&g&&Ci(a,t._hasAmPm,r,E,d,p,I,P,e,s,i,S,m,g,!!a.valid,a.exclusiveEndDates)}}E[i]=gi(o[i],p[e](S),s[i],n)}})}var F=t._dateDisplay;if(T&&(T.data.length!==k||/DDD/.test(F))){for(var z=[],U=F.replace(/[my|]/gi,"").replace(/DDDD/,"{dddd}").replace(/DDD/,"{ddd}").replace(/DD/,"{dd}").replace(/D/,"{d}"),j=1;j<=k;j++){var B=a.getDate(M,A,j).getDay(),V=U.replace(/{dddd}/,a.dayNames[B]).replace(/{ddd}/,a.dayNamesShort[B]).replace(/{dd}/,ge(j)+a.daySuffix).replace(/{d}/,j+a.daySuffix);z.push({display:V,value:j})}T.data=z,O=!0}return{disabled:s,init:O,valid:E}},t._shouldValidate=function(e,t){return!!(e.min&&+e.min!=+t.min||e.max&&+e.max!=+t.max)||e.wheels!==t.wheels||e.dataTimezone!==t.dataTimezone||e.displayTimezone!==t.displayTimezone},t._getYearValue=function(e){return{display:(/yy/i.test(t._dateDisplay)?e:(e+"").substr(2,2))+t.s.yearSuffix,value:e}},t._getYearIndex=function(e){return+e},t._getDateIndex=function(e){return Ii(e,t._hasDay)},t._getDateItem=function(e){var n=t.s,r=t._hasDay,i=new Date((new Date).setHours(0,0,0,0)),o=r?new Date(864e5*e):new Date(1970,e,1);return r&&(o=new Date(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate())),{disabled:r&&Br(n,o,t._invalids,t._valids),display:i.getTime()===o.getTime()?n.todayText:ct(t._dateTemplate,o,n),value:Pi(o)}},t._getArrayPart=function(e,n,r,i){var o;return t._wheelOrder[n]===Q||(o=+e[t._wheelOrder[n]],isNaN(o))?r?t._getDatePart[n](r):t._innerValues[n]!==Q?t._innerValues[n]:t._getDatePart[n](i):o},t._getHours=function(e){var n=e.getHours();return ve(n=t._hasAmPm&&n>=12?n-12:n,t.s.stepHour)},t._getMinutes=function(e){return ve(e.getMinutes(),t.s.stepMinute)},t._getSeconds=function(e){return ve(e.getSeconds(),t.s.stepSecond)},t._getFullTime=function(e){return ve(ye(Ye(e)/1e3),t._timeStep||1)},t}return d(t,e),t.prototype._valueEquals=function(e,t){return ht(e,t,this.s)},t.prototype._render=function(e,t){var n=!1,r=this._prevS,i=e.dateFormat,o=e.timeFormat,s=e.mode||this._preset,a="datetime"===s?i+e.separator+o:"time"===s?o:i;this._minWheelWidth=e.minWheelWidth||("datetime"===s?Ai[e.baseTheme||e.theme]:Q),this._dateWheels=e.dateWheels||("datetime"===s?e.dateWheelFormat:i),this._dateDisplay=e.dateWheels||e.dateDisplay,this._timeWheels=e.timeWheels||o,this._timeDisplay=this._timeWheels,this._format=a,this._hasAmPm=/h/.test(this._timeDisplay),this._getDatePart={y:e.getYear,m:e.getMonth,d:e.getDay,h:this._getHours,i:this._getMinutes,s:this._getSeconds,u:Oi,a:Ri,dd:Pi,tt:this._getFullTime},+at(r.min)!=+at(e.min)&&(n=!0,this._min=ce(e.min)?Q:at(e.min,e,a)),+at(r.max)!=+at(e.max)&&(n=!0,this._max=ce(e.max)?Q:at(e.max,e,a)),(e.theme!==r.theme||e.mode!==r.mode||e.locale!==r.locale||e.dateWheels!==r.dateWheels||e.timeWheels!==r.timeWheels||n)&&(this._wheels=this._getWheels())},t.prototype._getWheels=function(){this._wheelOrder={};var e,t=this.s,n=t.mode||this._preset,r=this._hasAmPm,i=this._dateDisplay,o=this._timeDisplay,s=this._wheelOrder,a=[],l=[],c=[],u=0;if(/date/i.test(n)){for(var h=0,d=this._dateWheels.split(/\|/.test(this._dateWheels)?"|":"");h<d.length;h++){var p=0;if((_=d[h]).length)if(/y/i.test(_)&&p++,/m/i.test(_)&&p++,/d/i.test(_)&&p++,p>1&&s.dd===Q)s.dd=u,u++,l.push(this._getDateWheel(_)),c=l;else if(/y/i.test(_)&&s.y===Q)s.y=u,u++,l.push({cssClass:"mbsc-datetime-year-wheel",getIndex:this._getYearIndex,getItem:this._getYearValue,label:t.yearText,max:this._max?t.getYear(this._max):Q,min:this._min?t.getYear(this._min):Q,spaceAround:!0});else if(/m/i.test(_)&&s.m===Q){s.m=u,e=[],u++;for(var f=i.replace(/[dy|]/gi,"").replace(/MMMM/,"{mmmm}").replace(/MMM/,"{mmm}").replace(/MM/,"{mm}").replace(/M/,"{m}"),m=0;m<12;m++){var g=f.replace(/{mmmm}/,t.monthNames[m]).replace(/{mmm}/,t.monthNamesShort[m]).replace(/{mm}/,ge(m+1)+(t.monthSuffix||"")).replace(/{m}/,m+1+(t.monthSuffix||""));e.push({display:g,value:m})}l.push({cssClass:"mbsc-datetime-month-wheel",data:e,label:t.monthText,spaceAround:!0})}else if(/d/i.test(_)&&s.d===Q){for(s.d=u,e=[],u++,m=1;m<32;m++)e.push({display:(/dd/i.test(i)?ge(m):m)+t.daySuffix,value:m});l.push({cssClass:"mbsc-datetime-day-wheel",data:e,label:t.dayText,spaceAround:!0})}}a.push(l)}if(/time/i.test(n)){for(var y=0,v=this._timeWheels.split(/\|/.test(this._timeWheels)?"|":"");y<v.length;y++){var _;if(p=0,(_=v[y]).length&&(/h/i.test(_)&&p++,/m/i.test(_)&&p++,/s/i.test(_)&&p++,/a/i.test(_)&&p++),p>1&&s.tt===Q)s.tt=u,u++,c.push(this._getTimeWheel(_));else if(/h/i.test(_)&&s.h===Q){for(e=[],s.h=u,u++,m=0;m<(r?12:24);m+=t.stepHour)e.push({display:r&&0===m?12:/hh/i.test(o)?ge(m):m,value:m});c.push({cssClass:"mbsc-datetime-hour-wheel",data:e,label:t.hourText,spaceAround:!0})}else if(/m/i.test(_)&&s.i===Q){for(e=[],s.i=u,u++,m=0;m<60;m+=t.stepMinute)e.push({display:/mm/i.test(o)?ge(m):m,value:m});c.push({cssClass:"mbsc-datetime-minute-wheel",data:e,label:t.minuteText,spaceAround:!0})}else if(/s/i.test(_)&&s.s===Q){for(e=[],s.s=u,u++,m=0;m<60;m+=t.stepSecond)e.push({display:/ss/i.test(o)?ge(m):m,value:m});c.push({cssClass:"mbsc-datetime-second-wheel",data:e,label:t.secondText,spaceAround:!0})}else/a/i.test(_)&&s.a===Q&&(s.a=u,u++,c.push({cssClass:"mbsc-dt-whl-a",data:/A/.test(_)?[{display:t.amText.toUpperCase(),value:0},{display:t.pmText.toUpperCase(),value:1}]:[{display:t.amText,value:0},{display:t.pmText,value:1}],spaceAround:!0}))}c!==l&&a.push(c)}return a},t.prototype._getDateWheel=function(e){var t=/d/i.test(e);return this._hasDay=t,this._dateTemplate=e,{cssClass:"mbsc-datetime-date-wheel",getIndex:this._getDateIndex,getItem:this._getDateItem,label:this.s.dateText,max:this._max?Ii(Pi(this._max),t):Q,min:this._min?Ii(Pi(this._min),t):Q,spaceAround:!0}},t.prototype._getTimeWheel=function(e){var t=this.s,n=[],r=1;/s/i.test(e)?r=t.stepSecond:/m/i.test(e)?r=60*t.stepMinute:/h/i.test(e)&&(r=3600*t.stepHour),this._timeStep=r;for(var i=0;i<86400;i+=r){var o=new Date(+Fe+1e3*i);n.push({display:ct(e,o,t),value:i})}return{data:n,label:t.timeText,spaceAround:!0}},t.prototype._getArray=function(e,t){var n=[],r=this._wheelOrder;if(null===e||e===Q)return n;for(var i=0,o=["y","m","d","a","h","i","s","u","dd","tt"];i<o.length;i++){var s=o[i],a=this._getDatePart[s](e);r[s]!==Q&&(n[r[s]]=a),t&&(this._innerValues[s]=a)}return n},t.defaults=p({},Be,{dateDisplay:"MMMMDDYYYY",dateWheelFormat:"|DDD MMM D|",stepHour:1,stepMinute:1,stepSecond:1}),t._name="Datetime",t}(sn),Li=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._preset="datetime",t}return d(t,e),t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return function(e,t){return(0,r.createElement)(Mi,{display:e.display,circular:e.circular,displayStyle:e.displayStyle,getValue:t._getDate,invalid:e.invalid,itemHeight:e.itemHeight,maxWheelWidth:e.maxWheelWidth,minWheelWidth:t._minWheelWidth,parseValue:t._parseDate,rows:e.rows,rtl:e.rtl,shouldValidate:t._shouldValidate,theme:e.theme,themeVariant:e.themeVariant,touchUi:t._touchUi,valid:e.valid,validate:t._validate,value:e.value,valueEquality:t._valueEquals,wheels:t._wheels,wheelWidth:e.wheelWidth,onChange:t._proxyHook,onTempChange:t._proxyHook},e.children)}(e,this)},t}(Di)),Ni=(0,r.createContext)({}),Fi={};function zi(e,t){return Fi[e]||(Fi[e]={change:new g,selectedIndex:-1}),Fi[e].change.subscribe(t)}function Ui(e,t){var n=Fi[e];n&&(n.change.unsubscribe(t),n.change.nr||delete Fi[e])}function ji(e,t,n){var r=Fi[e];r&&(n!==Q&&(r.selectedIndex=n),t!==Q&&(r.value=t),r.change.next(r.value))}function Bi(e){return Fi[e]&&Fi[e].selectedIndex}var Vi,Hi=1,$i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(e){this._toggle(e)},enumerable:!0,configurable:!0}),t.prototype._template=function(e,t){var n=this;return(0,r.createElement)(Ni.Consumer,null,function(i){return function(e,t,n,i,o){return n._groupOptions(o),(0,r.createElement)("label",{className:n._cssClass},(0,r.createElement)("input",{ref:n._setEl,"aria-labelledby":n._id,checked:n._checked,className:"mbsc-segmented-input mbsc-reset "+(e.inputClass||"")+n._theme+(n._checked?" mbsc-selected":""),disabled:n._disabled,name:n._isMultiple?e.name:n._name,onChange:me,type:n._isMultiple?"checkbox":"radio",value:n._value}),(0,r.createElement)("div",{ref:n._setBox,className:"mbsc-segmented-selectbox"+n._theme+(n._animate?" mbsc-segmented-selectbox-animate":"")+(n._checked?" mbsc-selected":"")},(0,r.createElement)("div",{className:"mbsc-segmented-selectbox-inner"+n._theme+(n._index===n._selectedIndex||n._checked?" mbsc-segmented-selectbox-inner-visible":"")+(n._checked?" mbsc-selected":"")})),(0,r.createElement)(jn,{"aria-hidden":!0,ariaLabel:e.ariaLabel,className:"mbsc-segmented-button"+(n._checked?" mbsc-selected":"")+(t.hasFocus?" mbsc-focus":""),color:n._color,disabled:n._disabled,endIcon:e.endIcon,endIconSrc:e.endIconSrc,endIconSvg:e.endIconSvg,hidden:!0,icon:e.icon,iconSrc:e.iconSrc,iconSvg:e.iconSvg,id:n._id,ripple:e.ripple,rtl:e.rtl,startIcon:e.startIcon,startIconSrc:e.startIconSrc,startIconSvg:e.startIconSvg,tag:"span",theme:e.theme,themeVariant:e.themeVariant},i))}(e,t,n,e.children,i)})},t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onChange=function(e){var n=t.s,r=e.target.checked;r!==t._checked&&(t._change(r),t._onGroupChange&&t._onGroupChange(e,t._value),t._toggle(r),n.onChange&&n.onChange(e))},t._onValueChange=function(e){var n=t.s,r=t._isMultiple?oe(e)&&-1!==e.indexOf(t._value):e===t._value;n.checked===Q&&r!==t.state.selected?t.setState({selected:r}):t.forceUpdate(),t._change(r)},t._setBox=function(e){t._box=e},t}return d(t,e),t.prototype._change=function(e){},t.prototype._groupOptions=function(e){var t=this,n=e.color,r=e.disabled,i=e.name,o=e.onChange,s=e.select,a=e.value,l=this.s,c=this.state,u=this._checked,h=l.modelValue!==Q?l.modelValue===l.value:l.checked,d=h!==Q?de(h):c.selected===Q?de(l.defaultChecked):c.selected;this._id=l.id===Q?this._id||"mbsc-segmented-"+Hi++:l.id,this._value=l.value===Q?this._id:l.value,this._onGroupChange=o,this._isMultiple="multiple"===(s||l.select),this._name=i===Q?l.name:i,this._disabled=r===Q?l.disabled===Q?c.disabled:de(l.disabled):de(r),this._color=n===Q?l.color:n,this._checked=a===Q?d:this._isMultiple?a&&-1!==a.indexOf(this._value):a===this._value,this._isMultiple||u||!this._checked||setTimeout(function(){t._checked&&ji(t._name,t._value,t._index)}),this._selectedIndex=Bi(this._name),this._cssClass="mbsc-segmented-item "+this._className+this._theme+this._rtl+(this._checked?" mbsc-segmented-item-checked":"")+(c.hasFocus?" mbsc-focus":"")+(this._index===this._selectedIndex||this._index===Q&&this._checked||this._isMultiple&&this._checked?" mbsc-segmented-item-selected":"")},t.prototype._toggle=function(e){this.s.checked===Q&&this.setState({selected:e})},t.prototype._mounted=function(){var e=this;Rt(this._el,hn,this._onChange),this._unlisten=Fn(this._el,{onBlur:function(){e.setState({hasFocus:!1})},onFocus:function(){e.setState({hasFocus:!0})}})},t.prototype._updated=function(){if(this._name&&!this._unsubscribe&&(this._unsubscribe=zi(this._name,this._onValueChange)),!this._isMultiple){var e=Yt(this._el,".mbsc-segmented"),t=-1,n=-1;if(e)for(var r=e.querySelectorAll('.mbsc-segmented-input[name="'+this._name+'"]'),i=0;i<r.length;i++)r[i]===this._el&&(t=i),r[i].checked&&(n=i);this._index!==t&&-1!==n&&function(e,t){Fi[e]&&(Fi[e].selectedIndex=t)}(this._name,n),-1!==this._selectedIndex&&(this._box.style.transform="translateX("+(this.s.rtl?-1:1)*(this._selectedIndex-t)*100+"%)",this._animate=!0),-1!==t&&(this._index=t)}},t.prototype._destroy=function(){Dt(this._el,hn,this._onChange),this._unsubscribe&&(Ui(this._name,this._unsubscribe),this._unsubscribe=Q),this._unlisten&&this._unlisten()},t.defaults={select:"single"},t._name="Segmented",t}(sn)),Yi=1,Gi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._id="mbsc-segmented-group"+Yi++,t._onChange=function(e,n){var r=t.s,i=r.modelValue!==Q?r.modelValue:t.value;if("multiple"===r.select){if(i!==Q){var o=(i=i||[]).indexOf(n);-1!==o?i.splice(o,1):i.push(n),t.value=i.slice()}}else t.value=n;t._change(t.value),r.onChange&&r.onChange(e)},t}return d(t,e),t.prototype._change=function(e){},t.prototype._render=function(e,t){this._name=e.name===Q?this._id:e.name,this._groupClass="mbsc-segmented mbsc-flex "+this._className+this._theme+this._rtl+(e.color?" mbsc-segmented-"+e.color:"")+(t.dragging?" mbsc-segmented-dragging":""),this._groupOpt={color:e.color,disabled:e.disabled,name:this._name,onChange:this._onChange,select:e.select,value:e.modelValue!==Q?e.modelValue:e.value}},t.prototype._updated=function(){this.s.drag&&"multiple"!==this.s.select?this._unlisten||this._setupDrag():this._cleanupDrag()},t.prototype._destroy=function(){this._cleanupDrag()},t.prototype._setupDrag=function(){var e,t,n,r,i,o,s=this;this._unlisten=Fn(this._el,{onEnd:function(){n&&r!==i&&!e[r]&&s._el.querySelectorAll(".mbsc-segmented-input")[r].click(),n=!1,s.setState({dragging:!1})},onMove:function(i){if(n){for(var a=0,l=0;i.endX>t[a]&&a<t.length;)l=a,a++;(l=s.s.rtl?t.length-l-1:l)===r||e[l]||ji(o,Q,r=l)}},onStart:function(a){var l=Yt(a.domEvent.target,".mbsc-segmented-item",s._el);if(l){var c=l.querySelector(".mbsc-segmented-input");c.classList.contains("mbsc-selected")&&(e=[],qt(s._el.querySelectorAll(".mbsc-segmented-button"),function(t){e.push(t.classList.contains("mbsc-disabled"))}),t=[],qt(s._el.querySelectorAll(".mbsc-segmented-item"),function(e){s.s.rtl?t.unshift(Ht(e).left):t.push(Ht(e).left)}),o=c.name,r=Bi(o),i=r,t.length&&"radio"===c.type&&(n=!0,s.setState({dragging:!0})))}}})},t.prototype._cleanupDrag=function(){this._unlisten&&(this._unlisten(),this._unlisten=null)},t.defaults={select:"single"},t._name="SegmentedGroup",t}(sn),qi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return(0,r.createElement)(Ni.Provider,{children:(t=e.children,(0,r.createElement)("div",{className:this._groupClass,ref:this._setEl},t)),value:this._groupOpt});var t},t}(Gi),Wi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._setTime=function(e){t._hook("onChange",{value:st(t.s,e.value)})},t._isDisabled=function(e){if(e){var n=Ke(st(t.s,e)),r=t._invalids&&t._invalids[n],i=t._valids&&t._valids[n],o=t.s.exclusiveEndDates;if(i){for(var s=0,a=i;s<a.length;s++){var l=a[s],c=l.end&&(o?e<+l.end:e<=+l.end);if(l.start&&e>=+l.start&&c||l.allDay)return!1}return!0}if(r){for(var u=0,h=r;u<h.length;u++){var d=h[u];if(c=d.end&&(o?e<+d.end:e<=+d.end),d.start&&e>=+d.start&&c||d.allDay)return!0}return!1}}return!1},t._onKeyDown=function(e){e.keyCode===Un&&(e.target.click(),e.preventDefault())},t._setCont=function(e){t._gridContEl=e&&e.parentElement},t}return d(t,e),t.prototype._render=function(e,t){var n=this,r=this._prevS;this._cssClass="mbsc-timegrid-container mbsc-font"+this._theme+this._rtl;var i=e.min!==r.min,o=e.max!==r.max,s=e.timeFormat,a=r.value&&!e.value||e.value&&+e.value!==this._value;i&&(this._min=ce(e.min)?Q:at(e.min,e,s)),o&&(this._max=ce(e.max)?Q:at(e.max,e,s));var l=Ze(e.value||Vr(st(e),e,-1/0,1/0)),c=pt(l,1),u=this._selectedDate!==+l,h=e.invalid!==r.invalid,d=e.valid!==r.valid;(h||u)&&(this._invalids=er(e.invalid,l,c,e,!0,!0)),(d||u)&&(this._valids=er(e.valid,l,c,e,!0,!0)),a&&(this._value=e.value&&+e.value);var p=u||h||i||o||s!==r.timeFormat;if(p){this._selectedDate=+l;var f=Math.max(+l,+(this._min||-1/0)),m=Math.min(+c,+(this._max||1/0)+1),g=36e5*e.stepHour+6e4*e.stepMinute;this._timeSlots=[],this._validTimes=[];for(var y=[],v=0,_=+l;_<+c;_+=g)if(m>=f?_>=f&&_<m:_>=f||_<m){var b={formattedValue:ct(s,st(e,_),e),value:_};y.push(b),2===v&&(this._timeSlots.push(y),y=[],v=-1),this._isDisabled(_)||this._validTimes.push(b),v++}y.length&&this._timeSlots.push(y)}if(this._isDisabled(this._value)||(a||p)&&-1===function(e){return xe(e,function(e){return e.value===n._value},!0)}(this._validTimes)){var w=function(e,t){if(ce(t)||!e.length)return null;for(var n=0;n<e.length&&t>=e[n];)n++;if(n===e.length)return e[n-1];if(0===n)return e[0];var r=e[n-1],i=e[n];return t-r<i-t?r:i}(this._validTimes.map(function(e){return e.value}),this._value);w&&(clearTimeout(this._validationHandle),this._validationHandle=setTimeout(function(){var e=we(n._validTimes,function(e){return e.value===w});n._setTime(e)}))}else p&&clearTimeout(this._validationHandle);this._valueChanged=this._valueChanged||a},t.prototype._updated=function(){var e=this.s.isOpen;if(_&&this._value!==Q&&(this._valueChanged||this._isOpen!==e&&e)){var t=this._lastValue!==Q,n=this._gridContEl,r=n.querySelector('[data-timeslot="'+this._value+'"]');r&&setTimeout(function(){var e=r.getBoundingClientRect(),i=e.top,o=e.height,s=n.getBoundingClientRect(),a=s.top,l=s.height,c=zt(n);(i+o>a+l||i<a)&&Vt(n,Q,i-a+c-5,t)}),this._valueChanged=!1,this._lastValue=this._value}this._isOpen=e},t.defaults=p({},Be,{stepHour:0,stepMinute:30}),t._name="Timegrid",t}(sn),Ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype._template=function(e){return(n={})[Xt]=(t=this)._onKeyDown,i=n,(0,r.createElement)("div",{className:t._cssClass,ref:t._setCont},t._timeSlots.map(function(e,n){return(0,r.createElement)("div",{className:"mbsc-timegrid-row",key:n},e.map(function(e,n){var o=t._isDisabled(e.value);return(0,r.createElement)("div",{className:"mbsc-timegrid-cell"+(o?" mbsc-disabled":""),key:n},(0,r.createElement)("div",p({className:"mbsc-timegrid-item"+(t._value===e.value?" mbsc-selected":"")+(o?" mbsc-disabled":"")+t._theme,onClick:function(){return t._setTime(e)},tabIndex:o?Q:0,"data-timeslot":e.value},i),e.formattedValue))}))}));var t,n,i},t}(Wi),Zi=new g,Ji=0;function Xi(){clearTimeout(Vi),Vi=setTimeout(function(){Zi.next()},100)}function Qi(e){try{return $t(e,"*:-webkit-autofill")}catch(e){return!1}}var eo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._tag="input",t._onClick=function(){t._hidePass=!t._hidePass},t._onMouseDown=function(e){t.s.tags&&(t._preventFocus=!0)},t._onTagClear=function(e,n){if(e.stopPropagation(),e.preventDefault(),!t.s.disabled){var r=t.s.pickerValue.slice();r.splice(n,1),Gt(t._el,un,r)}},t._sizeTextArea=function(){var e,n,r,i=t._el,o=t.s.rows;i.offsetHeight&&(i.style.height="",r=i.scrollHeight-i.offsetHeight,e=i.offsetHeight+(r>0?r:0),(n=Math.round(e/24))>o?(e=24*o+(e-24*n),i.style.overflow="auto"):i.style.overflow="",e&&(i.style.height=e+"px"))},t._onAutoFill=function(){"floating"===t.s.labelStyle&&Qi(t._el)&&t.setState({isFloatingActive:!0})},t}return d(t,e),t.prototype._change=function(e){},t.prototype._checkFloating=function(){var e=this,t=this._el,n=this.s,r=Qi(t),i=this.state.hasFocus||r||!ce(this.value);if(t&&"floating"===n.labelStyle){if("select"===this._tag){var o=t,s=o.options[0];i=!!(i||o.multiple||o.value||o.selectedIndex>-1&&s&&s.label)}else this.value===Q&&(i=!(!i&&!t.value));this._valueChecked=!0,be(this,function(){e.setState({isFloatingActive:i})})}},t.prototype._mounted=function(){var e,t=this,n=this.s,r=this._el;Rt(r,ln,this._onAutoFill),"textarea"===this._tag&&(Rt(r,gn,this._sizeTextArea),this._unsubscribe=(e=this._sizeTextArea,Ji||Rt(gt,En,Xi),Ji++,Zi.subscribe(e))),this._unlisten=Fn(r,{keepFocus:!0,onBlur:function(){t.setState({hasFocus:!1,isFloatingActive:!!r.value})},onChange:function(e){if("file"===n.type){for(var r=[],i=0,o=e.target.files;i<o.length;i++){var s=o[i];r.push(s.name)}t.setState({files:r.join(", ")})}n.tags&&n.value===Q&&n.defaultValue===Q&&t.setState({value:e.target.value}),t._checkFloating(),t._change(e.target.value),t._emit("onChange",e)},onFocus:function(){t._preventFocus||t.setState({hasFocus:!0,isFloatingActive:!0}),t._preventFocus=!1},onHoverIn:function(){t._disabled||t.setState({hasHover:!0})},onHoverOut:function(){t.setState({hasHover:!1})},onInput:function(e){t._change(e.target.value)}})},t.prototype._render=function(e,t){var n=!(!e.endIconSvg&&!e.endIcon),r=e.pickerValue,i=!(!e.startIconSvg&&!e.startIcon),o=e.label!==Q||e.hasChildren,s=e.error,a=e.rtl?"right":"left",l=e.rtl?"left":"right",c=e.inputStyle,u=e.labelStyle,h="floating"===u,d=!(!h||!o||!t.isFloatingActive&&ce(e.value)),p=e.disabled===Q?t.disabled:e.disabled,f=this._prevS,m=e.modelValue!==Q?e.modelValue:e.value,g=m!==Q?m:t.value!==Q?t.value:e.defaultValue,y=this._theme+this._rtl+(s?" mbsc-error":"")+(p?" mbsc-disabled":"")+(t.hasHover?" mbsc-hover":"")+(t.hasFocus&&!p?" mbsc-focus":"");"file"!==e.type||n||(e.endIconSvg='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>',n=!0),e.tags&&(ce(r)&&(r=[]),oe(r)||(r=[r]),this._tagsArray=e.pickerMap?r.map(function(t){return e.pickerMap.get(t)}):ce(g)?[]:g.split(", ")),e.passwordToggle&&(n=!0,this._passIconClass=y+" mbsc-toggle-icon mbsc-textfield-icon mbsc-textfield-icon-"+c+" mbsc-textfield-icon-"+l+" mbsc-textfield-icon-"+c+"-"+l+(o?" mbsc-textfield-icon-"+u:""),this._hidePass=this._hidePass===Q?"password"===e.type:this._hidePass),this._hasStartIcon=i,this._hasEndIcon=n,this._hasError=s,this._disabled=p,this._value=g,this._cssClass=this._className+this._hb+y+" mbsc-form-control-wrapper mbsc-textfield-wrapper mbsc-font mbsc-textfield-wrapper-"+c+(p?" mbsc-disabled":"")+(o?" mbsc-textfield-wrapper-"+u:"")+(i?" mbsc-textfield-wrapper-has-icon-"+a+" ":"")+(n?" mbsc-textfield-wrapper-has-icon-"+l+" ":""),o&&(this._labelClass=y+" mbsc-label mbsc-label-"+u+" mbsc-label-"+c+"-"+u+(i?" mbsc-label-"+c+"-"+u+"-has-icon-"+a+" ":"")+(n?" mbsc-label-"+c+"-"+u+"-has-icon-"+l+" ":"")+(h&&this._animateFloating?" mbsc-label-floating-animate":"")+(d?" mbsc-label-floating-active":"")),this._innerClass=y+" mbsc-textfield-inner mbsc-textfield-inner-"+c+(o?" mbsc-textfield-inner-"+u:""),i&&(this._startIconClass=y+" mbsc-textfield-icon mbsc-textfield-icon-"+c+" mbsc-textfield-icon-"+a+" mbsc-textfield-icon-"+c+"-"+a+(o?" mbsc-textfield-icon-"+u:"")),n&&(this._endIconClass=y+" mbsc-textfield-icon mbsc-textfield-icon-"+c+" mbsc-textfield-icon-"+l+" mbsc-textfield-icon-"+c+"-"+l+(o?" mbsc-textfield-icon-"+u:"")),this._nativeElmClass=y+" "+(e.inputClass||"")+" mbsc-textfield mbsc-textfield-"+c+(e.dropdown?" mbsc-select":"")+(o?" mbsc-textfield-"+u+" mbsc-textfield-"+c+"-"+u:"")+(d?" mbsc-textfield-floating-active":"")+(i?" mbsc-textfield-has-icon-"+a+" mbsc-textfield-"+c+"-has-icon-"+a+(o?" mbsc-textfield-"+c+"-"+u+"-has-icon-"+a:""):"")+(n?" mbsc-textfield-has-icon-"+l+" mbsc-textfield-"+c+"-has-icon-"+l+(o?" mbsc-textfield-"+c+"-"+u+"-has-icon-"+l:""):""),("select"===this._tag||e.dropdown)&&(this._selectIconClass="mbsc-select-icon mbsc-select-icon-"+c+this._rtl+this._theme+(o?" mbsc-select-icon-"+u:"")+(i?" mbsc-select-icon-"+a:"")+(n?" mbsc-select-icon-"+l:"")),("textarea"===this._tag||e.tags)&&(this._cssClass+=" mbsc-textarea-wrapper",this._innerClass+=" mbsc-textarea-inner",this._nativeElmClass+=" mbsc-textarea","textarea"!==this._tag||g===this._prevValue&&e.inputStyle===f.inputStyle&&e.labelStyle===f.labelStyle&&e.rows===f.rows&&e.theme===f.theme||(this._shouldSize=!0),this._prevValue=g),e.tags&&(this._innerClass+=" mbsc-textfield-tags-inner"),"file"===e.type&&(this._dummyElmClass=this._nativeElmClass,this._nativeElmClass+=" mbsc-textfield-file"),this._errorClass=this._theme+this._rtl+" mbsc-error-message mbsc-error-message-"+c+(o?" mbsc-error-message-"+u:"")+(i?" mbsc-error-message-has-icon-"+a:"")+(n?" mbsc-error-message-has-icon-"+l:""),e.notch&&"outline"===c&&(this._fieldSetClass="mbsc-textfield-fieldset"+y+(i?" mbsc-textfield-fieldset-has-icon-"+a:"")+(n?" mbsc-textfield-fieldset-has-icon-"+l:""),this._legendClass="mbsc-textfield-legend"+this._theme+(d||o&&"stacked"===u?" mbsc-textfield-legend-active":"")),e.ripple&&"outline"!==e.inputStyle&&(this._rippleClass="mbsc-textfield-ripple"+this._theme+(s?" mbsc-error":"")+(t.hasFocus?" mbsc-textfield-ripple-active":"")),this._valueChecked&&(this._animateFloating=!0)},t.prototype._updated=function(){var e=this;this._shouldSize&&(this._shouldSize=!1,be(this,function(){e._sizeTextArea()})),this._checkFloating()},t.prototype._destroy=function(){Dt(this._el,ln,this._onAutoFill),Dt(this._el,gn,this._sizeTextArea),this._unsubscribe&&function(e){Ji--,Zi.unsubscribe(e),Ji||Dt(gt,En,Xi)}(this._unsubscribe),this._unlisten&&this._unlisten()},t.defaults={dropdown:!1,dropdownIcon:s,hideIcon:"eye-blocked",inputStyle:"underline",labelStyle:"stacked",placeholder:"",ripple:!1,rows:6,showIcon:"eye",type:"text"},t._name="Input",t}(sn),to=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._el&&this._el.value},set:function(e){this._el.value=e,this._checkFloating(),"textarea"===this._tag&&this._sizeTextArea()},enumerable:!0,configurable:!0}),t.prototype._template=function(e,t){return function(e,t,n,i){var o,s=n.props;s.children;var a=s.dropdown;s.dropdownIcon,s.endIcon,s.endIconSrc,s.endIconSvg,s.error;var l=s.errorMessage,c=s.hasChildren;s.hideIcon,s.hideIconSvg,s.inputClass,s.inputStyle,s.label,s.labelStyle,s.modelValue,s.notch,s.passwordToggle,s.pickerMap,s.pickerValue,s.ripple,s.rows,s.rtl,s.showIcon,s.showIconSvg,s.startIcon,s.startIconSrc,s.startIconSvg;var u=s.tags;s.theme,s.themeVariant;var h=s.type,d=f(s,["children","dropdown","dropdownIcon","endIcon","endIconSrc","endIconSvg","error","errorMessage","hasChildren","hideIcon","hideIconSvg","inputClass","inputStyle","label","labelStyle","modelValue","notch","passwordToggle","pickerMap","pickerValue","ripple","rows","rtl","showIcon","showIconSvg","startIcon","startIconSrc","startIconSvg","tags","theme","themeVariant","type"]),m=e.label,g=((o={}).onMouseDown=n._onMouseDown,o),y=d;return(0,r.createElement)("label",p({className:n._cssClass},g),(m||c)&&(0,r.createElement)("span",{className:n._labelClass},c?"":m),(0,r.createElement)("span",{className:n._innerClass},"input"===n._tag&&(0,r.createElement)("input",p({},y,{ref:n._setEl,className:n._nativeElmClass+(e.tags?" mbsc-textfield-hidden":""),disabled:n._disabled,type:e.passwordToggle?n._hidePass?"password":"text":h})),"file"===h&&(0,r.createElement)("input",{className:n._dummyElmClass,disabled:n._disabled,placeholder:e.placeholder,readOnly:!0,type:"text",value:t.files||""}),"select"===n._tag&&(0,r.createElement)("select",p({},y,{ref:n._setEl,className:"mbsc-select"+n._nativeElmClass,disabled:n._disabled}),i),"textarea"===n._tag&&(0,r.createElement)("textarea",p({},y,{ref:n._setEl,className:n._nativeElmClass,disabled:n._disabled}),!1),u&&(0,r.createElement)("span",{className:"mbsc-textfield-tags"+n._nativeElmClass},n._tagsArray.length?n._tagsArray.map(function(t,i){return t&&(0,r.createElement)("span",{key:i,className:"mbsc-textfield-tag"+n._theme+n._rtl},(0,r.createElement)("span",{className:"mbsc-textfield-tag-text"+n._theme},t),(0,r.createElement)(an,{className:"mbsc-textfield-tag-clear",onClick:function(e){return n._onTagClear(e,i)},svg:e.clearIcon,theme:e.theme}))}):(0,r.createElement)("span",{className:"mbsc-textfield-tags-placeholder"+n._theme},e.placeholder)),("select"===n._tag||a)&&(0,r.createElement)(an,{className:n._selectIconClass,svg:e.dropdownIcon,theme:e.theme}),n._hasStartIcon&&(0,r.createElement)(an,{className:n._startIconClass,name:e.startIcon,svg:e.startIconSvg,theme:e.theme}),n._hasEndIcon&&!e.passwordToggle&&(0,r.createElement)(an,{className:n._endIconClass,name:e.endIcon,svg:e.endIconSvg,theme:e.theme}),e.passwordToggle&&(0,r.createElement)(an,{onClick:n._onClick,className:n._passIconClass,name:n._hidePass?e.showIcon:e.hideIcon,svg:n._hidePass?e.showIconSvg:e.hideIconSvg,theme:e.theme}),n._hasError&&(0,r.createElement)("span",{className:n._errorClass},l),e.notch&&"outline"===e.inputStyle&&(0,r.createElement)("fieldset",{"aria-hidden":"true",className:n._fieldSetClass},(0,r.createElement)("legend",{className:n._legendClass},m&&"inline"!==e.labelStyle?m:"&nbsp;")),e.ripple&&"outline"!==e.inputStyle&&(0,r.createElement)("span",{className:n._rippleClass})))}(e,t,this,e.children)},t}(eo);function no(e,t,n){var i=t.inputComponent,o=p({defaultValue:e._value&&e._valueText||"",placeholder:t.placeholder,ref:e._setInput},t.inputProps);t.inputComponent||(i=to,o=p({"aria-expanded":!!e._isOpen,"aria-haspopup":"dialog","aria-label":t.ariaLabel,disabled:t.disabled,dropdown:t.dropdown,endIcon:t.endIcon,endIconSrc:t.endIconSrc,endIconSvg:t.endIconSvg,error:t.error,errorMessage:t.errorMessage,inputStyle:t.inputStyle,label:t.label,labelStyle:t.labelStyle,name:t.name,pickerMap:e._valueMap,pickerValue:e._value,placeholder:t.placeholder,role:"combobox",rtl:t.rtl,startIcon:t.startIcon,startIconSrc:t.startIconSrc,startIconSvg:t.startIconSvg,tags:t.tagInput===Q?t.selectMultiple:t.tagInput,theme:t.theme,themeVariant:t.themeVariant},o));var s=(0,r.createElement)(i,o);return(0,r.createElement)(r.Fragment,null,e._showInput&&s,(0,r.createElement)(ni,{activeElm:t.activeElm,anchor:e._anchor,anchorAlign:e._anchorAlign,animation:t.animation,ariaLabel:t.ariaLabel,buttons:e._buttons,cancelText:t.cancelText,closeOnEsc:t.closeOnEsc,closeOnOverlayClick:t.closeOnOverlayClick,closeOnScroll:t.closeOnScroll,closeText:t.closeText,contentPadding:!1,context:t.context,cssClass:e._cssClass,disableLeftRight:!0,display:t.display,focusElm:e._focusElm,focusOnClose:t.focusOnClose,focusOnOpen:!e._allowTyping,focusTrap:t.focusTrap,fullScreen:t.fullScreen,headerText:e._headerText,height:t.height,isOpen:e._isOpen,maxHeight:t.maxHeight,maxWidth:e._maxWidth,onClose:e._onPopupClose,onClosed:e._onPopupClosed,onKeyDown:e._onPopupKey,onOpen:e._onPopupOpen,onResize:e._onResize,setText:t.setText,showArrow:t.showArrow,showOverlay:!e._allowTyping&&t.showOverlay,ref:e._setPopup,rtl:t.rtl,scrollLock:e._scrollLock,theme:t.theme,themeVariant:t.themeVariant,touchUi:e._touchUi,windowWidth:e.state.width,width:t.width},n))}var ro=function(e){function t(t){return Hr.Datetime=Li,Hr.Calendar=mi,Hr.Timegrid=Ki,e.call(this,t)||this}return d(t,e),t.prototype._template=function(e){return no(this,e,function(e,t,n){var i=t._renderTabs,o=t._controls,s=t._activeSelect,a=t._rtl,l=t._theme;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"mbsc-datepicker mbsc-flex-col mbsc-datepicker-"+e.display+l+("inline"===e.display?" "+t._className+t._hb:"")+t._controlsClass},t._headerText&&"inline"===e.display&&(0,r.createElement)("div",{className:"mbsc-picker-header"+l+t._hb},t._headerText),i&&(0,r.createElement)(qi,{rtl:e.rtl,theme:e.theme,themeVariant:e.themeVariant,value:t._activeTab,onChange:t._changeActiveTab},o.map(function(t,n){return(0,r.createElement)($i,{key:n,rtl:e.rtl,theme:e.theme,themeVariant:e.themeVariant,value:t.name},t.title)})),t._renderControls&&(0,r.createElement)("div",{className:"mbsc-range-control-wrapper"+l},(0,r.createElement)(qi,{theme:e.theme,themeVariant:e.themeVariant,rtl:e.rtl,value:s,onChange:t._changeActiveSelect},(0,r.createElement)($i,{rtl:e.rtl,theme:e.theme,themeVariant:e.themeVariant,value:"start",className:"mbsc-range-start"+(t._tempStartText?" mbsc-range-value-nonempty":"")},(0,r.createElement)("div",{className:"mbsc-range-control-label"+l+a+("start"===s?" active":"")},e.rangeStartLabel),(0,r.createElement)("div",{className:"mbsc-range-control-value"+l+a+("start"===s?" active":"")+(t._tempStartText?"":" mbsc-range-control-text-empty")},t._tempStartText,!t._tempStartText&&(0,r.createElement)("span",null,e.rangeStartHelp)),"start"===s&&t._tempStartText&&(0,r.createElement)(an,{className:"mbsc-range-label-clear"+a,onClick:t._clearStart,svg:e.clearIcon,theme:e.theme})),(0,r.createElement)($i,{rtl:e.rtl,theme:e.theme,themeVariant:e.themeVariant,value:"end",className:"mbsc-range-end"+(t._tempEndText?" mbsc-range-value-nonempty":"")},(0,r.createElement)("div",{className:"mbsc-range-control-label"+l+a+("end"===s?" active":"")},e.rangeEndLabel),(0,r.createElement)("div",{className:"mbsc-range-control-value"+l+a+("end"===s?" active":"")+(t._tempEndText?"":" mbsc-range-control-text-empty")},t._tempEndText,!t._tempEndText&&(0,r.createElement)("span",null,e.rangeEndHelp)),"end"===s&&t._tempEndText&&(0,r.createElement)(an,{className:"mbsc-range-label-clear"+a,onClick:t._clearEnd,svg:e.clearIcon,theme:e.theme})))),(0,r.createElement)("div",{className:"mbsc-datepicker-tab-wrapper mbsc-flex mbsc-flex-1-1"+l,ref:t._setWrapper},o.map(function(e,n){var s=e.options;return(0,r.createElement)("div",{key:n,className:"mbsc-flex mbsc-datepicker-tab mbsc-datepicker-tab-"+e.name+l+(i&&e.name===t._activeTab||!i?" mbsc-datepicker-tab-active":"")+(i&&"time"===e.name?" mbsc-datepicker-time-modal":"")+(i||1===o.length?" mbsc-datepicker-tab-expand mbsc-flex-1-1":"")},(0,r.createElement)(e.Component,p({},s)))}))),n)}(e,this,e.children))},t}(Kr);new g;_&&gt.Promise},49900(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(836);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},50181(e,t,n){"use strict";n.d(t,{$1:()=>a,LJ:()=>o,wZ:()=>s});var r=n(96540),i=n(42657);const o=(e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))},s=e=>{r.useEffect(()=>{e.clearReset()},[e])},a=({result:e,errorResetBoundary:t,useErrorBoundary:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&(0,i.G)(n,[e.error,r])},50494(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function i(e,t,n){var i=r[n];return Array.isArray(i)&&(i=i[t?0:1]),i.replace("%d",e)}var o={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(e){return e+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i}};return n.default.locale(o,null,!0),o}(n(74353))},50686(e,t,n){"use strict";n.d(t,{A:()=>St});var r=n(31635);function i(e,t){var n=t&&t.cache?t.cache:f,r=t&&t.serializer?t.serializer:c;return(t&&t.strategy?t.strategy:l)(e,{cache:n,serializer:r})}function o(e,t,n,r){var i,o=null==(i=r)||"number"===typeof i||"boolean"===typeof i?r:n(r),s=t.get(o);return"undefined"===typeof s&&(s=e.call(this,r),t.set(o,s)),s}function s(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=t.get(i);return"undefined"===typeof o&&(o=e.apply(this,r),t.set(i,o)),o}function a(e,t,n,r,i){return n.bind(t,e,r,i)}function l(e,t){return a(e,this,1===e.length?o:s,t.cache.create(),t.serializer)}var c=function(){return JSON.stringify(arguments)};function u(){this.cache=Object.create(null)}u.prototype.get=function(e){return this.cache[e]},u.prototype.set=function(e,t){this.cache[e]=t};var h,d,p,f={create:function(){return new u}},m={variadic:function(e,t){return a(e,this,s,t.cache.create(),t.serializer)},monadic:function(e,t){return a(e,this,o,t.cache.create(),t.serializer)}};function g(e){return e.type===d.literal}function y(e){return e.type===d.argument}function v(e){return e.type===d.number}function _(e){return e.type===d.date}function b(e){return e.type===d.time}function w(e){return e.type===d.select}function x(e){return e.type===d.plural}function S(e){return e.type===d.pound}function E(e){return e.type===d.tag}function T(e){return!(!e||"object"!==typeof e||e.type!==p.number)}function M(e){return!(!e||"object"!==typeof e||e.type!==p.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(h||(h={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(d||(d={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(p||(p={}));var A=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,k=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function C(e){var t={};return e.replace(k,function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"long":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}var I=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function P(e){return e.replace(/^(.*?)-/,"")}var O=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,R=/^(@+)?(\+|#+)?[rs]?$/g,D=/(\*)(0+)|(#+)(0+)|(0+)/g,L=/^(0+)$/;function N(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(R,function(e,n,r){return"string"!==typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"===typeof r?r.length:0)),""}),t}function F(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function z(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!L.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function U(e){var t=F(e);return t||{}}function j(e){for(var t={},n=0,i=e;n<i.length;n++){var o=i[n];switch(o.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=P(o.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=(0,r.Cl)((0,r.Cl)((0,r.Cl)({},t),{notation:"scientific"}),o.options.reduce(function(e,t){return(0,r.Cl)((0,r.Cl)({},e),U(t))},{}));continue;case"engineering":t=(0,r.Cl)((0,r.Cl)((0,r.Cl)({},t),{notation:"engineering"}),o.options.reduce(function(e,t){return(0,r.Cl)((0,r.Cl)({},e),U(t))},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(D,function(e,n,r,i,o,s){if(n)t.minimumIntegerDigits=r.length;else{if(i&&o)throw new Error("We currently do not support maximum integer digits");if(s)throw new Error("We currently do not support exact integer digits")}return""});continue}if(L.test(o.stem))t.minimumIntegerDigits=o.stem.length;else if(O.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(O,function(e,n,r,i,o,s){return"*"===r?t.minimumFractionDigits=n.length:i&&"#"===i[0]?t.maximumFractionDigits=i.length:o&&s?(t.minimumFractionDigits=o.length,t.maximumFractionDigits=o.length+s.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""});var s=o.options[0];"w"===s?t=(0,r.Cl)((0,r.Cl)({},t),{trailingZeroDisplay:"stripIfInteger"}):s&&(t=(0,r.Cl)((0,r.Cl)({},t),N(s)))}else if(R.test(o.stem))t=(0,r.Cl)((0,r.Cl)({},t),N(o.stem));else{var a=F(o.stem);a&&(t=(0,r.Cl)((0,r.Cl)({},t),a));var l=z(o.stem);l&&(t=(0,r.Cl)((0,r.Cl)({},t),l))}}return t}var B,V={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function H(e){var t=e.hourCycle;if(void 0===t&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n,r=e.language;return"root"!==r&&(n=e.maximize().region),(V[n||""]||V[r||""]||V["".concat(r,"-001")]||V["001"])[0]}var $=new RegExp("^".concat(A.source,"*")),Y=new RegExp("".concat(A.source,"*$"));function G(e,t){return{start:e,end:t}}var q=!!String.prototype.startsWith&&"_a".startsWith("a",1),W=!!String.fromCodePoint,K=!!Object.fromEntries,Z=!!String.prototype.codePointAt,J=!!String.prototype.trimStart,X=!!String.prototype.trimEnd,Q=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},ee=!0;try{ee="a"===(null===(B=le("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===B?void 0:B[0])}catch(Et){ee=!1}var te,ne=q?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},re=W?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r="",i=e.length,o=0;i>o;){if((n=e[o++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},ie=K?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];t[o]=s}return t},oe=Z?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r,i=e.charCodeAt(t);return i<55296||i>56319||t+1===n||(r=e.charCodeAt(t+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},se=J?function(e){return e.trimStart()}:function(e){return e.replace($,"")},ae=X?function(e){return e.trimEnd()}:function(e){return e.replace(Y,"")};function le(e,t){return new RegExp(e,t)}if(ee){var ce=le("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");te=function(e,t){var n;return ce.lastIndex=t,null!==(n=ce.exec(e)[1])&&void 0!==n?n:""}}else te=function(e,t){for(var n=[];;){var r=oe(e,t);if(void 0===r||pe(r)||fe(r))break;n.push(r),t+=r>=65536?2:1}return re.apply(void 0,n)};var ue=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var i=this.char();if(123===i){if((o=this.parseArgument(e,n)).err)return o;r.push(o.val)}else{if(125===i&&e>0)break;if(35!==i||"plural"!==t&&"selectordinal"!==t){if(60===i&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(h.UNMATCHED_CLOSING_TAG,G(this.clonePosition(),this.clonePosition()))}if(60===i&&!this.ignoreTag&&he(this.peek()||0)){if((o=this.parseTag(e,t)).err)return o;r.push(o.val)}else{var o;if((o=this.parseLiteral(e,t)).err)return o;r.push(o.val)}}else{var s=this.clonePosition();this.bump(),r.push({type:d.pound,location:G(s,this.clonePosition())})}}}return{val:r,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:d.literal,value:"<".concat(r,"/>"),location:G(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(e+1,t,!0);if(i.err)return i;var o=i.val,s=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!he(this.char()))return this.error(h.INVALID_TAG,G(s,this.clonePosition()));var a=this.clonePosition();return r!==this.parseTagName()?this.error(h.UNMATCHED_CLOSING_TAG,G(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:d.tag,value:r,children:o,location:G(n,this.clonePosition())},err:null}:this.error(h.INVALID_TAG,G(s,this.clonePosition())))}return this.error(h.UNCLOSED_TAG,G(n,this.clonePosition()))}return this.error(h.INVALID_TAG,G(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&de(this.char());)this.bump();return this.message.slice(e,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var i=this.tryParseQuote(t);if(i)r+=i;else{var o=this.tryParseUnquoted(e,t);if(o)r+=o;else{var s=this.tryParseLeftAngleBracket();if(!s)break;r+=s}}}var a=G(n,this.clonePosition());return{val:{type:d.literal,value:r,location:a},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(he(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return re.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),re(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(h.EXPECT_ARGUMENT_CLOSING_BRACE,G(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(h.EMPTY_ARGUMENT,G(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(h.MALFORMED_ARGUMENT,G(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(h.EXPECT_ARGUMENT_CLOSING_BRACE,G(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:d.argument,value:r,location:G(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(h.EXPECT_ARGUMENT_CLOSING_BRACE,G(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(h.MALFORMED_ARGUMENT,G(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=te(this.message,t),r=t+n.length;return this.bumpTo(r),{value:n,location:G(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,i){var o,s=this.clonePosition(),a=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(a){case"":return this.error(h.EXPECT_ARGUMENT_TYPE,G(s,l));case"number":case"date":case"time":this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition();if((w=this.parseSimpleArgStyleIfPossible()).err)return w;if(0===(y=ae(w.val)).length)return this.error(h.EXPECT_ARGUMENT_STYLE,G(this.clonePosition(),this.clonePosition()));c={style:y,styleLocation:G(u,this.clonePosition())}}if((x=this.tryParseArgumentClose(i)).err)return x;var f=G(i,this.clonePosition());if(c&&ne(null===c||void 0===c?void 0:c.style,"::",0)){var m=se(c.style.slice(2));if("number"===a)return(w=this.parseNumberSkeletonFromString(m,c.styleLocation)).err?w:{val:{type:d.number,value:n,location:f,style:w.val},err:null};if(0===m.length)return this.error(h.EXPECT_DATE_TIME_SKELETON,f);var g=m;this.locale&&(g=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e.charAt(r);if("j"===i){for(var o=0;r+1<e.length&&e.charAt(r+1)===i;)o++,r++;var s=1+(1&o),a=o<2?1:3+(o>>1),l=H(t);for("H"!=l&&"k"!=l||(a=0);a-- >0;)n+="a";for(;s-- >0;)n=l+n}else n+="J"===i?"H":i}return n}(m,this.locale));var y={type:p.dateTime,pattern:g,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?C(g):{}};return{val:{type:"date"===a?d.date:d.time,value:n,location:f,style:y},err:null}}return{val:{type:"number"===a?d.number:"date"===a?d.date:d.time,value:n,location:f,style:null!==(o=null===c||void 0===c?void 0:c.style)&&void 0!==o?o:null},err:null};case"plural":case"selectordinal":case"select":var v=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(h.EXPECT_SELECT_ARGUMENT_OPTIONS,G(v,(0,r.Cl)({},v)));this.bumpSpace();var _=this.parseIdentifierIfPossible(),b=0;if("select"!==a&&"offset"===_.value){if(!this.bumpIf(":"))return this.error(h.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,G(this.clonePosition(),this.clonePosition()));var w;if(this.bumpSpace(),(w=this.tryParseDecimalInteger(h.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,h.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return w;this.bumpSpace(),_=this.parseIdentifierIfPossible(),b=w.val}var x,S=this.tryParsePluralOrSelectOptions(e,a,t,_);if(S.err)return S;if((x=this.tryParseArgumentClose(i)).err)return x;var E=G(i,this.clonePosition());return"select"===a?{val:{type:d.select,value:n,options:ie(S.val),location:E},err:null}:{val:{type:d.plural,value:n,options:ie(S.val),offset:b,pluralType:"plural"===a?"cardinal":"ordinal",location:E},err:null};default:return this.error(h.INVALID_ARGUMENT_TYPE,G(s,l))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(h.EXPECT_ARGUMENT_CLOSING_BRACE,G(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(h.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,G(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,r=e.split(I).filter(function(e){return e.length>0});n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var o=i[0],s=i.slice(1),a=0,l=s;a<l.length;a++)if(0===l[a].length)throw new Error("Invalid number skeleton");t.push({stem:o,options:s})}return t}(e)}catch(r){return this.error(h.INVALID_NUMBER_SKELETON,t)}return{val:{type:p.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?j(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var i,o=!1,s=[],a=new Set,l=r.value,c=r.location;;){if(0===l.length){var u=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(h.EXPECT_PLURAL_ARGUMENT_SELECTOR,h.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;c=G(u,this.clonePosition()),l=this.message.slice(u.offset,this.offset())}if(a.has(l))return this.error("select"===t?h.DUPLICATE_SELECT_ARGUMENT_SELECTOR:h.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);"other"===l&&(o=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?h.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:h.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,G(this.clonePosition(),this.clonePosition()));var f=this.parseMessage(e+1,t,n);if(f.err)return f;var m=this.tryParseArgumentClose(p);if(m.err)return m;s.push([l,{value:f.val,location:G(p,this.clonePosition())}]),a.add(l),this.bumpSpace(),l=(i=this.parseIdentifierIfPossible()).value,c=i.location}return 0===s.length?this.error("select"===t?h.EXPECT_SELECT_ARGUMENT_SELECTOR:h.EXPECT_PLURAL_ARGUMENT_SELECTOR,G(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(h.MISSING_OTHER_CLAUSE,G(this.clonePosition(),this.clonePosition())):{val:s,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,o=0;!this.isEOF();){var s=this.char();if(!(s>=48&&s<=57))break;i=!0,o=10*o+(s-48),this.bump()}var a=G(r,this.clonePosition());return i?Q(o*=n)?{val:o,err:null}:this.error(t,a):this.error(e,a)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=oe(this.message,e);if(void 0===t)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(ne(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&pe(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!==n&&void 0!==n?n:null},e}();function he(e){return e>=97&&e<=122||e>=65&&e<=90}function de(e){return 45===e||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function pe(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function fe(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function me(e){e.forEach(function(e){if(delete e.location,w(e)||x(e))for(var t in e.options)delete e.options[t].location,me(e.options[t].value);else v(e)&&T(e.style)||(_(e)||b(e))&&M(e.style)?delete e.style.location:E(e)&&me(e.children)})}function ge(e,t){void 0===t&&(t={}),t=(0,r.Cl)({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new ue(e,t).parse();if(n.err){var i=SyntaxError(h[n.err.kind]);throw i.location=n.err.location,i.originalMessage=n.err.message,i}return(null===t||void 0===t?void 0:t.captureLocation)||me(n.val),n.val}var ye;!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(ye||(ye={}));var ve,_e=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.code=n,i.originalMessage=r,i}return(0,r.C6)(t,e),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),be=function(e){function t(t,n,r,i){return e.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(r).join('", "'),'"'),ye.INVALID_VALUE,i)||this}return(0,r.C6)(t,e),t}(_e),we=function(e){function t(t,n,r){return e.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),ye.INVALID_VALUE,r)||this}return(0,r.C6)(t,e),t}(_e),xe=function(e){function t(t,n){return e.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),ye.MISSING_VALUE,n)||this}return(0,r.C6)(t,e),t}(_e);function Se(e){return"function"===typeof e}function Ee(e,t,n,r,i,o,s){if(1===e.length&&g(e[0]))return[{type:ve.literal,value:e[0].value}];for(var a=[],l=0,c=e;l<c.length;l++){var u=c[l];if(g(u))a.push({type:ve.literal,value:u.value});else if(S(u))"number"===typeof o&&a.push({type:ve.literal,value:n.getNumberFormat(t).format(o)});else{var h=u.value;if(!i||!(h in i))throw new xe(h,s);var d=i[h];if(y(u))d&&"string"!==typeof d&&"number"!==typeof d||(d="string"===typeof d||"number"===typeof d?String(d):""),a.push({type:"string"===typeof d?ve.literal:ve.object,value:d});else if(_(u)){var p="string"===typeof u.style?r.date[u.style]:M(u.style)?u.style.parsedOptions:void 0;a.push({type:ve.literal,value:n.getDateTimeFormat(t,p).format(d)})}else if(b(u)){p="string"===typeof u.style?r.time[u.style]:M(u.style)?u.style.parsedOptions:r.time.medium;a.push({type:ve.literal,value:n.getDateTimeFormat(t,p).format(d)})}else if(v(u)){(p="string"===typeof u.style?r.number[u.style]:T(u.style)?u.style.parsedOptions:void 0)&&p.scale&&(d*=p.scale||1),a.push({type:ve.literal,value:n.getNumberFormat(t,p).format(d)})}else{if(E(u)){var f=u.children,m=u.value,A=i[m];if(!Se(A))throw new we(m,"function",s);var k=A(Ee(f,t,n,r,i,o).map(function(e){return e.value}));Array.isArray(k)||(k=[k]),a.push.apply(a,k.map(function(e){return{type:"string"===typeof e?ve.literal:ve.object,value:e}}))}if(w(u)){if(!(C=u.options[d]||u.options.other))throw new be(u.value,d,Object.keys(u.options),s);a.push.apply(a,Ee(C.value,t,n,r,i))}else if(x(u)){var C;if(!(C=u.options["=".concat(d)])){if(!Intl.PluralRules)throw new _e('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',ye.MISSING_INTL_API,s);var I=n.getPluralRules(t,{type:u.pluralType}).select(d-(u.offset||0));C=u.options[I]||u.options.other}if(!C)throw new be(u.value,d,Object.keys(u.options),s);a.push.apply(a,Ee(C.value,t,n,r,i,d-(u.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce(function(e,t){var n=e[e.length-1];return n&&n.type===ve.literal&&t.type===ve.literal?n.value+=t.value:e.push(t),e},[])}(a)}function Te(e,t){return t?Object.keys(e).reduce(function(n,i){var o,s;return n[i]=(o=e[i],(s=t[i])?(0,r.Cl)((0,r.Cl)((0,r.Cl)({},o||{}),s||{}),Object.keys(o).reduce(function(e,t){return e[t]=(0,r.Cl)((0,r.Cl)({},o[t]),s[t]||{}),e},{})):o),n},(0,r.Cl)({},e)):e}function Me(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(ve||(ve={}));var Ae,ke=function(){function e(t,n,o,s){void 0===n&&(n=e.defaultLocale);var a,l=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=l.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce(function(e,t){return e.length&&t.type===ve.literal&&"string"===typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e},[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return Ee(l.ast,l.locales,l.formatters,l.formats,e,void 0,l.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=l.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(l.locales)[0]}},this.getAst=function(){return l.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),"string"===typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var c=s||{},u=(c.formatters,(0,r.Tt)(c,["formatters"]));this.ast=e.__parse(t,(0,r.Cl)((0,r.Cl)({},u),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Te(e.formats,o),this.formatters=s&&s.formatters||(void 0===(a=this.formatterCache)&&(a={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{cache:Me(a.number),strategy:m.variadic}),getDateTimeFormat:i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{cache:Me(a.dateTime),strategy:m.variadic}),getPluralRules:i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{cache:Me(a.pluralRules),strategy:m.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if("undefined"!==typeof Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"===typeof e?e:e[0])}},e.__parse=ge,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(Ae||(Ae={}));var Ce=function(e){function t(n,r,i){var o=this,s=i?i instanceof Error?i:new Error(String(i)):void 0;return(o=e.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,"\n").concat(s?"\n".concat(s.message,"\n").concat(s.stack):""))||this).code=n,"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return(0,r.C6)(t,e),t}(Error),Ie=function(e){function t(t,n){return e.call(this,Ae.UNSUPPORTED_FORMATTER,t,n)||this}return(0,r.C6)(t,e),t}(Ce),Pe=function(e){function t(t,n){return e.call(this,Ae.INVALID_CONFIG,t,n)||this}return(0,r.C6)(t,e),t}(Ce),Oe=function(e){function t(t,n){return e.call(this,Ae.MISSING_DATA,t,n)||this}return(0,r.C6)(t,e),t}(Ce),Re=function(e){function t(t,n,r){var i=e.call(this,Ae.FORMAT_ERROR,"".concat(t,"\nLocale: ").concat(n,"\n"),r)||this;return i.locale=n,i}return(0,r.C6)(t,e),t}(Ce),De=function(e){function t(t,n,r,i){var o=e.call(this,"".concat(t,"\nMessageID: ").concat(null===r||void 0===r?void 0:r.id,"\nDefault Message: ").concat(null===r||void 0===r?void 0:r.defaultMessage,"\nDescription: ").concat(null===r||void 0===r?void 0:r.description,"\n"),n,i)||this;return o.descriptor=r,o.locale=n,o}return(0,r.C6)(t,e),t}(Re),Le=function(e){function t(t,n){var r=e.call(this,Ae.MISSING_TRANSLATION,'Missing message: "'.concat(t.id,'" for locale "').concat(n,'", using ').concat(t.defaultMessage?"default message (".concat("string"===typeof t.defaultMessage?t.defaultMessage:t.defaultMessage.map(function(e){var t;return null!==(t=e.value)&&void 0!==t?t:JSON.stringify(e)}).join(),")"):"id"," as fallback."))||this;return r.descriptor=t,r}return(0,r.C6)(t,e),t}(Ce);function Ne(e,t,n){return void 0===n&&(n={}),t.reduce(function(t,r){return r in e?t[r]=e[r]:r in n&&(t[r]=n[r]),t},{})}var Fe={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(e){0},onWarn:function(e){0}};function ze(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}function Ue(e,t,n,r){var i,o=e&&e[t];if(o&&(i=o[n]),i)return i;r(new Ie("No ".concat(t," format named: ").concat(n)))}var je=n(96540);function Be(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{strategy:m.variadic}),i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{strategy:m.variadic}),i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{strategy:m.variadic}),i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.Locale).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{strategy:m.variadic}),i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.ListFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{strategy:m.variadic});var Ve=(0,r.Cl)((0,r.Cl)({},Fe),{textComponent:je.Fragment});n(4146);var He="undefined"===typeof window||window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?je.createContext(null):window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=je.createContext(null)),$e=(He.Consumer,He.Provider);function Ye(e,t){return Object.keys(e).reduce(function(n,i){return n[i]=(0,r.Cl)({timeZone:t},e[i]),n},{})}function Ge(e,t){return Object.keys((0,r.Cl)((0,r.Cl)({},e),t)).reduce(function(n,i){return n[i]=(0,r.Cl)((0,r.Cl)({},e[i]||{}),t[i]||{}),n},{})}function qe(e,t){if(!t)return e;var n=ke.formats;return(0,r.Cl)((0,r.Cl)((0,r.Cl)({},n),e),{date:Ge(Ye(n.date,t),Ye(e.date||{},t)),time:Ge(Ye(n.time,t),Ye(e.time||{},t))})}var We=function(e,t,n,i,o){var s=e.locale,a=e.formats,l=e.messages,c=e.defaultLocale,u=e.defaultFormats,h=e.fallbackOnEmptyString,p=e.onError,f=e.timeZone,m=e.defaultRichTextElements;void 0===n&&(n={id:""});var g=n.id,y=n.defaultMessage;Be(!!g,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var v=String(g),_=l&&Object.prototype.hasOwnProperty.call(l,v)&&l[v];if(Array.isArray(_)&&1===_.length&&_[0].type===d.literal)return _[0].value;if(!i&&_&&"string"===typeof _&&!m)return _.replace(/'\{(.*?)\}'/gi,"{$1}");if(i=(0,r.Cl)((0,r.Cl)({},m),i||{}),a=qe(a,f),u=qe(u,f),!_){if(!1===h&&""===_)return _;if((!y||s&&s.toLowerCase()!==c.toLowerCase())&&p(new Le(n,s)),y)try{return t.getMessageFormat(y,c,u,o).format(i)}catch(b){return p(new De('Error formatting default message for: "'.concat(v,'", rendering default message verbatim'),s,n,b)),"string"===typeof y?y:v}return v}try{return t.getMessageFormat(_,s,a,(0,r.Cl)({formatters:t},o||{})).format(i)}catch(b){p(new De('Error formatting message: "'.concat(v,'", using ').concat(y?"default message":"id"," as fallback."),s,n,b))}if(y)try{return t.getMessageFormat(y,c,u,o).format(i)}catch(b){p(new De('Error formatting the default message for: "'.concat(v,'", rendering message verbatim'),s,n,b))}return"string"===typeof _?_:"string"===typeof y?y:v},Ke=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function Ze(e,t,n){var r=e.locale,i=e.formats,o=e.onError;void 0===n&&(n={});var s=n.format,a=s&&Ue(i,"number",s,o)||{};return t(r,Ne(n,Ke,a))}function Je(e,t,n,r){void 0===r&&(r={});try{return Ze(e,t,r).format(n)}catch(i){e.onError(new Re("Error formatting number.",e.locale,i))}return String(n)}function Xe(e,t,n,r){void 0===r&&(r={});try{return Ze(e,t,r).formatToParts(n)}catch(i){e.onError(new Re("Error formatting number.",e.locale,i))}return[]}var Qe=["numeric","style"];function et(e,t,n,r,i){void 0===i&&(i={}),r||(r="second"),Intl.RelativeTimeFormat||e.onError(new _e('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',ye.MISSING_INTL_API));try{return function(e,t,n){var r=e.locale,i=e.formats,o=e.onError;void 0===n&&(n={});var s=n.format,a=!!s&&Ue(i,"relative",s,o)||{};return t(r,Ne(n,Qe,a))}(e,t,i).format(n,r)}catch(o){e.onError(new Re("Error formatting relative time.",e.locale,o))}return String(n)}var tt=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function nt(e,t,n,i){var o=e.locale,s=e.formats,a=e.onError,l=e.timeZone;void 0===i&&(i={});var c=i.format,u=(0,r.Cl)((0,r.Cl)({},l&&{timeZone:l}),c&&Ue(s,t,c,a)),h=Ne(i,tt,u);return"time"!==t||h.hour||h.minute||h.second||h.timeStyle||h.dateStyle||(h=(0,r.Cl)((0,r.Cl)({},h),{hour:"numeric",minute:"numeric"})),n(o,h)}function rt(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],s=void 0===o?{}:o,a="string"===typeof i?new Date(i||0):i;try{return nt(e,"date",t,s).format(a)}catch(l){e.onError(new Re("Error formatting date.",e.locale,l))}return String(a)}function it(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],s=void 0===o?{}:o,a="string"===typeof i?new Date(i||0):i;try{return nt(e,"time",t,s).format(a)}catch(l){e.onError(new Re("Error formatting time.",e.locale,l))}return String(a)}function ot(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],s=n[2],a=void 0===s?{}:s,l=e.timeZone,c=e.locale,u=e.onError,h=Ne(a,tt,l?{timeZone:l}:{});try{return t(c,h).formatRange(i,o)}catch(d){u(new Re("Error formatting date time range.",e.locale,d))}return String(i)}function st(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],s=void 0===o?{}:o,a="string"===typeof i?new Date(i||0):i;try{return nt(e,"date",t,s).formatToParts(a)}catch(l){e.onError(new Re("Error formatting date.",e.locale,l))}return[]}function at(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],s=void 0===o?{}:o,a="string"===typeof i?new Date(i||0):i;try{return nt(e,"time",t,s).formatToParts(a)}catch(l){e.onError(new Re("Error formatting time.",e.locale,l))}return[]}var lt=["type"];function ct(e,t,n,r){var i=e.locale,o=e.onError;void 0===r&&(r={}),Intl.PluralRules||o(new _e('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',ye.MISSING_INTL_API));var s=Ne(r,lt);try{return t(i,s).select(n)}catch(a){o(new Re("Error formatting plural.",i,a))}return"other"}var ut=["type","style"],ht=Date.now();function dt(e,t,n,r){void 0===r&&(r={});var i=pt(e,t,n,r).reduce(function(e,t){var n=t.value;return"string"!==typeof n?e.push(n):"string"===typeof e[e.length-1]?e[e.length-1]+=n:e.push(n),e},[]);return 1===i.length?i[0]:0===i.length?"":i}function pt(e,t,n,i){var o=e.locale,s=e.onError;void 0===i&&(i={}),Intl.ListFormat||s(new _e('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',ye.MISSING_INTL_API));var a=Ne(i,ut);try{var l={},c=n.map(function(e,t){if("object"===typeof e){var n=function(e){return"".concat(ht,"_").concat(e,"_").concat(ht)}(t);return l[n]=e,n}return String(e)});return t(o,a).formatToParts(c).map(function(e){return"literal"===e.type?e:(0,r.Cl)((0,r.Cl)({},e),{value:l[e.value]||e.value})})}catch(u){s(new Re("Error formatting list.",o,u))}return n}var ft=["style","type","fallback","languageDisplay"];function mt(e,t,n,r){var i=e.locale,o=e.onError;Intl.DisplayNames||o(new _e('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',ye.MISSING_INTL_API));var s=Ne(r,ft);try{return t(i,s).of(n)}catch(a){o(new Re("Error formatting display name.",i,a))}}function gt(e){var t;e.onWarn&&e.defaultRichTextElements&&"string"===typeof((t=e.messages||{})?t[Object.keys(t)[0]]:void 0)&&e.onWarn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}function yt(e,t){var n=function(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,n=Intl.ListFormat,o=Intl.DisplayNames,s=i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{cache:ze(e.dateTime),strategy:m.variadic}),a=i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{cache:ze(e.number),strategy:m.variadic}),l=i(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,(0,r.fX)([void 0],t,!1)))},{cache:ze(e.pluralRules),strategy:m.variadic});return{getDateTimeFormat:s,getNumberFormat:a,getMessageFormat:i(function(e,t,n,i){return new ke(e,t,n,(0,r.Cl)({formatters:{getNumberFormat:a,getDateTimeFormat:s,getPluralRules:l}},i||{}))},{cache:ze(e.message),strategy:m.variadic}),getRelativeTimeFormat:i(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,(0,r.fX)([void 0],e,!1)))},{cache:ze(e.relativeTime),strategy:m.variadic}),getPluralRules:l,getListFormat:i(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(n.bind.apply(n,(0,r.fX)([void 0],e,!1)))},{cache:ze(e.list),strategy:m.variadic}),getDisplayNames:i(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(o.bind.apply(o,(0,r.fX)([void 0],e,!1)))},{cache:ze(e.displayNames),strategy:m.variadic})}}(t),o=(0,r.Cl)((0,r.Cl)({},Fe),e),s=o.locale,a=o.defaultLocale,l=o.onError;return s?!Intl.NumberFormat.supportedLocalesOf(s).length&&l?l(new Oe('Missing locale data for locale: "'.concat(s,'" in Intl.NumberFormat. Using default locale: "').concat(a,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(s).length&&l&&l(new Oe('Missing locale data for locale: "'.concat(s,'" in Intl.DateTimeFormat. Using default locale: "').concat(a,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(l&&l(new Pe('"locale" was not configured, using "'.concat(a,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),o.locale=o.defaultLocale||"en"),gt(o),(0,r.Cl)((0,r.Cl)({},o),{formatters:n,formatNumber:Je.bind(null,o,n.getNumberFormat),formatNumberToParts:Xe.bind(null,o,n.getNumberFormat),formatRelativeTime:et.bind(null,o,n.getRelativeTimeFormat),formatDate:rt.bind(null,o,n.getDateTimeFormat),formatDateToParts:st.bind(null,o,n.getDateTimeFormat),formatTime:it.bind(null,o,n.getDateTimeFormat),formatDateTimeRange:ot.bind(null,o,n.getDateTimeFormat),formatTimeToParts:at.bind(null,o,n.getDateTimeFormat),formatPlural:ct.bind(null,o,n.getPluralRules),formatMessage:We.bind(null,o,n),$t:We.bind(null,o,n),formatList:dt.bind(null,o,n.getListFormat),formatListToParts:pt.bind(null,o,n.getListFormat),formatDisplayName:mt.bind(null,o,n.getDisplayNames)})}function vt(e){return e?Object.keys(e).reduce(function(t,n){var r,i=e[n];return t[n]=Se(i)?(r=i,function(e){return r(je.Children.toArray(e))}):i,t},{}):e}var _t=function(e,t,n,i){for(var o=[],s=4;s<arguments.length;s++)o[s-4]=arguments[s];var a=vt(i),l=We.apply(void 0,(0,r.fX)([e,t,n,a],o,!1));return Array.isArray(l)?je.Children.toArray(l):l},bt=function(e,t){var n=e.defaultRichTextElements,i=(0,r.Tt)(e,["defaultRichTextElements"]),o=vt(n),s=yt((0,r.Cl)((0,r.Cl)((0,r.Cl)({},Ve),i),{defaultRichTextElements:o}),t),a={locale:s.locale,timeZone:s.timeZone,fallbackOnEmptyString:s.fallbackOnEmptyString,formats:s.formats,defaultLocale:s.defaultLocale,defaultFormats:s.defaultFormats,messages:s.messages,onError:s.onError,defaultRichTextElements:o};return(0,r.Cl)((0,r.Cl)({},s),{formatMessage:_t.bind(null,a,s.formatters),$t:_t.bind(null,a,s.formatters)})};function wt(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}var xt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},t.state={cache:t.cache,intl:bt(wt(t.props),t.cache),prevConfig:wt(t.props)},t}return(0,r.C6)(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.prevConfig,r=t.cache,i=wt(e);return function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var s=n[o];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}(n,i)?null:{intl:bt(i,r),prevConfig:i}},t.prototype.render=function(){return Be(this.state.intl,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry."),je.createElement($e,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=Ve,t}(je.PureComponent);const St=xt},50751(e,t,n){"use strict";n.d(t,{A:()=>p});var r=/\s/;const i=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t};var o=/^\s+/;const s=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e};var a=n(23149),l=n(61882),c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,h=/^0o[0-7]+$/i,d=parseInt;const p=function(e){if("number"==typeof e)return e;if((0,l.A)(e))return NaN;if((0,a.A)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,a.A)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var n=u.test(e);return n||h.test(e)?d(e.slice(2),n?2:8):c.test(e)?NaN:+e}},50771(e,t){"use strict";var n=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.FlatKeys=void 0;var r=function(e){for(var t=[],i=0,o=Object.keys(e);i<o.length;i++){var s=o[i],a=e[s];if("object"===typeof a&&null!==a&&a.constructor===Object)for(var l=0,c=r(a);l<c.length;l++){var u=c[l];t.push(n([s],u,!0))}else t.push([s])}return t};t.FlatKeys=r},50925(e,t,n){"use strict";function r(){return"undefined"!==typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function i(){return"npm"}n.d(t,{Z:()=>r,e:()=>i})},50952(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"ja",weekdays:"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),weekdaysShort:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),weekdaysMin:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(e){return e+"\u65e5"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5(ddd) HH:mm"},meridiem:function(e){return e<12?"\u5348\u524d":"\u5348\u5f8c"},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u6570\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65e5",dd:"%d\u65e5",M:"1\u30f6\u6708",MM:"%d\u30f6\u6708",y:"1\u5e74",yy:"%d\u5e74"}};return n.default.locale(r,null,!0),r}(n(74353))},51564(e,t,n){"use strict";n.d(t,{B$:()=>h,ur:()=>u});var r=n(57968),i=n(64208),o=n(46403),s=n(47040),a=n(93177),l=n(18845),c=n(13235);function u(e,t){const n="fetch";(0,c.s5)(n,e),(0,c.AS)(n,()=>d(void 0,t))}function h(e){const t="fetch-body-resolved";(0,c.s5)(t,e),(0,c.AS)(t,()=>d(p))}function d(e,t=!1){t&&!(0,s.m7)()||(0,o.GS)(l.O,"fetch",function(t){return function(...n){const s=new Error,{method:u,url:h}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:m(t),method:f(n,"method")?String(n.method).toUpperCase():(0,i.ks)(t)&&f(t,"method")?String(t.method).toUpperCase():"GET"}}const t=e[0];return{url:m(t),method:f(t,"method")?String(t.method).toUpperCase():"GET"}}(n),d={args:n,fetchData:{method:u,url:h},startTimestamp:1e3*(0,a.zf)(),virtualError:s,headers:g(n)};return e||(0,c.aj)("fetch",{...d}),t.apply(l.O,n).then(async t=>(e?e(t):(0,c.aj)("fetch",{...d,endTimestamp:1e3*(0,a.zf)(),response:t}),t),e=>{(0,c.aj)("fetch",{...d,endTimestamp:1e3*(0,a.zf)(),error:e}),(0,i.bJ)(e)&&void 0===e.stack&&(e.stack=s.stack,(0,o.my)(e,"framesToPop",1));const t=(0,r.KU)(),n=t?.getOptions().enhanceFetchErrorMessages??"always";if(!1!==n&&e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{const t=new URL(d.fetchData.url).host;"always"===n?e.message=`${e.message} (${t})`:(0,o.my)(e,"__sentry_fetch_url_host__",t)}catch{}throw e})}})}function p(e){let t;try{t=e.clone()}catch{return}!async function(e,t){if(e?.body){const n=e.body,r=n.getReader(),i=setTimeout(()=>{n.cancel().then(null,()=>{})},9e4);let o=!0;for(;o;){let e;try{e=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:i}=await r.read();clearTimeout(e),i&&(t(),o=!1)}catch{o=!1}finally{clearTimeout(e)}}clearTimeout(i),r.releaseLock(),n.cancel().then(null,()=>{})}}(t,()=>{(0,c.aj)("fetch-body-resolved",{endTimestamp:1e3*(0,a.zf)(),response:e})})}function f(e,t){return!!e&&"object"===typeof e&&!!e[t]}function m(e){return"string"===typeof e?e:e?f(e,"url")?e.url:e.toString?e.toString():"":""}function g(e){const[t,n]=e;try{if("object"===typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if((0,i.ks)(t))return new Headers(t.headers)}catch{}}},51685(e,t,n){"use strict";n.d(t,{RV:()=>h,gd:()=>s,nY:()=>d,qQ:()=>u,vk:()=>a,yF:()=>r});const r="?",i=/\(error: (.*)\)/,o=/captureMessage|captureException/;function s(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0,s=0)=>{const a=[],c=e.split("\n");for(let r=n;r<c.length;r++){let e=c[r];e.length>1024&&(e=e.slice(0,1024));const n=i.test(e)?e.replace(i,"$1"):e;if(!n.match(/\S*Error: /)){for(const e of t){const t=e(n);if(t){a.push(t);break}}if(a.length>=50+s)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(l(t).function||"")&&t.pop();t.reverse(),o.test(l(t).function||"")&&(t.pop(),o.test(l(t).function||"")&&t.pop());return t.slice(0,50).map(e=>({...e,filename:e.filename||l(t).filename,function:e.function||r}))}(a.slice(s))}}function a(e){return Array.isArray(e)?s(...e):e}function l(e){return e[e.length-1]||{}}const c="<anonymous>";function u(e){try{return e&&"function"===typeof e&&e.name||c}catch{return c}}function h(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach(t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)}),e}catch{return}}}function d(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}},52098(e,t,n){"use strict";var r,i=n(96540),o=(r=i)&&"object"===typeof r&&"default"in r?r.default:r;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=!("undefined"===typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!==typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof n&&"function"!==typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!==typeof r)throw new Error("Expected WrappedComponent to be a React component.");var l,c=[];function u(){l=e(c.map(function(e){return e.props})),h.canUseDOM?t(l):n&&(l=n(l))}var h=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.peek=function(){return l},i.rewind=function(){if(i.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=l;return l=void 0,c=[],e};var s=i.prototype;return s.UNSAFE_componentWillMount=function(){c.push(this),u()},s.componentDidUpdate=function(){u()},s.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),u()},s.render=function(){return o.createElement(r,this.props)},i}(i.PureComponent);return s(h,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),s(h,"canUseDOM",a),h}}},52394(e,t,n){"use strict";n.d(t,{UH:()=>ua,T5:()=>ns,Gj:()=>x,pH:()=>z,zD:()=>U});var r=n(16443),i=n(13293),o=n(37007);Map,Symbol.iterator,Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");const s=new class{constructor(){this._apiKey="",this._fetch="undefined"!==typeof self?fetch.bind(self):"undefined"!==typeof n.g&&n.g.fetch?n.g.fetch:null,this.tileCacheSize=200}set apiKey(e){this._apiKey=e}get apiKey(){return this._apiKey}set fetch(e){this._fetch=e}get fetch(){return this._fetch}},a={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1},ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!0},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!0},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!0},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!0},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!0},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!0},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!0},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!0},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!0},WELSH:{code:"cy",flag:"name:cy",name:"Welsh",latin:!0,isMode:!1,geocoding:!0}};function l(e,t=a){for(const n of Object.values(t))if(n.code===e)return n;return null}function c(e,t=a){for(const n of Object.values(t))if(n.flag===e)return n;return null}function u(e){return null!==e&&"object"===typeof e&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&("string"===typeof e.code||null===e.code)&&"string"===typeof e.flag&&"string"===typeof e.name&&"boolean"===typeof e.latin&&"boolean"===typeof e.isMode&&"boolean"===typeof e.geocoding}function h(e,t=a){return u(e)?c(e.flag,t):"string"!==typeof e?null:function(e,t=a){return e in t?e[e]:null}(e,t)||l(e,t)||c(e,t)||null}async function d(e,t={}){if(null===s.fetch)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(""===new URL(e).searchParams.get("key").trim())throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return s.fetch(e,t)}const p={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(p);class f extends Error{constructor(e,t=""){super(`Call to enpoint ${e.url} failed with the status code ${e.status}. ${t}`),this.res=e}}const m={403:"Key is missing, invalid or restricted"};const g={info:async function(e={}){const t=new URL("geolocation/ip.json",p.maptilerApiURL);t.searchParams.set("key",e.apiKey??s.apiKey),"elevation"in e&&t.searchParams.set("elevation",e.elevation?"true":"false");const n=t.toString(),r=await d(n);if(!r.ok)throw new f(r,r.status in m?m[r.status]:"");return await r.json()}};function y(e){let t;const n=e.trim();let r;return r=n.startsWith("http://")||n.startsWith("https://")?n:null!==(t=/^maptiler:\/\/(.*)/.exec(n))?`https://api.maptiler.com/maps/${t[1]}/style.json`:`https://api.maptiler.com/maps/${n}/style.json`,r}class v{constructor(e,t,n,r,i,o,s=!1,a){this.name=e,this.variantType=t,this.id=n,this.referenceStyle=r,this.description=i,this.imageURL=o,this.deprecated=s,this.deprecationMessage=a}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(e){return this.referenceStyle.hasVariant(e)}getVariant(e){const t=this.referenceStyle.getVariant(e);return this.warnIfDeprecated(t),t}getVariants(){return this.referenceStyle.getVariants().filter(e=>e!==this).map(e=>(this.warnIfDeprecated(e),e))}getImageURL(){return this.imageURL}getExpandedStyleURL(){return y(this.getId())}warnIfDeprecated(e=this){if(!e.deprecated)return e;if(e.deprecationMessage)console.warn(e.deprecationMessage);else{const t=e.getFullName();console.warn(`Style "${t}" is deprecated and will be removed in a future version.`)}return e}}class _{constructor(e,t){this.name=e,this.id=t,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(e){this.variants[e.getType()]=e,this.orderedVariants.push(e)}hasVariant(e){return e in this.variants}getVariant(e){return e in this.variants?this.variants[e]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0].warnIfDeprecated()}}const b=[{referenceStyleID:"STREETS_V2",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default v2",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2" is deprecated, use "streets-v4" instead'},{id:"streets-v2-dark",name:"Dark v2",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-dark" is deprecated, use "streets-v4-dark" instead'},{id:"streets-v2-light",name:"Light v2",variantType:"LIGHT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-light" is deprecated, use "streets-v4-light" instead'},{id:"streets-v2-night",name:"Night v2",variantType:"NIGHT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-night" is deprecated, use "streets-v4-night" instead'},{id:"streets-v2-pastel",name:"Pastel v2",variantType:"PASTEL",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-pastel" is deprecated, use "streets-v4-pastel" instead'}]},{referenceStyleID:"STREETS_V4",name:"Streets",description:"",variants:[{id:"streets-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v4-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"BASE_V4",name:"Base",description:"",variants:[{id:"base-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"base-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"base-v4-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"base-v4-ai",name:"Base AI",variantType:"NIGHT",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC_V2",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"basic-v2" is deprecated, use "basic-v4" instead'},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",deprecated:!0,variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",deprecated:!0,variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",deprecated:!0,variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",deprecated:!0,variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",deprecated:!0,variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",deprecated:!0,description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",deprecated:!0,description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"AQUARELLE",name:"Aquarelle",description:"Watercolor map for creative use",variants:[{id:"aquarelle",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"aquarelle-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"aquarelle-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]},{referenceStyleID:"LANDSCAPE_V2",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape" is deprecated, use "landscape-v4" instead'},{id:"landscape-dark",name:"Dark",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape-dark" is deprecated, use "landscape-v4-dark" instead'},{id:"landscape-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape-vivid" is deprecated, use "landscape-v4-vivid" instead'}]},{referenceStyleID:"LANDSCAPE_V4",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"landscape-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"landscape-v4-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]}];function w(e){return new Proxy(e,{get(t,n,r){if(t.hasVariant(n))return t.getVariant(n);if(n.toString().toUpperCase()===n)return e.getDefaultVariant();return Reflect.get(t,n,r)}})}Object.entries({STREETS:"STREETS_V2",BASIC:"BASIC_V2",LANDSCAPE:"LANDSCAPE_V2"}).forEach(([e,t])=>{!function(e,t){b.find(t=>t.referenceStyleID===e)&&console.warn(`Default reference style ${e} already exists, it will be overwritten...`);const n=b.find(e=>e.referenceStyleID===t);if(!n)throw new Error(`Versioned map style not found for reference style: ${t}`);const r={...n,referenceStyleID:e};b.push(r)}(e,t)});const x=function(){const e={};for(let t=0;t<b.length;t+=1){const n=b[t],r=w(new _(n.name,n.referenceStyleID));for(let e=0;e<n.variants.length;e+=1){const t=n.variants[e],i=new v(t.name,t.variantType,t.id,r,t.description,t.imageURL,t.deprecated);r.addVariant(i)}e[n.referenceStyleID]=r}return e}();const S=6371008.8;Math.PI;const E={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let T;const M=new Uint8Array(16);const A=[];for(let La=0;La<256;++La)A.push((La+256).toString(16).slice(1));function k(e,t=0){return(A[e[t+0]]+A[e[t+1]]+A[e[t+2]]+A[e[t+3]]+"-"+A[e[t+4]]+A[e[t+5]]+"-"+A[e[t+6]]+A[e[t+7]]+"-"+A[e[t+8]]+A[e[t+9]]+"-"+A[e[t+10]]+A[e[t+11]]+A[e[t+12]]+A[e[t+13]]+A[e[t+14]]+A[e[t+15]]).toLowerCase()}const C=function(e,t,n){if(E.randomUUID&&!t&&!e)return E.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!T){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");T=crypto.getRandomValues.bind(crypto)}return T(M)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return k(r)};var I=Object.defineProperty,P=e=>{throw TypeError(e)},O=(e,t,n)=>((e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),R=(e,t,n)=>t.has(e)||P("Cannot "+n),D=(e,t,n)=>(R(e,t,"read from private field"),n?n.call(e):t.get(e)),L=(e,t,n)=>t.has(e)?P("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),N=(e,t,n,r)=>(R(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),F=(e,t,n)=>(R(e,t,"access private method"),n);let z=class extends r.Marker{addTo(e){return super.addTo(e)}};class U extends r.Popup{addTo(e){return super.addTo(e)}}r.Style;r.CanvasSource;r.GeoJSONSource;r.ImageSource;r.RasterTileSource;r.RasterDEMTileSource;r.VectorTileSource;r.VideoSource;class j extends r.NavigationControl{onAdd(e){return super.onAdd(e)}}class B extends r.GeolocateControl{onAdd(e){return super.onAdd(e)}}r.AttributionControl;class V extends r.LogoControl{onAdd(e){return super.onAdd(e)}}class H extends r.ScaleControl{onAdd(e){return super.onAdd(e)}}class $ extends r.FullscreenControl{onAdd(e){return super.onAdd(e)}}r.TerrainControl;r.BoxZoomHandler;r.ScrollZoomHandler;r.CooperativeGesturesHandler;r.KeyboardHandler;r.TwoFingersTouchPitchHandler;r.MapWheelEvent;r.MapTouchEvent;r.MapMouseEvent;const Y={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...a};function G(){if(typeof navigator>"u"){return l(Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0])||Y.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>l(e)).filter(e=>e)[0]??Y.LOCAL}const q={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",telemetryURL:"https://api.maptiler.com/metrics",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Y.STYLE,secondaryLanguage:Y.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(q);const W=C();const K=new class extends o{constructor(){super(...arguments),O(this,"primaryLanguage",q.primaryLanguage),O(this,"secondaryLanguage"),O(this,"session",!0),O(this,"caching",!0),O(this,"telemetry",!0),O(this,"_unit","metric"),O(this,"_apiKey","")}set unit(e){this._unit=e,this.emit("unit",e)}get unit(){return this._unit}set apiKey(e){this._apiKey=e,s.apiKey=e,this.emit("apiKey",e)}get apiKey(){return this._apiKey}set fetch(e){s.fetch=e}get fetch(){return s.fetch}};class Z extends V{constructor(e={}){super(e),O(this,"logoURL",""),O(this,"linkURL",""),this.logoURL=e.logoURL??q.maptilerLogoURL,this.linkURL=e.linkURL??q.maptilerURL}onAdd(e){this._map=e,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const t=window.document.createElement("a");return t.style.backgroundRepeat="no-repeat",t.style.cursor="pointer",t.style.display="block",t.style.height="23px",t.style.margin="0 0 -4px -4px",t.style.overflow="hidden",t.style.width="88px",t.style.backgroundImage=`url(${this.logoURL})`,t.style.backgroundSize="100px 30px",t.style.width="100px",t.style.height="30px",t.target="_blank",t.rel="noopener",t.href=this.linkURL,t.setAttribute("aria-label","MapTiler logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}const J="localcache_source",X="localcache",Q=typeof caches<"u",{addProtocol:ee}=r;function te(e,t){if(Q&&K.caching&&K.session&&e.host===q.maptilerApiHost){if("Source"===t&&e.href.includes("tiles.json"))return e.href.replace("https://",`${J}://`);if("Tile"===t||"Glyphs"===t)return e.href.replace("https://",`${X}://`)}return e.href}let ne;async function re(){return ne||(ne=await caches.open("maptiler_sdk")),ne}let ie=0;function oe(){ee(J,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${J}://`,"https://");const n=e;n.signal=t.signal;const r=await fetch(e.url,n),i=await r.json();return i.tiles&&i.tiles.length>0&&(i.tiles[0]+=`&last-modified=${r.headers.get("Last-Modified")}`),{data:i,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}}),ee(X,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${X}://`,"https://");const n=new URL(e.url),r=new URL(n);r.searchParams.delete("mtsid"),r.searchParams.delete("key");const i=r.toString(),o=new URL(n);o.searchParams.delete("last-modified");const s=o.toString(),a=async e=>({data:await e.arrayBuffer(),cacheControl:e.headers.get("Cache-Control"),expires:e.headers.get("Expires")}),l=await re(),c=await l.match(i);if(c)return a(c);const u=e;u.signal=t.signal;const h=await fetch(s,u);return h.status>=200&&h.status<300&&(l.put(i,h.clone()).catch(()=>{}),++ie>100&&(async function(){const e=await re(),t=await e.keys(),n=t.slice(0,Math.max(t.length-1e3,0));for(const r of n)e.delete(r)}(),ie=0)),a(h)})}function se(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===q.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",K.apiKey),K.session&&n.searchParams.append("mtsid",W)),{url:te(n,t)}}function ae(e){return(t,n)=>{if(null!=e){const r=e(t,n),i=se((null==r?void 0:r.url)??"",n);return{...r,...i}}return se(t,n)}}function le(){return Math.random().toString(36).substring(2)}function ce(e){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e)}function ue(e){const t=document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed.";if(!t)return;let n=null;if("string"==typeof e?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const r=document.createElement("div");throw r.innerHTML=t,r.classList.add("webgl-warning-div"),n.appendChild(r),new Error(t)}function he(e,t){return!(!Array.isArray(e)||2!==e.length||"get"!==e[0]||"string"!=typeof e[1]||t&&!e[1].startsWith("name:")||!t&&"name"!==e[1])}function de(e,t,n){const r=structuredClone(e),i=e=>{if("string"!=typeof e)for(let r=0;r<e.length;r+=1)he(e[r],n)?e[r]=structuredClone(t):i(e[r])};return he(r,n)?t:(i(r),r)}function pe(e,t){const n=t?/\{name:\S+\}/:/\{name\}/;return{contains:n.test(e),exactMatch:new RegExp(`^${n.source}$`).test(e)}}function fe(e,t,n){const r=n?/\{name:\S+\}/:/\{name\}/,i=e.split(r);return["concat",...i.flatMap((e,n)=>n===i.length-1?[e]:[e,t])]}function me(e){var t;const n=/\{name(?::(?<language>\S+))?\}/g,r=[];for(;;){const i=n.exec(e);if(!i)break;const o=(null==(t=i.groups)?void 0:t.language)??null;r.push(o)}return r}function ge(e){return Array.isArray(e)&&2===e.length&&"get"===e[0]&&"string"==typeof e[1]?"name"===e[1].trim()?{isLanguage:!0,localization:null}:e[1].trim().startsWith("name:")?{isLanguage:!0,localization:e[1].trim().split(":").pop()}:null:null}function ye(e){const t=[],n=structuredClone(e),r=e=>{if("string"!=typeof e)for(let n=0;n<e.length;n+=1){const i=ge(e[n]);i?t.push(i.localization):r(e[n])}};return r([n]),t}var ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class _e{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function be(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}class we extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class xe{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[n,r]of t)this.bindings[n]=r}concat(e){return new xe(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Se={kind:"null"},Ee={kind:"number"},Te={kind:"string"},Me={kind:"boolean"},Ae={kind:"color"},ke={kind:"projectionDefinition"},Ce={kind:"object"},Ie={kind:"value"},Pe={kind:"collator"},Oe={kind:"formatted"},Re={kind:"padding"},De={kind:"colorArray"},Le={kind:"numberArray"},Ne={kind:"resolvedImage"},Fe={kind:"variableAnchorOffsetCollection"};function ze(e,t){return{kind:"array",itemType:e,N:t}}function Ue(e){if("array"===e.kind){const t=Ue(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const je=[Se,Ee,Te,Me,Ae,ke,Oe,Ce,ze(Ie),Re,Le,De,Ne,Fe];function Be(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Be(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of je)if(!Be(e,t))return null}return`Expected ${Ue(e)} but found ${Ue(t)} instead.`}function Ve(e,t){return t.some(t=>t.kind===e.kind)}function He(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}function $e(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const Ye=.96422,Ge=.82521,qe=4/29,We=6/29,Ke=3*We*We,Ze=We*We*We,Je=Math.PI/180,Xe=180/Math.PI;function Qe(e){return(e%=360)<0&&(e+=360),e}function et([e,t,n,r]){let i,o;const s=nt((.2225045*(e=tt(e))+.7168786*(t=tt(t))+.0606169*(n=tt(n)))/1);e===t&&t===n?i=o=s:(i=nt((.4360747*e+.3850649*t+.1430804*n)/Ye),o=nt((.0139322*e+.0971045*t+.7141733*n)/Ge));const a=116*s-16;return[a<0?0:a,500*(i-s),200*(s-o),r]}function tt(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nt(e){return e>Ze?Math.pow(e,1/3):e/Ke+qe}function rt([e,t,n,r]){let i=(e+16)/116,o=isNaN(t)?i:i+t/500,s=isNaN(n)?i:i-n/200;return i=1*ot(i),o=Ye*ot(o),s=Ge*ot(s),[it(3.1338561*o-1.6168667*i-.4906146*s),it(-.9787684*o+1.9161415*i+.033454*s),it(.0719453*o-.2289914*i+1.4052427*s),r]}function it(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function ot(e){return e>We?e*e*e:Ke*(e-qe)}const st=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function at(e,t){return st(e,t)?e[t]:void 0}function lt(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=at(pt,e);if(t){const[e,n,r]=t;return[e/255,n/255,r/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let n=1;return[ct(e.slice(n,n+=t)),ct(e.slice(n,n+=t)),ct(e.slice(n,n+=t)),ct(e.slice(n,n+t)||"ff")]}if(e.startsWith("rgb")){const t=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=e.match(t);if(n){const[e,t,r,i,o,s,a,l,c,u,h,d]=n,p=[i||" ",a||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[r,s,c].join(""),n="%%%"===e?100:""===e?255:0;if(n){const e=[ht(+t/n,0,1),ht(+o/n,0,1),ht(+l/n,0,1),h?ut(+h,d):1];if(dt(e))return e}}return}}const n=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(n){const[e,t,r,i,o,s,a,l,c]=n,u=[r||" ",o||" ",a].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const e=[+t,ht(+i,0,100),ht(+s,0,100),l?ut(+l,c):1];if(dt(e))return function([e,t,n,r]){function i(r){const i=(r+e/30)%12,o=t*Math.min(n,1-n);return n-o*Math.max(-1,Math.min(i-3,9-i,1))}return e=Qe(e),t/=100,n/=100,[i(0),i(8),i(4),r]}(e)}}}function ct(e){return parseInt(e.padEnd(2,e),16)/255}function ut(e,t){return ht(t?e/100:e,0,1)}function ht(e,t,n){return Math.min(Math.max(t,e),n)}function dt(e){return!e.some(Number.isNaN)}const pt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ft(e,t,n){return e+n*(t-e)}function mt(e,t,n){return e.map((e,r)=>ft(e,t[r],n))}class gt{constructor(e,t,n,r=1,i=!0){this.r=e,this.g=t,this.b=n,this.a=r,i||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,n,r]))}static parse(e){if(e instanceof gt)return e;if("string"!=typeof e)return;const t=lt(e);return t?new gt(...t,!1):void 0}get rgb(){const{r:e,g:t,b:n,a:r}=this,i=r||1/0;return this.overwriteGetter("rgb",[e/i,t/i,n/i,r])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,n,r,i]=et(e),o=Math.sqrt(n*n+r*r);return[Math.round(1e4*o)?Qe(Math.atan2(r,n)*Xe):NaN,o,t,i]}(this.rgb))}get lab(){return this.overwriteGetter("lab",et(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,n,r]=this.rgb;return`rgba(${[e,t,n].map(e=>Math.round(255*e)).join(",")},${r})`}static interpolate(e,t,n,r="rgb"){switch(r){case"rgb":{const[r,i,o,s]=mt(e.rgb,t.rgb,n);return new gt(r,i,o,s,!1)}case"hcl":{const[r,i,o,s]=e.hcl,[a,l,c,u]=t.hcl;let h,d;if(isNaN(r)||isNaN(a))isNaN(r)?isNaN(a)?h=NaN:(h=a,(1===o||0===o)&&(d=l)):(h=r,(1===c||0===c)&&(d=i));else{let e=a-r;a>r&&e>180?e-=360:a<r&&r-a>180&&(e+=360),h=r+n*e}const[p,f,m,g]=function([e,t,n,r]){return e=isNaN(e)?0:e*Je,rt([n,Math.cos(e)*t,Math.sin(e)*t,r])}([h,d??ft(i,l,n),ft(o,c,n),ft(s,u,n)]);return new gt(p,f,m,g,!1)}case"lab":{const[r,i,o,s]=rt(mt(e.lab,t.lab,n));return new gt(r,i,o,s,!1)}}}}gt.black=new gt(0,0,0,1),gt.white=new gt(1,1,1,1),gt.transparent=new gt(0,0,0,0),gt.red=new gt(1,0,0,1);class yt{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const vt=["bottom","center","top"];class _t{constructor(e,t,n,r,i,o){this.text=e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i,this.verticalAlign=o}}class bt{constructor(e){this.sections=e}static fromString(e){return new bt([new _t(e,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof bt?e:bt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class wt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof wt)return e;if("number"==typeof e)return new wt([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new wt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){return new wt(mt(e.values,t.values,n))}}class xt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof xt)return e;if("number"==typeof e)return new xt([e]);if(Array.isArray(e)){for(const t of e)if("number"!=typeof t)return;return new xt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){return new xt(mt(e.values,t.values,n))}}class St{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof St)return e;if("string"==typeof e){const t=gt.parse(e);return t?new St([t]):void 0}if(!Array.isArray(e))return;const t=[];for(const n of e){if("string"!=typeof n)return;const e=gt.parse(n);if(!e)return;t.push(e)}return new St(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n,r="rgb"){const i=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let o=0;o<e.values.length;o++)i.push(gt.interpolate(e.values[o],t.values[o],n,r));return new St(i)}}class Et extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Tt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Mt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Mt)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2===0){for(let t=0;t<e.length;t+=2){const n=e[t],r=e[t+1];if("string"!=typeof n||!Tt.has(n)||!Array.isArray(r)||2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1])return}return new Mt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){const r=e.values,i=t.values;if(r.length!==i.length)throw new Et(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const o=[];for(let s=0;s<r.length;s+=2){if(r[s]!==i[s])throw new Et(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${r[s]}, to[${s}]: ${i[s]}`);o.push(r[s]);const[e,t]=r[s+1],[a,l]=i[s+1];o.push([ft(e,a,n),ft(t,l,n)])}return new Mt(o)}}class At{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new At({name:e,available:!1}):null}}class kt{constructor(e,t,n){this.from=e,this.to=t,this.transition=n}static interpolate(e,t,n){return new kt(e,t,n)}static parse(e){return e instanceof kt?e:Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]?new kt(e[0],e[1],e[2]):"object"==typeof e&&"string"==typeof e.from&&"string"==typeof e.to&&"number"==typeof e.transition?new kt(e.from,e.to,e.transition):"string"==typeof e?new kt(e,e,1):void 0}}function Ct(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?typeof r>"u"||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function It(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof kt||e instanceof gt||e instanceof yt||e instanceof bt||e instanceof wt||e instanceof xt||e instanceof St||e instanceof Mt||e instanceof At)return!0;if(Array.isArray(e)){for(const t of e)if(!It(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!It(e[t]))return!1;return!0}return!1}function Pt(e){if(null===e)return Se;if("string"==typeof e)return Te;if("boolean"==typeof e)return Me;if("number"==typeof e)return Ee;if(e instanceof gt)return Ae;if(e instanceof kt)return ke;if(e instanceof yt)return Pe;if(e instanceof bt)return Oe;if(e instanceof wt)return Re;if(e instanceof xt)return Le;if(e instanceof St)return De;if(e instanceof Mt)return Fe;if(e instanceof At)return Ne;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const e=Pt(r);if(n){if(n===e)continue;n=Ie;break}n=e}return ze(n||Ie,t)}return Ce}function Ot(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof gt||e instanceof kt||e instanceof bt||e instanceof wt||e instanceof xt||e instanceof St||e instanceof Mt||e instanceof At?e.toString():JSON.stringify(e)}class Rt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!It(e[1]))return t.error("invalid value");const n=e[1];let r=Pt(n);const i=t.expectedType;return"array"===r.kind&&0===r.N&&i&&"array"===i.kind&&("number"!=typeof i.N||0===i.N)&&(r=i),new Rt(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Dt={string:Te,number:Ee,boolean:Me,object:Ce};class Lt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in Dt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Dt[n],r++}else i=Ie;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=ze(i,o)}else{if(!Dt[i])throw new Error(`Types doesn't contain name = ${i}`);n=Dt[i]}const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,Ie);if(!n)return null;o.push(n)}return new Lt(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!Be(this.type,Pt(n)))return n;if(t===this.args.length-1)throw new Et(`Expected value to be of type ${Ue(this.type)}, but found ${Ue(Pt(n))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Nt={"to-boolean":Me,"to-color":Ae,"to-number":Ee,"to-string":Te};class Ft{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(!Nt[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=Nt[n],i=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,Ie);if(!n)return null;i.push(n)}return new Ft(r,i)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof gt)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Ct(t[0],t[1],t[2],t[3]),!n))return new gt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Et(n||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const n of this.args){t=n.evaluate(e);const r=wt.parse(t);if(r)return r}throw new Et(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const n of this.args){t=n.evaluate(e);const r=xt.parse(t);if(r)return r}throw new Et(`Could not parse numberArray from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const n of this.args){t=n.evaluate(e);const r=St.parse(t);if(r)return r}throw new Et(`Could not parse colorArray from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const n of this.args){t=n.evaluate(e);const r=Mt.parse(t);if(r)return r}throw new Et(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Et(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return bt.fromString(Ot(this.args[0].evaluate(e)));case"resolvedImage":return At.fromString(Ot(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Ot(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const zt=["Unknown","Point","LineString","Polygon"];class Ut{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?zt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=gt.parse(e),this._parseColorCache.set(e,t)),t}}class jt{constructor(e,t,n=[],r,i=new xe,o=[]){this.registry=e,this.path=n,this.key=n.map(e=>`[${e}]`).join(""),this.scope=i,this.errors=o,this.expectedType=r,this._isConstant=t}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new Lt(t,[e]):"coerce"===n?new Ft(t,[e]):e}if((null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e)&&(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[i];if(o){let i=o.parse(e,this);if(!i)return null;if(this.expectedType){const e=this.expectedType,r=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==r.kind){if("projectionDefinition"===e.kind&&["string","array"].includes(r.kind)||["color","formatted","resolvedImage"].includes(e.kind)&&["value","string"].includes(r.kind)||["padding","numberArray"].includes(e.kind)&&["value","number","array"].includes(r.kind)||"colorArray"===e.kind&&["value","string","array"].includes(r.kind)||"variableAnchorOffsetCollection"===e.kind&&["value","array"].includes(r.kind))i=n(i,e,t.typeAnnotation||"coerce");else if(this.checkSubtype(e,r))return null}else i=n(i,e,t.typeAnnotation||"assert")}if(!(i instanceof Rt)&&"resolvedImage"!==i.type.kind&&this._isConstant(i)){const e=new Ut;try{i=new Rt(i.type,i.evaluate(e))}catch(r){return this.error(r.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new jt(this.registry,this._isConstant,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new we(n,e))}checkSubtype(e,t){const n=Be(e,t);return n&&this.error(n),n}}class Bt{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let i=1;i<e.length-1;i+=2){const r=e[i];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=t.parse(e[i+1],i+1);if(!o)return null;n.push([r,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new Bt(n,r):null}outputDefined(){return this.result.outputDefined()}}class Vt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new Vt(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Ht{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Ee),r=t.parse(e[2],2,ze(t.expectedType||Ie));if(!n||!r)return null;const i=r.type;return new Ht(i.itemType,n,r)}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Et(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new Et(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new Et(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class $t{constructor(e,t){this.type=Me,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Ie),r=t.parse(e[2],2,Ie);return n&&r?Ve(n.type,[Me,Te,Ee,Se,Ie])?new $t(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ue(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!He(t,["boolean","string","number","null"]))throw new Et(`Expected first argument to be of type boolean, string, number or null, but found ${Ue(Pt(t))} instead.`);if(!He(n,["string","array"]))throw new Et(`Expected second argument to be of type array or string, but found ${Ue(Pt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Yt{constructor(e,t,n){this.type=Ee,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Ie),r=t.parse(e[2],2,Ie);if(!n||!r)return null;if(!Ve(n.type,[Me,Te,Ee,Se,Ie]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ue(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,Ee);return i?new Yt(n,r,i):null}return new Yt(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!He(t,["boolean","string","number","null"]))throw new Et(`Expected first argument to be of type boolean, string, number or null, but found ${Ue(Pt(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),He(n,["string"])){const e=n.indexOf(t,r);return-1===e?-1:[...n.slice(0,e)].length}if(He(n,["array"]))return n.indexOf(t,r);throw new Et(`Expected second argument to be of type array or string, but found ${Ue(Pt(n))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Gt{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let l=2;l<e.length-1;l+=2){let s=e[l];const a=e[l+1];Array.isArray(s)||(s=[s]);const c=t.concat(l);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,Pt(e)))return null}else n=Pt(e);if(typeof i[String(e)]<"u")return c.error("Branch labels must be unique.");i[String(e)]=o.length}const u=t.parse(a,l,r);if(!u)return null;r=r||u.type,o.push(u)}const s=t.parse(e[1],1,Ie);if(!s)return null;const a=t.parse(e[e.length-1],e.length-1,r);return!a||"value"!==s.type.kind&&t.concat(1).checkSubtype(n,s.type)?null:new Gt(n,r,s,i,o,a)}evaluate(e){const t=this.input.evaluate(e);return(Pt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class qt{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const i=t.parse(e[o],o,Me);if(!i)return null;const s=t.parse(e[o+1],o+1,n);if(!s)return null;r.push([i,s]),n=n||s.type}const i=t.parse(e[e.length-1],e.length-1,n);if(!i)return null;if(!n)throw new Error("Can't infer output type");return new qt(n,r,i)}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Wt{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,Ie),r=t.parse(e[2],2,Ee);if(!n||!r)return null;if(!Ve(n.type,[ze(Ie),Te,Ie]))return t.error(`Expected first argument to be of type array or string, but found ${Ue(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,Ee);return i?new Wt(n.type,n,r,i):null}return new Wt(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),He(t,["string"]))return[...t].slice(n,r).join("");if(He(t,["array"]))return t.slice(n,r);throw new Et(`Expected first argument to be of type array or string, but found ${Ue(Pt(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Kt(e,t){const n=e.length-1;let r,i,o=0,s=n,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),r=e[a],i=e[a+1],r<=t){if(a===n||t<i)return a;o=a+1}else{if(!(r>t))throw new Et("Input is not a number.");s=a-1}return 0}class Zt{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,Ee);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],s=e[o+1],a=o,l=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const c=t.parse(s,l,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new Zt(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);return n[Kt(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Jt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xt,Qt;var en=Jt(function(){if(Qt)return Xt;function e(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}return Qt=1,Xt=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var s=0,a=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},Xt}());class tn{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,s]of i)this.labels.push(o),this.outputs.push(s)}static interpolationFactor(e,t,n,r){let i=0;if("exponential"===e.name)i=nn(t,e.base,n,r);else if("linear"===e.name)i=nn(t,1,n,r);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new en(o[0],o[1],o[2],o[3]).solve(nn(t,1,n,r))}return i}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,Ee),!i)return null;const s=[];let a=null;"interpolate-hcl"!==n&&"interpolate-lab"!==n||t.expectedType==De?t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType):a=Ae;for(let l=0;l<o.length;l+=2){const e=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(s.length&&s[s.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(n,i,a);if(!c)return null;a=a||c.type,s.push([e,c])}return $e(a,Ee)||$e(a,ke)||$e(a,Ae)||$e(a,Re)||$e(a,Le)||$e(a,De)||$e(a,Fe)||$e(a,ze(Ee))?new tn(a,n,r,i,s):t.error(`Type ${Ue(a)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=Kt(t,r),s=t[o],a=t[o+1],l=tn.interpolationFactor(this.interpolation,r,s,a),c=n[o].evaluate(e),u=n[o+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ft(c,u,l);case"color":return gt.interpolate(c,u,l);case"padding":return wt.interpolate(c,u,l);case"colorArray":return St.interpolate(c,u,l);case"numberArray":return xt.interpolate(c,u,l);case"variableAnchorOffsetCollection":return Mt.interpolate(c,u,l);case"array":return mt(c,u,l);case"projectionDefinition":return kt.interpolate(c,u,l)}case"interpolate-hcl":switch(this.type.kind){case"color":return gt.interpolate(c,u,l,"hcl");case"colorArray":return St.interpolate(c,u,l,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return gt.interpolate(c,u,l,"lab");case"colorArray":return St.interpolate(c,u,l,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function nn(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}gt.interpolate,wt.interpolate,xt.interpolate,St.interpolate,Mt.interpolate;class rn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const o of e.slice(1)){const e=t.parse(o,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}if(!n)throw new Error("No output type");return r&&i.some(e=>Be(r,e.type))?new rn(Ie,i):new rn(n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(e),n&&n instanceof At&&!n.available&&(t||(t=n.name),n=null,r===this.args.length&&(n=t)),null!==n)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function on(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function sn(e,t,n,r){return 0===r.compare(t,n)}function an(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=Me,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,Ie);if(!o)return null;if(!on(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${Ue(o.type)}'.`);let s=t.parse(e[2],2,Ie);if(!s)return null;if(!on(n,s.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${Ue(s.type)}'.`);if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return t.error(`Cannot compare types '${Ue(o.type)}' and '${Ue(s.type)}'.`);r&&("value"===o.type.kind&&"value"!==s.type.kind?o=new Lt(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new Lt(o.type,[s])));let a=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return t.error("Cannot use collator to compare non-string types.");if(a=t.parse(e[3],3,Pe),!a)return null}return new i(o,s,a)}evaluate(i){const o=this.lhs.evaluate(i),s=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=Pt(o),n=Pt(s);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new Et(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=Pt(o),n=Pt(s);if("string"!==e.kind||"string"!==n.kind)return t(i,o,s)}return this.collator?n(i,o,s,this.collator.evaluate(i)):t(i,o,s)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const ln=an("==",function(e,t,n){return t===n},sn),cn=an("!=",function(e,t,n){return t!==n},function(e,t,n,r){return!sn(0,t,n,r)}),un=an("<",function(e,t,n){return t<n},function(e,t,n,r){return r.compare(t,n)<0}),hn=an(">",function(e,t,n){return t>n},function(e,t,n,r){return r.compare(t,n)>0}),dn=an("<=",function(e,t,n){return t<=n},function(e,t,n,r){return r.compare(t,n)<=0}),pn=an(">=",function(e,t,n){return t>=n},function(e,t,n,r){return r.compare(t,n)>=0});class fn{constructor(e,t,n){this.type=Pe,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Me);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Me);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,Te),!o)?null:new fn(r,i,o)}evaluate(e){return new yt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class mn{constructor(e,t,n,r,i){this.type=Te,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Ee);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,Te),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,Te),!o))return null;let s=null;if(r["min-fraction-digits"]&&(s=t.parse(r["min-fraction-digits"],1,Ee),!s))return null;let a=null;return r["max-fraction-digits"]&&(a=t.parse(r["max-fraction-digits"],1,Ee),!a)?null:new mn(n,i,o,s,a)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class gn{constructor(e){this.type=Oe,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,Ee),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,ze(Te)),!o))return null;let s=null;if(n["text-color"]&&(s=t.parse(n["text-color"],1,Ae),!s))return null;let a=null;if(n["vertical-align"]){if("string"==typeof n["vertical-align"]&&!vt.includes(n["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${n["vertical-align"]}' instead.`);if(a=t.parse(n["vertical-align"],1,Te),!a)return null}const l=r[r.length-1];l.scale=e,l.font=o,l.textColor=s,l.verticalAlign=a}else{const n=t.parse(e[o],1,Ie);if(!n)return null;const s=n.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null,verticalAlign:null})}}return new gn(r)}evaluate(e){return new bt(this.sections.map(t=>{const n=t.content.evaluate(e);return Pt(n)===Ne?new _t("",n,null,null,null,t.verticalAlign?t.verticalAlign.evaluate(e):null):new _t(Ot(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null,t.verticalAlign?t.verticalAlign.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class yn{constructor(e){this.type=Ne,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,Te);return n?new yn(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=At.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class vn{constructor(e){this.type=Ee,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${Ue(n.type)} instead.`):new vn(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new Et(`Expected value to be of type string or array, but found ${Ue(Pt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const _n=8192;function bn(e,t){const n=function(e){return(180+e)/360}(e[0]),r=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}(e[1]),i=Math.pow(2,t.z);return[Math.round(n*i*_n),Math.round(r*i*_n)]}function wn(e,t){const n=Math.pow(2,t.z),r=(e[0]/_n+t.x)/n,i=(e[1]/_n+t.y)/n;return[xn(r),Sn(i)]}function xn(e){return 360*e-180}function Sn(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function En(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Tn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Mn(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function An(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],s=e[1]-n[1];return r*s-o*i===0&&r*o<=0&&i*s<=0}function kn(e,t,n,r){const i=[t[0]-e[0],t[1]-e[1]];return 0!==function(e,t){return e[0]*t[1]-e[1]*t[0]}([r[0]-n[0],r[1]-n[1]],i)&&!(!Dn(e,t,n,r)||!Dn(n,r,e,t))}function Cn(e,t,n){for(const r of n)for(let n=0;n<r.length-1;++n)if(kn(e,t,r[n],r[n+1]))return!0;return!1}function In(e,t,n=!1){let r=!1;for(const i of t)for(let t=0;t<i.length-1;t++){if(An(e,i[t],i[t+1]))return n;Mn(e,i[t],i[t+1])&&(r=!r)}return r}function Pn(e,t){for(const n of t)if(In(e,n))return!0;return!1}function On(e,t){for(const n of e)if(!In(n,t))return!1;for(let n=0;n<e.length-1;++n)if(Cn(e[n],e[n+1],t))return!1;return!0}function Rn(e,t){for(const n of t)if(On(e,n))return!0;return!1}function Dn(e,t,n,r){const i=e[0]-n[0],o=e[1]-n[1],s=t[0]-n[0],a=t[1]-n[1],l=r[0]-n[0],c=r[1]-n[1],u=i*c-l*o,h=s*c-l*a;return u>0&&h<0||u<0&&h>0}function Ln(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const s=bn(e[i][r],n);En(t,s),o.push(s)}r.push(o)}return r}function Nn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=Ln(e[i],t,n);r.push(o)}return r}function Fn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}En(t,e)}function zn(e,t,n,r){const i=Math.pow(2,r.z)*_n,o=[r.x*_n,r.y*_n],s=[];for(const a of e)for(const e of a){const r=[e.x+o[0],e.y+o[1]];Fn(r,t,n,i),s.push(r)}return s}function Un(e,t,n,r){const i=Math.pow(2,r.z)*_n,o=[r.x*_n,r.y*_n],s=[];for(const a of e){const e=[];for(const n of a){const r=[n.x+o[0],n.y+o[1]];En(t,r),e.push(r)}s.push(e)}if(t[2]-t[0]<=i/2){!function(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}(t);for(const e of s)for(const r of e)Fn(r,t,n,i)}return s}class jn{constructor(e,t){this.type=Me,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(It(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const n of t.features){const{type:t,coordinates:r}=n.geometry;"Polygon"===t&&e.push(r),"MultiPolygon"===t&&e.push(...r)}if(e.length){return new jn(t,{type:"MultiPolygon",coordinates:e})}}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new jn(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new jn(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=Ln(t.coordinates,r,i),s=zn(e.geometry(),n,r,i);if(!Tn(n,r))return!1;for(const e of s)if(!In(e,o))return!1}if("MultiPolygon"===t.type){const o=Nn(t.coordinates,r,i),s=zn(e.geometry(),n,r,i);if(!Tn(n,r))return!1;for(const e of s)if(!Pn(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=Ln(t.coordinates,r,i),s=Un(e.geometry(),n,r,i);if(!Tn(n,r))return!1;for(const e of s)if(!On(e,o))return!1}if("MultiPolygon"===t.type){const o=Nn(t.coordinates,r,i),s=Un(e.geometry(),n,r,i);if(!Tn(n,r))return!1;for(const e of s)if(!Rn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Bn{constructor(e=[],t=(e,t)=>e<t?-1:e>t?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1);const o=r+1;if(o<this.length&&n(t[o],t[r])<0&&(r=o),n(t[r],i)>=0)break;t[e]=t[r],e=r}t[e]=i}}function Vn(e){let t=0;for(let n,r,i=0,o=e.length,s=o-1;i<o;s=i++)n=e[i],r=e[s],t+=(r.x-n.x)*(n.y+r.y);return t}const Hn=1/298.257223563,$n=Hn*(2-Hn),Yn=Math.PI/180;class Gn{constructor(e){const t=6378.137*Yn*1e3,n=Math.cos(e*Yn),r=1/(1-$n*(1-n*n)),i=Math.sqrt(r);this.kx=t*i*n,this.ky=t*i*r*(1-$n)}distance(e,t){const n=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(n*n+r*r)}pointOnLine(e,t){let n,r,i,o,s=1/0;for(let a=0;a<e.length-1;a++){let l=e[a][0],c=e[a][1],u=this.wrap(e[a+1][0]-l)*this.kx,h=(e[a+1][1]-c)*this.ky,d=0;(0!==u||0!==h)&&(d=(this.wrap(t[0]-l)*this.kx*u+(t[1]-c)*this.ky*h)/(u*u+h*h),d>1?(l=e[a+1][0],c=e[a+1][1]):d>0&&(l+=u/this.kx*d,c+=h/this.ky*d)),u=this.wrap(t[0]-l)*this.kx,h=(t[1]-c)*this.ky;const p=u*u+h*h;p<s&&(s=p,n=l,r=c,i=a,o=d)}return{point:[n,r],index:i,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function qn(e,t){return t[0]-e[0]}function Wn(e){return e[1]-e[0]+1}function Kn(e,t){return e[1]>=e[0]&&e[1]<t}function Zn(e,t){if(e[0]>e[1])return[null,null];const n=Wn(e);if(t){if(2===n)return[e,null];const t=Math.floor(n/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===n)return[e,null];const r=Math.floor(n/2)-1;return[[e[0],e[0]+r],[e[0]+r+1,e[1]]]}function Jn(e,t){if(!Kn(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let r=t[0];r<=t[1];++r)En(n,e[r]);return n}function Xn(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const e of n)En(t,e);return t}function Qn(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function er(e,t,n){if(!Qn(e)||!Qn(t))return NaN;let r=0,i=0;return e[2]<t[0]&&(r=t[0]-e[2]),e[0]>t[2]&&(r=e[0]-t[2]),e[1]>t[3]&&(i=e[1]-t[3]),e[3]<t[1]&&(i=t[1]-e[3]),n.distance([0,0],[r,i])}function tr(e,t,n){const r=n.pointOnLine(t,e);return n.distance(e,r.point)}function nr(e,t,n,r,i){const o=Math.min(tr(e,[n,r],i),tr(t,[n,r],i)),s=Math.min(tr(n,[e,t],i),tr(r,[e,t],i));return Math.min(o,s)}function rr(e,t,n,r,i){if(!Kn(t,e.length)||!Kn(r,n.length))return 1/0;let o=1/0;for(let s=t[0];s<t[1];++s){const t=e[s],a=e[s+1];for(let e=r[0];e<r[1];++e){const r=n[e],s=n[e+1];if(kn(t,a,r,s))return 0;o=Math.min(o,nr(t,a,r,s,i))}}return o}function ir(e,t,n,r,i){if(!Kn(t,e.length)||!Kn(r,n.length))return NaN;let o=1/0;for(let s=t[0];s<=t[1];++s)for(let t=r[0];t<=r[1];++t)if(o=Math.min(o,i.distance(e[s],n[t])),0===o)return o;return o}function or(e,t,n){if(In(e,t,!0))return 0;let r=1/0;for(const i of t){const t=i[0],o=i[i.length-1];if(t!==o&&(r=Math.min(r,tr(e,[o,t],n)),0===r))return r;const s=n.pointOnLine(i,e);if(r=Math.min(r,n.distance(e,s.point)),0===r)return r}return r}function sr(e,t,n,r){if(!Kn(t,e.length))return NaN;for(let o=t[0];o<=t[1];++o)if(In(e[o],n,!0))return 0;let i=1/0;for(let o=t[0];o<t[1];++o){const t=e[o],s=e[o+1];for(const e of n)for(let n=0,o=e.length,a=o-1;n<o;a=n++){const o=e[a],l=e[n];if(kn(t,s,o,l))return 0;i=Math.min(i,nr(t,s,o,l,r))}}return i}function ar(e,t){for(const n of e)for(const e of n)if(In(e,t,!0))return!0;return!1}function lr(e,t,n,r=1/0){const i=Xn(e),o=Xn(t);if(r!==1/0&&er(i,o,n)>=r)return r;if(Tn(i,o)){if(ar(e,t))return 0}else if(ar(t,e))return 0;let s=1/0;for(const a of e)for(let e=0,r=a.length,i=r-1;e<r;i=e++){const r=a[i],o=a[e];for(const e of t)for(let t=0,i=e.length,a=i-1;t<i;a=t++){const i=e[a],l=e[t];if(kn(r,o,i,l))return 0;s=Math.min(s,nr(r,o,i,l,n))}}return s}function cr(e,t,n,r,i,o){if(!o)return;const s=er(Jn(r,o),i,n);s<t&&e.push([s,o,[0,0]])}function ur(e,t,n,r,i,o,s){if(!o||!s)return;const a=er(Jn(r,o),Jn(i,s),n);a<t&&e.push([a,o,s])}function hr(e,t,n,r,i=1/0){let o=Math.min(r.distance(e[0],n[0][0]),i);if(0===o)return o;const s=new Bn([[0,[0,e.length-1],[0,0]]],qn),a=Xn(n);for(;s.length>0;){const i=s.pop();if(i[0]>=o)continue;const l=i[1],c=t?50:100;if(Wn(l)<=c){if(!Kn(l,e.length))return NaN;if(t){const t=sr(e,l,n,r);if(isNaN(t)||0===t)return t;o=Math.min(o,t)}else for(let t=l[0];t<=l[1];++t){const i=or(e[t],n,r);if(o=Math.min(o,i),0===o)return 0}}else{const n=Zn(l,t);cr(s,o,r,e,a,n[0]),cr(s,o,r,e,a,n[1])}}return o}function dr(e,t,n,r,i,o=1/0){let s=Math.min(o,i.distance(e[0],n[0]));if(0===s)return s;const a=new Bn([[0,[0,e.length-1],[0,n.length-1]]],qn);for(;a.length>0;){const o=a.pop();if(o[0]>=s)continue;const l=o[1],c=o[2],u=t?50:100,h=r?50:100;if(Wn(l)<=u&&Wn(c)<=h){if(!Kn(l,e.length)&&Kn(c,n.length))return NaN;let o;if(t&&r)o=rr(e,l,n,c,i),s=Math.min(s,o);else if(t&&!r){const t=e.slice(l[0],l[1]+1);for(let e=c[0];e<=c[1];++e)if(o=tr(n[e],t,i),s=Math.min(s,o),0===s)return s}else if(!t&&r){const t=n.slice(c[0],c[1]+1);for(let n=l[0];n<=l[1];++n)if(o=tr(e[n],t,i),s=Math.min(s,o),0===s)return s}else o=ir(e,l,n,c,i),s=Math.min(s,o)}else{const o=Zn(l,t),u=Zn(c,r);ur(a,s,i,e,n,o[0],u[0]),ur(a,s,i,e,n,o[0],u[1]),ur(a,s,i,e,n,o[1],u[0]),ur(a,s,i,e,n,o[1],u[1])}}return s}function pr(e,t){const n=e.geometry();if(0===n.length||0===n[0].length)return NaN;const r=function(e){if(e.length<=1)return[e];const t=[];let n,r;for(const i of e){const e=Vn(i);0!==e&&(i.area=Math.abs(e),void 0===r&&(r=e<0),r===e<0?(n&&t.push(n),n=[i]):n.push(i))}return n&&t.push(n),t}(n).map(t=>t.map(t=>t.map(t=>wn([t.x,t.y],e.canonical)))),i=new Gn(r[0][0][0][1]);let o=1/0;for(const s of t)for(const e of r){switch(s.type){case"Point":o=Math.min(o,hr([s.coordinates],!1,e,i,o));break;case"LineString":o=Math.min(o,hr(s.coordinates,!0,e,i,o));break;case"Polygon":o=Math.min(o,lr(e,s.coordinates,i,o))}if(0===o)return o}return o}function fr(e){return"MultiPolygon"===e.type?e.coordinates.map(e=>({type:"Polygon",coordinates:e})):"MultiLineString"===e.type?e.coordinates.map(e=>({type:"LineString",coordinates:e})):"MultiPoint"===e.type?e.coordinates.map(e=>({type:"Point",coordinates:e})):[e]}class mr{constructor(e,t){this.type=Ee,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(It(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new mr(t,t.features.map(e=>fr(e.geometry)).flat());if("Feature"===t.type)return new mr(t,fr(t.geometry));if("type"in t&&"coordinates"in t)return new mr(t,fr(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=e.geometry(),r=n.flat().map(t=>wn([t.x,t.y],e.canonical));if(0===n.length)return NaN;const i=new Gn(r[0][1]);let o=1/0;for(const s of t){switch(s.type){case"Point":o=Math.min(o,dr(r,!1,[s.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,dr(r,!1,s.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,hr(r,!1,s.coordinates,i,o))}if(0===o)return o}return o}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=e.geometry(),r=n.flat().map(t=>wn([t.x,t.y],e.canonical));if(0===n.length)return NaN;const i=new Gn(r[0][1]);let o=1/0;for(const s of t){switch(s.type){case"Point":o=Math.min(o,dr(r,!0,[s.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,dr(r,!0,s.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,hr(r,!0,s.coordinates,i,o))}if(0===o)return o}return o}(e,this.geometries);if("Polygon"===e.geometryType())return pr(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class gr{constructor(e){this.type=Ie,this.key=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=e[1];return null==n?t.error("Global state property must be defined."):"string"!=typeof n?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new gr(n)}evaluate(e){var t;const n=null===(t=e.globals)||void 0===t?void 0:t.globalState;return n&&0!==Object.keys(n).length?at(n,this.key):null}eachChild(){}outputDefined(){return!1}}const yr={"==":ln,"!=":cn,">":hn,"<":un,">=":pn,"<=":dn,array:Lt,at:Ht,boolean:Lt,case:qt,coalesce:rn,collator:fn,format:gn,image:yn,in:$t,"index-of":Yt,interpolate:tn,"interpolate-hcl":tn,"interpolate-lab":tn,length:vn,let:Bt,literal:Rt,match:Gt,number:Lt,"number-format":mn,object:Lt,slice:Wt,step:Zt,string:Lt,"to-boolean":Ft,"to-color":Ft,"to-number":Ft,"to-string":Ft,var:Vt,within:jn,distance:mr,"global-state":gr};class vr{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const n=e[0],r=vr.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=o.filter(([t])=>!Array.isArray(t)||t.length===e.length-1);let a=null;for(const[l,c]of s){a=new jt(t.registry,Sr,t.path,null,t.scope);const r=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(l)?l[t-1]:l.type,s=a.parse(n,1+r.length,i);if(!s){o=!0;break}r.push(s)}if(!o){if(Array.isArray(l)&&l.length!==r.length){a.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);continue}for(let e=0;e<r.length;e++){const t=Array.isArray(l)?l[e]:l.type,n=r[e];a.concat(e+1).checkSubtype(t,n.type)}if(0===a.errors.length)return new vr(n,i,c,r)}}if(1===s.length)t.errors.push(...a.errors);else{const n=(s.length?s:o).map(([e])=>function(e){return Array.isArray(e)?`(${e.map(Ue).join(", ")})`:`(${Ue(e.type)}...)`}(e)).join(" | "),r=[];for(let i=1;i<e.length;i++){const n=t.parse(e[i],1+r.length);if(!n)return null;r.push(Ue(n.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){vr.definitions=t;for(const n in t)e[n]=vr}}function _r(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,s=Ct(t,n,r,o);if(s)throw new Et(s);return new gt(t/255,n/255,r/255,o,!1)}function br(e,t){return e in t}function wr(e,t){const n=t[e];return typeof n>"u"?null:n}function xr(e){return{type:e}}function Sr(e){if(e instanceof Vt)return Sr(e.boundExpression);if(e instanceof vr&&"error"===e.name)return!1;if(e instanceof fn)return!1;if(e instanceof jn)return!1;if(e instanceof mr)return!1;if(e instanceof gr)return!1;const t=e instanceof Ft||e instanceof Lt;let n=!0;return e.eachChild(e=>{n=t?n&&Sr(e):n&&e instanceof Rt}),!!n&&(Er(e)&&Mr(e,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]))}function Er(e){if(e instanceof vr){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof jn||e instanceof mr)return!1;let t=!0;return e.eachChild(e=>{t&&!Er(e)&&(t=!1)}),t}function Tr(e){if(e instanceof vr&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!Tr(e)&&(t=!1)}),t}function Mr(e,t){if(e instanceof vr&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(e=>{n&&!Mr(e,t)&&(n=!1)}),n}function Ar(e){return{result:"success",value:e}}function kr(e){return{result:"error",value:e}}function Cr(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Ir(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Pr(e){return!!e.expression&&e.expression.interpolated}function Or(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Rr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&Pt(e)===Ce}vr.register(yr,{error:[{kind:"error"},[Te],(e,[t])=>{throw new Et(t.evaluate(e))}],typeof:[Te,[Ie],(e,[t])=>Ue(Pt(t.evaluate(e)))],"to-rgba":[ze(Ee,4),[Ae],(e,[t])=>{const[n,r,i,o]=t.evaluate(e).rgb;return[255*n,255*r,255*i,o]}],rgb:[Ae,[Ee,Ee,Ee],_r],rgba:[Ae,[Ee,Ee,Ee,Ee],_r],has:{type:Me,overloads:[[[Te],(e,[t])=>br(t.evaluate(e),e.properties())],[[Te,Ce],(e,[t,n])=>br(t.evaluate(e),n.evaluate(e))]]},get:{type:Ie,overloads:[[[Te],(e,[t])=>wr(t.evaluate(e),e.properties())],[[Te,Ce],(e,[t,n])=>wr(t.evaluate(e),n.evaluate(e))]]},"feature-state":[Ie,[Te],(e,[t])=>wr(t.evaluate(e),e.featureState||{})],properties:[Ce,[],e=>e.properties()],"geometry-type":[Te,[],e=>e.geometryType()],id:[Ie,[],e=>e.id()],zoom:[Ee,[],e=>e.globals.zoom],"heatmap-density":[Ee,[],e=>e.globals.heatmapDensity||0],elevation:[Ee,[],e=>e.globals.elevation||0],"line-progress":[Ee,[],e=>e.globals.lineProgress||0],accumulated:[Ie,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[Ee,xr(Ee),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[Ee,xr(Ee),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:Ee,overloads:[[[Ee,Ee],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[Ee],(e,[t])=>-t.evaluate(e)]]},"/":[Ee,[Ee,Ee],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[Ee,[Ee,Ee],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[Ee,[],()=>Math.LN2],pi:[Ee,[],()=>Math.PI],e:[Ee,[],()=>Math.E],"^":[Ee,[Ee,Ee],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[Ee,[Ee],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Ee,[Ee],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Ee,[Ee],(e,[t])=>Math.log(t.evaluate(e))],log2:[Ee,[Ee],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Ee,[Ee],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Ee,[Ee],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Ee,[Ee],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Ee,[Ee],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Ee,[Ee],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Ee,[Ee],(e,[t])=>Math.atan(t.evaluate(e))],min:[Ee,xr(Ee),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[Ee,xr(Ee),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[Ee,[Ee],(e,[t])=>Math.abs(t.evaluate(e))],round:[Ee,[Ee],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ee,[Ee],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Ee,[Ee],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Me,[Te,Ie],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Me,[Ie],(e,[t])=>e.id()===t.value],"filter-type-==":[Me,[Te],(e,[t])=>e.geometryType()===t.value],"filter-<":[Me,[Te,Ie],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Me,[Ie],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[Me,[Te,Ie],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Me,[Ie],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[Me,[Te,Ie],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Me,[Ie],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[Me,[Te,Ie],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Me,[Ie],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[Me,[Ie],(e,[t])=>t.value in e.properties()],"filter-has-id":[Me,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Me,[ze(Te)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Me,[ze(Ie)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Me,[Te,ze(Ie)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Me,[Te,ze(Ie)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Me,overloads:[[[Me,Me],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[xr(Me),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Me,overloads:[[[Me,Me],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[xr(Me),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Me,[Me],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Me,[Te],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[Te,[Te],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Te,[Te],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Te,xr(Ie),(e,t)=>t.map(t=>Ot(t.evaluate(e))).join("")],"resolved-locale":[Te,[Pe],(e,[t])=>t.evaluate(e).resolvedLocale()]});class Dr{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Ut,this._defaultValue=t?function(e){if("color"===e.type&&Rr(e.default))return new gt(0,0,0,0);switch(e.type){case"color":return gt.parse(e.default)||null;case"padding":return wt.parse(e.default)||null;case"numberArray":return xt.parse(e.default)||null;case"colorArray":return St.parse(e.default)||null;case"variableAnchorOffsetCollection":return Mt.parse(e.default)||null;case"projectionDefinition":return kt.parse(e.default)||null;default:return void 0===e.default?null:e.default}}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!==e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Et(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}}function Lr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in yr}function Nr(e,t){const n=new jt(yr,Sr,[],t?function(e){const t={color:Ae,string:Te,number:Ee,enum:Te,boolean:Me,formatted:Oe,padding:Re,numberArray:Le,colorArray:De,projectionDefinition:ke,resolvedImage:Ne,variableAnchorOffsetCollection:Fe};return"array"===e.type?ze(t[e.value]||Ie,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Ar(new Dr(r,t)):kr(n.errors)}class Fr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Tr(t.expression),this.globalStateRefs=Br(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class zr{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Tr(t.expression),this.globalStateRefs=Br(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?tn.interpolationFactor(this.interpolationType,e,t,n):0}}function Ur(e,t){const n=Nr(e,t);if("error"===n.result)return n;const r=n.value.expression,i=Er(r);if(!i&&!Cr(t))return kr([new we("","data expressions not supported")]);const o=Mr(r,["zoom"]);if(!o&&!Ir(t))return kr([new we("","zoom expressions not supported")]);const s=jr(r);if(!s&&!o)return kr([new we("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof we)return kr([s]);if(s instanceof tn&&!Pr(t))return kr([new we("",'"interpolate" expressions cannot be used with this property')]);if(!s)return Ar(new Fr(i?"constant":"source",n.value));const a=s instanceof tn?s.interpolation:void 0;return Ar(new zr(i?"camera":"composite",n.value,s.labels,a))}function jr(e){let t=null;if(e instanceof Bt)t=jr(e.result);else if(e instanceof rn){for(const n of e.args)if(t=jr(n),t)break}else(e instanceof Zt||e instanceof tn)&&e.input instanceof vr&&"zoom"===e.input.name&&(t=e);return t instanceof we||e.eachChild(e=>{const n=jr(e);n instanceof we?t=n:!t&&n?t=new we("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new we("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Br(e,t=new Set){return e instanceof gr&&t.add(e.key),e.eachChild(e=>{Br(e,t)}),t}function Vr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Vr(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function Hr(e){const t=e.key,n=e.value;return n?[new _e(t,n,"constants have been deprecated as of v8")]:[]}function $r(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Yr(e){if(Array.isArray(e))return e.map(Yr);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Yr(e[n]);return t}return $r(e)}function Gr(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,s=e.styleSpec,a=e.validateSpec;let l=[];const c=Or(n);if("object"!==c)return[new _e(t,n,`object expected, ${c} found`)];for(const u in n){const e=u.split(".")[0],c=at(r,e)||r["*"];let h;if(at(i,e))h=i[e];else if(at(r,e))h=a;else if(i["*"])h=i["*"];else{if(!r["*"]){l.push(new _e(t,n[u],`unknown property "${u}"`));continue}h=a}l=l.concat(h({key:(t&&`${t}.`)+u,value:n[u],valueSpec:c,style:o,styleSpec:s,object:n,objectKey:u,validateSpec:a},n))}for(const u in r)i[u]||r[u].required&&void 0===r[u].default&&void 0===n[u]&&l.push(new _e(t,n,`missing required property "${u}"`));return l}function qr(e){const t=e.value,n=e.valueSpec,r=e.validateSpec,i=e.style,o=e.styleSpec,s=e.key,a=e.arrayElementValidator||r;if("array"!==Or(t))return[new _e(s,t,`array expected, ${Or(t)} found`)];if(n.length&&t.length!==n.length)return[new _e(s,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new _e(s,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let l={type:n.value,values:n.values};o.$version<7&&(l.function=n.function),"object"===Or(n.value)&&(l=n.value);let c=[];for(let u=0;u<t.length;u++)c=c.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:l,validateSpec:e.validateSpec,style:i,styleSpec:o,key:`${s}[${u}]`}));return c}function Wr(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Or(n);return"number"===i&&n!==n&&(i="NaN"),"number"!==i?[new _e(t,n,`number expected, ${i} found`)]:"minimum"in r&&n<r.minimum?[new _e(t,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new _e(t,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function Kr(e){const t=e.valueSpec,n=$r(e.value.type);let r,i,o,s={};const a="categorical"!==n&&void 0===e.value.property,l=!a,c="array"===Or(e.value.stops)&&"array"===Or(e.value.stops[0])&&"object"===Or(e.value.stops[0][0]),u=Gr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new _e(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(qr({key:e.key,value:r,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Or(r)&&0===r.length&&t.push(new _e(e.key,r,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&a&&u.push(new _e(e.key,e.value,'missing required property "property"')),"identity"!==n&&!e.value.stops&&u.push(new _e(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Pr(e.valueSpec)&&u.push(new _e(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Cr(e.valueSpec)?u.push(new _e(e.key,e.value,"property functions not supported")):a&&!Ir(e.valueSpec)&&u.push(new _e(e.key,e.value,"zoom functions not supported"))),("categorical"===n||c)&&void 0===e.value.property&&u.push(new _e(e.key,e.value,'"property" property is required')),u;function h(e){let n=[];const r=e.value,a=e.key;if("array"!==Or(r))return[new _e(a,r,`array expected, ${Or(r)} found`)];if(2!==r.length)return[new _e(a,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Or(r[0]))return[new _e(a,r,`object expected, ${Or(r[0])} found`)];if(void 0===r[0].zoom)return[new _e(a,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new _e(a,r,"object stop key must have value")];if(o&&o>$r(r[0].zoom))return[new _e(a,r[0].zoom,"stop zoom values must appear in ascending order")];$r(r[0].zoom)!==o&&(o=$r(r[0].zoom),i=void 0,s={}),n=n.concat(Gr({key:`${a}[0]`,value:r[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Wr,value:d}}))}else n=n.concat(d({key:`${a}[0]`,value:r[0],validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},r));return Lr(Yr(r[1]))?n.concat([new _e(`${a}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(e.validateSpec({key:`${a}[1]`,value:r[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const a=Or(e.value),l=$r(e.value),c=null!==e.value?e.value:o;if(r){if(a!==r)return[new _e(e.key,c,`${a} stop domain type must match previous stop domain type ${r}`)]}else r=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new _e(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==n){let r=`number expected, ${a} found`;return Cr(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _e(e.key,c,r)]}return"categorical"!==n||"number"!==a||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===a&&void 0!==i&&l<i?[new _e(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in s?[new _e(e.key,c,"stop domain values must be unique")]:(s[l]=!0,[])):[new _e(e.key,c,`integer expected, found ${l}`)]}}function Zr(e){const t=("property"===e.expressionContext?Ur:Nr)(Yr(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new _e(`${e.key}${t.key}`,e.value,t.message));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new _e(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Tr(n))return[new _e(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Tr(n))return[new _e(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Mr(n,["zoom","feature-state"]))return[new _e(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Er(n))return[new _e(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Jr(e){const t=e.key,n=e.value,r=Or(n);return"string"!==r?[new _e(t,n,`color expected, ${r} found`)]:gt.parse(String(n))?[]:[new _e(t,n,`color expected, "${n}" found`)]}function Xr(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf($r(n))&&i.push(new _e(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf($r(n))&&i.push(new _e(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function Qr(e){return Vr(Yr(e.value))?Zr(be({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ei(e)}function ei(e){const t=e.value,n=e.key;if("array"!==Or(t))return[new _e(n,t,`array expected, ${Or(t)} found`)];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new _e(n,t,"filter array must have at least 1 element")];switch(o=o.concat(Xr({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),$r(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===$r(t[1])&&o.push(new _e(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new _e(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Or(t[1]),"string"!==i&&o.push(new _e(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let s=2;s<t.length;s++)i=Or(t[s]),"$type"===$r(t[1])?o=o.concat(Xr({key:`${n}[${s}]`,value:t[s],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new _e(`${n}[${s}]`,t[s],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(ei({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Or(t[1]),2!==t.length?o.push(new _e(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new _e(`${n}[1]`,t[1],`string expected, ${i} found`))}return o}function ti(e,t){const n=e.key,r=e.validateSpec,i=e.style,o=e.styleSpec,s=e.value,a=e.objectKey,l=o[`${t}_${e.layerType}`];if(!l)return[];const c=a.match(/^(.*)-transition$/);if("paint"===t&&c&&l[c[1]]&&l[c[1]].transition)return r({key:n,value:s,valueSpec:o.transition,style:i,styleSpec:o});const u=e.valueSpec||l[a];if(!u)return[new _e(n,s,`unknown property "${a}"`)];let h;if("string"===Or(s)&&Cr(u)&&!u.tokens&&(h=/^{([^}]+)}$/.exec(s)))return[new _e(n,s,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(h[1])} }\`.`)];const d=[];return"symbol"===e.layerType&&("text-field"===a&&i&&!i.glyphs&&d.push(new _e(n,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Rr(Yr(s))&&"identity"===$r(s.type)&&d.push(new _e(n,s,'"text-font" does not support identity functions'))),d.concat(r({key:e.key,value:s,valueSpec:u,style:i,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:a}))}function ni(e){return ti(e,"paint")}function ri(e){return ti(e,"layout")}function ii(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;if("object"!==Or(n))return[new _e(r,n,`object expected, ${Or(n)} found`)];!n.type&&!n.ref&&t.push(new _e(r,n,'either "type" or "ref" is required'));let s=$r(n.type);const a=$r(n.ref);if(n.id){const o=$r(n.id);for(let s=0;s<e.arrayIndex;s++){const e=i.layers[s];$r(e.id)===o&&t.push(new _e(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in n&&t.push(new _e(r,n[e],`"${e}" is prohibited for ref layers`))}),i.layers.forEach(t=>{$r(t.id)===a&&(e=t)}),e?e.ref?t.push(new _e(r,n.ref,"ref cannot reference another ref layer")):s=$r(e.type):t.push(new _e(r,n.ref,`ref layer "${a}" not found`))}else if("background"!==s)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&$r(e.type);e?"vector"===o&&"raster"===s?t.push(new _e(r,n.source,`layer "${n.id}" requires a raster source`)):"raster-dem"!==o&&"hillshade"===s||"raster-dem"!==o&&"color-relief"===s?t.push(new _e(r,n.source,`layer "${n.id}" requires a raster-dem source`)):"raster"===o&&"raster"!==s?t.push(new _e(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==s&&"color-relief"!==s?t.push(new _e(r,n.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):"line"===s&&n.paint&&n.paint["line-gradient"]&&("geojson"!==o||!e.lineMetrics)&&t.push(new _e(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new _e(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new _e(r,n.source,`source "${n.source}" not found`))}else t.push(new _e(r,n,'missing required property "source"'));return t=t.concat(Gr({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"}),filter:Qr,layout:e=>Gr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>ri(be({layerType:s},e))}}),paint:e=>Gr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>ni(be({layerType:s},e))}})}})),t}function oi(e){const t=e.value,n=e.key,r=Or(t);return"string"!==r?[new _e(n,t,`string expected, ${r} found`)]:[]}const si={promoteId:function({key:e,value:t}){if("string"===Or(t))return oi({key:e,value:t});{const n=[];for(const r in t)n.push(...oi({key:`${e}.${r}`,value:t[r]}));return n}}};function ai(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style,o=e.validateSpec;if(!t.type)return[new _e(n,t,'"type" is required')];const s=$r(t.type);let a;switch(s){case"vector":case"raster":return a=Gr({key:n,value:t,valueSpec:r[`source_${s.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:si,validateSpec:o}),a;case"raster-dem":return a=function(e){var t;const n=null!==(t=e.sourceName)&&void 0!==t?t:"",r=e.value,i=e.styleSpec,o=i.source_raster_dem,s=e.style;let a=[];const l=Or(r);if(void 0===r)return a;if("object"!==l)return a.push(new _e("source_raster_dem",r,`object expected, ${l} found`)),a;const c="custom"===$r(r.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],h=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const d in r)!c&&u.includes(d)?a.push(new _e(d,r[d],`In "${n}": "${d}" is only valid when "encoding" is set to "custom". ${h} encoding found`)):o[d]?a=a.concat(e.validateSpec({key:d,value:r[d],valueSpec:o[d],validateSpec:e.validateSpec,style:s,styleSpec:i})):a.push(new _e(d,r[d],`unknown property "${d}"`));return a}({sourceName:n,value:t,style:e.style,styleSpec:r,validateSpec:o}),a;case"geojson":if(a=Gr({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:o,objectElementValidators:si}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...Zr({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...Zr({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Gr({key:n,value:t,valueSpec:r.source_video,style:i,validateSpec:o,styleSpec:r});case"image":return Gr({key:n,value:t,valueSpec:r.source_image,style:i,validateSpec:o,styleSpec:r});case"canvas":return[new _e(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xr({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function li(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const s=Or(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new _e("light",t,`object expected, ${s} found`)]),o;for(const a in t){const s=a.match(/^(.*)-transition$/);o=s&&r[s[1]]&&r[s[1]].transition?o.concat(e.validateSpec({key:a,value:t[a],valueSpec:n.transition,validateSpec:e.validateSpec,style:i,styleSpec:n})):r[a]?o.concat(e.validateSpec({key:a,value:t[a],valueSpec:r[a],validateSpec:e.validateSpec,style:i,styleSpec:n})):o.concat([new _e(a,t[a],`unknown property "${a}"`)])}return o}function ci(e){const t=e.value,n=e.styleSpec,r=n.sky,i=e.style,o=Or(t);if(void 0===t)return[];if("object"!==o)return[new _e("sky",t,`object expected, ${o} found`)];let s=[];for(const a in t)s=r[a]?s.concat(e.validateSpec({key:a,value:t[a],valueSpec:r[a],style:i,styleSpec:n})):s.concat([new _e(a,t[a],`unknown property "${a}"`)]);return s}function ui(e){const t=e.value,n=e.styleSpec,r=n.terrain,i=e.style;let o=[];const s=Or(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new _e("terrain",t,`object expected, ${s} found`)]),o;for(const a in t)o=r[a]?o.concat(e.validateSpec({key:a,value:t[a],valueSpec:r[a],validateSpec:e.validateSpec,style:i,styleSpec:n})):o.concat([new _e(a,t[a],`unknown property "${a}"`)]);return o}function hi(e){let t=[];const n=e.value,r=e.key;if(Array.isArray(n)){const i=[],o=[];for(const s in n){n[s].id&&i.includes(n[s].id)&&t.push(new _e(r,n,`all the sprites' ids must be unique, but ${n[s].id} is duplicated`)),i.push(n[s].id),n[s].url&&o.includes(n[s].url)&&t.push(new _e(r,n,`all the sprites' URLs must be unique, but ${n[s].url} is duplicated`)),o.push(n[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(Gr({key:`${r}[${s}]`,value:n[s],valueSpec:a,validateSpec:e.validateSpec}))}return t}return oi({key:r,value:n})}function di(e){return function(e){return!!e&&e.constructor===Object}(e.value)?[]:[new _e(e.key,e.value,`object expected, ${Or(e.value)} found`)]}const pi={"*":()=>[],array:qr,boolean:function(e){const t=e.value,n=e.key,r=Or(t);return"boolean"!==r?[new _e(n,t,`boolean expected, ${r} found`)]:[]},number:Wr,color:Jr,constants:Hr,enum:Xr,filter:Qr,function:Kr,layer:ii,object:Gr,source:ai,light:li,sky:ci,terrain:ui,projection:function(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style,o=Or(t);if(void 0===t)return[];if("object"!==o)return[new _e("projection",t,`object expected, ${o} found`)];let s=[];for(const a in t)s=r[a]?s.concat(e.validateSpec({key:a,value:t[a],valueSpec:r[a],style:i,styleSpec:n})):s.concat([new _e(a,t[a],`unknown property "${a}"`)]);return s},projectionDefinition:function(e){const t=e.key;let n=e.value;n=n instanceof String?n.valueOf():n;const r=Or(n);return"array"!==r||function(e){return Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]}(n)||function(e){return!!["interpolate","step","literal"].includes(e[0])}(n)?["array","string"].includes(r)?[]:[new _e(t,n,`projection expected, invalid type "${r}" found`)]:[new _e(t,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:oi,formatted:function(e){return 0===oi(e).length?[]:Zr(e)},resolvedImage:function(e){return 0===oi(e).length?[]:Zr(e)},padding:function(e){const t=e.key,n=e.value;if("array"===Or(n)){if(n.length<1||n.length>4)return[new _e(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const r={type:"number"};let i=[];for(let o=0;o<n.length;o++)i=i.concat(e.validateSpec({key:`${t}[${o}]`,value:n[o],validateSpec:e.validateSpec,valueSpec:r}));return i}return Wr({key:t,value:n,valueSpec:{}})},numberArray:function(e){const t=e.key,n=e.value;if("array"===Or(n)){const r={type:"number"};if(n.length<1)return[new _e(t,n,"array length at least 1 expected, length 0 found")];let i=[];for(let o=0;o<n.length;o++)i=i.concat(e.validateSpec({key:`${t}[${o}]`,value:n[o],validateSpec:e.validateSpec,valueSpec:r}));return i}return Wr({key:t,value:n,valueSpec:{}})},colorArray:function(e){const t=e.key,n=e.value;if("array"===Or(n)){if(n.length<1)return[new _e(t,n,"array length at least 1 expected, length 0 found")];let e=[];for(let r=0;r<n.length;r++)e=e.concat(Jr({key:`${t}[${r}]`,value:n[r]}));return e}return Jr({key:t,value:n})},variableAnchorOffsetCollection:function(e){const t=e.key,n=e.value,r=Or(n),i=e.styleSpec;if("array"!==r||n.length<1||n.length%2!==0)return[new _e(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<n.length;s+=2)o=o.concat(Xr({key:`${t}[${s}]`,value:n[s],valueSpec:i.layout_symbol["text-anchor"]})),o=o.concat(qr({key:`${t}[${s+1}]`,value:n[s+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:i}));return o},sprite:hi,state:di};function fi(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return e.validateSpec=fi,n.expression&&Rr($r(t))?Kr(e):n.expression&&Lr(Yr(t))?Zr(e):n.type&&pi[n.type]?pi[n.type](e):Gr(be({},e,{valueSpec:n.type?r[n.type]:n}))}function mi(e){const t=e.value,n=e.key,r=oi(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new _e(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new _e(n,t,'"glyphs" url must include a "{range}" token'))),r}function gi(e,t=ve){let n=[];return n=n.concat(fi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:fi,objectElementValidators:{glyphs:mi,"*":()=>[]}})),e.constants&&(n=n.concat(Hr({key:"constants",value:e.constants}))),vi(n)}function yi(e){return function(t){return e({...t,validateSpec:fi})}}function vi(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function _i(e){return function(...t){return vi(e.apply(this,t))}}function bi(e){if(!e)return{style:x[b[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if("string"==typeof e){const t=function(e){try{const t=JSON.parse(e),n=gi(t);return{isValidJSON:!0,isValidStyle:0===n.length,styleObject:0===n.length?t:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}(e);return t.isValidStyle?{style:t.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:t.isValidJSON?{style:x[b[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:e.startsWith("http")?{style:e,requiresUrlMonitoring:!0,isFallback:!1}:e.toLowerCase().includes(".json")?{style:wi(e),requiresUrlMonitoring:!0,isFallback:!1}:{style:y(e),requiresUrlMonitoring:!0,isFallback:!1}}return e instanceof v?{style:e.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:e instanceof _?{style:e.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:0===gi(e).length?{style:e,requiresUrlMonitoring:!1,isFallback:!1,isJSON:!0}:{style:x[b[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function wi(e){try{return new URL(e).href}catch{}return new URL(e,location.origin).href}function xi(e,t,n){const r=window.document.createElement(e);return void 0!==t&&(r.className=t),n&&n.appendChild(r),r}function Si(e){e.parentNode&&e.parentNode.removeChild(e)}gi.source=_i(yi(ai)),gi.sprite=_i(yi(hi)),gi.glyphs=_i(yi(mi)),gi.light=_i(yi(li)),gi.sky=_i(yi(ci)),gi.terrain=_i(yi(ui)),gi.state=_i(yi(di)),gi.layer=_i(yi(ii)),gi.filter=_i(yi(Qr)),gi.paintProperty=_i(yi(ni)),gi.layoutProperty=_i(yi(ri));class Ei{constructor(){O(this,"_map"),O(this,"_container"),O(this,"_terrainButton"),function(e,t){for(const n of e)"function"==typeof t[n]&&(t[n]=t[n].bind(t))}(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=xi("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=xi("button","maplibregl-ctrl-terrain",this._container),xi("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Si(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){Ti(this._map),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}function Ti(e){e.hasTerrain()?e.disableTerrain():e.enableTerrain()}class Mi extends j{constructor(e={}){super({showCompass:e.showCompass??!0,showZoom:e.showZoom??!0,visualizePitch:e.visualizePitch??!0}),O(this,"_rotateCompassArrow",()=>{const e=this._map.getBearing(),t=this._map.getPitch(),n=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(t*(Math.PI/180))**.5)}) rotateX(${Math.min(70,t)}deg) rotateZ(${-e}deg)`:`rotate(${-e}deg)`;this._compassIcon.style.transform=n}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",e=>{0===this._map.getPitch()?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}))}_createButton(e,t){const n=super._createButton(e,t);return n.clickFunction=t,n}}const Ai=r.Marker,ki=r.LngLat,Ci=r.LngLatBounds;class Ii extends B{constructor(){super(...arguments),O(this,"lastUpdatedCenter",new ki(0,0)),O(this,"_updateCamera",e=>{var t;const n=new ki(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},o=this._map.getZoom();o>((null==(t=this.options.fitBoundsOptions)?void 0:t.maxZoom)??30)&&(i.zoom=o),this._map.fitBounds(Ci.fromLngLat(n,r),i,{geolocateSource:!0});let s=!1;const a=()=>{s=!0};this._map.once("click",a),this._map.once("dblclick",a),this._map.once("dragstart",a),this._map.once("mousedown",a),this._map.once("touchstart",a),this._map.once("wheel",a),this._map.once("moveend",()=>{this._map.off("click",a),this._map.off("dblclick",a),this._map.off("dragstart",a),this._map.off("mousedown",a),this._map.off("touchstart",a),this._map.off("wheel",a),!s&&(this.lastUpdatedCenter=this._map.getCenter())})}),O(this,"_finishSetupUI",e=>{if(this._map){if(!1===e){const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=xi("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ai({element:this._dotElement}),this._circleElement=xi("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ai({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",e=>{const t=e.originalEvent&&"resize"===e.originalEvent.type,n=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!e.geolocateSource&&"ACTIVE_LOCK"===this._watchState&&!t&&n>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),O(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if("BACKGROUND"!==this._watchState&&"ACTIVE_LOCK"!==this._watchState)return;const e=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],t=this._map.project(e),n=this._map.unproject([t.x,t.y]),r=this._map.unproject([t.x+20,t.y]),i=n.distanceTo(r)/20,o=Math.ceil(2*this._accuracy/i);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}}var Pi,Oi,Ri,Di,Li;class Ni{constructor(e,t,n){if(L(this,Pi),L(this,Oi),L(this,Ri),L(this,Di),L(this,Li),"string"==typeof e){const t=document.querySelector(e);if(!t)throw new Error(`No element has been found with selector "${e}" when creating an external control.`);N(this,Oi,t)}else N(this,Oi,e);t&&N(this,Ri,e=>{t(D(this,Pi),D(this,Oi),e)}),n&&N(this,Di,e=>{n(D(this,Pi),D(this,Oi),e)}),N(this,Li,D(this,Oi).parentElement)}onAdd(e){return N(this,Pi,e),D(this,Ri)&&D(this,Oi).addEventListener("click",D(this,Ri)),D(this,Di)&&D(this,Pi).on("render",D(this,Di)),Si(D(this,Oi)),D(this,Oi)}onRemove(){D(this,Ri)&&D(this,Oi).removeEventListener("click",D(this,Ri)),D(this,Di)&&D(this,Pi).off("render",D(this,Di)),D(this,Li)?D(this,Li).appendChild(D(this,Oi)):Si(D(this,Oi))}}Pi=new WeakMap,Oi=new WeakMap,Ri=new WeakMap,Di=new WeakMap,Li=new WeakMap;class Fi{constructor(){O(this,"map"),O(this,"container"),O(this,"projectionButton")}onAdd(e){return this.map=e,this.container=xi("div","maplibregl-ctrl maplibregl-ctrl-group"),this.projectionButton=xi("button","maplibregl-ctrl-projection",this.container),xi("span","maplibregl-ctrl-icon",this.projectionButton).setAttribute("aria-hidden","true"),this.projectionButton.type="button",this.projectionButton.addEventListener("click",this.toggleProjection.bind(this)),e.on("projectiontransition",this.updateProjectionIcon.bind(this)),this.updateProjectionIcon(),this.container}onRemove(){Si(this.container),this.map.off("projectiontransition",this.updateProjectionIcon),this.map=void 0}toggleProjection(){zi(this.map),this.updateProjectionIcon()}updateProjectionIcon(){this.projectionButton.classList.remove("maplibregl-ctrl-projection-globe"),this.projectionButton.classList.remove("maplibregl-ctrl-projection-mercator"),this.map.isGlobeProjection()?(this.projectionButton.classList.add("maplibregl-ctrl-projection-mercator"),this.projectionButton.title="Enable Mercator projection"):(this.projectionButton.classList.add("maplibregl-ctrl-projection-globe"),this.projectionButton.title="Enable Globe projection")}}function zi(e){void 0===e.getProjection()&&e.setProjection({type:"mercator"}),e.isGlobeProjection()?e.enableMercatorProjection():e.enableGlobeProjection()}const Ui={"zoom-in":e=>e.zoomIn(),"zoom-out":e=>e.zoomOut(),"toggle-projection":zi,"toggle-terrain":Ti,"reset-view":e=>{0===e.getPitch()?e.easeTo({pitch:Math.min(e.getMaxPitch(),80)}):e.resetNorthPitch()},"reset-bearing":e=>{e.rotateTo(0)},"reset-pitch":e=>{e.setPitch(0)},"reset-roll":e=>{e.setRoll(0)}};var ji,Bi,Vi,Hi,$i,Yi,Gi,qi,Wi,Ki,Zi,Ji;class Xi extends Ni{constructor(e,t){if(t&&!(t in Ui))throw new Error(`data-maptiler-control value "${t}" is invalid.`);super(e,t&&Ui[t]),L(this,ji),L(this,Bi,new Map)}onAdd(e){return N(this,ji,e),super.onAdd(e)}onRemove(){for(const[e,t]of D(this,Bi)){const n=e.deref();n&&n.removeEventListener("click",t)}D(this,Bi).clear(),super.onRemove()}configureGroupItem(e,t){if(!t)return;if(!(t in Ui))throw new Error(`data-maptiler-control value "${t}" is invalid.`);const n=n=>{Ui[t](D(this,ji),e,n)};e.addEventListener("click",n),D(this,Bi).set(new WeakRef(e),n)}}ji=new WeakMap,Bi=new WeakMap,O(Xi,"controlCallbacks",Ui);class Qi{constructor(e,t){L(this,Wi),L(this,Vi),O(this,"map"),L(this,Hi),L(this,$i),L(this,Yi),L(this,Gi,!1),L(this,qi),void 0!==e.style&&N(this,Gi,!0),N(this,Vi,{zoomAdjust:-4,position:"top-right",...t,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...e,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...e.containerStyle??{}}}),void 0!==e.lockZoom&&(D(this,Vi).minZoom=e.lockZoom,D(this,Vi).maxZoom=e.lockZoom)}setStyle(e,t){D(this,Gi)||this.map.setStyle(e,t),F(this,Wi,Zi).call(this)}addLayer(e,t){return D(this,Gi)||this.map.addLayer(e,t),F(this,Wi,Zi).call(this),this.map}moveLayer(e,t){return D(this,Gi)||this.map.moveLayer(e,t),F(this,Wi,Zi).call(this),this.map}removeLayer(e){return D(this,Gi)||this.map.removeLayer(e),F(this,Wi,Zi).call(this),this}setLayerZoomRange(e,t,n){return D(this,Gi)||this.map.setLayerZoomRange(e,t,n),F(this,Wi,Zi).call(this),this}setFilter(e,t,n){return D(this,Gi)||this.map.setFilter(e,t,n),F(this,Wi,Zi).call(this),this}setPaintProperty(e,t,n,r){return D(this,Gi)||this.map.setPaintProperty(e,t,n,r),F(this,Wi,Zi).call(this),this}setLayoutProperty(e,t,n,r){return D(this,Gi)||this.map.setLayoutProperty(e,t,n,r),F(this,Wi,Zi).call(this),this}setGlyphs(e,t){return D(this,Gi)||this.map.setGlyphs(e,t),F(this,Wi,Zi).call(this),this}onAdd(e){N(this,Hi,e),N(this,$i,xi("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[t,n]of Object.entries(D(this,Vi).containerStyle))D(this,$i).style.setProperty(t,n);return D(this,Vi).container=D(this,$i),D(this,Vi).zoom=e.getZoom()+D(this,Vi).zoomAdjust,this.map=new ns(D(this,Vi)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{F(this,Wi,Ki).call(this,D(this,Vi).parentRect),N(this,qi,F(this,Wi,Ji).call(this))}),D(this,$i)}onRemove(){var e;null==(e=D(this,qi))||e.call(this),Si(D(this,$i))}}Vi=new WeakMap,Hi=new WeakMap,$i=new WeakMap,Yi=new WeakMap,Gi=new WeakMap,qi=new WeakMap,Wi=new WeakSet,Ki=function(e){void 0===e||void 0===e.linePaint&&void 0===e.fillPaint||(N(this,Yi,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:D(this,Yi)}),(void 0!==e.lineLayout||void 0!==e.linePaint)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),void 0!==e.fillPaint&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),F(this,Wi,Zi).call(this))},Zi=function(){if(void 0===D(this,Yi))return;const{devicePixelRatio:e}=window,t=D(this,Hi).getCanvas(),n=t.width/e,r=t.height/e,i=D(this,Hi).unproject.bind(D(this,Hi)),o=i([0,0]),s=i([n,0]),a=i([0,r]),l=i([n,r]);D(this,Yi).geometry.coordinates=[[a.toArray(),l.toArray(),s.toArray(),o.toArray(),a.toArray()]];const c=this.map.getSource("parentRect");void 0!==c&&c.setData(D(this,Yi))},Ji=function(){const{pitchAdjust:e}=D(this,Vi),t=()=>{o("parent")},n=()=>{o("minimap")},r=()=>{D(this,Hi).on("move",t),this.map.on("move",n)},i=()=>{D(this,Hi).off("move",t),this.map.off("move",n)},o=t=>{i();const n="parent"===t?D(this,Hi):this.map,o="parent"===t?this.map:D(this,Hi),s=n.getCenter(),a=n.getZoom()+D(this,Vi).zoomAdjust*("parent"===t?1:-1),l=n.getBearing(),c=n.getPitch();o.jumpTo({center:s,zoom:a,bearing:l,pitch:e?c:0}),F(this,Wi,Zi).call(this),r()};return r(),()=>{i()}};class eo{constructor(e,t=2e3){O(this,"map"),O(this,"registeredModules",new Set),O(this,"viewerType"),this.map=e,this.viewerType="Map",setTimeout(async()=>{if(!K.telemetry)return;const e=this.preparePayload();try{(await fetch(e,{method:"POST"})).ok||console.warn("The metrics could not be sent to MapTiler Cloud")}catch(t){console.warn("The metrics could not be sent to MapTiler Cloud",t)}},Math.max(1e3,t))}registerModule(e,t){this.registeredModules.add(`${e}:${t}`)}registerViewerType(e="Map"){this.viewerType=e}preparePayload(){const e=new URL(q.telemetryURL);return e.searchParams.append("sdk","3.9.0"),e.searchParams.append("key",K.apiKey),e.searchParams.append("mtsid",W),e.searchParams.append("session",K.session?"1":"0"),e.searchParams.append("caching",K.caching?"1":"0"),e.searchParams.append("lang-updated",this.map.isLanguageUpdated()?"1":"0"),e.searchParams.append("terrain",this.map.getTerrain()?"1":"0"),e.searchParams.append("globe",this.map.isGlobeProjection()?"1":"0"),e.searchParams.append("viewerType",this.viewerType),this.registeredModules.size>0&&e.searchParams.append("modules",Array.from(this.registeredModules).join("|")),e.href}}var to=typeof Float32Array<"u"?Float32Array:Array;function no(){var e=new to(16);return to!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ro(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=s*i+u*r,e[6]=a*i+h*r,e[7]=l*i+d*r,e[8]=c*i-o*r,e[9]=u*i-s*r,e[10]=h*i-a*r,e[11]=d*i-l*r,e}function io(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=s*i+u*r,e[2]=a*i+h*r,e[3]=l*i+d*r,e[4]=c*i-o*r,e[5]=u*i-s*r,e[6]=h*i-a*r,e[7]=d*i-l*r,e}var oo,so,ao,lo,co,uo,ho,po,fo=function(e,t,n,r,i){var o=1/Math.tan(t/2);if(e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0){var s=1/(r-i);e[10]=(i+r)*s,e[14]=2*i*r*s}else e[10]=-1,e[14]=-2*r;return e};function mo(){var e=new to(3);return to!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function go(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function yo(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2];return e[0]=i*l-o*a,e[1]=o*s-r*l,e[2]=r*a-i*s,e}function vo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _o(){if(lo)return ao;lo=1;const e=(so||(so=1,oo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),oo),t={};for(const i of Object.keys(e))t[e[i]]=i;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};ao=n;for(const i of Object.keys(n)){if(!("channels"in n[i]))throw new Error("missing channels property: "+i);if(!("labels"in n[i]))throw new Error("missing channel labels property: "+i);if(n[i].labels.length!==n[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:e,labels:t}=n[i];delete n[i].channels,delete n[i].labels,Object.defineProperty(n[i],"channels",{value:e}),Object.defineProperty(n[i],"labels",{value:t})}function r(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}return n.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=o-i;let a,l;o===i?a=0:t===o?a=(n-r)/s:n===o?a=2+(r-t)/s:r===o&&(a=4+(t-n)/s),a=Math.min(60*a,360),a<0&&(a+=360);const c=(i+o)/2;return l=o===i?0:c<=.5?s/(o+i):s/(2-o-i),[a,100*l,100*c]},n.rgb.hsv=function(e){let t,n,r,i,o;const s=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(s,a,l),u=c-Math.min(s,a,l),h=function(e){return(c-e)/6/u+.5};return 0===u?(i=0,o=0):(o=u/c,t=h(s),n=h(a),r=h(l),s===c?i=r-n:a===c?i=1/3+t-r:l===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},n.rgb.hwb=function(e){const t=e[0],r=e[1];let i=e[2];const o=n.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,i));return i=1-1/255*Math.max(t,Math.max(r,i)),[o,100*s,100*i]},n.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r);return[100*((1-t-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},n.rgb.keyword=function(n){const i=t[n];if(i)return i;let o,s=1/0;for(const t of Object.keys(e)){const i=r(n,e[t]);i<s&&(s=i,o=t)}return o},n.keyword.rgb=function(t){return e[t]},n.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*t+.3576*n+.1805*r),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},n.rgb.lab=function(e){const t=n.rgb.xyz(e);let r=t[0],i=t[1],o=t[2];r/=95.047,i/=100,o/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;return[116*i-16,500*(r-i),200*(i-o)]},n.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let i,o,s;if(0===n)return s=255*r,[s,s,s];i=r<.5?r*(1+n):r+n-r*n;const a=2*r-i,l=[0,0,0];for(let c=0;c<3;c++)o=t+1/3*-(c-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(i-a)*o:2*o<1?i:3*o<2?a+(i-a)*(2/3-o)*6:a,l[c]=255*s;return l},n.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;return[t,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},n.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),s=255*r*(1-n),a=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,s];case 1:return[a,r,s];case 2:return[s,r,l];case 3:return[s,a,r];case 4:return[l,s,r];case 5:return[r,s,a]}},n.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01);let o,s;s=(2-n)*r;const a=(2-n)*i;return o=n*i,o/=a<=1?a:2-a,o=o||0,s/=2,[t,100*o,100*s]},n.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const s=Math.floor(6*t),a=1-r;o=6*t-s,1&s&&(o=1-o);const l=n+o*(a-n);let c,u,h;switch(s){default:case 6:case 0:c=a,u=l,h=n;break;case 1:c=l,u=a,h=n;break;case 2:c=n,u=a,h=l;break;case 3:c=n,u=l,h=a;break;case 4:c=l,u=n,h=a;break;case 5:c=a,u=n,h=l}return[255*c,255*u,255*h]},n.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},n.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let i,o,s;return i=3.2406*t+-1.5372*n+-.4986*r,o=-.9689*t+1.8758*n+.0415*r,s=.0557*t+-.204*n+1.057*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*i,255*o,255*s]},n.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(t-n),200*(n-r)]},n.lab.xyz=function(e){let t,n,r;n=(e[0]+16)/116,t=e[1]/500+n,r=n-e[2]/200;const i=n**3,o=t**3,s=r**3;return n=i>.008856?i:(n-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,t*=95.047,n*=100,r*=108.883,[t,n,r]},n.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let i;i=360*Math.atan2(r,n)/2/Math.PI,i<0&&(i+=360);return[t,Math.sqrt(n*n+r*r),i]},n.lch.lab=function(e){const t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,n*Math.cos(r),n*Math.sin(r)]},n.rgb.ansi16=function(e,t=null){const[r,i,o]=e;let s=null===t?n.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),0===s)return 30;let a=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(r/255));return 2===s&&(a+=60),a},n.hsv.ansi16=function(e){return n.rgb.ansi16(n.hsv.rgb(e),e[2])},n.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},n.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},n.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},n.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},n.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map(e=>e+e).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},n.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),o=Math.min(Math.min(t,n),r),s=i-o;let a,l;return a=s<1?o/(1-s):0,l=s<=0?0:i===t?(n-r)/s%6:i===n?2+(r-t)/s:4+(t-n)/s,l/=6,l%=1,[360*l,100*s,100*a]},n.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},n.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},n.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];const i=[0,0,0],o=t%1*6,s=o%1,a=1-s;let l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-n)*r,[255*(n*i[0]+l),255*(n*i[1]+l),255*(n*i[2]+l)]},n.hcg.hsv=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);let r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},n.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},n.hcg.hwb=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},n.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,r=n-t;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},n.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},n.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},n.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},n.gray.hsl=function(e){return[0,0,e[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(e){return[0,100,e[0]]},n.gray.cmyk=function(e){return[0,0,0,e[0]]},n.gray.lab=function(e){return[e[0],0,0]},n.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},n.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]},ao}function bo(){if(uo)return co;uo=1;const e=_o();function t(t){const n=function(){const t={},n=Object.keys(e);for(let e=n.length,r=0;r<e;r++)t[n[r]]={distance:-1,parent:null};return t}(),r=[t];for(n[t].distance=0;r.length;){const t=r.pop(),i=Object.keys(e[t]);for(let e=i.length,o=0;o<e;o++){const e=i[o],s=n[e];-1===s.distance&&(s.distance=n[t].distance+1,s.parent=t,r.unshift(e))}}return n}function n(e,t){return function(n){return t(e(n))}}function r(t,r){const i=[r[t].parent,t];let o=e[r[t].parent][t],s=r[t].parent;for(;r[s].parent;)i.unshift(r[s].parent),o=n(e[r[s].parent][s],o),s=r[s].parent;return o.conversion=i,o}return co=function(e){const n=t(e),i={},o=Object.keys(n);for(let t=o.length,s=0;s<t;s++){const e=o[s];null!==n[e].parent&&(i[e]=r(e,n))}return i}}!function(){var e=mo()}();const wo=vo(function(){if(po)return ho;po=1;const e=_o(),t=bo(),n={};return Object.keys(e).forEach(r=>{n[r]={},Object.defineProperty(n[r],"channels",{value:e[r].channels}),Object.defineProperty(n[r],"labels",{value:e[r].labels});const i=t(r);Object.keys(i).forEach(e=>{const t=i[e];n[r][e]=function(e){const t=function(...t){const n=t[0];if(null==n)return n;n.length>1&&(t=n);const r=e(t);if("object"==typeof r)for(let e=r.length,i=0;i<e;i++)r[i]=Math.round(r[i]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(t),n[r][e].raw=function(e){const t=function(...t){const n=t[0];return null==n?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(t)})}),ho=n}());function xo({gl:e,type:t,source:n}){const r=e.createShader(t);if(null===r)throw new Error("Cannot create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw console.error("Shader compilation error:",e.getShaderInfoLog(r)),e.deleteShader(r),new Error("Cannot compile shader");return r}function So({gl:e,vertexShaderSource:t,fragmentShaderSource:n,attributesKeys:r,uniformsKeys:i,vertices:o,indices:s}){const a=function({gl:e,vertexShaderSource:t,fragmentShaderSource:n}){const r=xo({gl:e,type:e.VERTEX_SHADER,source:t}),i=xo({gl:e,type:e.FRAGMENT_SHADER,source:n}),o=e.createProgram();if(e.attachShader(o,r),e.attachShader(o,i),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw console.error("Error: ",e.getProgramInfoLog(o)),new Error("Cannot link shader program");return o}({gl:e,vertexShaderSource:t,fragmentShaderSource:n}),l=r.reduce((t,n)=>(t[n]=e.getAttribLocation(a,`a_${n}`),t),{}),c=i.reduce((t,n)=>(t[n]=function(e,t,n){const r=e.getUniformLocation(t,n);if(null===r)throw new Error(`Cannot get uniform location for ${n}`);return r}(e,a,`u_${n}`),t),{}),u=e.createBuffer();let h,d;return e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),void 0!==s&&(h=e.createBuffer(),d=s.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW)),{shaderProgram:a,programInfo:{attributesLocations:l,uniformsLocations:c},positionBuffer:u,indexBuffer:h,indexBufferLength:d}}function Eo(e){if(!e)return[1,1,1,0];if("transparent"===e)return[1,1,1,0];try{const t=function(e){return To=To??document.createElement("canvas").getContext("2d"),To?(To.fillStyle=e,To.fillStyle):"#000000"}(e),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);if(null!=n&&n.length){const e=!!n[4];return[...wo.hex.rgb(t).map(e=>e/255),e?parseInt(n[4],16)/255:1]}const r=t.match(/(\d\.\d(\d+)?|\d{3}|\d{2}|\d{1})/gi)??["0","0","0"];if(t.includes("rgb")){const e=t.includes("rgba"),n=[...r.map(e=>parseFloat(e)).map((e,t)=>t<3?e/255:e)];return e||n.push(1),n}}catch{}return console.warn([`[parseColorStringToVec4]: Color ${e} is either not a valid color or its type is not supported, defaulting to black`]),[0,0,0,1]}let To;const Mo=.5,Ao=.5,ko=.5,Co=[...[-.5,-.5,ko,Mo,-.5,ko,Mo,Ao,ko,-.5,Ao,ko],...[-.5,-.5,-.5,-.5,Ao,-.5,Mo,Ao,-.5,Mo,-.5,-.5],...[-.5,Ao,-.5,-.5,Ao,ko,Mo,Ao,ko,Mo,Ao,-.5],...[-.5,-.5,-.5,Mo,-.5,-.5,Mo,-.5,ko,-.5,-.5,ko],...[Mo,-.5,-.5,Mo,Ao,-.5,Mo,Ao,ko,Mo,-.5,ko],...[-.5,-.5,-.5,-.5,-.5,ko,-.5,Ao,ko,-.5,Ao,-.5]],Io=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],Po="precision mediump float;\n\nvarying vec3 vTextureCoord;\n\n%USE_TEXTURE_MACRO_MARKER%\n\n# ifdef USE_TEXTURE\nuniform samplerCube u_cubeSampler;\nuniform float u_fadeOpacity;\n# endif\n\nuniform vec4 u_bgColor;\n\nvoid main(void) {\n  #ifdef USE_TEXTURE\n  vec4 texColor = textureCube(u_cubeSampler, vTextureCoord);\n\n    gl_FragColor = mix(\n      u_bgColor,\n      texColor,\n      min(texColor.a, u_fadeOpacity)\n    );\n\n    gl_FragColor.a = max(gl_FragColor.a, u_fadeOpacity);\n\n  #else\n  gl_FragColor = u_bgColor;\n  #endif\n}\n";const Oo={stars:{color:"hsl(233,100%,92%)",preset:"stars"},space:{color:"hsl(210, 100%, 4%)",preset:"space"},milkyway:{color:"hsl(233,100%,92%)",preset:"milkyway"},"milkyway-subtle":{color:"hsl(233,100%,92%)",preset:"milkyway-subtle"},"milkyway-bright":{color:"hsl(233,100%,92%)",preset:"milkyway-bright"},"milkyway-colored":{color:"black",preset:"milkyway-colored"}};var Ro=(e=>(e.POSITIVE_X="pX",e.NEGATIVE_X="nX",e.POSITIVE_Y="pY",e.NEGATIVE_Y="nY",e.POSITIVE_Z="pZ",e.NEGATIVE_Z="nZ",e))(Ro||{});const Do=new Map,Lo=new Map;let No;function Fo(e,t){if(t===Ro.POSITIVE_X)return e.TEXTURE_CUBE_MAP_POSITIVE_X;if(t===Ro.NEGATIVE_X)return e.TEXTURE_CUBE_MAP_NEGATIVE_X;if(t===Ro.POSITIVE_Y)return e.TEXTURE_CUBE_MAP_POSITIVE_Y;if(t===Ro.NEGATIVE_Y)return e.TEXTURE_CUBE_MAP_NEGATIVE_Y;if(t===Ro.POSITIVE_Z)return e.TEXTURE_CUBE_MAP_POSITIVE_Z;if(t===Ro.NEGATIVE_Z)return e.TEXTURE_CUBE_MAP_NEGATIVE_Z;throw new Error(`[CubemapLayer][loadCubemapTexture]: Invalid key ${t}`)}function zo(e,t,n){return e+(t-e)*n}function Uo(e){if(!e)return{};const t=Object.keys(e).sort().map(t=>[t,e[t]]);return Object.fromEntries(t)}const jo="https://api.maptiler.com/resources/space",Bo=["vertexPosition"],Vo=["projectionMatrix","modelViewMatrix","cubeSampler","bgColor","fadeOpacity"],Ho="%USE_TEXTURE_MACRO_MARKER%",$o=Oo.stars;class Yo{constructor(e){O(this,"id","Cubemap Layer"),O(this,"type","custom"),O(this,"renderingMode","3d"),O(this,"map"),O(this,"faces"),O(this,"useCubemapTexture",!0),O(this,"currentFadeOpacity",0),O(this,"cubeMapNeedsUpdate",!1),O(this,"bgColor"),O(this,"previousBgColor",[0,0,0,0]),O(this,"targetBgColor",[0,0,0,0]),O(this,"transitionDelta",0),O(this,"gl"),O(this,"cubemap"),O(this,"texture"),O(this,"currentFacesDefinitionKey",""),O(this,"options"),O(this,"animationActive",!0),O(this,"imageIsAnimating",!1),O(this,"imageFadeInDelta",0);const t=function(e,t){if(!Go(e))return{color:"transparent"};if(!0===e)return t;const n={...e};if(e.faces||e.path)return delete n.preset,n;const r=e.preset;if(void 0!==r&&!(r in Oo))throw new Error(`[CubemapLayer]: Invalid preset "${r}". Available presets: ${Object.keys(Oo).join(", ")}`);return{...n,color:n.color??Oo[r].color??"hsl(233,100%,92%)"}}(e,$o);this.options=t,this.currentFacesDefinitionKey=JSON.stringify(t.faces??t.preset??t.path),this.bgColor=[0,0,0,0],this.targetBgColor=Eo(t.color),this.faces=qo(t),this.useCubemapTexture=null!==this.faces}updateCubemap({facesNeedUpdate:e}={facesNeedUpdate:!0}){this.useCubemapTexture=null!==this.faces;const t=Vo.filter(e=>"cubeSampler"!==e&&"fadeOpacity"!==e||this.useCubemapTexture);this.cubemap=So({gl:this.gl,vertexShaderSource:"attribute vec3 a_vertexPosition;\nvarying vec3 vTextureCoord;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_modelViewMatrix;\n  \nvoid main(void) {\n  vTextureCoord = vec3(-a_vertexPosition.x, a_vertexPosition.y, a_vertexPosition.z);\n  gl_Position = u_projectionMatrix * u_modelViewMatrix * vec4(a_vertexPosition, 1.0);\n}\n",fragmentShaderSource:this.useCubemapTexture?Po.replace(Ho,"#define USE_TEXTURE"):Po.replace(Ho,""),attributesKeys:Bo,uniformsKeys:t,vertices:Co,indices:Io}),this.cubeMapNeedsUpdate=e,this.useCubemapTexture&&this.updateTexture(this.gl,this.faces),this.animateColorChange()}onAdd(e,t){this.map=e,this.gl=t,this.updateCubemap()}onRemove(e,t){this.cubemap&&(this.texture&&t.deleteTexture(this.texture),t.deleteProgram(this.cubemap.shaderProgram),t.deleteBuffer(this.cubemap.positionBuffer),this.texture=void 0)}updateTexture(e,t){if(!0===this.cubeMapNeedsUpdate&&!this.imageIsAnimating){if(this.cubeMapNeedsUpdate=!1,!this.useCubemapTexture)return;!function({gl:e,faces:t,onReady:n,forceRefresh:r}){if(Do.get(e)&&!r&&No===JSON.stringify(t))return void n(Do.get(e),Lo.get(e));No=JSON.stringify(t);const i=Do.get(e)??e.createTexture();if(!t)return void console.warn("[CubemapLayer][loadCubemapTexture]: Faces are null");const o=Object.keys(t).length;if(6!==o)return void console.warn(`[CubemapLayer][loadCubemapTexture]: Faces should contain exactly 6 images, but found ${o}`);const s=Object.entries(t).map(([e,t])=>new Promise((n,r)=>{const i=e;if(void 0===t)return void r(new Error(`[CubemapLayer][loadCubemapTexture]: Face ${e} is undefined`));const o=new Image;o.crossOrigin="anonymous";const s=()=>{n({image:o,key:i})};o.src=t,o.complete&&o.naturalWidth>0?s():o.onload=s,o.onerror=()=>{r(new Error(`[CubemapLayer][loadCubemapTexture]: Error loading image ${t}`))}}));Promise.all(s).then(t=>{for(let n=0;n<t.length;n++){const r=e.RGBA,o=e.RGBA,s=e.UNSIGNED_BYTE,{image:a,key:l}=t[n]??{};if(!a||!l){console.warn("[CubemapLayer][loadCubemapTexture]: Image or key is null");continue}const c=Fo(e,l);e.bindTexture(e.TEXTURE_CUBE_MAP,i),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(c,0,r,o,s,a)}e.bindTexture(e.TEXTURE_CUBE_MAP,i),e.generateMipmap(e.TEXTURE_CUBE_MAP),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR);const r=t.map(e=>e.image);n(i,r),Lo.set(e,r),Do.set(e,i)}).catch(e=>{console.error("[CubemapLayer][loadCubemapTexture]: Error loading cubemap texture",e)})}({gl:e,faces:t,onReady:e=>{this.texture=e,this.animateIn()}})}}prerender(e,t){this.faces&&this.updateTexture(this.gl,this.faces)}animateColorChange(){const e=()=>{this.transitionDelta<1&&(requestAnimationFrame(e),this.bgColor=function(e,t,n){return[zo(e[0],t[0],n),zo(e[1],t[1],n),zo(e[2],t[2],n),zo(e[3],t[3],n)]}(this.previousBgColor,this.targetBgColor,this.transitionDelta),this.transitionDelta+=.075,this.map.triggerRepaint())};requestAnimationFrame(e)}async animateIn(){if(!this.imageIsAnimating)return this.animationActive?new Promise(e=>{this.imageIsAnimating=!0;const t=()=>{this.imageFadeInDelta=Math.min(this.imageFadeInDelta+.05,1),this.currentFadeOpacity=zo(0,1,this.imageFadeInDelta),this.map.triggerRepaint(),this.imageFadeInDelta<1?requestAnimationFrame(t):(this.imageIsAnimating=!1,this.imageFadeInDelta=0,e())};requestAnimationFrame(t)}):(this.currentFadeOpacity=1,this.imageFadeInDelta=1,void this.map.triggerRepaint())}async animateOut(){if(!this.imageIsAnimating&&this.animationActive)return new Promise(e=>{const t=()=>{if(this.imageFadeInDelta=Math.min(this.imageFadeInDelta+.05,1),this.currentFadeOpacity=zo(1,0,this.imageFadeInDelta),this.map.triggerRepaint(),this.imageFadeInDelta>=1)return this.imageIsAnimating=!1,this.imageFadeInDelta=0,void e();requestAnimationFrame(t)};requestAnimationFrame(t)})}setAnimationActive(e){this.animationActive=e}render(e,t){if(!this.map.isGlobeProjection())return;if(void 0===this.map)throw new Error("[CubemapLayer]: Map is undefined");if(void 0===this.cubemap)throw new Error("[CubemapLayer]: Cubemap is undefined");this.texture,e.disable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.DST_ALPHA),e.useProgram(this.cubemap.shaderProgram),e.bindBuffer(e.ARRAY_BUFFER,this.cubemap.positionBuffer),e.vertexAttribPointer(this.cubemap.programInfo.attributesLocations.vertexPosition,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.cubemap.programInfo.attributesLocations.vertexPosition);const n=e.canvas,r=n.clientWidth/n.clientHeight,i=this.map.transform,o=i.fov*(Math.PI/180),s=no();fo(s,o,r,.1,1e4),io(s,s,i.rollInRadians),ro(s,s,-i.pitchInRadians),io(s,s,i.bearingInRadians);const a=i.center.lat*Math.PI/180,l=i.center.lng*Math.PI/180;ro(s,s,a),function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=s*i-u*r,e[2]=a*i-h*r,e[3]=l*i-d*r,e[8]=o*r+c*i,e[9]=s*r+u*i,e[10]=a*r+h*i,e[11]=l*r+d*i}(s,s,-l),e.uniformMatrix4fv(this.cubemap.programInfo.uniformsLocations.projectionMatrix,!1,s);const c=no();if(e.uniformMatrix4fv(this.cubemap.programInfo.uniformsLocations.modelViewMatrix,!1,c),e.uniform4fv(this.cubemap.programInfo.uniformsLocations.bgColor,new Float32Array(this.bgColor)),e.uniform1f(this.cubemap.programInfo.uniformsLocations.fadeOpacity,this.currentFadeOpacity),this.useCubemapTexture&&this.texture&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_CUBE_MAP,this.texture),e.uniform1i(this.cubemap.programInfo.uniformsLocations.cubeSampler,0)),void 0===this.cubemap.indexBuffer)throw new Error("Index buffer is undefined");if(void 0===this.cubemap.indexBufferLength)throw new Error("Index buffer length is undefined");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.cubemap.indexBuffer),e.drawElements(e.TRIANGLES,this.cubemap.indexBufferLength,e.UNSIGNED_SHORT,0)}setBgColor(e){this.targetBgColor=e,this.previousBgColor=this.bgColor,this.transitionDelta=0}getConfig(){return this.options}shouldUpdate(e){const t=this.getConfig();if(void 0===e&&t)return!1;const n=Uo(e),r=Uo(t);return JSON.stringify(n)!==JSON.stringify(r)}async setCubemapFaces(e){if(await this.animateOut(),!e.faces&&!e.preset&&!e.path)return this.faces=null,this.useCubemapTexture=!1,this.currentFacesDefinitionKey="empty",void await this.animateIn();this.faces=qo(e),this.currentFacesDefinitionKey=JSON.stringify(e.faces??e.preset??e.path)}async setCubemap(e){const t="boolean"==typeof e?$o:e;this.options=t;const n=JSON.stringify(t.faces??t.preset??t.path),r=this.currentFacesDefinitionKey!==n;r&&(await this.setCubemapFaces(t),this.cubeMapNeedsUpdate=!0);const i=Eo(t.color);if(t.color&&this.targetBgColor.toString()!==i.toString())this.setBgColor(i);else if(!t.color&&t.preset&&t.preset in Oo){const e=Oo[t.preset];this.setBgColor(Eo(e.color))}this.updateCubemap({facesNeedUpdate:r})}show(){this.map.setLayoutProperty(this.id,"visibility","visible")}hide(){this.map.setLayoutProperty(this.id,"visibility","none")}}function Go(e){return!!e&&("boolean"==typeof e||!(!e.path&&!e.preset&&!e.faces&&!e.color||e.preset&&!(e.preset in Oo)||e.faces&&(!e.faces.pX||!e.faces.nX||!e.faces.pY||!e.faces.nY||!e.faces.pZ||!e.faces.nZ)))}function qo(e){if(e.faces)return e.faces;if(e.preset)return{pX:`${jo}/${e.preset}/px.webp`,nX:`${jo}/${e.preset}/nx.webp`,pY:`${jo}/${e.preset}/py.webp`,nY:`${jo}/${e.preset}/ny.webp`,pZ:`${jo}/${e.preset}/pz.webp`,nZ:`${jo}/${e.preset}/nz.webp`};if(e.path){const t=e.path.baseUrl,n=e.path.format??"png";return{pX:`${t}/px.${n}`,nX:`${t}/nx.${n}`,pY:`${t}/py.${n}`,nY:`${t}/ny.${n}`,pZ:`${t}/pz.${n}`,nZ:`${t}/nz.${n}`}}return null}const Wo=["position"],Ko=["matrix","rotationMatrix","stopsNumber","stops","colors","maxDistance","scale"],Zo=[-2,-2,0,2,-2,0,-2,2,0,2,2,0],Jo={scale:.9,stops:[[0,"rgba(176, 208, 240, 1)"],[.1,"rgba(98, 168, 229, 0.3)"],[.2,"rgba(98, 168, 229, 0.0)"]]};class Xo{constructor(e){if(O(this,"id","Halo Layer"),O(this,"type","custom"),O(this,"renderingMode","3d"),O(this,"gradient"),O(this,"scale",0),O(this,"animationDelta",0),O(this,"map"),O(this,"plane"),O(this,"animationActive",!0),"boolean"==typeof e)return void(this.gradient=Jo);const t=es(e);if(t.length>0)throw new Error(`[RadialGradientLayer]: Invalid Halo specification:\n - ${t.join("\n - ")}\n    `);this.gradient={...Jo,...e}}onAdd(e,t){this.map=e,this.plane=So({gl:t,vertexShaderSource:"attribute vec3 a_position;\n\nuniform mat4 u_matrix;\nuniform mat4 u_rotationMatrix;\n\nuniform float u_scale;\n\nvarying vec2 v_pos;\nvarying float v_scale;\n\nvoid main() {\n  v_scale = u_scale;\n  v_pos = a_position.xy * u_scale;\n  gl_Position = u_matrix * u_rotationMatrix * vec4(a_position, 1.0);\n}\n",fragmentShaderSource:"precision mediump float;\nvarying vec2 v_pos;\n      \nuniform int u_stopsNumber;\nuniform float u_stops[100];\nuniform vec4 u_colors[100];\nuniform float u_maxDistance;\n\nvarying float v_scale;\n\nconst float EPSILON = 0.000001;\n\nvec2 center = vec2(0.0, 0.0);\nvoid main() {\n  float rawDistance = distance(center, v_pos);\n  float distanceFromGlobeEdge = rawDistance - 1.0;\n\n    vec4 color = u_colors[0];\n\n  // if we're further than the max distance, we should not render anything.\n  // This is to always render a circle, otherwise we end up rendering\n  // to the corners of the plane.\n  if (distance(center, v_pos) > u_maxDistance * v_scale) {\n    discard;\n  }\n\n  for (int i = 1; i < 100; i++) {\n    // if we're past the last stop\n    // we should fill to the end with the last stop color\n    if (i >= u_stopsNumber) {\n      color = u_colors[i - 1];\n      break;\n    }\n\n    float scaledStopPosition = u_stops[i] * pow(v_scale, 1.6);\n    float lastStopValue = u_stops[i - 1];\n    float thisStopValue = u_stops[i];\n\n    // this is to avoid blending errors when the stops are the same\n    // eg when you would want a sharp edge between two stops.\n    // `numbersAreEqual` will be 1.0 if the numbers are equal, 0.0 if they are not.\n    // We then subtract EPSILON from the last stop making the stop value _almost_ equal\n    // to the next stop but not enough to cause blending issues.\n    // It's more efficient to do this than an if / else statement.\n    float numbersAreEqual = 1.0 - step(EPSILON, abs(lastStopValue - thisStopValue));\n    lastStopValue = lastStopValue - numbersAreEqual * EPSILON;\n\n    float lastScaledStopPosition = lastStopValue * pow(v_scale, 1.6);\n\n    if (distanceFromGlobeEdge <= scaledStopPosition) {\n      float stopBlendFactor = (distanceFromGlobeEdge - lastScaledStopPosition) / (scaledStopPosition - lastScaledStopPosition);\n      color = mix(u_colors[i - 1], u_colors[i], stopBlendFactor);\n      break;\n    }\n  }\n  \n  // gl_FragColor = color;\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n",attributesKeys:Wo,uniformsKeys:Ko,vertices:Zo}),this.animateIn()}getConfig(){return this.gradient}shouldUpdate(e){const t=this.getConfig();if(void 0===e&&t)return!1;const n=Uo(e),r=Uo(t);return JSON.stringify(n)!==JSON.stringify(r)}async animateIn(){return this.animationActive?new Promise(e=>{this.animationDelta=0;const t=()=>{if(this.animationDelta<1)return this.scale=zo(0,this.gradient.scale,this.animationDelta),this.animationDelta+=.06,this.map.triggerRepaint(),void requestAnimationFrame(t);e()};requestAnimationFrame(t)}):(this.scale=this.gradient.scale,this.animationDelta=1,void this.map.triggerRepaint())}async animateOut(){if(this.animationActive)return this.animationDelta=0,new Promise(e=>{const t=()=>{if(this.animationDelta<1)return this.scale=zo(this.gradient.scale,0,this.animationDelta),this.animationDelta+=.06,this.map.triggerRepaint(),void requestAnimationFrame(t);e()};t()})}onRemove(e,t){void 0!==this.plane&&(t.deleteProgram(this.plane.shaderProgram),t.deleteBuffer(this.plane.positionBuffer))}prerender(e,t){}render(e,t){if(void 0===this.map)throw new Error("[RadialGradientLayer]: Map is undefined");if(!this.map.isGlobeProjection())return;if(void 0===this.plane)throw new Error("[RadialGradientLayer]: Plane is undefined");e.disable(e.DEPTH_TEST),e.enable(e.BLEND),e.useProgram(this.plane.shaderProgram),e.bindBuffer(e.ARRAY_BUFFER,this.plane.positionBuffer);const n=this.plane.programInfo.attributesLocations.position;e.enableVertexAttribArray(n),e.vertexAttribPointer(n,3,e.FLOAT,!1,0,0);const r=no(),i=this.scale;!function(e,t,n){var r=n[0],i=n[1],o=n[2];e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(r,r,[i,i,i]);const o=no();!function(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],w=n[2],x=n[3];e[0]=_*r+b*a+w*h+x*m,e[1]=_*i+b*l+w*d+x*g,e[2]=_*o+b*c+w*p+x*y,e[3]=_*s+b*u+w*f+x*v,_=n[4],b=n[5],w=n[6],x=n[7],e[4]=_*r+b*a+w*h+x*m,e[5]=_*i+b*l+w*d+x*g,e[6]=_*o+b*c+w*p+x*y,e[7]=_*s+b*u+w*f+x*v,_=n[8],b=n[9],w=n[10],x=n[11],e[8]=_*r+b*a+w*h+x*m,e[9]=_*i+b*l+w*d+x*g,e[10]=_*o+b*c+w*p+x*y,e[11]=_*s+b*u+w*f+x*v,_=n[12],b=n[13],w=n[14],x=n[15],e[12]=_*r+b*a+w*h+x*m,e[13]=_*i+b*l+w*d+x*g,e[14]=_*o+b*c+w*p+x*y,e[15]=_*s+b*u+w*f+x*v}(o,t.defaultProjectionData.mainMatrix,r);const s=this.plane.programInfo.uniformsLocations.matrix;e.uniformMatrix4fv(s,!1,o);const a=no(),l=this.map.transform.cameraPosition,c=go(mo(),l),u=function(e,t,n){var r=new to(3);return r[0]=e,r[1]=t,r[2]=n,r}(0,1,0),h=mo();yo(h,u,c),go(h,h);const d=mo();yo(d,c,h),go(d,d),function(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g){e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=s,e[6]=a,e[7]=l,e[8]=c,e[9]=u,e[10]=h,e[11]=d,e[12]=p,e[13]=f,e[14]=m,e[15]=g}(a,h[0],h[1],h[2],0,d[0],d[1],d[2],0,c[0],c[1],c[2],0,0,0,0,1);const p=this.plane.programInfo.uniformsLocations.rotationMatrix;e.uniformMatrix4fv(p,!1,a);const f=this.gradient.stops.length,m=[],g=[];for(let y=0;y<=f;y++)if(y<f){m[y]=this.gradient.stops[y][0];const e=Eo(this.gradient.stops[y][1]);g.push(...e)}e.uniform1i(this.plane.programInfo.uniformsLocations.stopsNumber,f),e.uniform1fv(this.plane.programInfo.uniformsLocations.stops,new Float32Array(m)),e.uniform4fv(this.plane.programInfo.uniformsLocations.colors,new Float32Array(g)),e.uniform1f(this.plane.programInfo.uniformsLocations.maxDistance,2),e.uniform1f(this.plane.programInfo.uniformsLocations.scale,i),e.drawArrays(e.TRIANGLE_STRIP,0,4)}async setGradient(e){if(!1===e)return void await this.animateOut();await this.animateOut();const t=es(e);if(t.length>0)throw new Error(`[RadialGradientLayer]: Invalid Halo specification:\n - ${t.join("\n - ")}\n    `);!0===e?(this.gradient.scale=Jo.scale,this.gradient.stops=Jo.stops):(this.gradient.scale=e.scale??Jo.scale,this.gradient.stops=e.stops??Jo.stops),await this.animateIn()}setAnimationActive(e){this.animationActive=e}show(){this.map.setLayoutProperty(this.id,"visibility","visible")}hide(){this.map.setLayoutProperty(this.id,"visibility","none")}}const Qo=["scale","stops"];function es(e){var t;const n=[];if("boolean"==typeof e)return[];try{const t=Object.keys(e).filter(e=>!Qo.includes(e));t.length>0&&n.push(`Properties ${t.map(e=>`\`${e}\``).join(", ")} are not supported.`)}catch{n.push("Halo specification is not an object.")}return"number"!=typeof e.scale&&n.push("Halo `scale` property is not a number."),(!e.stops||0===e.stops.length)&&n.push("Halo `stops` property is not an array."),null!=(t=e.stops)&&t.some(e=>"number"!=typeof e[0]||"string"!=typeof e[1])&&n.push("Halo `stops` property is not an array of [number, string]"),n}const ts="COUNTRY";let ns=class e extends r.Map{constructor(e){ue(e.container),e.apiKey&&(K.apiKey=e.apiKey);const{style:t,requiresUrlMonitoring:n,isFallback:i}=bi(e.style);i&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),K.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const o=location.hash;let s={compact:!1};e.customAttribution?s.customAttribution=e.customAttribution:e.attributionControl&&"object"==typeof e.attributionControl&&(s={...s,...e.attributionControl});const a={...e,style:t,maplibreLogo:!1,transformRequest:ae(e.transformRequest),attributionControl:!0!==e.forceNoAttributionControl&&s};delete a.style,super(a),O(this,"telemetry"),O(this,"space"),O(this,"halo"),O(this,"options"),O(this,"isTerrainEnabled",!1),O(this,"terrainExaggeration",1),O(this,"primaryLanguage"),O(this,"terrainGrowing",!1),O(this,"terrainFlattening",!1),O(this,"minimap"),O(this,"forceLanguageUpdate"),O(this,"languageAlwaysBeenStyle"),O(this,"isReady",!1),O(this,"terrainAnimationDuration",1e3),O(this,"monitoredStyleUrls"),O(this,"styleInProcess",!1),O(this,"curentProjection"),O(this,"originalLabelStyle",new window.Map),O(this,"isStyleLocalized",!1),O(this,"languageIsUpdated",!1),this.options=e,this.setStyle(t),n&&this.monitorStyleUrl(t);const l=()=>{let e="The distant style could not be loaded.";this.getStyle()?e+=" Leaving the style as is.":(this.setStyle(x.STREETS),e+=`Loading default MapTiler Cloud style "${x.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(e)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",e=>{if(console.error(e.error),e.error instanceof r.AJAXError){const t=e.error.url,n=new URL(t);n.search="";const r=n.href;return void(this.monitoredStyleUrls&&this.monitoredStyleUrls.has(r)&&(this.monitoredStyleUrls.delete(r),l()))}this.styleInProcess&&l()}),K.caching&&!Q&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),K.caching&&Q&&oe(),typeof e.language>"u")this.primaryLanguage=K.primaryLanguage;else{const t=h(e.language,Y);this.primaryLanguage=t??K.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===Y.STYLE||this.primaryLanguage===Y.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Y.STYLE,this.terrainExaggeration=e.terrainExaggeration??this.terrainExaggeration,this.curentProjection=e.projection,this.on("style.load",e=>{"mercator"===this.curentProjection?this.setProjection({type:"mercator"}):"globe"===this.curentProjection&&this.setProjection({type:"globe"})}),this.once("styledata",async()=>{if(!e.geolocate||e.center||e.hash&&o)return;try{if(e.geolocate===ts)return void await this.fitToIpBounds()}catch(n){console.warn(n.message)}let t;try{await this.centerOnIpPoint(e.zoom),t=this.getCameraHash()}catch(n){console.warn(n.message)}"granted"===(await navigator.permissions.query({name:"geolocation"})).state&&navigator.geolocation.getCurrentPosition(n=>{t===this.getCameraHash()&&(this.terrain?this.easeTo({center:[n.coords.longitude,n.coords.latitude],zoom:e.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[n.coords.longitude,n.coords.latitude],zoom:e.zoom||12,duration:2e3})}))},null,{maximumAge:864e5,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{null===this.getTerrain()&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let t={logo:null};try{const e=Object.keys(this.style.sourceCaches).map(e=>this.getSource(e)).filter(e=>e&&"url"in e&&"string"==typeof e.url&&e.url.includes("tiles.json")),n=new URL(e[0].url);n.searchParams.has("key")||n.searchParams.append("key",K.apiKey),t=await(await fetch(n.href)).json()}catch{}if(e.customControls){const t="[data-maptiler-control-group]",n="[data-maptiler-control]",r=e=>{let t=e.dataset.maptilerControl;return("true"===t||""===t)&&(t=void 0),t},i=e=>e.dataset.maptilerPosition;let o=[...this._container.ownerDocument.querySelectorAll(t)],s=[...this._container.ownerDocument.querySelectorAll(n)].filter(e=>null===e.closest(t));if("string"==typeof e.customControls){const t=e.customControls;o=o.filter(e=>e.matches(t)||null!==e.closest(t)),s=s.filter(e=>e.matches(t)||null!==e.closest(t))}for(const e of o){const t=new Xi(e);this.addControl(t,i(e));for(const i of e.querySelectorAll(n))t.configureGroupItem(i,r(i))}for(const e of s)this.addControl(new Xi(e,r(e)),i(e));const a=()=>{const{lng:e,lat:t}=this.getCenter();this._container.style.setProperty("--maptiler-center-lng",String(e)),this._container.style.setProperty("--maptiler-center-lat",String(t)),this._container.style.setProperty("--maptiler-zoom",String(this.getZoom())),this._container.style.setProperty("--maptiler-bearing",String(this.getBearing())),this._container.style.setProperty("--maptiler-pitch",String(this.getPitch())),this._container.style.setProperty("--maptiler-roll",String(this.getRoll())),this._container.style.setProperty("--maptiler-is-globe-projection",String(this.isGlobeProjection())),this._container.style.setProperty("--maptiler-has-terrain",String(this.hasTerrain()))};a(),this.on("render",a)}if(!0!==e.forceNoAttributionControl)if("logo"in t&&t.logo){const n=t.logo;this.addControl(new Z({logoURL:n}),e.logoPosition)}else e.maptilerLogo&&this.addControl(new Z,e.logoPosition);if(e.scaleControl){const t=!0===e.scaleControl||void 0===e.scaleControl?"bottom-right":e.scaleControl,n=new H({unit:K.unit});this.addControl(n,t),K.on("unit",e=>{n.setUnit(e)})}if(!1!==e.navigationControl){const t=!0===e.navigationControl||void 0===e.navigationControl?"top-right":e.navigationControl;this.addControl(new Mi,t)}if(!1!==e.geolocateControl){const t=!0===e.geolocateControl||void 0===e.geolocateControl?"top-right":e.geolocateControl;this.addControl(new Ii({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),t)}if(e.terrainControl){const t=!0===e.terrainControl||void 0===e.terrainControl?"top-right":e.terrainControl;this.addControl(new Ei,t)}if(e.projectionControl){const t=!0===e.projectionControl||void 0===e.projectionControl?"top-right":e.projectionControl;this.addControl(new Fi,t)}if(e.fullscreenControl){const t=!0===e.fullscreenControl||void 0===e.fullscreenControl?"top-right":e.fullscreenControl;this.addControl(new $({}),t)}this.isReady=!0,this.fire("ready",{target:this})});let c,u=!1,d=!1;this.once("ready",()=>{u=!0,d&&this.fire("loadWithTerrain",c)}),this.once("style.load",()=>{const{minimap:t}=e;if("object"==typeof t){const{zoom:n,center:r,style:i,language:o,apiKey:s,maptilerLogo:a,canvasContextAttributes:l,refreshExpiredTiles:c,maxBounds:u,scrollZoom:h,minZoom:d,maxZoom:p,boxZoom:f,locale:m,fadeDuration:g,crossSourceCollisions:y,clickTolerance:v,bounds:_,fitBoundsOptions:b,pixelRatio:w,validateStyle:x}=e;this.minimap=new Qi(t,{zoom:n,center:r,style:i,language:o,apiKey:s,container:"null",maptilerLogo:a,canvasContextAttributes:l,refreshExpiredTiles:c,maxBounds:u,scrollZoom:h,minZoom:d,maxZoom:p,boxZoom:f,locale:m,fadeDuration:g,crossSourceCollisions:y,clickTolerance:v,bounds:_,fitBoundsOptions:b,pixelRatio:w,validateStyle:x}),this.addControl(this.minimap,t.position??"bottom-left")}else!0===t?(this.minimap=new Qi({},e),this.addControl(this.minimap,"bottom-left")):void 0!==t&&!1!==t&&(this.minimap=new Qi({},e),this.addControl(this.minimap,t))});const p=e=>{e.terrain&&(d=!0,c={type:"loadWithTerrain",target:this,terrain:e.terrain},this.off("terrain",p),u&&this.fire("loadWithTerrain",c))};this.on("terrain",p),e.terrain&&this.enableTerrain(e.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",e=>{!0!==this._removed?(console.warn("[webglcontextlost]","Unexpected loss of WebGL context!"),this.fire("webglContextLost",e)):console.warn("[webglcontextlost]","WebGL context lost after map removal. This is harmless.")}),e.halo&&this.initHalo({options:e,before:this.getLayersOrder()[0]}),e.space&&this.initSpace({options:e,before:this.getLayersOrder()[0]})}),this.telemetry=new eo(this)}getSpace(){return this.space}setSpace(e,t=!0){if(t&&(this.options.space=e),!1!==e)return this.space?(this.space.setCubemap(e),void(this.getLayer(this.space.id)||this.addLayer(this.space,this.getLayersOrder()[0]))):(this.space=new Yo(e),void this.once("load",()=>{const e=this.getLayersOrder()[0];this.space&&this.addLayer(this.space,e)}));this.space=void 0}enableSpaceAnimations(){this.setSpaceAnimationActive(!0)}disableSpaceAnimations(){this.setSpaceAnimationActive(!1)}enableHaloAnimations(){this.setHaloAnimationActive(!0)}disableHaloAnimations(){this.setHaloAnimationActive(!1)}setHaloAnimationActive(e){this.halo?this.halo.setAnimationActive(e):this.once("load",()=>{var t;null==(t=this.halo)||t.setAnimationActive(e)})}setSpaceAnimationActive(e){this.space?this.space.setAnimationActive(e):this.once("load",()=>{var t;null==(t=this.space)||t.setAnimationActive(e)})}setSpaceFromSpec({spec:e}){var t;if(!1===this.options.space)return;if("boolean"==typeof e)return void this.setSpace(e,!0);if(!0!==this.options.space&&Go(this.options.space))return void this.setSpace(this.options.space,!0);const n=Go(e);if(JSON.stringify(null==(t=this.space)?void 0:t.getConfig())!==JSON.stringify(e))n?this.setSpace(e,!1):!0!==this.options.space?(()=>{this.space&&this.isGlobeProjection()&&this.space.setCubemap(e)})():this.setSpace(!0);else if(this.space&&!this.getLayer(this.space.id)){const e=this.getLayersOrder()[0];this.addLayer(this.space,e)}}setHaloFromSpec({spec:e}){var t,n;if(!1!==this.options.halo){if("boolean"==typeof e)return console.log("spec is boolean",e),void this.setHalo(e);if(JSON.stringify(null==(t=this.halo)?void 0:t.getConfig())!==JSON.stringify(e)){if(!e&&!this.options.halo)return console.log("spec is false, and options.halo is false"),void this.setHalo({stops:[[0,"transparent"],[1,"transparent"]],scale:1});(()=>{var t;if(console.log("updateHalo",e),this.halo){if(console.log("halo exists",this.getLayer(this.halo.id)),!this.getLayer(this.halo.id)){console.log("halo not in map, adding it");const e=this.getLayersOrder().indexOf((null==(t=this.space)?void 0:t.id)??"")+1,n=this.getLayersOrder()[e];this.addLayer(this.halo,n)}e&&(console.log("SET HALO FROM SPEC",e),this.halo.setGradient(e))}})()}else if(console.log("HALO IS THE SAME",e),this.halo&&!this.getLayer(this.halo.id)){const e=this.getLayersOrder().indexOf((null==(n=this.space)?void 0:n.id)??"")+1,t=this.getLayersOrder()[e];this.addLayer(this.halo,t)}}else console.log("options.halo is false")}initSpace({options:e=this.options,before:t=this.getLayersOrder()[0],spec:n}){if(this.space)return void(this.getLayer(this.space.id)||this.addLayer(this.space,t));if(!1===e.space)return;const r=n;if(e.space)return this.space=new Yo(e.space),void this.addLayer(this.space,t);r&&(this.space=new Yo(r),this.addLayer(this.space,t))}initHalo({options:e=this.options,before:t=this.getLayersOrder()[0],spec:n}){if(this.halo&&this.getLayer(this.halo.id)||!1===e.halo)return;const r=n;if(e.halo)return this.halo=new Xo(e.halo),void this.addLayer(this.halo,t);r&&(this.halo=new Xo(r),this.addLayer(this.halo,t))}getHalo(){return this.halo}setHalo(e){if(this.options.halo=e,this.isGlobeProjection()){if(this.halo)return void this.halo.setGradient(e);this.halo=new Xo(e),this.once("load",()=>{var e;const t=this.getLayersOrder(),n=t[0],r=t.indexOf((null==(e=this.space)?void 0:e.id)??"")+2,i=t[r];this.halo&&this.addLayer(this.halo,this.space?i:n)})}}recreate(){const t={center:this.getCenter(),zoom:this.getZoom(),bearing:this.getBearing(),pitch:this.getPitch()};this.remove(),Object.assign(this,new e({...this.options})),this.once("load",()=>{this.jumpTo(t)})}setTerrainAnimationDuration(e){this.terrainAnimationDuration=Math.max(e,0)}async onLoadAsync(){return new Promise(e=>{this.loaded()?e(this):this.once("load",()=>{e(this)})})}async onReadyAsync(){return new Promise(e=>{this.isReady?e(this):this.once("ready",()=>{e(this)})})}async onLoadWithTerrainAsync(){return new Promise(e=>{this.isReady&&this.terrain?e(this):this.once("loadWithTerrain",()=>{e(this)})})}monitorStyleUrl(e){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const t=new URL(e);t.search="",this.monitoredStyleUrls.add(t.href)}setStyle(e,t={}){var n,r,i,o,s;const a={transformStyle:(e,t)=>{var n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_,b,w,x,S;const E=!(null!=(r=null==(n=null==t?void 0:t.metadata)?void 0:n.maptiler)&&r.space)&&!(null==(o=null==(i=null==e?void 0:e.metadata)?void 0:i.maptiler)||!o.space),T=!(null!=(a=null==(s=null==t?void 0:t.metadata)?void 0:s.maptiler)&&a.halo)&&!(null==(c=null==(l=null==e?void 0:e.metadata)?void 0:l.maptiler)||!c.halo);E&&(console.trace("space has been removed from style, removing it"),null==(u=this.space)||u.onRemove(this,this.getCanvas().getContext("webgl2")),this.space=void 0),T&&(console.trace("halo has been removed from style, removing it"),null==(h=this.halo)||h.onRemove(this,this.getCanvas().getContext("webgl2")),this.halo=void 0);const M=!this.space||this.space.shouldUpdate(null==(p=null==(d=null==t?void 0:t.metadata)?void 0:d.maptiler)?void 0:p.space),A=!this.halo||this.halo.shouldUpdate(null==(m=null==(f=null==t?void 0:t.metadata)?void 0:f.maptiler)?void 0:m.halo),k=(null==(g=null==e?void 0:e.terrain)?void 0:g.source)!==(null==(y=null==t?void 0:t.terrain)?void 0:y.source)||(null==(v=null==e?void 0:e.terrain)?void 0:v.exaggeration)!==(null==(_=null==t?void 0:t.terrain)?void 0:_.exaggeration),C=A||k;if(M||k)try{const e=(null==(w=null==(b=null==t?void 0:t.metadata)?void 0:b.maptiler)?void 0:w.space)??!1;this.once("style.load",()=>{var t;this.getLayer((null==(t=this.space)?void 0:t.id)??"")?this.setSpaceFromSpec({spec:e}):this.initSpace({spec:e})})}catch(I){console.error(I)}if(C)try{const e=(null==(S=null==(x=null==t?void 0:t.metadata)?void 0:x.maptiler)?void 0:S.halo)??!1;this.once("style.load",()=>{var t;this.getLayer((null==(t=this.halo)?void 0:t.id)??"")?this.setHaloFromSpec({spec:e}):this.initHalo({spec:e})})}catch(I){console.error(I)}return{...t}},diff:!0,...t};this.originalLabelStyle.clear(),null==(n=this.minimap)||n.setStyle(e,{}),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const l=bi(e);if(l.requiresUrlMonitoring&&this.monitorStyleUrl(l.style),l.isFallback){if(this.getStyle())return console.warn("[Map.setStyle]: Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("[Map.setStyle]: Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}try{super.setStyle(l.style,a),this.styleInProcess=!0}catch(c){this.styleInProcess=!1,console.error("[Map.setStyle]: Error while setting style:",c)}try{if(l.isJSON){const e=null==(i=null==(r=l.style.metadata)?void 0:r.maptiler)?void 0:i.halo,t=null==(s=null==(o=l.style.metadata)?void 0:o.maptiler)?void 0:s.space;e&&this.setHalo(e),t&&this.setSpace(t)}}catch(c){console.error("[Map.setStyle]: Error while setting halo or space from style:",c)}return this}addLayer(e,t){var n;return null==(n=this.minimap)||n.addLayer(e,t),super.addLayer(e,t)}moveLayer(e,t){var n;return null==(n=this.minimap)||n.moveLayer(e,t),super.moveLayer(e,t)}removeLayer(e){var t;return null==(t=this.minimap)||t.removeLayer(e),super.removeLayer(e)}setLayerZoomRange(e,t,n){var r;return null==(r=this.minimap)||r.setLayerZoomRange(e,t,n),super.setLayerZoomRange(e,t,n)}setFilter(e,t,n){var r;return null==(r=this.minimap)||r.setFilter(e,t,n),super.setFilter(e,t,n)}setPaintProperty(e,t,n,r){var i;return null==(i=this.minimap)||i.setPaintProperty(e,t,n,r),super.setPaintProperty(e,t,n,r)}setLayoutProperty(e,t,n,r){var i;return null==(i=this.minimap)||i.setLayoutProperty(e,t,n,r),super.setLayoutProperty(e,t,n,r)}setGlyphs(e,t){var n;return null==(n=this.minimap)||n.setGlyphs(e,t),super.setGlyphs(e,t)}getStyleLanguage(){return this.style&&this.style.stylesheet&&this.style.stylesheet.metadata&&"object"==typeof this.style.stylesheet.metadata&&"maptiler:language"in this.style.stylesheet.metadata&&"string"==typeof this.style.stylesheet.metadata["maptiler:language"]?c(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(e){var t;null==(t=this.minimap)||t.map.setLanguage(e),this.onStyleReady(()=>{this.setPrimaryLanguage(e)})}setPrimaryLanguage(e){const t=this.getStyleLanguage(),n=h(e,Y);if(!n)return void console.warn(`The language "${n}" is not supported.`);if((n.flag!==Y.STYLE.flag||!t||t.flag!==Y.AUTO.flag&&t.flag!==Y.VISITOR.flag)&&(n.flag!==Y.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===n&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===Y.STYLE_LOCK.flag)return void console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");this.primaryLanguage=n;let r=n;if(n.flag===Y.STYLE.flag){if(!t)return void console.warn("The style has no default languages or has an invalid one.");r=t}let i=Y.LOCAL.flag,o=["get",i];r.flag===Y.VISITOR.flag?(i=G().flag,o=["case",["all",["has",i],["has",Y.LOCAL.flag]],["case",["==",["get",i],["get",Y.LOCAL.flag]],["get",Y.LOCAL.flag],["format",["get",i],{"font-scale":.8},"\n",["get",Y.LOCAL.flag],{"font-scale":1.1}]],["get",Y.LOCAL.flag]]):r.flag===Y.VISITOR_ENGLISH.flag?(i=Y.ENGLISH.flag,o=["case",["all",["has",i],["has",Y.LOCAL.flag]],["case",["==",["get",i],["get",Y.LOCAL.flag]],["get",Y.LOCAL.flag],["format",["get",i],{"font-scale":.8},"\n",["get",Y.LOCAL.flag],{"font-scale":1.1}]],["get",Y.LOCAL.flag]]):r.flag===Y.AUTO.flag?(i=G().flag,o=["coalesce",["get",i],["get",Y.LOCAL.flag]]):r===Y.LOCAL?(i=Y.LOCAL.flag,o=["get",i]):(i=r.flag,o=["coalesce",["get",i],["get",Y.LOCAL.flag]]);const{layers:s}=this.getStyle(),a=0===this.originalLabelStyle.size;if(a){const e=function(e,t){const n=[];for(const o of e){if("symbol"!==o.type)continue;const e=o,{id:r,layout:i}=e;if(!i||!("text-field"in i))continue;const s=t.getLayoutProperty(r,"text-field");if(s)if("string"==typeof s){const e=me(s);n.push(e)}else{const e=ye(s);n.push(e)}}const r=n.flat(),i={unlocalized:0,localized:{}};for(const o of r)null===o?i.unlocalized+=1:(o in i.localized||(i.localized[o]=0),i.localized[o]+=1);return i}(s,this);this.isStyleLocalized=Object.keys(e.localized).length>0}for(const l of s){if("symbol"!==l.type)continue;const e=l,t=this.getSource(e.source);if(!t||!("url"in t)||"string"!=typeof t.url||new URL(t.url).host!==q.maptilerApiHost)continue;const{id:n,layout:r}=e;if(!r||!("text-field"in r))continue;let i;if(a?(i=this.getLayoutProperty(n,"text-field"),this.originalLabelStyle.set(n,i)):i=this.originalLabelStyle.get(n),"string"==typeof i){const{contains:e,exactMatch:t}=pe(i,this.isStyleLocalized);if(!e)continue;if(t)this.setLayoutProperty(n,"text-field",o);else{const e=fe(i,o,this.isStyleLocalized);this.setLayoutProperty(n,"text-field",e)}}else{const e=de(i,o,this.isStyleLocalized);this.setLayoutProperty(n,"text-field",e)}}this.languageIsUpdated=!0}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(e){if(!this.terrain)return;const t=performance.now(),n=this.terrain.exaggeration,r=e-n,i=()=>{if(!this.terrain||this.terrainFlattening)return;const o=(performance.now()-t)/this.terrainAnimationDuration;if(o<.99){const e=n+(1-(1-o)**4)*r;this.terrain.exaggeration=e,requestAnimationFrame(i)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=e,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(i)}enableTerrain(e=this.terrainExaggeration){if(e<0)return void console.warn("Terrain exaggeration cannot be negative.");const t=n=>{!this.terrain||"data"!==n.type||"source"!==n.dataType||!("source"in n)||"maptiler-terrain"!==n.sourceId||"raster-dem"!==n.source.type||n.isSourceLoaded&&(this.off("data",t),this.growTerrain(e))},n=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=e,this.on("data",t),this.addSource(q.terrainSourceId,{type:"raster-dem",url:q.terrainSourceURL}),this.setTerrain({source:q.terrainSourceId,exaggeration:0})};if(this.getTerrain())return this.isTerrainEnabled=!0,void this.growTerrain(e);if(this.loaded()||this.isTerrainEnabled)n();else{const e=()=>{this.getTerrain()&&this.getSource(q.terrainSourceId)||n()};this.once("load",()=>{e()}),this.once("moveend",()=>{e()})}}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const e=performance.now(),t=this.terrain.exaggeration,n=()=>{if(!this.terrain||this.terrainGrowing)return;const r=(performance.now()-e)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,r<.99){const e=t*(1-r)**4;this.terrain.exaggeration=e,requestAnimationFrame(n)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(q.terrainSourceId)&&this.removeSource(q.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(n)}setTerrainExaggeration(e,t=!0){!t&&this.terrain?(this.terrainExaggeration=e,this.terrain.exaggeration=e,this.triggerRepaint()):this.enableTerrain(e)}onStyleReady(e){this.isStyleLoaded()?e():this.once("styledata",()=>{e()})}async fitToIpBounds(){const e=await g.info();this.fitBounds(e.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(e){const t=await g.info();this.jumpTo({center:[t.longitude??0,t.latitude??0],zoom:e||11})}getCameraHash(){const e=new Float32Array(5),t=this.getCenter();return e[0]=t.lng,e[1]=t.lat,e[2]=this.getZoom(),e[3]=this.getPitch(),e[4]=this.getBearing(),i.o4.fromUint8Array(new Uint8Array(e.buffer))}getSdkConfig(){return K}getMaptilerSessionId(){return W}setTransformRequest(e){return super.setTransformRequest(ae(e)),this}getProjection(){const e=this.style.getProjection();return void 0===!e&&this.style.projection?{type:this.style.projection.name}:e}isGlobeProjection(){const e=this.getProjection();return!!e&&"globe"===e.type}enableGlobeProjection(){!0!==this.isGlobeProjection()&&(this.setProjection({type:"globe"}),this.curentProjection="globe")}enableMercatorProjection(){!1!==this.isGlobeProjection()&&(this.setProjection({type:"mercator"}),this.curentProjection="mercator")}setProjection(e){return this.fire("projection.change",{target:this,projection:e}),super.setProjection(e)}isLanguageUpdated(){return this.languageIsUpdated}};const rs=["idle","render","load","remove","idle"],is=["error"],os=["resize"],ss=["webglcontextlost","webglcontextrestored"],as=["moveend","movestart","move","zoomend","zoomstart","zoom","rotatestart","rotateend","rotate","dragstart","dragend","drag","boxzoomcancel","boxzoomend","boxzoomstart"],ls=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseover","contextmenu","touchstart","touchend","touchmove","touchcancel"],cs=["cooperativegestureprevented"],us=["data","dataloading","sourcedata","sourcedataloading","dataabort","sourcedataabort"];Error;const hs=Symbol("MapTiler:ImageViewer:Internal:lngLatToPxInternal"),ds=Symbol("MapTiler:ImageViewer:Internal:pxToLngLatInternal"),{Evented:ps}=r;var fs;fs=ps;const{Evented:ms}=r;function gs(e){if(typeof DOMParser<"u"){const t=(new DOMParser).parseFromString(e,"application/xml");if(t.querySelector("parsererror"))throw new Error("The provided string is not valid XML");return t}throw new Error("No XML parser found")}function ys(e,t){if(!e.hasChildNodes())return!1;for(const n of Array.from(e.childNodes)){const e=n.nodeName;if("string"==typeof e&&e.trim().toLowerCase()===t.toLowerCase())return!0}return!1}function vs(e){if(typeof XMLSerializer<"u")return(new XMLSerializer).serializeToString(e);throw new Error("No XML serializer found")}function _s(e){const t="string"==typeof e?gs(e):e;if(!ys(t,"gpx"))throw new Error("The XML document is not valid GPX");const n=Rs(t,"trk"),r=Rs(t,"rte"),i=Rs(t,"wpt"),o={type:"FeatureCollection",features:[]};for(const s of Array.from(n)){const e=As(s);e&&o.features.push(e)}for(const s of Array.from(r)){const e=ks(s);e&&o.features.push(e)}for(const s of Array.from(i))o.features.push(Cs(s));return o}function bs(e,t){let n=e;if("string"==typeof n&&(n=gs(n)),!ys(n,"kml"))throw new Error("The XML document is not valid KML");const r={type:"FeatureCollection",features:[]},i={},o={},s={},a=Rs(n,"Placemark"),l=Rs(n,"Style"),c=Rs(n,"StyleMap");for(const u of Array.from(l)){const e=Os(void 0!==t?t(u):vs(u)).toString(16);i[`#${Ds(u,"id")}`]=e,o[e]=u}for(const u of Array.from(c)){i[`#${Ds(u,"id")}`]=Os(void 0!==t?t(u):vs(u)).toString(16);const e=Rs(u,"Pair"),n={};for(const t of Array.from(e))n[zs(Ns(t,"key"))??""]=zs(Ns(t,"styleUrl"));s[`#${Ds(u,"id")}`]=n}for(const u of Array.from(a))r.features=r.features.concat(Ts(u,i,o,s));return r}function ws(e){if(null===e)return["#000000",1];let t="",n=1,r=e;return r.startsWith("#")&&(r=r.substring(1)),(6===r.length||3===r.length)&&(t=r),8===r.length&&(n=Number.parseInt(r.substring(0,2),16)/255,t=`#${r.substring(6,8)}${r.substring(4,6)}${r.substring(2,4)}`),[t??"#000000",n??1]}function xs(e){return Fs(e.split(" "))}function Ss(e){let t=Rs(e,"coord");const n=[],r=[];0===t.length&&(t=Rs(e,"gx:coord"));for(const o of Array.from(t))n.push(xs(zs(o)??""));const i=Rs(e,"when");for(const o of Array.from(i))r.push(zs(o));return{coords:n,times:r}}function Es(e){const t=["Polygon","LineString","Point","Track","gx:Track"];let n,r,i,o,s;const a=[],l=[];if(null!==Ns(e,"MultiGeometry"))return Es(Ns(e,"MultiGeometry"));if(null!==Ns(e,"MultiTrack"))return Es(Ns(e,"MultiTrack"));if(null!==Ns(e,"gx:MultiTrack"))return Es(Ns(e,"gx:MultiTrack"));for(i=0;i<t.length;i++)if(r=Rs(e,t[i]),r)for(o=0;o<r.length;o++)if(n=r[o],"Point"===t[i])a.push({type:"Point",coordinates:js(zs(Ns(n,"coordinates"))??"")});else if("LineString"===t[i])a.push({type:"LineString",coordinates:Bs(zs(Ns(n,"coordinates"))??"")});else if("Polygon"===t[i]){const e=Rs(n,"LinearRing"),t=[];for(s=0;s<e.length;s++)t.push(Bs(zs(Ns(e[s],"coordinates"))??""));a.push({type:"Polygon",coordinates:t})}else if("Track"===t[i]||"gx:Track"===t[i]){const e=Ss(n);a.push({type:"LineString",coordinates:e.coords}),e.times.length&&l.push(e.times)}return{geoms:a,coordTimes:l}}function Ts(e,t,n,r){const i=Es(e),o={},s=zs(Ns(e,"name")),a=zs(Ns(e,"address")),l=zs(Ns(e,"description")),c=Ns(e,"TimeSpan"),u=Ns(e,"TimeStamp"),h=Ns(e,"ExtendedData"),d=Ns(e,"visibility");let p,f=zs(Ns(e,"styleUrl")),m=Ns(e,"LineStyle"),g=Ns(e,"PolyStyle");if(!i.geoms.length)return[];if(s&&(o.name=s),a&&(o.address=a),f){f.startsWith("#")||(f=`#${f}`),o.styleUrl=f,t[f]&&(o.styleHash=t[f]),r[f]&&(o.styleMapHash=r[f],o.styleHash=t[r[f].normal??""]);const e=n[o.styleHash??""];if(e){m||(m=Ns(e,"LineStyle")),g||(g=Ns(e,"PolyStyle"));const t=Ns(e,"IconStyle");if(t){const e=Ns(t,"Icon");if(e){const t=zs(Ns(e,"href"));t&&(o.icon=t)}}}}if(l&&(o.description=l),c){const e=zs(Ns(c,"begin")),t=zs(Ns(c,"end"));e&&t&&(o.timespan={begin:e,end:t})}if(null!==u&&(o.timestamp=zs(Ns(u,"when"))??(new Date).toISOString()),null!==m){const e=ws(zs(Ns(m,"color"))),t=e[0],n=e[1],r=Number.parseFloat(zs(Ns(m,"width"))??"");t&&(o.stroke=t),Number.isNaN(n)||(o["stroke-opacity"]=n),Number.isNaN(r)||(o["stroke-width"]=r)}if(g){const e=ws(zs(Ns(g,"color"))),t=e[0],n=e[1],r=zs(Ns(g,"fill")),i=zs(Ns(g,"outline"));t&&(o.fill=t),Number.isNaN(n)||(o["fill-opacity"]=n),r&&(o["fill-opacity"]="1"===r?o["fill-opacity"]||1:0),i&&(o["stroke-opacity"]="1"===i?o["stroke-opacity"]||1:0)}if(h){const e=Rs(h,"Data"),t=Rs(h,"SimpleData");for(p=0;p<e.length;p++)o[e[p].getAttribute("name")??""]=zs(Ns(e[p],"value"))??"";for(p=0;p<t.length;p++)o[t[p].getAttribute("name")??""]=zs(t[p])??""}null!==d&&(o.visibility=zs(d)??""),0!==i.coordTimes.length&&(o.coordTimes=1===i.coordTimes.length?i.coordTimes[0]:i.coordTimes);const y={type:"Feature",geometry:1===i.geoms.length?i.geoms[0]:{type:"GeometryCollection",geometries:i.geoms},properties:o};return Ds(e,"id")&&(y.id=Ds(e,"id")??void 0),[y]}function Ms(e,t){const n=Rs(e,t),r=[],i=[];let o=[];const s=n.length;if(!(s<2)){for(let e=0;e<s;e++){const t=Vs(n[e]);r.push(t.coordinates),t.time&&i.push(t.time),(t.heartRate||o.length)&&(0===o.length&&(o=new Array(e).fill(null)),o.push(t.heartRate))}return{line:r,times:i,heartRates:o}}}function As(e){const t=Rs(e,"trkseg"),n=[],r=[],i=[];let o;for(let a=0;a<t.length;a++)if(o=Ms(t[a],"trkpt"),void 0!==o&&(o.line&&n.push(o.line),o.times&&o.times.length&&r.push(o.times),i.length||o.heartRates&&o.heartRates.length)){if(!i.length)for(let e=0;e<a;e++)i.push(new Array(n[e].length).fill(null));o.heartRates&&o.heartRates.length?i.push(o.heartRates):i.push(new Array(o.line.length).fill(null))}if(0===n.length)return;const s={...Ps(e),...Is(Ns(e,"extensions"))};return 0!==r.length&&(s.coordTimes=1===n.length?r[0]:r),0!==i.length&&(s.heartRates=1===n.length?i[0]:i),1===n.length?{type:"Feature",properties:s,geometry:{type:"LineString",coordinates:n[0]}}:{type:"Feature",properties:s,geometry:{type:"MultiLineString",coordinates:n}}}function ks(e){const t=Ms(e,"rtept");return void 0===t?void 0:{type:"Feature",properties:{...Ps(e),...Is(Ns(e,"extensions"))},geometry:{type:"LineString",coordinates:t.line}}}function Cs(e){return{type:"Feature",properties:{...Ps(e),...Us(e,["sym"])},geometry:{type:"Point",coordinates:Vs(e).coordinates}}}function Is(e){const t={};if(e){const n=Ns(e,"line");if(n){const e=zs(Ns(n,"color")),r=Number.parseFloat(zs(Ns(n,"opacity"))??"0"),i=Number.parseFloat(zs(Ns(n,"width"))??"0");e&&(t.stroke=e),Number.isNaN(r)||(t["stroke-opacity"]=r),Number.isNaN(i)||(t["stroke-width"]=96*i/25.4)}}return t}function Ps(e){const t=Us(e,["name","cmt","desc","type","time","keywords"]),n=Rs(e,"link");if(0!==n.length){t.links=[];for(const e of Array.from(n)){const n={href:Ds(e,"href"),...Us(e,["text","type"])};t.links.push(n)}}return t}function Os(e){let t=0;if(!e||!e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function Rs(e,t){return e.getElementsByTagName(t)}function Ds(e,t){return e.getAttribute(t)}function Ls(e,t){return Number.parseFloat(Ds(e,t)??"0")}function Ns(e,t){const n=Rs(e,t);return n.length?n[0]:null}function Fs(e){return e.map(Number.parseFloat).map(e=>Number.isNaN(e)?null:e)}function zs(e){return e&&function(e){e.normalize&&e.normalize()}(e),e&&e.textContent}function Us(e,t){const n={};let r,i;for(i=0;i<t.length;i++)r=Ns(e,t[i]),r&&(n[t[i]]=zs(r)??"");return n}function js(e){return Fs(e.replace(/\s*/g,"").split(","))}function Bs(e){const t=e.replace(/^\s*|\s*$/g,"").split(/\s+/),n=[];for(const r of t)n.push(js(r));return n}function Vs(e){const t=[Ls(e,"lon"),Ls(e,"lat")],n=Ns(e,"ele"),r=Ns(e,"gpxtpx:hr")||Ns(e,"hr"),i=Ns(e,"time");let o;return n&&(o=Number.parseFloat(zs(n)??"0"),Number.isNaN(o)||t.push(o)),{coordinates:t,time:i?zs(i):null,heartRate:null!==r?Number.parseFloat(zs(r)??"0"):null}}const Hs=[["#1D5B79","#468B97","#EF6262","#F3AA60"],["#614BC3","#33BBC5","#85E6C5","#C8FFE0"],["#461959","#7A316F","#CD6688","#AED8CC"],["#0079FF","#00DFA2","#F6FA70","#FF0060"],["#39B5E0","#A31ACB","#FF78F0","#F5EA5A"],["#37E2D5","#590696","#C70A80","#FBCB0A"],["#FFD36E","#FFF56D","#99FFCD","#9FB4FF"],["#00EAD3","#FFF5B7","#FF449F","#005F99"],["#10A19D","#540375","#FF7000","#FFBF00"]];function $s(){return Hs[~~(Math.random()*Hs.length)][~~(4*Math.random())]}function Ys(){return`maptiler_source_${le()}`}function Gs(){return`maptiler_layer_${le()}`}function qs(e,t){if(t<=e[0].zoom)return e[0].value;if(t>=e[e.length-1].zoom)return e[e.length-1].value;for(let n=0;n<e.length-1;n+=1)if(t>=e[n].zoom&&t<e[n+1].zoom){const r=e[n+1].zoom-e[n].zoom,i=(t-e[n].zoom)/r;return i*e[n+1].value+(1-i)*e[n].value}return 0}function Ws(e){return["interpolate",["linear"],["zoom"],...e.flatMap(e=>[e.zoom,e.value])]}function Ks(e){return["interpolate",["linear"],["zoom"],...e.flatMap(e=>[e.zoom,e.value])]}function Zs(e,t){if("number"==typeof t&&"number"==typeof e)return 2*t+e;if("number"==typeof t&&Array.isArray(e))return["interpolate",["linear"],["zoom"],...e.flatMap(e=>[e.zoom,2*t+e.value])];if("number"==typeof e&&Array.isArray(t))return["interpolate",["linear"],["zoom"],...t.flatMap(t=>[t.zoom,2*t.value+e])];if(Array.isArray(e)&&Array.isArray(t)){return["interpolate",["linear"],["zoom"],...Array.from(new Set([...e.map(e=>e.zoom),...t.map(e=>e.zoom)])).sort((e,t)=>e<t?-1:1).flatMap(n=>[n,2*qs(t,n)+qs(e,n)])]}return 0}function Js(e,t){return["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.propertyValue,e.value])]}function Xs(e){const t=e.trimStart(),n=`${t}${" ".repeat(e.length-t.length)}`,r=Array.from(n);if(!r.every(e=>" "===e||"_"===e))throw new Error("A dash pattern must be composed only of whitespace and underscore characters.");if(!r.some(e=>"_"===e)||!r.some(e=>" "===e))throw new Error("A dash pattern must contain at least one underscore and one whitespace character");const i=[1];for(let o=1;o<r.length;o+=1){r[o-1]===r[o]?i[i.length-1]+=1:i.push(1)}return i}function Qs(e,t){return["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.value,e.color])]}function ea(e,t,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.value,.025*e.pointRadius])],2,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.value,.05*e.pointRadius])],4,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.value,.1*e.pointRadius])],8,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.value,.25*e.pointRadius])],16,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.value,e.pointRadius])]]:["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.value,e.pointRadius])]}function ta(e,t,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.propertyValue,.025*e.value])],2,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.propertyValue,.05*e.value])],4,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.propertyValue,.1*e.value])],8,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.propertyValue,.25*e.value])],16,["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.propertyValue,e.value])]]:["interpolate",["linear"],["get",t],...e.flatMap(e=>[e.propertyValue,e.value])]}function na(e,t){return e.every(t=>t.color[3]===e[0].color[3])?e[0].color[3]?e[0].color[3]/255:1:["interpolate",["linear"],["get",t],...e.getRawColorStops().flatMap(e=>{const t=e.value,n=e.color;return[t,4===n.length?n[3]/255:1]})]}function ra(e,t=10){return["interpolate",["linear"],["heatmap-density"],...Array.from({length:t+1},(n,r)=>{const i=r/t;return[i,e.getColorHex(i)]}).flat()]}function ia(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}class oa extends Array{constructor(e={}){super(),O(this,"min",0),O(this,"max",1),"min"in e&&(this.min=e.min),"max"in e&&(this.max=e.max),"stops"in e&&this.setStops(e.stops,{clone:!1})}static fromArrayDefinition(e){return new oa({stops:e.map(e=>({value:e[0],color:e[1]}))})}setStops(e,t={clone:!0}){const n=t.clone?this.clone():this;n.length=0;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(let o=0;o<e.length;o+=1)r=Math.min(r,e[o].value),i=Math.max(i,e[o].value),n.push({value:e[o].value,color:e[o].color.slice()});return n.sort((e,t)=>e.value<t.value?-1:1),this.min=r,this.max=i,n}scale(e,t,n={clone:!0}){const r=n.clone,i=this[0].value,o=this.at(-1).value-i,s=t-e,a=[];for(let l=0;l<this.length;l+=1){const t=(this[l].value-i)/o*s+e;r?a.push({value:t,color:this[l].color.slice()}):this[l].value=t}return r?new oa({stops:a}):this}at(e){return e<0?this[this.length+e]:this[e]}clone(){return new oa({stops:this.getRawColorStops()})}getRawColorStops(){const e=[];for(let t=0;t<this.length;t+=1)e.push({value:this[t].value,color:this[t].color});return e}reverse(e={clone:!0}){const t=e.clone?this.clone():this;for(let n=0;n<~~(t.length/2);n+=1){const e=t[n].color;t[n].color=t.at(-(n+1)).color,t.at(-(n+1)).color=e}return t}getBounds(){return{min:this.min,max:this.max}}getColor(e,t={smooth:!0}){if(e<=this[0].value)return this[0].color;if(e>=this.at(-1).value)return this.at(-1).color;for(let n=0;n<this.length-1;n+=1){if(e>this[n+1].value)continue;const r=this[n].color;if(!t.smooth)return r.slice();const i=this[n].value,o=this[n+1].value,s=this[n+1].color,a=(o-e)/(o-i);return r.map((e,t)=>Math.round(e*a+s[t]*(1-a)))}return[0,0,0]}getColorHex(e,t={smooth:!0,withAlpha:!1}){return function(e){return`#${ia(e[0])}${ia(e[1])}${ia(e[2])}${4===e.length?ia(e[3]):""}`}(this.getColor(e,t))}getColorRelative(e,t={smooth:!0}){const n=this.getBounds();return this.getColor(n.min+e*(n.max-n.min),t)}getCanvasStrip(e={horizontal:!0,size:512,smooth:!0}){const t=document.createElement("canvas");t.width=e.horizontal?e.size:1,t.height=e.horizontal?1:e.size;const n=t.getContext("2d");if(!n)throw new Error("Canvs context is missing");const r=n.getImageData(0,0,t.width,t.height),i=r.data,o=e.size,s=this[0].value,a=(this.at(-1).value-s)/o;for(let l=0;l<o;l+=1){const t=this.getColor(s+l*a,{smooth:e.smooth});i[4*l]=t[0],i[4*l+1]=t[1],i[4*l+2]=t[2],i[4*l+3]=t.length>3?t[3]:255}return n.putImageData(r,0,0),t}resample(e,t=15){const n=this.getBounds(),r=this.scale(0,1),i=1/(t-1);let o;if("ease-in-square"===e)o=Array.from({length:t},(e,t)=>{const n=t*i,o=n**2;return{value:n,color:r.getColor(o)}});else if("ease-out-square"===e)o=Array.from({length:t},(e,t)=>{const n=t*i,o=1-(1-n)**2;return{value:n,color:r.getColor(o)}});else if("ease-out-sqrt"===e)o=Array.from({length:t},(e,t)=>{const n=t*i,o=n**.5;return{value:n,color:r.getColor(o)}});else if("ease-in-sqrt"===e)o=Array.from({length:t},(e,t)=>{const n=t*i,o=1-(1-n)**.5;return{value:n,color:r.getColor(o)}});else if("ease-out-exp"===e)o=Array.from({length:t},(e,t)=>{const n=t*i,o=1-2**(-10*n);return{value:n,color:r.getColor(o)}});else{if("ease-in-exp"!==e)throw new Error("Invalid ressampling method.");o=Array.from({length:t},(e,t)=>{const n=t*i,o=2**(10*n-10);return{value:n,color:r.getColor(o)}})}return new oa({stops:o}).scale(n.min,n.max)}transparentStart(){const e=this.getRawColorStops();e.unshift({value:e[0].value,color:e[0].color.slice()}),e[1].value+=.001;for(const t of e)3===t.color.length&&t.color.push(255);return e[0].color[3]=0,new oa({stops:e})}hasTransparentStart(){return 4===this[0].color.length&&0===this[0].color[3]}}const sa={NULL:new oa({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),GRAY:new oa({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),JET:new oa({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),HSV:new oa({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),HOT:new oa({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),SPRING:new oa({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),SUMMER:new oa({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),AUTOMN:new oa({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),WINTER:new oa({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),BONE:new oa({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),COPPER:new oa({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),GREYS:new oa({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),YIGNBU:new oa({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),GREENS:new oa({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),YIORRD:new oa({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),BLUERED:new oa({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),RDBU:new oa({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),PICNIC:new oa({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),RAINBOW:new oa({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),PORTLAND:new oa({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),BLACKBODY:new oa({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),EARTH:new oa({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),ELECTRIC:new oa({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),VIRIDIS:new oa({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),INFERNO:new oa({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),MAGMA:new oa({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),PLASMA:new oa({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),WARM:new oa({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),COOL:new oa({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),RAINBOW_SOFT:new oa({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),BATHYMETRY:new oa({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),CDOM:new oa({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),CHLOROPHYLL:new oa({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),DENSITY:new oa({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),FREESURFACE_BLUE:new oa({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),FREESURFACE_RED:new oa({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),OXYGEN:new oa({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),PAR:new oa({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),PHASE:new oa({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),SALINITY:new oa({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),TEMPERATURE:new oa({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),TURBIDITY:new oa({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),VELOCITY_BLUE:new oa({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),VELOCITY_GREEN:new oa({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),CUBEHELIX:new oa({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),CIVIDIS:new oa({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),TURBO:new oa({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),ROCKET:new oa({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),MAKO:new oa({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]})};Symbol.toStringTag;r.Map,r.Marker,r.Popup,r.Style,r.CanvasSource,r.GeoJSONSource,r.ImageSource,r.RasterTileSource,r.RasterDEMTileSource,r.VectorTileSource,r.VideoSource,r.NavigationControl,r.GeolocateControl,r.AttributionControl,r.LogoControl,r.ScaleControl,r.FullscreenControl,r.TerrainControl,r.BoxZoomHandler,r.ScrollZoomHandler,r.CooperativeGesturesHandler,r.KeyboardHandler,r.TwoFingersTouchPitchHandler,r.MapWheelEvent,r.MapTouchEvent,r.MapMouseEvent,r.config,r.getVersion;const{setRTLTextPlugin:aa,getRTLTextPluginStatus:la,LngLat:ca,LngLatBounds:ua,MercatorCoordinate:ha,Evented:da,AJAXError:pa,prewarm:fa,clearPrewarmedResources:ma,Hash:ga,Point:ya,EdgeInsets:va,DragRotateHandler:_a,DragPanHandler:ba,TwoFingersTouchZoomRotateHandler:wa,DoubleClickZoomHandler:xa,TwoFingersTouchZoomHandler:Sa,TwoFingersTouchRotateHandler:Ea,getWorkerCount:Ta,setWorkerCount:Ma,getMaxParallelImageRequests:Aa,setMaxParallelImageRequests:ka,getWorkerUrl:Ca,setWorkerUrl:Ia,addSourceType:Pa,importScriptInWorkers:Oa,addProtocol:Ra,removeProtocol:Da}=r},52658(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e,t=[]){if(void 0===e)return{};const n={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n)).forEach(t=>{n[t]=e[t]}),n}},52789(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e){return function(t){return e(t)}}},52820(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}},52904(e,t,n){"use strict";n.d(t,{U:()=>r});const r=console},53098(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},53356(e,t,n){"use strict";n.d(t,{A:()=>s});n(96540);var r=n(37498),i=n(4894),o=n(31355);function s(){const e=(0,r.A)(i.A);return e[o.A]||e}},53581(e){e.exports=function(){"use strict";return function(e,t,n){n.updateLocale=function(e,t){var r=n.Ls[e];if(r)return(t?Object.keys(t):[]).forEach(function(e){r[e]=t[e]}),r}}}()},54094(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){return function(e,t,n,r,i,o,s,a,l){function c(r,i){function o(){var o=function(e,r){var i=t.createElement(n);return i.async=!0,i.src=r,i.onerror=function(){return function(e){e.queue.filter(function(e){return 0<=s.indexOf(e[0])}).forEach(function(e){"function"===typeof(e=(e=e[1])[e.length-1])&&e("Failed to load Airbridge SDK.")})}(e)},i}(r,i);!function(n){if("complete"===t.readyState)t.head.appendChild(n);else{var r=function(){e.removeEventListener("load",r),t.head.appendChild(n)};e.addEventListener("load",r)}}(o)}o()}function u(e){var t={queue:null!=e?e:[],get isSDKEnabled(){return!1}};return o.concat(s).forEach(function(e){var n=e.split("."),r=n.pop();n.reduce(function(e,t){var n;return e[t]=null!=(n=e[t])?n:{}},t)[r]=function(){t.queue.push([e,arguments])}}),t}null!=e.__AIRBRIDGE__||(e.__AIRBRIDGE__={mocks:[]}),"undefined"!==typeof t.documentMode&&(i=i.replace(/^https:/,"")),e.createAirbridge=function(){var t,n=u();return null==(t=e.__AIRBRIDGE__)||t.mocks.push(n),c(n,i),n},e[r]||(l=u(l),e[r]=l,c(l,i))}(window,document,"script","airbridge","https://static.airbridge.io/sdk/latest/airbridge.min.js","init startTracking stopTracking openBanner setBanner setDownload setDownloads openDeeplink setDeeplinks sendWeb setUserAgent setMobileAppData setUserID clearUserID setUserEmail clearUserEmail setUserPhone clearUserPhone setUserAttribute removeUserAttribute clearUserAttributes setUserAlias removeUserAlias clearUserAlias clearUser setUserId setUserAttributes addUserAlias setDeviceAlias removeDeviceAlias clearDeviceAlias setDeviceIFV setDeviceIFA setDeviceGAID events.send events.signIn events.signUp events.signOut events.purchased events.addedToCart events.productDetailsViewEvent events.homeViewEvent events.productListViewEvent events.searchResultViewEvent".split(" "),["events.wait","fetchResource","createTouchpoint","createTrackingLink"])}},54386(e,t,n){"use strict";n.d(t,{AP:()=>p,LV:()=>d,jN:()=>h,jf:()=>c});var r=n(64251),i=n(57968),o=n(57726),s=n(18845),a=n(9600),l=n(46403);const c=s.O;let u=0;function h(){return u>0}function d(e,t={}){if(!function(e){return"function"===typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return"function"===typeof t?t:e;if((0,l.sp)(e))return e}catch{return e}const n=function(...n){try{const r=n.map(e=>d(e,t));return e.apply(this,r)}catch(o){throw u++,setTimeout(()=>{u--}),(0,i.v4)(e=>{e.addEventProcessor(e=>(t.mechanism&&((0,a.gO)(e,void 0,void 0),(0,a.M6)(e,t.mechanism)),e.extra={...e.extra,arguments:n},e)),(0,r.Cp)(o)}),o}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch{}(0,l.pO)(n,e),(0,l.my)(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch{}return n}function p(){const e=(0,o.$N)(),{referrer:t}=c.document||{},{userAgent:n}=c.navigator||{};return{url:e,headers:{...t&&{Referer:t},...n&&{"User-Agent":n}}}}},54704(e,t,n){"use strict";n.d(t,{f:()=>i});var r=n(57968);function i(e){if("boolean"===typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||(0,r.KU)()?.getOptions();return!!t&&(null!=t.tracesSampleRate||!!t.tracesSampler)}},54737(e,t,n){"use strict";e.exports=n(28989)},54749(e,t,n){"use strict";n.d(t,{A:()=>h});var r=n(2383),i=n(5254),o=n(53098),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;const a=function(e){return(0,o.A)(e)&&(0,i.A)(e.length)&&!!s[(0,r.A)(e)]};var l=n(52789),c=n(64841),u=c.A&&c.A.isTypedArray;const h=u?(0,l.A)(u):a},55373(e,t,n){"use strict";var r=n(98636),i=n(62642),o=n(74765);e.exports={formats:o,parse:i,stringify:r}},55407(e,t,n){"use strict";n.d(t,{A:()=>R});var r=n(22080),i=n(62050);const o=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const s=function(e){return this.__data__.has(e)};function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i.A;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=s;const l=a;const c=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const u=function(e,t){return e.has(t)};const h=function(e,t,n,r,i,o){var s=1&n,a=e.length,h=t.length;if(a!=h&&!(s&&h>a))return!1;var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var f=-1,m=!0,g=2&n?new l:void 0;for(o.set(e,t),o.set(t,e);++f<a;){var y=e[f],v=t[f];if(r)var _=s?r(v,y,f,t,e,o):r(y,v,f,e,t,o);if(void 0!==_){if(_)continue;m=!1;break}if(g){if(!c(t,function(e,t){if(!u(g,t)&&(y===e||i(y,e,n,r,o)))return g.push(t)})){m=!1;break}}else if(y!==v&&!i(y,v,n,r,o)){m=!1;break}}return o.delete(e),o.delete(t),m};var d=n(241),p=n(43988),f=n(66984);const m=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n};const g=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n};var y=d.A?d.A.prototype:void 0,v=y?y.valueOf:void 0;const _=function(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new p.A(e),new p.A(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,f.A)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=m;case"[object Set]":var l=1&r;if(a||(a=g),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=h(a(e),a(t),r,i,o,s);return s.delete(e),u;case"[object Symbol]":if(v)return v.call(e)==v.call(t)}return!1};var b=n(19042),w=Object.prototype.hasOwnProperty;const x=function(e,t,n,r,i,o){var s=1&n,a=(0,b.A)(e),l=a.length;if(l!=(0,b.A)(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:w.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=s;++c<l;){var m=e[u=a[c]],g=t[u];if(r)var y=s?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===y?m===g||i(m,g,n,r,o):y)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(p=!1)}return o.delete(e),o.delete(t),p};var S=n(12434),E=n(92049),T=n(41200),M=n(54749),A="[object Arguments]",k="[object Array]",C="[object Object]",I=Object.prototype.hasOwnProperty;const P=function(e,t,n,i,o,s){var a=(0,E.A)(e),l=(0,E.A)(t),c=a?k:(0,S.A)(e),u=l?k:(0,S.A)(t),d=(c=c==A?C:c)==C,p=(u=u==A?C:u)==C,f=c==u;if(f&&(0,T.A)(e)){if(!(0,T.A)(t))return!1;a=!0,d=!1}if(f&&!d)return s||(s=new r.A),a||(0,M.A)(e)?h(e,t,n,i,o,s):_(e,t,c,n,i,o,s);if(!(1&n)){var m=d&&I.call(e,"__wrapped__"),g=p&&I.call(t,"__wrapped__");if(m||g){var y=m?e.value():e,v=g?t.value():t;return s||(s=new r.A),o(y,v,n,i,s)}}return!!f&&(s||(s=new r.A),x(e,t,n,i,o,s))};var O=n(53098);const R=function e(t,n,r,i,o){return t===n||(null==t||null==n||!(0,O.A)(t)&&!(0,O.A)(n)?t!==t&&n!==n:P(t,n,r,i,e,o))}},55655(e,t,n){"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,y=0,v=0,_=0,b="";function w(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:s,return:""}}function x(e,t){return s(w("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return _=v>0?u(b,--v):0,g--,10===_&&(g=1,m--),_}function E(){return _=v<y?u(b,v++):0,g++,10===_&&(g=1,m++),_}function T(){return u(b,v)}function M(){return v}function A(e,t){return h(b,e,t)}function k(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function C(e){return m=g=1,y=d(b=e),v=0,[]}function I(e){return b="",e}function P(e){return a(A(v-1,D(91===e?e+2:40===e?e+1:e)))}function O(e){for(;(_=T())&&_<33;)E();return k(e)>2||k(_)>3?"":" "}function R(e,t){for(;--t&&E()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return A(e,M()+(t<6&&32==T()&&32==E()))}function D(e){for(;E();)switch(_){case e:return v;case 34:case 39:34!==e&&39!==e&&D(_);break;case 40:41===e&&D(e);break;case 92:E()}return v}function L(e,t){for(;E()&&e+_!==57&&(e+_!==84||47!==T()););return"/*"+A(t,v-1)+"*"+o(47===e?e:E())}function N(e){for(;!k(T());)E();return A(e,v)}var F="-ms-",z="-moz-",U="-webkit-",j="comm",B="rule",V="decl",H="@keyframes";function $(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Y(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case V:return e.return=e.return||e.value;case j:return"";case H:return e.return=e.value+"{"+$(e.children,r)+"}";case B:e.value=e.props.join(",")}return d(n=$(e.children,r))?e.return=e.value+"{"+n+"}":""}function G(e){return I(q("",null,null,null,[""],e=C(e),0,[0],e))}function q(e,t,n,r,i,s,a,h,p){for(var m=0,g=0,y=a,v=0,_=0,b=0,w=1,x=1,A=1,k=0,C="",I=i,D=s,F=r,z=C;x;)switch(b=k,k=E()){case 40:if(108!=b&&58==u(z,y-1)){-1!=c(z+=l(P(k),"&","&\f"),"&\f")&&(A=-1);break}case 34:case 39:case 91:z+=P(k);break;case 9:case 10:case 13:case 32:z+=O(b);break;case 92:z+=R(M()-1,7);continue;case 47:switch(T()){case 42:case 47:f(K(L(E(),M()),t,n),p);break;default:z+="/"}break;case 123*w:h[m++]=d(z)*A;case 125*w:case 59:case 0:switch(k){case 0:case 125:x=0;case 59+g:-1==A&&(z=l(z,/\f/g,"")),_>0&&d(z)-y&&f(_>32?Z(z+";",r,n,y-1):Z(l(z," ","")+";",r,n,y-2),p);break;case 59:z+=";";default:if(f(F=W(z,t,n,m,g,i,h,C,I=[],D=[],y),s),123===k)if(0===g)q(z,t,F,F,I,s,y,h,D);else switch(99===v&&110===u(z,3)?100:v){case 100:case 108:case 109:case 115:q(e,F,F,r&&f(W(e,F,F,0,0,i,h,C,i,I=[],y),D),i,D,y,h,r?I:D);break;default:q(z,F,F,F,[""],D,0,h,D)}}m=g=_=0,w=A=1,C=z="",y=a;break;case 58:y=1+d(z),_=b;default:if(w<1)if(123==k)--w;else if(125==k&&0==w++&&125==S())continue;switch(z+=o(k),k*w){case 38:A=g>0?1:(z+="\f",-1);break;case 44:h[m++]=(d(z)-1)*A,A=1;break;case 64:45===T()&&(z+=P(E())),v=T(),g=y=d(C=z+=N(M())),k++;break;case 45:45===b&&2==d(z)&&(w=0)}}return s}function W(e,t,n,r,o,s,c,u,d,f,m){for(var g=o-1,y=0===o?s:[""],v=p(y),_=0,b=0,x=0;_<r;++_)for(var S=0,E=h(e,g+1,g=i(b=c[_])),T=e;S<v;++S)(T=a(b>0?y[S]+" "+E:l(E,/&\f/g,y[S])))&&(d[x++]=T);return w(e,t,n,0===o?B:u,d,f,m)}function K(e,t,n){return w(e,t,n,j,o(_),h(e,2,-2),0)}function Z(e,t,n,r){return w(e,t,n,V,h(e,0,r),h(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(t[n]=1),!k(i);)E();return A(e,v)},X=function(e,t){return I(function(e,t){var n=-1,r=44;do{switch(k(r)){case 0:38===r&&12===T()&&(t[n]=1),e[n]+=J(v-1,t,n);break;case 2:e[n]+=P(r);break;case 4:if(44===r){e[++n]=58===T()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=E());return e}(C(e),t))},Q=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Q.get(n))&&!r){Q.set(e,!0);for(var i=[],o=X(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+z+e+F+e+e;case 6828:case 4268:return U+e+F+e+e;case 6165:return U+e+F+"flex-"+e+e;case 5187:return U+e+l(e,/(\w+).+(:[^]+)/,U+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return U+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return U+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+F+l(e,"shrink","negative")+e;case 5292:return U+e+F+l(e,"basis","preferred-size")+e;case 6060:return U+"box-"+l(e,"-grow","")+U+e+F+l(e,"grow","positive")+e;case 4554:return U+l(e,/([^-])(transform)/g,"$1"+U+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,U+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+U+"$2-$3$1"+z+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+U)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===u(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return U+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+F+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=ne(e.value,e.length);break;case H:return $([x(e,{value:l(e.value,"@","@"+U)})],r);case B:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $([x(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return $([x(e,{props:[l(t,/:(plac\w+)/,":"+U+"input-$1")]}),x(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),x(e,{props:[l(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""})}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var i,o,s=e.stylisPlugins||re,a={},l=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)});var c,u,h=[Y,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=p(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([ee,te].concat(s,h));o=function(e,t,n,r){c=n,$(G(e?e+"{"+t.styles+"}":t.styles),d),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(l),f}},56266(e,t,n){"use strict";n.d(t,{r:()=>r});const r=n(19888).useSyncExternalStore},57500(e,t,n){"use strict";n.d(t,{Gv:()=>l,P4:()=>s,sY:()=>a,ti:()=>c});var r=n(19282),i=n(4693);const o=Symbol.for("sentry__originalRequestBody");function s(e){return new URLSearchParams(e).toString()}function a(e,t=r.Yz){try{if("string"===typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[s(e)];if(!e)return[void 0]}catch(n){return i.T&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return i.T&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function l(e=[]){if(e.length>=2&&e[1]&&"object"===typeof e[1]&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const t=e[0][o];return void 0!==t?t:void 0}}function c(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return i.T&&r.Yz.error(n,"Failed to get xhr response headers",e),{}}return t?t.split("\r\n").reduce((e,t)=>{const[n,r]=t.split(": ");return r&&(e[n.toLowerCase()]=r),e},{}):{}}},57726(e,t,n){"use strict";n.d(t,{$N:()=>a,Hd:()=>o,xE:()=>l});var r=n(64208);const i=n(18845).O;function o(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let o=0,a=0;const l=" > ",c=l.length;let u;const h=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&o++<r&&(u=s(n,h),!("html"===u||o>1&&a+i.length*c+u.length>=d));)i.push(u),a+=u.length,n=n.parentNode;return i.reverse().join(l)}catch{return"<unknown>"}}function s(e,t){const n=e,o=[];if(!n?.tagName)return"";if(i.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}o.push(n.tagName.toLowerCase());const s=t?.length?t.filter(e=>n.getAttribute(e)).map(e=>[e,n.getAttribute(e)]):null;if(s?.length)s.forEach(e=>{o.push(`[${e[0]}="${e[1]}"]`)});else{n.id&&o.push(`#${n.id}`);const e=n.className;if(e&&(0,r.Kg)(e)){const t=e.split(/\s+/);for(const e of t)o.push(`.${e}`)}}const a=["aria-label","type","name","title","alt"];for(const r of a){const e=n.getAttribute(r);e&&o.push(`[${r}="${e}"]`)}return o.join("")}function a(){try{return i.document.location.href}catch{return""}}function l(e){if(!i.HTMLElement)return null;let t=e;for(let n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}},57855(e,t,n){var r,i;void 0===(i="function"===typeof(r=function(){"use strict";return function(e,t){var n,r,i,o,s,a,l,c,u,h,d,p,f,m,g,y,v,_,b=this,w=!1,x=!0,S=!0,E={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},T=function(e){if(y)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!u&&L();for(var n,r,i=(e.target||e.srcElement).getAttribute("class")||"",o=0;o<H.length;o++)(n=H[o]).onTap&&i.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),y=!0;var s=t.features.isOldAndroid?600:30;setTimeout(function(){y=!1},s)}},M=function(){return!e.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},A=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},k=function(){var e=1===g.getNumItemsFn();e!==m&&(A(r,"ui--one-slide",e),m=e)},C=function(){A(l,"share-modal--hidden",S)},I=function(){return(S=!S)?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){S&&C()},300)):(C(),setTimeout(function(){S||t.addClass(l,"pswp__share-modal--fade-in")},30)),S||O(),!1},P=function(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),S||I(),!1))},O=function(){for(var e,t,n,r,i="",o=0;o<g.shareButtons.length;o++)e=g.shareButtons[o],t=g.getImageURLForShare(e),n=g.getPageURLForShare(e),r=g.getTextForShare(e),i+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(r))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(i=g.parseShareButtonOut(e,i));l.children[0].innerHTML=i,l.children[0].onclick=P},R=function(e){for(var n=0;n<g.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+g.closeElClasses[n]))return!0},D=0,L=function(){clearTimeout(_),D=0,u&&b.setIdle(!1)},N=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(_),_=setTimeout(function(){b.setIdle(!0)},g.timeToIdleOutside))},F=function(){g.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=b.getFullscreenAPI()),n?(t.bind(document,n.eventK,b.updateFullscreen),b.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},z=function(){g.preloaderEl&&(U(!0),h("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&U(!1):U(!0)},g.loadingIndicatorDelay)}),h("imageLoadComplete",function(t,n){e.currItem===n&&U(!0)}))},U=function(e){p!==e&&(A(d,"preloader--active",!e),p=e)},j=function(e){var n=e.vGap;if(M()){var s=g.barsSize;if(g.captionEl&&"auto"===s.bottom)if(o||((o=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),r.insertBefore(o,i),t.addClass(r,"pswp__ui--fit")),g.addCaptionHTMLFn(e,o,!0)){var a=o.clientHeight;n.bottom=parseInt(a,10)||44}else n.bottom=s.top;else n.bottom="auto"===s.bottom?0:s.bottom;n.top=s.top}else n.top=n.bottom=0},B=function(){g.timeToIdle&&h("mouseUsed",function(){t.bind(document,"mousemove",L),t.bind(document,"mouseout",N),v=setInterval(function(){2===++D&&b.setIdle(!0)},g.timeToIdle/2)})},V=function(){var e;h("onVerticalDrag",function(e){x&&e<.95?b.hideControls():!x&&e>=.95&&b.showControls()}),h("onPinchClose",function(t){x&&t<.9?(b.hideControls(),e=!0):e&&!x&&t>.9&&b.showControls()}),h("zoomGestureEnded",function(){(e=!1)&&!x&&b.showControls()})},H=[{name:"caption",option:"captionEl",onInit:function(e){i=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){I()}},{name:"button--share",option:"shareEl",onInit:function(e){a=e},onTap:function(){I()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){s=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){d=e}}],$=function(){var e,n,i,o=function(r){if(r)for(var o=r.length,s=0;s<o;s++){e=r[s],n=e.className;for(var a=0;a<H.length;a++)i=H[a],n.indexOf("pswp__"+i.name)>-1&&(g[i.option]?(t.removeClass(e,"pswp__element--disabled"),i.onInit&&i.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};o(r.children);var s=t.getChildByClass(r,"pswp__top-bar");s&&o(s.children)};b.init=function(){t.extend(e.options,E,!0),g=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),h=e.listen,V(),h("beforeChange",b.update),h("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(g.getDoubleTapZoom(!1,e.currItem),t,333)}),h("preventDragEvent",function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)}),h("bindEvents",function(){t.bind(r,"pswpTap click",T),t.bind(e.scrollWrap,"pswpTap",b.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",b.onMouseOver)}),h("unbindEvents",function(){S||I(),v&&clearInterval(v),t.unbind(document,"mouseout",N),t.unbind(document,"mousemove",L),t.unbind(r,"pswpTap click",T),t.unbind(e.scrollWrap,"pswpTap",b.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",b.onMouseOver),n&&(t.unbind(document,n.eventK,b.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)}),h("destroy",function(){g.captionEl&&(o&&r.removeChild(o),t.removeClass(i,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),b.setIdle(!1)}),g.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),h("initialZoomIn",function(){g.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")}),h("initialZoomOut",function(){t.addClass(r,"pswp__ui--hidden")}),h("parseVerticalMargin",j),$(),g.shareEl&&a&&l&&(S=!0),k(),B(),F(),z()},b.setIdle=function(e){u=e,A(r,"ui--idle",e)},b.update=function(){x&&e.currItem?(b.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(e.currItem,i),A(i,"caption--empty",!e.currItem.title)),w=!0):w=!1,S||I(),k()},b.updateFullscreen=function(r){r&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},b.updateIndexIndicator=function(){g.counterEl&&(s.innerHTML=e.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},b.onGlobalTap=function(n){var r=(n=n||window.event).target||n.srcElement;if(!y)if(n.detail&&"mouse"===n.detail.pointerType){if(R(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?g.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(x?b.hideControls():b.showControls()),g.tapToClose&&(t.hasClass(r,"pswp__img")||R(r)))return void e.close()},b.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;A(r,"ui--over-close",R(t))},b.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),x=!1},b.showControls=function(){x=!0,w||b.update(),t.removeClass(r,"pswp__ui--hidden")},b.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},b.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(c=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return g.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}}})?r.call(t,n,t,e):r)||(e.exports=i)},57968(e,t,n){"use strict";n.d(t,{KU:()=>h,m6:()=>c,o5:()=>a,rm:()=>l,v4:()=>u,vn:()=>d});var r=n(92328),i=n(95200),o=n(94988),s=n(74733);function a(){const e=(0,i.EU)();return(0,r.h)(e).getCurrentScope()}function l(){const e=(0,i.EU)();return(0,r.h)(e).getIsolationScope()}function c(){return(0,i.BY)("globalScope",()=>new o.H)}function u(...e){const t=(0,i.EU)(),n=(0,r.h)(t);if(2===e.length){const[t,r]=e;return t?n.withSetScope(t,r):n.withScope(r)}return n.withScope(e[0])}function h(){return a().getClient()}function d(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:i}=t,o={trace_id:n,span_id:i||(0,s.Z)()};return r&&(o.parent_span_id=r),o}},58024(e,t,n){"use strict";n.d(t,{t:()=>h});var r=n(96540),i=n(8448),o=n(56266),s=n(28059),a=n(63064),l=n(90001),c=n(50181),u=n(63586);function h(e,t){const n=(0,a.jE)({context:e.context}),h=(0,l.w)(),d=(0,s.h)(),p=n.defaultQueryOptions(e);p._optimisticResults=h?"isRestoring":"optimistic",p.onError&&(p.onError=i.j.batchCalls(p.onError)),p.onSuccess&&(p.onSuccess=i.j.batchCalls(p.onSuccess)),p.onSettled&&(p.onSettled=i.j.batchCalls(p.onSettled)),(0,u.tu)(p),(0,c.LJ)(p,d),(0,c.wZ)(d);const[f]=r.useState(()=>new t(n,p)),m=f.getOptimisticResult(p);if((0,o.r)(r.useCallback(e=>{const t=h?()=>{}:f.subscribe(i.j.batchCalls(e));return f.updateResult(),t},[f,h]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),r.useEffect(()=>{f.setOptions(p,{listeners:!1})},[p,f]),(0,u.EU)(p,m,h))throw(0,u.iL)(p,f,d);if((0,c.$1)({result:m,errorResetBoundary:d,useErrorBoundary:p.useErrorBoundary,query:f.getCurrentQuery()}))throw m.error;return p.notifyOnChangeProps?m:f.trackResult(m)}},58068(e){"use strict";e.exports=SyntaxError},58168(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},58493(e,t,n){"use strict";var r=n(96540);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a(function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})},[e,n,t]),s(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},58859(e,t,n){var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"===typeof i.get?i.get:null,s=r&&Map.prototype.forEach,a="function"===typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&l&&"function"===typeof l.get?l.get:null,u=a&&Set.prototype.forEach,h="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,_=String.prototype.replace,b=String.prototype.toUpperCase,w=String.prototype.toLowerCase,x=RegExp.prototype.test,S=Array.prototype.concat,E=Array.prototype.join,T=Array.prototype.slice,M=Math.floor,A="function"===typeof BigInt?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,I="function"===typeof Symbol&&"object"===typeof Symbol.iterator,P="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===I||"symbol")?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,R=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function D(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||x.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var r=e<0?-M(-e):M(e);if(r!==e){var i=String(r),o=v.call(t,i.length+1);return _.call(i,n,"$&_")+"."+_.call(_.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(t,n,"$&_")}var L=n(42634),N=L.custom,F=Y(N)?N:null,z={__proto__:null,double:'"',single:"'"},U={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function j(e,t,n){var r=n.quoteStyle||t,i=z[r];return i+e+i}function B(e){return _.call(String(e),/"/g,"&quot;")}function V(e){return!P||!("object"===typeof e&&(P in e||"undefined"!==typeof e[P]))}function H(e){return"[object Array]"===W(e)&&V(e)}function $(e){return"[object RegExp]"===W(e)&&V(e)}function Y(e){if(I)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!C)return!1;try{return C.call(e),!0}catch(t){}return!1}e.exports=function e(t,r,i,a){var l=r||{};if(q(l,"quoteStyle")&&!q(z,l.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(q(l,"maxStringLength")&&("number"===typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var m=!q(l,"customInspect")||l.customInspect;if("boolean"!==typeof m&&"symbol"!==m)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(q(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(q(l,"numericSeparator")&&"boolean"!==typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var b=l.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return Z(t,l);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var x=String(t);return b?D(t,x):x}if("bigint"===typeof t){var M=String(t)+"n";return b?D(t,M):M}var k="undefined"===typeof l.depth?5:l.depth;if("undefined"===typeof i&&(i=0),i>=k&&k>0&&"object"===typeof t)return H(t)?"[Array]":"[Object]";var N=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;n=E.call(Array(e.indent+1)," ")}return{base:n,prev:E.call(Array(t+1),n)}}(l,i);if("undefined"===typeof a)a=[];else if(K(a,t)>=0)return"[Circular]";function U(t,n,r){if(n&&(a=T.call(a)).push(n),r){var o={depth:l.depth};return q(l,"quoteStyle")&&(o.quoteStyle=l.quoteStyle),e(t,o,i+1,a)}return e(t,l,i+1,a)}if("function"===typeof t&&!$(t)){var G=function(e){if(e.name)return e.name;var t=y.call(g.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),J=ne(t,U);return"[Function"+(G?": "+G:" (anonymous)")+"]"+(J.length>0?" { "+E.call(J,", ")+" }":"")}if(Y(t)){var re=I?_.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):C.call(t);return"object"!==typeof t||I?re:X(re)}if(function(e){if(!e||"object"!==typeof e)return!1;if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"===typeof e.nodeName&&"function"===typeof e.getAttribute}(t)){for(var ie="<"+w.call(String(t.nodeName)),oe=t.attributes||[],se=0;se<oe.length;se++)ie+=" "+oe[se].name+"="+j(B(oe[se].value),"double",l);return ie+=">",t.childNodes&&t.childNodes.length&&(ie+="..."),ie+="</"+w.call(String(t.nodeName))+">"}if(H(t)){if(0===t.length)return"[]";var ae=ne(t,U);return N&&!function(e){for(var t=0;t<e.length;t++)if(K(e[t],"\n")>=0)return!1;return!0}(ae)?"["+te(ae,N)+"]":"[ "+E.call(ae,", ")+" ]"}if(function(e){return"[object Error]"===W(e)&&V(e)}(t)){var le=ne(t,U);return"cause"in Error.prototype||!("cause"in t)||O.call(t,"cause")?0===le.length?"["+String(t)+"]":"{ ["+String(t)+"] "+E.call(le,", ")+" }":"{ ["+String(t)+"] "+E.call(S.call("[cause]: "+U(t.cause),le),", ")+" }"}if("object"===typeof t&&m){if(F&&"function"===typeof t[F]&&L)return L(t,{depth:k-i});if("symbol"!==m&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!==typeof e)return!1;try{o.call(e);try{c.call(e)}catch(ie){return!0}return e instanceof Map}catch(t){}return!1}(t)){var ce=[];return s&&s.call(t,function(e,n){ce.push(U(n,t,!0)+" => "+U(e,t))}),ee("Map",o.call(t),ce,N)}if(function(e){if(!c||!e||"object"!==typeof e)return!1;try{c.call(e);try{o.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var ue=[];return u&&u.call(t,function(e){ue.push(U(e,t))}),ee("Set",c.call(t),ue,N)}if(function(e){if(!h||!e||"object"!==typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(ie){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return Q("WeakMap");if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(ie){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return Q("WeakSet");if(function(e){if(!p||!e||"object"!==typeof e)return!1;try{return p.call(e),!0}catch(t){}return!1}(t))return Q("WeakRef");if(function(e){return"[object Number]"===W(e)&&V(e)}(t))return X(U(Number(t)));if(function(e){if(!e||"object"!==typeof e||!A)return!1;try{return A.call(e),!0}catch(t){}return!1}(t))return X(U(A.call(t)));if(function(e){return"[object Boolean]"===W(e)&&V(e)}(t))return X(f.call(t));if(function(e){return"[object String]"===W(e)&&V(e)}(t))return X(U(String(t)));if("undefined"!==typeof window&&t===window)return"{ [object Window] }";if("undefined"!==typeof globalThis&&t===globalThis||"undefined"!==typeof n.g&&t===n.g)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===W(e)&&V(e)}(t)&&!$(t)){var he=ne(t,U),de=R?R(t)===Object.prototype:t instanceof Object||t.constructor===Object,pe=t instanceof Object?"":"null prototype",fe=!de&&P&&Object(t)===t&&P in t?v.call(W(t),8,-1):pe?"Object":"",me=(de||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(fe||pe?"["+E.call(S.call([],fe||[],pe||[]),": ")+"] ":"");return 0===he.length?me+"{}":N?me+"{"+te(he,N)+"}":me+"{ "+E.call(he,", ")+" }"}return String(t)};var G=Object.prototype.hasOwnProperty||function(e){return e in this};function q(e,t){return G.call(e,t)}function W(e){return m.call(e)}function K(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Z(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return Z(v.call(e,0,t.maxStringLength),t)+r}var i=U[t.quoteStyle||"single"];return i.lastIndex=0,j(_.call(_.call(e,i,"\\$1"),/[\x00-\x1f]/g,J),"single",t)}function J(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function X(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function ee(e,t,n,r){return e+" ("+t+") {"+(r?te(n,r):E.call(n,", "))+"}"}function te(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+E.call(e,","+n)+"\n"+t.prev}function ne(e,t){var n=H(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=q(e,i)?t(e[i],e):""}var o,s="function"===typeof k?k(e):[];if(I){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in e)q(e,l)&&(n&&String(Number(l))===l&&l<e.length||I&&o["$"+l]instanceof Symbol||(x.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"===typeof k)for(var c=0;c<s.length;c++)O.call(e,s[c])&&r.push("["+t(s[c])+"]: "+t(e[s[c]],e));return r}},58968(e){"use strict";e.exports=Math.floor},59328(e,t,n){"use strict";n.d(t,{Vu:()=>a,fj:()=>o,qO:()=>s});var r=n(9600),i=n(93177);function o(e){const t=(0,i.zf)(),n={sid:(0,r.eJ)(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"===typeof e.did||"string"===typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(n)};return e&&s(n,e),n}function s(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,i.zf)(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:(0,r.eJ)()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"===typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"===typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"===typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function a(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),s(e,n)}},59399(e,t,n){"use strict";var r=n(25264).CopyToClipboard;r.CopyToClipboard=r,e.exports=r},59571(e,t,n){"use strict";n.d(t,{W:()=>a});var r=n(96540);let i=e=>e;const o={some:0,all:1};function s(e,t,{root:n,margin:r,amount:s="some"}={}){const a=function(e,t,n){var r;if("string"===typeof e){let o=document;t&&(i(Boolean(t.current),"Scope provided, but no element detected."),o=t.current),n?(null!==(r=n[e])&&void 0!==r||(n[e]=o.querySelectorAll(e)),e=n[e]):e=o.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}(e),l=new WeakMap,c=new IntersectionObserver(e=>{e.forEach(e=>{const n=l.get(e.target);if(e.isIntersecting!==Boolean(n))if(e.isIntersecting){const n=t(e);"function"===typeof n?l.set(e.target,n):c.unobserve(e.target)}else n&&(n(e),l.delete(e.target))})},{root:n,rootMargin:r,threshold:"number"===typeof s?s:o[s]});return a.forEach(e=>c.observe(e)),()=>c.disconnect()}function a(e,{root:t,margin:n,amount:i,once:o=!1}={}){const[a,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!e.current||o&&a)return;const r={root:t&&t.current||void 0,margin:n,amount:i};return s(e.current,()=>(l(!0),o?void 0:()=>l(!1)),r)},[t,e,n,o,i]),a}},59671(e,t,n){"use strict";n.d(t,{li:()=>C,mG:()=>k});var r=n(7313),i=n(26674),o=n(19282),s=n(64208),a=n(17786);function l(e,t,n,r=0){try{const i=c(t,n,e,r);return(0,s.Qg)(i)?i:(0,a.XW)(i)}catch(i){return(0,a.xg)(i)}}function c(e,t,n,r){const a=n[r];if(!e||!a)return e;const l=a({...e},t);return i.T&&null===l&&o.Yz.log(`Event processor "${a.id||"?"}" dropped event`),(0,s.Qg)(l)?l.then(e=>c(e,t,n,r+1)):c(l,t,n,r+1)}var u=n(94988),h=n(18845);let d,p,f,m;function g(e){const t=h.O._sentryDebugIds,n=h.O._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],i=n?Object.keys(n):[];if(m&&r.length===p&&i.length===f)return m;p=r.length,f=i.length,m={},d||(d={});const o=(t,n)=>{for(const r of t){const t=n[r],i=d?.[r];if(i&&m&&t)m[i[0]]=t,d&&(d[r]=[i[0],t]);else if(t){const n=e(r);for(let e=n.length-1;e>=0;e--){const i=n[e],o=i?.filename;if(o&&m&&d){m[o]=t,d[r]=[o,t];break}}}}};return t&&o(r,t),n&&o(i,n),m}var y=n(9600),v=n(94837),_=n(57968),b=n(31158),w=n(45734),x=n(5915);function S(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra});Object.keys(r).length&&(e.tags={...r,...e.tags});Object.keys(i).length&&(e.user={...i,...e.user});Object.keys(o).length&&(e.contexts={...o,...e.contexts});s&&(e.level=s);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:(0,x.kX)(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:(0,b.k1)(t),...e.sdkProcessingMetadata};const n=(0,x.zU)(t),r=(0,x.et)(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function E(e,t){const{extra:n,tags:r,attributes:i,user:o,contexts:s,level:a,sdkProcessingMetadata:l,breadcrumbs:c,fingerprint:u,eventProcessors:h,attachments:d,propagationContext:p,transactionName:f,span:m}=t;T(e,"extra",n),T(e,"tags",r),T(e,"attributes",i),T(e,"user",o),T(e,"contexts",s),e.sdkProcessingMetadata=(0,w.h)(e.sdkProcessingMetadata,l,2),a&&(e.level=a),f&&(e.transactionName=f),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),h.length&&(e.eventProcessors=[...e.eventProcessors,...h]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function T(e,t,n){e[t]=(0,w.h)(e[t],n,1)}var M=n(70125),A=n(93177);function k(e,t,n,i,o,s){const{normalizeDepth:a=3,normalizeMaxBreadth:c=1e3}=e,h={...t,event_id:t.event_id||n.event_id||(0,y.eJ)(),timestamp:t.timestamp||(0,A.lu)()},d=n.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:n,release:i,dist:o,maxValueLength:s}=t;e.environment=e.environment||n||r.U,!e.release&&i&&(e.release=i);!e.dist&&o&&(e.dist=o);const a=e.request;a?.url&&s&&(a.url=(0,M.xv)(a.url,s));s&&e.exception?.values?.forEach(e=>{e.value&&(e.value=(0,M.xv)(e.value,s))})}(h,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(h,d),o&&o.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=g(t);e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=n[e.filename])})})}(h,e.stackParser);const p=function(e,t){if(!t)return e;const n=e?e.clone():new u.H;return n.update(t),n}(i,n.captureContext);n.mechanism&&(0,y.M6)(h,n.mechanism);const f=o?o.getEventProcessors():[],m=function(e,t){const n=(0,_.m6)().getScopeData();return e&&E(n,e.getScopeData()),t&&E(n,t.getScopeData()),n}(s,p),b=[...n.attachments||[],...m.attachments];b.length&&(n.attachments=b),S(h,m);return l([...f,...m.eventProcessors],h,n).then(e=>(e&&function(e){const t={};if(e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"===typeof a&&a>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:(0,v.S8)(e.data,t,n)}}))},...e.user&&{user:(0,v.S8)(e.user,t,n)},...e.contexts&&{contexts:(0,v.S8)(e.contexts,t,n)},...e.extra&&{extra:(0,v.S8)(e.extra,t,n)}};e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=(0,v.S8)(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map(e=>({...e,...e.data&&{data:(0,v.S8)(e.data,t,n)}})));e.contexts?.flags&&r.contexts&&(r.contexts.flags=(0,v.S8)(e.contexts.flags,3,n));return r}(e,a,c):e))}function C(e){if(e)return function(e){return e instanceof u.H||"function"===typeof e}(e)||function(e){return Object.keys(e).some(e=>I.includes(e))}(e)?{captureContext:e}:e}const I=["user","level","extra","contexts","tags","fingerprint","propagationContext"]},59998(e,t,n){"use strict";n.d(t,{Ay:()=>D});var r=n(96540),i=n(34164),o=n(21362),s=n(411),a=n(89114),l=n(13674),c=n(17726);const u=function(e,t=166){let n;function r(...r){clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}return r.clear=()=>{clearTimeout(n)},r};var h=n(30301),d=n(53356),p=n(24337);const f=n(88612).A;var m=n(74848);function g(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=f(t);let s;if(t.fakeTransform)s=t.fakeTransform;else{const e=o.getComputedStyle(t);s=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let a=0,l=0;if(s&&"none"!==s&&"string"===typeof s){const e=s.split("(")[1].split(")")[0].split(",");a=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?i?`translateX(${i.right+a-r.left}px)`:`translateX(${o.innerWidth+a-r.left}px)`:"right"===e?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:"up"===e?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${o.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const y=r.forwardRef(function(e,t){const n=(0,d.A)(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:y,container:v,direction:_="down",easing:b=i,in:w,onEnter:x,onEntered:S,onEntering:E,onExit:T,onExited:M,onExiting:A,style:k,timeout:C=o,TransitionComponent:I=l.Ay,...P}=e,O=r.useRef(null),R=(0,h.A)((0,c.A)(y),O,t),D=e=>t=>{e&&(void 0===t?e(O.current):e(O.current,t))},L=D((e,t)=>{g(_,e,v),(0,p.q)(e),x&&x(e,t)}),N=D((e,t)=>{const r=(0,p.c)({timeout:C,style:k,easing:b},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",{...r}),e.style.transition=n.transitions.create("transform",{...r}),e.style.webkitTransform="none",e.style.transform="none",E&&E(e,t)}),F=D(S),z=D(A),U=D(e=>{const t=(0,p.c)({timeout:C,style:k,easing:b},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),g(_,e,v),T&&T(e)}),j=D(e=>{e.style.webkitTransition="",e.style.transition="",M&&M(e)}),B=r.useCallback(()=>{O.current&&g(_,O.current,v)},[_,v]);return r.useEffect(()=>{if(w||"down"===_||"right"===_)return;const e=u(()=>{O.current&&g(_,O.current,v)}),t=f(O.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}},[_,w,v]),r.useEffect(()=>{w||B()},[w,B]),(0,m.jsx)(I,{nodeRef:O,onEnter:L,onEntered:F,onEntering:N,onExit:U,onExited:j,onExiting:z,addEndListener:e=>{s&&s(O.current,e)},appear:a,in:w,timeout:C,...P,children:(e,{ownerState:t,...n})=>r.cloneElement(y,{ref:R,style:{visibility:"exited"!==e||w?void 0:"hidden",...k,...y.props.style},...n})})});var v=n(49565),_=n(39407),b=n(98855),w=n(67695),x=n(39241),S=n(13202),E=n(96148),T=n(32520);function M(e){return(0,T.Ay)("MuiDrawer",e)}(0,E.A)("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);var A=n(85078);function k(e,t){if(!e)return t;function n(e,t){const n={};return Object.keys(t).forEach(r=>{(function(e,t){const n=e.charCodeAt(2);return"o"===e[0]&&"n"===e[1]&&n>=65&&n<=90&&"function"===typeof t})(r,t[r])&&"function"===typeof e[r]&&(n[r]=(...n)=>{e[r](...n),t[r](...n)})}),n}if("function"===typeof e||"function"===typeof t)return r=>{const o="function"===typeof t?t(r):t,s="function"===typeof e?e({...r,...o}):e,a=(0,i.A)(r?.className,o?.className,s?.className),l=n(s,o);return{...o,...s,...l,...!!a&&{className:a},...o?.style&&s?.style&&{style:{...o.style,...s.style}},...o?.sx&&s?.sx&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(s.sx)?s.sx:[s.sx]]}}};const r=t,o=n(e,r),s=(0,i.A)(r?.className,e?.className);return{...t,...e,...o,...!!s&&{className:s},...r?.style&&e?.style&&{style:{...r.style,...e.style}},...r?.sx&&e?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}const C=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},I=(0,w.Ay)(a.A,{name:"MuiDrawer",slot:"Root",overridesResolver:C})((0,x.A)(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),P=(0,w.Ay)("div",{shouldForwardProp:b.A,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:C})({flex:"0 0 auto"}),O=(0,w.Ay)(v.A,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${(0,_.A)(n.anchor)}`],"temporary"!==n.variant&&t[`paperAnchorDocked${(0,_.A)(n.anchor)}`]]}})((0,x.A)(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>"left"===e.anchor&&"temporary"!==e.variant,style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:e})=>"top"===e.anchor&&"temporary"!==e.variant,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:e})=>"right"===e.anchor&&"temporary"!==e.variant,style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:e})=>"bottom"===e.anchor&&"temporary"!==e.variant,style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),R={left:"right",right:"left",top:"down",bottom:"up"};const D=r.forwardRef(function(e,t){const n=(0,S.b)({props:e,name:"MuiDrawer"}),a=(0,d.A)(),l=(0,s.I)(),c={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{anchor:u="left",BackdropProps:h,children:p,className:f,elevation:g=16,hideBackdrop:v=!1,ModalProps:{BackdropProps:b,...w}={},onClose:x,open:E=!1,PaperProps:T={},SlideProps:C,TransitionComponent:D,transitionDuration:L=c,variant:N="temporary",slots:F={},slotProps:z={},...U}=n,j=r.useRef(!1);r.useEffect(()=>{j.current=!0},[]);const B=function({direction:e},t){return"rtl"===e&&function(e){return["left","right"].includes(e)}(t)?R[t]:t}({direction:l?"rtl":"ltr"},u),V=u,H={...n,anchor:V,elevation:g,open:E,variant:N,...U},$=(e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root",`anchor${(0,_.A)(n)}`],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${(0,_.A)(n)}`,"temporary"!==r&&`paperAnchorDocked${(0,_.A)(n)}`]};return(0,o.A)(i,M,t)})(H),Y={slots:{transition:D,...F},slotProps:{paper:T,transition:C,...z,backdrop:k(z.backdrop||{...h,...b},{transitionDuration:L})}},[G,q]=(0,A.A)("root",{ref:t,elementType:I,className:(0,i.A)($.root,$.modal,f),shouldForwardComponentProp:!0,ownerState:H,externalForwardedProps:{...Y,...U,...w},additionalProps:{open:E,onClose:x,hideBackdrop:v,slots:{backdrop:Y.slots.backdrop},slotProps:{backdrop:Y.slotProps.backdrop}}}),[W,K]=(0,A.A)("paper",{elementType:O,shouldForwardComponentProp:!0,className:(0,i.A)($.paper,T.className),ownerState:H,externalForwardedProps:Y,additionalProps:{elevation:"temporary"===N?g:0,square:!0,..."temporary"===N&&{role:"dialog","aria-modal":"true"}}}),[Z,J]=(0,A.A)("docked",{elementType:P,ref:t,className:(0,i.A)($.root,$.docked,f),ownerState:H,externalForwardedProps:Y,additionalProps:U}),[X,Q]=(0,A.A)("transition",{elementType:y,ownerState:H,externalForwardedProps:Y,additionalProps:{in:E,direction:R[B],timeout:L,appear:j.current}}),ee=(0,m.jsx)(W,{...K,children:p});if("permanent"===N)return(0,m.jsx)(Z,{...J,children:ee});const te=(0,m.jsx)(X,{...Q,children:ee});return"persistent"===N?(0,m.jsx)(Z,{...J,children:te}):(0,m.jsx)(G,{...q,children:te})})},61221(e,t,n){"use strict";n.d(t,{i:()=>u});var r=n(13235),i=n(9600),o=n(46403),s=n(14910);let a,l,c;function u(e){(0,r.s5)("dom",e),(0,r.AS)("dom",h)}function h(){if(!s.j.document)return;const e=r.aj.bind(null,"dom"),t=d(e,!0);s.j.document.addEventListener("click",t,!1),s.j.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{const n=s.j,r=n[t]?.prototype;r?.hasOwnProperty?.("addEventListener")&&((0,o.GS)(r,"addEventListener",function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},o=r[n]=r[n]||{refCount:0};if(!o.handler){const r=d(e);o.handler=r,t.call(this,n,r,i)}o.refCount++}catch{}return t.call(this,n,r,i)}}),(0,o.GS)(r,"removeEventListener",function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},i=n[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch{}return e.call(this,t,n,r)}}))})}function d(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch{return null}}(n);if(function(e,t){return"keypress"===e&&(!t?.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;(0,o.my)(n,"_sentryCaptured",!0),r&&!r._sentryId&&(0,o.my)(r,"_sentryId",(0,i.eJ)());const u="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==l)return!1;try{if(!e.target||e.target._sentryId!==c)return!1}catch{}return!0}(n)){e({event:n,name:u,global:t}),l=n.type,c=r?r._sentryId:void 0}clearTimeout(a),a=s.j.setTimeout(()=>{c=void 0,l=void 0},1e3)}}},61225(e,t,n){"use strict";n.d(t,{Kq:()=>u,Ng:()=>H,wA:()=>W,d4:()=>X});var r=n(96540),i=r.createContext(null);var o=function(e){e()},s=function(){return o};var a={notify:function(){},get:function(){return[]}};function l(e,t){var n,r=a;function i(){l.onStateChange&&l.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var l={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=a)},getListeners:function(){return r}};return l}var c="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;const u=function(e){var t=e.store,n=e.context,o=e.children,s=(0,r.useMemo)(function(){var e=l(t);return{store:t,subscription:e}},[t]),a=(0,r.useMemo)(function(){return t.getState()},[t]);c(function(){var e=s.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[s,a]);var u=n||i;return r.createElement(u.Provider,{value:s},o)};var h=n(58168),d=n(98587),p=n(4146),f=n.n(p),m=n(54737),g=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],y=["reactReduxForwardedRef"],v=[],_=[null,null];function b(e,t){var n=e[1];return[t.payload,n+1]}function w(e,t,n){c(function(){return e.apply(void 0,t)},n)}function x(e,t,n,r,i,o,s){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,s())}function S(e,t,n,r,i,o,s,a,l,c){if(e){var u=!1,h=null,d=function(){if(!u){var e,n,d=t.getState();try{e=r(d,i.current)}catch(p){n=p,h=p}n||(h=null),e===o.current?s.current||l():(o.current=e,a.current=e,s.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=d,n.trySubscribe(),d();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}}var E=function(){return[null,0]};function T(e,t){void 0===t&&(t={});var n=t,o=n.getDisplayName,s=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,a=n.methodName,c=void 0===a?"connectAdvanced":a,u=n.renderCountProp,p=void 0===u?void 0:u,T=n.shouldHandleStateChanges,M=void 0===T||T,A=n.storeKey,k=void 0===A?"store":A,C=(n.withRef,n.forwardRef),I=void 0!==C&&C,P=n.context,O=void 0===P?i:P,R=(0,d.A)(n,g),D=O;return function(t){var n=t.displayName||t.name||"Component",i=s(n),o=(0,h.A)({},R,{getDisplayName:s,methodName:c,renderCountProp:p,shouldHandleStateChanges:M,storeKey:k,displayName:i,wrappedComponentName:n,WrappedComponent:t}),a=R.pure;var u=a?r.useMemo:function(e){return e()};function g(n){var i=(0,r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=(0,d.A)(n,y);return[n.context,e,t]},[n]),s=i[0],a=i[1],c=i[2],p=(0,r.useMemo)(function(){return s&&s.Consumer&&(0,m.isContextConsumer)(r.createElement(s.Consumer,null))?s:D},[s,D]),f=(0,r.useContext)(p),g=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(f)&&Boolean(f.store);var T=g?n.store:f.store,A=(0,r.useMemo)(function(){return function(t){return e(t.dispatch,o)}(T)},[T]),k=(0,r.useMemo)(function(){if(!M)return _;var e=l(T,g?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[T,g,f]),C=k[0],I=k[1],P=(0,r.useMemo)(function(){return g?f:(0,h.A)({},f,{subscription:C})},[g,f,C]),O=(0,r.useReducer)(b,v,E),R=O[0][0],L=O[1];if(R&&R.error)throw R.error;var N=(0,r.useRef)(),F=(0,r.useRef)(c),z=(0,r.useRef)(),U=(0,r.useRef)(!1),j=u(function(){return z.current&&c===F.current?z.current:A(T.getState(),c)},[T,R,c]);w(x,[F,N,U,c,j,z,I]),w(S,[M,T,C,A,F,N,U,z,I,L],[T,C,A]);var B=(0,r.useMemo)(function(){return r.createElement(t,(0,h.A)({},j,{ref:a}))},[a,t,j]);return(0,r.useMemo)(function(){return M?r.createElement(p.Provider,{value:P},B):B},[p,B,P])}var T=a?r.memo(g):g;if(T.WrappedComponent=t,T.displayName=g.displayName=i,I){var A=r.forwardRef(function(e,t){return r.createElement(T,(0,h.A)({},e,{reactReduxForwardedRef:t}))});return A.displayName=i,A.WrappedComponent=t,f()(A,t)}return f()(T,t)}}function M(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function A(e,t){if(M(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!M(e[n[i]],t[n[i]]))return!1;return!0}function k(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function C(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function I(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=C(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=C(i),i=r(t,n)),i},r}}const P=[function(e){return"function"===typeof e?I(e):void 0},function(e){return e?void 0:k(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?k(function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)}):void 0}];const O=[function(e){return"function"===typeof e?I(e):void 0},function(e){return e?void 0:k(function(){return{}})}];function R(e,t,n){return(0,h.A)({},n,e,t)}const D=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,s=!1;return function(t,n,a){var l=e(t,n,a);return s?i&&o(l,r)||(r=l):(s=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return R}}];var L=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function N(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function F(e,t,n,r,i){var o,s,a,l,c,u=i.areStatesEqual,h=i.areOwnPropsEqual,d=i.areStatePropsEqual,p=!1;function f(i,p){var f=!h(p,s),m=!u(i,o,p,s);return o=i,s=p,f&&m?(a=e(o,s),t.dependsOnOwnProps&&(l=t(r,s)),c=n(a,l,s)):f?(e.dependsOnOwnProps&&(a=e(o,s)),t.dependsOnOwnProps&&(l=t(r,s)),c=n(a,l,s)):m?function(){var t=e(o,s),r=!d(t,a);return a=t,r&&(c=n(a,l,s)),c}():c}return function(i,u){return p?f(i,u):(a=e(o=i,s=u),l=t(r,s),c=n(a,l,s),p=!0,c)}}function z(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=(0,d.A)(t,L),s=n(e,o),a=r(e,o),l=i(e,o);return(o.pure?F:N)(s,a,l,e,o)}var U=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function j(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function B(e,t){return e===t}function V(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?T:n,i=t.mapStateToPropsFactories,o=void 0===i?O:i,s=t.mapDispatchToPropsFactories,a=void 0===s?P:s,l=t.mergePropsFactories,c=void 0===l?D:l,u=t.selectorFactory,p=void 0===u?z:u;return function(e,t,n,i){void 0===i&&(i={});var s=i,l=s.pure,u=void 0===l||l,f=s.areStatesEqual,m=void 0===f?B:f,g=s.areOwnPropsEqual,y=void 0===g?A:g,v=s.areStatePropsEqual,_=void 0===v?A:v,b=s.areMergedPropsEqual,w=void 0===b?A:b,x=(0,d.A)(s,U),S=j(e,o,"mapStateToProps"),E=j(t,a,"mapDispatchToProps"),T=j(n,c,"mergeProps");return r(p,(0,h.A)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:E,initMergeProps:T,pure:u,areStatesEqual:m,areOwnPropsEqual:y,areStatePropsEqual:_,areMergedPropsEqual:w},x))}}const H=V();function $(){return(0,r.useContext)(i)}function Y(e){void 0===e&&(e=i);var t=e===i?$:function(){return(0,r.useContext)(e)};return function(){return t().store}}var G=Y();function q(e){void 0===e&&(e=i);var t=e===i?G:Y(e);return function(){return t().dispatch}}var W=q(),K=function(e,t){return e===t};function Z(e){void 0===e&&(e=i);var t=e===i?$:function(){return(0,r.useContext)(e)};return function(e,n){void 0===n&&(n=K);var i=t(),o=function(e,t,n,i){var o,s=(0,r.useReducer)(function(e){return e+1},0)[1],a=(0,r.useMemo)(function(){return l(n,i)},[n,i]),u=(0,r.useRef)(),h=(0,r.useRef)(),d=(0,r.useRef)(),p=(0,r.useRef)(),f=n.getState();try{if(e!==h.current||f!==d.current||u.current){var m=e(f);o=void 0!==p.current&&t(m,p.current)?p.current:m}else o=p.current}catch(g){throw u.current&&(g.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),g}return c(function(){h.current=e,d.current=f,p.current=o,u.current=void 0}),c(function(){function e(){try{var e=n.getState();if(e===d.current)return;var r=h.current(e);if(t(r,p.current))return;p.current=r,d.current=e}catch(g){u.current=g}s()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}},[n,a]),o}(e,n,i.store,i.subscription);return(0,r.useDebugValue)(o),o}}var J,X=Z(),Q=n(40961);J=Q.unstable_batchedUpdates,o=J},61622(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}},61882(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(2383),i=n(53098);const o=function(e){return"symbol"==typeof e||(0,i.A)(e)&&"[object Symbol]"==(0,r.A)(e)}},62050(e,t,n){"use strict";n.d(t,{A:()=>S});const r=(0,n(28562).A)(Object,"create");const i=function(){this.__data__=r?r(null):{},this.size=0};const o=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var s=Object.prototype.hasOwnProperty;const a=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(t,e)?t[e]:void 0};var l=Object.prototype.hasOwnProperty;const c=function(e){var t=this.__data__;return r?void 0!==t[e]:l.call(t,e)};const u=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this};function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=a,h.prototype.has=c,h.prototype.set=u;const d=h;var p=n(89469),f=n(68335);const m=function(){this.size=0,this.__data__={hash:new d,map:new(f.A||p.A),string:new d}};const g=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const y=function(e,t){var n=e.__data__;return g(t)?n["string"==typeof t?"string":"hash"]:n.map};const v=function(e){var t=y(this,e).delete(e);return this.size-=t?1:0,t};const _=function(e){return y(this,e).get(e)};const b=function(e){return y(this,e).has(e)};const w=function(e,t){var n=y(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function x(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}x.prototype.clear=m,x.prototype.delete=v,x.prototype.get=_,x.prototype.has=b,x.prototype.set=w;const S=x},62517(e,t,n){"use strict";n.d(t,{m:()=>s});var r=n(94323),i=n(12295);class o extends r.Q{constructor(){super(),this.setup=e=>{if(!i.S$&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}}const s=new o},62642(e,t,n){"use strict";var r=n(37720),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},a=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},l=function(e,t,n){if(e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&n>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},c=function(e,t,n,o){if(e){var s=function(e,t){var n=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;if(t.depth<=0){if(!t.plainObjects&&i.call(Object.prototype,n)&&!t.allowPrototypes)return;return[n]}var r=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(n),s=o?n.slice(0,o.index):n,a=[];if(s){if(!t.plainObjects&&i.call(Object.prototype,s)&&!t.allowPrototypes)return;a.push(s)}for(var l=0;null!==(o=r.exec(n))&&l<t.depth;){l+=1;var c=o[1].slice(1,-1);if(!t.plainObjects&&i.call(Object.prototype,c)&&!t.allowPrototypes)return;a.push(o[1])}if(o){if(!0===t.strictDepth)throw new RangeError("Input depth exceeded depth option of "+t.depth+" and strictDepth is true");a.push("["+n.slice(o.index)+"]")}return a}(e,n);if(s)return function(e,t,n,i){var o=0;if(e.length>0&&"[]"===e[e.length-1]){var s=e.slice(0,-1).join("");o=Array.isArray(t)&&t[s]?t[s].length:0}for(var a=i?t:l(t,n,o),c=e.length-1;c>=0;--c){var u,h=e[c];if("[]"===h&&n.parseArrays)u=r.isOverflow(a)?a:n.allowEmptyArrays&&(""===a||n.strictNullHandling&&null===a)?[]:r.combine([],a,n.arrayLimit,n.plainObjects);else{u=n.plainObjects?{__proto__:null}:{};var d="["===h.charAt(0)&&"]"===h.charAt(h.length-1)?h.slice(1,-1):h,p=n.decodeDotInKeys?d.replace(/%2E/g,"."):d,f=parseInt(p,10);n.parseArrays||""!==p?!isNaN(f)&&h!==p&&String(f)===p&&f>=0&&n.parseArrays&&f<=n.arrayLimit?(u=[])[f]=a:"__proto__"!==p&&(u[p]=a):u={0:a}}a=u}return a}(s,t,n,o)}};e.exports=function(e,t){var n=function(e){if(!e)return s;if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.decodeDotInKeys&&"boolean"!==typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&"undefined"!==typeof e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if("undefined"!==typeof e.throwOnLimitExceeded&&"boolean"!==typeof e.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t="undefined"===typeof e.charset?s.charset:e.charset,n="undefined"===typeof e.duplicates?s.duplicates:e.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:"undefined"===typeof e.allowDots?!0===e.decodeDotInKeys||s.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:s.comma,decodeDotInKeys:"boolean"===typeof e.decodeDotInKeys?e.decodeDotInKeys:s.decodeDotInKeys,decoder:"function"===typeof e.decoder?e.decoder:s.decoder,delimiter:"string"===typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:s.depth,duplicates:n,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:s.plainObjects,strictDepth:"boolean"===typeof e.strictDepth?!!e.strictDepth:s.strictDepth,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling,throwOnLimitExceeded:"boolean"===typeof e.throwOnLimitExceeded&&e.throwOnLimitExceeded}}(t);if(""===e||null===e||"undefined"===typeof e)return n.plainObjects?{__proto__:null}:{};for(var u="string"===typeof e?function(e,t){var n={__proto__:null},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var u=t.parameterLimit===1/0?void 0:t.parameterLimit,h=c.split(t.delimiter,t.throwOnLimitExceeded?u+1:u);if(t.throwOnLimitExceeded&&h.length>u)throw new RangeError("Parameter limit exceeded. Only "+u+" parameter"+(1===u?"":"s")+" allowed.");var d,p=-1,f=t.charset;if(t.charsetSentinel)for(d=0;d<h.length;++d)0===h[d].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[d]?f="utf-8":"utf8=%26%2310003%3B"===h[d]&&(f="iso-8859-1"),p=d,d=h.length);for(d=0;d<h.length;++d)if(d!==p){var m,g,y=h[d],v=y.indexOf("]="),_=-1===v?y.indexOf("="):v+1;if(-1===_?(m=t.decoder(y,s.decoder,f,"key"),g=t.strictNullHandling?null:""):null!==(m=t.decoder(y.slice(0,_),s.decoder,f,"key"))&&(g=r.maybeMap(l(y.slice(_+1),t,o(n[m])?n[m].length:0),function(e){return t.decoder(e,s.decoder,f,"value")})),g&&t.interpretNumericEntities&&"iso-8859-1"===f&&(g=a(String(g))),y.indexOf("[]=")>-1&&(g=o(g)?[g]:g),null!==m){var b=i.call(n,m);b&&"combine"===t.duplicates?n[m]=r.combine(n[m],g,t.arrayLimit,t.plainObjects):b&&"last"!==t.duplicates||(n[m]=g)}}return n}(e,n):e,h=n.plainObjects?{__proto__:null}:{},d=Object.keys(u),p=0;p<d.length;++p){var f=d[p],m=c(f,u[f],n,"string"===typeof e);h=r.merge(h,m,n)}return!0===n.allowSparse?h:r.compact(h)}},62745(e,t,n){"use strict";n.d(t,{T:()=>r});const r="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},62796(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r="\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),i="\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),o="\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),s="\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),a=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function l(e,t,n){var r,i;return"m"===n?t?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443":e+" "+(r=+e,i={mm:t?"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442":"\u043c\u0438\u043d\u0443\u0442\u0443_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2])}var c=function(e,t){return a.test(t)?r[e.month()]:i[e.month()]};c.s=i,c.f=r;var u=function(e,t){return a.test(t)?o[e.month()]:s[e.month()]};u.s=s,u.f=o;var h={name:"ru",weekdays:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u0432\u0441\u043a_\u043f\u043d\u0434_\u0432\u0442\u0440_\u0441\u0440\u0434_\u0447\u0442\u0432_\u043f\u0442\u043d_\u0441\u0431\u0442".split("_"),weekdaysMin:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),months:c,monthsShort:u,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., H:mm",LLLL:"dddd, D MMMM YYYY \u0433., H:mm"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",m:l,mm:l,h:"\u0447\u0430\u0441",hh:l,d:"\u0434\u0435\u043d\u044c",dd:l,M:"\u043c\u0435\u0441\u044f\u0446",MM:l,y:"\u0433\u043e\u0434",yy:l},ordinal:function(e){return e},meridiem:function(e){return e<4?"\u043d\u043e\u0447\u0438":e<12?"\u0443\u0442\u0440\u0430":e<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0435\u0440\u0430"}};return n.default.locale(h,null,!0),h}(n(74353))},63064(e,t,n){"use strict";n.d(t,{Ht:()=>l,jE:()=>a});var r=n(96540);const i=r.createContext(void 0),o=r.createContext(!1);function s(e,t){return e||(t&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=i),window.ReactQueryClientContext):i)}const a=({context:e}={})=>{const t=r.useContext(s(e,r.useContext(o)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},l=({client:e,children:t,context:n,contextSharing:i=!1})=>{r.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const a=s(n,i);return r.createElement(o.Provider,{value:!n&&i},r.createElement(a.Provider,{value:e},t))}},63132(e,t,n){"use strict";function r(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(e=>e.startsWith("@container")).sort((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)});return n.length?n.reduce((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e},{...t}):t}function i(e,t){return"@"===t||t.startsWith("@")&&(e.some(e=>t.startsWith(`@${e}`))||!!t.match(/^@\d/))}function o(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}function s(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=(...n)=>t(e.breakpoints.up(...n),r),n.down=(...n)=>t(e.breakpoints.down(...n),r),n.between=(...n)=>t(e.breakpoints.between(...n),r),n.only=(...n)=>t(e.breakpoints.only(...n),r),n.not=(...n)=>{const i=t(e.breakpoints.not(...n),r);return i.includes("not all and")?i.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):i}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}n.d(t,{Ay:()=>s,CT:()=>o,_S:()=>r,ob:()=>i})},63225(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function i(e,t,n){var i=e+" ";switch(n){case"m":return t?"minuta":"minut\u0119";case"mm":return i+(r(e)?"minuty":"minut");case"h":return t?"godzina":"godzin\u0119";case"hh":return i+(r(e)?"godziny":"godzin");case"MM":return i+(r(e)?"miesi\u0105ce":"miesi\u0119cy");case"yy":return i+(r(e)?"lata":"lat")}}var o="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),s="stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),a=/D MMMM/,l=function(e,t){return a.test(t)?o[e.month()]:s[e.month()]};l.s=s,l.f=o;var c={name:"pl",weekdays:"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),months:l,monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),ordinal:function(e){return e+"."},weekStart:1,yearStart:4,relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:i,mm:i,h:i,hh:i,d:"1 dzie\u0144",dd:"%d dni",M:"miesi\u0105c",MM:i,y:"rok",yy:i},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"}};return n.default.locale(c,null,!0),c}(n(74353))},63263(e,t,n){"use strict";n.d(t,{u:()=>i});var r=n(96540);function i(e){(0,r.useEffect)(()=>{e()},[])}},63325(e,t,n){"use strict";n.d(t,{RC:()=>ee,qr:()=>te});var r=n(96540),i=n(12375),o=n(17044);let s,a,l;function c(){return s||(s=function(){const e=(0,i.a)(),t=(0,i.g)();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),s}function u(e){return void 0===e&&(e={}),a||(a=function(e){let{userAgent:t}=void 0===e?{}:e;const n=c(),r=(0,i.a)(),o=r.navigator.platform,s=t||r.navigator.userAgent,a={ios:!1,android:!1},l=r.screen.width,u=r.screen.height,h=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const p=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m="Win32"===o;let g="MacIntel"===o;return!d&&g&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${l}x${u}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),g=!1),h&&!m&&(a.os="android",a.android=!0),(d||f||p)&&(a.os="ios",a.ios=!0),a}(e)),a}function h(){return l||(l=function(){const e=(0,i.a)(),t=u();let n=!1;function r(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(r()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,r]=t.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));n=e<16||16===e&&r<2}}const o=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),s=r();return{isSafari:n||s,needPerspectiveFix:n,need3dFix:s||o&&t.ios,isWebView:o}}()),l}var d={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach(e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)}),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];t.apply(r,o)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach(e=>{"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)})}),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,r;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];"string"===typeof o[0]||Array.isArray(o[0])?(t=o[0],n=o.slice(1,o.length),r=e):(t=o[0].events,n=o[0].data,r=o[0].context||e),n.unshift(r);return(Array.isArray(t)?t:t.split(" ")).forEach(t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(e=>{e.apply(r,[t,...n])}),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach(e=>{e.apply(r,n)})}),e}};const p=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const f=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const m=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":`.${e.params.slideClass}`);if(n){let t=n.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())})),t&&t.remove()}},g=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},y=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const r="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=i,o=[n-t];return o.push(...Array.from({length:t}).map((e,t)=>n+r+t)),void e.slides.forEach((t,n)=>{o.includes(t.column)&&g(e,n)})}const o=i+r-1;if(e.params.rewind||e.params.loop)for(let s=i-t;s<=o+t;s+=1){const t=(s%n+n)%n;(t<i||t>o)&&g(e,t)}else for(let s=Math.max(i-t,0);s<=Math.min(o+t,n-1);s+=1)s!==i&&(s>o||s<i)&&g(e,s)};var v={updateSize:function(){const e=this;let t,n;const r=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:r.clientWidth,n="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:r.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt((0,o.p)(r,"padding-left")||0,10)-parseInt((0,o.p)(r,"padding-right")||0,10),n=n-parseInt((0,o.p)(r,"padding-top")||0,10)-parseInt((0,o.p)(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t,n){return parseFloat(t.getPropertyValue(e.getDirectionLabel(n))||0)}const n=e.params,{wrapperEl:r,slidesEl:i,size:s,rtlTranslate:a,wrongRTL:l}=e,c=e.virtual&&n.virtual.enabled,u=c?e.virtual.slides.length:e.slides.length,h=(0,o.e)(i,`.${e.params.slideClass}, swiper-slide`),d=c?e.virtual.slides.length:h.length;let p=[];const f=[],m=[];let g=n.slidesOffsetBefore;"function"===typeof g&&(g=n.slidesOffsetBefore.call(e));let y=n.slidesOffsetAfter;"function"===typeof y&&(y=n.slidesOffsetAfter.call(e));const v=e.snapGrid.length,_=e.slidesGrid.length;let b=n.spaceBetween,w=-g,x=0,S=0;if("undefined"===typeof s)return;"string"===typeof b&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*s:"string"===typeof b&&(b=parseFloat(b)),e.virtualSize=-b,h.forEach(e=>{a?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),n.centeredSlides&&n.cssMode&&((0,o.s)(r,"--swiper-centered-offset-before",""),(0,o.s)(r,"--swiper-centered-offset-after",""));const E=n.grid&&n.grid.rows>1&&e.grid;let T;E?e.grid.initSlides(h):e.grid&&e.grid.unsetSlides();const M="auto"===n.slidesPerView&&n.breakpoints&&Object.keys(n.breakpoints).filter(e=>"undefined"!==typeof n.breakpoints[e].slidesPerView).length>0;for(let A=0;A<d;A+=1){let r;if(T=0,h[A]&&(r=h[A]),E&&e.grid.updateSlide(A,r,h),!h[A]||"none"!==(0,o.p)(r,"display")){if("auto"===n.slidesPerView){M&&(h[A].style[e.getDirectionLabel("width")]="");const i=getComputedStyle(r),s=r.style.transform,a=r.style.webkitTransform;if(s&&(r.style.transform="none"),a&&(r.style.webkitTransform="none"),n.roundLengths)T=e.isHorizontal()?(0,o.f)(r,"width",!0):(0,o.f)(r,"height",!0);else{const e=t(i,"width"),n=t(i,"padding-left"),o=t(i,"padding-right"),s=t(i,"margin-left"),a=t(i,"margin-right"),l=i.getPropertyValue("box-sizing");if(l&&"border-box"===l)T=e+s+a;else{const{clientWidth:t,offsetWidth:i}=r;T=e+n+o+s+a+(i-t)}}s&&(r.style.transform=s),a&&(r.style.webkitTransform=a),n.roundLengths&&(T=Math.floor(T))}else T=(s-(n.slidesPerView-1)*b)/n.slidesPerView,n.roundLengths&&(T=Math.floor(T)),h[A]&&(h[A].style[e.getDirectionLabel("width")]=`${T}px`);h[A]&&(h[A].swiperSlideSize=T),m.push(T),n.centeredSlides?(w=w+T/2+x/2+b,0===x&&0!==A&&(w=w-s/2-b),0===A&&(w=w-s/2-b),Math.abs(w)<.001&&(w=0),n.roundLengths&&(w=Math.floor(w)),S%n.slidesPerGroup===0&&p.push(w),f.push(w)):(n.roundLengths&&(w=Math.floor(w)),(S-Math.min(e.params.slidesPerGroupSkip,S))%e.params.slidesPerGroup===0&&p.push(w),f.push(w),w=w+T+b),e.virtualSize+=T+b,x=T,S+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+y,a&&l&&("slide"===n.effect||"coverflow"===n.effect)&&(r.style.width=`${e.virtualSize+b}px`),n.setWrapperSize&&(r.style[e.getDirectionLabel("width")]=`${e.virtualSize+b}px`),E&&e.grid.updateWrapperSize(T,p),!n.centeredSlides){const t=[];for(let r=0;r<p.length;r+=1){let i=p[r];n.roundLengths&&(i=Math.floor(i)),p[r]<=e.virtualSize-s&&t.push(i)}p=t,Math.floor(e.virtualSize-s)-Math.floor(p[p.length-1])>1&&p.push(e.virtualSize-s)}if(c&&n.loop){const t=m[0]+b;if(n.slidesPerGroup>1){const r=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),i=t*n.slidesPerGroup;for(let e=0;e<r;e+=1)p.push(p[p.length-1]+i)}for(let r=0;r<e.virtual.slidesBefore+e.virtual.slidesAfter;r+=1)1===n.slidesPerGroup&&p.push(p[p.length-1]+t),f.push(f[f.length-1]+t),e.virtualSize+=t}if(0===p.length&&(p=[0]),0!==b){const t=e.isHorizontal()&&a?"marginLeft":e.getDirectionLabel("marginRight");h.filter((e,t)=>!(n.cssMode&&!n.loop)||t!==h.length-1).forEach(e=>{e.style[t]=`${b}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let e=0;m.forEach(t=>{e+=t+(b||0)}),e-=b;const t=e>s?e-s:0;p=p.map(e=>e<=0?-g:e>t?t+y:e)}if(n.centerInsufficientSlides){let e=0;m.forEach(t=>{e+=t+(b||0)}),e-=b;const t=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(e+t<s){const n=(s-e-t)/2;p.forEach((e,t)=>{p[t]=e-n}),f.forEach((e,t)=>{f[t]=e+n})}}if(Object.assign(e,{slides:h,snapGrid:p,slidesGrid:f,slidesSizesGrid:m}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){(0,o.s)(r,"--swiper-centered-offset-before",-p[0]+"px"),(0,o.s)(r,"--swiper-centered-offset-after",e.size/2-m[m.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(e=>e+t),e.slidesGrid=e.slidesGrid.map(e=>e+n)}if(d!==u&&e.emit("slidesLengthChange"),p.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==_&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!c&&!n.cssMode&&("slide"===n.effect||"fade"===n.effect)){const t=`${n.containerModifierClass}backface-hidden`,r=e.el.classList.contains(t);d<=n.maxBackfaceHiddenSlides?r||e.el.classList.add(t):r&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,o=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const s=e=>r?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(e=>{n.push(e)});else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(s(e))}else n.push(s(t.activeIndex));for(i=0;i<n.length;i+=1)if("undefined"!==typeof n[i]){const e=n[i].offsetHeight;o=e>o?e:o}(o||0===o)&&(t.wrapperEl.style.height=`${o}px`)},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:o}=t;if(0===r.length)return;"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();let s=-e;i&&(s=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let a=n.spaceBetween;"string"===typeof a&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*t.size:"string"===typeof a&&(a=parseFloat(a));for(let l=0;l<r.length;l+=1){const e=r[l];let c=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=r[0].swiperSlideOffset);const u=(s+(n.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+a),h=(s-o[0]+(n.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+a),d=-(s-c),f=d+t.slidesSizesGrid[l],m=d>=0&&d<=t.size-t.slidesSizesGrid[l],g=d>=0&&d<t.size-1||f>1&&f<=t.size||d<=0&&f>=t.size;g&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(l)),p(e,g,n.slideVisibleClass),p(e,m,n.slideFullyVisibleClass),e.progress=i?-u:u,e.originalProgress=i?-h:h}},updateProgress:function(e){const t=this;if("undefined"===typeof e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:o,isEnd:s,progressLoop:a}=t;const l=o,c=s;if(0===r)i=0,o=!0,s=!0;else{i=(e-t.minTranslate())/r;const n=Math.abs(e-t.minTranslate())<1,a=Math.abs(e-t.maxTranslate())<1;o=n||i<=0,s=a||i>=1,n&&(i=0),a&&(i=1)}if(n.loop){const n=t.getSlideIndexByData(0),r=t.getSlideIndexByData(t.slides.length-1),i=t.slidesGrid[n],o=t.slidesGrid[r],s=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);a=l>=i?(l-i)/s:(l+s-o)/s,a>1&&(a-=1)}Object.assign(t,{progress:i,progressLoop:a,isBeginning:o,isEnd:s}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!l&&t.emit("reachBeginning toEdge"),s&&!c&&t.emit("reachEnd toEdge"),(l&&!o||c&&!s)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:r,activeIndex:i}=e,s=e.virtual&&n.virtual.enabled,a=e.grid&&n.grid&&n.grid.rows>1,l=e=>(0,o.e)(r,`.${n.slideClass}${e}, swiper-slide${e}`)[0];let c,u,h;if(s)if(n.loop){let t=i-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),c=l(`[data-swiper-slide-index="${t}"]`)}else c=l(`[data-swiper-slide-index="${i}"]`);else a?(c=t.filter(e=>e.column===i)[0],h=t.filter(e=>e.column===i+1)[0],u=t.filter(e=>e.column===i-1)[0]):c=t[i];c&&(a||(h=(0,o.q)(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!h&&(h=t[0]),u=(0,o.r)(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&0===!u&&(u=t[t.length-1]))),t.forEach(e=>{f(e,e===c,n.slideActiveClass),f(e,e===h,n.slideNextClass),f(e,e===u,n.slidePrevClass)}),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:i,activeIndex:o,realIndex:s,snapIndex:a}=t;let l,c=e;const u=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if("undefined"===typeof c&&(c=function(e){const{slidesGrid:t,params:n}=e,r=e.rtlTranslate?e.translate:-e.translate;let i;for(let o=0;o<t.length;o+=1)"undefined"!==typeof t[o+1]?r>=t[o]&&r<t[o+1]-(t[o+1]-t[o])/2?i=o:r>=t[o]&&r<t[o+1]&&(i=o+1):r>=t[o]&&(i=o);return n.normalizeSlideIndex&&(i<0||"undefined"===typeof i)&&(i=0),i}(t)),r.indexOf(n)>=0)l=r.indexOf(n);else{const e=Math.min(i.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/i.slidesPerGroup)}if(l>=r.length&&(l=r.length-1),c===o&&!t.params.loop)return void(l!==a&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===o&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=u(c));const h=t.grid&&i.grid&&i.grid.rows>1;let d;if(t.virtual&&i.virtual.enabled&&i.loop)d=u(c);else if(h){const e=t.slides.filter(e=>e.column===c)[0];let n=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(n)&&(n=Math.max(t.slides.indexOf(e),0)),d=Math.floor(n/i.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");d=e?parseInt(e,10):c}else d=c;Object.assign(t,{previousSnapIndex:a,snapIndex:l,previousRealIndex:s,realIndex:d,previousIndex:o,activeIndex:c}),t.initialized&&y(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(s!==d&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,r=n.params;let i=e.closest(`.${r.slideClass}, swiper-slide`);!i&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(e=>{!i&&e.matches&&e.matches(`.${r.slideClass}, swiper-slide`)&&(i=e)});let o,s=!1;if(i)for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===i){s=!0,o=a;break}if(!i||!s)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var _={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:r,wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let s=(0,o.j)(i,e);return s+=this.cssOverflowAdjustment(),n&&(s=-s),s||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,wrapperEl:o,progress:s}=n;let a,l=0,c=0;n.isHorizontal()?l=r?-e:e:c=e,i.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,i.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:i.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),o.style.transform=`translate3d(${l}px, ${c}px, 0px)`);const u=n.maxTranslate()-n.minTranslate();a=0===u?0:(e-n.minTranslate())/u,a!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);const s=this,{params:a,wrapperEl:l}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const c=s.minTranslate(),u=s.maxTranslate();let h;if(h=r&&e>c?c:r&&e<u?u:e,s.updateProgress(h),a.cssMode){const e=s.isHorizontal();if(0===t)l[e?"scrollLeft":"scrollTop"]=-h;else{if(!s.support.smoothScroll)return(0,o.t)({swiper:s,targetPosition:-h,side:e?"left":"top"}),!0;l.scrollTo({[e?"left":"top"]:-h,behavior:"smooth"})}return!0}return 0===t?(s.setTransition(0),s.setTranslate(h),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(h),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}};function b(e){let{swiper:t,runCallbacks:n,direction:r,step:i}=e;const{activeIndex:o,previousIndex:s}=t;let a=r;if(a||(a=o>s?"next":o<s?"prev":"reset"),t.emit(`transition${i}`),n&&o!==s){if("reset"===a)return void t.emit(`slideResetTransition${i}`);t.emit(`slideChangeTransition${i}`),"next"===a?t.emit(`slideNextTransition${i}`):t.emit(`slidePrevTransition${i}`)}}var w={slideTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===n&&(n=!0),"string"===typeof e&&(e=parseInt(e,10));const s=this;let a=e;a<0&&(a=0);const{params:l,snapGrid:c,slidesGrid:u,previousIndex:h,activeIndex:d,rtlTranslate:p,wrapperEl:f,enabled:m}=s;if(!m&&!r&&!i||s.destroyed||s.animating&&l.preventInteractionOnTransition)return!1;"undefined"===typeof t&&(t=s.params.speed);const g=Math.min(s.params.slidesPerGroupSkip,a);let y=g+Math.floor((a-g)/s.params.slidesPerGroup);y>=c.length&&(y=c.length-1);const v=-c[y];if(l.normalizeSlideIndex)for(let o=0;o<u.length;o+=1){const e=-Math.floor(100*v),t=Math.floor(100*u[o]),n=Math.floor(100*u[o+1]);"undefined"!==typeof u[o+1]?e>=t&&e<n-(n-t)/2?a=o:e>=t&&e<n&&(a=o+1):e>=t&&(a=o)}if(s.initialized&&a!==d){if(!s.allowSlideNext&&(p?v>s.translate&&v>s.minTranslate():v<s.translate&&v<s.minTranslate()))return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(d||0)!==a)return!1}let _;a!==(h||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(v),_=a>d?"next":a<d?"prev":"reset";const b=s.virtual&&s.params.virtual.enabled;if(!(b&&i)&&(p&&-v===s.translate||!p&&v===s.translate))return s.updateActiveIndex(a),l.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==l.effect&&s.setTranslate(v),"reset"!==_&&(s.transitionStart(n,_),s.transitionEnd(n,_)),!1;if(l.cssMode){const e=s.isHorizontal(),n=p?v:-v;if(0===t)b&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),b&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[e?"scrollLeft":"scrollTop"]=n})):f[e?"scrollLeft":"scrollTop"]=n,b&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return(0,o.t)({swiper:s,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,_),0===t?s.transitionEnd(n,_):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,_))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){if(void 0===e&&(e=0),void 0===n&&(n=!0),"string"===typeof e){e=parseInt(e,10)}const i=this;if(i.destroyed)return;"undefined"===typeof t&&(t=i.params.speed);const o=i.grid&&i.params.grid&&i.params.grid.rows>1;let s=e;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)s+=i.virtual.slidesBefore;else{let e;if(o){const t=s*i.params.grid.rows;e=i.slides.filter(e=>1*e.getAttribute("data-swiper-slide-index")===t)[0].column}else e=i.getSlideIndexByData(s);const t=o?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:n}=i.params;let a=i.params.slidesPerView;"auto"===a?a=i.slidesPerViewDynamic():(a=Math.ceil(parseFloat(i.params.slidesPerView,10)),n&&a%2===0&&(a+=1));let l=t-e<a;if(n&&(l=l||e<Math.ceil(a/2)),r&&n&&"auto"!==i.params.slidesPerView&&!o&&(l=!1),l){const r=n?e<i.activeIndex?"prev":"next":e-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:r,slideTo:!0,activeSlideIndex:"next"===r?e+1:e-t+1,slideRealIndex:"next"===r?i.realIndex:void 0})}if(o){const e=s*i.params.grid.rows;s=i.slides.filter(t=>1*t.getAttribute("data-swiper-slide-index")===e)[0].column}else s=i.getSlideIndexByData(s)}return requestAnimationFrame(()=>{i.slideTo(s,t,n,r)}),i},slideNext:function(e,t,n){void 0===t&&(t=!0);const r=this,{enabled:i,params:o,animating:s}=r;if(!i||r.destroyed)return r;"undefined"===typeof e&&(e=r.params.speed);let a=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<o.slidesPerGroupSkip?1:a,c=r.virtual&&o.virtual.enabled;if(o.loop){if(s&&!c&&o.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,e,t,n)}),!0}return o.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===t&&(t=!0);const r=this,{params:i,snapGrid:o,slidesGrid:s,rtlTranslate:a,enabled:l,animating:c}=r;if(!l||r.destroyed)return r;"undefined"===typeof e&&(e=r.params.speed);const u=r.virtual&&i.virtual.enabled;if(i.loop){if(c&&!u&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}function h(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=h(a?r.translate:-r.translate),p=o.map(e=>h(e));let f=o[p.indexOf(d)-1];if("undefined"===typeof f&&i.cssMode){let e;o.forEach((t,n)=>{d>=t&&(e=n)}),"undefined"!==typeof e&&(f=o[e>0?e-1:e])}let m=0;if("undefined"!==typeof f&&(m=s.indexOf(f),m<0&&(m=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(m=m-r.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return i.loop&&0===r.activeIndex&&i.cssMode?(requestAnimationFrame(()=>{r.slideTo(m,e,t,n)}),!0):r.slideTo(m,e,t,n)},slideReset:function(e,t,n){void 0===t&&(t=!0);const r=this;if(!r.destroyed)return"undefined"===typeof e&&(e=r.params.speed),r.slideTo(r.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===t&&(t=!0),void 0===r&&(r=.5);const i=this;if(i.destroyed)return;"undefined"===typeof e&&(e=i.params.speed);let o=i.activeIndex;const s=Math.min(i.params.slidesPerGroupSkip,o),a=s+Math.floor((o-s)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const e=i.snapGrid[a];l-e>(i.snapGrid[a+1]-e)*r&&(o+=i.params.slidesPerGroup)}else{const e=i.snapGrid[a-1];l-e<=(i.snapGrid[a]-e)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,e,t,n)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,s=e.clickedIndex;const a=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;i=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=e.getSlideIndex((0,o.e)(n,`${a}[data-swiper-slide-index="${i}"]`)[0]),(0,o.n)(()=>{e.slideTo(s)})):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=e.getSlideIndex((0,o.e)(n,`${a}[data-swiper-slide-index="${i}"]`)[0]),(0,o.n)(()=>{e.slideTo(s)})):e.slideTo(s)}else e.slideTo(s)}};var x={loopCreate:function(e){const t=this,{params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const i=()=>{(0,o.e)(r,`.${n.slideClass}, swiper-slide`).forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)})},s=t.grid&&n.grid&&n.grid.rows>1,a=n.slidesPerGroup*(s?n.grid.rows:1),l=t.slides.length%a!==0,c=s&&t.slides.length%n.grid.rows!==0,u=e=>{for(let r=0;r<e;r+=1){const e=t.isElement?(0,o.c)("swiper-slide",[n.slideBlankClass]):(0,o.c)("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(e)}};if(l){if(n.loopAddBlankSlides){u(a-t.slides.length%a),t.recalcSlides(),t.updateSlides()}else(0,o.u)("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(n.loopAddBlankSlides){u(n.grid.rows-t.slides.length%n.grid.rows),t.recalcSlides(),t.updateSlides()}else(0,o.u)("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:r,setTranslate:i,activeSlideIndex:s,byController:a,byMousewheel:l}=void 0===e?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:u,allowSlidePrev:h,allowSlideNext:d,slidesEl:p,params:f}=c,{centeredSlides:m}=f;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&f.virtual.enabled)return n&&(f.centeredSlides||0!==c.snapIndex?f.centeredSlides&&c.snapIndex<f.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0):c.slideTo(c.virtual.slides.length,0,!1,!0)),c.allowSlidePrev=h,c.allowSlideNext=d,void c.emit("loopFix");let g=f.slidesPerView;"auto"===g?g=c.slidesPerViewDynamic():(g=Math.ceil(parseFloat(f.slidesPerView,10)),m&&g%2===0&&(g+=1));const y=f.slidesPerGroupAuto?g:f.slidesPerGroup;let v=y;v%y!==0&&(v+=y-v%y),v+=f.loopAdditionalSlides,c.loopedSlides=v;const _=c.grid&&f.grid&&f.grid.rows>1;u.length<g+v?(0,o.u)("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):_&&"row"===f.grid.fill&&(0,o.u)("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const b=[],w=[];let x=c.activeIndex;"undefined"===typeof s?s=c.getSlideIndex(u.filter(e=>e.classList.contains(f.slideActiveClass))[0]):x=s;const S="next"===r||!r,E="prev"===r||!r;let T=0,M=0;const A=_?Math.ceil(u.length/f.grid.rows):u.length,k=(_?u[s].column:s)+(m&&"undefined"===typeof i?-g/2+.5:0);if(k<v){T=Math.max(v-k,y);for(let e=0;e<v-k;e+=1){const t=e-Math.floor(e/A)*A;if(_){const e=A-t-1;for(let t=u.length-1;t>=0;t-=1)u[t].column===e&&b.push(t)}else b.push(A-t-1)}}else if(k+g>A-v){M=Math.max(k-(A-2*v),y);for(let e=0;e<M;e+=1){const t=e-Math.floor(e/A)*A;_?u.forEach((e,n)=>{e.column===t&&w.push(n)}):w.push(t)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),E&&b.forEach(e=>{u[e].swiperLoopMoveDOM=!0,p.prepend(u[e]),u[e].swiperLoopMoveDOM=!1}),S&&w.forEach(e=>{u[e].swiperLoopMoveDOM=!0,p.append(u[e]),u[e].swiperLoopMoveDOM=!1}),c.recalcSlides(),"auto"===f.slidesPerView?c.updateSlides():_&&(b.length>0&&E||w.length>0&&S)&&c.slides.forEach((e,t)=>{c.grid.updateSlide(t,e,c.slides)}),f.watchSlidesProgress&&c.updateSlidesOffset(),n)if(b.length>0&&E){if("undefined"===typeof t){const e=c.slidesGrid[x],t=c.slidesGrid[x+T]-e;l?c.setTranslate(c.translate-t):(c.slideTo(x+Math.ceil(T),0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else if(i){const e=_?b.length/f.grid.rows:b.length;c.slideTo(c.activeIndex+e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(w.length>0&&S)if("undefined"===typeof t){const e=c.slidesGrid[x],t=c.slidesGrid[x-M]-e;l?c.setTranslate(c.translate-t):(c.slideTo(x-M,0,!1,!0),i&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else{const e=_?w.length/f.grid.rows:w.length;c.slideTo(c.activeIndex-e,0,!1,!0)}if(c.allowSlidePrev=h,c.allowSlideNext=d,c.controller&&c.controller.control&&!a){const e={slideRealIndex:t,direction:r,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===f.slidesPerView&&n})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...e,slideTo:c.controller.control.params.slidesPerView===f.slidesPerView&&n})}c.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach(e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;r[t]=e}),e.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),r.forEach(e=>{n.append(e)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}};function S(e,t,n){const r=(0,i.a)(),{params:o}=e,s=o.edgeSwipeDetection,a=o.edgeSwipeThreshold;return!s||!(n<=a||n>=r.innerWidth-a)||"prevent"===s&&(t.preventDefault(),!0)}function E(e){const t=this,n=(0,i.g)();let r=e;r.originalEvent&&(r=r.originalEvent);const s=t.touchEventsData;if("pointerdown"===r.type){if(null!==s.pointerId&&s.pointerId!==r.pointerId)return;s.pointerId=r.pointerId}else"touchstart"===r.type&&1===r.targetTouches.length&&(s.touchId=r.targetTouches[0].identifier);if("touchstart"===r.type)return void S(t,r,r.targetTouches[0].pageX);const{params:a,touches:l,enabled:c}=t;if(!c)return;if(!a.simulateTouch&&"mouse"===r.pointerType)return;if(t.animating&&a.preventInteractionOnTransition)return;!t.animating&&a.cssMode&&a.loop&&t.loopFix();let u=r.target;if("wrapper"===a.touchEventsTarget&&!(0,o.v)(u,t.wrapperEl))return;if("which"in r&&3===r.which)return;if("button"in r&&r.button>0)return;if(s.isTouched&&s.isMoved)return;const h=!!a.noSwipingClass&&""!==a.noSwipingClass,d=r.composedPath?r.composedPath():r.path;h&&r.target&&r.target.shadowRoot&&d&&(u=d[0]);const p=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,f=!(!r.target||!r.target.shadowRoot);if(a.noSwiping&&(f?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===(0,i.g)()||n===(0,i.a)())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(p,u):u.closest(p)))return void(t.allowClick=!0);if(a.swipeHandler&&!u.closest(a.swipeHandler))return;l.currentX=r.pageX,l.currentY=r.pageY;const m=l.currentX,g=l.currentY;if(!S(t,r,m))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=m,l.startY=g,s.touchStartTime=(0,o.d)(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(s.allowThresholdMove=!1);let y=!0;u.matches(s.focusableElements)&&(y=!1,"SELECT"===u.nodeName&&(s.isTouched=!1)),n.activeElement&&n.activeElement.matches(s.focusableElements)&&n.activeElement!==u&&("mouse"===r.pointerType||"mouse"!==r.pointerType&&!u.matches(s.focusableElements))&&n.activeElement.blur();const v=y&&t.allowTouchMove&&a.touchStartPreventDefault;!a.touchStartForcePreventDefault&&!v||u.isContentEditable||r.preventDefault(),a.freeMode&&a.freeMode.enabled&&t.freeMode&&t.animating&&!a.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",r)}function T(e){const t=(0,i.g)(),n=this,r=n.touchEventsData,{params:s,touches:a,rtlTranslate:l,enabled:c}=n;if(!c)return;if(!s.simulateTouch&&"mouse"===e.pointerType)return;let u,h=e;if(h.originalEvent&&(h=h.originalEvent),"pointermove"===h.type){if(null!==r.touchId)return;if(h.pointerId!==r.pointerId)return}if("touchmove"===h.type){if(u=[...h.changedTouches].filter(e=>e.identifier===r.touchId)[0],!u||u.identifier!==r.touchId)return}else u=h;if(!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",h));const d=u.pageX,p=u.pageY;if(h.preventedByNestedSwiper)return a.startX=d,void(a.startY=p);if(!n.allowTouchMove)return h.target.matches(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(a,{startX:d,startY:p,currentX:d,currentY:p}),r.touchStartTime=(0,o.d)()));if(s.touchReleaseOnEdges&&!s.loop)if(n.isVertical()){if(p<a.startY&&n.translate<=n.maxTranslate()||p>a.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(d<a.startX&&n.translate<=n.maxTranslate()||d>a.startX&&n.translate>=n.minTranslate())return;if(t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==h.target&&"mouse"!==h.pointerType&&t.activeElement.blur(),t.activeElement&&h.target===t.activeElement&&h.target.matches(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);r.allowTouchCallbacks&&n.emit("touchMove",h),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=d,a.currentY=p;const f=a.currentX-a.startX,m=a.currentY-a.startY;if(n.params.threshold&&Math.sqrt(f**2+m**2)<n.params.threshold)return;if("undefined"===typeof r.isScrolling){let e;n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?r.isScrolling=!1:f*f+m*m>=25&&(e=180*Math.atan2(Math.abs(m),Math.abs(f))/Math.PI,r.isScrolling=n.isHorizontal()?e>s.touchAngle:90-e>s.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",h),"undefined"===typeof r.startMoving&&(a.currentX===a.startX&&a.currentY===a.startY||(r.startMoving=!0)),r.isScrolling||"touchmove"===h.type&&r.preventTouchMoveFromPointerMove)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!s.cssMode&&h.cancelable&&h.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&h.stopPropagation();let g=n.isHorizontal()?f:m,y=n.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;s.oneWayMovement&&(g=Math.abs(g)*(l?1:-1),y=Math.abs(y)*(l?1:-1)),a.diff=g,g*=s.touchRatio,l&&(g=-g,y=-y);const v=n.touchesDirection;n.swipeDirection=g>0?"prev":"next",n.touchesDirection=y>0?"prev":"next";const _=n.params.loop&&!s.cssMode,b="next"===n.touchesDirection&&n.allowSlideNext||"prev"===n.touchesDirection&&n.allowSlidePrev;if(!r.isMoved){if(_&&b&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(e)}r.allowMomentumBounce=!1,!s.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",h)}if((new Date).getTime(),r.isMoved&&r.allowThresholdMove&&v!==n.touchesDirection&&_&&b&&Math.abs(g)>=1)return Object.assign(a,{startX:d,startY:p,currentX:d,currentY:p,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,void(r.startTranslate=r.currentTranslate);n.emit("sliderMove",h),r.isMoved=!0,r.currentTranslate=g+r.startTranslate;let w=!0,x=s.resistanceRatio;if(s.touchReleaseOnEdges&&(x=0),g>0?(_&&b&&r.allowThresholdMove&&r.currentTranslate>(s.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-("auto"!==s.slidesPerView&&n.slides.length-s.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(w=!1,s.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+g)**x))):g<0&&(_&&b&&r.allowThresholdMove&&r.currentTranslate<(s.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+("auto"!==s.slidesPerView&&n.slides.length-s.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===s.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(w=!1,s.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-g)**x))),w&&(h.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),s.threshold>0){if(!(Math.abs(g)>s.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,r.currentTranslate=r.startTranslate,void(a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY)}s.followFinger&&!s.cssMode&&((s.freeMode&&s.freeMode.enabled&&n.freeMode||s.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function M(e){const t=this,n=t.touchEventsData;let r,i=e;i.originalEvent&&(i=i.originalEvent);if("touchend"===i.type||"touchcancel"===i.type){if(r=[...i.changedTouches].filter(e=>e.identifier===n.touchId)[0],!r||r.identifier!==n.touchId)return}else{if(null!==n.touchId)return;if(i.pointerId!==n.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)){if(!(["pointercancel","contextmenu"].includes(i.type)&&(t.browser.isSafari||t.browser.isWebView)))return}n.pointerId=null,n.touchId=null;const{params:s,touches:a,rtlTranslate:l,slidesGrid:c,enabled:u}=t;if(!u)return;if(!s.simulateTouch&&"mouse"===i.pointerType)return;if(n.allowTouchCallbacks&&t.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&s.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);s.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const h=(0,o.d)(),d=h-n.touchStartTime;if(t.allowClick){const e=i.path||i.composedPath&&i.composedPath();t.updateClickedSlide(e&&e[0]||i.target,e),t.emit("tap click",i),d<300&&h-n.lastClickTime<300&&t.emit("doubleTap doubleClick",i)}if(n.lastClickTime=(0,o.d)(),(0,o.n)(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||0===a.diff&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let p;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,p=s.followFinger?l?t.translate:-t.translate:-n.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:p});const f=p>=-t.maxTranslate()&&!t.params.loop;let m=0,g=t.slidesSizesGrid[0];for(let o=0;o<c.length;o+=o<s.slidesPerGroupSkip?1:s.slidesPerGroup){const e=o<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;"undefined"!==typeof c[o+e]?(f||p>=c[o]&&p<c[o+e])&&(m=o,g=c[o+e]-c[o]):(f||p>=c[o])&&(m=o,g=c[c.length-1]-c[c.length-2])}let y=null,v=null;s.rewind&&(t.isBeginning?v=s.virtual&&s.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(y=0));const _=(p-c[m])/g,b=m<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(d>s.longSwipesMs){if(!s.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(_>=s.longSwipesRatio?t.slideTo(s.rewind&&t.isEnd?y:m+b):t.slideTo(m)),"prev"===t.swipeDirection&&(_>1-s.longSwipesRatio?t.slideTo(m+b):null!==v&&_<0&&Math.abs(_)>s.longSwipesRatio?t.slideTo(v):t.slideTo(m))}else{if(!s.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(i.target===t.navigation.nextEl||i.target===t.navigation.prevEl)?i.target===t.navigation.nextEl?t.slideTo(m+b):t.slideTo(m):("next"===t.swipeDirection&&t.slideTo(null!==y?y:m+b),"prev"===t.swipeDirection&&t.slideTo(null!==v?v:m))}}function A(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=e,s=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const a=s&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||a?e.params.loop&&!s?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function k(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function C(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const o=e.maxTranslate()-e.minTranslate();i=0===o?0:(e.translate-e.minTranslate())/o,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function I(e){const t=this;m(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function P(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const O=(e,t)=>{const n=(0,i.g)(),{params:r,el:o,wrapperEl:s,device:a}=e,l=!!r.nested,c="on"===t?"addEventListener":"removeEventListener",u=t;o&&"string"!==typeof o&&(n[c]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:l}),o[c]("touchstart",e.onTouchStart,{passive:!1}),o[c]("pointerdown",e.onTouchStart,{passive:!1}),n[c]("touchmove",e.onTouchMove,{passive:!1,capture:l}),n[c]("pointermove",e.onTouchMove,{passive:!1,capture:l}),n[c]("touchend",e.onTouchEnd,{passive:!0}),n[c]("pointerup",e.onTouchEnd,{passive:!0}),n[c]("pointercancel",e.onTouchEnd,{passive:!0}),n[c]("touchcancel",e.onTouchEnd,{passive:!0}),n[c]("pointerout",e.onTouchEnd,{passive:!0}),n[c]("pointerleave",e.onTouchEnd,{passive:!0}),n[c]("contextmenu",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&o[c]("click",e.onClick,!0),r.cssMode&&s[c]("scroll",e.onScroll),r.updateOnWindowResize?e[u](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",A,!0):e[u]("observerUpdate",A,!0),o[c]("load",e.onLoad,{capture:!0}))};const R=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var D={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function L(e,t){return function(n){void 0===n&&(n={});const r=Object.keys(n)[0],i=n[r];"object"===typeof i&&null!==i?(!0===e[r]&&(e[r]={enabled:!0}),"navigation"===r&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),r in e&&"enabled"in i?("object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),(0,o.w)(t,n)):(0,o.w)(t,n)):(0,o.w)(t,n)}}const N={eventsEmitter:d,update:v,translate:_,transition:{setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),b({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),b({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:w,loop:x,grabCursor:{setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}},events:{attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=E.bind(e),e.onTouchMove=T.bind(e),e.onTouchEnd=M.bind(e),e.onDocumentTouchStart=P.bind(e),t.cssMode&&(e.onScroll=C.bind(e)),e.onClick=k.bind(e),e.onLoad=I.bind(e),O(e,"on")},detachEvents:function(){O(this,"off")}},breakpoints:{setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:r,el:i}=e,s=r.breakpoints;if(!s||s&&0===Object.keys(s).length)return;const a=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(!a||e.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||e.originalParams,c=R(e,r),u=R(e,l),h=e.params.grabCursor,d=l.grabCursor,p=r.enabled;c&&!u?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),e.emitContainerClasses()):!c&&u&&(i.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===r.grid.fill)&&i.classList.add(`${r.containerModifierClass}grid-column`),e.emitContainerClasses()),h&&!d?e.unsetGrabCursor():!h&&d&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(t=>{if("undefined"===typeof l[t])return;const n=r[t]&&r[t].enabled,i=l[t]&&l[t].enabled;n&&!i&&e[t].disable(),!n&&i&&e[t].enable()});const f=l.direction&&l.direction!==r.direction,m=r.loop&&(l.slidesPerView!==r.slidesPerView||f),g=r.loop;f&&n&&e.changeDirection(),(0,o.w)(e.params,l);const y=e.params.enabled,v=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),p&&!y?e.disable():!p&&y&&e.enable(),e.currentBreakpoint=a,e.emit("_beforeBreakpoint",l),n&&(m?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!g&&v?(e.loopCreate(t),e.updateSlides()):g&&!v&&e.loopDestroy()),e.emit("breakpoint",l)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let r=!1;const o=(0,i.a)(),s="window"===t?o.innerHeight:n.clientHeight,a=Object.keys(e).map(e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:s*t,point:e}}return{value:e,point:e}});a.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let i=0;i<a.length;i+=1){const{point:e,value:s}=a[i];"window"===t?o.matchMedia(`(min-width: ${s}px)`).matches&&(r=e):s<=n.clientWidth&&(r=e)}return r||"max"}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,el:i,device:o}=e,s=function(e,t){const n=[];return e.forEach(e=>{"object"===typeof e?Object.keys(e).forEach(r=>{e[r]&&n.push(t+r)}):"string"===typeof e&&n.push(t+e)}),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...s),i.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!==typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}}},F={};class z{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?t=r[0]:[e,t]=r,t||(t={}),t=(0,o.w)({},t),e&&!t.el&&(t.el=e);const a=(0,i.g)();if(t.el&&"string"===typeof t.el&&a.querySelectorAll(t.el).length>1){const e=[];return a.querySelectorAll(t.el).forEach(n=>{const r=(0,o.w)({},t,{el:n});e.push(new z(r))}),e}const l=this;l.__swiper__=!0,l.support=c(),l.device=u({userAgent:t.userAgent}),l.browser=h(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],t.modules&&Array.isArray(t.modules)&&l.modules.push(...t.modules);const d={};l.modules.forEach(e=>{e({params:t,swiper:l,extendParams:L(t,d),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const p=(0,o.w)({},D,d);return l.params=(0,o.w)({},p,F,t),l.originalParams=(0,o.w)({},l.params),l.passedParams=(0,o.w)({},t),l.params&&l.params.on&&Object.keys(l.params.on).forEach(e=>{l.on(e,l.params.on[e])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===l.params.direction,isVertical:()=>"vertical"===l.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,r=(0,o.e)(t,`.${n.slideClass}, swiper-slide`),i=(0,o.h)(r[0]);return(0,o.h)(e)-i}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>1*t.getAttribute("data-swiper-slide-index")===e)[0])}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=(0,o.e)(e,`.${t.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:o,size:s,activeIndex:a}=this;let l=1;if("number"===typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=r[a]?Math.ceil(r[a].swiperSlideSize):0;for(let n=a+1;n<r.length;n+=1)r[n]&&!e&&(t+=Math.ceil(r[n].swiperSlideSize),l+=1,t>s&&(e=!0));for(let n=a-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>s&&(e=!0))}else if("current"===e)for(let c=a+1;c<r.length;c+=1){(t?i[c]+o[c]-i[a]<s:i[c]-i[a]<s)&&(l+=1)}else for(let c=a-1;c>=0;c-=1){i[a]-i[c]<s&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(t=>{t.complete&&m(e,t)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(t.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||r()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove(`${n.params.containerModifierClass}${r}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(t=>{"vertical"===e?t.style.width="":t.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"===typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(r())}return(0,o.e)(n,r())[0]})();return!i&&t.params.createElements&&(i=(0,o.c)("div",t.params.wrapperClass),n.append(i),(0,o.e)(n,`.${t.params.slideClass}`).forEach(e=>{i.append(e)})),Object.assign(t,{el:n,wrapperEl:i,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:i,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===(0,o.p)(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===(0,o.p)(n,"direction")),wrongRTL:"-webkit-box"===(0,o.p)(i,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(e=>{e.complete?m(t,e):e.addEventListener("load",e=>{m(t,e.target)})}),y(t),t.initialized=!0,y(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:r,el:i,wrapperEl:s,slides:a}=n;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i&&"string"!==typeof i&&i.removeAttribute("style"),s&&s.removeAttribute("style"),a&&a.length&&a.forEach(e=>{e.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(e=>{n.off(e)}),!1!==e&&(n.el&&"string"!==typeof n.el&&(n.el.swiper=null),(0,o.x)(n)),n.destroyed=!0),null}static extendDefaults(e){(0,o.w)(F,e)}static get extendedDefaults(){return F}static get defaults(){return D}static installModule(e){z.prototype.__modules__||(z.prototype.__modules__=[]);const t=z.prototype.__modules__;"function"===typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(e=>z.installModule(e)),z):(z.installModule(e),z)}}Object.keys(N).forEach(e=>{Object.keys(N[e]).forEach(t=>{z.prototype[t]=N[e][t]})}),z.use([function(e){let{swiper:t,on:n,emit:r}=e;const o=(0,i.a)();let s=null,a=null;const l=()=>{t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},c=()=>{t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",()=>{t.params.resizeObserver&&"undefined"!==typeof o.ResizeObserver?t&&!t.destroyed&&t.initialized&&(s=new ResizeObserver(e=>{a=o.requestAnimationFrame(()=>{const{width:n,height:r}=t;let i=n,o=r;e.forEach(e=>{let{contentBoxSize:n,contentRect:r,target:s}=e;s&&s!==t.el||(i=r?r.width:(n[0]||n).inlineSize,o=r?r.height:(n[0]||n).blockSize)}),i===n&&o===r||l()})}),s.observe(t.el)):(o.addEventListener("resize",l),o.addEventListener("orientationchange",c))}),n("destroy",()=>{a&&o.cancelAnimationFrame(a),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null),o.removeEventListener("resize",l),o.removeEventListener("orientationchange",c)})},function(e){let{swiper:t,extendParams:n,on:r,emit:s}=e;const a=[],l=(0,i.a)(),c=function(e,n){void 0===n&&(n={});const r=new(l.MutationObserver||l.WebkitMutationObserver)(e=>{if(t.__preventObserver__)return;if(1===e.length)return void s("observerUpdate",e[0]);const n=function(){s("observerUpdate",e[0])};l.requestAnimationFrame?l.requestAnimationFrame(n):l.setTimeout(n,0)});r.observe(e,{attributes:"undefined"===typeof n.attributes||n.attributes,childList:t.isElement||("undefined"===typeof n.childList||n).childList,characterData:"undefined"===typeof n.characterData||n.characterData}),a.push(r)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",()=>{if(t.params.observer){if(t.params.observeParents){const e=(0,o.a)(t.hostEl);for(let t=0;t<e.length;t+=1)c(e[t])}c(t.hostEl,{childList:t.params.observeSlideChildren}),c(t.wrapperEl,{attributes:!1})}}),r("destroy",()=>{a.forEach(e=>{e.disconnect()}),a.splice(0,a.length)})}]);const U=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function j(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function B(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>n.indexOf(e)<0).forEach(n=>{"undefined"===typeof e[n]?e[n]=t[n]:j(t[n])&&j(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:B(e[n],t[n]):e[n]=t[n]})}function V(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function H(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function $(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function Y(e){void 0===e&&(e="");const t=e.split(" ").map(e=>e.trim()).filter(e=>!!e),n=[];return t.forEach(e=>{n.indexOf(e)<0&&n.push(e)}),n.join(" ")}function G(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}function W(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function K(e){const t=[];return r.Children.toArray(e).forEach(e=>{W(e)?t.push(e):e.props&&e.props.children&&K(e.props.children).forEach(e=>t.push(e))}),t}function Z(e){const t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return r.Children.toArray(e).forEach(e=>{if(W(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){const r=K(e.props.children);r.length>0?r.forEach(e=>t.push(e)):n["container-end"].push(e)}else n["container-end"].push(e)}),{slides:t,slots:n}}function J(e,t){return"undefined"===typeof window?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)}const X=(0,r.createContext)(null),Q=(0,r.createContext)(null),ee=(0,r.forwardRef)(function(e,t){let{className:n,tag:i="div",wrapperTag:o="div",children:s,onSwiper:a,...l}=void 0===e?{}:e,c=!1;const[u,h]=(0,r.useState)("swiper"),[d,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(!1),g=(0,r.useRef)(!1),y=(0,r.useRef)(null),v=(0,r.useRef)(null),_=(0,r.useRef)(null),b=(0,r.useRef)(null),w=(0,r.useRef)(null),x=(0,r.useRef)(null),S=(0,r.useRef)(null),E=(0,r.useRef)(null),{params:T,passedParams:M,rest:A,events:k}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const n={on:{}},r={},i={};B(n,D),n._emitClasses=!0,n.init=!1;const o={},s=U.map(e=>e.replace(/_/,"")),a=Object.assign({},e);return Object.keys(a).forEach(a=>{"undefined"!==typeof e[a]&&(s.indexOf(a)>=0?j(e[a])?(n[a]={},i[a]={},B(n[a],e[a]),B(i[a],e[a])):(n[a]=e[a],i[a]=e[a]):0===a.search(/on[A-Z]/)&&"function"===typeof e[a]?t?r[`${a[2].toLowerCase()}${a.substr(3)}`]=e[a]:n.on[`${a[2].toLowerCase()}${a.substr(3)}`]=e[a]:o[a]=e[a])}),["navigation","pagination","scrollbar"].forEach(e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]}),{params:n,passedParams:i,rest:o,events:r}}(l),{slides:C,slots:I}=Z(s),P=()=>{m(!f)};Object.assign(T.on,{_containerClasses(e,t){h(t)}});const O=()=>{Object.assign(T.on,k),c=!0;const e={...T};if(delete e.wrapperClass,v.current=new z(e),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=C;const e={cache:!1,slides:C,renderExternal:p,renderExternalUpdate:!1};B(v.current.params.virtual,e),B(v.current.originalParams.virtual,e)}};y.current||O(),v.current&&v.current.on("_beforeBreakpoint",P);return(0,r.useEffect)(()=>()=>{v.current&&v.current.off("_beforeBreakpoint",P)}),(0,r.useEffect)(()=>{!g.current&&v.current&&(v.current.emitSlidesClasses(),g.current=!0)}),J(()=>{if(t&&(t.current=y.current),y.current)return v.current.destroyed&&O(),function(e,t){let{el:n,nextEl:r,prevEl:i,paginationEl:o,scrollbarEl:s,swiper:a}=e;V(t)&&r&&i&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),H(t)&&o&&(a.params.pagination.el=o,a.originalParams.pagination.el=o),$(t)&&s&&(a.params.scrollbar.el=s,a.originalParams.scrollbar.el=s),a.init(n)}({el:y.current,nextEl:w.current,prevEl:x.current,paginationEl:S.current,scrollbarEl:E.current,swiper:v.current},T),a&&!v.current.destroyed&&a(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}},[]),J(()=>{!c&&k&&v.current&&Object.keys(k).forEach(e=>{v.current.on(e,k[e])});const e=function(e,t,n,r,i){const o=[];if(!t)return o;const s=e=>{o.indexOf(e)<0&&o.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&s("children"),r.length!==n.length&&s("children")}return U.filter(e=>"_"===e[0]).map(e=>e.replace(/_/,"")).forEach(n=>{if(n in e&&n in t)if(j(e[n])&&j(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?s(n):(r.forEach(r=>{e[n][r]!==t[n][r]&&s(n)}),i.forEach(r=>{e[n][r]!==t[n][r]&&s(n)}))}else e[n]!==t[n]&&s(n)}),o}(M,_.current,C,b.current,e=>e.key);return _.current=M,b.current=C,e.length&&v.current&&!v.current.destroyed&&function(e){let{swiper:t,slides:n,passedParams:r,changedParams:i,nextEl:o,prevEl:s,scrollbarEl:a,paginationEl:l}=e;const c=i.filter(e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e),{params:u,pagination:h,navigation:d,scrollbar:p,virtual:f,thumbs:m}=t;let g,y,v,_,b,w,x,S;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&u.thumbs&&(!u.thumbs.swiper||u.thumbs.swiper.destroyed)&&(g=!0),i.includes("controller")&&r.controller&&r.controller.control&&u.controller&&!u.controller.control&&(y=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(u.pagination||!1===u.pagination)&&h&&!h.el&&(v=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(u.scrollbar||!1===u.scrollbar)&&p&&!p.el&&(_=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||s)&&(r.navigation.nextEl||o)&&(u.navigation||!1===u.navigation)&&d&&!d.prevEl&&!d.nextEl&&(b=!0);const E=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),u[e].prevEl=void 0,u[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),u[e].el=void 0,t[e].el=void 0))};i.includes("loop")&&t.isElement&&(u.loop&&!r.loop?w=!0:!u.loop&&r.loop?x=!0:S=!0),c.forEach(e=>{if(j(u[e])&&j(r[e]))Object.assign(u[e],r[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in r[e])||r[e].enabled||E(e);else{const t=r[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?u[e]=r[e]:!1===t&&E(e)}}),c.includes("controller")&&!y&&t.controller&&t.controller.control&&u.controller&&u.controller.control&&(t.controller.control=u.controller.control),i.includes("children")&&n&&f&&u.virtual.enabled?(f.slides=n,f.update(!0)):i.includes("virtual")&&f&&u.virtual.enabled&&(n&&(f.slides=n),f.update(!0)),i.includes("children")&&n&&u.loop&&(S=!0),g&&m.init()&&m.update(!0);y&&(t.controller.control=u.controller.control),v&&(!t.isElement||l&&"string"!==typeof l||(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(u.pagination.el=l),h.init(),h.render(),h.update()),_&&(!t.isElement||a&&"string"!==typeof a||(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(u.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),b&&(t.isElement&&(o&&"string"!==typeof o||(o=document.createElement("div"),o.classList.add("swiper-button-next"),o.innerHTML=t.hostEl.constructor.nextButtonSvg,o.part.add("button-next"),t.el.appendChild(o)),s&&"string"!==typeof s||(s=document.createElement("div"),s.classList.add("swiper-button-prev"),s.innerHTML=t.hostEl.constructor.prevButtonSvg,s.part.add("button-prev"),t.el.appendChild(s))),o&&(u.navigation.nextEl=o),s&&(u.navigation.prevEl=s),d.init(),d.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&t.changeDirection(r.direction,!1),(w||S)&&t.loopDestroy(),(x||S)&&t.loopCreate(),t.update()}({swiper:v.current,slides:C,passedParams:M,changedParams:e,nextEl:w.current,prevEl:x.current,scrollbarEl:E.current,paginationEl:S.current}),()=>{k&&v.current&&Object.keys(k).forEach(e=>{v.current.off(e,k[e])})}}),J(()=>{var e;!(e=v.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},[d]),r.createElement(i,q({ref:y,className:Y(`${u}${n?` ${n}`:""}`)},A),r.createElement(Q.Provider,{value:v.current},I["container-start"],r.createElement(o,{className:G(T.wrapperClass)},I["wrapper-start"],T.virtual?function(e,t,n){if(!n)return null;const i=e=>{let n=e;return e<0?n=t.length+e:n>=t.length&&(n-=t.length),n},o=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:s,to:a}=n,l=e.params.loop?-t.length:0,c=e.params.loop?2*t.length:t.length,u=[];for(let r=l;r<c;r+=1)r>=s&&r<=a&&u.push(t[i(r)]);return u.map((t,n)=>r.cloneElement(t,{swiper:e,style:o,key:t.props.virtualIndex||t.key||`slide-${n}`}))}(v.current,C,d):C.map((e,t)=>r.cloneElement(e,{swiper:v.current,swiperSlideIndex:t})),I["wrapper-end"]),V(T)&&r.createElement(r.Fragment,null,r.createElement("div",{ref:x,className:"swiper-button-prev"}),r.createElement("div",{ref:w,className:"swiper-button-next"})),$(T)&&r.createElement("div",{ref:E,className:"swiper-scrollbar"}),H(T)&&r.createElement("div",{ref:S,className:"swiper-pagination"}),I["container-end"]))});ee.displayName="Swiper";const te=(0,r.forwardRef)(function(e,t){let{tag:n="div",children:i,className:o="",swiper:s,zoom:a,lazy:l,virtualIndex:c,swiperSlideIndex:u,...h}=void 0===e?{}:e;const d=(0,r.useRef)(null),[p,f]=(0,r.useState)("swiper-slide"),[m,g]=(0,r.useState)(!1);function y(e,t,n){t===d.current&&f(n)}J(()=>{if("undefined"!==typeof u&&(d.current.swiperSlideIndex=u),t&&(t.current=d.current),d.current&&s){if(!s.destroyed)return s.on("_slideClass",y),()=>{s&&s.off("_slideClass",y)};"swiper-slide"!==p&&f("swiper-slide")}}),J(()=>{s&&d.current&&!s.destroyed&&f(s.getSlideClasses(d.current))},[s]);const v={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},_=()=>"function"===typeof i?i(v):i;return r.createElement(n,q({ref:d,className:Y(`${p}${o?` ${o}`:""}`),"data-swiper-slide-index":c,onLoad:()=>{g(!0)}},h),a&&r.createElement(X.Provider,{value:v},r.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof a?a:void 0},_(),l&&!m&&r.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&r.createElement(X.Provider,{value:v},_(),l&&!m&&r.createElement("div",{className:"swiper-lazy-preloader"})))});te.displayName="SwiperSlide"},63586(e,t,n){"use strict";n.d(t,{EU:()=>o,iL:()=>s,nE:()=>i,tu:()=>r});const r=e=>{e.suspense&&("number"!==typeof e.staleTime&&(e.staleTime=1e3),"number"===typeof e.cacheTime&&(e.cacheTime=Math.max(e.cacheTime,1e3)))},i=(e,t)=>e.isLoading&&e.isFetching&&!t,o=(e,t,n)=>(null==e?void 0:e.suspense)&&i(t,n),s=(e,t,n)=>t.fetchOptimistic(e).then(({data:t})=>{null==e.onSuccess||e.onSuccess(t),null==e.onSettled||e.onSettled(t,null)}).catch(t=>{n.clearReset(),null==e.onError||e.onError(t),null==e.onSettled||e.onSettled(void 0,t)})},63940(e,t,n){"use strict";n.d(t,{w:()=>zr});var r=n(18845),i=n(94837),o=n(46403),s=n(57726),a=n(93177),l=n(6810),c=n(19282),u=n(27879),h=n(64251),d=n(9600),p=n(57968),f=n(5915),m=n(31158),g=n(67607);function y(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return function(e,t){const n=(0,g.kg)(e);if(!n||(0,g.nt)(n))return!1;return!!t&&(n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search))}(e,n)||function(e,t){if(!t)return!1;return v(e)===v(t)}(e,r)}function v(e){return"/"===e[e.length-1]?e.slice(0,-1):e}var _=n(70125);var b=n(72808),w=n(59671),x=n(36227),S=n(74611),E=n(96747),T=n(91773),M=n(3594),A=n(43164),k=n(57500),C=n(35947),I=n(61221),P=n(85761);const O=r.O,R="sentryReplaySession",D="Unable to send Replay",L=15e4,N=5e3,F=2e7,z=36e5;var U=Object.defineProperty,j=(e,t,n)=>((e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!==typeof t?t+"":t,n),B=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(B||{});function V(e){const t=e?.host;return Boolean(t?.shadowRoot===e)}function H(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function $(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Y).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(n){return null}var t}function Y(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=$(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(n){}else if(function(e){return"selectorText"in e}(e)){let t=e.cssText;const n=e.selectorText.includes(":"),r="string"===typeof e.style.all&&e.style.all;if(r&&(t=function(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,i=r[n],o=r.getPropertyPriority(i);t+=`${i}:${r.getPropertyValue(i)}${o?" !important":""};`}return`${e.selectorText} { ${t} }`}(e)),n&&(t=function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(t)),n||r)return t}return t||e.cssText}class G{constructor(){j(this,"idNodeMap",new Map),j(this,"nodeMetaMap",new WeakMap)}getId(e){if(!e)return-1;const t=this.getMeta(e)?.id;return t??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function q({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function W({isMasked:e,element:t,value:n,maskInputFn:r}){let i=n||"";return e?(r&&(i=r(i,t)),"*".repeat(i.length)):i}function K(e){return e.toLowerCase()}function Z(e){return e.toUpperCase()}const J="__rrweb_original__";function X(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?K(t):null}function Q(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function ee(e,t){let n;try{n=new URL(e,t??window.location.href)}catch(i){return null}const r=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return r?.[1]??null}const te={};function ne(e){const t=te[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"===typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(t)}catch(i){}return te[e]=r.bind(window)}function re(...e){return ne("setTimeout")(...e)}function ie(...e){return ne("clearTimeout")(...e)}function oe(e){try{return e.contentDocument}catch(t){}}let se=1;const ae=new RegExp("[^a-z0-9-_:]");function le(){return se++}let ce,ue;const he=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,de=/^(?:[a-z+]+:)?\/\//i,pe=/^www\..*/i,fe=/^(data:)([^,]*),(.*)/i;function me(e,t){return(e||"").replace(he,(e,n,r,i,o,s)=>{const a=r||o||s,l=n||i||"";if(!a)return e;if(de.test(a)||pe.test(a))return`url(${l}${a}${l})`;if(fe.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${l})`;const c=t.split("/"),u=a.split("/");c.pop();for(const t of u)"."!==t&&(".."===t?c.pop():c.push(t));return`url(${l}${c.join("/")}${l})`})}const ge=/^[^ \t\n\r\u000c]+/,ye=/^[, \t\n\r\u000c]+/;const ve=new WeakMap;function _e(e,t){return t&&""!==t.trim()?we(e,t):t}function be(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function we(e,t){let n=ve.get(e);if(n||(n=e.createElement("a"),ve.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function xe(e,t,n,r,i,o,s){if(!r)return r;if("src"===n||"href"===n&&("use"!==t||"#"!==r[0]))return _e(e,r);if("xlink:href"===n&&"#"!==r[0])return _e(e,r);if("background"===n&&("table"===t||"td"===t||"th"===t))return _e(e,r);if("srcset"===n)return function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const i=e.exec(t.substring(n));return i?(r=i[0],n+=r.length,r):""}const i=[];for(;r(ye),!(n>=t.length);){let o=r(ge);if(","===o.slice(-1))o=_e(e,o.substring(0,o.length-1)),i.push(o);else{let r="";o=_e(e,o);let s=!1;for(;;){const e=t.charAt(n);if(""===e){i.push((o+r).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1,i.push((o+r).trim());break}"("===e&&(s=!0)}r+=e,n+=1}}}return i.join(", ")}(e,r);if("style"===n){let t=me(r,we(e));return s&&s.size>0&&(t=function(e,t){if(!e||0===t.size)return e;try{const n=e.split(";"),r=[];for(let e of n){if(e=e.trim(),!e)continue;const n=e.indexOf(":");if(-1===n){r.push(e);continue}const i=e.slice(0,n).trim();t.has(i)||r.push(e)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}(t,s)),t}return"object"===t&&"data"===n?_e(e,r):"function"===typeof o?o(n,r,i):r}function Se(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Ee(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Ee(e.parentNode,t,n,r+1):-1}function Te(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"===typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch{return!1}}}function Me(e,t,n,r,i,o){try{const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){const e=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,l=-1;if(o){if(l=Ee(s,Te(r,i)),l<0)return!0;a=Ee(s,Te(t,n),l>=0?l:1/0)}else{if(a=Ee(s,Te(t,n)),a<0)return!1;l=Ee(s,Te(r,i),a>=0?a:1/0)}return a>=0?!(l>=0)||a<=l:!(l>=0)&&!!o}catch(s){}return!!o}function Ae(e,t){const{doc:n,mirror:r,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:v,recordCanvas:_,keepIframeSrcFn:b,newlyAddedElement:w=!1,ignoreCSSAttributes:x}=t,S=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:B.Document,childNodes:[],compatMode:e.compatMode}:{type:B.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:B.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:i,unblockSelector:o,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:h,recordCanvas:d,keepIframeSrcFn:p,newlyAddedElement:f=!1,rootId:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:v,unmaskTextSelector:_,ignoreCSSAttributes:b}=t,w=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"===typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(i){}return!1}(e,r,i,o),x=function(e){if(e instanceof HTMLFormElement)return"form";const t=K(e.tagName);return ae.test(t)?"div":t}(e);let S={};const E=e.attributes.length;for(let A=0;A<E;A++){const t=e.attributes[A];t.name&&!Se(x,t.name,t.value)&&(S[t.name]=xe(n,x,K(t.name),t.value,e,l,b))}if("link"===x&&s){const t=Array.from(n.styleSheets).find(t=>t.href===e.href);let r=null;t&&(r=$(t)),r&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=me(r,t.href))}if("style"===x&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=$(e.sheet);t&&(S._cssText=me(t,we(n)))}if("input"===x||"textarea"===x||"select"===x||"option"===x){const t=e,n=X(t),r=Q(t,Z(x),n),i=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Me(t,g,v,y,_,q({type:n,tagName:Z(x),maskInputOptions:a}));S.value=W({isMasked:e,element:t,value:r,maskInputFn:c})}i&&(S.checked=i)}"option"===x&&(e.selected&&!a.select?S.selected=!0:delete S.selected);if("canvas"===x&&d)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const i=t.getImageData,o=J in i?i[J]:i;if(new Uint32Array(o.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some(e=>0!==e))return!1}return!0})(e)||(S.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height;t!==r.toDataURL(u.type,u.quality)&&(S.rr_dataURL=t)}if("img"===x&&h){ce||(ce=n.createElement("canvas"),ue=ce.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",i=t.crossOrigin,o=()=>{t.removeEventListener("load",o);try{ce.width=t.naturalWidth,ce.height=t.naturalHeight,ue.drawImage(t,0,0),S.rr_dataURL=ce.toDataURL(u.type,u.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o));console.warn(`Cannot inline img src=${r}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(i?S.crossOrigin=i:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==x&&"video"!==x||(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop));if(w){const{width:t,height:n}=e.getBoundingClientRect();S={class:S.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==x||p(S.src)||(w||oe(e)||(S.rr_src=S.src),delete S.src);let T;try{customElements.get(x)&&(T=!0)}catch(M){}return{type:B.Element,tagName:x,attributes:S,childNodes:[],isSVG:be(e)||void 0,needBlock:w,rootId:m,isCustom:T}}(e,{doc:n,blockClass:i,blockSelector:o,unblockSelector:s,inlineStylesheet:p,maskAttributeFn:l,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:v,recordCanvas:_,keepIframeSrcFn:b,newlyAddedElement:w,rootId:S,maskTextClass:c,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:d,ignoreCSSAttributes:x});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:i,maskTextSelector:o,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:u}=t,h=e.parentNode&&e.parentNode.tagName;let d=e.textContent;const p="STYLE"===h||void 0,f="SCRIPT"===h||void 0,m="TEXTAREA"===h||void 0;if(p&&d){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(d=$(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}d=me(d,we(t.doc))}f&&(d="SCRIPT_PLACEHOLDER");const g=Me(e,r,o,i,s,n);p||f||m||!d||!g||(d=a?a(d,e.parentElement):d.replace(/[\S]/g,"*"));m&&d&&(l.textarea||g)&&(d=c?c(d,e.parentNode):d.replace(/[\S]/g,"*"));if("OPTION"===h&&d){d=W({isMasked:Me(e,r,o,i,s,q({type:null,tagName:h,maskInputOptions:l})),element:e,value:d,maskInputFn:c})}return{type:B.Text,textContent:d||"",isStyle:p,rootId:u}}(e,{doc:n,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:d,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:S});case e.CDATA_SECTION_NODE:return{type:B.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:B.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function ke(e){return void 0===e||null===e?"":e.toLowerCase()}function Ce(e,t){const{doc:n,mirror:r,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:h,skipChild:d=!1,inlineStylesheet:p=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:_={},inlineImages:b=!1,recordCanvas:w=!1,onSerialize:x,onIframeLoad:S,iframeLoadTimeout:E=5e3,onBlockedImageLoad:T,onStylesheetLoad:M,stylesheetLoadTimeout:A=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:C=!1,ignoreCSSAttributes:I}=t;let{preserveWhiteSpace:P=!0}=t;const O=Ae(e,{doc:n,mirror:r,blockClass:i,blockSelector:o,maskAllText:a,unblockSelector:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:_,inlineImages:b,recordCanvas:w,keepIframeSrcFn:k,newlyAddedElement:C,ignoreCSSAttributes:I});if(!O)return console.warn(e,"not serialized"),null;let R;R=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===B.Comment)return!0;if(e.type===B.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"===typeof e.attributes.href&&"js"===ee(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(ke(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===ke(e.attributes.name)||"icon"===ke(e.attributes.rel)||"apple-touch-icon"===ke(e.attributes.rel)||"shortcut icon"===ke(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&ke(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ke(e.attributes.property).match(/^(og|twitter|fb):/)||ke(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===ke(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===ke(e.attributes.name)||"googlebot"===ke(e.attributes.name)||"bingbot"===ke(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===ke(e.attributes.name)||"generator"===ke(e.attributes.name)||"framework"===ke(e.attributes.name)||"publisher"===ke(e.attributes.name)||"progid"===ke(e.attributes.name)||ke(e.attributes.property).match(/^article:/)||ke(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===ke(e.attributes.name)||"yandex-verification"===ke(e.attributes.name)||"csrf-token"===ke(e.attributes.name)||"p:domain_verify"===ke(e.attributes.name)||"verify-v1"===ke(e.attributes.name)||"verification"===ke(e.attributes.name)||"shopify-checkout-api-token"===ke(e.attributes.name)))return!0}}return!1}(O,v)&&(P||O.type!==B.Text||O.isStyle||O.textContent.replace(/^\s+|\s+$/gm,"").length)?le():-2;const D=Object.assign(O,{id:R});if(r.add(e,D),-2===R)return null;x&&x(e);let L=!d;if(D.type===B.Element){L=L&&!D.needBlock;const t=e.shadowRoot;t&&H(t)&&(D.isShadowHost=!0)}if((D.type===B.Document||D.type===B.Element)&&L){v.headWhitespace&&D.type===B.Element&&"head"===D.tagName&&(P=!1);const t={doc:n,mirror:r,blockClass:i,blockSelector:o,maskAllText:a,unblockSelector:s,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:h,skipChild:d,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:P,onSerialize:x,onIframeLoad:S,iframeLoadTimeout:E,onBlockedImageLoad:T,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:k,ignoreCSSAttributes:I},C=e.childNodes?Array.from(e.childNodes):[];for(const e of C){const n=Ce(e,t);n&&D.childNodes.push(n)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Ce(n,t);r&&(H(e.shadowRoot)&&(r.isShadow=!0),D.childNodes.push(r))}}if(e.parentNode&&V(e.parentNode)&&H(e.parentNode)&&(D.isShadow=!0),D.type!==B.Element||"iframe"!==D.tagName||D.needBlock||function(e,t,n){const r=e.contentWindow;if(!r)return;let i,o=!1;try{i=r.document.readyState}catch(a){return}if("complete"!==i){const r=re(()=>{o||(t(),o=!0)},n);return void e.addEventListener("load",()=>{ie(r),o=!0,t()})}const s="about:blank";if(r.location.href!==s||e.src===s||""===e.src)return re(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,()=>{const t=oe(e);if(t&&S){const n=Ce(t,{doc:t,mirror:r,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:h,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:P,onSerialize:x,onIframeLoad:S,iframeLoadTimeout:E,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:k,ignoreCSSAttributes:I});n&&S(e,n)}},E),D.type===B.Element&&"img"===D.tagName&&!e.complete&&D.needBlock){const t=e,n=()=>{if(t.isConnected&&!t.complete&&T)try{const e=t.getBoundingClientRect();e.width>0&&e.height>0&&T(t,D,e)}catch(e){}t.removeEventListener("load",n)};t.isConnected&&t.addEventListener("load",n)}return D.type===B.Element&&"link"===D.tagName&&"string"===typeof D.attributes.rel&&("stylesheet"===D.attributes.rel||"preload"===D.attributes.rel&&"string"===typeof D.attributes.href&&"css"===ee(D.attributes.href))&&function(e,t,n){let r,i=!1;try{r=e.sheet}catch(s){return}if(r)return;const o=re(()=>{i||(t(),i=!0)},n);e.addEventListener("load",()=>{ie(o),i=!0,t()})}(e,()=>{if(M){const t=Ce(e,{doc:n,mirror:r,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:h,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:P,onSerialize:x,onIframeLoad:S,iframeLoadTimeout:E,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:k,ignoreCSSAttributes:I});t&&M(e,t)}},A),D.type===B.Element&&delete D.needBlock,D}function Ie(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Pe="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Oe={map:{},getId:()=>(console.error(Pe),-1),getNode:()=>(console.error(Pe),null),removeNodeFromMap(){console.error(Pe)},has:()=>(console.error(Pe),!1),reset(){console.error(Pe)}};function Re(e,t,n={}){let r=null,i=0;return function(...o){const s=Date.now();i||!1!==n.leading||(i=s);const a=t-(s-i),l=this;a<=0||a>t?(r&&(!function(...e){Qe("clearTimeout")(...e)}(r),r=null),i=s,e.apply(l,o)):r||!1===n.trailing||(r=et(()=>{i=!1===n.leading?0:Date.now(),r=null,e.apply(l,o)},a))}}function De(e,t,n,r,i=window){const o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set(e){et(()=>{n.set.call(this,e)},0),o&&o.set&&o.set.call(this,e)}}),()=>De(e,t,o||{},!0)}function Le(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],i=n(r);return"function"===typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,()=>{e[t]=r}}catch{return()=>{}}}"undefined"!==typeof window&&window.Proxy&&window.Reflect&&(Oe=new Proxy(Oe,{get:(e,t,n)=>("map"===t&&console.error(Pe),Reflect.get(e,t,n))}));let Ne=Date.now;function Fe(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function ze(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ue(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function je(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(t){return null}}function Be(e,t,n,r,i){if(!e)return!1;const o=je(e);if(!o)return!1;const s=Te(t,n);if(!i){const e=r&&o.matches(r);return s(o)&&!e}const a=Ee(o,s);let l=-1;return!(a<0)&&(r&&(l=Ee(o,Te(null,r))),a>-1&&l<0||a<l)}function Ve(e,t){return-2===t.getId(e)}function He(e,t){if(V(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||He(e.parentNode,t))}function $e(e){return Boolean(e.changedTouches)}function Ye(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Ge(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function qe(e){return Boolean(e?.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(Ne=()=>(new Date).getTime());class We{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Ke(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Ze(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Ke(n);)n=t;return n}(e);return t.contains(n)}function Je(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Ze(e))}const Xe={};function Qe(e){const t=Xe[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"===typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(t)}catch(i){}return Xe[e]=r.bind(window)}function et(...e){return Qe("setTimeout")(...e)}var tt=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(tt||{}),nt=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(nt||{}),rt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(rt||{}),it=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(it||{}),ot=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(ot||{});function st(e){try{return e.contentDocument}catch(t){}}function at(e){return"__ln"in e}class lt{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=t?.next||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&at(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&at(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const ct=(e,t)=>`${e}@${t}`;class ut{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new lt,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},i=i=>{if(!i.parentNode||!Je(i))return;const o=V(i.parentNode)?this.mirror.getId(Ke(i)):this.mirror.getId(i.parentNode),s=r(i);if(-1===o||-1===s)return n.addNode(i);const a=Ce(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Ye(e,this.mirror)&&!Be(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),Ge(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),qe(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{Be(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)},onBlockedImageLoad:(e,t,{width:n,height:r})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:{style:{width:`${n}px`,height:`${r}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});a&&(e.push({parentId:o,nextId:s,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)dt(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||i(a);for(const a of this.addedSet)pt(this.droppedSet,a)||dt(this.removes,a,this.mirror)?pt(this.movedSet,a)?i(a):this.droppedSet.add(a):i(a);let o=null;for(;n.length;){let e=null;if(o){const t=this.mirror.getId(o.value.parentNode),n=r(o.value);-1!==t&&-1!==n&&(e=o)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}o=e.previous,n.removeNode(e.value),i(e.value)}const s={texts:this.texts.map(e=>({id:this.mirror.getId(e.node),value:e.value})).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{const{attributes:t}=e;if("string"===typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(!Ve(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Be(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Me(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,je(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,i=e.target.getAttribute(r);if("value"===r){const t=X(n),r=n.tagName;i=Q(n,r,t);const o=q({maskInputOptions:this.maskInputOptions,tagName:r,type:t});i=W({isMasked:Me(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,o),element:n,value:i,maskInputFn:this.maskInputFn})}if(Be(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(i)){if(st(n))return;r="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Se(n.tagName,r)&&(o.attributes[r]=xe(this.doc,K(n.tagName),K(r),i,n,this.maskAttributeFn),"style"===r)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}const r=this.unattachedDoc.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),i=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||i!==r.style.getPropertyPriority(e)?o.styleDiff[e]=""===i?t:[t,i]:o._unchangedStyles[e]=[t,i]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Be(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const n=this.mirror.getId(t),r=V(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Be(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Ve(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(ht(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||He(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[ct(n,r)]?ht(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!V(e.target)||!H(e.target))||void 0})),this.mapRemoves.push(t))})}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Ve(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[ct(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Be(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes&&e.childNodes.forEach(e=>this.genAdds(e)),qe(e)&&e.shadowRoot.childNodes.forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ht(e,t){e.delete(t),t.childNodes?.forEach(t=>ht(e,t))}function dt(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some(e=>e.id===t))return!0;r=r.parentNode}return!1}(e,t,n)}function pt(e,t){return 0!==e.size&&ft(e,t)}function ft(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||ft(e,n))}let mt;const gt=e=>{if(!mt)return e;return(...t)=>{try{return e(...t)}catch(n){if(mt&&!0===mt(n))return()=>{};throw n}}},yt=[];function vt(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function _t(e,t){const n=new ut;yt.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const i=window?.Zone?.__symbol__?.("MutationObserver");i&&window[i]&&(r=window[i]);const o=new r(gt(t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)}));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function bt({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,l=[];let c=null;return Object.keys(rt).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]).forEach(s=>{let a=K(s);const u=(t=>s=>{const a=vt(s);if(Be(a,r,i,o,!0))return;let l=null,u=t;if("pointerType"in s){switch(s.pointerType){case"mouse":l=it.Mouse;break;case"touch":l=it.Touch;break;case"pen":l=it.Pen}l===it.Touch?rt[t]===rt.MouseDown?u="TouchStart":rt[t]===rt.MouseUp&&(u="TouchEnd"):it.Pen}else $e(s)&&(l=it.Touch);null!==l?(c=l,(u.startsWith("Touch")&&l===it.Touch||u.startsWith("Mouse")&&l===it.Mouse)&&(l=null)):rt[t]===rt.Click&&(l=c,c=null);const h=$e(s)?s.changedTouches[0]:s;if(!h)return;const d=n.getId(a),{clientX:p,clientY:f}=h;gt(e)({type:rt[u],id:d,x:p,y:f,...null!==l&&{pointerType:l}})})(s);if(window.PointerEvent)switch(rt[s]){case rt.MouseDown:case rt.MouseUp:a=a.replace("mouse","pointer");break;case rt.TouchStart:case rt.TouchEnd:return}l.push(Ie(a,u,t))}),gt(()=>{l.forEach(e=>e())})}function wt({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,sampling:s}){return Ie("scroll",gt(Re(gt(s=>{const a=vt(s);if(!a||Be(a,r,i,o,!0))return;const l=n.getId(a);if(a===t&&t.defaultView){const n=Fe(t.defaultView);e({id:l,x:n.left,y:n.top})}else e({id:l,x:a.scrollLeft,y:a.scrollTop})}),s.scroll||100)),t)}const xt=["INPUT","TEXTAREA","SELECT"],St=new WeakMap;function Et({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,ignoreClass:s,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:h,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=vt(e);const u=e.isTrusted,g=n&&Z(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||xt.indexOf(g)<0||Be(n,r,i,o,!0))return;const v=n;if(v.classList.contains(s)||a&&v.matches(a))return;const _=X(n);let b=Q(v,g,_),w=!1;const x=q({maskInputOptions:l,tagName:g,type:_}),S=Me(n,d,f,p,m,x);"radio"!==_&&"checkbox"!==_||(w=n.checked),b=W({isMasked:S,element:n,value:b,maskInputFn:c}),y(n,h?{text:b,isChecked:w,userTriggered:u}:{text:b,isChecked:w});const E=n.name;"radio"===_&&E&&w&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach(e=>{if(e!==n){const t=W({isMasked:S,element:e,value:Q(e,g,_),maskInputFn:c});y(e,h?{text:t,isChecked:!w,userTriggered:!1}:{text:t,isChecked:!w})}})}function y(t,r){const i=St.get(t);if(!i||i.text!==r.text||i.isChecked!==r.isChecked){St.set(t,r);const i=n.getId(t);gt(e)({...r,id:i})}}const v=("last"===u.input?["change"]:["input","change"]).map(e=>Ie(e,gt(g),t)),_=t.defaultView;if(!_)return()=>{v.forEach(e=>e())};const b=_.Object.getOwnPropertyDescriptor(_.HTMLInputElement.prototype,"value"),w=[[_.HTMLInputElement.prototype,"value"],[_.HTMLInputElement.prototype,"checked"],[_.HTMLSelectElement.prototype,"value"],[_.HTMLTextAreaElement.prototype,"value"],[_.HTMLSelectElement.prototype,"selectedIndex"],[_.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&v.push(...w.map(e=>De(e[0],e[1],{set(){gt(g)({target:this,isTrusted:!1})}},!1,_))),gt(()=>{v.forEach(e=>e())})}function Tt(e){return function(e,t){if(Ct("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Ct("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Ct("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Ct("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Mt(e,t,n){let r,i;return e?(e.ownerNode?r=t.getId(e.ownerNode):i=n.getId(e),{styleId:i,id:r}):{}}function At({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const i="#document"===n.nodeName?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,o=i?.prototype?Object.getOwnPropertyDescriptor(i?.prototype,"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&i&&o?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return o.get?.call(this)},set(e){const n=o.set?.call(this,e);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(i){}return n}}),gt(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})})):()=>{}}function kt(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=_t(e,e.doc));const i=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const i="number"===typeof t.mousemove?t.mousemove:50,o="number"===typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const l=Re(gt(t=>{const n=Date.now()-s;e(a.map(e=>(e.timeOffset-=n,e)),t),a=[],s=null}),o),c=gt(Re(gt(e=>{const t=vt(e),{clientX:n,clientY:i}=$e(e)?e.changedTouches[0]:e;s||(s=Ne()),a.push({x:n,y:i,id:r.getId(t),timeOffset:Ne()-s}),l("undefined"!==typeof DragEvent&&e instanceof DragEvent?nt.Drag:e instanceof MouseEvent?nt.MouseMove:nt.TouchMove)}),i,{trailing:!1})),u=[Ie("mousemove",c,n),Ie("touchmove",c,n),Ie("drag",c,n)];return gt(()=>{u.forEach(e=>e())})}(e),o=bt(e),s=wt(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Ie("resize",gt(Re(gt(()=>{const t=ze(),i=Ue();n===t&&r===i||(e({width:Number(i),height:Number(t)}),n=t,r=i)}),200)),t)}(e,{win:n}),l=Et(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:i,sampling:o,doc:s}){const a=gt(s=>Re(gt(o=>{const a=vt(o);if(!a||Be(a,t,n,r,!0))return;const{currentTime:l,volume:c,muted:u,playbackRate:h}=a;e({type:s,id:i.getId(a),currentTime:l,volume:c,muted:u,playbackRate:h})}),o.media||500)),l=[Ie("play",a(ot.Play),s),Ie("pause",a(ot.Pause),s),Ie("seeked",a(ot.Seeked),s),Ie("volumechange",a(ot.VolumeChange),s),Ie("ratechange",a(ot.RateChange),s)];return gt(()=>{l.forEach(e=>e())})}(e);let u=()=>{},h=()=>{},d=()=>{},p=()=>{};e.recordDOM&&(u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:gt((r,i,o)=>{const[s,a]=o,{id:l,styleId:c}=Mt(i,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:s,index:a}]}),r.apply(i,o)})});const o=r.CSSStyleSheet.prototype.deleteRule;let s,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:gt((r,i,o)=>{const[s]=o,{id:a,styleId:l}=Mt(i,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:s}]}),r.apply(i,o)})}),r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:gt((r,i,o)=>{const[s]=o,{id:a,styleId:l}=Mt(i,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replace:s}),r.apply(i,o)})})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:gt((r,i,o)=>{const[s]=o,{id:a,styleId:l}=Mt(i,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replaceSync:s}),r.apply(i,o)})}));const l={};It("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(It("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),It("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),It("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(l).forEach(([r,i])=>{c[r]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=new Proxy(c[r].insertRule,{apply:gt((r,i,o)=>{const[s,a]=o,{id:l,styleId:c}=Mt(i.parentStyleSheet,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:s,index:[...Tt(i),a||0]}]}),r.apply(i,o)})}),i.prototype.deleteRule=new Proxy(c[r].deleteRule,{apply:gt((r,i,o)=>{const[s]=o,{id:a,styleId:l}=Mt(i.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:[...Tt(i),s]}]}),r.apply(i,o)})})}),gt(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=o,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule})})}(e,{win:n}),h=At(e,e.doc),d=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:i}){const o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:gt((i,s,a)=>{const[l,c,u]=a;if(n.has(l))return o.apply(s,[l,c,u]);const{id:h,styleId:d}=Mt(s.parentRule?.parentStyleSheet,t,r.styleMirror);return(h&&-1!==h||d&&-1!==d)&&e({id:h,styleId:d,set:{property:l,value:c,priority:u},index:Tt(s.parentRule)}),i.apply(s,a)})});const s=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:gt((i,o,a)=>{const[l]=a;if(n.has(l))return s.apply(o,[l]);const{id:c,styleId:u}=Mt(o.parentRule?.parentStyleSheet,t,r.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,remove:{property:l},index:Tt(o.parentRule)}),i.apply(o,a)})}),gt(()=>{i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=s})}(e,{win:n}),e.collectFonts&&(p=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],i=new WeakMap,o=n.FontFace;n.FontFace=function(e,t,n){const r=new o(e,t,n);return i.set(r,{family:e,buffer:"string"!==typeof t,descriptors:n,fontSource:"string"===typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const s=Le(t.fonts,"add",function(t){return function(n){return et(gt(()=>{const t=i.get(n);t&&(e(t),i.delete(n))}),0),t.apply(this,[n])}});return r.push(()=>{n.FontFace=o}),r.push(s),gt(()=>{r.forEach(e=>e())})}(e)));const f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,selectionCb:s}=e;let a=!0;const l=gt(()=>{const e=t.getSelection();if(!e||a&&e?.isCollapsed)return;a=e.isCollapsed||!1;const l=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const s=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:u,endOffset:h}=s;Be(a,r,i,o,!0)||Be(u,r,i,o,!0)||l.push({start:n.getId(a),startOffset:c,end:n.getId(u),endOffset:h})}s({ranges:l})});return l(),Ie("selectionchange",l)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Le(n.customElements,"define",function(e){return function(n,r,i){try{t({define:{name:n}})}catch(o){}return e.apply(this,[n,r,i])}}):()=>{}}(e),g=[];for(const y of e.plugins)g.push(y.observer(y.callback,n,y.options));return gt(()=>{yt.forEach(e=>e.reset()),r?.disconnect(),i(),o(),s(),a(),l(),c(),u(),h(),d(),p(),f(),m(),g.forEach(e=>e())})}function Ct(e){return"undefined"!==typeof window[e]}function It(e){return Boolean("undefined"!==typeof window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Pt{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const i=n||this.getIdToRemoteIdMap(e),o=r||this.getRemoteIdToIdMap(e);let s=i.get(t);return s||(s=this.generateIdFn(),i.set(t,s),o.set(s,t)),s}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,n,r))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!==typeof t)return t;const i=r.get(t);return i||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,n))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Ot{constructor(){this.crossOriginIframeMirror=new Pt(le),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Rt{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Pt(le),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Pt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&e.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(e);const n=st(e);n&&n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(n))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case tt.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:tt.IncrementalSnapshot,data:{source:nt.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case tt.Meta:case tt.Load:case tt.DomContentLoaded:return!1;case tt.Plugin:return t;case tt.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case tt.IncrementalSnapshot:switch(t.data.source){case nt.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case nt.Drag:case nt.TouchMove:case nt.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case nt.ViewportResize:return!1;case nt.MediaInteraction:case nt.MouseInteraction:case nt.Scroll:case nt.CanvasMutation:case nt.Input:return this.replaceIds(t.data,e,["id"]),t;case nt.StyleSheetRule:case nt.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case nt.Font:return t;case nt.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case nt.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),t.data.styles?.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])}),t}}return!1}replace(e,t,n,r){for(const i of r)(Array.isArray(t[i])||"number"===typeof t[i])&&(Array.isArray(t[i])?t[i]=e.getIds(n,t[i]):t[i]=e.getId(n,t[i]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===B.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class Dt{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Lt{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!H(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=_t({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(wt({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),et(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(At({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){const t=st(e),n=function(e){try{return e.contentWindow}catch(t){}}(e);t&&n&&this.patchAttachShadow(n.Element,t)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Le(e.prototype,"attachShadow",function(e){return function(r){const i=e.call(this,r);return this.shadowRoot&&Je(this)&&n.addShadowRoot(this.shadowRoot,t),i}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(t){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}for(var Nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ft="undefined"===typeof Uint8Array?[]:new Uint8Array(256),zt=0;zt<64;zt++)Ft[Nt.charCodeAt(zt)]=zt;class Ut{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class jt{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new We,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const i of e){let e;this.styleMirror.has(i)?e=this.styleMirror.getId(i):(e=this.styleMirror.add(i),r.push({styleId:e,rules:Array.from(i.rules||CSSRule,(e,t)=>({rule:Y(e),index:t}))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Bt{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some(e=>e!==t)}add(e,t){this.active||(this.active=!0,function(...e){Qe("requestAnimationFrame")(...e)}(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let Vt,Ht;try{if(2!==Array.from([1],e=>2*e)[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(Br){console.debug("Unable to override Array.from",Br)}const $t=new G;function Yt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:o=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:h=null,maskTextSelector:d=null,unmaskTextSelector:p=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:v,maskInputFn:_,maskTextFn:b,maxCanvasSize:w=null,packFn:x,sampling:S={},dataURLOptions:E={},mousemoveWait:T,recordDOM:M=!0,recordCanvas:A=!1,recordCrossOriginIframes:k=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:I=!1,collectFonts:P=!1,inlineImages:O=!1,plugins:R,keepIframeSrcFn:D=()=>!1,ignoreCSSAttributes:L=new Set([]),errorHandler:N,onMutation:F,getCanvasManager:z}=e;mt=N;const U=!k||window.parent===window;let j=!1;if(!U)try{window.parent.document&&(j=!1)}catch(ne){j=!0}if(U&&!t)throw new Error("emit function is required");if(!U&&!j)return()=>{};void 0!==T&&void 0===S.mousemove&&(S.mousemove=T),$t.reset();const B=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},V=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let H;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let $=0;const Y=e=>{for(const t of R||[])t.eventProcessor&&(e=t.eventProcessor(e));return x&&!j&&(e=x(e)),e};Vt=(e,i)=>{const o=e;if(o.timestamp=Ne(),!yt[0]?.isFrozen()||o.type===tt.FullSnapshot||o.type===tt.IncrementalSnapshot&&o.data.source===nt.Mutation||yt.forEach(e=>e.unfreeze()),U)t?.(Y(o),i);else if(j){const e={type:"rrweb",event:Y(o),origin:window.location.origin,isCheckout:i};window.parent.postMessage(e,"*")}if(o.type===tt.FullSnapshot)H=o,$=0;else if(o.type===tt.IncrementalSnapshot){if(o.data.source===nt.Mutation&&o.data.isAttachIframe)return;$++;const e=r&&$>=r,t=n&&H&&o.timestamp-H.timestamp>n;(e||t)&&te(!0)}};const q=e=>{Vt({type:tt.IncrementalSnapshot,data:{source:nt.Mutation,...e}})},W=e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.Scroll,...e}}),K=e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.CanvasMutation,...e}}),Z=new jt({mutationCb:q,adoptedStyleSheetCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.AdoptedStyleSheet,...e}})}),J="boolean"===typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Ot:new Rt({mirror:$t,mutationCb:q,stylesheetManager:Z,recordCrossOriginIframes:k,wrappedEmit:Vt});for(const G of R||[])G.getMirror&&G.getMirror({nodeMirror:$t,crossOriginIframeMirror:J.crossOriginIframeMirror,crossOriginIframeStyleMirror:J.crossOriginIframeStyleMirror});const X=new Bt,Q=function(e,t){try{return e?e(t):new Ut}catch{return console.warn("Unable to initialize CanvasManager"),new Ut}}(z,{mirror:$t,win:window,mutationCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.CanvasMutation,...e}}),recordCanvas:A,blockClass:i,blockSelector:o,unblockSelector:s,maxCanvasSize:w,sampling:S.canvas,dataURLOptions:E,errorHandler:N}),ee="boolean"===typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Dt:new Lt({mutationCb:q,scrollCb:W,bypassOptions:{onMutation:F,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:c,maskTextClass:u,unmaskTextClass:h,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:B,dataURLOptions:E,maskAttributeFn:v,maskTextFn:b,maskInputFn:_,recordCanvas:A,inlineImages:O,sampling:S,slimDOMOptions:V,iframeManager:J,stylesheetManager:Z,canvasManager:Q,keepIframeSrcFn:D,processedNodeManager:X,ignoreCSSAttributes:L},mirror:$t}),te=(e=!1)=>{if(!M)return;Vt({type:tt.Meta,data:{href:window.location.href,width:Ue(),height:ze()}},e),Z.reset(),ee.init(),yt.forEach(e=>e.lock());const t=function(e,t){const{mirror:n=new G,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:o=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:h=!0,inlineImages:d=!1,recordCanvas:p=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:v=!1,dataURLOptions:_,preserveWhiteSpace:b,onSerialize:w,onIframeLoad:x,iframeLoadTimeout:S,onBlockedImageLoad:E,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:A=()=>!1,ignoreCSSAttributes:k=new Set([])}=t||{};return Ce(e,{doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:s,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:_,inlineImages:d,recordCanvas:p,preserveWhiteSpace:b,onSerialize:w,onIframeLoad:x,iframeLoadTimeout:S,onBlockedImageLoad:E,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:A,newlyAddedElement:!1,ignoreCSSAttributes:k})}(document,{mirror:$t,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:c,maskTextClass:u,unmaskTextClass:h,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:f,maskAllInputs:B,maskAttributeFn:v,maskInputFn:_,maskTextFn:b,slimDOM:V,dataURLOptions:E,recordCanvas:A,inlineImages:O,onSerialize:e=>{Ye(e,$t)&&J.addIframe(e),Ge(e,$t)&&Z.trackLinkElement(e),qe(e)&&ee.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{J.attachIframe(e,t),e.contentWindow&&Q.addWindow(e.contentWindow),ee.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Z.attachLinkElement(e,t)},onBlockedImageLoad:(e,t,{width:n,height:r})=>{q({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:{style:{width:`${n}px`,height:`${r}px`}}}]})},keepIframeSrcFn:D,ignoreCSSAttributes:L});if(!t)return console.warn("Failed to snapshot the document");Vt({type:tt.FullSnapshot,data:{node:t,initialOffset:Fe(window)}}),yt.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Z.adoptStyleSheets(document.adoptedStyleSheets,$t.getId(document))};Ht=te;try{const e=[],t=e=>gt(kt)({onMutation:F,mutationCb:q,mousemoveCb:(e,t)=>Vt({type:tt.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.MouseInteraction,...e}}),scrollCb:W,viewportResizeCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.ViewportResize,...e}}),inputCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.Input,...e}}),mediaInteractionCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.MediaInteraction,...e}}),styleSheetRuleCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.StyleSheetRule,...e}}),styleDeclarationCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.StyleDeclaration,...e}}),canvasMutationCb:K,fontCb:e=>Vt({type:tt.IncrementalSnapshot,data:{source:nt.Font,...e}}),selectionCb:e=>{Vt({type:tt.IncrementalSnapshot,data:{source:nt.Selection,...e}})},customElementCb:e=>{Vt({type:tt.IncrementalSnapshot,data:{source:nt.CustomElement,...e}})},blockClass:i,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:h,maskTextSelector:d,unmaskTextSelector:p,maskInputOptions:B,inlineStylesheet:f,sampling:S,recordDOM:M,recordCanvas:A,inlineImages:O,userTriggeredOnInput:I,collectFonts:P,doc:e,maskAttributeFn:v,maskInputFn:_,maskTextFn:b,keepIframeSrcFn:D,blockSelector:o,unblockSelector:s,slimDOMOptions:V,dataURLOptions:E,mirror:$t,iframeManager:J,stylesheetManager:Z,shadowDomManager:ee,processedNodeManager:X,canvasManager:Q,ignoreCSSAttributes:L,plugins:R?.filter(e=>e.observer)?.map(e=>({observer:e.observer,options:e.options,callback:t=>Vt({type:tt.Plugin,data:{plugin:e.name,payload:t}})}))||[]},{});J.addLoadListener(n=>{try{e.push(t(n.contentDocument))}catch(r){console.warn(r)}});const n=()=>{te(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Ie("DOMContentLoaded",()=>{Vt({type:tt.DomContentLoaded,data:{}}),"DOMContentLoaded"===C&&n()})),e.push(Ie("load",()=>{Vt({type:tt.Load,data:{}}),"load"===C&&n()},window))),()=>{e.forEach(e=>e()),X.destroy(),Ht=void 0,mt=void 0}}catch(re){console.warn(re)}}var Gt,qt;Yt.mirror=$t,Yt.takeFullSnapshot=function(e){if(!Ht)throw new Error("please take full snapshot after start recording");Ht(e)},(qt=Gt||(Gt={}))[qt.NotStarted=0]="NotStarted",qt[qt.Running=1]="Running",qt[qt.Stopped=2]="Stopped";function Wt(e){return e>9999999999?e:1e3*e}function Kt(e){return e>9999999999?e/1e3:e}function Zt(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:tt.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:(0,i.S8)(t,10,1e3)}}),"console"===t.category)))}function Jt(e){return e.closest("button,a")||e}function Xt(e){const t=Qt(e);return t&&t instanceof Element?Jt(t):t}function Qt(e){return function(e){return"object"===typeof e&&!!e&&"target"in e}(e)?e.target:e}let en;function tn(e){return en||(en=[],(0,o.GS)(O,"open",function(e){return function(...t){if(en)try{en.forEach(e=>e())}catch{}return e.apply(O,t)}})),en.push(e),()=>{const t=en?en.indexOf(e):-1;t>-1&&en.splice(t,1)}}const nn=new Set([nt.Mutation,nt.StyleSheetRule,nt.StyleDeclaration,nt.AdoptedStyleSheet,nt.CanvasMutation,nt.Selection,nt.MediaInteraction]);class rn{constructor(e,t,n=Zt){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scrollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=tn(()=>{this._lastMutation=sn()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!on.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!==typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Kt(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some(e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1)||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Kt(e)}registerScroll(e=Date.now()){this._lastScroll=Kt(e)}registerClick(e){const t=Jt(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach(e=>{e.clickCount++})}_getClicks(e){return this._clicks.filter(t=>t.node===e)}_checkClicks(){const e=[],t=sn();this._clicks.forEach(n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)});for(const n of e){const e=this._clicks.indexOf(n);e>-1&&(this._generateBreadcrumbs(n),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,i=!n&&!r,{clickCount:o,clickBreadcrumb:s}=e;if(i){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",i={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.slowClickDetected",data:{...s.data,url:O.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:o||1}};return void this._addBreadcrumbEvent(t,i)}if(o>1){const e={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.multiClick",data:{...s.data,url:O.location.href,route:t.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=(0,M.wg)(()=>this._checkClicks(),1e3)}}const on=["A","BUTTON","INPUT"];function sn(){return Date.now()/1e3}function an(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(nn.has(n)&&e.registerMutation(t.timestamp),n===nt.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===nt.MouseInteraction}(t)){const{type:n,id:r}=t.data,i=Yt.mirror.getNode(r);i instanceof HTMLElement&&n===rt.Click&&e.registerClick(i)}}catch{}}function ln(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var cn=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(cn||{});const un=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function hn(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(un.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const dn=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Xt(e.event):Qt(e.event),n=(0,s.Hd)(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}(e);return ln({category:`ui.${e.name}`,...pn(t,n)})}(t);if(!n)return;const r="click"===t.name,i=r?t.event:void 0;var o,a,l;!(r&&e.clickDetector&&i?.target)||i.altKey||i.metaKey||i.ctrlKey||i.shiftKey||(o=e.clickDetector,a=n,l=Xt(t.event),o.handleClick(a,l)),Zt(e,n)};function pn(e,t){const n=Yt.mirror.getId(e),r=n&&Yt.mirror.getNode(n),i=r&&Yt.mirror.getMeta(r),o=i&&function(e){return e.type===cn.Element}(i)?i:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map(e=>e.type===cn.Text&&e.textContent).filter(Boolean).map(e=>e.trim()).join(""),attributes:hn(o.attributes)}}:{}}}function fn(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:i,key:o,target:a}=e;if(!a||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(a)||!o)return null;const l=t||r||i,c=1===o.length;if(!l&&c)return null;const u=(0,s.Hd)(a,{maxStringLength:200})||"<unknown>",h=pn(a,u);return ln({category:"ui.keyDown",message:u,data:{...h.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:i,key:o}})}(t);n&&Zt(e,n)}const mn={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:i,startTime:o,decodedBodySize:s,encodedBodySize:a,responseStatus:l,transferSize:c}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:vn(o),end:vn(i),name:r,data:{size:c,statusCode:l,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:i}=e,o=vn(i);return{type:n,name:r,start:o,end:o+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:i,domComplete:o,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:h,redirectCount:d,startTime:p,transferSize:f,type:m}=e;if(0===i)return null;return{type:`${t}.${m}`,start:vn(p),end:vn(o),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:s,duration:i,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:h,domComplete:o,redirectCount:d}}}};function gn(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function yn(e){const t=mn[e.entryType];return t?t(e):null}function vn(e){return(((0,a.k3)()||O.performance.timeOrigin)+e)/1e3}function _n(e){const t=e.entries[e.entries.length-1];return Sn(e,"largest-contentful-paint",t?.element?[t.element]:void 0)}function bn(e){return void 0!==e.sources}function wn(e){const t=[],n=[];for(const r of e.entries)if(bn(r)){const e=[];for(const t of r.sources)if(t.node){n.push(t.node);const r=Yt.mirror.getId(t.node);r&&e.push(r)}t.push({value:r.value,nodeIds:e.length?e:void 0})}return Sn(e,"cumulative-layout-shift",n,t)}function xn(e){const t=e.entries[e.entries.length-1];return Sn(e,"interaction-to-next-paint",t?.target?[t.target]:void 0)}function Sn(e,t,n,r){const i=e.value,o=e.rating,s=vn(i);return{type:"web-vital",name:t,start:s,end:s,data:{value:i,size:i,rating:o,nodeIds:n?n.map(e=>Yt.mirror.getId(e)):void 0,attributions:r}}}const En="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;const Tn=["log","warn","error"],Mn="[Replay] ";function An(e,t="info"){(0,l.Z)({category:"console",data:{logger:"replay"},level:t,message:`${Mn}${e}`},{level:t})}const kn=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=!!n.captureExceptions,t=!!n.traceInternals}};return En?(Tn.forEach(e=>{n[e]=(...n)=>{c.Yz[e](Mn,...n),t&&An(n.join(""),(0,u.t)(e))}}),n.exception=(r,...i)=>{i.length&&n.error&&n.error(...i),c.Yz.error(Mn,r),e?(0,h.Cp)(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&An(r,"error")},n.infoTick=(...e)=>{c.Yz.log(Mn,...e),t&&setTimeout(()=>An(e[0]),0)}):Tn.forEach(e=>{n[e]=()=>{}}),n}();class Cn extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class In{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>F)throw new Cn;this.events.push(e)}finish(){return new Promise(e=>{const t=this.events;this.clear(),e(JSON.stringify(t))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(e=>e.timestamp).sort()[0];return e?Wt(e):null}}class Pn{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((e,t)=>{this._worker.addEventListener("message",({data:n})=>{n.success?e():t()},{once:!0}),this._worker.addEventListener("error",e=>{t(e)},{once:!0})})),this._ensureReadyPromise}destroy(){En&&kn.log("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise((r,i)=>{const o=({data:t})=>{const s=t;if(s.method===e&&s.id===n){if(this._worker.removeEventListener("message",o),!s.success)return En&&kn.error("Error in compression worker: ",s.response),void i(new Error("Error in compression worker"));r(s.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:n,method:e,arg:t})})}_getAndIncrementId(){return this._id++}}class On{constructor(e){this._worker=new Pn(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Wt(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>F?Promise.reject(new Cn):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{En&&kn.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Rn{constructor(e){this._fallback=new In,this._compression=new On(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(En&&kn.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t,waitForCheckout:n}=this._fallback,r=[];for(const o of e)r.push(this._compression.addEvent(o));this._compression.hasCheckout=t,this._compression.waitForCheckout=n,this._used=this._compression;try{await Promise.all(r),this._fallback.clear()}catch(i){En&&kn.exception(i,"Failed to add events when switching buffers.")}}}function Dn({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"===typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;En&&kn.log("Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Rn(n)}catch(t){En&&kn.exception(t,"Failed to create compression worker")}}(t);if(e)return e}return En&&kn.log("Using simple buffer"),new In}function Ln(){try{return"sessionStorage"in O&&!!O.sessionStorage}catch{return!1}}function Nn(e){!function(){if(!Ln())return;try{O.sessionStorage.removeItem(R)}catch{}}(),e.session=void 0}function Fn(e){return void 0!==e&&Math.random()<e}function zn(e){if(Ln())try{O.sessionStorage.setItem(R,JSON.stringify(e))}catch{}}function Un(e){const t=Date.now();return{id:e.id||(0,d.eJ)(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId,dirty:e.dirty||!1}}function jn({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const i=function(e,t){return Fn(e)?"session":!!t&&"buffer"}(e,t),o=Un({sampled:i,previousSessionId:r});return n&&zn(o),o}function Bn(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Vn(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Bn(e.started,t,r)||Bn(e.lastActivity,n,r)}function Hn(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Vn(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function $n({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const i=r.stickySession&&function(){if(!Ln())return null;try{const e=O.sessionStorage.getItem(R);if(!e)return null;const t=JSON.parse(e);return En&&kn.infoTick("Loading existing session"),Un(t)}catch{return null}}();return i?Hn(i,{sessionIdleExpire:e,maxReplayDuration:t})?(En&&kn.infoTick("Session in sessionStorage is expired, creating new one..."),jn(r,{previousSessionId:i.id})):i:(En&&kn.infoTick("Creating new session"),jn(r,{previousSessionId:n}))}function Yn(e,t,n){return!!qn(e,t)&&(Gn(e,t,n),!0)}async function Gn(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const i="buffer"===e.recordingMode;try{n&&i&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const o=function(e,t){try{if("function"===typeof t&&function(e){return e.type===tt.Custom}(e))return t(e)}catch(n){return En&&kn.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!o)return;return await r.addEvent(o)}catch(o){const t=o&&o instanceof Cn,n=t?"addEventSizeExceeded":"addEvent",s=(0,p.KU)();if(s){const e=t?"buffer_overflow":"internal_sdk_error";s.recordDroppedEvent(e,"replay")}if(t&&i)return r.clear(),r.waitForCheckout=!0,null;e.handleException(o),await e.stop({reason:n})}}function qn(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Wt(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(En&&kn.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1))}function Wn(e){return!e.type}function Kn(e){return"transaction"===e.type}function Zn(e){return"feedback"===e.type}function Jn(e){return(t,n)=>{if(!e.isEnabled()||!Wn(t)&&!Kn(t))return;const r=n.statusCode;!r||r<200||r>=300||(Kn(t)?function(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"===typeof r&&!r(t))return;(0,M.wg)(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(Br){e.handleException(Br)}})}(e,t))}}function Xn(e){return t=>{e.isEnabled()&&Wn(t)&&function(e,t){const n=t.exception?.values?.[0]?.value;if("string"!==typeof n)return;if(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Zt(e,ln({category:"replay.hydrate-error",data:{url:(0,s.$N)()}}))}}(e,t)}}function Qn(e){const t=(0,p.KU)();t&&t.on("beforeAddBreadcrumb",t=>function(e,t){if(!e.isEnabled()||!er(t))return;const n=function(e){if(!er(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(e){const t=e.data?.arguments;if(!Array.isArray(t)||0===t.length)return ln(e);let n=!1;const r=t.map(e=>{if(!e)return e;if("string"===typeof e)return e.length>N?(n=!0,`${e.slice(0,N)}\u2026`):e;if("object"===typeof e)try{const t=(0,i.S8)(e,7);return JSON.stringify(t).length>N?(n=!0,`${JSON.stringify(t,null,2).slice(0,N)}\u2026`):t}catch{}return e});return ln({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return ln(e)}(t);n&&Zt(e,n)}(e,t))}function er(e){return!!e.category}function tr(){const e=(0,p.o5)().getPropagationContext().dsc;e&&delete e.replay_id;const t=(0,f.Bk)();if(t){delete(0,m.k1)(t).replay_id}}function nr(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Wn(t)&&!Kn(t)&&!Zn(t))return t;if(!e.checkAndHandleExpiredSession())return tr(),t;if(Zn(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate(()=>!t.timestamp||(e.throttledAddEvent({type:tt.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1))}(e,t),t;if(function(e,t){return!(e.type||!e.exception?.values?.length)&&!!t.originalException?.__rrweb__}(t,n)&&!e.getOptions()._experiments.captureExceptions)return En&&kn.log("Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==D&&!(!t.exception||t.type)&&Fn(e.getOptions().errorSampleRate)}(e,t);if((r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),r&&"buffer"===e.recordingMode&&"buffer"===e.session?.sampled){const t=e.session;t.dirty=!0,e.getOptions().stickySession&&zn(t)}return t},{id:"Replay"})}function rr(e,t){return t.map(({type:t,start:n,end:r,name:i,data:o})=>{const s=e.throttledAddEvent({type:tt.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:i,startTimestamp:n,endTimestamp:r,data:o}}});return"string"===typeof s?Promise.resolve(null):s})}function ir(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(rr(e,[n]),!1)))}}function or(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!En||!e.getOptions()._experiments.traceInternals)&&y(t,(0,p.KU)())}(e,t.name)||e.addUpdate(()=>(rr(e,[t]),!0)))}function sr(e){if(!e)return;const t=new TextEncoder;try{if("string"===typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=(0,k.P4)(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function ar(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function lr(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function cr(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:i,method:o,statusCode:s,request:a,response:l}=t;return{type:e,start:n/1e3,end:r/1e3,name:i,data:{method:o,statusCode:s,request:a,response:l}}}function ur(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function hr(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:i,warnings:o}=function(e){if(!e||"string"!==typeof e)return{body:e};const t=e.length>L,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,L);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}(n);return r.body=i,o?.length&&(r._meta={warnings:o}),r}function dr(e,t){return Object.entries(e).reduce((n,[r,i])=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=i),n},{})}function pr(e,t){const n=function(e,t=O.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(O.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return(0,_.Xr)(n,t)}async function fr(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:o=r}=t,{url:s,method:a,status_code:l=0,request_body_size:c,response_body_size:u}=e.data,h=pr(s,n.networkDetailAllowUrls)&&!pr(s,n.networkDetailDenyUrls),d=h?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const i=n?function(e,t){if(1===e.length&&"string"!==typeof e[0])return gr(e[0],t);if(2===e.length)return gr(e[1],t);return{}}(n,t):{};if(!e)return hr(i,r,void 0);const o=(0,k.Gv)(n),[s,a]=(0,k.sY)(o,kn),l=hr(i,r,s);if(a)return lr(l,a);return l}(n,t.input,c):ur(c),p=await async function(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,i){if(!e&&void 0!==i)return ur(i);const o=r?mr(r.headers,n):{};if(!r||!t&&void 0!==i)return hr(o,i,void 0);const[s,a]=await async function(e){const t=function(e){try{return e.clone()}catch(t){En&&kn.exception(t,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise((t,n)=>{const r=(0,M.wg)(()=>n(new Error("Timeout while trying to read response body")),500);(async function(e){return await e.text()})(e).then(e=>t(e),e=>n(e)).finally(()=>clearTimeout(r))})}(t);return[e]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(En&&kn.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(En&&kn.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}(r),l=function(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:i}){try{const o=e?.length&&void 0===n?sr(e):n;return r?hr(i,o,t?e:void 0):ur(o)}catch(o){return En&&kn.exception(o,"Failed to serialize response body"),hr(i,n,void 0)}}(s,{networkCaptureBodies:t,responseBodySize:i,captureDetails:e,headers:o});if(a)return lr(l,a);return l}(h,n,t.response,u);return{startTimestamp:i,endTimestamp:o,url:s,method:a,statusCode:l,request:d,response:p}}(e,t,n),i=cr("resource.fetch",r);or(n.replay,i)}catch(r){En&&kn.exception(r,"Failed to capture fetch breadcrumb")}}function mr(e,t){const n={};return t.forEach(t=>{e.get(t)&&(n[t]=e.get(t))}),n}function gr(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?mr(n,t):Array.isArray(n)?{}:dr(n,t):{}}async function yr(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:o=r,input:s,xhr:a}=t,{url:l,method:c,status_code:u=0,request_body_size:h,response_body_size:d}=e.data;if(!l)return null;if(!a||!pr(l,n.networkDetailAllowUrls)||pr(l,n.networkDetailDenyUrls)){return{startTimestamp:i,endTimestamp:o,url:l,method:c,statusCode:u,request:ur(h),response:ur(d)}}const p=a[C.Er],f=p?dr(p.request_headers,n.networkRequestHeaders):{},m=dr((0,k.ti)(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?(0,k.sY)(s,kn):[void 0],[v,_]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return function(e,t){try{if("string"===typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"===typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return En&&kn.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return En&&kn.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(n){t.push(n)}return En&&kn.warn("Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=hr(f,h,g),w=hr(m,d,v);return{startTimestamp:i,endTimestamp:o,url:l,method:c,statusCode:u,request:y?lr(b,y):b,response:_?lr(w,_):w}}(e,t,n),i=cr("resource.xhr",r);or(n.replay,i)}catch(r){En&&kn.exception(r,"Failed to capture xhr breadcrumb")}}function vr(e,t){const{xhr:n,input:r}=t;if(!n)return;const i=sr(r),o=n.getResponseHeader("content-length")?ar(n.getResponseHeader("content-length")):function(e,t){try{return sr("json"===t&&e&&"object"===typeof e?JSON.stringify(e):e)}catch{return}}(n.response,n.responseType);void 0!==i&&(e.data.request_body_size=i),void 0!==o&&(e.data.response_body_size=o)}function _r(e){const t=(0,p.KU)();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e?.xhr}(n)&&(vr(t,n),yr(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e?.response}(n)&&(!function(e,t){const{input:n,response:r}=t,i=sr(n?(0,k.Gv)(n):void 0),o=r?ar(r.headers.get("content-length")):void 0;void 0!==i&&(e.data.request_body_size=i),void 0!==o&&(e.data.response_body_size=o)}(t,n),fr(t,n,e))}catch(r){En&&kn.exception(r,"Error when enriching network breadcrumb")}}(a,e,t))}catch{}}function br(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function wr(e,t,n){return function(e,t,n){let r,i,o;const s=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function l(){return c(),r=e(),r}function c(){void 0!==i&&clearTimeout(i),void 0!==o&&clearTimeout(o),i=o=void 0}function u(){return i&&clearTimeout(i),i=a(l,t),s&&void 0===o&&(o=a(l,s)),r}return u.cancel=c,u.flush=function(){return void 0!==i||void 0!==o?l():r},u}(e,t,{...n,setTimeoutImpl:M.wg})}const xr=r.O.navigator;function Sr(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(En&&kn.warn("Received replay event after session expired."));const i=r||!t;t=!0,e.clickDetector&&an(e.clickDetector,n),e.addUpdate(()=>{if("buffer"===e.recordingMode&&i&&e.setInitialState(),!Yn(e,n,i))return!0;if(!i)return!1;const t=e.session;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Yn(e,function(e){const t=e.getOptions();return{type:tt.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,i),"buffer"===e.recordingMode&&t&&e.eventBuffer&&!t.dirty){const n=e.eventBuffer.getEarliestTimestamp();n&&(En&&kn.log(`Updating session start time to earliest event in buffer to ${new Date(n)}`),t.started=n,e.getOptions().stickySession&&zn(t))}return t?.previousSessionId||"session"===e.recordingMode&&e.flush(),!0})}}function Er(e,t,n,r){return(0,b.h4)((0,b.n2)(e,(0,b.Cj)(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"===typeof t?(new TextEncoder).encode(t).length:t.length},t]])}async function Tr({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:i,session:o}){const s=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"===typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:u}=r,h=(0,p.KU)(),d=(0,p.o5)(),f=h?.getTransport(),m=h?.getDsn();if(!h||!f||!m||!o.sampled)return Promise.resolve({});const g={type:"replay_event",replay_start_timestamp:u/1e3,timestamp:i/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:t,segment_id:n,replay_type:o.sampled},y=await async function({client:e,scope:t,replayId:n,event:r}){const i={event_id:n,integrations:"object"!==typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit("preprocessEvent",r,i);const o=await(0,w.mG)(e.getOptions(),r,i,t,e,(0,p.rm)());if(!o)return null;e.emit("postprocessEvent",o,i),o.platform=o.platform||"javascript";const s=e.getSdkMetadata(),{name:a,version:l,settings:c}=s?.sdk||{};return o.sdk={...o.sdk,name:a||"sentry.javascript.unknown",version:l||"0.0.0",settings:c},o}({scope:d,client:h,replayId:t,event:g});if(!y)return h.recordDroppedEvent("event_processor","replay"),En&&kn.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete y.sdkProcessingMetadata;const v=Er(y,s,m,h.getOptions().tunnel);let _;try{_=await f.send(v)}catch(Br){const t=new Error(D);try{t.cause=Br}catch{}throw t}if("number"===typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new Mr(_.statusCode);const b=(0,x.wq)({},_);if((0,x.Jz)(b,"replay"))throw new Ar(b);return _}class Mr extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Ar extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function kr(e,t={count:0,interval:5e3}){const{recordingData:n,onError:r}=e;if(n.length)try{return await Tr(e),!0}catch(Br){if(Br instanceof Mr||Br instanceof Ar)throw Br;if((0,h.o)("Replays",{_retryCount:t.count}),r&&r(Br),t.count>=3){const e=new Error(`${D} - max retries exceeded`);try{e.cause=Br}catch{}throw e}return t.interval*=++t.count,new Promise((r,i)=>{(0,M.wg)(async()=>{try{await kr(e,t),r(!0)}catch(n){i(n)}},t.interval)})}}const Cr="__THROTTLED";function Ir(e,t,n){const r=new Map;let i=!1;return(...o)=>{const s=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach((e,n)=>{n<t&&r.delete(n)})})(s),[...r.values()].reduce((e,t)=>e+t,0)>=t){const e=i;return i=!0,e?"__SKIPPED":Cr}i=!1;const a=r.get(s)||0;return r.set(s,a+1),e(...o)}}class Pr{constructor({options:e,recordingOptions:t}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=wr(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Ir((e,t)=>function(e,t,n){return qn(e,t)?Gn(e,t,n):Promise.resolve(null)}(this,e,t),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),i=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;if(i&&(this.clickDetector=new rn(this,i)),En){const t=e._experiments;kn.setConfig({captureExceptions:!!t.captureExceptions,traceInternals:!!t.traceInternals})}this._handleVisibilityChange=()=>{"visible"===O.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const e=ln({category:"ui.blur"});this._doChangeToBackgroundTasks(e)},this._handleWindowFocus=()=>{const e=ln({category:"ui.focus"});this._doChangeToForegroundTasks(e)},this._handleKeyboardEvent=e=>{fn(this,e)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}handleException(e){En&&kn.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;this._requiresManualStart=r,r||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",En&&kn.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording()):En&&kn.exception(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(En&&kn.log("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(En&&kn.log("Buffering is in progress, call `flush()` to save the replay"));En&&kn.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=$n({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(En&&kn.log("Buffering is in progress, call `flush()` to save the replay"));En&&kn.infoTick("Starting replay in buffer mode");const e=$n({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Yt({...this._recordingOptions,..."buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Sr(this),.../iPhone|iPad|iPod/i.test(xr?.userAgent??"")||/Macintosh/i.test(xr?.userAgent??"")&&xr?.maxTouchPoints&&xr?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{},onMutation:this._onMutationHandler.bind(this),...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(Br){this.handleException(Br)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(Br){return this.handleException(Br),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{En&&kn.log("Stopping Replay"+(t?` triggered by ${t}`:"")),tr(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,Nn(this)}catch(Br){this.handleException(Br)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),En&&kn.log("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),En&&kn.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();En&&kn.log("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&this._isEnabled&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(e){if(!e||!1!==this.session?.sampled)return this.session?.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Bn(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${O.location.pathname}${O.location.hash}${O.location.search}`,t=`${O.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Cr){const e=ln({category:"replay.throttled"});this.addUpdate(()=>!Yn(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}}))}return n}getCurrentRoute(){const e=this.lastActiveSpan||(0,f.Bk)(),t=e&&(0,f.zU)(e),n=(t&&(0,f.et)(t).data||{})[S.i_];if(t&&n&&["route","custom"].includes(n))return(0,f.et)(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Dn({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=$n({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Hn(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{O.document.addEventListener("visibilitychange",this._handleVisibilityChange),O.addEventListener("blur",this._handleWindowBlur),O.addEventListener("focus",this._handleWindowFocus),O.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=(0,p.KU)();(0,I.i)(dn(e)),(0,P._)(ir(e)),Qn(e),_r(e);const n=nr(e);(0,h.SA)(n),t&&(t.on("beforeSendEvent",Xn(e)),t.on("afterSendEvent",Jn(e)),t.on("createDsc",t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)}),t.on("spanStart",t=>{e.lastActiveSpan=t}),t.on("spanEnd",t=>{e.lastActiveSpan=t}),t.on("beforeSendFeedback",async(t,n)=>{const r=e.getSessionId();n?.includeReplay&&e.isEnabled()&&r&&t.contexts?.feedback&&("api"===t.contexts.feedback.source&&await e.sendBufferedReplayOrFlush(),t.contexts.feedback.replay_id=r)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}(this),this._hasInitializedCoreListeners=!0)}catch(Br){this.handleException(Br)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(e=>{r.push((0,A.wv)(e,n))}),r.push((0,A.Pt)(gn(_n,e)),(0,A.a9)(gn(wn,e)),(0,A.hT)(gn(xn,e))),()=>{r.forEach(e=>e())}}(this)}_removeListeners(){try{O.document.removeEventListener("visibilitychange",this._handleVisibilityChange),O.removeEventListener("blur",this._handleWindowBlur),O.removeEventListener("focus",this._handleWindowFocus),O.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(Br){this.handleException(Br)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Vn(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):En&&kn.log("Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:tt.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){let e=(t=this.performanceEntries,t.map(yn).filter(Boolean)).concat(this.replayPerformanceEntries);var t;if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter(e=>e.start>=t)}return Promise.all(rr(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer?.hasEvents&&(await async function(e){try{return Promise.all(rr(e,[br(O.performance.memory)]))}catch{return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await kr({replayId:e,recordingData:i,segmentId:r,eventContext:n,session:this.session,timestamp:t,onError:e=>this.handleException(e)})}catch(Br){this.handleException(Br),this.stop({reason:"sendReplay"});const t=(0,p.KU)();if(t){const n=Br instanceof Ar?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}else En&&kn.error("No session or eventBuffer found to flush.")}async _flush({force:e=!1}={}){if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(En&&kn.error("Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,i=n>this._options.maxReplayDuration+5e3;if(r||i)return En&&kn.log(`Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`),void(r&&this._debouncedFlush());const o=this.eventBuffer;o&&0===this.session.segmentId&&!o.hasCheckout&&En&&kn.log("Flushing initial segment without checkout.");const s=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(Br){this.handleException(Br)}finally{this._flushLock=void 0,s&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&zn(this.session)}_onMutationHandler(e){const{ignoreMutations:t}=this._options._experiments;if(t?.length&&e.some(e=>{const n=function(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}(e.target),r=t.join(",");return n?.matches(r)}))return!1;const n=e.length,r=this._options.mutationLimit,i=r&&n>r;if(n>this._options.mutationBreadcrumbLimit||i){const e=ln({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(e)}return!i||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}function Or(e,t){return[...e,...t].join(",")}const Rr='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Dr=["content-length","content-type","accept"],Lr=Symbol.for("sentry__originalRequestBody");let Nr=!1,Fr=!1;const zr=e=>new Ur(e);class Ur{constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:i=!0,useCompression:o=!0,workerUrl:s,_experiments:a={},maskAllText:l=!0,maskAllInputs:c=!0,blockAllMedia:u=!0,mutationBreadcrumbLimit:h=750,mutationLimit:d=1e4,slowClickTimeout:p=7e3,slowClickIgnoreSelectors:f=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:g=[],networkCaptureBodies:y=!0,networkRequestHeaders:v=[],networkResponseHeaders:_=[],mask:b=[],maskAttributes:w=["title","placeholder","aria-label"],unmask:x=[],block:S=[],unblock:T=[],ignore:M=[],maskFn:A,beforeAddRecordingEvent:k,beforeErrorSampling:C,onError:I,attachRawBodyFromRequest:P=!1}={}){this.name="Replay";const O=function({mask:e,unmask:t,block:n,unblock:r,ignore:i}){return{maskTextSelector:Or(e,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:Or(t,[]),blockSelector:Or(n,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:Or(r,[]),ignoreSelector:Or(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:b,unmask:x,block:S,unblock:T,ignore:M});if(this._recordingOptions={maskAllInputs:c,maskAllText:l,maskInputOptions:{password:!0},maskTextFn:A,maskInputFn:A,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:i,value:o}){return r?i.unmaskTextSelector&&e.matches(i.unmaskTextSelector)?o:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o:o}({maskAttributes:w,maskAllText:l,privacyOptions:O,key:e,value:t,el:n}),...O,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch{}},recordCrossOriginIframes:Boolean(a.recordCrossOriginIframes)},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,5e4),maxReplayDuration:Math.min(r,z),stickySession:i,useCompression:o,workerUrl:s,blockAllMedia:u,maskAllInputs:c,maskAllText:l,mutationBreadcrumbLimit:h,mutationLimit:d,slowClickTimeout:p,slowClickIgnoreSelectors:f,networkDetailAllowUrls:m,networkDetailDenyUrls:g,networkCaptureBodies:y,networkRequestHeaders:jr(v),networkResponseHeaders:jr(_),beforeAddRecordingEvent:k,beforeErrorSampling:C,onError:I,attachRawBodyFromRequest:P,_experiments:a},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Rr}`:Rr,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&(0,E.B)())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Nr}set _isInitialized(e){Nr=e}afterAllSetup(e){(0,E.B)()&&!this._replay&&(this._initialOptions.attachRawBodyFromRequest&&function(){if("undefined"===typeof Request||Fr)return;const e=Request;try{const t=function(t,n){const r=new e(t,n);return null!=n?.body&&(r[Lr]=n.body),r};t.prototype=e.prototype,r.O.Request=t,Fr=!0}catch{}}(),this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(e){if(this._replay?.isEnabled())return this._replay.getSessionId(e)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},i=(0,T.i)(n.replaysSessionSampleRate),o=(0,T.i)(n.replaysOnErrorSampleRate);null==i&&null==o&&(0,c.pq)(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")});null!=i&&(r.sessionSampleRate=i);null!=o&&(r.errorSampleRate=o);return r}(this._initialOptions,e);this._replay=new Pr({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch{}}}function jr(e){return[...Dr,...e.map(e=>e.toLowerCase())]}},63944(e,t,n){"use strict";n.d(t,{De:()=>c,sv:()=>s,yD:()=>l});var r=n(26674),i=n(19282),o=n(64208);const s="sentry-",a=/^sentry-/;function l(e){const t=function(e){if(!e||!(0,o.Kg)(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((e,t)=>{const n=u(t);return Object.entries(n).forEach(([t,n])=>{e[t]=n}),e},{});return u(e)}(e);if(!t)return;const n=Object.entries(t).reduce((e,[t,n])=>{if(t.match(a)){e[t.slice(s.length)]=n}return e},{});return Object.keys(n).length>0?n:void 0}function c(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce((e,[t,n],o)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,a=0===o?s:`${e},${s}`;return a.length>8192?(r.T&&i.Yz.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a},"")}(Object.entries(e).reduce((e,[t,n])=>(n&&(e[`${s}${t}`]=n),e),{}))}function u(e){return e.split(",").map(e=>{const t=e.indexOf("=");if(-1===t)return[];return[e.slice(0,t),e.slice(t+1)].map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})}).reduce((e,[t,n])=>(t&&n&&(e[t]=n),e),{})}},64039(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(41333);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},64208(e,t,n){"use strict";n.d(t,{BD:()=>a,Kg:()=>c,L2:()=>_,NF:()=>u,Qd:()=>d,Qg:()=>g,T2:()=>s,W6:()=>l,bJ:()=>i,gd:()=>m,ks:()=>b,mE:()=>y,sO:()=>h,tH:()=>v,vq:()=>f,xH:()=>p});const r=Object.prototype.toString;function i(e){switch(r.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return v(e,Error)}}function o(e,t){return r.call(e)===`[object ${t}]`}function s(e){return o(e,"ErrorEvent")}function a(e){return o(e,"DOMError")}function l(e){return o(e,"DOMException")}function c(e){return o(e,"String")}function u(e){return"object"===typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function h(e){return null===e||u(e)||"object"!==typeof e&&"function"!==typeof e}function d(e){return o(e,"Object")}function p(e){return"undefined"!==typeof Event&&v(e,Event)}function f(e){return"undefined"!==typeof Element&&v(e,Element)}function m(e){return o(e,"RegExp")}function g(e){return Boolean(e?.then&&"function"===typeof e.then)}function y(e){return d(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function v(e,t){try{return e instanceof t}catch{return!1}}function _(e){return!("object"!==typeof e||null===e||!(e.__isVue||e._isVue||e.__v_isVNode))}function b(e){return"undefined"!==typeof Request&&v(e,Request)}},64251(e,t,n){"use strict";n.d(t,{Cp:()=>a,J0:()=>d,J5:()=>m,Ol:()=>u,SA:()=>h,o:()=>c,r:()=>l});var r=n(57968),i=n(59328),o=n(59671),s=n(18845);function a(e,t){return(0,r.o5)().captureException(e,(0,o.li)(t))}function l(e,t){return(0,r.o5)().captureEvent(e,t)}function c(e,t){(0,r.rm)().setContext(e,t)}function u(){const e=(0,r.KU)();return!1!==e?.getOptions().enabled&&!!e?.getTransport()}function h(e){(0,r.rm)().addEventProcessor(e)}function d(e){const t=(0,r.rm)(),n=(0,r.o5)(),{userAgent:o}=s.O.navigator||{},a=(0,i.fj)({user:n.getUser()||t.getUser(),...o&&{userAgent:o},...e}),l=t.getSession();return"ok"===l?.status&&(0,i.qO)(l,{status:"exited"}),p(),t.setSession(a),a}function p(){const e=(0,r.rm)(),t=(0,r.o5)().getSession()||e.getSession();t&&(0,i.Vu)(t),f(),e.setSession()}function f(){const e=(0,r.rm)(),t=(0,r.KU)(),n=e.getSession();n&&t&&t.captureSession(n)}function m(e=!1){e?p():f()}},64721(e,t,n){"use strict";n.d(t,{l$:()=>E,oR:()=>g});var r=n(96540),i=n(40961);const o=Array(12).fill(0),s=({visible:e,className:t})=>r.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},r.createElement("div",{className:"sonner-spinner"},o.map((e,t)=>r.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),a=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),l=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),c=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),u=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),h=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let d=1;const p=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,i="number"===typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:d++,o=this.toasts.find(e=>e.id===i),s=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(t=>t.id===i?(this.publish({...t,...e,id:i,title:n}),{...t,...e,id:i,dismissible:s,title:n}):t):this.addToast({title:n,...r,dismissible:s,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!==typeof t.description?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o,s=void 0!==n;const a=i.then(async e=>{o=["resolve",e];if(r.isValidElement(e))s=!1,this.create({id:n,type:"default",message:e});else if(f(e)&&!e.ok){s=!1;const i="function"===typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,o="function"===typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,a="object"===typeof i&&!r.isValidElement(i)?i:{message:i};this.create({id:n,type:"error",description:o,...a})}else if(e instanceof Error){s=!1;const i="function"===typeof t.error?await t.error(e):t.error,o="function"===typeof t.description?await t.description(e):t.description,a="object"===typeof i&&!r.isValidElement(i)?i:{message:i};this.create({id:n,type:"error",description:o,...a})}else if(void 0!==t.success){s=!1;const i="function"===typeof t.success?await t.success(e):t.success,o="function"===typeof t.description?await t.description(e):t.description,a="object"===typeof i&&!r.isValidElement(i)?i:{message:i};this.create({id:n,type:"success",description:o,...a})}}).catch(async e=>{if(o=["reject",e],void 0!==t.error){s=!1;const i="function"===typeof t.error?await t.error(e):t.error,o="function"===typeof t.description?await t.description(e):t.description,a="object"===typeof i&&!r.isValidElement(i)?i:{message:i};this.create({id:n,type:"error",description:o,...a})}}).finally(()=>{s&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),l=()=>new Promise((e,t)=>a.then(()=>"reject"===o[0]?t(o[1]):e(o[1])).catch(t));return"string"!==typeof n&&"number"!==typeof n?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||d++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},f=e=>e&&"object"===typeof e&&"ok"in e&&"boolean"===typeof e.ok&&"status"in e&&"number"===typeof e.status,m=(e,t)=>{const n=(null==t?void 0:t.id)||d++;return p.addToast({title:e,...t,id:n}),n},g=Object.assign(m,{success:p.success,info:p.info,warning:p.warning,error:p.error,custom:p.custom,message:p.message,promise:p.promise,dismiss:p.dismiss,loading:p.loading},{getHistory:()=>p.toasts,getToasts:()=>p.getActiveToasts()});function y(e){return void 0!==e.label}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const v=3,_=14;function b(...e){return e.filter(Boolean).join(" ")}const w=e=>{var t,n,i,o,d,p,f,m,g;const{invert:v,toast:_,unstyled:w,interacting:x,setHeights:S,visibleToasts:E,heights:T,index:M,toasts:A,expanded:k,removeToast:C,defaultRichColors:I,closeButton:P,style:O,cancelButtonStyle:R,actionButtonStyle:D,className:L="",descriptionClassName:N="",duration:F,position:z,gap:U,expandByDefault:j,classNames:B,icons:V,closeButtonAriaLabel:H="Close toast"}=e,[$,Y]=r.useState(null),[G,q]=r.useState(null),[W,K]=r.useState(!1),[Z,J]=r.useState(!1),[X,Q]=r.useState(!1),[ee,te]=r.useState(!1),[ne,re]=r.useState(!1),[ie,oe]=r.useState(0),[se,ae]=r.useState(0),le=r.useRef(_.duration||F||4e3),ce=r.useRef(null),ue=r.useRef(null),he=0===M,de=M+1<=E,pe=_.type,fe=!1!==_.dismissible,me=_.className||"",ge=_.descriptionClassName||"",ye=r.useMemo(()=>T.findIndex(e=>e.toastId===_.id)||0,[T,_.id]),ve=r.useMemo(()=>{var e;return null!=(e=_.closeButton)?e:P},[_.closeButton,P]),_e=r.useMemo(()=>_.duration||F||4e3,[_.duration,F]),be=r.useRef(0),we=r.useRef(0),xe=r.useRef(0),Se=r.useRef(null),[Ee,Te]=z.split("-"),Me=r.useMemo(()=>T.reduce((e,t,n)=>n>=ye?e:e+t.height,0),[T,ye]),Ae=(()=>{const[e,t]=r.useState(document.hidden);return r.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),ke=_.invert||v,Ce="loading"===pe;we.current=r.useMemo(()=>ye*U+Me,[ye,Me]),r.useEffect(()=>{le.current=_e},[_e]),r.useEffect(()=>{K(!0)},[]),r.useEffect(()=>{const e=ue.current;if(e){const t=e.getBoundingClientRect().height;return ae(t),S(e=>[{toastId:_.id,height:t,position:_.position},...e]),()=>S(e=>e.filter(e=>e.toastId!==_.id))}},[S,_.id]),r.useLayoutEffect(()=>{if(!W)return;const e=ue.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,ae(n),S(e=>e.find(e=>e.toastId===_.id)?e.map(e=>e.toastId===_.id?{...e,height:n}:e):[{toastId:_.id,height:n,position:_.position},...e])},[W,_.title,_.description,S,_.id,_.jsx,_.action,_.cancel]);const Ie=r.useCallback(()=>{J(!0),oe(we.current),S(e=>e.filter(e=>e.toastId!==_.id)),setTimeout(()=>{C(_)},200)},[_,C,S,we]);r.useEffect(()=>{if(_.promise&&"loading"===pe||_.duration===1/0||"loading"===_.type)return;let e;return k||x||Ae?(()=>{if(xe.current<be.current){const e=(new Date).getTime()-be.current;le.current=le.current-e}xe.current=(new Date).getTime()})():le.current!==1/0&&(be.current=(new Date).getTime(),e=setTimeout(()=>{null==_.onAutoClose||_.onAutoClose.call(_,_),Ie()},le.current)),()=>clearTimeout(e)},[k,x,_,pe,Ae,Ie]),r.useEffect(()=>{_.delete&&(Ie(),null==_.onDismiss||_.onDismiss.call(_,_))},[Ie,_.delete]);const Pe=_.icon||(null==V?void 0:V[pe])||(e=>{switch(e){case"success":return a;case"info":return c;case"warning":return l;case"error":return u;default:return null}})(pe);var Oe,Re;return r.createElement("li",{tabIndex:0,ref:ue,className:b(L,me,null==B?void 0:B.toast,null==_||null==(t=_.classNames)?void 0:t.toast,null==B?void 0:B.default,null==B?void 0:B[pe],null==_||null==(n=_.classNames)?void 0:n[pe]),"data-sonner-toast":"","data-rich-colors":null!=(Oe=_.richColors)?Oe:I,"data-styled":!Boolean(_.jsx||_.unstyled||w),"data-mounted":W,"data-promise":Boolean(_.promise),"data-swiped":ne,"data-removed":Z,"data-visible":de,"data-y-position":Ee,"data-x-position":Te,"data-index":M,"data-front":he,"data-swiping":X,"data-dismissible":fe,"data-type":pe,"data-invert":ke,"data-swipe-out":ee,"data-swipe-direction":G,"data-expanded":Boolean(k||j&&W),"data-testid":_.testId,style:{"--index":M,"--toasts-before":M,"--z-index":A.length-M,"--offset":`${Z?ie:we.current}px`,"--initial-height":j?"auto":`${se}px`,...O,..._.style},onDragEnd:()=>{Q(!1),Y(null),Se.current=null},onPointerDown:e=>{2!==e.button&&!Ce&&fe&&(ce.current=new Date,oe(we.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(Q(!0),Se.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(ee||!fe)return;Se.current=null;const r=Number((null==(e=ue.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),i=Number((null==(t=ue.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),o=(new Date).getTime()-(null==(n=ce.current)?void 0:n.getTime()),s="x"===$?r:i,a=Math.abs(s)/o;if(Math.abs(s)>=45||a>.11)return oe(we.current),null==_.onDismiss||_.onDismiss.call(_,_),q("x"===$?r>0?"right":"left":i>0?"down":"up"),Ie(),void te(!0);var l,c;null==(l=ue.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=ue.current)||c.style.setProperty("--swipe-amount-y","0px"),re(!1),Q(!1),Y(null)},onPointerMove:t=>{var n,r,i;if(!Se.current||!fe)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const o=t.clientY-Se.current.y,s=t.clientX-Se.current.x;var a;const l=null!=(a=e.swipeDirections)?a:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(z);!$&&(Math.abs(s)>1||Math.abs(o)>1)&&Y(Math.abs(s)>Math.abs(o)?"x":"y");let c={x:0,y:0};const u=e=>1/(1.5+Math.abs(e)/20);if("y"===$){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&o<0||l.includes("bottom")&&o>0)c.y=o;else{const e=o*u(o);c.y=Math.abs(e)<Math.abs(o)?e:o}}else if("x"===$&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&s<0||l.includes("right")&&s>0)c.x=s;else{const e=s*u(s);c.x=Math.abs(e)<Math.abs(s)?e:s}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&re(!0),null==(r=ue.current)||r.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(i=ue.current)||i.style.setProperty("--swipe-amount-y",`${c.y}px`)}},ve&&!_.jsx&&"loading"!==pe?r.createElement("button",{"aria-label":H,"data-disabled":Ce,"data-close-button":!0,onClick:Ce||!fe?()=>{}:()=>{Ie(),null==_.onDismiss||_.onDismiss.call(_,_)},className:b(null==B?void 0:B.closeButton,null==_||null==(i=_.classNames)?void 0:i.closeButton)},null!=(Re=null==V?void 0:V.close)?Re:h):null,(pe||_.icon||_.promise)&&null!==_.icon&&(null!==(null==V?void 0:V[pe])||_.icon)?r.createElement("div",{"data-icon":"",className:b(null==B?void 0:B.icon,null==_||null==(o=_.classNames)?void 0:o.icon)},_.promise||"loading"===_.type&&!_.icon?_.icon||function(){var e,t;return(null==V?void 0:V.loading)?r.createElement("div",{className:b(null==B?void 0:B.loader,null==_||null==(t=_.classNames)?void 0:t.loader,"sonner-loader"),"data-visible":"loading"===pe},V.loading):r.createElement(s,{className:b(null==B?void 0:B.loader,null==_||null==(e=_.classNames)?void 0:e.loader),visible:"loading"===pe})}():null,"loading"!==_.type?Pe:null):null,r.createElement("div",{"data-content":"",className:b(null==B?void 0:B.content,null==_||null==(d=_.classNames)?void 0:d.content)},r.createElement("div",{"data-title":"",className:b(null==B?void 0:B.title,null==_||null==(p=_.classNames)?void 0:p.title)},_.jsx?_.jsx:"function"===typeof _.title?_.title():_.title),_.description?r.createElement("div",{"data-description":"",className:b(N,ge,null==B?void 0:B.description,null==_||null==(f=_.classNames)?void 0:f.description)},"function"===typeof _.description?_.description():_.description):null),r.isValidElement(_.cancel)?_.cancel:_.cancel&&y(_.cancel)?r.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||R,onClick:e=>{y(_.cancel)&&fe&&(null==_.cancel.onClick||_.cancel.onClick.call(_.cancel,e),Ie())},className:b(null==B?void 0:B.cancelButton,null==_||null==(m=_.classNames)?void 0:m.cancelButton)},_.cancel.label):null,r.isValidElement(_.action)?_.action:_.action&&y(_.action)?r.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||D,onClick:e=>{y(_.action)&&(null==_.action.onClick||_.action.onClick.call(_.action,e),e.defaultPrevented||Ie())},className:b(null==B?void 0:B.actionButton,null==_||null==(g=_.classNames)?void 0:g.actionButton)},_.action.label):null)};function x(){if("undefined"===typeof window)return"ltr";if("undefined"===typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function S(e,t){const n={};return[e,t].forEach((e,t)=>{const r=1===t,i=r?"--mobile-offset":"--offset",o=r?"16px":"24px";function s(e){["top","right","bottom","left"].forEach(t=>{n[`${i}-${t}`]="number"===typeof e?`${e}px`:e})}"number"===typeof e||"string"===typeof e?s(e):"object"===typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n[`${i}-${t}`]=o:n[`${i}-${t}`]="number"===typeof e[t]?`${e[t]}px`:e[t]}):s(o)}),n}const E=r.forwardRef(function(e,t){const{id:n,invert:o,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:u,offset:h,mobileOffset:d,theme:f="light",richColors:m,duration:g,style:y,visibleToasts:b=v,toastOptions:E,dir:T=x(),gap:M=_,icons:A,containerAriaLabel:k="Notifications"}=e,[C,I]=r.useState([]),P=r.useMemo(()=>n?C.filter(e=>e.toasterId===n):C.filter(e=>!e.toasterId),[C,n]),O=r.useMemo(()=>Array.from(new Set([s].concat(P.filter(e=>e.position).map(e=>e.position)))),[P,s]),[R,D]=r.useState([]),[L,N]=r.useState(!1),[F,z]=r.useState(!1),[U,j]=r.useState("system"!==f?f:"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=r.useRef(null),V=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=r.useRef(null),$=r.useRef(!1),Y=r.useCallback(e=>{I(t=>{var n;return(null==(n=t.find(t=>t.id===e.id))?void 0:n.delete)||p.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return r.useEffect(()=>p.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{I(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{i.flushSync(()=>{I(t=>{const n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]})})})}),[C]),r.useEffect(()=>{if("system"!==f)return void j(f);if("system"===f&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?j("dark"):j("light")),"undefined"===typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{j(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{j(e?"dark":"light")}catch(t){console.error(t)}})}},[f]),r.useEffect(()=>{C.length<=1&&N(!1)},[C]),r.useEffect(()=>{const e=e=>{var t;var n;a.every(t=>e[t]||e.code===t)&&(N(!0),null==(n=B.current)||n.focus());"Escape"!==e.code||document.activeElement!==B.current&&!(null==(t=B.current)?void 0:t.contains(document.activeElement))||N(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),r.useEffect(()=>{if(B.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,$.current=!1)}},[B.current]),r.createElement("section",{ref:t,"aria-label":`${k} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((t,n)=>{var i;const[s,a]=t.split("-");return P.length?r.createElement("ol",{key:t,dir:"auto"===T?x():T,tabIndex:-1,ref:B,className:u,"data-sonner-toaster":!0,"data-sonner-theme":U,"data-y-position":s,"data-x-position":a,style:{"--front-toast-height":`${(null==(i=R[0])?void 0:i.height)||0}px`,"--width":"356px","--gap":`${M}px`,...y,...S(h,d)},onBlur:e=>{$.current&&!e.currentTarget.contains(e.relatedTarget)&&($.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||$.current||($.current=!0,H.current=e.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{F||N(!1)},onDragEnd:()=>N(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||z(!0)},onPointerUp:()=>z(!1)},P.filter(e=>!e.position&&0===n||e.position===t).map((n,i)=>{var s,a;return r.createElement(w,{key:n.id,icons:A,index:i,toast:n,defaultRichColors:m,duration:null!=(s=null==E?void 0:E.duration)?s:g,className:null==E?void 0:E.className,descriptionClassName:null==E?void 0:E.descriptionClassName,invert:o,visibleToasts:b,closeButton:null!=(a=null==E?void 0:E.closeButton)?a:c,interacting:F,position:t,style:null==E?void 0:E.style,unstyled:null==E?void 0:E.unstyled,classNames:null==E?void 0:E.classNames,cancelButtonStyle:null==E?void 0:E.cancelButtonStyle,actionButtonStyle:null==E?void 0:E.actionButtonStyle,closeButtonAriaLabel:null==E?void 0:E.closeButtonAriaLabel,removeToast:Y,toasts:P.filter(e=>e.position==n.position),heights:R.filter(e=>e.position==n.position),setHeights:D,expandByDefault:l,gap:M,expanded:L,swipeDirections:e.swipeDirections})})):null}))})},64741(e,t,n){"use strict";n.d(t,{A:()=>c});var r=n(23149),i=n(41917);const o=function(){return i.A.Date.now()};var s=n(50751),a=Math.max,l=Math.min;const c=function(e,t,n){var i,c,u,h,d,p,f=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=i,r=c;return i=c=void 0,f=t,h=e.apply(r,n)}function _(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-f>=u}function b(){var e=o();if(_(e))return w(e);d=setTimeout(b,function(e){var n=t-(e-p);return g?l(n,u-(e-f)):n}(e))}function w(e){return d=void 0,y&&i?v(e):(i=c=void 0,h)}function x(){var e=o(),n=_(e);if(i=arguments,c=this,p=e,n){if(void 0===d)return function(e){return f=e,d=setTimeout(b,t),m?v(e):h}(p);if(g)return clearTimeout(d),d=setTimeout(b,t),v(p)}return void 0===d&&(d=setTimeout(b,t)),h}return t=(0,s.A)(t)||0,(0,r.A)(n)&&(m=!!n.leading,u=(g="maxWait"in n)?a((0,s.A)(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),x.cancel=function(){void 0!==d&&clearTimeout(d),f=0,i=p=c=d=void 0},x.flush=function(){return void 0===d?h:w(o())},x}},64841(e,t,n){"use strict";n.d(t,{A:()=>a});var r=n(72136),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof module&&module&&!module.nodeType&&module,s=o&&o.exports===i&&r.A.process;const a=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}()},65159(e,t,n){"use strict";n.d(t,{zD:()=>Ie,Z0:()=>Ne});var r=Symbol.for("immer-nothing"),i=Symbol.for("immer-draftable"),o=Symbol.for("immer-state");function s(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var a=Object,l=a.getPrototypeOf,c="constructor",u="prototype",h="configurable",d="enumerable",p="writable",f="value",m=e=>!!e&&!!e[o];function g(e){return!!e&&(_(e)||T(e)||!!e[i]||!!e[c]?.[i]||M(e)||A(e))}var y=a[u][c].toString(),v=new WeakMap;function _(e){if(!e||!k(e))return!1;const t=l(e);if(null===t||t===a[u])return!0;const n=a.hasOwnProperty.call(t,c)&&t[c];if(n===Object)return!0;if(!C(n))return!1;let r=v.get(n);return void 0===r&&(r=Function.toString.call(n),v.set(n,r)),r===y}function b(e,t,n=!0){if(0===w(e)){(n?Reflect.ownKeys(e):a.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,r)=>t(r,n,e))}function w(e){const t=e[o];return t?t.type_:T(e)?1:M(e)?2:A(e)?3:0}var x=(e,t,n=w(e))=>2===n?e.has(t):a[u].hasOwnProperty.call(e,t),S=(e,t,n=w(e))=>2===n?e.get(t):e[t],E=(e,t,n,r=w(e))=>{2===r?e.set(t,n):3===r?e.add(n):e[t]=n};var T=Array.isArray,M=e=>e instanceof Map,A=e=>e instanceof Set,k=e=>"object"===typeof e,C=e=>"function"===typeof e,I=e=>"boolean"===typeof e;var P=e=>e.copy_||e.base_,O=e=>e.modified_?e.copy_:e.base_;function R(e,t){if(M(e))return new Map(e);if(A(e))return new Set(e);if(T(e))return Array[u].slice.call(e);const n=_(e);if(!0===t||"class_only"===t&&!n){const t=a.getOwnPropertyDescriptors(e);delete t[o];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],o=t[i];!1===o[p]&&(o[p]=!0,o[h]=!0),(o.get||o.set)&&(t[i]={[h]:!0,[p]:!0,[d]:o[d],[f]:e[i]})}return a.create(l(e),t)}{const t=l(e);if(null!==t&&n)return{...e};const r=a.create(t);return a.assign(r,e)}}function D(e,t=!1){return N(e)||m(e)||!g(e)||(w(e)>1&&a.defineProperties(e,{set:L,add:L,clear:L,delete:L}),a.freeze(e),t&&b(e,(e,t)=>{D(t,!0)},!1)),e}var L={[f]:function(){s(2)}};function N(e){return null===e||!k(e)||a.isFrozen(e)}var F="MapSet",z="Patches",U="ArrayMethods",j={};function B(e){const t=j[e];return t||s(0),t}var V,H=e=>!!j[e];var $=()=>V;function Y(e,t){t&&(e.patchPlugin_=B(z),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function G(e){q(e),e.drafts_.forEach(K),e.drafts_=null}function q(e){e===V&&(V=e.parent_)}var W=e=>V={drafts_:[],parent_:V,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:H(F)?B(F):void 0,arrayMethodsPlugin_:H(U)?B(U):void 0};function K(e){const t=e[o];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(void 0!==e&&e!==n){n[o].modified_&&(G(t),s(4)),g(e)&&(e=J(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[o].base_,e,t)}else e=J(t,n);return function(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&D(t,n)}(t,e,!0),G(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==r?e:void 0}function J(e,t){if(N(t))return t;const n=t[o];if(!n){return ie(t,e.handledSet_,e)}if(!Q(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:t}=n;if(t)for(;t.length>0;){t.pop()(e)}ne(n,e)}return n.copy_}function X(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Q=(e,t)=>e.scope_===t,ee=[];function te(e,t,n,r){const i=P(e),o=e.type_;if(void 0!==r){if(S(i,r,o)===t)return void E(i,r,n,o)}if(!e.draftLocations_){const t=e.draftLocations_=new Map;b(i,(e,n)=>{if(m(n)){const r=t.get(n)||[];r.push(e),t.set(n,r)}})}const s=e.draftLocations_.get(t)??ee;for(const a of s)E(i,a,n,o)}function ne(e,t){if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const r=n.getPath(e);r&&n.generatePatches_(e,r,t)}X(e)}}function re(e,t,n){const{scope_:r}=e;if(m(n)){const i=n[o];Q(i,r)&&i.callbacks_.push(function(){ue(e);const r=O(i);te(e,n,r,t)})}else g(n)&&e.callbacks_.push(function(){const i=P(e);3===e.type_?i.has(n)&&ie(n,r.handledSet_,r):S(i,t,e.type_)===n&&r.drafts_.length>1&&!0===(e.assigned_.get(t)??!1)&&e.copy_&&ie(S(e.copy_,t,e.type_),r.handledSet_,r)})}function ie(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||m(e)||t.has(e)||!g(e)||N(e)||(t.add(e),b(e,(r,i)=>{if(m(i)){const t=i[o];if(Q(t,n)){const n=O(t);E(e,r,n,e.type_),X(t)}}else g(i)&&ie(i,t,n)})),e}var oe={get(e,t){if(t===o)return e;let n=e.scope_.arrayMethodsPlugin_;const r=1===e.type_&&"string"===typeof t;if(r&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const i=P(e);if(!x(i,t,e.type_))return function(e,t,n){const r=le(t,n);return r?f in r?r[f]:r.get?.call(e.draft_):void 0}(e,i,t);const s=i[t];if(e.finalized_||!g(s))return s;if(r&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&function(e){const t=+e;return Number.isInteger(t)&&String(t)===e}(t))return s;if(s===ae(e.base_,t)){ue(e);const n=1===e.type_?+t:t,r=he(e.scope_,s,e,n);return e.copy_[n]=r}return s},has:(e,t)=>t in P(e),ownKeys:e=>Reflect.ownKeys(P(e)),set(e,t,n){const r=le(P(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=ae(P(e),t),a=r?.[o];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(((i=n)===(s=r)?0!==i||1/i===1/s:i!==i&&s!==s)&&(void 0!==n||x(e.base_,t,e.type_)))return!0;ue(e),ce(e)}var i,s;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),re(e,t,n)),!0},deleteProperty:(e,t)=>(ue(e),void 0!==ae(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),ce(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=P(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{[p]:!0,[h]:1!==e.type_||"length"!==t,[d]:r[d],[f]:n[t]}:r},defineProperty(){s(11)},getPrototypeOf:e=>l(e.base_),setPrototypeOf(){s(12)}},se={};for(let je in oe){let e=oe[je];se[je]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}function ae(e,t){const n=e[o];return(n?P(n):e)[t]}function le(e,t){if(!(t in e))return;let n=l(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=l(n)}}function ce(e){e.modified_||(e.modified_=!0,e.parent_&&ce(e.parent_))}function ue(e){e.copy_||(e.assigned_=new Map,e.copy_=R(e.base_,e.scope_.immer_.useStrictShallowCopy_))}se.deleteProperty=function(e,t){return se.set.call(this,e,t,void 0)},se.set=function(e,t,n){return oe.set.call(this,e[0],t,n,e[0])};function he(e,t,n,r){const[i,o]=M(t)?B(F).proxyMap_(t,n):A(t)?B(F).proxySet_(t,n):function(e,t){const n=T(e),r={type_:n?1:0,scope_:t?t.scope_:$(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,o=oe;n&&(i=[r],o=se);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,[a,r]}(t,n);return(n?.scope_??$()).drafts_.push(i),o.callbacks_=n?.callbacks_??[],o.key_=r,n&&void 0!==r?function(e,t,n){e.callbacks_.push(function(r){const i=t;if(!i||!Q(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const o=O(i);te(e,i.draft_??i,o,n),ne(i,r)})}(n,o,r):o.callbacks_.push(function(e){e.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:t}=e;o.modified_&&t&&t.generatePatches_(o,[],e)}),i}function de(e){if(!g(e)||N(e))return e;const t=e[o];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=R(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=R(e,!0);return b(n,(e,t)=>{E(n,e,de(t))},r),t&&(t.finalized_=!1),n}var pe=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,n)=>{if(C(e)&&!C(t)){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,e=>t.call(this,e,...i))}}let i;if(C(t)||s(6),void 0===n||C(n)||s(7),g(e)){const r=W(this),o=he(r,e,void 0);let s=!0;try{i=t(o),s=!1}finally{s?G(r):q(r)}return Y(r,n),Z(i,r)}if(!e||!k(e)){if(i=t(e),void 0===i&&(i=e),i===r&&(i=void 0),this.autoFreeze_&&D(i,!0),n){const t=[],r=[];B(z).generateReplacementPatches_(e,i,{patches_:t,inversePatches_:r}),n(t,r)}return i}s(1)},this.produceWithPatches=(e,t)=>{if(C(e))return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},I(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),I(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),I(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){g(e)||s(8),m(e)&&(e=function(e){m(e)||s(10);return de(e)}(e));const t=W(this),n=he(t,e,void 0);return n[o].isManual_=!0,q(t),n}finishDraft(e,t){const n=e&&e[o];n&&n.isManual_||s(9);const{scope_:r}=n;return Y(r,t),Z(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=B(z).applyPatches_;return m(e)?r(e,t):this.produce(e,e=>r(e,t))}},fe=pe.produce;function me(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function ge(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var ye=e=>e&&"function"===typeof e.match;function ve(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(Ue(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return me(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}Symbol.species;function _e(e){return g(e)?fe(e,()=>{}):e}function be(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function we(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Ue(28));if(r in t)throw new Error(Ue(29));return t[r]=n,i},addAsyncThunk:(e,r)=>(r.pending&&(t[e.pending.type]=r.pending),r.rejected&&(t[e.rejected.type]=r.rejected),r.fulfilled&&(t[e.fulfilled.type]=r.fulfilled),r.settled&&n.push({matcher:e.settled,reducer:r.settled}),i),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var xe=(e,t)=>ye(e)?e.match(t):e(t);function Se(...e){return t=>e.some(e=>xe(e,t))}var Ee=(e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Te=["name","message","stack","code"],Me=class{constructor(e,t){this.payload=e,this.meta=t}_type},Ae=class{constructor(e,t){this.payload=e,this.meta=t}_type},ke=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of Te)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},Ce="External signal was aborted",Ie=(()=>{function e(e,t,n){const r=ve(e+"/fulfilled",(e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}})),i=ve(e+"/pending",(e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}})),o=ve(e+"/rejected",(e,t,r,i,o)=>({payload:i,error:(n&&n.serializeError||ke)(e||"Rejected"),meta:{...o||{},arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}}));return Object.assign(function(e,{signal:s}={}){return(a,l,c)=>{const u=n?.idGenerator?n.idGenerator(e):Ee(),h=new AbortController;let d,p;function f(e){p=e,h.abort()}s&&(s.aborted?f(Ce):s.addEventListener("abort",()=>f(Ce),{once:!0}));const m=async function(){let s;try{let o=n?.condition?.(e,{getState:l,extra:c});if(null!==(m=o)&&"object"===typeof m&&"function"===typeof m.then&&(o=await o),!1===o||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const g=new Promise((e,t)=>{d=()=>{t({name:"AbortError",message:p||"Aborted"})},h.signal.addEventListener("abort",d,{once:!0})});a(i(u,e,n?.getPendingMeta?.({requestId:u,arg:e},{getState:l,extra:c}))),s=await Promise.race([g,Promise.resolve(t(e,{dispatch:a,getState:l,extra:c,requestId:u,signal:h.signal,abort:f,rejectWithValue:(e,t)=>new Me(e,t),fulfillWithValue:(e,t)=>new Ae(e,t)})).then(t=>{if(t instanceof Me)throw t;return t instanceof Ae?r(t.payload,u,e,t.meta):r(t,u,e)})])}catch(g){s=g instanceof Me?o(null,u,e,g.payload,g.meta):o(g,u,e)}finally{d&&h.signal.removeEventListener("abort",d)}var m;return n&&!n.dispatchConditionRejection&&o.match(s)&&s.meta.condition||a(s),s}();return Object.assign(m,{abort:f,requestId:u,arg:e,unwrap:()=>m.then(Pe)})}},{pending:i,rejected:o,fulfilled:r,settled:Se(o,r),typePrefix:e})}return e.withTypes=()=>e,e})();function Pe(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Oe=Symbol.for("rtk-slice-createasyncthunk");function Re(e,t){return`${e}/${t}`}function De({creators:e}={}){const t=e?.asyncThunk?.[Oe];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(Ue(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(i),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Ue(12));if(n in s.sliceCaseReducersByType)throw new Error(Ue(13));return s.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(s.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?we(e.extraReducers):[e.extraReducers],i={...t,...s.sliceCaseReducersByType};return function(e,t){let n,[r,i,o]=we(t);if("function"===typeof e)n=()=>_e(e());else{const t=_e(e);n=()=>t}function s(e=n(),t){let s=[r[t.type],...i.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===s.filter(e=>!!e).length&&(s=[o]),s.reduce((e,n)=>{if(n){if(m(e)){const r=n(e,t);return void 0===r?e:r}if(g(e))return fe(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return s.getInitialState=n,s}(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}o.forEach(r=>{const o=i[r],s={reducerName:r,type:Re(n,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(Ue(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?ve(e,s):ve(e))}(s,o,a):function({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ue(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:l,settled:c,options:u}=n,h=i(e,o,u);r.exposeAction(t,h),s&&r.addCase(h.fulfilled,s);a&&r.addCase(h.pending,a);l&&r.addCase(h.rejected,l);c&&r.addMatcher(h.settled,c);r.exposeCaseReducer(t,{fulfilled:s||Fe,pending:a||Fe,rejected:l||Fe,settled:c||Fe})}(s,o,a,t)});const c=e=>e,u=new Map,h=new WeakMap;let d;function p(e,t){return d||(d=l()),d(e,t)}function f(){return d||(d=l()),d.getInitialState()}function y(t,n=!1){function r(e){let i=e[t];return"undefined"===typeof i&&n&&(i=be(h,r,f)),i}function i(t=c){const r=be(u,n,()=>new WeakMap);return be(r,t,()=>{const r={};for(const[i,o]of Object.entries(e.selectors??{}))r[i]=Le(o,t,()=>be(h,t,f),n);return r})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const v={name:n,reducer:p,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:f,...y(r),injectInto(e,{reducerPath:t,...n}={}){const i=t??r;return e.inject({reducerPath:i,reducer:p},n),{...v,...y(i,!0)}}};return v}}function Le(e,t,n,r){function i(i,...o){let s=t(i);return"undefined"===typeof s&&r&&(s=n()),e(s,...o)}return i.unwrapped=e,i}var Ne=De();function Fe(){}var{assign:ze}=Object;Symbol.for("rtk-state-proxy-original");function Ue(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}},65387(e,t,n){"use strict";n.d(t,{A:()=>h});var r=n(836);function i(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,o=(e=>{const t=Object.keys(e).map(t=>({key:t,val:e[t]}))||[];return t.sort((e,t)=>e.val-t.val),t.reduce((e,t)=>({...e,[t.key]:t.val}),{})})(t),s=Object.keys(o);function a(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const o=s.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==o&&"number"===typeof t[s[o]]?t[s[o]]:i)-r/100}${n})`}return{keys:s,values:o,up:a,down:l,between:c,only:function(e){return s.indexOf(e)+1<s.length?c(e,s[s.indexOf(e)+1]):a(e)},not:function(e){const t=s.indexOf(e);return 0===t?a(s[1]):t===s.length-1?l(s[t]):c(e,s[s.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}var o=n(63132);const s={borderRadius:4};var a=n(33372),l=n(95548),c=n(98762);function u(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const h=function(e={},...t){const{breakpoints:n={},palette:h={},spacing:d,shape:p={},...f}=e,m=i(n),g=(0,a.A)(d);let y=(0,r.A)({breakpoints:m,direction:"ltr",components:{},palette:{mode:"light",...h},spacing:g,shape:{...s,...p}},f);return y=(0,o.Ay)(y),y.applyStyles=u,y=t.reduce((e,t)=>(0,r.A)(e,t),y),y.unstable_sxConfig={...c.A,...f?.unstable_sxConfig},y.unstable_sx=function(e){return(0,l.A)({sx:e,theme:this})},y}},65826(e){e.exports=function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}}}()},66401(e,t,n){"use strict";n.d(t,{A:()=>d});var r=n(14453),i=n(12434),o=n(25175),s=n(92049),a=n(38446),l=n(41200),c=n(97271),u=n(54749),h=Object.prototype.hasOwnProperty;const d=function(e){if(null==e)return!0;if((0,a.A)(e)&&((0,s.A)(e)||"string"==typeof e||"function"==typeof e.splice||(0,l.A)(e)||(0,u.A)(e)||(0,o.A)(e)))return!e.length;var t=(0,i.A)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,c.A)(e))return!(0,r.A)(e).length;for(var n in e)if(h.call(e,n))return!1;return!0}},66708(e,t,n){"use strict";function r(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){var i,o,s;i=e,o=t,s=n[t],(o=r(o))in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}n.d(t,{c:()=>l});var a=(e,t,n)=>{for(var r of Object.keys(e)){var i;if(e[r]!==(null!==(i=t[r])&&void 0!==i?i:n[r]))return!1}return!0},l=e=>{var t=t=>{var n=e.defaultClassName,r=o(o({},e.defaultVariants),t);for(var i in r){var s,l=null!==(s=r[i])&&void 0!==s?s:e.defaultVariants[i];if(null!=l){var c=l;"boolean"===typeof c&&(c=!0===c?"true":"false");var u=e.variantClassNames[i][c];u&&(n+=" "+u)}}for(var[h,d]of e.compoundVariants)a(h,r,e.defaultVariants)&&(n+=" "+d);return n};return t.variants=()=>Object.keys(e.variantClassNames),t.classNames={get base(){return e.defaultClassName.split(" ")[0]},get variants(){return s(e.variantClassNames,e=>s(e,e=>e.split(" ")[0]))}},t}},66743(e,t,n){"use strict";var r=n(89353);e.exports=Function.prototype.bind||r},66984(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e,t){return e===t||e!==e&&t!==t}},67607(e,t,n){"use strict";n.d(t,{CH:()=>o,Dl:()=>s,f:()=>a,kg:()=>i,nt:()=>r,zm:()=>l});function r(e){return"isRelative"in e}function i(e,t){const n=e.indexOf("://")<=0&&0!==e.indexOf("//"),r=t??(n?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;const t=new URL(e,r);return n?{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash}:t}catch{}}function o(e){if(r(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function s(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function a(e){return e.split(/[?#]/,1)[0]}function l(e,t=!0){if(e.startsWith("data:")){const n=e.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",i=e.includes(";base64,"),o=e.indexOf(",");let s="";if(t&&-1!==o){const t=e.slice(o+1);s=t.length>10?`${t.slice(0,10)}... [truncated]`:t}return`data:${r}${i?",base64":""}${s?`,${s}`:""}`}return e}},67695(e,t,n){"use strict";n.d(t,{Ay:()=>b});var r=n(49649),i=n(836),o=n(65387),s=n(95548),a=n(18139);const l=(0,o.A)();function c(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function u(e,t){return t&&e&&"object"===typeof e&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function h(e){return e?(t,n)=>n[e]:null}function d(e,t,n){const i="function"===typeof t?t(e):t;if(Array.isArray(i))return i.flatMap(t=>d(e,t,n));if(Array.isArray(i?.variants)){let t;if(i.isProcessed)t=n?u(i.style,n):i.style;else{const{variants:e,...o}=i;t=n?u((0,r.tT)(o),n):o}return p(e,i.variants,[t],n)}return i?.isProcessed?n?u((0,r.tT)(i.style),n):i.style:n?u((0,r.tT)(i),n):i}function p(e,t,n=[],i=void 0){let o;e:for(let s=0;s<t.length;s+=1){const a=t[s];if("function"===typeof a.props){if(o??={...e,...e.ownerState,ownerState:e.ownerState},!a.props(o))continue}else for(const t in a.props)if(e[t]!==a.props[t]&&e.ownerState?.[t]!==a.props[t])continue e;"function"===typeof a.style?(o??={...e,...e.ownerState,ownerState:e.ownerState},n.push(i?u((0,r.tT)(a.style(o)),i):a.style(o))):n.push(i?u((0,r.tT)(a.style),i):a.style)}return n}function f(e,t){}function m(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}var g=n(4894),y=n(31355),v=n(98855);const _=function(e={}){const{themeId:t,defaultTheme:n=l,rootShouldForwardProp:o=c,slotShouldForwardProp:g=c}=e;function y(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return(e,t={})=>{(0,r.HX)(e,e=>e.filter(e=>e!==s.A));const{name:n,slot:l,skipVariantsResolver:v,skipSx:_,overridesResolver:b=h(m(l)),...w}=t,x=n&&n.startsWith("Mui")||l?"components":"custom",S=void 0!==v?v:l&&"Root"!==l&&"root"!==l||!1,E=_||!1;let T=c;"Root"===l||"root"===l?T=o:l?T=g:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(T=void 0);const M=(0,r.Ay)(e,{shouldForwardProp:T,label:f(n,l),...w}),A=e=>{if(e.__emotion_real===e)return e;if("function"===typeof e)return function(t){return d(t,e,t.theme.modularCssLayers?x:void 0)};if((0,i.Q)(e)){const t=(0,a.A)(e);return function(e){return t.variants?d(e,t,e.theme.modularCssLayers?x:void 0):e.theme.modularCssLayers?u(t.style,x):t.style}}return e},k=(...t)=>{const r=[],i=t.map(A),o=[];if(r.push(y),n&&b&&o.push(function(e){const t=e.theme,r=t.components?.[n]?.styleOverrides;if(!r)return null;const i={};for(const n in r)i[n]=d(e,r[n],e.theme.modularCssLayers?"theme":void 0);return b(e,i)}),n&&!S&&o.push(function(e){const t=e.theme,r=t?.components?.[n]?.variants;return r?p(e,r,[],e.theme.modularCssLayers?"theme":void 0):null}),E||o.push(s.A),Array.isArray(i[0])){const e=i.shift(),t=new Array(r.length).fill(""),n=new Array(o.length).fill("");let s;s=[...t,...e,...n],s.raw=[...t,...e.raw,...n],r.unshift(s)}const a=[...r,...i,...o],l=M(...a);return e.muiName&&(l.muiName=e.muiName),l};return M.withConfig&&(k.withConfig=M.withConfig),k}}({themeId:y.A,defaultTheme:g.A,rootShouldForwardProp:v.A}),b=_},67848(e,t,n){"use strict";n.d(t,{Ij:()=>l,U1:()=>c,FJ:()=>o,dK:()=>a});var r=n(12375),i=n(17044);function o(e){let{swiper:t,extendParams:n,on:o,emit:s}=e;const a=(0,r.a)();let l;n({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),t.mousewheel={enabled:!1};let c,u=(0,i.d)();const h=[];function d(){t.enabled&&(t.mouseEntered=!0)}function p(){t.enabled&&(t.mouseEntered=!1)}function f(e){return!(t.params.mousewheel.thresholdDelta&&e.delta<t.params.mousewheel.thresholdDelta)&&(!(t.params.mousewheel.thresholdTime&&(0,i.d)()-u<t.params.mousewheel.thresholdTime)&&(e.delta>=6&&(0,i.d)()-u<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),s("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),s("scroll",e.raw)),u=(new a.Date).getTime(),!1)))}function m(e){let n=e,r=!0;if(!t.enabled)return;if(e.target.closest(`.${t.params.mousewheel.noMousewheelClass}`))return;const o=t.params.mousewheel;t.params.cssMode&&n.preventDefault();let a=t.el;"container"!==t.params.mousewheel.eventsTarget&&(a=document.querySelector(t.params.mousewheel.eventsTarget));const u=a&&a.contains(n.target);if(!t.mouseEntered&&!u&&!o.releaseOnEdges)return!0;n.originalEvent&&(n=n.originalEvent);let d=0;const p=t.rtlTranslate?-1:1,m=function(e){let t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,i=10*n,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),e.shiftKey&&!r&&(r=i,i=0),(r||i)&&e.deltaMode&&(1===e.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}(n);if(o.forceToAxis)if(t.isHorizontal()){if(!(Math.abs(m.pixelX)>Math.abs(m.pixelY)))return!0;d=-m.pixelX*p}else{if(!(Math.abs(m.pixelY)>Math.abs(m.pixelX)))return!0;d=-m.pixelY}else d=Math.abs(m.pixelX)>Math.abs(m.pixelY)?-m.pixelX*p:-m.pixelY;if(0===d)return!0;o.invert&&(d=-d);let g=t.getTranslate()+d*o.sensitivity;if(g>=t.minTranslate()&&(g=t.minTranslate()),g<=t.maxTranslate()&&(g=t.maxTranslate()),r=!!t.params.loop||!(g===t.minTranslate()||g===t.maxTranslate()),r&&t.params.nested&&n.stopPropagation(),t.params.freeMode&&t.params.freeMode.enabled){const e={time:(0,i.d)(),delta:Math.abs(d),direction:Math.sign(d)},r=c&&e.time<c.time+500&&e.delta<=c.delta&&e.direction===c.direction;if(!r){c=void 0;let a=t.getTranslate()+d*o.sensitivity;const u=t.isBeginning,p=t.isEnd;if(a>=t.minTranslate()&&(a=t.minTranslate()),a<=t.maxTranslate()&&(a=t.maxTranslate()),t.setTransition(0),t.setTranslate(a),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses(),(!u&&t.isBeginning||!p&&t.isEnd)&&t.updateSlidesClasses(),t.params.loop&&t.loopFix({direction:e.direction<0?"next":"prev",byMousewheel:!0}),t.params.freeMode.sticky){clearTimeout(l),l=void 0,h.length>=15&&h.shift();const n=h.length?h[h.length-1]:void 0,r=h[0];if(h.push(e),n&&(e.delta>n.delta||e.direction!==n.direction))h.splice(0);else if(h.length>=15&&e.time-r.time<500&&r.delta-e.delta>=1&&e.delta<=6){const n=d>0?.8:.2;c=e,h.splice(0),l=(0,i.n)(()=>{!t.destroyed&&t.params&&t.slideToClosest(t.params.speed,!0,void 0,n)},0)}l||(l=(0,i.n)(()=>{if(t.destroyed||!t.params)return;c=e,h.splice(0),t.slideToClosest(t.params.speed,!0,void 0,.5)},500))}if(r||s("scroll",n),t.params.autoplay&&t.params.autoplayDisableOnInteraction&&t.autoplay.stop(),o.releaseOnEdges&&(a===t.minTranslate()||a===t.maxTranslate()))return!0}}else{const n={time:(0,i.d)(),delta:Math.abs(d),direction:Math.sign(d),raw:e};h.length>=2&&h.shift();const r=h.length?h[h.length-1]:void 0;if(h.push(n),r?(n.direction!==r.direction||n.delta>r.delta||n.time>r.time+150)&&f(n):f(n),function(e){const n=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&n.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&n.releaseOnEdges)return!0;return!1}(n))return!0}return n.preventDefault?n.preventDefault():n.returnValue=!1,!1}function g(e){let n=t.el;"container"!==t.params.mousewheel.eventsTarget&&(n=document.querySelector(t.params.mousewheel.eventsTarget)),n[e]("mouseenter",d),n[e]("mouseleave",p),n[e]("wheel",m)}function y(){return t.params.cssMode?(t.wrapperEl.removeEventListener("wheel",m),!0):!t.mousewheel.enabled&&(g("addEventListener"),t.mousewheel.enabled=!0,!0)}function v(){return t.params.cssMode?(t.wrapperEl.addEventListener(event,m),!0):!!t.mousewheel.enabled&&(g("removeEventListener"),t.mousewheel.enabled=!1,!0)}o("init",()=>{!t.params.mousewheel.enabled&&t.params.cssMode&&v(),t.params.mousewheel.enabled&&y()}),o("destroy",()=>{t.params.cssMode&&y(),t.mousewheel.enabled&&v()}),Object.assign(t.mousewheel,{enable:y,disable:v})}function s(e){return void 0===e&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function a(e){let{swiper:t,extendParams:n,on:r,emit:o}=e;const a="swiper-pagination";let l;n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${a}-bullet`,bulletActiveClass:`${a}-bullet-active`,modifierClass:`${a}-`,currentClass:`${a}-current`,totalClass:`${a}-total`,hiddenClass:`${a}-hidden`,progressbarFillClass:`${a}-progressbar-fill`,progressbarOppositeClass:`${a}-progressbar-opposite`,clickableClass:`${a}-clickable`,lockClass:`${a}-lock`,horizontalClass:`${a}-horizontal`,verticalClass:`${a}-vertical`,paginationDisabledClass:`${a}-disabled`}}),t.pagination={el:null,bullets:[]};let c=0;function u(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&0===t.pagination.el.length}function h(e,n){const{bulletActiveClass:r}=t.params.pagination;e&&(e=e[("prev"===n?"previous":"next")+"ElementSibling"])&&(e.classList.add(`${r}-${n}`),(e=e[("prev"===n?"previous":"next")+"ElementSibling"])&&e.classList.add(`${r}-${n}-${n}`))}function d(e){const n=e.target.closest(s(t.params.pagination.bulletClass));if(!n)return;e.preventDefault();const r=(0,i.h)(n)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===r)return;const e=(o=t.realIndex,a=r,l=t.slides.length,(a%=l)===1+(o%=l)?"next":a===o-1?"previous":void 0);"next"===e?t.slideNext():"previous"===e?t.slidePrev():t.slideToLoop(r)}else t.slideTo(r);var o,a,l}function p(){const e=t.rtl,n=t.params.pagination;if(u())return;let r,a,d=t.pagination.el;d=(0,i.m)(d);const p=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,f=t.params.loop?Math.ceil(p/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(a=t.previousRealIndex||0,r=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):"undefined"!==typeof t.snapIndex?(r=t.snapIndex,a=t.previousSnapIndex):(a=t.previousIndex||0,r=t.activeIndex||0),"bullets"===n.type&&t.pagination.bullets&&t.pagination.bullets.length>0){const o=t.pagination.bullets;let s,u,p;if(n.dynamicBullets&&(l=(0,i.f)(o[0],t.isHorizontal()?"width":"height",!0),d.forEach(e=>{e.style[t.isHorizontal()?"width":"height"]=l*(n.dynamicMainBullets+4)+"px"}),n.dynamicMainBullets>1&&void 0!==a&&(c+=r-(a||0),c>n.dynamicMainBullets-1?c=n.dynamicMainBullets-1:c<0&&(c=0)),s=Math.max(r-c,0),u=s+(Math.min(o.length,n.dynamicMainBullets)-1),p=(u+s)/2),o.forEach(e=>{const t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(e=>`${n.bulletActiveClass}${e}`)].map(e=>"string"===typeof e&&e.includes(" ")?e.split(" "):e).flat();e.classList.remove(...t)}),d.length>1)o.forEach(e=>{const o=(0,i.h)(e);o===r?e.classList.add(...n.bulletActiveClass.split(" ")):t.isElement&&e.setAttribute("part","bullet"),n.dynamicBullets&&(o>=s&&o<=u&&e.classList.add(...`${n.bulletActiveClass}-main`.split(" ")),o===s&&h(e,"prev"),o===u&&h(e,"next"))});else{const e=o[r];if(e&&e.classList.add(...n.bulletActiveClass.split(" ")),t.isElement&&o.forEach((e,t)=>{e.setAttribute("part",t===r?"bullet-active":"bullet")}),n.dynamicBullets){const e=o[s],t=o[u];for(let r=s;r<=u;r+=1)o[r]&&o[r].classList.add(...`${n.bulletActiveClass}-main`.split(" "));h(e,"prev"),h(t,"next")}}if(n.dynamicBullets){const r=Math.min(o.length,n.dynamicMainBullets+4),i=(l*r-l)/2-p*l,s=e?"right":"left";o.forEach(e=>{e.style[t.isHorizontal()?s:"top"]=`${i}px`})}}d.forEach((e,i)=>{if("fraction"===n.type&&(e.querySelectorAll(s(n.currentClass)).forEach(e=>{e.textContent=n.formatFractionCurrent(r+1)}),e.querySelectorAll(s(n.totalClass)).forEach(e=>{e.textContent=n.formatFractionTotal(f)})),"progressbar"===n.type){let i;i=n.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";const o=(r+1)/f;let a=1,l=1;"horizontal"===i?a=o:l=o,e.querySelectorAll(s(n.progressbarFillClass)).forEach(e=>{e.style.transform=`translate3d(0,0,0) scaleX(${a}) scaleY(${l})`,e.style.transitionDuration=`${t.params.speed}ms`})}"custom"===n.type&&n.renderCustom?(e.innerHTML=n.renderCustom(t,r+1,f),0===i&&o("paginationRender",e)):(0===i&&o("paginationRender",e),o("paginationUpdate",e)),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](n.lockClass)})}function f(){const e=t.params.pagination;if(u())return;const n=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let r=t.pagination.el;r=(0,i.m)(r);let a="";if("bullets"===e.type){let r=t.params.loop?Math.ceil(n/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&r>n&&(r=n);for(let n=0;n<r;n+=1)e.renderBullet?a+=e.renderBullet.call(t,n,e.bulletClass):a+=`<${e.bulletElement} ${t.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(a=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(a=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),t.pagination.bullets=[],r.forEach(n=>{"custom"!==e.type&&(n.innerHTML=a||""),"bullets"===e.type&&t.pagination.bullets.push(...n.querySelectorAll(s(e.bulletClass)))}),"custom"!==e.type&&o("paginationRender",r[0])}function m(){t.params.pagination=function(e,t,n,r){return e.params.createElements&&Object.keys(r).forEach(o=>{if(!n[o]&&!0===n.auto){let s=(0,i.e)(e.el,`.${r[o]}`)[0];s||(s=(0,i.c)("div",r[o]),s.className=r[o],e.el.append(s)),n[o]=s,t[o]=s}}),n}(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let n;"string"===typeof e.el&&t.isElement&&(n=t.el.querySelector(e.el)),n||"string"!==typeof e.el||(n=[...document.querySelectorAll(e.el)]),n||(n=e.el),n&&0!==n.length&&(t.params.uniqueNavElements&&"string"===typeof e.el&&Array.isArray(n)&&n.length>1&&(n=[...t.el.querySelectorAll(e.el)],n.length>1&&(n=n.filter(e=>(0,i.a)(e,".swiper")[0]===t.el)[0])),Array.isArray(n)&&1===n.length&&(n=n[0]),Object.assign(t.pagination,{el:n}),n=(0,i.m)(n),n.forEach(n=>{"bullets"===e.type&&e.clickable&&n.classList.add(...(e.clickableClass||"").split(" ")),n.classList.add(e.modifierClass+e.type),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(n.classList.add(`${e.modifierClass}${e.type}-dynamic`),c=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&n.classList.add(e.progressbarOppositeClass),e.clickable&&n.addEventListener("click",d),t.enabled||n.classList.add(e.lockClass)}))}function g(){const e=t.params.pagination;if(u())return;let n=t.pagination.el;n&&(n=(0,i.m)(n),n.forEach(n=>{n.classList.remove(e.hiddenClass),n.classList.remove(e.modifierClass+e.type),n.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(n.classList.remove(...(e.clickableClass||"").split(" ")),n.removeEventListener("click",d))})),t.pagination.bullets&&t.pagination.bullets.forEach(t=>t.classList.remove(...e.bulletActiveClass.split(" ")))}r("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:n}=t.pagination;n=(0,i.m)(n),n.forEach(n=>{n.classList.remove(e.horizontalClass,e.verticalClass),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)})}),r("init",()=>{!1===t.params.pagination.enabled?y():(m(),f(),p())}),r("activeIndexChange",()=>{"undefined"===typeof t.snapIndex&&p()}),r("snapIndexChange",()=>{p()}),r("snapGridLengthChange",()=>{f(),p()}),r("destroy",()=>{g()}),r("enable disable",()=>{let{el:e}=t.pagination;e&&(e=(0,i.m)(e),e.forEach(e=>e.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),r("lock unlock",()=>{p()}),r("click",(e,n)=>{const r=n.target,s=(0,i.m)(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&s&&s.length>0&&!r.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&r===t.navigation.nextEl||t.navigation.prevEl&&r===t.navigation.prevEl))return;const e=s[0].classList.contains(t.params.pagination.hiddenClass);o(!0===e?"paginationShow":"paginationHide"),s.forEach(e=>e.classList.toggle(t.params.pagination.hiddenClass))}});const y=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=(0,i.m)(e),e.forEach(e=>e.classList.add(t.params.pagination.paginationDisabledClass))),g()};Object.assign(t.pagination,{enable:()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=(0,i.m)(e),e.forEach(e=>e.classList.remove(t.params.pagination.paginationDisabledClass))),m(),f(),p()},disable:y,render:f,update:p,init:m,destroy:g})}function l(e){let t,n,{swiper:i,extendParams:o,on:s,emit:a,params:l}=e;i.autoplay={running:!1,paused:!1,timeLeft:0},o({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let c,u,h,d,p,f,m,g,y=l&&l.autoplay?l.autoplay.delay:3e3,v=l&&l.autoplay?l.autoplay.delay:3e3,_=(new Date).getTime();function b(e){i&&!i.destroyed&&i.wrapperEl&&e.target===i.wrapperEl&&(i.wrapperEl.removeEventListener("transitionend",b),g||e.detail&&e.detail.bySwiperTouchMove||M())}const w=()=>{if(i.destroyed||!i.autoplay.running)return;i.autoplay.paused?u=!0:u&&(v=c,u=!1);const e=i.autoplay.paused?c:_+v-(new Date).getTime();i.autoplay.timeLeft=e,a("autoplayTimeLeft",e,e/y),n=requestAnimationFrame(()=>{w()})},x=e=>{if(i.destroyed||!i.autoplay.running)return;cancelAnimationFrame(n),w();let r="undefined"===typeof e?i.params.autoplay.delay:e;y=i.params.autoplay.delay,v=i.params.autoplay.delay;const o=(()=>{let e;if(e=i.virtual&&i.params.virtual.enabled?i.slides.filter(e=>e.classList.contains("swiper-slide-active"))[0]:i.slides[i.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(o)&&o>0&&"undefined"===typeof e&&(r=o,y=o,v=o),c=r;const s=i.params.speed,l=()=>{i&&!i.destroyed&&(i.params.autoplay.reverseDirection?!i.isBeginning||i.params.loop||i.params.rewind?(i.slidePrev(s,!0,!0),a("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(i.slides.length-1,s,!0,!0),a("autoplay")):!i.isEnd||i.params.loop||i.params.rewind?(i.slideNext(s,!0,!0),a("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(0,s,!0,!0),a("autoplay")),i.params.cssMode&&(_=(new Date).getTime(),requestAnimationFrame(()=>{x()})))};return r>0?(clearTimeout(t),t=setTimeout(()=>{l()},r)):requestAnimationFrame(()=>{l()}),r},S=()=>{_=(new Date).getTime(),i.autoplay.running=!0,x(),a("autoplayStart")},E=()=>{i.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(n),a("autoplayStop")},T=(e,n)=>{if(i.destroyed||!i.autoplay.running)return;clearTimeout(t),e||(m=!0);const r=()=>{a("autoplayPause"),i.params.autoplay.waitForTransition?i.wrapperEl.addEventListener("transitionend",b):M()};if(i.autoplay.paused=!0,n)return f&&(c=i.params.autoplay.delay),f=!1,void r();const o=c||i.params.autoplay.delay;c=o-((new Date).getTime()-_),i.isEnd&&c<0&&!i.params.loop||(c<0&&(c=0),r())},M=()=>{i.isEnd&&c<0&&!i.params.loop||i.destroyed||!i.autoplay.running||(_=(new Date).getTime(),m?(m=!1,x(c)):x(),i.autoplay.paused=!1,a("autoplayResume"))},A=()=>{if(i.destroyed||!i.autoplay.running)return;const e=(0,r.g)();"hidden"===e.visibilityState&&(m=!0,T(!0)),"visible"===e.visibilityState&&M()},k=e=>{"mouse"===e.pointerType&&(m=!0,g=!0,i.animating||i.autoplay.paused||T(!0))},C=e=>{"mouse"===e.pointerType&&(g=!1,i.autoplay.paused&&M())};s("init",()=>{i.params.autoplay.enabled&&(i.params.autoplay.pauseOnMouseEnter&&(i.el.addEventListener("pointerenter",k),i.el.addEventListener("pointerleave",C)),(0,r.g)().addEventListener("visibilitychange",A),S())}),s("destroy",()=>{i.el&&"string"!==typeof i.el&&(i.el.removeEventListener("pointerenter",k),i.el.removeEventListener("pointerleave",C)),(0,r.g)().removeEventListener("visibilitychange",A),i.autoplay.running&&E()}),s("_freeModeStaticRelease",()=>{(d||m)&&M()}),s("_freeModeNoMomentumRelease",()=>{i.params.autoplay.disableOnInteraction?E():T(!0,!0)}),s("beforeTransitionStart",(e,t,n)=>{!i.destroyed&&i.autoplay.running&&(n||!i.params.autoplay.disableOnInteraction?T(!0,!0):E())}),s("sliderFirstMove",()=>{!i.destroyed&&i.autoplay.running&&(i.params.autoplay.disableOnInteraction?E():(h=!0,d=!1,m=!1,p=setTimeout(()=>{m=!0,d=!0,T(!0)},200)))}),s("touchEnd",()=>{if(!i.destroyed&&i.autoplay.running&&h){if(clearTimeout(p),clearTimeout(t),i.params.autoplay.disableOnInteraction)return d=!1,void(h=!1);d&&i.params.cssMode&&M(),d=!1,h=!1}}),s("slideChange",()=>{!i.destroyed&&i.autoplay.running&&(f=!0)}),Object.assign(i.autoplay,{start:S,stop:E,pause:T,resume:M})}function c(e){let{swiper:t,extendParams:n,emit:r,once:o}=e;n({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(t,{freeMode:{onTouchStart:function(){if(t.params.cssMode)return;const e=t.getTranslate();t.setTranslate(e),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})},onTouchMove:function(){if(t.params.cssMode)return;const{touchEventsData:e,touches:n}=t;0===e.velocities.length&&e.velocities.push({position:n[t.isHorizontal()?"startX":"startY"],time:e.touchStartTime}),e.velocities.push({position:n[t.isHorizontal()?"currentX":"currentY"],time:(0,i.d)()})},onTouchEnd:function(e){let{currentPos:n}=e;if(t.params.cssMode)return;const{params:s,wrapperEl:a,rtlTranslate:l,snapGrid:c,touchEventsData:u}=t,h=(0,i.d)()-u.touchStartTime;if(n<-t.minTranslate())t.slideTo(t.activeIndex);else if(n>-t.maxTranslate())t.slides.length<c.length?t.slideTo(c.length-1):t.slideTo(t.slides.length-1);else{if(s.freeMode.momentum){if(u.velocities.length>1){const e=u.velocities.pop(),n=u.velocities.pop(),r=e.position-n.position,o=e.time-n.time;t.velocity=r/o,t.velocity/=2,Math.abs(t.velocity)<s.freeMode.minimumVelocity&&(t.velocity=0),(o>150||(0,i.d)()-e.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=s.freeMode.momentumVelocityRatio,u.velocities.length=0;let e=1e3*s.freeMode.momentumRatio;const n=t.velocity*e;let h=t.translate+n;l&&(h=-h);let d,p=!1;const f=20*Math.abs(t.velocity)*s.freeMode.momentumBounceRatio;let m;if(h<t.maxTranslate())s.freeMode.momentumBounce?(h+t.maxTranslate()<-f&&(h=t.maxTranslate()-f),d=t.maxTranslate(),p=!0,u.allowMomentumBounce=!0):h=t.maxTranslate(),s.loop&&s.centeredSlides&&(m=!0);else if(h>t.minTranslate())s.freeMode.momentumBounce?(h-t.minTranslate()>f&&(h=t.minTranslate()+f),d=t.minTranslate(),p=!0,u.allowMomentumBounce=!0):h=t.minTranslate(),s.loop&&s.centeredSlides&&(m=!0);else if(s.freeMode.sticky){let e;for(let t=0;t<c.length;t+=1)if(c[t]>-h){e=t;break}h=Math.abs(c[e]-h)<Math.abs(c[e-1]-h)||"next"===t.swipeDirection?c[e]:c[e-1],h=-h}if(m&&o("transitionEnd",()=>{t.loopFix()}),0!==t.velocity){if(e=l?Math.abs((-h-t.translate)/t.velocity):Math.abs((h-t.translate)/t.velocity),s.freeMode.sticky){const n=Math.abs((l?-h:h)-t.translate),r=t.slidesSizesGrid[t.activeIndex];e=n<r?s.speed:n<2*r?1.5*s.speed:2.5*s.speed}}else if(s.freeMode.sticky)return void t.slideToClosest();s.freeMode.momentumBounce&&p?(t.updateProgress(d),t.setTransition(e),t.setTranslate(h),t.transitionStart(!0,t.swipeDirection),t.animating=!0,(0,i.k)(a,()=>{t&&!t.destroyed&&u.allowMomentumBounce&&(r("momentumBounce"),t.setTransition(s.speed),setTimeout(()=>{t.setTranslate(d),(0,i.k)(a,()=>{t&&!t.destroyed&&t.transitionEnd()})},0))})):t.velocity?(r("_freeModeNoMomentumRelease"),t.updateProgress(h),t.setTransition(e),t.setTranslate(h),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,(0,i.k)(a,()=>{t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(h),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(s.freeMode.sticky)return void t.slideToClosest();s.freeMode&&r("_freeModeNoMomentumRelease")}(!s.freeMode.momentum||h>=s.longSwipesMs)&&(r("_freeModeStaticRelease"),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}}}})}},68002(e){"use strict";e.exports=Math.min},68154(e,t,n){"use strict";n.d(t,{A:()=>ce,m:()=>le});var r=n(5556),i=n.n(r),o=n(52098),s=n.n(o),a=n(30115),l=n.n(a),c=n(96540),u=n(45228),h=n.n(u),d="bodyAttributes",p="htmlAttributes",f="titleAttributes",m={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},g=(Object.keys(m).map(function(e){return m[e]}),"charset"),y="cssText",v="href",_="http-equiv",b="innerHTML",w="itemprop",x="name",S="property",E="rel",T="src",M="target",A={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},k="defaultTitle",C="defer",I="encodeSpecialCharacters",P="onChangeClientState",O="titleTemplate",R=Object.keys(A).reduce(function(e,t){return e[A[t]]=t,e},{}),D=[m.NOSCRIPT,m.SCRIPT,m.STYLE],L="data-react-helmet",N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},j=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},B=function(e){var t=G(e,m.TITLE),n=G(e,O);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var r=G(e,k);return t||r||void 0},V=function(e){return G(e,P)||function(){}},H=function(e,t){return t.filter(function(t){return"undefined"!==typeof t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return z({},e,t)},{})},$=function(e,t){return t.filter(function(e){return"undefined"!==typeof e[m.BASE]}).map(function(e){return e[m.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}return t},[])},Y=function(e,t,n){var r={};return n.filter(function(t){return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&J("Helmet: "+e+' should be of type "Array". Instead found type "'+N(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var i={};n.filter(function(e){for(var n=void 0,o=Object.keys(e),s=0;s<o.length;s++){var a=o[s],l=a.toLowerCase();-1===t.indexOf(l)||n===E&&"canonical"===e[n].toLowerCase()||l===E&&"stylesheet"===e[l].toLowerCase()||(n=l),-1===t.indexOf(a)||a!==b&&a!==y&&a!==w||(n=a)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][c]&&(i[n][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=o[s],l=h()({},r[a],i[a]);r[a]=l}return e},[]).reverse()},G=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},q=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){q(t)},0)}}(),W=function(e){return clearTimeout(e)},K="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||q:n.g.requestAnimationFrame||q,Z="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||W:n.g.cancelAnimationFrame||W,J=function(e){return console&&"function"===typeof console.warn&&console.warn(e)},X=null,Q=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,s=e.metaTags,a=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,h=e.title,d=e.titleAttributes;ne(m.BODY,r),ne(m.HTML,i),te(h,d);var p={baseTag:re(m.BASE,n),linkTags:re(m.LINK,o),metaTags:re(m.META,s),noscriptTags:re(m.NOSCRIPT,a),scriptTags:re(m.SCRIPT,c),styleTags:re(m.STYLE,u)},f={},g={};Object.keys(p).forEach(function(e){var t=p[e],n=t.newTags,r=t.oldTags;n.length&&(f[e]=n),r.length&&(g[e]=p[e].oldTags)}),t&&t(),l(e,f,g)},ee=function(e){return Array.isArray(e)?e.join(""):e},te=function(e,t){"undefined"!==typeof e&&document.title!==e&&(document.title=ee(e)),ne(m.TITLE,t)},ne=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(L),i=r?r.split(","):[],o=[].concat(i),s=Object.keys(t),a=0;a<s.length;a++){var l=s[a],c=t[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=o.indexOf(l);-1!==u&&o.splice(u,1)}for(var h=o.length-1;h>=0;h--)n.removeAttribute(o[h]);i.length===o.length?n.removeAttribute(L):n.getAttribute(L)!==s.join(",")&&n.setAttribute(L,s.join(","))}},re=function(e,t){var n=document.head||document.querySelector(m.HEAD),r=n.querySelectorAll(e+"["+L+"]"),i=Array.prototype.slice.call(r),o=[],s=void 0;return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===b)n.innerHTML=t.innerHTML;else if(r===y)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var a="undefined"===typeof t[r]?"":t[r];n.setAttribute(r,a)}n.setAttribute(L,"true"),i.some(function(e,t){return s=t,n.isEqualNode(e)})?i.splice(s,1):o.push(n)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),o.forEach(function(e){return n.appendChild(e)}),{oldTags:i,newTags:o}},ie=function(e){return Object.keys(e).reduce(function(t,n){var r="undefined"!==typeof e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[A[n]||n]=e[n],t},t)},se=function(e,t,n){switch(e){case m.TITLE:return{toComponent:function(){return function(e,t,n){var r,i=((r={key:t})[L]=!0,r),o=oe(n,i);return[c.createElement(m.TITLE,o,t)]}(0,t.title,t.titleAttributes)},toString:function(){return function(e,t,n,r){var i=ie(n),o=ee(t);return i?"<"+e+" "+L+'="true" '+i+">"+j(o,r)+"</"+e+">":"<"+e+" "+L+'="true">'+j(o,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case d:case p:return{toComponent:function(){return oe(t)},toString:function(){return ie(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,n){var r,i=((r={key:n})[L]=!0,r);return Object.keys(t).forEach(function(e){var n=A[e]||e;if(n===b||n===y){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]}),c.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,n){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===b||e===y)}).reduce(function(e,t){var i="undefined"===typeof r[t]?t:t+'="'+j(r[t],n)+'"';return e?e+" "+i:i},""),o=r.innerHTML||r.cssText||"",s=-1===D.indexOf(e);return t+"<"+e+" "+L+'="true" '+i+(s?"/>":">"+o+"</"+e+">")},"")}(e,t,n)}}}},ae=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,o=e.linkTags,s=e.metaTags,a=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,h=void 0===u?"":u,f=e.titleAttributes;return{base:se(m.BASE,t,r),bodyAttributes:se(d,n,r),htmlAttributes:se(p,i,r),link:se(m.LINK,o,r),meta:se(m.META,s,r),noscript:se(m.NOSCRIPT,a,r),script:se(m.SCRIPT,l,r),style:se(m.STYLE,c,r),title:se(m.TITLE,{title:h,titleAttributes:f},r)}},le=function(e){var t,n;return n=t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.shouldComponentUpdate=function(e){return!l()(this.props,e)},n.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case m.SCRIPT:case m.NOSCRIPT:return{innerHTML:t};case m.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,r=e.arrayTypeChildren,i=e.newChildProps,o=e.nestedChildren;return z({},r,((t={})[n.type]=[].concat(r[n.type]||[],[z({},i,this.mapNestedChildrenToProps(n,o))]),t))},n.prototype.mapObjectTypeChildren=function(e){var t,n,r=e.child,i=e.newProps,o=e.newChildProps,s=e.nestedChildren;switch(r.type){case m.TITLE:return z({},i,((t={})[r.type]=s,t.titleAttributes=z({},o),t));case m.BODY:return z({},i,{bodyAttributes:z({},o)});case m.HTML:return z({},i,{htmlAttributes:z({},o)})}return z({},i,((n={})[r.type]=z({},o),n))},n.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=z({},t);return Object.keys(e).forEach(function(t){var r;n=z({},n,((r={})[t]=e[t],r))}),n},n.prototype.warnOnInvalidChildren=function(e,t){return!0},n.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return c.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,o=i.children,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[R[n]||n]=e[n],t},t)}(U(i,["children"]));switch(n.warnOnInvalidChildren(e,o),e.type){case m.LINK:case m.META:case m.NOSCRIPT:case m.SCRIPT:case m.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:s,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:s,nestedChildren:o})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},n.prototype.render=function(){var t=this.props,n=t.children,r=U(t,["children"]),i=z({},r);return n&&(i=this.mapChildrenToProps(n,i)),c.createElement(e,i)},F(n,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),n}(c.Component),t.propTypes={base:i().object,bodyAttributes:i().object,children:i().oneOfType([i().arrayOf(i().node),i().node]),defaultTitle:i().string,defer:i().bool,encodeSpecialCharacters:i().bool,htmlAttributes:i().object,link:i().arrayOf(i().object),meta:i().arrayOf(i().object),noscript:i().arrayOf(i().object),onChangeClientState:i().func,script:i().arrayOf(i().object),style:i().arrayOf(i().object),title:i().string,titleAttributes:i().object,titleTemplate:i().string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var t=e.rewind();return t||(t=ae({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},n}(s()(function(e){return{baseTag:$([v,M],e),bodyAttributes:H(d,e),defer:G(e,C),encode:G(e,I),htmlAttributes:H(p,e),linkTags:Y(m.LINK,[E,v],e),metaTags:Y(m.META,[x,g,_,S,w],e),noscriptTags:Y(m.NOSCRIPT,[b],e),onChangeClientState:V(e),scriptTags:Y(m.SCRIPT,[T,b],e),styleTags:Y(m.STYLE,[y],e),title:B(e),titleAttributes:H(f,e)}},function(e){X&&Z(X),e.defer?X=K(function(){Q(e,function(){X=null})}):(Q(e),X=null)},ae)(function(){return null}));le.renderStatic=le.rewind;const ce=le},68335(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(28562),i=n(41917);const o=(0,r.A)(i.A,"Map")},69242(e,t,n){"use strict";e.exports=n(22162)},69383(e){"use strict";e.exports=Error},69423(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"nl",weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),ordinal:function(e){return"["+e+(1===e||8===e||e>=20?"ste":"de")+"]"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"een minuut",mm:"%d minuten",h:"een uur",hh:"%d uur",d:"een dag",dd:"%d dagen",M:"een maand",MM:"%d maanden",y:"een jaar",yy:"%d jaar"}};return n.default.locale(r,null,!0),r}(n(74353))},69438(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(33092);const i=function(e,t,n){return void 0===e||(0,r.A)(e)?t:{...t,ownerState:{...t.ownerState,...n}}}},69675(e){"use strict";e.exports=TypeError},69982(e,t,n){"use strict";e.exports=n(7463)},70125(e,t,n){"use strict";n.d(t,{Xr:()=>l,_c:()=>a,gt:()=>s,xv:()=>o});var r=n(64208),i=n(51685);function o(e,t=0){return"string"!==typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function s(e,t){if(!Array.isArray(e))return"";const n=[];for(let o=0;o<e.length;o++){const t=e[o];try{(0,r.L2)(t)?n.push((0,i.nY)(t)):n.push(String(t))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function a(e,t,n=!1){return!!(0,r.Kg)(e)&&((0,r.gd)(t)?t.test(e):!!(0,r.Kg)(t)&&(n?e===t:e.includes(t)))}function l(e,t=[],n=!1){return t.some(t=>a(e,t,n))}},70333(e,t,n){"use strict";n.d(t,{f:()=>s,r:()=>o});var r=n(46403);const i="_sentrySpan";function o(e,t){t?(0,r.my)(e,i,t):delete e[i]}function s(e){return e[i]}},70414(e){"use strict";e.exports=Math.round},70453(e,t,n){"use strict";var r,i=n(79612),o=n(69383),s=n(41237),a=n(79290),l=n(79538),c=n(58068),u=n(69675),h=n(35345),d=n(71514),p=n(58968),f=n(6188),m=n(68002),g=n(75880),y=n(70414),v=n(73093),_=Function,b=function(e){try{return _('"use strict"; return ('+e+").constructor;")()}catch(t){}},w=n(75795),x=n(30655),S=function(){throw new u},E=w?function(){try{return S}catch(e){try{return w(arguments,"callee").get}catch(t){return S}}}():S,T=n(64039)(),M=n(93628),A=n(71064),k=n(48648),C=n(11002),I=n(10076),P={},O="undefined"!==typeof Uint8Array&&M?M(Uint8Array):r,R={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":T&&M?M([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":P,"%AsyncGenerator%":P,"%AsyncGeneratorFunction%":P,"%AsyncIteratorPrototype%":P,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":s,"%Float16Array%":"undefined"===typeof Float16Array?r:Float16Array,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":_,"%GeneratorFunction%":P,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":T&&M?M(M([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&T&&M?M((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":w,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&T&&M?M((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":T&&M?M(""[Symbol.iterator]()):r,"%Symbol%":T?Symbol:r,"%SyntaxError%":c,"%ThrowTypeError%":E,"%TypedArray%":O,"%TypeError%":u,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":h,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet,"%Function.prototype.call%":I,"%Function.prototype.apply%":C,"%Object.defineProperty%":x,"%Object.getPrototypeOf%":A,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":f,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":y,"%Math.sign%":v,"%Reflect.getPrototypeOf%":k};if(M)try{null.error}catch(q){var D=M(M(q));R["%Error.prototype%"]=D}var L=function e(t){var n;if("%AsyncFunction%"===t)n=b("async function () {}");else if("%GeneratorFunction%"===t)n=b("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=b("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&M&&(n=M(i.prototype))}return R[t]=n,n},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},F=n(66743),z=n(9957),U=F.call(I,Array.prototype.concat),j=F.call(C,Array.prototype.splice),B=F.call(I,String.prototype.replace),V=F.call(I,String.prototype.slice),H=F.call(I,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,G=function(e,t){var n,r=e;if(z(N,r)&&(r="%"+(n=N[r])[0]+"%"),z(R,r)){var i=R[r];if(i===P&&(i=L(r)),"undefined"===typeof i&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new c("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===H(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=V(e,0,1),n=V(e,-1);if("%"===t&&"%"!==n)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var r=[];return B(e,$,function(e,t,n,i){r[r.length]=n?B(i,Y,"$1"):t||e}),r}(e),r=n.length>0?n[0]:"",i=G("%"+r+"%",t),o=i.name,s=i.value,a=!1,l=i.alias;l&&(r=l[0],j(n,U([0,1],l)));for(var h=1,d=!0;h<n.length;h+=1){var p=n[h],f=V(p,0,1),m=V(p,-1);if(('"'===f||"'"===f||"`"===f||'"'===m||"'"===m||"`"===m)&&f!==m)throw new c("property names with quotes must have matching quotes");if("constructor"!==p&&d||(a=!0),z(R,o="%"+(r+="."+p)+"%"))s=R[o];else if(null!=s){if(!(p in s)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(w&&h+1>=n.length){var g=w(s,p);s=(d=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:s[p]}else d=z(s,p),s=s[p];d&&!a&&(R[o]=s)}}return s}},71064(e,t,n){"use strict";var r=n(79612);e.exports=r.getPrototypeOf||null},71083(e,t,n){"use strict";n.d(t,{A:()=>mt});var r={};function i(e,t){return function(){return e.apply(t,arguments)}}n.r(r),n.d(r,{hasBrowserEnv:()=>ae,hasStandardBrowserEnv:()=>ce,hasStandardBrowserWebWorkerEnv:()=>ue,navigator:()=>le,origin:()=>he});const{toString:o}=Object.prototype,{getPrototypeOf:s}=Object,{iterator:a,toStringTag:l}=Symbol,c=(u=Object.create(null),e=>{const t=o.call(e);return u[t]||(u[t]=t.slice(8,-1).toLowerCase())});var u;const h=e=>(e=e.toLowerCase(),t=>c(t)===e),d=e=>t=>typeof t===e,{isArray:p}=Array,f=d("undefined");function m(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&v(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g=h("ArrayBuffer");const y=d("string"),v=d("function"),_=d("number"),b=e=>null!==e&&"object"===typeof e,w=e=>{if("object"!==c(e))return!1;const t=s(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(a in e)},x=h("Date"),S=h("File"),E=h("Blob"),T=h("FileList"),M=h("URLSearchParams"),[A,k,C,I]=["ReadableStream","Request","Response","Headers"].map(h);function P(e,t,{allOwnKeys:n=!1}={}){if(null===e||"undefined"===typeof e)return;let r,i;if("object"!==typeof e&&(e=[e]),p(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(m(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let s;for(r=0;r<o;r++)s=i[r],t.call(null,e[s],s,e)}}function O(e,t){if(m(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const R="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,D=e=>!f(e)&&e!==R;const L=(N="undefined"!==typeof Uint8Array&&s(Uint8Array),e=>N&&e instanceof N);var N;const F=h("HTMLFormElement"),z=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),U=h("RegExp"),j=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};P(n,(n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)}),Object.defineProperties(e,r)};const B=h("AsyncFunction"),V=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],R.addEventListener("message",({source:e,data:t})=>{e===R&&t===n&&r.length&&r.shift()()},!1),e=>{r.push(e),R.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,v(R.postMessage)),H="undefined"!==typeof queueMicrotask?queueMicrotask.bind(R):"undefined"!==typeof process&&process.nextTick||V,$={isArray:p,isArrayBuffer:g,isBuffer:m,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||v(e.append)&&("formdata"===(t=c(e))||"object"===t&&v(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer),t},isString:y,isNumber:_,isBoolean:e=>!0===e||!1===e,isObject:b,isPlainObject:w,isEmptyObject:e=>{if(!b(e)||m(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:A,isRequest:k,isResponse:C,isHeaders:I,isUndefined:f,isDate:x,isFile:S,isBlob:E,isRegExp:U,isFunction:v,isStream:e=>b(e)&&v(e.pipe),isURLSearchParams:M,isTypedArray:L,isFileList:T,forEach:P,merge:function e(){const{caseless:t,skipUndefined:n}=D(this)&&this||{},r={},i=(i,o)=>{const s=t&&O(r,o)||o;w(r[s])&&w(i)?r[s]=e(r[s],i):w(i)?r[s]=e({},i):p(i)?r[s]=i.slice():n&&f(i)||(r[s]=i)};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&P(arguments[o],i);return r},extend:(e,t,n,{allOwnKeys:r}={})=>(P(t,(t,r)=>{n&&v(t)?Object.defineProperty(e,r,{value:i(t,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const l={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||l[a]||(t[a]=e[a],l[a]=!0);e=!1!==n&&s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:h,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(p(e))return e;let t=e.length;if(!_(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[a]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:F,hasOwnProperty:z,hasOwnProp:z,reduceDescriptors:j,freezeMethods:e=>{j(e,(t,n)=>{if(v(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];v(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return p(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:O,global:R,isContextDefined:D,isSpecCompliantForm:function(e){return!!(e&&v(e.append)&&"FormData"===e[l]&&e[a])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(b(e)){if(t.indexOf(e)>=0)return;if(m(e))return e;if(!("toJSON"in e)){t[r]=e;const i=p(e)?[]:{};return P(e,(e,t)=>{const o=n(e,r+1);!f(o)&&(i[t]=o)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:B,isThenable:e=>e&&(b(e)||v(e))&&v(e.then)&&v(e.catch),setImmediate:V,asap:H,isIterable:e=>null!=e&&v(e[a])};class Y extends Error{static from(e,t,n,r,i,o){const s=new Y(e.message,t||e.code,n,r,i);return s.cause=e,s.name=e.name,o&&Object.assign(s,o),s}constructor(e,t,n,r,i){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}}Y.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE",Y.ERR_BAD_OPTION="ERR_BAD_OPTION",Y.ECONNABORTED="ECONNABORTED",Y.ETIMEDOUT="ETIMEDOUT",Y.ERR_NETWORK="ERR_NETWORK",Y.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS",Y.ERR_DEPRECATED="ERR_DEPRECATED",Y.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE",Y.ERR_BAD_REQUEST="ERR_BAD_REQUEST",Y.ERR_CANCELED="ERR_CANCELED",Y.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT",Y.ERR_INVALID_URL="ERR_INVALID_URL";const G=Y;function q(e){return $.isPlainObject(e)||$.isArray(e)}function W(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function K(e,t,n){return e?e.concat(t).map(function(e,t){return e=W(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Z=$.toFlatObject($,{},null,function(e){return/^is[A-Z]/.test(e)});const J=function(e,t,n){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!$.isUndefined(t[e])})).metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if($.isDate(e))return e.toISOString();if($.isBoolean(e))return e.toString();if(!a&&$.isBlob(e))throw new G("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(e)||$.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if($.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if($.isArray(e)&&function(e){return $.isArray(e)&&!e.some(q)}(e)||($.isFileList(e)||$.endsWith(n,"[]"))&&(a=$.toArray(e)))return n=W(n),a.forEach(function(e,r){!$.isUndefined(e)&&null!==e&&t.append(!0===s?K([n],r,o):null===s?n:n+"[]",l(e))}),!1;return!!q(e)||(t.append(K(i,n,o),l(e)),!1)}const u=[],h=Object.assign(Z,{defaultVisitor:c,convertValue:l,isVisitable:q});if(!$.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!$.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),$.forEach(n,function(n,o){!0===(!($.isUndefined(n)||null===n)&&i.call(t,n,$.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])}),u.pop()}}(e),t};function X(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Q(e,t){this._pairs=[],e&&J(e,this,t)}const ee=Q.prototype;ee.append=function(e,t){this._pairs.push([e,t])},ee.toString=function(e){const t=e?function(t){return e.call(this,t,X)}:X;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const te=Q;function ne(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function re(e,t,n){if(!t)return e;const r=n&&n.encode||ne,i=$.isFunction(n)?{serialize:n}:n,o=i&&i.serialize;let s;if(s=o?o(t,i):$.isURLSearchParams(t)?t.toString():new te(t,i).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const ie=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$.forEach(this.handlers,function(t){null!==t&&e(t)})}},oe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},se={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:te,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ae="undefined"!==typeof window&&"undefined"!==typeof document,le="object"===typeof navigator&&navigator||void 0,ce=ae&&(!le||["ReactNative","NativeScript","NS"].indexOf(le.product)<0),ue="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,he=ae&&window.location.href||"http://localhost",de={...r,...se};const pe=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&$.isArray(r)?r.length:o,a)return $.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&$.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&$.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if($.isFormData(e)&&$.isFunction(e.entries)){const n={};return $.forEachEntry(e,(e,r)=>{t(function(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const fe={transitional:oe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=$.isObject(e);i&&$.isHTMLForm(e)&&(e=new FormData(e));if($.isFormData(e))return r?JSON.stringify(pe(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e)||$.isReadableStream(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return J(e,new de.classes.URLSearchParams,{visitor:function(e,t,n,r){return de.isNode&&$.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=$.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return J(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||fe.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if($.isResponse(e)||$.isReadableStream(e))return e;if(e&&$.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(i){if(n){if("SyntaxError"===i.name)throw G.from(i,G.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:de.classes.FormData,Blob:de.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{fe.headers[e]={}});const me=fe,ge=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ye=Symbol("internals");function ve(e){return e&&String(e).trim().toLowerCase()}function _e(e){return!1===e||null==e?e:$.isArray(e)?e.map(_e):String(e)}function be(e,t,n,r,i){return $.isFunction(r)?r.call(this,t,n):(i&&(t=n),$.isString(t)?$.isString(r)?-1!==t.indexOf(r):$.isRegExp(r)?r.test(t):void 0:void 0)}class we{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=ve(t);if(!i)throw new Error("header name must be a non-empty string");const o=$.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=_e(e))}const o=(e,t)=>$.forEach(e,(e,n)=>i(e,n,t));if($.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if($.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&ge[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if($.isObject(e)&&$.isIterable(e)){let n,r,i={};for(const t of e){if(!$.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?$.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=ve(e)){const n=$.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if($.isFunction(t))return t.call(this,e,n);if($.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ve(e)){const n=$.findKey(this,e);return!(!n||void 0===this[n]||t&&!be(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=ve(e)){const i=$.findKey(n,e);!i||t&&!be(0,n[i],i,t)||(delete n[i],r=!0)}}return $.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!be(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return $.forEach(this,(r,i)=>{const o=$.findKey(n,i);if(o)return t[o]=_e(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();s!==i&&delete t[i],t[s]=_e(r),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return $.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&$.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[ye]=this[ye]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=ve(e);t[r]||(!function(e,t){const n=$.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return $.isArray(e)?e.forEach(r):r(e),this}}we.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$.reduceDescriptors(we.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),$.freezeMethods(we);const xe=we;function Se(e,t){const n=this||me,r=t||n,i=xe.from(r.headers);let o=r.data;return $.forEach(e,function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function Ee(e){return!(!e||!e.__CANCEL__)}const Te=class extends G{constructor(e,t,n){super(null==e?"canceled":e,G.ERR_CANCELED,t,n),this.name="CanceledError",this.__CANCEL__=!0}};function Me(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new G("Request failed with status code "+n.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Ae=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[s];i||(i=l),n[o]=a,r[o]=l;let u=s,h=0;for(;u!==o;)h+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const ke=function(e,t){let n,r,i=0,o=1e3/t;const s=(t,o=Date.now())=>{i=o,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[(...e)=>{const t=Date.now(),a=t-i;a>=o?s(e,t):(n=e,r||(r=setTimeout(()=>{r=null,s(n)},o-a)))},()=>n&&s(n)]},Ce=(e,t,n=3)=>{let r=0;const i=Ae(50,250);return ke(n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-r,l=i(a);r=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})},n)},Ie=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Pe=e=>(...t)=>$.asap(()=>e(...t)),Oe=de.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,de.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(de.origin),de.navigator&&/(msie|trident)/i.test(de.navigator.userAgent)):()=>!0,Re=de.hasStandardBrowserEnv?{write(e,t,n,r,i,o,s){if("undefined"===typeof document)return;const a=[`${e}=${encodeURIComponent(t)}`];$.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),$.isString(r)&&a.push(`path=${r}`),$.isString(i)&&a.push(`domain=${i}`),!0===o&&a.push("secure"),$.isString(s)&&a.push(`SameSite=${s}`),document.cookie=a.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function De(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Le=e=>e instanceof xe?{...e}:e;function Ne(e,t){t=t||{};const n={};function r(e,t,n,r){return $.isPlainObject(e)&&$.isPlainObject(t)?$.merge.call({caseless:r},e,t):$.isPlainObject(t)?$.merge({},t):$.isArray(t)?t.slice():t}function i(e,t,n,i){return $.isUndefined(t)?$.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function o(e,t){if(!$.isUndefined(t))return r(void 0,t)}function s(e,t){return $.isUndefined(t)?$.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>i(Le(e),Le(t),0,!0)};return $.forEach(Object.keys({...e,...t}),function(r){const o=l[r]||i,s=o(e[r],t[r],r);$.isUndefined(s)&&o!==a||(n[r]=s)}),n}const Fe=e=>{const t=Ne({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:a}=t;if(t.headers=s=xe.from(s),t.url=re(De(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),$.isFormData(n))if(de.hasStandardBrowserEnv||de.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if($.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,n])=>{t.includes(e.toLowerCase())&&s.set(e,n)})}if(de.hasStandardBrowserEnv&&(r&&$.isFunction(r)&&(r=r(t)),r||!1!==r&&Oe(t.url))){const e=i&&o&&Re.read(o);e&&s.set(i,e)}return t},ze="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Fe(e);let i=r.data;const o=xe.from(r.headers).normalize();let s,a,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:p}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=xe.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Me(function(e){t(e),f()},function(e){n(e),f()},{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new G("Request aborted",G.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const r=t&&t.message?t.message:"Network Error",i=new G(r,G.ERR_NETWORK,e,m);i.event=t||null,n(i),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||oe;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new G(t,i.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&$.forEach(o.toJSON(),function(e,t){m.setRequestHeader(t,e)}),$.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),p&&([l,u]=Ce(p,!0),m.addEventListener("progress",l)),d&&m.upload&&([a,c]=Ce(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new Te(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===de.protocols.indexOf(y)?n(new G("Unsupported protocol "+y+":",G.ERR_BAD_REQUEST,e)):m.send(i||null)})},Ue=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof G?t:new Te(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,i(new G(`timeout of ${t}ms exceeded`,G.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:a}=r;return a.unsubscribe=()=>$.asap(s),a}},je=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Be=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Ve=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of Be(e))yield*je(n,t)}(e,t);let o,s=0,a=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let o=r.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},{isFunction:He}=$,$e=(({Request:e,Response:t})=>({Request:e,Response:t}))($.global),{ReadableStream:Ye,TextEncoder:Ge}=$.global,qe=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},We=e=>{e=$.merge.call({skipUndefined:!0},$e,e);const{fetch:t,Request:n,Response:r}=e,i=t?He(t):"function"===typeof fetch,o=He(n),s=He(r);if(!i)return!1;const a=i&&He(Ye),l=i&&("function"===typeof Ge?(c=new Ge,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const u=o&&a&&qe(()=>{let e=!1;const t=new n(de.origin,{body:new Ye,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=s&&a&&qe(()=>$.isReadableStream(new r("").body)),d={stream:h&&(e=>e.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new G(`Response type '${e}' is not supported`,G.ERR_NOT_SUPPORT,n)})});const p=async(e,t)=>{const r=$.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if($.isBlob(e))return e.size;if($.isSpecCompliantForm(e)){const t=new n(de.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return $.isArrayBufferView(e)||$.isArrayBuffer(e)?e.byteLength:($.isURLSearchParams(e)&&(e+=""),$.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:i,method:s,data:a,signal:l,cancelToken:c,timeout:f,onDownloadProgress:m,onUploadProgress:g,responseType:y,headers:v,withCredentials:_="same-origin",fetchOptions:b}=Fe(e),w=t||fetch;y=y?(y+"").toLowerCase():"text";let x=Ue([l,c&&c.toAbortSignal()],f),S=null;const E=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let T;try{if(g&&u&&"get"!==s&&"head"!==s&&0!==(T=await p(v,a))){let e,t=new n(i,{method:"POST",body:a,duplex:"half"});if($.isFormData(a)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,n]=Ie(T,Ce(Pe(g)));a=Ve(t.body,65536,e,n)}}$.isString(_)||(_=_?"include":"omit");const t=o&&"credentials"in n.prototype,l={...b,signal:x,method:s.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:t?_:void 0};S=o&&new n(i,l);let c=await(o?w(S,b):w(i,l));const f=h&&("stream"===y||"response"===y);if(h&&(m||f&&E)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=$.toFiniteNumber(c.headers.get("content-length")),[n,i]=m&&Ie(t,Ce(Pe(m),!0))||[];c=new r(Ve(c.body,65536,n,()=>{i&&i(),E&&E()}),e)}y=y||"text";let M=await d[$.findKey(d,y)||"text"](c,e);return!f&&E&&E(),await new Promise((t,n)=>{Me(t,n,{data:M,headers:xe.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:S})})}catch(M){if(E&&E(),M&&"TypeError"===M.name&&/Load failed|fetch/i.test(M.message))throw Object.assign(new G("Network Error",G.ERR_NETWORK,e,S),{cause:M.cause||M});throw G.from(M,M&&M.code,e,S)}}},Ke=new Map,Ze=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:i}=t,o=[r,i,n];let s,a,l=o.length,c=Ke;for(;l--;)s=o[l],a=c.get(s),void 0===a&&c.set(s,a=l?new Map:We(t)),c=a;return a},Je=(Ze(),{http:null,xhr:ze,fetch:{get:Ze}});$.forEach(Je,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const Xe=e=>`- ${e}`,Qe=e=>$.isFunction(e)||null===e||!1===e;const et={getAdapter:function(e,t){e=$.isArray(e)?e:[e];const{length:n}=e;let r,i;const o={};for(let s=0;s<n;s++){let n;if(r=e[s],i=r,!Qe(r)&&(i=Je[(n=String(r)).toLowerCase()],void 0===i))throw new G(`Unknown adapter '${n}'`);if(i&&($.isFunction(i)||(i=i.get(t))))break;o[n||"#"+s]=i}if(!i){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));let t=n?e.length>1?"since :\n"+e.map(Xe).join("\n"):" "+Xe(e[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return i},adapters:Je};function tt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Te(null,e)}function nt(e){tt(e),e.headers=xe.from(e.headers),e.data=Se.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return et.getAdapter(e.adapter||me.adapter,e)(e).then(function(t){return tt(e),t.data=Se.call(e,e.transformResponse,t),t.headers=xe.from(t.headers),t},function(t){return Ee(t)||(tt(e),t&&t.response&&(t.response.data=Se.call(e,e.transformResponse,t.response),t.response.headers=xe.from(t.response.headers))),Promise.reject(t)})}const rt="1.13.3",it={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{it[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ot={};it.transitional=function(e,t,n){function r(e,t){return"[Axios v"+rt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new G(r(i," has been removed"+(t?" in "+t:"")),G.ERR_DEPRECATED);return t&&!ot[i]&&(ot[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},it.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const st={assertOptions:function(e,t,n){if("object"!==typeof e)throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new G("option "+o+" must be "+n,G.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new G("Unknown option "+o,G.ERR_BAD_OPTION)}},validators:it},at=st.validators;class lt{constructor(e){this.defaults=e||{},this.interceptors={request:new ie,response:new ie}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ne(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&st.assertOptions(n,{silentJSONParsing:at.transitional(at.boolean),forcedJSONParsing:at.transitional(at.boolean),clarifyTimeoutError:at.transitional(at.boolean)},!1),null!=r&&($.isFunction(r)?t.paramsSerializer={serialize:r}:st.assertOptions(r,{encode:at.function,serialize:at.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),st.assertOptions(t,{baseUrl:at.spelling("baseURL"),withXsrfToken:at.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&$.merge(i.common,i[t.method]);i&&$.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=xe.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,h=0;if(!a){const e=[nt.bind(this),void 0];e.unshift(...s),e.push(...l),u=e.length,c=Promise.resolve(t);let n=t;for(;h<u;)c=c.then(e[h++]).then(e=>{n=void 0!==e?e:n}).catch(e[h++]).then(()=>n);return c}u=s.length;let d=t;for(;h<u;){const e=s[h++],t=s[h++];try{d=e(d)}catch(p){t.call(this,p);break}}try{c=nt.call(this,d)}catch(p){return Promise.reject(p)}for(h=0,u=l.length;h<u;)c=c.then(l[h++]).catch(l[h++]);return c}getUri(e){return re(De((e=Ne(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}$.forEach(["delete","get","head","options"],function(e){lt.prototype[e]=function(t,n){return this.request(Ne(n||{},{method:e,url:t,data:(n||{}).data}))}}),$.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(Ne(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}lt.prototype[e]=t(),lt.prototype[e+"Form"]=t(!0)});const ct=lt;class ut{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new Te(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ut(function(t){e=t}),cancel:e}}}const ht=ut;const dt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(dt).forEach(([e,t])=>{dt[t]=e});const pt=dt;const ft=function e(t){const n=new ct(t),r=i(ct.prototype.request,n);return $.extend(r,ct.prototype,n,{allOwnKeys:!0}),$.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ne(t,n))},r}(me);ft.Axios=ct,ft.CanceledError=Te,ft.CancelToken=ht,ft.isCancel=Ee,ft.VERSION=rt,ft.toFormData=J,ft.AxiosError=G,ft.Cancel=ft.CanceledError,ft.all=function(e){return Promise.all(e)},ft.spread=function(e){return function(t){return e.apply(null,t)}},ft.isAxiosError=function(e){return $.isObject(e)&&!0===e.isAxiosError},ft.mergeConfig=Ne,ft.AxiosHeaders=xe,ft.formToJSON=e=>pe($.isHTMLForm(e)?new FormData(e):e),ft.getAdapter=et.getAdapter,ft.HttpStatusCode=pt,ft.default=ft;const mt=ft},71111(e,t,n){"use strict";n.d(t,{AD:()=>u,SB:()=>a,ul:()=>c});var r=n(26674),i=n(19282);const o=/^o(\d+)\./,s=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function a(e,t=!1){const{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r?`${r}/`:r}${s}`}function l(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function c(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=function(e){const t=e.match(o);return t?.[1]}(n)),r}function u(e){const t="string"===typeof e?function(e){const t=s.exec(e);if(!t)return void(0,i.pq)(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[n,r,o="",a="",c="",u=""]=t.slice(1);let h="",d=u;const p=d.split("/");if(p.length>1&&(h=p.slice(0,-1).join("/"),d=p.pop()),d){const e=d.match(/^\d+/);e&&(d=e[0])}return l({host:a,pass:o,path:h,projectId:d,port:c,protocol:n,publicKey:r})}(e):l(e);if(t&&function(e){if(!r.T)return!0;const{port:t,projectId:n,protocol:o}=e;return!["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(i.Yz.error(`Invalid Sentry Dsn: ${t} missing`),!0))&&(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(o)?!t||!isNaN(parseInt(t,10))||(i.Yz.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):(i.Yz.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),!1):(i.Yz.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1))}(t))return t}},71287(e,t,n){"use strict";var r;n.d(t,{i:()=>a,s:()=>s});var i=n(96540),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},71511(e,t,n){"use strict";n.d(t,{v:()=>a});var r=n(96540);const i=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(r,i,o);return o},o=e=>e;const s=e=>{const t=(e=>e?i(e):i)(e),n=e=>function(e,t=o){const n=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(n),n}(t,e);return Object.assign(n,t),n},a=e=>e?s(e):s},71514(e){"use strict";e.exports=Math.abs},71680(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3449),i=n(8127),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function c(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var h=function(){function e(){}return e.isNotNullOrUndefined=function(e){return null!=e},e.isNullOrUndefined=function(e){return null==e},e.requiredNotNullOrUndefined=function(e,t){if(void 0===t&&(t=function(){return"Required value is null or undefined"}),this.isNullOrUndefined(e))throw new Error(t());return e},e.fromMap=function(e){var t={};return e.forEach(function(e,n){t[n]=e}),t},e}(),d=function(){function e(){}return e.mapNotNullOrUndefined=function(e,t){for(var n=Array(),r=0,i=e;r<i.length;r++){var o=t(i[r]);h.isNotNullOrUndefined(o)&&n.push(o)}return n},e.mapOrUndefined=function(e,t){for(var n=Array(),r=0,i=e;r<i.length;r++){var o=t(i[r]);if(h.isNullOrUndefined(o))return;n.push(o)}return n},e.associateTo=function(e,t,n){for(var r=0,i=e;r<i.length;r++){var o=n(i[r]);t.set(o[0],o[1])}return t},e.associate=function(e,t){return this.associateTo(e,new Map,t)},e.associateBy=function(e,t){return this.associate(e,function(e){return[t(e),e]})},e.associateRecord=function(e,t){for(var n={},r=0,i=e;r<i.length;r++){var o=t(i[r]),s=o[0],a=o[1];n[s]=a}return n},e.chunked=function(e,t){for(var n=[],r=e.slice();r.length;)n.push(r.splice(0,t));return n},e.sum=function(e,t){return e.reduce(function(e,n){return e+t(n)},0)},e}(),p={DISABLE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},f=function(){function e(){}return e.setLogLevel=function(e){void 0===e&&(e=p.INFO),this.logLevel=e},e.initCounter=function(e){this.counters=d.associate(Object.keys(p),function(t){return[t,e(t)]})},e._log=function(e,t){var n;switch(e){case"WARN":n="orange";break;case"ERROR":n="red";break;default:n="#AAAAAA"}if(t instanceof Error)m.log(e,n,t.message,t);else try{m.log(e,n,t)}catch(e){}},e.increment=function(t){var n,r;null===(r=null===(n=e.counters)||void 0===n?void 0:n.get(t))||void 0===r||r.increment()},e.logLevel=p.INFO,e.log={error:function(t){e.logLevel>=p.ERROR&&(e._log("ERROR",t),e.increment("ERROR"))},warn:function(t){e.logLevel>=p.WARN&&(e._log("WARN",t),e.increment("WARN"))},info:function(t){e.logLevel>=p.INFO&&(e._log("INFO",t),e.increment("INFO"))},debug:function(t){e.logLevel>=p.DEBUG&&(e._log("DEBUG",t),e.increment("DEBUG"))}},e}(),m=function(){function e(){}return e.log=function(e,t,n,r){try{console.log("%c[".concat(e,"] Hackle: ").concat(n),"color: ".concat(t))}catch(e){}},e}(),g=f.log,y=function(){function e(){}return e.isEqual=function(e,t){return e.type===t.type&&e.value===t.value},e.isEquals=function(e,t){if(null==t)return!1;var n=Object.keys(e);return n.length===Object.keys(t).length&&n.every(function(n){return e[n]===t[n]})},e.sanitize=function(e){var t={};if(h.isNullOrUndefined(e))return t;for(var n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],s=i[1];if(this.isValidType(o)){var a=this.sanitizeValue(s);h.isNullOrUndefined(a)?g.debug("Invalid identifier value. The identifier type value be a string of 512 characters or less. [".concat(o,"]")):t[o]=a}else g.debug("Invalid identifier type. The identifier type must be a string of 128 characters or less. [".concat(o,"]"))}return t},e.isValidType=function(e){return!h.isNullOrUndefined(e)&&"string"==typeof e&&e.length>0&&e.length<=this.MAX_IDENTIFIER_TYPE_LENGTH},e.sanitizeValue=function(e){return"string"==typeof e&&e.length>0&&e.length<=this.MAX_IDENTIFIER_VALUE_LENGTH?e:"number"==typeof e?e.toString():null},e.MAX_IDENTIFIER_TYPE_LENGTH=128,e.MAX_IDENTIFIER_VALUE_LENGTH=512,e}(),v=f.log,_=function(){function e(){}return e.sanitize=function(e){var t={};if(h.isNullOrUndefined(e))return t;for(var n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],s=i[1];if(Object.keys(t).length>=this.MAX_PROPERTIES_COUNT){v.debug("The number of properties cannot exceed 128. Drops excess properties. [".concat(o,", ").concat(s,"]"));break}if(this.isValidKey(o)){var a=this.sanitizeValue(o,s);h.isNullOrUndefined(a)?v.debug("Invalid property value. The property value mus be 'string(..1024)', 'number', 'boolean', or 'array' type. [".concat(s,"]")):t[o]=a}else v.debug("Invalid property key. The property key must be a string of 128 characters or less. [".concat(o,"]"))}return t},e.isValidProperty=function(e,t){return this.isValidKey(e)&&this.isValidValue(t)},e.isValidKey=function(e){return h.isNotNullOrUndefined(e)&&"string"==typeof e&&e.length>0&&e.length<=this.MAX_PROPERTY_KEY_LENGTH},e.sanitizeValue=function(e,t){var n=this;return"string"==typeof e&&e.startsWith(this.SYSTEM_PROPERTY_KEY_PREFIX)?t:this.isValidValue(t)?Array.isArray(t)?t.filter(function(e){return n.isValidElement(e)}):t:null},e.isValidValue=function(e){return!h.isNullOrUndefined(e)&&("string"==typeof e?e.length<=this.MAX_PROPERTY_VALUE_LENGTH:"number"==typeof e?!isNaN(e)&&isFinite(e):"boolean"==typeof e||Array.isArray(e))},e.isValidElement=function(e){return!h.isNullOrUndefined(e)&&("string"==typeof e?e.length>0&&e.length<=this.MAX_PROPERTY_VALUE_LENGTH:"number"==typeof e)},e.truncateStringValue=function(e){return"string"==typeof e&&e.length>this.MAX_PROPERTY_VALUE_LENGTH?e.slice(0,this.MAX_PROPERTY_VALUE_LENGTH):e},e.SYSTEM_PROPERTY_KEY_PREFIX="$",e.MAX_PROPERTIES_COUNT=128,e.MAX_PROPERTY_KEY_LENGTH=128,e.MAX_PROPERTY_VALUE_LENGTH=1024,e}(),b=["nanoseconds","microseconds","milliseconds","seconds","minutes","hours","days"],w=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],x=function(){function e(){}return e.nanosToUnit=function(t,n){switch(n){case"nanoseconds":return t;case"microseconds":return t/(e.C1/e.C0);case"milliseconds":return t/(e.C2/e.C0);case"seconds":return t/(e.C3/e.C0);case"minutes":return t/(e.C4/e.C0);case"hours":return t/(e.C5/e.C0);case"days":return t/(e.C6/e.C0)}},e.microsToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C1/e.C0);case"milliseconds":return t/(e.C2/e.C1);case"microseconds":return t;case"seconds":return t/(e.C3/e.C1);case"minutes":return t/(e.C4/e.C1);case"hours":return t/(e.C5/e.C1);case"days":return t/(e.C6/e.C1)}},e.millisToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C2/e.C0);case"microseconds":return t*(e.C2/e.C1);case"milliseconds":return t;case"seconds":return t/(e.C3/e.C2);case"minutes":return t/(e.C4/e.C2);case"hours":return t/(e.C5/e.C2);case"days":return t/(e.C6/e.C2)}},e.secondsToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C3/e.C0);case"microseconds":return t*(e.C3/e.C1);case"milliseconds":return t*(e.C3/e.C2);case"seconds":return t;case"minutes":return t/(e.C4/e.C3);case"hours":return t/(e.C5/e.C3);case"days":return t/(e.C6/e.C3)}},e.minutesToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C4/e.C0);case"microseconds":return t*(e.C4/e.C1);case"milliseconds":return t*(e.C4/e.C2);case"seconds":return t*(e.C4/e.C3);case"minutes":return t;case"hours":return t/(e.C5/e.C4);case"days":return t/(e.C6/e.C4)}},e.hoursToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C5/e.C0);case"microseconds":return t*(e.C5/e.C1);case"milliseconds":return t*(e.C5/e.C2);case"seconds":return t*(e.C5/e.C3);case"minutes":return t*(e.C5/e.C4);case"hours":return t;case"days":return t/(e.C6/e.C5)}},e.daysToUnit=function(t,n){switch(n){case"nanoseconds":return t*(e.C6/e.C0);case"microseconds":return t*(e.C6/e.C1);case"milliseconds":return t*(e.C6/e.C2);case"seconds":return t*(e.C6/e.C3);case"minutes":return t*(e.C6/e.C4);case"hours":return t*(e.C6/e.C5);case"days":return t}},e.dayOfWeek=function(e){var t=new Date(e).getUTCDay();return w[(t+6)%7]},e.midnight=function(e){var t=new Date(e);return Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},e.C0=1,e.C1=1e3*e.C0,e.C2=1e3*e.C1,e.C3=1e3*e.C2,e.C4=60*e.C3,e.C5=60*e.C4,e.C6=24*e.C5,e.converter={nanoseconds:e.nanosToUnit,microseconds:e.microsToUnit,milliseconds:e.millisToUnit,seconds:e.secondsToUnit,minutes:e.minutesToUnit,hours:e.hoursToUnit,days:e.daysToUnit},e}(),S=function(){function e(){}return e.prototype.tick=function(){return 1e3*Date.now()},e.prototype.currentMillis=function(){return Date.now()},e.instance=new e,e}(),E=function(){function e(){this.parameters={}}return e.prototype.get=function(e,t){return t},e}(),T=function(){function e(e){this.parameters=e}return e.prototype.get=function(e,t){var n=this.parameters[e];return h.isNullOrUndefined(n)?t:h.isNullOrUndefined(t)||typeof n==typeof t?n:t},e}(),M=f.log;function A(e,t){var n=e.find(function(e){return e===t||e.toLowerCase()===t.toLowerCase()});return n||M.debug("Unsupported type [".concat(t,"]. Please use the latest version of sdk.")),n}function k(e,t){if(!h.isNullOrUndefined(t)){for(var n=new Array,r=0,i=t;r<i.length;r++){var o=A(e,i[r]);if(h.isNullOrUndefined(o))return;n.push(o)}return n}}var C=function(){function e(e,t){this.value=e,this.reason=t}return e.of=function(t,n){return new e(t,n)},e}(),I=function(){function e(e,t,n,r){this.variation=e,this.reason=t,this.config=n,this.experiment=r}return e.of=function(t,n,r,i){return void 0===r&&(r=new E),void 0===i&&(i=void 0),new e(t,n,r,i)},Object.defineProperty(e.prototype,"parameters",{get:function(){return this.config.parameters},enumerable:!1,configurable:!0}),e.prototype.get=function(e,t){return this.config.get(e,t)},e}(),P=function(){function e(e,t,n,r){this.isOn=e,this.reason=t,this.config=n,this.experiment=r}return e.on=function(t,n,r){return void 0===n&&(n=new E),void 0===r&&(r=void 0),new e(!0,t,n,r)},e.off=function(t,n,r){return void 0===n&&(n=new E),void 0===r&&(r=void 0),new e(!1,t,n,r)},Object.defineProperty(e.prototype,"parameters",{get:function(){return this.config.parameters},enumerable:!1,configurable:!0}),e.prototype.get=function(e,t){return this.config.get(e,t)},e}(),O=function(){function e(){}return e.prototype.get=function(e,t){return t},e}(),R=function(){function e(e,t){this.id=e,this.config=t}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.config.parameters},enumerable:!1,configurable:!0}),e.fromJson=function(t){return new e(t.id,new T(d.associateRecord(t.parameters,function(e){return[e.key,e.value]})))},e.prototype.get=function(e,t){switch(typeof t){case"string":case"number":case"boolean":return this.config.get(e,t);default:return t}},e}(),D=function(){function e(){}return e.SDK_NOT_READY="SDK_NOT_READY",e.EXCEPTION="EXCEPTION",e.INVALID_INPUT="INVALID_INPUT",e.UNSUPPORTED_PLATFORM="UNSUPPORTED_PLATFORM",e.TYPE_MISMATCH="TYPE_MISMATCH",e.EXPERIMENT_NOT_FOUND="EXPERIMENT_NOT_FOUND",e.EXPERIMENT_DRAFT="EXPERIMENT_DRAFT",e.EXPERIMENT_PAUSED="EXPERIMENT_PAUSED",e.EXPERIMENT_COMPLETED="EXPERIMENT_COMPLETED",e.OVERRIDDEN="OVERRIDDEN",e.TRAFFIC_NOT_ALLOCATED="TRAFFIC_NOT_ALLOCATED",e.NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT="NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT",e.IDENTIFIER_NOT_FOUND="IDENTIFIER_NOT_FOUND",e.VARIATION_DROPPED="VARIATION_DROPPED",e.TRAFFIC_ALLOCATED="TRAFFIC_ALLOCATED",e.TRAFFIC_ALLOCATED_BY_TARGETING="TRAFFIC_ALLOCATED_BY_TARGETING",e.NOT_IN_EXPERIMENT_TARGET="NOT_IN_EXPERIMENT_TARGET",e.FEATURE_FLAG_NOT_FOUND="FEATURE_FLAG_NOT_FOUND",e.FEATURE_FLAG_INACTIVE="FEATURE_FLAG_INACTIVE",e.INDIVIDUAL_TARGET_MATCH="INDIVIDUAL_TARGET_MATCH",e.TARGET_RULE_MATCH="TARGET_RULE_MATCH",e.DEFAULT_RULE="DEFAULT_RULE",e.REMOTE_CONFIG_PARAMETER_NOT_FOUND="REMOTE_CONFIG_PARAMETER_NOT_FOUND",e.IN_APP_MESSAGE_NOT_FOUND="IN_APP_MESSAGE_NOT_FOUND",e.IN_APP_MESSAGE_DRAFT="IN_APP_MESSAGE_DRAFT",e.IN_APP_MESSAGE_PAUSED="IN_APP_MESSAGE_PAUSED",e.IN_APP_MESSAGE_HIDDEN="IN_APP_MESSAGE_HIDDEN",e.IN_APP_MESSAGE_TARGET="IN_APP_MESSAGE_TARGET",e.NOT_IN_IN_APP_MESSAGE_PERIOD="NOT_IN_IN_APP_MESSAGE_PERIOD",e.NOT_IN_IN_APP_MESSAGE_TIMETABLE="NOT_IN_IN_APP_MESSAGE_TIMETABLE",e.NOT_IN_IN_APP_MESSAGE_TARGET="NOT_IN_IN_APP_MESSAGE_TARGET",e.IN_APP_MESSAGE_FREQUENCY_CAPPED="IN_APP_MESSAGE_FREQUENCY_CAPPED",e.EXPERIMENT_CONTROL_GROUP="EXPERIMENT_CONTROL_GROUP",e}(),L=["DEFAULT","SPLIT_URL","IN_APP_MESSAGE"],N=function(){function e(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m,g){this.id=e,this.key=t,this.type=n,this.identifierType=r,this.status=i,this.version=o,this.executionVersion=s,this.variations=a,this.userOverrides=l,this.segmentOverrides=c,this.targetAudiences=u,this.splitUrlTargets=h,this.targetRules=d,this.defaultRule=p,this.containerId=f,this.implementationType=m,this.winnerVariationId=g}return e.fromJson=function(t,n,r){var i=e.experimentStatusOrNull(n.execution.status),o=n.variations.map(function(e){return new F(e.id,e.key,"DROPPED"===e.status,r.find(function(t){return t.id===e.parameterConfigurationId}))}),s=d.associate(n.execution.userOverrides,function(e){return[e.userId,e.variationId]}),a=d.mapNotNullOrUndefined(n.execution.segmentOverrides,function(e){return Z.fromJson(e,pe.IDENTIFIER)}),l=d.mapNotNullOrUndefined(n.execution.targetAudiences,function(e){return Y.fromJson(e,pe.PROPERTY)}),c=st.fromJson(n.execution.targetUrls),u=A(L,n.implementationType),h=d.mapNotNullOrUndefined(n.execution.targetRules,function(e){return Z.fromJson(e,pe.PROPERTY)}),p=K.fromJson(n.execution.defaultRule);return i&&u&&p&&new e(n.id,n.key,t,n.identifierType,i,n.version,n.execution.version,o,s,a,l,c,h,p,n.containerId,u,n.winnerVariationId)},e.experimentStatusOrNull=function(e){switch(e){case"READY":return"DRAFT";case"RUNNING":return"RUNNING";case"PAUSED":return"PAUSED";case"STOPPED":return"COMPLETED";default:return void M.debug("Unsupported status [".concat(e,"]"))}},e.prototype._winnerVariationOrNull=function(){if(this.winnerVariationId)return this._getVariationByIdOrNull(this.winnerVariationId)},e.prototype._getVariationByIdOrNull=function(e){return this.variations.find(function(t){return t.id===e})},e.prototype._getVariationByKeyOrNull=function(e){return this.variations.find(function(t){return t.key===e})},e}(),F=function(){function e(e,t,n,r){this.id=e,this.key=t,this.isDropped=n,this.config=r}return Object.defineProperty(e.prototype,"parameters",{get:function(){var e,t;return null!==(t=null===(e=this.config)||void 0===e?void 0:e.parameters)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),e}(),z=function(){function e(e,t,n,r){this.id=e,this.seed=t,this.slotSize=n,this.slots=r}return e.fromJson=function(t){return new e(t.id,t.seed,t.slotSize,t.slots.map(function(e){var t=e.startInclusive,n=e.endExclusive,r=e.variationId;return new U(t,n,r)}))},e}(),U=function(){function e(e,t,n){this.startInclusive=e,this.endExclusive=t,this.variationId=n}return e.prototype.contains=function(e){return this.startInclusive<=e&&e<this.endExclusive},e}(),j=function(){function e(e,t){this.id=e,this.key=t}return e.fromJson=function(t){return new e(t.id,t.key)},e}(),B=function(){function e(){}return e.ID="$id",e.USER="$userId",e.DEVICE="$deviceId",e.SESSION="$sessionId",e.HACKLE_DEVICE="$hackleDeviceId",e}(),V=function(e){var t=new H;return t.addIdentifiers(e.identifiers||{}),t.add(B.ID,e.id),t.add(B.DEVICE,e.deviceId),h.isNotNullOrUndefined(e.userId)&&t.add(B.USER,e.userId),t.build()},H=function(){function e(){this.identifiers={}}return e.prototype.addIdentifiers=function(e){for(var t in e)this.add(t,e[t]);return this},e.prototype.add=function(e,t){var n=y.sanitizeValue(t);return y.isValidType(e)&&n?this.identifiers[e]=t:M.warn("Invalid user identifier [type=".concat(e,", value=").concat(t,"]")),this},e.prototype.build=function(){return this.identifiers},e}(),$=function(e){var t,n,r,i={};return i.id=null!==(t=y.sanitizeValue(e.id))&&void 0!==t?t:void 0,i.userId=null!==(n=y.sanitizeValue(e.userId))&&void 0!==n?n:void 0,i.deviceId=null!==(r=y.sanitizeValue(e.deviceId))&&void 0!==r?r:void 0,"object"==typeof e.properties&&(i.properties=_.sanitize(e.properties)),"object"==typeof e.identifiers&&(i.identifiers=y.sanitize(e.identifiers)),function(e){return Boolean(e.id||e.userId||e.deviceId||e.identifiers&&Object.keys(e.identifiers).length>0)}(i)?i:null},Y=function(){function e(e){this.conditions=e}return e.fromJson=function(t,n){return new e(d.mapNotNullOrUndefined(t.conditions,function(e){return G.fromJson(e,n)}))},e.prototype.toJson=function(){return{conditions:this.conditions.map(function(e){return e.toJson()})}},e}(),G=function(){function e(e,t){this.key=e,this.match=t}return e.fromJson=function(t,n){var r=q.fromJson(t.key);if(r&&n.supports(r.type)){var i=W.fromJson(t.match);return i&&new e(r,i)}},e.prototype.toJson=function(){return{key:this.key.toJson(),match:this.match.toJson()}},e}(),q=function(){function e(e,t){this.type=e,this.name=t}return e.fromJson=function(t){var n=A(he,t.type);return n&&new e(n,t.name)},e.prototype.toJson=function(){return{type:this.type,name:this.name}},e}(),W=function(){function e(e,t,n,r){this.type=e,this.operator=t,this.valueType=n,this.values=r}return e.fromJson=function(t){var n=A(ae,t.type),r=A(ce,t.operator),i=A(le,t.valueType);return n&&r&&i&&new e(n,r,i,t.values)},e.prototype.toJson=function(){return{operator:this.operator,type:this.type,valueType:this.valueType,values:this.values}},e}(),K=function(){function e(e,t,n){this.type=e,this.variationId=t,this.bucketId=n}return e.fromJson=function(t){var n=A(ue,t.type);return n&&new e(n,t.variationId,t.bucketId)},e}(),Z=function(){function e(e,t){this.target=e,this.action=t}return e.fromJson=function(t,n){var r=Y.fromJson(t.target,n),i=K.fromJson(t.action);return r&&i&&new e(r,i)},e}(),J=function(){function e(e,t,n,r){this.id=e,this.key=t,this.type=n,this.targets=r}return e.fromJson=function(t){var n=A(de,t.type);return n&&new e(t.id,t.key,n,d.mapNotNullOrUndefined(t.targets,function(e){return Y.fromJson(e,pe.SEGMENT)}))},e}(),X=function(){function e(e,t,n){this.id=e,this.bucketId=t,this.groups=n}return e.fromJson=function(t){return new e(t.id,t.bucketId,t.groups.map(function(e){return Q.fromJson(e)}))},e.prototype.getGroupOrNull=function(e){return this.groups.find(function(t){return t.id===e})},e}(),Q=function(){function e(e,t){this.id=e,this.experiments=t}return e.fromJson=function(t){return new e(t.id,t.experiments)},e}(),ee=function(){function e(e,t,n,r,i,o){this.id=e,this.key=t,this.type=n,this.identifierType=r,this.targetRules=i,this.defaultValue=o}return e.fromJson=function(t){var n=A(le,t.type),r=d.mapNotNullOrUndefined(t.targetRules,function(e){return te.fromJson(e,pe.PROPERTY)}),i=ne.fromJson(t.defaultValue);return n&&new e(t.id,t.key,n,t.identifierType,r,i)},e}(),te=function(){function e(e,t,n,r,i){this.key=e,this.name=t,this.target=n,this.bucketId=r,this.value=i}return e.fromJson=function(t,n){var r=Y.fromJson(t.target,n);return r&&new e(t.key,t.name,r,t.bucketId,ne.fromJson(t.value))},e}(),ne=function(){function e(e,t){this.id=e,this.rawValue=t}return e.fromJson=function(t){return new e(t.id,t.value)},e}();function re(e,t){return e-t}var ie=function(){function e(e,t,n){this.coreVersion=e,this.prerelease=t,this.build=n}return e.tryParse=function(t){if(t instanceof e)return t;var n=e.regExp.exec(t);if(n){n[0];var r=n[1],i=n[2],o=void 0===i?"0":i,s=n[3],a=void 0===s?"0":s,l=n[4],c=n[5];return new e(new oe(parseInt(r,10),parseInt(o,10),parseInt(a,10)),se.parse(l),se.parse(c))}},e.prototype.compareTo=function(e){return this.coreVersion.compareTo(e.coreVersion)||this.prerelease.compareTo(e.prerelease)},e.prototype.isEqualTo=function(e){return 0===this.compareTo(e)},e.prototype.isGreaterThan=function(e){return this.compareTo(e)>0},e.prototype.isGreaterThanOrEqualTo=function(e){return this.compareTo(e)>=0},e.prototype.isLessThan=function(e){return this.compareTo(e)<0},e.prototype.isLessThanOrEqualTo=function(e){return this.compareTo(e)<=0},e.regExp=/^(0|[1-9]\d*)(?:\.(0|[1-9]\d*))?(?:\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,e}(),oe=function(){function e(e,t,n){this.major=e,this.minor=t,this.patch=n}return e.prototype.compareTo=function(e){return re(this.major,e.major)||re(this.minor,e.minor)||re(this.patch,e.patch)},e}(),se=function(){function e(e){this.identifiers=e}return e.parse=function(t){return t?new e(t.split(".")):e.EMPTY},e.prototype.isEmpty=function(){return 0===this.identifiers.length},e.prototype.isNotEmpty=function(){return!this.isEmpty()},e.prototype.compareTo=function(e){return this.isEmpty()&&e.isEmpty()?0:this.isEmpty()&&e.isNotEmpty()?1:this.isNotEmpty()&&e.isEmpty()?-1:this.compareIdentifiers(e)},e.prototype.compareIdentifiers=function(t){for(var n=Math.min(this.identifiers.length,t.identifiers.length),r=0;r<n;r++){var i=e.compareIdentifiers(this.identifiers[r],t.identifiers[r]);if(0!==i)return i}return re(this.identifiers.length,t.identifiers.length)},e.compareIdentifiers=function(t,n){return e.numericIdentifierRegExp.test(t)&&e.numericIdentifierRegExp.test(n)?re(+t,+n):t===n?0:t<n?-1:1},e.EMPTY=new e([]),e.numericIdentifierRegExp=/^(0|[1-9]\d*)$/,e}(),ae=["MATCH","NOT_MATCH"],le=["STRING","NUMBER","BOOLEAN","VERSION","JSON","URL","NULL","UNKNOWN"],ce=["IN","CONTAINS","STARTS_WITH","ENDS_WITH","GT","GTE","LT","LTE","EXISTS"],ue=["VARIATION","BUCKET"],he=["USER_ID","USER_PROPERTY","HACKLE_PROPERTY","SEGMENT","AB_TEST","FEATURE_FLAG","EVENT_PROPERTY","COHORT","NUMBER_OF_EVENTS_IN_DAYS","NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS"],de=["USER_ID","USER_PROPERTY"],pe=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.supportedKeyTypes=e}return e.prototype.supports=function(e){return this.supportedKeyTypes.includes(e)},e.IDENTIFIER=new e("SEGMENT"),e.PROPERTY=new e("SEGMENT","USER_PROPERTY","HACKLE_PROPERTY","AB_TEST","FEATURE_FLAG","EVENT_PROPERTY","COHORT","NUMBER_OF_EVENTS_IN_DAYS","NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS"),e.SEGMENT=new e("USER_ID","USER_PROPERTY","HACKLE_PROPERTY","COHORT","NUMBER_OF_EVENTS_IN_DAYS","NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS"),e}(),fe=["ACTIVE","DRAFT","PAUSE"],me=["WEB","ANDROID","IOS"],ge=["IMMEDIATE","CUSTOM"],ye=["MODAL","BANNER","BOTTOM_SHEET","NONE"],ve=["IMAGE_TEXT","IMAGE_ONLY","TEXT_ONLY","IMAGE","NONE"],_e=["VERTICAL","HORIZONTAL"],be=["CLICK"],we=["CLOSE","WEB_LINK","HIDDEN","LINK_AND_CLOSE","LINK_NEW_TAB","LINK_NEW_TAB_AND_CLOSE","LINK_NEW_WINDOW","LINK_NEW_WINDOW_AND_CLOSE"],xe=["TOP","MIDDLE","BOTTOM"],Se=["LEFT","CENTER","RIGHT"],Ee=["ALL","CUSTOM"],Te=function(){function e(e,t,n,r,i,o,s,a,l){this.id=e,this.key=t,this.status=n,this.period=r,this.timetable=i,this.eventTrigger=o,this.targetContext=s,this.messageContext=a,this.evaluateContext=l}return e.fromJson=function(t){var n,r,i,o=A(fe,t.status);if(!h.isNullOrUndefined(o)){var s;switch(A(ge,t.timeUnit)){case"IMMEDIATE":s=new Me;break;case"CUSTOM":if(h.isNullOrUndefined(t.startEpochTimeMillis))return;if(h.isNullOrUndefined(t.endEpochTimeMillis))return;s=new Ae(t.startEpochTimeMillis,t.endEpochTimeMillis);break;default:return}var a=null!==(n=t.timetable&&ke.fromJson(t.timetable))&&void 0!==n?n:new Ce,l=Ue.fromJson(t.messageContext);if(!h.isNullOrUndefined(l)){var c=t.eventTriggerRules.map(Re.fromJson),u=De.fromJson(t.eventFrequencyCap),d=null!==(r=t.eventTriggerDelay&&nt.fromJson(t.eventTriggerDelay))&&void 0!==r?r:nt.immediate(),p=et.fromJson(null!==(i=t.evaluateContext)&&void 0!==i?i:{atDeliverTime:!1});return new e(t.id,t.key,o,s,a,new Oe(c,u,d),Fe.fromJson(t.targetContext),l,p)}}},e.prototype.supports=function(e){return this.messageContext.platformTypes.includes(e)},e.prototype.toString=function(){return"InAppMessage(id=".concat(this.id,", key=").concat(this.key,", status=").concat(this.status,")")},e}(),Me=function(){function e(){this.type="IMMEDIATE"}return e.prototype.within=function(e){return!0},e}(),Ae=function(){function e(e,t){this.startMillisInclusive=e,this.endMillisExclusive=t,this.type="CUSTOM"}return e.prototype.within=function(e){return this.startMillisInclusive<=e&&e<this.endMillisExclusive},e}(),ke=function(){function e(){}return e.fromJson=function(e){switch(A(Ee,e.type)){case"ALL":return new Ce;case"CUSTOM":return new Ie(d.mapNotNullOrUndefined(e.slots,function(e){return Pe.fromJson(e)}));default:return}},e}(),Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ALL",t}return s(t,e),t.prototype.within=function(e){return!0},t}(ke),Ie=function(e){function t(t){var n=e.call(this)||this;return n.slots=t,n.type="CUSTOM",n}return s(t,e),t.prototype.within=function(e){return this.slots.some(function(t){return t.within(e)})},t}(ke),Pe=function(){function e(e,t,n){this.dayOfWeek=e,this.startMillisInclusive=t,this.endMillisExclusive=n}return e.prototype.within=function(e){var t=x.dayOfWeek(e);if(this.dayOfWeek!==t)return!1;var n=x.midnight(e),r=n+this.startMillisInclusive,i=n+this.endMillisExclusive;return r<=e&&e<i},e.fromJson=function(t){var n=A(w,t.dayOfWeek);return n&&new e(n,t.startMillisInclusive,t.endMillisExclusive)},e}(),Oe=function(e,t,n){this.rules=e,this.frequencyCap=t,this.delay=n},Re=function(){function e(e,t){this.eventKey=e,this.targets=t}return e.fromJson=function(t){return new e(t.eventKey,d.mapNotNullOrUndefined(t.targets,function(e){return Y.fromJson(e,pe.PROPERTY)}))},e}(),De=function(){function e(e,t){this.identifierCaps=e,this.durationCap=t}return e.fromJson=function(t){return t?new e(t.identifiers.map(Le.fromJson),Ne.fromJson(t.duration)):null},e}(),Le=function(){function e(e,t){this.identifierType=e,this.count=t}return e.fromJson=function(t){return new e(t.identifierType,t.countPerIdentifier)},e}(),Ne=function(){function e(e,t){this.durationMillis=e,this.count=t}return e.fromJson=function(t){if(!t)return null;var n=A(b,t.durationUnit.timeUnit);return n?new e(x.converter[n](t.durationUnit.amount,"milliseconds"),t.countPerDuration):null},e}(),Fe=function(){function e(e,t){this.overrides=e,this.targets=t}return e.fromJson=function(t){return new e(t.overrides.map(ze.fromJson),d.mapNotNullOrUndefined(t.targets,function(e){return Y.fromJson(e,pe.PROPERTY)}))},e}(),ze=function(){function e(e,t){this.identifierType=e,this.identifiers=t}return e.fromJson=function(t){return new e(t.identifierType,t.identifiers)},e}(),Ue=function(){function e(e,t,n,r,i){this.defaultLang=e,this.experimentContext=t,this.platformTypes=n,this.orientations=r,this.messages=i}return e.fromJson=function(t){var n=null;"AB_TEST"===t.exposure.type&&null!==t.exposure.key&&(n=new je(t.exposure.key));var r=k(me,t.platformTypes);if(!h.isNullOrUndefined(r)){var i=k(_e,t.orientations);if(!h.isNullOrUndefined(i)){var o=d.mapOrUndefined(t.messages,Be.fromJson);if(!h.isNullOrUndefined(o))return new e(t.defaultLang,n,r,i,o)}}},e}(),je=function(e){this.key=e},Be=function(){function e(e,t,n,r,i,o,s,a,l,c,u,h){this.variationKey=e,this.lang=t,this.layout=n,this.images=r,this.imageAutoScroll=i,this.text=o,this.buttons=s,this.closeButton=a,this.background=l,this.action=c,this.outerButtons=u,this.innerButtons=h}return e.fromJson=function(t){var n=Ve.fromJson(t.layout);if(!h.isNullOrUndefined(n)){var r=d.mapOrUndefined(t.images,$e.fromJson);if(!h.isNullOrUndefined(r)){var i=void 0;if(!h.isNotNullOrUndefined(t.imageAutoScroll)||(i=Ye.fromJson(t.imageAutoScroll),!h.isNullOrUndefined(i))){var o=d.mapOrUndefined(t.buttons,Ke.fromJson);if(!h.isNullOrUndefined(o)){var s=void 0;if(!h.isNotNullOrUndefined(t.closeButton)||(s=Ke.fromJson2(t.closeButton),!h.isNullOrUndefined(s))){var a=d.mapOrUndefined(t.outerButtons,Ze.fromJson),l=d.mapOrUndefined(t.innerButtons,Ze.fromJson);if(!h.isNullOrUndefined(a)&&!h.isNullOrUndefined(l))return new e(t.variationKey,t.lang,n,r,i,t.text?Ge.fromJson(t.text):void 0,o,s,new Xe(t.background.color),t.action?Qe.fromJson(t.action):void 0,a,l)}}}}}},e.prototype.toJson=function(){var e,t,n,r,i,o,s,a,l,c;return{variationKey:this.variationKey,lang:this.lang,layout:{layoutType:this.layout.layoutType,alignment:null!==(t=null===(e=this.layout.alignment)||void 0===e?void 0:e.toJson())&&void 0!==t?t:null,displayType:this.layout.displayType},images:this.images.map(function(e){return e.toJson()}),imageAutoScroll:null!==(r=null===(n=this.imageAutoScroll)||void 0===n?void 0:n.toJson())&&void 0!==r?r:null,text:null!==(o=null===(i=this.text)||void 0===i?void 0:i.toJson())&&void 0!==o?o:null,closeButton:null!==(a=null===(s=this.closeButton)||void 0===s?void 0:s.toCloseButtonJson())&&void 0!==a?a:null,buttons:this.buttons.map(function(e){return e.toJson()}),background:{color:this.background.color},action:null!==(c=null===(l=this.action)||void 0===l?void 0:l.toJson())&&void 0!==c?c:null,outerButtons:this.outerButtons.map(function(e){return e.toJson()}),innerButtons:this.innerButtons.map(function(e){return e.toJson()})}},e}(),Ve=function(){function e(e,t,n){this.displayType=e,this.layoutType=t,this.alignment=n}return e.fromJson=function(t){var n=A(ve,t.layoutType),r=A(ye,t.displayType);if(!h.isNullOrUndefined(r)&&!h.isNullOrUndefined(n))return new e(r,n,t.alignment?He.fromJson(t.alignment):void 0)},e}(),He=function(){function e(e,t){this.horizontal=e,this.vertical=t}return e.fromJson=function(t){var n=A(Se,t.horizontal);if(!h.isNullOrUndefined(n)){var r=A(xe,t.vertical);if(!h.isNullOrUndefined(r))return new e(n,r)}},e.prototype.toJson=function(){return{horizontal:this.horizontal,vertical:this.vertical}},e}(),$e=function(){function e(e,t,n){this.orientation=e,this.imagePath=t,this.action=n}return e.fromJson=function(t){var n=A(_e,t.orientation);if(!h.isNullOrUndefined(n)){var r=void 0;if(!h.isNotNullOrUndefined(t.action)||(r=Qe.fromJson(t.action),!h.isNullOrUndefined(r)))return new e(n,t.imagePath,r)}},e.prototype.toJson=function(){var e,t;return{orientation:this.orientation,imagePath:this.imagePath,action:null!==(t=null===(e=this.action)||void 0===e?void 0:e.toJson())&&void 0!==t?t:null}},e}(),Ye=function(){function e(e){this.intervalMillis=e}return e.fromJson=function(t){var n=A(b,t.interval.timeUnit);if(n)return new e(x.converter[n](t.interval.amount,"milliseconds"))},e.prototype.toJson=function(){return{interval:{timeUnit:"milliseconds",amount:this.intervalMillis}}},e}(),Ge=function(){function e(e,t){this.title=e,this.body=t}return e.fromJson=function(t){return new e(qe.fromJson(t.title),qe.fromJson(t.body))},e.prototype.toJson=function(){return{title:{text:this.title.text,style:{textColor:this.title.style.color}},body:{text:this.body.text,style:{textColor:this.body.style.color}}}},e}(),qe=function(){function e(e,t){this.text=e,this.style=t}return e.fromJson=function(t){return new e(t.text,new We(t.style.textColor))},e}(),We=function(e){this.color=e},Ke=function(){function e(e,t,n){this.text=e,this.style=t,this.action=n}return e.fromJson=function(t){var n=Qe.fromJson(t.action);if(!h.isNullOrUndefined(n))return new e(t.text,new Je(t.style.textColor,t.style.bgColor,t.style.borderColor),n)},e.fromJson2=function(t){var n=Qe.fromJson(t.action);if(!h.isNullOrUndefined(n))return new e("\u2715",new Je(t.style.color,"#FFFFFF","#FFFFFF"),n)},e.prototype.toJson=function(){return{text:this.text,action:this.action.toJson(),style:{textColor:this.style.textColor,bgColor:this.style.backgroundColor,borderColor:this.style.borderColor}}},e.prototype.toCloseButtonJson=function(){return{action:this.action.toJson(),style:{color:this.style.textColor}}},e}(),Ze=function(){function e(e,t){this.button=e,this.alignment=t}return e.fromJson=function(t){var n=Ke.fromJson(t.button);if(!h.isNullOrUndefined(n)){var r=He.fromJson(t.alignment);if(!h.isNullOrUndefined(r))return new e(n,r)}},e.prototype.toJson=function(){return{button:this.button.toJson(),alignment:this.alignment.toJson()}},e}(),Je=function(e,t,n){this.textColor=e,this.backgroundColor=t,this.borderColor=n},Xe=function(e){this.color=e},Qe=function(){function e(e,t,n){this.behavior=e,this.type=t,this.value=n}return e.fromJson=function(t){var n,r=A(be,t.behavior);if(!h.isNullOrUndefined(r)){var i=A(we,t.type);if(!h.isNullOrUndefined(i))return new e(r,i,null!==(n=t.value)&&void 0!==n?n:void 0)}},e.prototype.toJson=function(){var e;return{behavior:this.behavior,type:this.type,value:null!==(e=this.value)&&void 0!==e?e:null}},e}(),et=function(){function e(e){this.atDeliverTime=e}return e.fromJson=function(t){return new e(t.atDeliverTime)},e}(),tt=function(){function e(e){this.durationMillis=e}return e.fromJson=function(t){var n=A(b,t.duration.timeUnit);return h.isNullOrUndefined(n)?null:new e(x.converter[n](t.duration.amount,"milliseconds"))},e}(),nt=function(){function e(e,t){this.type=e,this.afterCondition=t}return e.fromJson=function(t){var n=t.afterCondition&&tt.fromJson(t.afterCondition);return new e(t.type,n)},e.immediate=function(){return new e("IMMEDIATE",null)},e.prototype.deliverAt=function(e){var t=this.type;switch(t){case"IMMEDIATE":return e;case"AFTER":if(null===this.afterCondition)throw new Error("AfterCondition is required for AFTER delay type");return e+this.afterCondition.durationMillis;default:throw new Error("Unsupported delay type: ".concat(t))}},e}(),rt=function(){function e(e,t,n){this.type=e,this.close=t,this.link=n}return e.fromJson=function(t){var n=t.type,r=t.value,i=this.linkActionTypes.some(function(e){return e===n}),o=this.closeActionTypes.some(function(e){return e===n}),s=this.tabTargetActionsTypes.some(function(e){return e===n}),a=this.windowTargetActionsTypes.some(function(e){return e===n});return new e(i?"LINK":"CLOSE",o?{hideDurationMillis:"HIDDEN"===n?864e5:null}:void 0,i?{url:null!=r?r:"",target:a?"NEW_WINDOW":s?"NEW_TAB":"CURRENT",shouldCloseAfterLink:o}:void 0)},e.fromInteraction=function(t){return"CLOSE"===t.type?new e(t.type,{hideDurationMillis:null}):e.fromJson(t.action)},e.fromAction=function(t){return e.fromJson(t.toJson())},e.linkActionTypes=["LINK_AND_CLOSE","LINK_NEW_TAB","LINK_NEW_TAB_AND_CLOSE","LINK_NEW_WINDOW","LINK_NEW_WINDOW_AND_CLOSE","WEB_LINK"],e.closeActionTypes=["CLOSE","HIDDEN","LINK_AND_CLOSE","LINK_NEW_TAB_AND_CLOSE","LINK_NEW_WINDOW_AND_CLOSE"],e.tabTargetActionsTypes=["LINK_NEW_TAB","LINK_NEW_TAB_AND_CLOSE"],e.windowTargetActionsTypes=["LINK_NEW_WINDOW","LINK_NEW_WINDOW_AND_CLOSE"],e}(),it=function(e){this.id=e};t.SplitUrlRedirectType=void 0,(t.SplitUrlRedirectType||(t.SplitUrlRedirectType={})).MANUAL="MANUAL";var ot=function(){function e(e,t,n){this.needRedirect=e,this.redirectType=t,this.redirectUrl=n}return e.fromDto=function(n){var r;return new e(n.needRedirect,(r=n.properties.type,Object.values(t.SplitUrlRedirectType).includes(r)?n.properties.type:null),n.properties.value)},e}(),st=function(){function e(e,t){this.includeTargets=e,this.excludeTargets=t}return e.fromJson=function(t){if(null!==t)return new e(d.mapNotNullOrUndefined(t.match,function(e){return Y.fromJson(e,pe.PROPERTY)}),d.mapNotNullOrUndefined(t.notMatch,function(e){return Y.fromJson(e,pe.PROPERTY)}))},e}(),at=function(){function e(e,t,n){this.eventKey=e,this.property=t,this.stats=n}return e.fromJson=function(t){return new e(t.eventKey,t.property,t.stats)},e.prototype.countWithinDays=function(e){return d.sum(this.stats.filter(function(t){return t.date>=e}),function(e){return e.count})},e}(),lt=function(){function e(e){this.name=e,this._tags={},this.name=e}return e.prototype.tags=function(e){var t=this;return Object.entries(e).forEach(function(e){var n=e[0],r=e[1];t._tags[n]=r}),this},e.prototype.tag=function(e,t){return this._tags[e]=t,this},e.prototype.register=function(e){return e.registerTimer({name:this.name,tags:this._tags,type:"TIMER"})},e}(),ct=function(){function e(e){this._clock=e,this.startTime=this._clock.tick()}return e.start=function(t){return void 0===t&&(t=e.defaultClock),new e(t)},e.prototype.stop=function(e){var t=this._clock.tick()-this.startTime;e.record(t,"microseconds")},e.defaultClock=new S,e}(),ut=function(){function e(e){this.name=e,this._tags={}}return e.prototype.tags=function(e){var t=this;return Object.entries(e).forEach(function(e){var n=e[0],r=e[1];t._tags[n]=r}),this},e.prototype.tag=function(e,t){return this._tags[e]=t,this},e.prototype.register=function(e){return e.registerCounter({name:this.name,tags:this._tags,type:"COUNTER"})},e}(),ht=function(){function e(e){this.compareFn=e,this.data=new Map,this.compareFn=e,this.data=new Map}return e.prototype.values=function(){return Array.from(this.data.values())},e.prototype.keys=function(){return Array.from(this.data.keys())},e.prototype.get=function(e){var t=this,n=this.keys().find(function(n){return t.compareFn(n,e)});return n?this.data.get(n):void 0},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.add=function(e,t){var n=t;return n||(n=e),this.data.set(e,n),this},e.prototype.delete=function(e){if(this.has(e)){var t=this.get(e);return this.data.delete(e),t}},e.prototype.forEach=function(e){this.data.forEach(e)},e.prototype.filter=function(t){for(var n=new e(this.compareFn),r=0,i=this.entries();r<i.length;r++){var o=i[r];t(o[0],o[1])&&n.add(o[0],o[1])}return n},e.prototype.entries=function(){return Array.from(this.data.entries())},e}(),dt=function(){function e(e,t){this.valueSupplier=t,this.field=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.valueSupplier()},enumerable:!1,configurable:!0}),e}();function pt(e,t){return e.name===t.name&&y.isEquals(e.tags,t.tags)}var ft,mt=function(){function e(){this.id=r.v4(),this.name="MetricRegistry",this._metrics=new ht(pt)}return Object.defineProperty(e.prototype,"metrics",{get:function(){return Array.from(this._metrics.values())},enumerable:!1,configurable:!0}),e.prototype.registerCounter=function(e){return this.registerMetricIfNecessary(e,this.createCounter.bind(this))},e.prototype.registerTimer=function(e){return this.registerMetricIfNecessary(e,this.createTimer.bind(this))},e.prototype.counter=function(e,t){return void 0===t&&(t={}),new ut(e).tags(t).register(this)},e.prototype.timer=function(e,t){return void 0===t&&(t={}),new lt(e).tags(t).register(this)},e.prototype.registerMetricIfNecessary=function(e,t){return this.getOrCreateMetric(e,t)},e.prototype.getOrCreateMetric=function(e,t){var n,r=this._metrics.get(e);return r?n=r:(n=t(e),this._metrics.add(e,n)),n},e.prototype.close=function(){},e}(),gt=function(e){function t(t,n){var r=e.call(this)||this;return r.scheduler=t,r.pushIntervalMillis=n,r.publishingJob=null,r}return s(t,e),t.prototype.start=function(){var e=this;null===this.publishingJob&&(this.publishingJob=this.scheduler.schedulePeriodically(this.pushIntervalMillis,this.pushIntervalMillis,function(){return e.publish(!1)}),f.log.debug("PushMetricRegistry started. Publish metrics every ".concat(this.pushIntervalMillis,"ms.")))},t.prototype.stop=function(){var e;null===(e=this.publishingJob)||void 0===e||e.cancel(),this.publishingJob=null,this.publish(!0),f.log.debug("PushMetricRegistry stopped.")},t.prototype.close=function(){this.stop()},t}(mt),yt=function(){function e(e){this.counterValue=0,this.id=e}return e.prototype.count=function(){return this.counterValue},e.prototype.increment=function(e){this.counterValue+=null!=e?e:1},e.prototype.measure=function(){return[new dt("count",this.count.bind(this))]},e}(),vt=function(){function e(e){this.id=e,this.currentCounter=new yt(e)}return e.prototype.flush=function(){var e=this.currentCounter;return this.currentCounter=new yt(this.id),e},e.prototype.count=function(){return this.currentCounter.count()},e.prototype.increment=function(e){this.currentCounter.increment(e)},e.prototype.measure=function(){return[new dt("count",this.count.bind(this))]},e}(),_t=function(){function e(e){this._count=0,this._total=0,this._max=0,this.id=e}return e.prototype.count=function(){return this._count},e.prototype.totalTime=function(e){return x.nanosToUnit(this._total,e)},e.prototype.max=function(e){return x.nanosToUnit(this._max,e)},e.prototype.mean=function(e){return 0===this.count()?0:this.totalTime(e)/this.count()},e.prototype.record=function(e,t){if(!(e<0)){var n=x.converter[t](e,"nanoseconds");this._count=this.count()+1,this._total+=n,this._max=Math.max(n,this._max)}},e.prototype.measure=function(){var e=this;return[new dt("count",this.count.bind(this)),new dt("total",function(){return e.totalTime("milliseconds")}),new dt("max",function(){return e.max("milliseconds")}),new dt("mean",function(){return e.mean("milliseconds")})]},e}(),bt=function(){function e(e){this.id=e,this.currentTimer=new _t(e)}return e.prototype.flush=function(){var e=this.currentTimer;return this.currentTimer=new _t(this.id),e},e.prototype.count=function(){return this.currentTimer.count()},e.prototype.totalTime=function(e){return this.currentTimer.totalTime(e)},e.prototype.max=function(e){return this.currentTimer.max(e)},e.prototype.record=function(e,t){this.currentTimer.record(e,t)},e.prototype.mean=function(e){return 0===this.count()?0:this.totalTime(e)/this.count()},e.prototype.measure=function(){var e=this;return[new dt("count",this.count.bind(this)),new dt("total",function(){return e.totalTime("milliseconds")}),new dt("max",function(){return e.max("milliseconds")}),new dt("mean",function(){return e.mean("milliseconds")})]},e}(),wt=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype.createCounter=function(e){return new vt(e)},t.prototype.createTimer=function(e){return new bt(e)},t.prototype.publish=function(e){void 0===e&&(e=!1);var t=this.metrics.reduce(function(e,t){return function(e){return void 0!==e.flush&&"function"==typeof e.flush}(t)?e.concat(t.flush()):e},[]);this.flushMetrics(t,e)},t}(gt),xt=function(){function e(e){this.id=e}return e.prototype.count=function(){return 0},e.prototype.increment=function(e){},e.prototype.measure=function(){return[new dt("count",this.count.bind(this))]},e}(),St=function(){function e(e){this._counters=new ht(function(e,t){return e.id===t.id}),this.id=e,this.noopCounter=new xt(e)}return Object.defineProperty(e.prototype,"counters",{get:function(){return Array.from(this._counters.values())},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this._counters.add(e,e.registerCounter(this.id))},e.prototype.count=function(){return(this.counters[0]||this.noopCounter).count()},e.prototype.increment=function(e){this.counters.forEach(function(t){t.increment(e)})},e.prototype.measure=function(){return[new dt("count",this.count.bind(this))]},e}(),Et=function(){function e(e){this.id=e}return e.prototype.measure=function(){var e=this;return[new dt("count",this.count.bind(this)),new dt("total",function(){return e.totalTime("milliseconds")}),new dt("max",function(){return e.max("milliseconds")}),new dt("mean",function(){return e.mean("milliseconds")})]},e.prototype.count=function(){return 0},e.prototype.totalTime=function(e){return 0},e.prototype.max=function(e){return 0},e.prototype.mean=function(e){return 0},e.prototype.record=function(e,t){},e}(),Tt=function(){function e(e){this._timers=new ht(function(e,t){return e.id===t.id}),this.id=e,this.noopTimer=new Et(e)}return Object.defineProperty(e.prototype,"firstTimer",{get:function(){return this.timers[0]||this.noopTimer},enumerable:!1,configurable:!0}),e.prototype.totalTime=function(e){return this.firstTimer.totalTime(e)},e.prototype.max=function(e){return this.firstTimer.max(e)},e.prototype.mean=function(e){return this.firstTimer.mean(e)},e.prototype.record=function(e,t){this.timers.forEach(function(n){n.record(e,t)})},Object.defineProperty(e.prototype,"timers",{get:function(){return Array.from(this._timers.values())},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this._timers.add(e,e.registerTimer(this.id))},e.prototype.count=function(){return this.firstTimer.count()},e.prototype.measure=function(){var e=this;return[new dt("count",this.count.bind(this)),new dt("total",function(){return e.totalTime("milliseconds")}),new dt("max",function(){return e.max("milliseconds")}),new dt("mean",function(){return e.mean("milliseconds")})]},e}(),Mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registries=new ht(function(e,t){return e.id===t.id}),t}return s(t,e),t.prototype.createCounter=function(e){var t=new St(e);return this.addRegistry(t),t},t.prototype.createTimer=function(e){var t=new Tt(e);return this.addRegistry(t),t},t.prototype.addRegistry=function(e){this.registries.forEach(function(t){return e.add(t)})},t.prototype.add=function(e){e instanceof t||this.registries.has(e)||(this.registries.add(e),this.metrics.forEach(function(t){(function(e){return void 0!==e.add&&"function"==typeof e.add})(t)&&t.add(e)}))},t.prototype.close=function(){this.registries.forEach(function(e){e.close()})},t}(mt),At=function(){function e(){}return e.counter=function(t,n){return e.globalRegistry.counter(t,n)},e.timer=function(t,n){return e.globalRegistry.timer(t,n)},e.addRegistry=function(t){e.globalRegistry.add(t),f.log.debug("MetricRegistry added ".concat(t.name))},e.globalRegistry=new Mt,e}(),kt=function(){function e(){}return e.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()},e.isNotEmptyString=function(e){return!h.isNullOrUndefined(e)&&"string"==typeof e&&e.length>0},e}(),Ct=function(){function e(e,t,n,r,i){this.url=e,this.method=t,this.body=n,this.headers=r,this.options=i}return e.builder=function(){return new It},e.get=function(t){return e.builder().url(t).build()},e.prototype.toBuilder=function(){return new It(this)},e}(),It=function(){function e(e){var t,n,r,i,o,s,a;this._url=null!==(t=null==e?void 0:e.url)&&void 0!==t?t:null,this._method=null!==(n=null==e?void 0:e.method)&&void 0!==n?n:"GET",this._body=null!==(r=null==e?void 0:e.body)&&void 0!==r?r:null,this._headers=null!==(o=null===(i=null==e?void 0:e.headers)||void 0===i?void 0:i.toBuilder())&&void 0!==o?o:Ot.builder(),this._timeoutMillis=null!==(a=null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.timeoutMillis)&&void 0!==a?a:null}return e.prototype.url=function(e){return this._url=e,this},e.prototype.method=function(e){return this._method=e,this},e.prototype.body=function(e){return this._body=e,this},e.prototype.addHeader=function(e,t){return this._headers.add(e,t),this},e.prototype.timeoutMillis=function(e){return this._timeoutMillis=e,this},e.prototype.build=function(){if(null===this._url)throw new Error("url is null");var e={timeoutMillis:this._timeoutMillis};return new Ct(this._url,this._method,this._body,this._headers.build(),e)},e}(),Pt=function(){function e(e,t,n){this.statusCode=e,this.body=t,this.headers=n}return e.ok=function(t,n){return e.of(200,t,n)},e.of=function(t,n,r){return new e(t,null!=n?n:null,null!=r?r:Ot.empty())},e.prototype.isSuccessful=function(){return this.statusCode>=200&&this.statusCode<300},e.prototype.isClientError=function(){return this.statusCode>=400&&this.statusCode<500},e.prototype.isNotModified=function(){return 304===this.statusCode},e}(),Ot=function(){function e(e){this.headers=e}return e.empty=function(){return new e(new Map)},e.builder=function(){return new Rt(new Map)},e.prototype.get=function(e){for(var t=0,n=Array.from(this.headers.entries());t<n.length;t++){var r=n[t],i=r[0],o=r[1];if(kt.equalsIgnoreCase(i,e))return o}return null},e.prototype.getOrDefault=function(e,t){var n;return null!==(n=this.get(e))&&void 0!==n?n:t},e.prototype.raw=function(){return Array.from(this.headers.entries()).reduce(function(e,t){var n=t[0],r=t[1];return e[n]=r,e},{})},e.prototype.toBuilder=function(){return new Rt(this.headers)},e.IF_MODIFIED_SINCE="If-Modified-Since",e.LAST_MODIFIED="Last-Modified",e.ACCEPT_ENCODING="Accept-Encoding",e}(),Rt=function(){function e(e){this.headers=e}return e.prototype.add=function(e,t){return this.headers.set(e,t),this},e.prototype.build=function(){return new Ot(this.headers)},e}(),Dt=function(e){function t(t,n,r,i,o){var s=e.call(this,i,o)||this;return s.url=t,s.transport=n,s.synchronousTransport=r,s.start(),s}return s(t,e),t.prototype.flushMetrics=function(e,t){var n=this;d.chunked(e.filter(this.isDispatchTarget.bind(this)),100).forEach(function(e){n.dispatch(e,t)})},t.prototype.isDispatchTarget=function(e){return!(!function(e){return"COUNTER"===e.id.type}(e)&&!function(e){return"TIMER"===e.id.type}(e))&&e.count()>0},t.prototype.dispatch=function(e,t){var n=this.createRequest(e);this.execute(n,t).catch(function(e){return f.log.debug("Failed to flushing metrics: ".concat(e))})},t.prototype.createRequest=function(e){return Ct.builder().url(this.url).method("POST").body(JSON.stringify(this.batch(e))).addHeader("Content-Type","application/json").build()},t.prototype.execute=function(e,t){return t?this.synchronousTransport.send(e):this.transport.send(e)},t.prototype.batch=function(e){return{metrics:e.map(function(e){return{name:e.id.name,type:e.id.type,tags:e.id.tags,measurements:h.fromMap(d.associate(e.measure(),function(e){return[e.field,e.value]}))}})}},t.prototype.onLifecycleChanged=function(e,t){switch(e){case"hidden":case"pagehide":return this.publish(!0);case"visible":case"pageshow":case"blur":case"locationChange":case"focus":return}},t}(wt),Lt=function(){function e(){}return e.experiment=function(e,t,n){var r=At.timer("experiment.decision",{key:String(t),variation:n.variation,reason:String(n.reason)});e.stop(r)},e.featureFlag=function(e,t,n){var r=At.timer("feature.flag.decision",{key:String(t),on:String(n.isOn),reason:String(n.reason)});e.stop(r)},e.remoteConfig=function(e,t,n){var r=At.timer("remote.config.decision",{key:String(t),reason:String(n.reason)});e.stop(r)},e}(),Nt=function(){function e(){}return e.record=function(t,n,r){var i=At.timer("api.call",{operation:t,success:e.success(r)});n.stop(i)},e.success=function(e){return null===e?"false":String(e.isSuccessful()||e.isNotModified())},e}(),Ft=function(){function e(){}return e.decide=function(e,t,n,r){if(h.isNullOrUndefined(n))return this.decision(e,t,"NULL",n,r);switch(typeof n){case"string":return this.decision(e,t,"STRING",n,r);case"number":return this.decision(e,t,"NUMBER",n,r);case"boolean":return this.decision(e,t,"BOOLEAN",n,r);default:return this.decision(e,t,"UNKNOWN",n,r)}},e.decision=function(e,t,n,r,i){return h.isNullOrUndefined(t)?C.of(r,D.INVALID_INPUT):e.remoteConfig(t,i,n,r)},e}(),zt=f.log,Ut=function(){function e(e,t,n){this.core=e,this.userManager=t,this.user=n}return e.prototype.get=function(e,t){var n,r=ct.start();try{n=this.decide(e,t)}catch(r){zt.error("Unexpected exception while deciding remote config parameter[".concat(e,"]. Returning default value. : ").concat(r)),n=C.of(t,D.EXCEPTION)}return Lt.remoteConfig(r,e,n),n.value},e.prototype.decide=function(e,t){var n=this.userManager.resolve(this.user);return Ft.decide(this.core,e,t,n)},e}(),jt=function(){function e(){this._properties=new Map,this.MAX_PROPERTIES_COUNT=128,this.MAX_PROPERTY_KEY_LENGTH=128}return e.prototype.contains=function(e){return this._properties.has(e)},e.prototype.remove=function(e){var t=this;return e instanceof Map&&e.forEach(function(e,n){t.remove(n)}),"string"==typeof e&&this._properties.delete(e),this},e.prototype.compute=function(e,t){var n=this._properties.get(e),r=t(n);null!==r?this.add(e,r):(null!==n||this.contains(e))&&this.remove(e)},e.prototype.add=function(e,t,n){if(void 0===n&&(n=!1),n&&this.contains(e))return this;if(this._properties.size>=this.MAX_PROPERTIES_COUNT)return this;if("string"==typeof e&&e.length>this.MAX_PROPERTY_KEY_LENGTH)return this;var r=_.sanitizeValue(e,t);return h.isNullOrUndefined(r)||this._properties.set(e,r),this},e.prototype.addProperties=function(e,t){var n=this;return void 0===t&&(t=!1),e.forEach(function(e,r){n.add(r,e,t)}),this},e.prototype.build=function(){return this._properties},e}();!function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.UNSET="$unset",e.INCREMENT="$increment",e.APPEND="$append",e.APPEND_ONCE="$appendOnce",e.PREPEND="$prepend",e.PREPEND_ONCE="$prependOnce",e.REMOVE="$remove",e.CLEAR_ALL="$clearAll"}(ft||(ft={}));var Bt=function(){function e(){}return e.prototype.operate=function(e,t){return 0===e.size?t:0===t.size?e:(new jt).addProperties(e).addProperties(t).build()},e}(),Vt=function(){function e(){}return e.prototype.operate=function(e,t){return 0===e.size?t:0===t.size?e:(new jt).addProperties(e).addProperties(t,!0).build()},e}(),Ht=function(){function e(){}return e.prototype.operate=function(e,t){return 0===e.size?new Map:0===t.size?e:(new jt).addProperties(e).remove(t).build()},e}(),$t=function(){function e(){}return e.prototype.operate=function(e,t){var n=this;if(0===t.size)return e;var r=new jt;return r.addProperties(e),t.forEach(function(e,t){r.compute(t,function(t){return n.increment(t,e)})}),r.build()},e.prototype.increment=function(e,t){return"number"!=typeof t?e:"number"!=typeof e?null==e?t:e:e+t},e}(),Yt=function(){function e(){}return e.prototype.operate=function(e,t){var n=this;if(0===t.size)return e;var r=new jt;return r.addProperties(e),t.forEach(function(e,t){r.compute(t,function(t){return n.compute(t,e)})}),r.build()},e.prototype.compute=function(e,t){var n=this.toArray(e),r=this.toArray(t);return this.operateArray(n,r)},e.prototype.toArray=function(e){return null==e?[]:Array.isArray(e)?e:[e]},e.prototype.contains=function(e,t){return e.includes(t)},e.prototype.prepend=function(e,t,n){return void 0===n&&(n=!1),n&&this.contains(t,e)?t:u([e],t,!0)},e.prototype.append=function(e,t,n){return void 0===n&&(n=!1),n&&this.contains(e,t)?e:u(u([],e,!0),[t],!1)},e}(),Gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){var n=this;return t.reduce(function(e,t){return n.append.bind(n)(e,t)},e)},t}(Yt),qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){return t.reduce(this.appendOnce.bind(this),e)},t.prototype.appendOnce=function(e,t){return this.append(e,t,!0)},t}(Yt),Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){var n=this;return t.reduceRight(function(e,t){return n.prepend.bind(n)(t,e)},e)},t}(Yt),Kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){var n=this;return t.reduce(this.appendOnce.bind(this),[]).reduceRight(function(e,t){return n.prependOnce.bind(n)(t,e)},e)},t.prototype.appendOnce=function(e,t){return this.append(e,t,!0)},t.prototype.prependOnce=function(e,t){return this.prepend(e,t,!0)},t}(Yt),Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.operateArray=function(e,t){return t.reduce(this.remove.bind(this),e)},t.prototype.remove=function(e,t){return e.filter(function(e){return e!==t})},t}(Yt),Jt=function(){function e(){}return e.prototype.operate=function(e,t){return new Map},e}(),Xt=function(){function e(){}return e.get=function(e){switch(e){case ft.SET:return new Bt;case ft.SET_ONCE:return new Vt;case ft.UNSET:return new Ht;case ft.INCREMENT:return new $t;case ft.APPEND:return new Gt;case ft.APPEND_ONCE:return new qt;case ft.PREPEND:return new Wt;case ft.PREPEND_ONCE:return new Kt;case ft.CLEAR_ALL:return new Jt;case ft.REMOVE:return new Zt}},e}(),Qt=function(){function e(){this.operations=new Map}return e.prototype.set=function(e,t){return this.add(ft.SET,e,t)},e.prototype.setOnce=function(e,t){return this.add(ft.SET_ONCE,e,t)},e.prototype.unset=function(e){return this.add(ft.UNSET,e,"-")},e.prototype.increment=function(e,t){return this.add(ft.INCREMENT,e,t)},e.prototype.append=function(e,t){return this.add(ft.APPEND,e,t)},e.prototype.appendOnce=function(e,t){return this.add(ft.APPEND_ONCE,e,t)},e.prototype.prepend=function(e,t){return this.add(ft.PREPEND,e,t)},e.prototype.prependOnce=function(e,t){return this.add(ft.PREPEND_ONCE,e,t)},e.prototype.remove=function(e,t){return this.add(ft.REMOVE,e,t)},e.prototype.clearAll=function(){return this.add(ft.CLEAR_ALL,"clearAll","-")},e.prototype.build=function(){var e=Array.from(this.operations.entries()).map(function(e){return[e[0],e[1].build()]});return new en(new Map(e))},e.prototype.containsKey=function(e){return Array.from(this.operations.entries()).some(function(t){return t[0],t[1].contains(e)})},e.prototype.add=function(e,t,n){if(this.containsKey(t))return this;this.operations.has(e)||this.operations.set(e,new jt);var r=this.operations.get(e);return null==r||r.add(t,n),this},e}(),en=function(){function e(e){this.operations=null!=e?e:new Map}return e.prototype.operate=function(e){var t=e;return this.operations.forEach(function(e,n){t=Xt.get(n).operate(t,e)}),t},e.prototype.toEvent=function(){var e={key:"$properties"};return this.operations.forEach(function(t,n){var r,i;e.properties=a(a({},e.properties),((r={})[n]=a(a({},null===(i=e.properties)||void 0===i?void 0:i[n]),_.sanitize(h.fromMap(t))),r))}),e},e.prototype.toSecuredEvent=function(){var e={key:"$secured_properties"};return this.operations.forEach(function(t,n){var r,i;e.properties=a(a({},e.properties),((r={})[n]=a(a({},null===(i=e.properties)||void 0===i?void 0:i[n]),_.sanitize(h.fromMap(t))),r))}),e},e.prototype.toRecord=function(){var e={};return this.operations.forEach(function(t,n){var r={};t.forEach(function(e,t){r[t]=e}),e[n]=r}),e},e}(),tn=function(){function e(){}return e.timeout=function(e,t){return new Promise(function(n,r){setTimeout(function(){return r(new Error("timeout (".concat(t,"ms)")))},t),e.then(n,r)})},e}(),nn=function(){function e(e,t,n,r,i,o,s){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s=""),this.pagePath=e,this.host=t,this.hostname=n,this.url=r,this.referrer=i,this.queryParameter=o,this.protocol=s}return e.prototype.isEquals=function(e){return this.url===e.url},Object.defineProperty(e.prototype,"pageTitle",{get:function(){return"undefined"==typeof window||"undefined"==typeof document?"":window.document.title},enumerable:!1,configurable:!0}),e.createWithCurrentPage=function(){return"undefined"==typeof window||"undefined"==typeof document?new e:new e(window.location.pathname,window.location.host,window.location.hostname,window.location.href,window.document.referrer,window.location.search,window.location.protocol)},e.prototype.toProperties=function(){return{pagePath:this.pagePath,pageTitle:this.pageTitle,host:this.host,url:this.url,referrer:this.referrer,queryParameter:this.queryParameter,protocol:this.protocol.replace(":","")}},e}(),rn=function(){function e(e){this.value=e}return e.create=function(t){return new e(t)},e.prototype.getValue=function(){return this.value},e}(),on=function(){function e(){}return e.toPublic=function(e){return{key:e.key}},e}(),sn=function(){function e(){}return e.toPublic=function(e){return{close:e.close.bind(e),inAppMessage:on.toPublic(e.context.inAppMessage)}},e}(),an=f.log,ln=function(){function e(e,t,n,r,i,o,s,a,l){this.core=e,this.synchronizer=t,this.sessionManager=n,this.userManager=r,this.piiEventManager=i,this.fetchThrottler=o,this.pageEventTracker=s,this.inAppMessageUi=a,this.devTools=l,this.initialized=!1,this.initialize=this.initialize.bind(this),this.getSessionId=this.getSessionId.bind(this),this.getUser=this.getUser.bind(this),this.setUser=this.setUser.bind(this),this.setUserId=this.setUserId.bind(this),this.setDeviceId=this.setDeviceId.bind(this),this.setUserProperty=this.setUserProperty.bind(this),this.setUserProperties=this.setUserProperties.bind(this),this.updateUserProperties=this.updateUserProperties.bind(this),this.updatePushSubscriptions=this.updatePushSubscriptions.bind(this),this.updateSmsSubscriptions=this.updateSmsSubscriptions.bind(this),this.updateKakaoSubscriptions=this.updateKakaoSubscriptions.bind(this),this.resetUser=this.resetUser.bind(this),this.variation=this.variation.bind(this),this.variationDetail=this.variationDetail.bind(this),this.isFeatureOn=this.isFeatureOn.bind(this),this.featureFlagDetail=this.featureFlagDetail.bind(this),this.track=this.track.bind(this),this.trackPageView=this.trackPageView.bind(this),this.remoteConfig=this.remoteConfig.bind(this),this.onReady=this.onReady.bind(this),this.onInitialized=this.onInitialized.bind(this),this.showUserExplorer=this.showUserExplorer.bind(this),this.hideUserExplorer=this.hideUserExplorer.bind(this),this.fetch=this.fetch.bind(this),this.close=this.close.bind(this),this.setInAppMessageListener=this.setInAppMessageListener.bind(this),this.getExperiment=this.getExperiment.bind(this),this.setPhoneNumber=this.setPhoneNumber.bind(this),this.unsetPhoneNumber=this.unsetPhoneNumber.bind(this),this.getDisplayedInAppMessageView=this.getDisplayedInAppMessageView.bind(this),this.initialization=this.initialize()}return e.prototype.initialize=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),an.debug("HackleClient initializing"),[4,this.synchronizer.sync()];case 1:return t.sent(),an.debug("HackleClient initialized"),[3,4];case 2:throw e=t.sent(),an.error("HackleClient initialize failed: ".concat(e)),e;case 3:return this.initialized=!0,[7];case 4:return[2]}})})},e.prototype.getSessionId=function(){return this.sessionManager.sessionId},e.prototype.getUser=function(){return this.userManager.currentUser},e.prototype.setUser=function(e){try{var t=$(e);if(!t)return an.warn("invalid user"),Promise.resolve();var n=this.userManager.setUser(t);return this.userManager.syncIfNeeded(n).catch(function(){})}catch(e){return an.error("Unexpected exception while set user: ".concat(e)),Promise.resolve()}},e.prototype.setUserId=function(e){try{var t=void 0;if(h.isNullOrUndefined(e))t=this.userManager.setUserId(void 0);else{var n=y.sanitizeValue(e);if(!n)return an.warn("Invalid userId. [userId=".concat(e,"]")),Promise.resolve();t=this.userManager.setUserId(n)}return this.userManager.syncIfNeeded(t).catch(function(){})}catch(e){return an.error("Unexpected exception while set userId: ".concat(e)),Promise.resolve()}},e.prototype.setDeviceId=function(e){try{var t=y.sanitizeValue(e);if(!t)return an.warn("Invalid deviceId. [deviceId=".concat(e,"]")),Promise.resolve();var n=this.userManager.setDeviceId(t);return this.userManager.syncIfNeeded(n).catch(function(){})}catch(e){return an.error("Unexpected exception while set deviceId: ".concat(e)),Promise.resolve()}},e.prototype.setUserProperty=function(e,t){var n=(new Qt).set(e,t).build();return this.updateUserProperties(n)},e.prototype.setUserProperties=function(e){try{var t=_.sanitize(e),n=new Qt;return Object.entries(t).forEach(function(e){var t=e[0],r=e[1];n.set(t,r)}),this.updateUserProperties(n.build())}catch(e){return an.error("Unexpected exception while set userProperties: ".concat(e)),Promise.resolve()}},e.prototype.updateUserProperties=function(e){try{var t=e.toEvent();return this.track(t),this.userManager.updateUserProperties(e),this.core.flush(!1),Promise.resolve()}catch(e){return an.error("Unexpected exception while update userProperties: ".concat(e)),Promise.resolve()}},e.prototype.updatePushSubscriptions=function(e){try{var t=e.toEvent("$push_subscriptions");return this.track(t),this.core.flush(!1),Promise.resolve()}catch(e){return an.error("Unexpected exception while update userProperties: ".concat(e)),Promise.resolve()}},e.prototype.updateSmsSubscriptions=function(e){try{var t=e.toEvent("$sms_subscriptions");return this.track(t),this.core.flush(!1),Promise.resolve()}catch(e){return an.error("Unexpected exception while update userProperties: ".concat(e)),Promise.resolve()}},e.prototype.updateKakaoSubscriptions=function(e){try{var t=e.toEvent("$kakao_subscriptions");return this.track(t),this.core.flush(!1),Promise.resolve()}catch(e){return an.error("Unexpected exception while update userProperties: ".concat(e)),Promise.resolve()}},e.prototype.resetUser=function(){try{var e=this.userManager.resetUser(),t=(new Qt).clearAll().build();return this.track(t.toEvent()),this.userManager.syncIfNeeded(e).catch(function(){})}catch(e){return an.error("Unexpected exception while reset user: ".concat(e)),Promise.resolve()}},e.prototype.setPhoneNumber=function(e){try{if("string"!=typeof e)return an.error("Invalid value ".concat(e,": phoneNumber value type must be string.")),Promise.resolve();var t=rn.create(e),n=S.instance.currentMillis();return this.piiEventManager.setPhoneNumber(t,n),this.core.flush(!1),Promise.resolve()}catch(e){return an.error("Unexpected exception occurred while setting phone number: ".concat(e)),Promise.resolve()}},e.prototype.unsetPhoneNumber=function(){try{var e=S.instance.currentMillis();return this.piiEventManager.unsetPhoneNumber(e),this.core.flush(!1),Promise.resolve()}catch(e){return an.error("Unexpected exception occurred while unsetting phone number: ".concat(e)),Promise.resolve()}},e.prototype.variation=function(e,t,n){return this.variationDetail(e,t,n).variation},e.prototype.variationDetail=function(e,t,n){var r=n||"A",i=ct.start(),o=function(n){try{var i=n.userManager.resolve(t);return n.core.experiment(e,i,r)}catch(t){return an.error("Unexpected exception while deciding variation for experiment[".concat(e,"]. Returning default variation[").concat(r,"] : ").concat(t)),I.of(r,D.EXCEPTION)}}(this);return Lt.experiment(i,e,o),o},e.prototype.isFeatureOn=function(e,t){return this.featureFlagDetail(e,t).isOn},e.prototype.featureFlagDetail=function(e,t){var n=ct.start(),r=function(n){try{var r=n.userManager.resolve(t);return n.core.featureFlag(e,r)}catch(t){return an.error("Unexpected exception while deciding feature flag[".concat(e,"]. Returning default value[false] : ").concat(t)),P.off(D.EXCEPTION)}}(this);return Lt.featureFlag(n,e,r),r},e.prototype.track=function(e,t){try{an.debug("track event : ".concat(JSON.stringify(e)));var n=this._convertEvent(e),r=this.userManager.resolve(t);this.core.track(n,r)}catch(e){an.error("Unexpected exception while tracking event: ".concat(e))}},e.prototype.trackPageView=function(e){var t=nn.createWithCurrentPage();this.pageEventTracker.track(t)},e.prototype.remoteConfig=function(e){return new Ut(this.core,this.userManager,e)},e.prototype.onReady=function(e,t){void 0===t&&(t=3e3),this.onInitialized({timeout:t}).finally(function(){return e()})},e.prototype.getExperiment=function(e){try{return this.core.getExperiment(e)}catch(i){return void an.error('"Unexpected exception while get experiment['.concat(e,"]"))}},e.prototype.onInitialized=function(e){var t;return l(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:if(this.initialized)return[2,{success:!0}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,tn.timeout(this.initialization,null!==(t=null==e?void 0:e.timeout)&&void 0!==t?t:3e3)];case 2:return r.sent(),[2,{success:!0}];case 3:return n=r.sent(),an.error("Failed to onInitialized: ".concat(n)),[2,{success:!1}];case 4:return[2]}})})},e.prototype._convertEvent=function(e){return"string"==typeof e?{key:e}:e},e.prototype.showUserExplorer=function(){var e;(null===(e=this.devTools)||void 0===e?void 0:e.userExplorer)?(an.debug("UserExplorer opened."),At.counter("user.explorer.show",{}).increment(),this.devTools.manager.userExplorer(this.devTools.userExplorer)):an.error("UserExplorer is not provided")},e.prototype.hideUserExplorer=function(){this.devTools?this.devTools.manager.close():an.warn("There is no active HackleDevtools.")},e.prototype.fetch=function(){var e=this;return this.fetchThrottler.execute(function(){return e.synchronizer.sync()},function(){return Promise.resolve()})},e.prototype.setInAppMessageListener=function(e){this.inAppMessageUi.setListener(e)},e.prototype.getDisplayedInAppMessageView=function(){return this.inAppMessageUi.currentMessageView?sn.toPublic(this.inAppMessageUi.currentMessageView):null},e.prototype.close=function(){an.debug("HackleClient closing"),this.core.close(),this.synchronizer.close()},e}(),cn=f.log,un=function(){function e(e,t,n){this.invocationProcessor=e,this.user=t,this.browserPropertyProvider=n}return e.prototype.get=function(e,t){var n=typeof t;try{var r={command:"remoteConfig",parameters:{defaultValue:t,key:e,valueType:n,user:this.user},browserProperties:this.browserPropertyProvider.getBrowserProperties()},i=this.invocationProcessor.process(r);if(!i)throw new Error("invoke result data not exists");switch(n){case"number":return Number(i);case"boolean":return Boolean(i);default:return i}}catch(n){return cn.error("Unexpected exception while deciding remote config parameter[".concat(e,"]. Returning default value. : ").concat(n)),t}},e}(),hn=function(){function e(){}return e.tryParse=function(e){try{return new URL(e)}catch(e){return}},e.removePathnameTrailingSlash=function(t){var n=t instanceof URL?t:e.tryParse(t);return n?(n.pathname.endsWith("/")&&(n.pathname=n.pathname.replace(/\/+$/,"")),n.href):String(t)},e.tryDecodeURI=function(e){try{return decodeURI(e)}catch(e){return}},e.tryDecodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(e){return}},e.decodeURIOrOriginal=function(e){try{return decodeURI(e)}catch(i){return e}},e.decodeURIComponentOrOriginal=function(e){try{return decodeURIComponent(e)}catch(i){return e}},e}(),dn=function(){function e(e){void 0===e&&(e={days:0,isCrossSubdomain:!1,isSecure:!1}),this.options=e}return e.extractDomain=function(e){var t=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,n=e.split("."),r=n[n.length-1];(r.length>4||"com"===r||"org"===r)&&(t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i);var i=e.match(t);return i?i[0]:""},e.prototype.getItem=function(e){for(var t,n=e+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var o=r[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return null!==(t=hn.tryDecodeURIComponent(o.substring(n.length,o.length)))&&void 0!==t?t:null}return null},e.prototype.getAllItem=function(e){var t=document.cookie.split("; ").map(function(e){return e.split("=")}),n=null==e?void 0:e.keyPrefix;return n?t.filter(function(e){var t=e[0];return e[1],t.startsWith(n)}):t},e.prototype.setItem=function(t,n,r){var i=a(a({},this.options),r),o="",s="",l="",c="";if(i.isCrossSubdomain){var u=e.extractDomain(document.location.hostname);o=u?"; domain=."+u:""}if(i.days){var h=new Date;h.setTime(h.getTime()+24*i.days*60*60*1e3),s="; expires="+h.toUTCString()}i.sameSite&&(c="; SameSite=".concat(i.sameSite)),i.isSecure&&(l+="; secure");var d=t+"="+encodeURIComponent(n)+s+"; path=/"+o+c+l;return document.cookie=d,d},e.prototype.removeItem=function(e,t){this.setItem(e,"",a(a({},t),{days:-1}))},e.prototype.getOptions=function(){return this.options},e.getInstance=function(t){return void 0===t&&(t={days:3650,isCrossSubdomain:!0}),e.storage||(e.storage=new e(t)),e.storage},e}(),pn=function(){function e(){}return e.prototype.initialize=function(){dn.getInstance().getItem("_hackle_hid")||yn()},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"hidden":case"pagehide":return gn();case"blur":case"focus":case"locationChange":case"visible":case"pageshow":return}},e}();function fn(){var e=dn.getInstance(),t=e.getItem("_hackle_id");return t||(e.getItem("_hackle_hid")||yn())}function mn(e){dn.getInstance().setItem("_hackle_id",e)}function gn(){dn.getInstance().removeItem("_hackle_id")}function yn(){var e=r.v4();return dn.getInstance().setItem("_hackle_hid",e),e}var vn,_n=f.log;!function(e){e.native="native",e.web_view_wrapper="web_view_wrapper"}(vn||(vn={}));var bn=function(){function e(e,t){this.invocationProcessor=e,this.browserPropertyProvider=t,this.getSessionId=this.getSessionId.bind(this),this.getUser=this.getUser.bind(this),this.setUser=this.setUser.bind(this),this.setUserId=this.setUserId.bind(this),this.setDeviceId=this.setDeviceId.bind(this),this.setUserProperty=this.setUserProperty.bind(this),this.setUserProperties=this.setUserProperties.bind(this),this.updateUserProperties=this.updateUserProperties.bind(this),this.updatePushSubscriptions=this.updatePushSubscriptions.bind(this),this.updateSmsSubscriptions=this.updateSmsSubscriptions.bind(this),this.updateKakaoSubscriptions=this.updateKakaoSubscriptions.bind(this),this.resetUser=this.resetUser.bind(this),this.variation=this.variation.bind(this),this.variationDetail=this.variationDetail.bind(this),this.isFeatureOn=this.isFeatureOn.bind(this),this.featureFlagDetail=this.featureFlagDetail.bind(this),this.track=this.track.bind(this),this.trackPageView=this.trackPageView.bind(this),this.remoteConfig=this.remoteConfig.bind(this),this.onReady=this.onReady.bind(this),this.onInitialized=this.onInitialized.bind(this),this.showUserExplorer=this.showUserExplorer.bind(this),this.hideUserExplorer=this.hideUserExplorer.bind(this),this.fetch=this.fetch.bind(this),this.close=this.close.bind(this),this.setInAppMessageListener=this.setInAppMessageListener.bind(this),this.getExperiment=this.getExperiment.bind(this),this.setPhoneNumber=this.setPhoneNumber.bind(this),this.unsetPhoneNumber=this.unsetPhoneNumber.bind(this),this.getDisplayedInAppMessageView=this.getDisplayedInAppMessageView.bind(this)}return e.prototype.getSessionId=function(){try{var e={command:"getSessionId",browserProperties:this.browserPropertyProvider.getBrowserProperties()},t=this.invocationProcessor.process(e);return null!=t?t:fn()}catch(e){return _n.error("Unexpected exception while get sessionId: ".concat(e)),fn()}},e.prototype.getUser=function(){var e;try{var t={command:"getUser",browserProperties:this.browserPropertyProvider.getBrowserProperties()},n=this.invocationProcessor.process(t);return null!==(e=$(n))&&void 0!==e?e:this.defaultUser()}catch(e){return _n.error("Unexpected exception while get user: ".concat(e)),this.defaultUser()}},e.prototype.setUser=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){try{if(!(t=$(e)))return _n.warn("invalid user"),[2];n={command:"setUser",parameters:{user:t},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(n)}catch(e){_n.error("Unexpected exception while set user: ".concat(e))}return[2]})})},e.prototype.setUserId=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){try{if(t=void 0,h.isNullOrUndefined(e))t=null;else if(!(t=y.sanitizeValue(e)))return _n.warn("Invalid userId. [userId=".concat(e,"]")),[2];n={command:"setUserId",parameters:{userId:t},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(n)}catch(e){_n.error("Unexpected exception while set userId: ".concat(e))}return[2]})})},e.prototype.setDeviceId=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){try{if(!(t=y.sanitizeValue(e)))return _n.warn("Invalid deviceId. [deviceId=".concat(e,"]")),[2];n={command:"setDeviceId",parameters:{deviceId:t},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(n)}catch(e){_n.error("Unexpected exception while set deviceId: ".concat(e))}return[2]})})},e.prototype.setUserProperty=function(e,t){return l(this,void 0,void 0,function(){var n;return c(this,function(r){try{n={command:"setUserProperty",parameters:{key:e,value:t},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(n)}catch(e){_n.error("Unexpected exception while set userProperty: ".concat(e))}return[2]})})},e.prototype.setUserProperties=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){try{t=_.sanitize(e),n=new Qt,Object.entries(t).forEach(function(e){var t=e[0],r=e[1];n.set(t,r)}),this.updateUserProperties(n.build())}catch(e){_n.error("Unexpected exception while set userProperties: ".concat(e))}return[2]})})},e.prototype.updateUserProperties=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{t={command:"updateUserProperties",parameters:{operations:e.toRecord()},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(e){_n.error("Unexpected exception while update userProperties: ".concat(e))}return[2]})})},e.prototype.updatePushSubscriptions=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{t={command:"updatePushSubscriptions",parameters:{operations:e.toRecord()},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(e){_n.error("Unexpected exception while update push subscriptions: ".concat(e))}return[2]})})},e.prototype.updateSmsSubscriptions=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{t={command:"updateSmsSubscriptions",parameters:{operations:e.toRecord()},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(e){_n.error("Unexpected exception while update sms subscriptions: ".concat(e))}return[2]})})},e.prototype.updateKakaoSubscriptions=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{t={command:"updateKakaoSubscriptions",parameters:{operations:e.toRecord()},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(e){_n.error("Unexpected exception while update Kakao subscriptions: ".concat(e))}return[2]})})},e.prototype.resetUser=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){try{e={command:"resetUser",browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(e)}catch(e){_n.error("Unexpected exception while reset user: ".concat(e))}return[2]})})},e.prototype.setPhoneNumber=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){try{if("string"!=typeof e)return _n.error("Invalid type ".concat(e,": phoneNumber value must be string.")),[2,Promise.resolve()];t={command:"setPhoneNumber",parameters:{phoneNumber:e},browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(t)}catch(e){_n.error("Unexpected exception occurred while setting phone number: ".concat(e))}return[2]})})},e.prototype.unsetPhoneNumber=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){try{e={command:"unsetPhoneNumber",browserProperties:this.browserPropertyProvider.getBrowserProperties()},this.invocationProcessor.process(e)}catch(e){_n.error("Unexpected exception occurred while unsetting phone number: ".concat(e))}return[2]})})},e.prototype.variation=function(e,t,n){void 0===n&&(n="A");try{var r={command:"variation",parameters:{experimentKey:e,defaultVariation:n,user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()},i=this.invocationProcessor.process(r);if(!i)throw new Error("invoke result data not exists");return i}catch(t){return _n.error("Unexpected exception while deciding variation for experiment[".concat(e,"]. Returning default variation[").concat(n,"] : ").concat(t)),n}},e.prototype.variationDetail=function(e,t,n){var r;void 0===n&&(n="A");try{var i={command:"variationDetail",parameters:{experimentKey:e,defaultVariation:n,user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()},o=this.invocationProcessor.process(i);if(null===o)throw new Error("invoke result data not exists");return I.of(o.variation,o.reason,new T(null!==(r=o.config.parameters)&&void 0!==r?r:{}))}catch(t){return _n.error("Unexpected exception while deciding variation for experiment[".concat(e,"]. Returning default variation[").concat(n,"] : ").concat(t)),I.of(n,D.EXCEPTION)}},e.prototype.isFeatureOn=function(e,t){try{var n={command:"isFeatureOn",parameters:{featureKey:e,user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()},r=this.invocationProcessor.process(n);if(null===r)throw new Error("invoke result data not exists");return Boolean(r)}catch(t){return _n.error("Unexpected exception while deciding feature flag[".concat(e,"]. Returning default value[false] : ").concat(t)),!1}},e.prototype.featureFlagDetail=function(e,t){var n;try{var r={command:"featureFlagDetail",parameters:{featureKey:e,user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()},i=this.invocationProcessor.process(r);if(null===i)throw new Error("invoke result data not exists");return new P(i.isOn,i.reason,new T(null!==(n=i.config.parameters)&&void 0!==n?n:{}),void 0)}catch(t){return _n.error("Unexpected exception while deciding feature flag[".concat(e,"]. Returning default value[false] : ").concat(t)),P.off(D.EXCEPTION)}},e.prototype.track=function(e,t){try{var n={command:"track",parameters:{event:this.convertEvent(e),user:this.convertUser(t)},browserProperties:this.browserPropertyProvider.getBrowserProperties()};this.invocationProcessor.process(n)}catch(e){_n.error("Unexpected exception while tracking event: ".concat(e))}},e.prototype.trackPageView=function(e){_n.info("Web to app integration feature is not support 'trackPageView' method")},e.prototype.remoteConfig=function(e){return new un(this.invocationProcessor,this.convertUser(e),this.browserPropertyProvider)},e.prototype.onReady=function(e,t){e()},e.prototype.showUserExplorer=function(){try{var e={command:"showUserExplorer",browserProperties:this.browserPropertyProvider.getBrowserProperties()};this.invocationProcessor.process(e)}catch(e){_n.error("Unexpected exception while show userExplorer: ".concat(e))}},e.prototype.hideUserExplorer=function(){try{var e={command:"hideUserExplorer",browserProperties:this.browserPropertyProvider.getBrowserProperties()};this.invocationProcessor.process(e)}catch(e){_n.error("Unexpected exception while hide userExplorer: ".concat(e))}},e.prototype.setInAppMessageListener=function(e){_n.info("Web to app integration feature is not support 'setInAppMessageListener' method")},e.prototype.fetch=function(){return Promise.resolve()},e.prototype.onInitialized=function(e){return Promise.resolve({success:!0})},e.prototype.close=function(){_n.info("Web to app integration feature is not support 'close' method")},e.prototype.getExperiment=function(e){_n.info("Web to app integration feature is not support 'getExperiment' method")},e.prototype.convertEvent=function(e){return"string"==typeof e?{key:e}:e},e.prototype.convertUser=function(e){var t;return"string"==typeof e?e:e&&null!==(t=$(e))&&void 0!==t?t:void 0},e.prototype.defaultUser=function(){return{deviceId:fn()}},e.prototype.getDisplayedInAppMessageView=function(){return _n.info("Web to app integration feature is not support 'getDisplayedInAppMessageView' method"),null},e}(),wn=function(){function e(e,t){this.browser=e,this.app=t,this.getSessionId=this.getSessionId.bind(this),this.getUser=this.getUser.bind(this),this.setUser=this.setUser.bind(this),this.setUserId=this.setUserId.bind(this),this.setDeviceId=this.setDeviceId.bind(this),this.setUserProperty=this.setUserProperty.bind(this),this.setUserProperties=this.setUserProperties.bind(this),this.updateUserProperties=this.updateUserProperties.bind(this),this.updatePushSubscriptions=this.updatePushSubscriptions.bind(this),this.updateSmsSubscriptions=this.updateSmsSubscriptions.bind(this),this.updateKakaoSubscriptions=this.updateKakaoSubscriptions.bind(this),this.resetUser=this.resetUser.bind(this),this.variation=this.variation.bind(this),this.variationDetail=this.variationDetail.bind(this),this.isFeatureOn=this.isFeatureOn.bind(this),this.featureFlagDetail=this.featureFlagDetail.bind(this),this.track=this.track.bind(this),this.trackPageView=this.trackPageView.bind(this),this.remoteConfig=this.remoteConfig.bind(this),this.onReady=this.onReady.bind(this),this.onInitialized=this.onInitialized.bind(this),this.showUserExplorer=this.showUserExplorer.bind(this),this.hideUserExplorer=this.hideUserExplorer.bind(this),this.fetch=this.fetch.bind(this),this.close=this.close.bind(this),this.setInAppMessageListener=this.setInAppMessageListener.bind(this),this.getExperiment=this.getExperiment.bind(this),this.setPhoneNumber=this.setPhoneNumber.bind(this),this.unsetPhoneNumber=this.unsetPhoneNumber.bind(this),this.getDisplayedInAppMessageView=this.getDisplayedInAppMessageView.bind(this)}return e.prototype.getSessionId=function(){return this.browser.getSessionId()},e.prototype.getUser=function(){return this.browser.getUser()},e.prototype.syncUser=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this.browser.getUser(),[4,this.app.setUser(e)];case 1:return t.sent(),[2]}})})},e.prototype.setUser=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setUser(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.setUserId=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setUserId(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.setDeviceId=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setDeviceId(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.setUserProperty=function(e,t){return l(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,this.browser.setUserProperty(e,t)];case 1:return n.sent(),[4,this.syncUser()];case 2:return n.sent(),[2]}})})},e.prototype.setUserProperties=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setUserProperties(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.updateUserProperties=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.updateUserProperties(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.updatePushSubscriptions=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.updatePushSubscriptions(e)];case 1:return t.sent(),[2]}})})},e.prototype.updateSmsSubscriptions=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.updateSmsSubscriptions(e)];case 1:return t.sent(),[2]}})})},e.prototype.updateKakaoSubscriptions=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.updateKakaoSubscriptions(e)];case 1:return t.sent(),[2]}})})},e.prototype.resetUser=function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.browser.resetUser()];case 1:return e.sent(),[4,this.syncUser()];case 2:return e.sent(),[2]}})})},e.prototype.setPhoneNumber=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.browser.setPhoneNumber(e)];case 1:return t.sent(),[4,this.syncUser()];case 2:return t.sent(),[2]}})})},e.prototype.unsetPhoneNumber=function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.browser.unsetPhoneNumber()];case 1:return e.sent(),[4,this.syncUser()];case 2:return e.sent(),[2]}})})},e.prototype.variation=function(e,t,n){return void 0===n&&(n="A"),this.browser.variation(e,t,n)},e.prototype.variationDetail=function(e,t,n){return void 0===n&&(n="A"),this.browser.variationDetail(e,t,n)},e.prototype.isFeatureOn=function(e,t){return this.browser.isFeatureOn(e,t)},e.prototype.featureFlagDetail=function(e,t){return this.browser.featureFlagDetail(e,t)},e.prototype.track=function(e,t){return this.browser.track(e,t)},e.prototype.trackPageView=function(e){return this.browser.trackPageView(e)},e.prototype.remoteConfig=function(e){return this.browser.remoteConfig(e)},e.prototype.onReady=function(e,t){this.browser.onReady(e,t)},e.prototype.showUserExplorer=function(){this.browser.showUserExplorer()},e.prototype.hideUserExplorer=function(){this.browser.hideUserExplorer()},e.prototype.fetch=function(){return this.browser.fetch()},e.prototype.onInitialized=function(e){return this.browser.onInitialized(e)},e.prototype.close=function(){this.browser.close()},e.prototype.setInAppMessageListener=function(e){this.browser.setInAppMessageListener(e)},e.prototype.getExperiment=function(e){return this.browser.getExperiment(e)},e.prototype.getDisplayedInAppMessageView=function(){return this.browser.getDisplayedInAppMessageView()},e}(),xn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},Sn=function(e){return e&&e.Math==Math&&e},En=Sn("object"==typeof globalThis&&globalThis)||Sn("object"==typeof window&&window)||Sn("object"==typeof self&&self)||Sn("object"==typeof xn&&xn)||function(){return this}()||Function("return this")(),Tn={},Mn=function(e){try{return!!e()}catch(e){return!0}},An=!Mn(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),kn=!Mn(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),Cn=kn,In=Function.prototype.call,Pn=Cn?In.bind(In):function(){return In.apply(In,arguments)},On={},Rn={}.propertyIsEnumerable,Dn=Object.getOwnPropertyDescriptor,Ln=Dn&&!Rn.call({1:2},1);On.f=Ln?function(e){var t=Dn(this,e);return!!t&&t.enumerable}:Rn;var Nn,Fn,zn=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Un=kn,jn=Function.prototype,Bn=jn.bind,Vn=jn.call,Hn=Un&&Bn.bind(Vn,Vn),$n=Un?function(e){return e&&Hn(e)}:function(e){return e&&function(){return Vn.apply(e,arguments)}},Yn=$n,Gn=Yn({}.toString),qn=Yn("".slice),Wn=function(e){return qn(Gn(e),8,-1)},Kn=Mn,Zn=Wn,Jn=Object,Xn=$n("".split),Qn=Kn(function(){return!Jn("z").propertyIsEnumerable(0)})?function(e){return"String"==Zn(e)?Xn(e,""):Jn(e)}:Jn,er=TypeError,tr=function(e){if(null==e)throw er("Can't call method on "+e);return e},nr=Qn,rr=tr,ir=function(e){return nr(rr(e))},or=function(e){return"function"==typeof e},sr=or,ar=function(e){return"object"==typeof e?null!==e:sr(e)},lr=En,cr=or,ur=function(e,t){return arguments.length<2?function(e){return cr(e)?e:void 0}(lr[e]):lr[e]&&lr[e][t]},hr=$n({}.isPrototypeOf),dr=ur("navigator","userAgent")||"",pr=En,fr=dr,mr=pr.process,gr=pr.Deno,yr=mr&&mr.versions||gr&&gr.version,vr=yr&&yr.v8;vr&&(Fn=(Nn=vr.split("."))[0]>0&&Nn[0]<4?1:+(Nn[0]+Nn[1])),!Fn&&fr&&(!(Nn=fr.match(/Edge\/(\d+)/))||Nn[1]>=74)&&(Nn=fr.match(/Chrome\/(\d+)/))&&(Fn=+Nn[1]);var _r=Fn,br=_r,wr=Mn,xr=!!Object.getOwnPropertySymbols&&!wr(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&br&&br<41}),Sr=xr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Er=ur,Tr=or,Mr=hr,Ar=Object,kr=Sr?function(e){return"symbol"==typeof e}:function(e){var t=Er("Symbol");return Tr(t)&&Mr(t.prototype,Ar(e))},Cr=String,Ir=function(e){try{return Cr(e)}catch(e){return"Object"}},Pr=or,Or=Ir,Rr=TypeError,Dr=function(e){if(Pr(e))return e;throw Rr(Or(e)+" is not a function")},Lr=Dr,Nr=function(e,t){var n=e[t];return null==n?void 0:Lr(n)},Fr=Pn,zr=or,Ur=ar,jr=TypeError,Br={exports:{}},Vr=En,Hr=Object.defineProperty,$r=function(e,t){try{Hr(Vr,e,{value:t,configurable:!0,writable:!0})}catch(o){Vr[e]=t}return t},Yr=$r,Gr=En["__core-js_shared__"]||Yr("__core-js_shared__",{}),qr=Gr;(Br.exports=function(e,t){return qr[e]||(qr[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.1",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Wr=tr,Kr=Object,Zr=function(e){return Kr(Wr(e))},Jr=Zr,Xr=$n({}.hasOwnProperty),Qr=Object.hasOwn||function(e,t){return Xr(Jr(e),t)},ei=$n,ti=0,ni=Math.random(),ri=ei(1..toString),ii=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ri(++ti+ni,36)},oi=En,si=Br.exports,ai=Qr,li=ii,ci=xr,ui=Sr,hi=si("wks"),di=oi.Symbol,pi=di&&di.for,fi=ui?di:di&&di.withoutSetter||li,mi=function(e){if(!ai(hi,e)||!ci&&"string"!=typeof hi[e]){var t="Symbol."+e;ci&&ai(di,e)?hi[e]=di[e]:hi[e]=ui&&pi?pi(t):fi(t)}return hi[e]},gi=Pn,yi=ar,vi=kr,_i=Nr,bi=TypeError,wi=mi("toPrimitive"),xi=function(e,t){if(!yi(e)||vi(e))return e;var n,r=_i(e,wi);if(r){if(void 0===t&&(t="default"),n=gi(r,e,t),!yi(n)||vi(n))return n;throw bi("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&zr(n=e.toString)&&!Ur(r=Fr(n,e)))return r;if(zr(n=e.valueOf)&&!Ur(r=Fr(n,e)))return r;if("string"!==t&&zr(n=e.toString)&&!Ur(r=Fr(n,e)))return r;throw jr("Can't convert object to primitive value")}(e,t)},Si=kr,Ei=function(e){var t=xi(e,"string");return Si(t)?t:t+""},Ti=ar,Mi=En.document,Ai=Ti(Mi)&&Ti(Mi.createElement),ki=function(e){return Ai?Mi.createElement(e):{}},Ci=ki,Ii=!An&&!Mn(function(){return 7!=Object.defineProperty(Ci("div"),"a",{get:function(){return 7}}).a}),Pi=An,Oi=Pn,Ri=On,Di=zn,Li=ir,Ni=Ei,Fi=Qr,zi=Ii,Ui=Object.getOwnPropertyDescriptor;Tn.f=Pi?Ui:function(e,t){if(e=Li(e),t=Ni(t),zi)try{return Ui(e,t)}catch(e){}if(Fi(e,t))return Di(!Oi(Ri.f,e,t),e[t])};var ji={},Bi=An&&Mn(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Vi=ar,Hi=String,$i=TypeError,Yi=function(e){if(Vi(e))return e;throw $i(Hi(e)+" is not an object")},Gi=An,qi=Ii,Wi=Bi,Ki=Yi,Zi=Ei,Ji=TypeError,Xi=Object.defineProperty,Qi=Object.getOwnPropertyDescriptor;ji.f=Gi?Wi?function(e,t,n){if(Ki(e),t=Zi(t),Ki(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=Qi(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return Xi(e,t,n)}:Xi:function(e,t,n){if(Ki(e),t=Zi(t),Ki(n),qi)try{return Xi(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Ji("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var eo=ji,to=zn,no=An?function(e,t,n){return eo.f(e,t,to(1,n))}:function(e,t,n){return e[t]=n,e},ro={exports:{}},io=An,oo=Qr,so=Function.prototype,ao=io&&Object.getOwnPropertyDescriptor,lo=oo(so,"name"),co={EXISTS:lo,PROPER:lo&&"something"===function(){}.name,CONFIGURABLE:lo&&(!io||io&&ao(so,"name").configurable)},uo=or,ho=Gr,po=$n(Function.toString);uo(ho.inspectSource)||(ho.inspectSource=function(e){return po(e)});var fo,mo,go,yo=ho.inspectSource,vo=or,_o=yo,bo=En.WeakMap,wo=vo(bo)&&/native code/.test(_o(bo)),xo=Br.exports,So=ii,Eo=xo("keys"),To=function(e){return Eo[e]||(Eo[e]=So(e))},Mo={},Ao=wo,ko=En,Co=$n,Io=ar,Po=no,Oo=Qr,Ro=Gr,Do=To,Lo=Mo,No=ko.TypeError,Fo=ko.WeakMap;if(Ao||Ro.state){var zo=Ro.state||(Ro.state=new Fo),Uo=Co(zo.get),jo=Co(zo.has),Bo=Co(zo.set);fo=function(e,t){if(jo(zo,e))throw new No("Object already initialized");return t.facade=e,Bo(zo,e,t),t},mo=function(e){return Uo(zo,e)||{}},go=function(e){return jo(zo,e)}}else{var Vo=Do("state");Lo[Vo]=!0,fo=function(e,t){if(Oo(e,Vo))throw new No("Object already initialized");return t.facade=e,Po(e,Vo,t),t},mo=function(e){return Oo(e,Vo)?e[Vo]:{}},go=function(e){return Oo(e,Vo)}}var Ho={set:fo,get:mo,has:go,enforce:function(e){return go(e)?mo(e):fo(e,{})},getterFor:function(e){return function(t){var n;if(!Io(t)||(n=mo(t)).type!==e)throw No("Incompatible receiver, "+e+" required");return n}}},$o=Mn,Yo=or,Go=Qr,qo=An,Wo=co.CONFIGURABLE,Ko=yo,Zo=Ho.enforce,Jo=Ho.get,Xo=Object.defineProperty,Qo=qo&&!$o(function(){return 8!==Xo(function(){},"length",{value:8}).length}),es=String(String).split("String"),ts=ro.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!Go(e,"name")||Wo&&e.name!==t)&&(qo?Xo(e,"name",{value:t,configurable:!0}):e.name=t),Qo&&n&&Go(n,"arity")&&e.length!==n.arity&&Xo(e,"length",{value:n.arity});try{n&&Go(n,"constructor")&&n.constructor?qo&&Xo(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=Zo(e);return Go(r,"source")||(r.source=es.join("string"==typeof t?t:"")),e};Function.prototype.toString=ts(function(){return Yo(this)&&Jo(this).source||Ko(this)},"toString");var ns=or,rs=ji,is=ro.exports,os=$r,ss=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(ns(n)&&is(n,o,r),r.global)i?e[t]=n:os(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=n:rs.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},as={},ls=Math.ceil,cs=Math.floor,us=Math.trunc||function(e){var t=+e;return(t>0?cs:ls)(t)},hs=function(e){var t=+e;return t!=t||0===t?0:us(t)},ds=hs,ps=Math.max,fs=Math.min,ms=function(e,t){var n=ds(e);return n<0?ps(n+t,0):fs(n,t)},gs=hs,ys=Math.min,vs=function(e){return function(e){return e>0?ys(gs(e),9007199254740991):0}(e.length)},_s=ir,bs=ms,ws=vs,xs=function(e){return function(t,n,r){var i,o=_s(t),s=ws(o),a=bs(r,s);if(e&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},Ss={includes:xs(!0),indexOf:xs(!1)},Es=Qr,Ts=ir,Ms=Ss.indexOf,As=Mo,ks=$n([].push),Cs=function(e,t){var n,r=Ts(e),i=0,o=[];for(n in r)!Es(As,n)&&Es(r,n)&&ks(o,n);for(;t.length>i;)Es(r,n=t[i++])&&(~Ms(o,n)||ks(o,n));return o},Is=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ps=Cs,Os=Is.concat("length","prototype");as.f=Object.getOwnPropertyNames||function(e){return Ps(e,Os)};var Rs={};Rs.f=Object.getOwnPropertySymbols;var Ds=ur,Ls=as,Ns=Rs,Fs=Yi,zs=$n([].concat),Us=Ds("Reflect","ownKeys")||function(e){var t=Ls.f(Fs(e)),n=Ns.f;return n?zs(t,n(e)):t},js=Qr,Bs=Us,Vs=Tn,Hs=ji,$s=function(e,t,n){for(var r=Bs(t),i=Hs.f,o=Vs.f,s=0;s<r.length;s++){var a=r[s];js(e,a)||n&&js(n,a)||i(e,a,o(t,a))}},Ys=Mn,Gs=or,qs=/#|\.prototype\./,Ws=function(e,t){var n=Zs[Ks(e)];return n==Xs||n!=Js&&(Gs(t)?Ys(t):!!t)},Ks=Ws.normalize=function(e){return String(e).replace(qs,".").toLowerCase()},Zs=Ws.data={},Js=Ws.NATIVE="N",Xs=Ws.POLYFILL="P",Qs=Ws,ea=En,ta=Tn.f,na=no,ra=ss,ia=$r,oa=$s,sa=Qs,aa=function(e,t){var n,r,i,o,s,a=e.target,l=e.global,c=e.stat;if(n=l?ea:c?ea[a]||ia(a,{}):(ea[a]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(s=ta(n,r))&&s.value:n[r],!sa(l?r:a+(c?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;oa(o,i)}(e.sham||i&&i.sham)&&na(o,"sham",!0),ra(n,r,o,e)}},la=!Mn(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),ca=Qr,ua=or,ha=Zr,da=la,pa=To("IE_PROTO"),fa=Object,ma=fa.prototype,ga=da?fa.getPrototypeOf:function(e){var t=ha(e);if(ca(t,pa))return t[pa];var n=t.constructor;return ua(n)&&t instanceof n?n.prototype:t instanceof fa?ma:null},ya=or,va=String,_a=TypeError,ba=$n,wa=Yi,xa=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=ba(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return wa(n),function(e){if("object"==typeof e||ya(e))return e;throw _a("Can't set "+va(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),Sa={},Ea=Cs,Ta=Is,Ma=Object.keys||function(e){return Ea(e,Ta)},Aa=An,ka=Bi,Ca=ji,Ia=Yi,Pa=ir,Oa=Ma;Sa.f=Aa&&!ka?Object.defineProperties:function(e,t){Ia(e);for(var n,r=Pa(t),i=Oa(t),o=i.length,s=0;o>s;)Ca.f(e,n=i[s++],r[n]);return e};var Ra,Da=ur("document","documentElement"),La=Yi,Na=Sa,Fa=Is,za=Mo,Ua=Da,ja=ki,Ba=To("IE_PROTO"),Va=function(){},Ha=function(e){return"<script>"+e+"<\/script>"},$a=function(e){e.write(Ha("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ya=function(){try{Ra=new ActiveXObject("htmlfile")}catch(e){}var e,t;Ya="undefined"!=typeof document?document.domain&&Ra?$a(Ra):((t=ja("iframe")).style.display="none",Ua.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ha("document.F=Object")),e.close(),e.F):$a(Ra);for(var n=Fa.length;n--;)delete Ya.prototype[Fa[n]];return Ya()};za[Ba]=!0;var Ga=Object.create||function(e,t){var n;return null!==e?(Va.prototype=La(e),n=new Va,Va.prototype=null,n[Ba]=e):n=Ya(),void 0===t?n:Na.f(n,t)},qa=Error,Wa=$n("".replace),Ka=String(qa("zxcasd").stack),Za=/\n\s*at [^:]*:[^\n]*/,Ja=Za.test(Ka),Xa=ar,Qa=no,el=Dr,tl=kn,nl=$n($n.bind),rl=function(e,t){return el(e),void 0===t?e:tl?nl(e,t):function(){return e.apply(t,arguments)}},il={},ol=il,sl=mi("iterator"),al=Array.prototype,ll=function(e){return void 0!==e&&(ol.Array===e||al[sl]===e)},cl={};cl[mi("toStringTag")]="z";var ul="[object z]"===String(cl),hl=ul,dl=or,pl=Wn,fl=mi("toStringTag"),ml=Object,gl="Arguments"==pl(function(){return arguments}()),yl=hl?pl:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=ml(e),fl))?n:gl?pl(t):"Object"==(r=pl(t))&&dl(t.callee)?"Arguments":r},vl=yl,_l=Nr,bl=il,wl=mi("iterator"),xl=function(e){if(null!=e)return _l(e,wl)||_l(e,"@@iterator")||bl[vl(e)]},Sl=Pn,El=Dr,Tl=Yi,Ml=Ir,Al=xl,kl=TypeError,Cl=function(e,t){var n=arguments.length<2?Al(e):t;if(El(n))return Tl(Sl(n,e));throw kl(Ml(e)+" is not iterable")},Il=Pn,Pl=Yi,Ol=Nr,Rl=function(e,t,n){var r,i;Pl(e);try{if(!(r=Ol(e,"return"))){if("throw"===t)throw n;return n}r=Il(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Pl(r),n},Dl=rl,Ll=Pn,Nl=Yi,Fl=Ir,zl=ll,Ul=vs,jl=hr,Bl=Cl,Vl=xl,Hl=Rl,$l=TypeError,Yl=function(e,t){this.stopped=e,this.result=t},Gl=Yl.prototype,ql=function(e,t,n){var r,i,o,s,a,l,c,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=Dl(t,u),g=function(e){return r&&Hl(r,"normal",e),new Yl(!0,e)},y=function(e){return h?(Nl(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(d)r=e.iterator;else if(p)r=e;else{if(!(i=Vl(e)))throw $l(Fl(e)+" is not iterable");if(zl(i)){for(o=0,s=Ul(e);s>o;o++)if((a=y(e[o]))&&jl(Gl,a))return a;return new Yl(!1)}r=Bl(e,i)}for(l=d?e.next:r.next;!(c=Ll(l,r)).done;){try{a=y(c.value)}catch(e){Hl(r,"throw",e)}if("object"==typeof a&&a&&jl(Gl,a))return a}return new Yl(!1)},Wl=yl,Kl=String,Zl=function(e){if("Symbol"===Wl(e))throw TypeError("Cannot convert a Symbol value to a string");return Kl(e)},Jl=Zl,Xl=zn,Ql=!Mn(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Xl(1,7)),7!==e.stack)}),ec=aa,tc=hr,nc=ga,rc=xa,ic=$s,oc=Ga,sc=no,ac=zn,lc=ql,cc=Ql,uc=mi("toStringTag"),hc=Error,dc=[].push,pc=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,i=tc(fc,this);rc?n=rc(new hc,i?nc(this):fc):(n=i?this:oc(fc),sc(n,uc,"Error")),void 0!==t&&sc(n,"message",function(e,t){return void 0===e?arguments.length<2?"":t:Jl(e)}(t)),cc&&sc(n,"stack",function(e,t){if(Ja&&"string"==typeof e&&!qa.prepareStackTrace)for(;t--;)e=Wa(e,Za,"");return e}(n.stack,1)),function(e,t){Xa(t)&&"cause"in t&&Qa(e,"cause",t.cause)}(n,r);var o=[];return lc(e,dc,{that:o}),sc(n,"errors",o),n};rc?rc(pc,hc):ic(pc,hc,{name:!0});var fc=pc.prototype=oc(hc.prototype,{constructor:ac(1,pc),message:ac(1,""),name:ac(1,"AggregateError")});ec({global:!0,constructor:!0,arity:2},{AggregateError:pc});var mc=mi,gc=Ga,yc=ji.f,vc=mc("unscopables"),_c=Array.prototype;null==_c[vc]&&yc(_c,vc,{configurable:!0,value:gc(null)});var bc,wc,xc,Sc=function(e){_c[vc][e]=!0},Ec=Mn,Tc=or,Mc=ga,Ac=ss,kc=mi("iterator"),Cc=!1;[].keys&&("next"in(xc=[].keys())?(wc=Mc(Mc(xc)))!==Object.prototype&&(bc=wc):Cc=!0);var Ic=null==bc||Ec(function(){var e={};return bc[kc].call(e)!==e});Ic&&(bc={}),Tc(bc[kc])||Ac(bc,kc,function(){return this});var Pc={IteratorPrototype:bc,BUGGY_SAFARI_ITERATORS:Cc},Oc=ji.f,Rc=Qr,Dc=mi("toStringTag"),Lc=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Rc(e,Dc)&&Oc(e,Dc,{configurable:!0,value:t})},Nc=Pc.IteratorPrototype,Fc=Ga,zc=zn,Uc=Lc,jc=il,Bc=function(){return this},Vc=aa,Hc=Pn,$c=or,Yc=ga,Gc=xa,qc=Lc,Wc=no,Kc=ss,Zc=il,Jc=co.PROPER,Xc=co.CONFIGURABLE,Qc=Pc.IteratorPrototype,eu=Pc.BUGGY_SAFARI_ITERATORS,tu=mi("iterator"),nu=function(){return this},ru=function(e,t,n,r,i,o,s){!function(e,t,n,r){var i=t+" Iterator";e.prototype=Fc(Nc,{next:zc(+!r,n)}),Uc(e,i,!1),jc[i]=Bc}(n,t,r);var a,l,c,u=function(e){if(e===i&&m)return m;if(!eu&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",d=!1,p=e.prototype,f=p[tu]||p["@@iterator"]||i&&p[i],m=!eu&&f||u(i),g="Array"==t&&p.entries||f;if(g&&(a=Yc(g.call(new e)))!==Object.prototype&&a.next&&(Yc(a)!==Qc&&(Gc?Gc(a,Qc):$c(a[tu])||Kc(a,tu,nu)),qc(a,h,!0)),Jc&&"values"==i&&f&&"values"!==f.name&&(Xc?Wc(p,"name","values"):(d=!0,m=function(){return Hc(f,this)})),i)if(l={values:u("values"),keys:o?m:u("keys"),entries:u("entries")},s)for(c in l)(eu||d||!(c in p))&&Kc(p,c,l[c]);else Vc({target:t,proto:!0,forced:eu||d},l);return p[tu]!==m&&Kc(p,tu,m,{name:i}),Zc[t]=m,l},iu=ir,ou=Sc,su=il,au=Ho,lu=ji.f,cu=ru,uu=An,hu=au.set,du=au.getterFor("Array Iterator"),pu=cu(Array,"Array",function(e,t){hu(this,{type:"Array Iterator",target:iu(e),index:0,kind:t})},function(){var e=du(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),fu=su.Arguments=su.Array;if(ou("keys"),ou("values"),ou("entries"),uu&&"values"!==fu.name)try{lu(fu,"name",{value:"values"})}catch(r){}var mu=yl,gu=ul?{}.toString:function(){return"[object "+mu(this)+"]"};ul||ss(Object.prototype,"toString",gu,{unsafe:!0});var yu="process"==Wn(En.process),vu=ur,_u=ji,bu=An,wu=mi("species"),xu=function(e){var t=vu(e),n=_u.f;bu&&t&&!t[wu]&&n(t,wu,{configurable:!0,get:function(){return this}})},Su=hr,Eu=TypeError,Tu=function(e,t){if(Su(t,e))return e;throw Eu("Incorrect invocation")},Mu=$n,Au=Mn,ku=or,Cu=yl,Iu=yo,Pu=function(){},Ou=[],Ru=ur("Reflect","construct"),Du=/^\s*(?:class|function)\b/,Lu=Mu(Du.exec),Nu=!Du.exec(Pu),Fu=function(e){if(!ku(e))return!1;try{return Ru(Pu,Ou,e),!0}catch(e){return!1}},zu=function(e){if(!ku(e))return!1;switch(Cu(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Nu||!!Lu(Du,Iu(e))}catch(e){return!0}};zu.sham=!0;var Uu,ju,Bu,Vu,Hu=!Ru||Au(function(){var e;return Fu(Fu.call)||!Fu(Object)||!Fu(function(){e=!0})||e})?zu:Fu,$u=Hu,Yu=Ir,Gu=TypeError,qu=Yi,Wu=mi("species"),Ku=function(e,t){var n,r=qu(e).constructor;return void 0===r||null==(n=qu(r)[Wu])?t:function(e){if($u(e))return e;throw Gu(Yu(e)+" is not a constructor")}(n)},Zu=kn,Ju=Function.prototype,Xu=Ju.apply,Qu=Ju.call,eh="object"==typeof Reflect&&Reflect.apply||(Zu?Qu.bind(Xu):function(){return Qu.apply(Xu,arguments)}),th=$n([].slice),nh=TypeError,rh=/(?:ipad|iphone|ipod).*applewebkit/i.test(dr),ih=En,oh=eh,sh=rl,ah=or,lh=Qr,ch=Mn,uh=Da,hh=th,dh=ki,ph=rh,fh=yu,mh=ih.setImmediate,gh=ih.clearImmediate,yh=ih.process,vh=ih.Dispatch,_h=ih.Function,bh=ih.MessageChannel,wh=ih.String,xh=0,Sh={};try{Uu=ih.location}catch(r){}var Eh=function(e){if(lh(Sh,e)){var t=Sh[e];delete Sh[e],t()}},Th=function(e){return function(){Eh(e)}},Mh=function(e){Eh(e.data)},Ah=function(e){ih.postMessage(wh(e),Uu.protocol+"//"+Uu.host)};mh&&gh||(mh=function(e){!function(e,t){if(e<t)throw nh("Not enough arguments")}(arguments.length,1);var t=ah(e)?e:_h(e),n=hh(arguments,1);return Sh[++xh]=function(){oh(t,void 0,n)},ju(xh),xh},gh=function(e){delete Sh[e]},fh?ju=function(e){yh.nextTick(Th(e))}:vh&&vh.now?ju=function(e){vh.now(Th(e))}:bh&&!ph?(Vu=(Bu=new bh).port2,Bu.port1.onmessage=Mh,ju=sh(Vu.postMessage,Vu)):ih.addEventListener&&ah(ih.postMessage)&&!ih.importScripts&&Uu&&"file:"!==Uu.protocol&&!ch(Ah)?(ju=Ah,ih.addEventListener("message",Mh,!1)):ju="onreadystatechange"in dh("script")?function(e){uh.appendChild(dh("script")).onreadystatechange=function(){uh.removeChild(this),Eh(e)}}:function(e){setTimeout(Th(e),0)});var kh,Ch,Ih,Ph,Oh,Rh,Dh,Lh,Nh={set:mh,clear:gh},Fh=En,zh=/ipad|iphone|ipod/i.test(dr)&&void 0!==Fh.Pebble,Uh=/web0s(?!.*chrome)/i.test(dr),jh=En,Bh=rl,Vh=Tn.f,Hh=Nh.set,$h=rh,Yh=zh,Gh=Uh,qh=yu,Wh=jh.MutationObserver||jh.WebKitMutationObserver,Kh=jh.document,Zh=jh.process,Jh=jh.Promise,Xh=Vh(jh,"queueMicrotask"),Qh=Xh&&Xh.value;Qh||(kh=function(){var e,t;for(qh&&(e=Zh.domain)&&e.exit();Ch;){t=Ch.fn,Ch=Ch.next;try{t()}catch(e){throw Ch?Ph():Ih=void 0,e}}Ih=void 0,e&&e.enter()},$h||qh||Gh||!Wh||!Kh?!Yh&&Jh&&Jh.resolve?((Dh=Jh.resolve(void 0)).constructor=Jh,Lh=Bh(Dh.then,Dh),Ph=function(){Lh(kh)}):qh?Ph=function(){Zh.nextTick(kh)}:(Hh=Bh(Hh,jh),Ph=function(){Hh(kh)}):(Oh=!0,Rh=Kh.createTextNode(""),new Wh(kh).observe(Rh,{characterData:!0}),Ph=function(){Rh.data=Oh=!Oh}));var ed=Qh||function(e){var t={fn:e,next:void 0};Ih&&(Ih.next=t),Ch||(Ch=t,Ph()),Ih=t},td=En,nd=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},rd=function(){this.head=null,this.tail=null};rd.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var id=rd,od=En.Promise,sd="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,ad=!sd&&!yu&&"object"==typeof window&&"object"==typeof document,ld=En,cd=od,ud=or,hd=Qs,dd=yo,pd=mi,fd=ad,md=sd,gd=_r;cd&&cd.prototype;var yd=pd("species"),vd=!1,_d=ud(ld.PromiseRejectionEvent),bd=hd("Promise",function(){var e=dd(cd),t=e!==String(cd);if(!t&&66===gd)return!0;if(!gd||gd<51||!/native code/.test(e)){var n=new cd(function(e){e(1)}),r=function(e){e(function(){},function(){})};if((n.constructor={})[yd]=r,!(vd=n.then(function(){})instanceof r))return!0}return!t&&(fd||md)&&!_d}),wd={CONSTRUCTOR:bd,REJECTION_EVENT:_d,SUBCLASSING:vd},xd={},Sd=Dr,Ed=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=Sd(t),this.reject=Sd(n)};xd.f=function(e){return new Ed(e)};var Td,Md,Ad,kd=aa,Cd=yu,Id=En,Pd=Pn,Od=ss,Rd=xa,Dd=Lc,Ld=xu,Nd=Dr,Fd=or,zd=ar,Ud=Tu,jd=Ku,Bd=Nh.set,Vd=ed,Hd=nd,$d=id,Yd=Ho,Gd=od,qd=xd,Wd=wd.CONSTRUCTOR,Kd=wd.REJECTION_EVENT,Zd=wd.SUBCLASSING,Jd=Yd.getterFor("Promise"),Xd=Yd.set,Qd=Gd&&Gd.prototype,ep=Gd,tp=Qd,np=Id.TypeError,rp=Id.document,ip=Id.process,op=qd.f,sp=op,ap=!!(rp&&rp.createEvent&&Id.dispatchEvent),lp=function(e){var t;return!(!zd(e)||!Fd(t=e.then))&&t},cp=function(e,t){var n,r,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&fp(t),t.rejection=1),!0===a?n=o:(u&&u.enter(),n=a(o),u&&(u.exit(),i=!0)),n===e.promise?c(np("Promise-chain cycle")):(r=lp(n))?Pd(r,n,l,c):l(n)):c(o)}catch(e){u&&!i&&u.exit(),c(e)}},up=function(e,t){e.notified||(e.notified=!0,Vd(function(){for(var n,r=e.reactions;n=r.get();)cp(n,e);e.notified=!1,t&&!e.rejection&&dp(e)}))},hp=function(e,t,n){var r,i;ap?((r=rp.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Id.dispatchEvent(r)):r={promise:t,reason:n},!Kd&&(i=Id["on"+e])?i(r):"unhandledrejection"===e&&function(e,t){var n=td.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},dp=function(e){Pd(Bd,Id,function(){var t,n=e.facade,r=e.value;if(pp(e)&&(t=Hd(function(){Cd?ip.emit("unhandledRejection",r,n):hp("unhandledrejection",n,r)}),e.rejection=Cd||pp(e)?2:1,t.error))throw t.value})},pp=function(e){return 1!==e.rejection&&!e.parent},fp=function(e){Pd(Bd,Id,function(){var t=e.facade;Cd?ip.emit("rejectionHandled",t):hp("rejectionhandled",t,e.value)})},mp=function(e,t,n){return function(r){e(t,r,n)}},gp=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,up(e,!0))},yp=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw np("Promise can't be resolved itself");var r=lp(t);r?Vd(function(){var n={done:!1};try{Pd(r,t,mp(yp,n,e),mp(gp,n,e))}catch(t){gp(n,t,e)}}):(e.value=t,e.state=1,up(e,!1))}catch(t){gp({done:!1},t,e)}}};if(Wd&&(tp=(ep=function(e){Ud(this,tp),Nd(e),Pd(Td,this);var t=Jd(this);try{e(mp(yp,t),mp(gp,t))}catch(e){gp(t,e)}}).prototype,(Td=function(e){Xd(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new $d,rejection:!1,state:0,value:void 0})}).prototype=Od(tp,"then",function(e,t){var n=Jd(this),r=op(jd(this,ep));return n.parent=!0,r.ok=!Fd(e)||e,r.fail=Fd(t)&&t,r.domain=Cd?ip.domain:void 0,0==n.state?n.reactions.add(r):Vd(function(){cp(r,n)}),r.promise}),Md=function(){var e=new Td,t=Jd(e);this.promise=e,this.resolve=mp(yp,t),this.reject=mp(gp,t)},qd.f=op=function(e){return e===ep||void 0===e?new Md(e):sp(e)},Fd(Gd)&&Qd!==Object.prototype)){Ad=Qd.then,Zd||Od(Qd,"then",function(e,t){var n=this;return new ep(function(e,t){Pd(Ad,n,e,t)}).then(e,t)},{unsafe:!0});try{delete Qd.constructor}catch(r){}Rd&&Rd(Qd,tp)}kd({global:!0,constructor:!0,wrap:!0,forced:Wd},{Promise:ep}),Dd(ep,"Promise",!1),Ld("Promise");var vp=mi("iterator"),_p=!1;try{var bp=0,wp={next:function(){return{done:!!bp++}},return:function(){_p=!0}};wp[vp]=function(){return this},Array.from(wp,function(){throw 2})}catch(r){}var xp=function(e,t){if(!t&&!_p)return!1;var n=!1;try{var r={};r[vp]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Sp=od,Ep=wd.CONSTRUCTOR||!xp(function(e){Sp.all(e).then(void 0,function(){})}),Tp=Pn,Mp=Dr,Ap=xd,kp=nd,Cp=ql;aa({target:"Promise",stat:!0,forced:Ep},{all:function(e){var t=this,n=Ap.f(t),r=n.resolve,i=n.reject,o=kp(function(){var n=Mp(t.resolve),o=[],s=0,a=1;Cp(e,function(e){var l=s++,c=!1;a++,Tp(n,t,e).then(function(e){c||(c=!0,o[l]=e,--a||r(o))},i)}),--a||r(o)});return o.error&&i(o.value),n.promise}});var Ip=aa,Pp=wd.CONSTRUCTOR,Op=od,Rp=ur,Dp=or,Lp=ss,Np=Op&&Op.prototype;if(Ip({target:"Promise",proto:!0,forced:Pp,real:!0},{catch:function(e){return this.then(void 0,e)}}),Dp(Op)){var Fp=Rp("Promise").prototype.catch;Np.catch!==Fp&&Lp(Np,"catch",Fp,{unsafe:!0})}var zp=Pn,Up=Dr,jp=xd,Bp=nd,Vp=ql;aa({target:"Promise",stat:!0,forced:Ep},{race:function(e){var t=this,n=jp.f(t),r=n.reject,i=Bp(function(){var i=Up(t.resolve);Vp(e,function(e){zp(i,t,e).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}});var Hp=Pn,$p=xd;aa({target:"Promise",stat:!0,forced:wd.CONSTRUCTOR},{reject:function(e){var t=$p.f(this);return Hp(t.reject,void 0,e),t.promise}});var Yp=Yi,Gp=ar,qp=xd,Wp=function(e,t){if(Yp(e),Gp(t)&&t.constructor===e)return t;var n=qp.f(e);return(0,n.resolve)(t),n.promise},Kp=aa,Zp=wd.CONSTRUCTOR,Jp=Wp;ur("Promise"),Kp({target:"Promise",stat:!0,forced:Zp},{resolve:function(e){return Jp(this,e)}});var Xp=Pn,Qp=Dr,ef=xd,tf=nd,nf=ql;aa({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=ef.f(t),r=n.resolve,i=n.reject,o=tf(function(){var n=Qp(t.resolve),i=[],o=0,s=1;nf(e,function(e){var a=o++,l=!1;s++,Xp(n,t,e).then(function(e){l||(l=!0,i[a]={status:"fulfilled",value:e},--s||r(i))},function(e){l||(l=!0,i[a]={status:"rejected",reason:e},--s||r(i))})}),--s||r(i)});return o.error&&i(o.value),n.promise}});var rf=Pn,of=Dr,sf=ur,af=xd,lf=nd,cf=ql;aa({target:"Promise",stat:!0},{any:function(e){var t=this,n=sf("AggregateError"),r=af.f(t),i=r.resolve,o=r.reject,s=lf(function(){var r=of(t.resolve),s=[],a=0,l=1,c=!1;cf(e,function(e){var u=a++,h=!1;l++,rf(r,t,e).then(function(e){h||c||(c=!0,i(e))},function(e){h||c||(h=!0,s[u]=e,--l||o(new n(s,"No one promise resolved")))})}),--l||o(new n(s,"No one promise resolved"))});return s.error&&o(s.value),r.promise}});var uf=aa,hf=od,df=Mn,pf=ur,ff=or,mf=Ku,gf=Wp,yf=ss,vf=hf&&hf.prototype;if(uf({target:"Promise",proto:!0,real:!0,forced:!!hf&&df(function(){vf.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=mf(this,pf("Promise")),n=ff(e);return this.then(n?function(n){return gf(t,e()).then(function(){return n})}:e,n?function(n){return gf(t,e()).then(function(){throw n})}:e)}}),ff(hf)){var _f=pf("Promise").prototype.finally;vf.finally!==_f&&yf(vf,"finally",_f,{unsafe:!0})}var bf=$n,wf=hs,xf=Zl,Sf=tr,Ef=bf("".charAt),Tf=bf("".charCodeAt),Mf=bf("".slice),Af=function(e){return function(t,n){var r,i,o=xf(Sf(t)),s=wf(n),a=o.length;return s<0||s>=a?e?"":void 0:(r=Tf(o,s))<55296||r>56319||s+1===a||(i=Tf(o,s+1))<56320||i>57343?e?Ef(o,s):r:e?Mf(o,s,s+2):i-56320+(r-55296<<10)+65536}},kf=(Af(!1),Af(!0)),Cf=Zl,If=Ho,Pf=ru,Of=If.set,Rf=If.getterFor("String Iterator");Pf(String,"String",function(e){Of(this,{type:"String Iterator",string:Cf(e),index:0})},function(){var e,t=Rf(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=kf(n,r),t.index+=e.length,{value:e,done:!1})});var Df=En,Lf=(Df.Promise,ki("span").classList),Nf=Lf&&Lf.constructor&&Lf.constructor.prototype,Ff=Nf===Object.prototype?void 0:Nf,zf=En,Uf={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},jf=Ff,Bf=pu,Vf=no,Hf=mi,$f=Hf("iterator"),Yf=Hf("toStringTag"),Gf=Bf.values,qf=function(e,t){if(e){if(e[$f]!==Gf)try{Vf(e,$f,Gf)}catch(t){e[$f]=Gf}if(e[Yf]||Vf(e,Yf,t),Uf[t])for(var n in Bf)if(e[n]!==Bf[n])try{Vf(e,n,Bf[n])}catch(t){e[n]=Bf[n]}}};for(var Wf in Uf)qf(zf[Wf]&&zf[Wf].prototype,Wf);qf(jf,"DOMTokenList");var Kf=xd,Zf=nd;aa({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=Kf.f(this),n=Zf(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var Jf=Yi,Xf=Rl,Qf=Ei,em=ji,tm=zn,nm=function(e,t,n){var r=Qf(t);r in e?em.f(e,r,tm(0,n)):e[r]=n},rm=rl,im=Pn,om=Zr,sm=function(e,t,n,r){try{return r?t(Jf(n)[0],n[1]):t(n)}catch(t){Xf(e,"throw",t)}},am=ll,lm=Hu,cm=vs,um=nm,hm=Cl,dm=xl,pm=Array;aa({target:"Array",stat:!0,forced:!xp(function(e){Array.from(e)})},{from:function(e){var t=om(e),n=lm(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=rm(i,r>2?arguments[2]:void 0));var s,a,l,c,u,h,d=dm(t),p=0;if(!d||this===pm&&am(d))for(s=cm(t),a=n?new this(s):pm(s);s>p;p++)h=o?i(t[p],p):t[p],um(a,p,h);else for(u=(c=hm(t,d)).next,a=n?new this:[];!(l=im(u,c)).done;p++)h=o?sm(c,i,[l.value,p],!0):l.value,um(a,p,h);return a.length=p,a}});var fm=Wn,mm=Array.isArray||function(e){return"Array"==fm(e)};aa({target:"Array",stat:!0},{isArray:mm});var gm=Hu,ym=nm,vm=Array;aa({target:"Array",stat:!0,forced:Mn(function(){function e(){}return!(vm.of.call(e)instanceof e)})},{of:function(){for(var e=0,t=arguments.length,n=new(gm(this)?this:vm)(t);t>e;)ym(n,e,arguments[e++]);return n.length=t,n}});var _m=Zr,bm=vs,wm=hs,xm=Sc;aa({target:"Array",proto:!0},{at:function(e){var t=_m(this),n=bm(t),r=wm(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:t[i]}}),xm("at");var Sm=TypeError,Em=function(e){if(e>9007199254740991)throw Sm("Maximum allowed index exceeded");return e},Tm=mm,Mm=Hu,Am=ar,km=mi("species"),Cm=Array,Im=function(e,t){return new(function(e){var t;return Tm(e)&&(t=e.constructor,(Mm(t)&&(t===Cm||Tm(t.prototype))||Am(t)&&null===(t=t[km]))&&(t=void 0)),void 0===t?Cm:t}(e))(0===t?0:t)},Pm=Mn,Om=_r,Rm=mi("species"),Dm=function(e){return Om>=51||!Pm(function(){var t=[];return(t.constructor={})[Rm]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Lm=aa,Nm=Mn,Fm=mm,zm=ar,Um=Zr,jm=vs,Bm=Em,Vm=nm,Hm=Im,$m=Dm,Ym=_r,Gm=mi("isConcatSpreadable"),qm=Ym>=51||!Nm(function(){var e=[];return e[Gm]=!1,e.concat()[0]!==e}),Wm=$m("concat"),Km=function(e){if(!zm(e))return!1;var t=e[Gm];return void 0!==t?!!t:Fm(e)};Lm({target:"Array",proto:!0,arity:1,forced:!qm||!Wm},{concat:function(e){var t,n,r,i,o,s=Um(this),a=Hm(s,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(Km(o=-1===t?s:arguments[t]))for(i=jm(o),Bm(l+i),n=0;n<i;n++,l++)n in o&&Vm(a,l,o[n]);else Bm(l+1),Vm(a,l++,o);return a.length=l,a}});var Zm=Ir,Jm=TypeError,Xm=function(e,t){if(!delete e[t])throw Jm("Cannot delete property "+Zm(t)+" of "+Zm(e))},Qm=Zr,eg=ms,tg=vs,ng=Xm,rg=Math.min,ig=[].copyWithin||function(e,t){var n=Qm(this),r=tg(n),i=eg(e,r),o=eg(t,r),s=arguments.length>2?arguments[2]:void 0,a=rg((void 0===s?r:eg(s,r))-o,r-i),l=1;for(o<i&&i<o+a&&(l=-1,o+=a-1,i+=a-1);a-- >0;)o in n?n[i]=n[o]:ng(n,i),i+=l,o+=l;return n},og=Sc;aa({target:"Array",proto:!0},{copyWithin:ig}),og("copyWithin");var sg=rl,ag=Qn,lg=Zr,cg=vs,ug=Im,hg=$n([].push),dg=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(l,c,u,h){for(var d,p,f=lg(l),m=ag(f),g=sg(c,u),y=cg(m),v=0,_=h||ug,b=t?_(l,y):n||s?_(l,0):void 0;y>v;v++)if((a||v in m)&&(p=g(d=m[v],v,f),e))if(t)b[v]=p;else if(p)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:hg(b,d)}else switch(e){case 4:return!1;case 7:hg(b,d)}return o?-1:r||i?i:b}},pg={forEach:dg(0),map:dg(1),filter:dg(2),some:dg(3),every:dg(4),find:dg(5),findIndex:dg(6),filterReject:dg(7)},fg=Mn,mg=function(e,t){var n=[][e];return!!n&&fg(function(){n.call(null,t||function(){return 1},1)})},gg=pg.every;aa({target:"Array",proto:!0,forced:!mg("every")},{every:function(e){return gg(this,e,arguments.length>1?arguments[1]:void 0)}});var yg=Zr,vg=ms,_g=vs,bg=Sc;aa({target:"Array",proto:!0},{fill:function(e){for(var t=yg(this),n=_g(t),r=arguments.length,i=vg(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,s=void 0===o?n:vg(o,n);s>i;)t[i++]=e;return t}}),bg("fill");var wg=pg.filter;aa({target:"Array",proto:!0,forced:!Dm("filter")},{filter:function(e){return wg(this,e,arguments.length>1?arguments[1]:void 0)}});var xg=aa,Sg=pg.find,Eg=Sc,Tg=!0;"find"in[]&&Array(1).find(function(){Tg=!1}),xg({target:"Array",proto:!0,forced:Tg},{find:function(e){return Sg(this,e,arguments.length>1?arguments[1]:void 0)}}),Eg("find");var Mg=aa,Ag=pg.findIndex,kg=Sc,Cg=!0;"findIndex"in[]&&Array(1).findIndex(function(){Cg=!1}),Mg({target:"Array",proto:!0,forced:Cg},{findIndex:function(e){return Ag(this,e,arguments.length>1?arguments[1]:void 0)}}),kg("findIndex");var Ig=rl,Pg=Qn,Og=Zr,Rg=vs,Dg=function(e){var t=1==e;return function(n,r,i){for(var o,s=Og(n),a=Pg(s),l=Ig(r,i),c=Rg(a);c-- >0;)if(l(o=a[c],c,s))switch(e){case 0:return o;case 1:return c}return t?-1:void 0}},Lg={findLast:Dg(0),findLastIndex:Dg(1)},Ng=Lg.findLast,Fg=Sc;aa({target:"Array",proto:!0},{findLast:function(e){return Ng(this,e,arguments.length>1?arguments[1]:void 0)}}),Fg("findLast");var zg=Lg.findLastIndex,Ug=Sc;aa({target:"Array",proto:!0},{findLastIndex:function(e){return zg(this,e,arguments.length>1?arguments[1]:void 0)}}),Ug("findLastIndex");var jg=mm,Bg=vs,Vg=Em,Hg=rl,$g=function(e,t,n,r,i,o,s,a){for(var l,c,u=i,h=0,d=!!s&&Hg(s,a);h<r;)h in n&&(l=d?d(n[h],h,t):n[h],o>0&&jg(l)?(c=Bg(l),u=$g(e,t,l,c,u,o-1)-1):(Vg(u+1),e[u]=l),u++),h++;return u},Yg=$g,Gg=Yg,qg=Zr,Wg=vs,Kg=hs,Zg=Im;aa({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=qg(this),n=Wg(t),r=Zg(t,0);return r.length=Gg(r,t,t,n,0,void 0===e?1:Kg(e)),r}});var Jg=Yg,Xg=Dr,Qg=Zr,ey=vs,ty=Im;aa({target:"Array",proto:!0},{flatMap:function(e){var t,n=Qg(this),r=ey(n);return Xg(e),(t=ty(n,0)).length=Jg(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var ny=pg.forEach,ry=mg("forEach")?[].forEach:function(e){return ny(this,e,arguments.length>1?arguments[1]:void 0)};aa({target:"Array",proto:!0,forced:[].forEach!=ry},{forEach:ry});var iy=Ss.includes,oy=Sc;aa({target:"Array",proto:!0,forced:Mn(function(){return!Array(1).includes()})},{includes:function(e){return iy(this,e,arguments.length>1?arguments[1]:void 0)}}),oy("includes");var sy=aa,ay=Ss.indexOf,ly=mg,cy=$n([].indexOf),uy=!!cy&&1/cy([1],1,-0)<0,hy=ly("indexOf");sy({target:"Array",proto:!0,forced:uy||!hy},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return uy?cy(this,e,t)||0:ay(this,e,t)}});var dy=aa,py=Qn,fy=ir,my=mg,gy=$n([].join),yy=py!=Object,vy=my("join",",");dy({target:"Array",proto:!0,forced:yy||!vy},{join:function(e){return gy(fy(this),void 0===e?",":e)}});var _y=eh,by=ir,wy=hs,xy=vs,Sy=mg,Ey=Math.min,Ty=[].lastIndexOf,My=!!Ty&&1/[1].lastIndexOf(1,-0)<0,Ay=Sy("lastIndexOf"),ky=My||!Ay?function(e){if(My)return _y(Ty,this,arguments)||0;var t=by(this),n=xy(t),r=n-1;for(arguments.length>1&&(r=Ey(r,wy(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:Ty;aa({target:"Array",proto:!0,forced:ky!==[].lastIndexOf},{lastIndexOf:ky});var Cy=pg.map;aa({target:"Array",proto:!0,forced:!Dm("map")},{map:function(e){return Cy(this,e,arguments.length>1?arguments[1]:void 0)}});var Iy=aa,Py=Zr,Oy=vs,Ry=Em,Dy=Mn(function(){return 4294967297!==[].push.call({length:4294967296},1)}),Ly=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(r){return r instanceof TypeError}}();Iy({target:"Array",proto:!0,arity:1,forced:Dy||Ly},{push:function(e){var t=Py(this),n=Oy(t),r=arguments.length;Ry(n+r);for(var i=0;i<r;i++)t[n]=arguments[i],n++;return t.length=n,n}});var Ny=Dr,Fy=Zr,zy=Qn,Uy=vs,jy=TypeError,By=function(e){return function(t,n,r,i){Ny(n);var o=Fy(t),s=zy(o),a=Uy(o),l=e?a-1:0,c=e?-1:1;if(r<2)for(;;){if(l in s){i=s[l],l+=c;break}if(l+=c,e?l<0:a<=l)throw jy("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=c)l in s&&(i=n(i,s[l],l,o));return i}},Vy={left:By(!1),right:By(!0)},Hy=Vy.left,$y=_r,Yy=yu;aa({target:"Array",proto:!0,forced:!mg("reduce")||!Yy&&$y>79&&$y<83},{reduce:function(e){var t=arguments.length;return Hy(this,e,t,t>1?arguments[1]:void 0)}});var Gy=Vy.right,qy=_r,Wy=yu;aa({target:"Array",proto:!0,forced:!mg("reduceRight")||!Wy&&qy>79&&qy<83},{reduceRight:function(e){return Gy(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ky=aa,Zy=mm,Jy=$n([].reverse),Xy=[1,2];Ky({target:"Array",proto:!0,forced:String(Xy)===String(Xy.reverse())},{reverse:function(){return Zy(this)&&(this.length=this.length),Jy(this)}});var Qy=aa,ev=mm,tv=Hu,nv=ar,rv=ms,iv=vs,ov=ir,sv=nm,av=mi,lv=th,cv=Dm("slice"),uv=av("species"),hv=Array,dv=Math.max;Qy({target:"Array",proto:!0,forced:!cv},{slice:function(e,t){var n,r,i,o=ov(this),s=iv(o),a=rv(e,s),l=rv(void 0===t?s:t,s);if(ev(o)&&(n=o.constructor,(tv(n)&&(n===hv||ev(n.prototype))||nv(n)&&null===(n=n[uv]))&&(n=void 0),n===hv||void 0===n))return lv(o,a,l);for(r=new(void 0===n?hv:n)(dv(l-a,0)),i=0;a<l;a++,i++)a in o&&sv(r,i,o[a]);return r.length=i,r}});var pv=pg.some;aa({target:"Array",proto:!0,forced:!mg("some")},{some:function(e){return pv(this,e,arguments.length>1?arguments[1]:void 0)}});var fv=ms,mv=vs,gv=nm,yv=Array,vv=Math.max,_v=function(e,t,n){for(var r=mv(e),i=fv(t,r),o=fv(void 0===n?r:n,r),s=yv(vv(o-i,0)),a=0;i<o;i++,a++)gv(s,a,e[i]);return s.length=a,s},bv=_v,wv=Math.floor,xv=function(e,t){var n=e.length,r=wv(n/2);return n<8?Sv(e,t):Ev(e,xv(bv(e,0,r),t),xv(bv(e,r),t),t)},Sv=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},Ev=function(e,t,n,r){for(var i=t.length,o=n.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?r(t[s],n[a])<=0?t[s++]:n[a++]:s<i?t[s++]:n[a++];return e},Tv=xv,Mv=dr.match(/firefox\/(\d+)/i),Av=!!Mv&&+Mv[1],kv=/MSIE|Trident/.test(dr),Cv=dr.match(/AppleWebKit\/(\d+)\./),Iv=!!Cv&&+Cv[1],Pv=aa,Ov=$n,Rv=Dr,Dv=Zr,Lv=vs,Nv=Xm,Fv=Zl,zv=Mn,Uv=Tv,jv=mg,Bv=Av,Vv=kv,Hv=_r,$v=Iv,Yv=[],Gv=Ov(Yv.sort),qv=Ov(Yv.push),Wv=zv(function(){Yv.sort(void 0)}),Kv=zv(function(){Yv.sort(null)}),Zv=jv("sort"),Jv=!zv(function(){if(Hv)return Hv<70;if(!(Bv&&Bv>3)){if(Vv)return!0;if($v)return $v<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Yv.push({k:t+r,v:n})}for(Yv.sort(function(e,t){return t.v-e.v}),r=0;r<Yv.length;r++)t=Yv[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}});Pv({target:"Array",proto:!0,forced:Wv||!Kv||!Zv||!Jv},{sort:function(e){void 0!==e&&Rv(e);var t=Dv(this);if(Jv)return void 0===e?Gv(t):Gv(t,e);var n,r,i=[],o=Lv(t);for(r=0;r<o;r++)r in t&&qv(i,t[r]);for(Uv(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Fv(t)>Fv(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<o;)Nv(t,r++);return t}}),xu("Array");var Xv=aa,Qv=Zr,e_=ms,t_=hs,n_=vs,r_=Em,i_=Im,o_=nm,s_=Xm,a_=Dm("splice"),l_=Math.max,c_=Math.min;Xv({target:"Array",proto:!0,forced:!a_},{splice:function(e,t){var n,r,i,o,s,a,l=Qv(this),c=n_(l),u=e_(e,c),h=arguments.length;for(0===h?n=r=0:1===h?(n=0,r=c-u):(n=h-2,r=c_(l_(t_(t),0),c-u)),r_(c+n-r),i=i_(l,r),o=0;o<r;o++)(s=u+o)in l&&o_(i,o,l[s]);if(i.length=r,n<r){for(o=u;o<c-r;o++)a=o+n,(s=o+r)in l?l[a]=l[s]:s_(l,a);for(o=c;o>c-r+n;o--)s_(l,o-1)}else if(n>r)for(o=c-r;o>u;o--)a=o+n-1,(s=o+r-1)in l?l[a]=l[s]:s_(l,a);for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-r+n,i}}),Sc("flat"),Sc("flatMap");var u_=aa,h_=Zr,d_=vs,p_=Xm,f_=Em,m_=1!==[].unshift(0),g_=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(r){return r instanceof TypeError}}();u_({target:"Array",proto:!0,arity:1,forced:m_||g_},{unshift:function(e){var t=h_(this),n=d_(t),r=arguments.length;if(r){f_(n+r);for(var i=n;i--;){var o=i+r;i in t?t[o]=t[i]:p_(t,o)}for(var s=0;s<r;s++)t[s]=arguments[s]}return t.length=n+r}}),Df.Array;var y_={exports:{}},v_={},__=Wn,b_=ir,w_=as.f,x_=_v,S_="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];v_.f=function(e){return S_&&"Window"==__(e)?function(e){try{return w_(e)}catch(e){return x_(S_)}}(e):w_(b_(e))};var E_=Mn(function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),T_=Mn,M_=ar,A_=Wn,k_=E_,C_=Object.isExtensible,I_=T_(function(){C_(1)})||k_?function(e){return!!M_(e)&&(!k_||"ArrayBuffer"!=A_(e))&&(!C_||C_(e))}:C_,P_=!Mn(function(){return Object.isExtensible(Object.preventExtensions({}))}),O_=aa,R_=$n,D_=Mo,L_=ar,N_=Qr,F_=ji.f,z_=as,U_=v_,j_=I_,B_=P_,V_=!1,H_=ii("meta"),$_=0,Y_=function(e){F_(e,H_,{value:{objectID:"O"+$_++,weakData:{}}})},G_=y_.exports={enable:function(){G_.enable=function(){},V_=!0;var e=z_.f,t=R_([].splice),n={};n[H_]=1,e(n).length&&(z_.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===H_){t(r,i,1);break}return r},O_({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:U_.f}))},fastKey:function(e,t){if(!L_(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!N_(e,H_)){if(!j_(e))return"F";if(!t)return"E";Y_(e)}return e[H_].objectID},getWeakData:function(e,t){if(!N_(e,H_)){if(!j_(e))return!0;if(!t)return!1;Y_(e)}return e[H_].weakData},onFreeze:function(e){return B_&&V_&&j_(e)&&!N_(e,H_)&&Y_(e),e}};D_[H_]=!0;var q_=or,W_=ar,K_=xa,Z_=aa,J_=En,X_=$n,Q_=Qs,eb=ss,tb=y_.exports,nb=ql,rb=Tu,ib=or,ob=ar,sb=Mn,ab=xp,lb=Lc,cb=ss,ub=function(e,t,n){for(var r in t)cb(e,r,t[r],n);return e},hb=ji.f,db=Ga,pb=ub,fb=rl,mb=Tu,gb=ql,yb=ru,vb=xu,_b=An,bb=y_.exports.fastKey,wb=Ho.set,xb=Ho.getterFor,Sb={getConstructor:function(e,t,n,r){var i=e(function(e,i){mb(e,o),wb(e,{type:t,index:db(null),first:void 0,last:void 0,size:0}),_b||(e.size=0),null!=i&&gb(i,e[r],{that:e,AS_ENTRIES:n})}),o=i.prototype,s=xb(t),a=function(e,t,n){var r,i,o=s(e),a=l(e,t);return a?a.value=n:(o.last=a={index:i=bb(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),_b?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},l=function(e,t){var n,r=s(e),i=bb(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return pb(o,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,_b?e.size=0:this.size=0},delete:function(e){var t=this,n=s(t),r=l(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),_b?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=s(this),r=fb(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!l(this,e)}}),pb(o,n?{get:function(e){var t=l(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),_b&&hb(o,"size",{get:function(){return s(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=xb(t),o=xb(r);yb(e,t,function(e,t){wb(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),vb(t)}};!function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",s=J_[e],a=s&&s.prototype,l=s,c={},u=function(e){var t=X_(a[e]);eb(a,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!ob(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!ob(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!ob(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(Q_(e,!ib(s)||!(i||a.forEach&&!sb(function(){(new s).entries().next()}))))l=n.getConstructor(t,e,r,o),tb.enable();else if(Q_(e,!0)){var h=new l,d=h[o](i?{}:-0,1)!=h,p=sb(function(){h.has(1)}),f=ab(function(e){new s(e)}),m=!i&&sb(function(){for(var e=new s,t=5;t--;)e[o](t,t);return!e.has(-0)});f||((l=t(function(e,t){rb(e,a);var n=function(e,t,n){var r,i;return K_&&q_(r=t.constructor)&&r!==n&&W_(i=r.prototype)&&i!==n.prototype&&K_(e,i),e}(new s,e,l);return null!=t&&nb(t,n[o],{that:n,AS_ENTRIES:r}),n})).prototype=a,a.constructor=l),(p||m)&&(u("delete"),u("has"),r&&u("get")),(m||d)&&u(o),i&&a.clear&&delete a.clear}c[e]=l,Z_({global:!0,constructor:!0,forced:l!=s},c),lb(l,e),i||n.setStrong(l,e,r)}("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Sb);var Eb=vs,Tb=function(e,t){for(var n=0,r=Eb(t),i=new e(r);r>n;)i[n]=t[n++];return i},Mb=rl,Ab=Qn,kb=Zr,Cb=Ei,Ib=vs,Pb=Ga,Ob=Tb,Rb=Array,Db=$n([].push),Lb=function(e,t,n,r){for(var i,o,s,a=kb(e),l=Ab(a),c=Mb(t,n),u=Pb(null),h=Ib(l),d=0;h>d;d++)s=l[d],(o=Cb(c(s,d,a)))in u?Db(u[o],s):u[o]=[s];if(r&&(i=r(a))!==Rb)for(o in u)u[o]=Ob(i,u[o]);return u},Nb=Lb,Fb=Sc;aa({target:"Array",proto:!0},{group:function(e){return Nb(this,e,arguments.length>1?arguments[1]:void 0)}}),Fb("group");var zb=Lb,Ub=Sc;aa({target:"Array",proto:!0,forced:!mg("groupBy")},{groupBy:function(e){return zb(this,e,arguments.length>1?arguments[1]:void 0)}}),Ub("groupBy");var jb=rl,Bb=$n,Vb=Qn,Hb=Zr,$b=vs,Yb=ur("Map"),Gb=Yb.prototype,qb=Bb(Gb.get),Wb=Bb(Gb.has),Kb=Bb(Gb.set),Zb=Bb([].push),Jb=function(e){for(var t,n,r=Hb(this),i=Vb(r),o=jb(e,arguments.length>1?arguments[1]:void 0),s=new Yb,a=$b(i),l=0;a>l;l++)t=o(n=i[l],l,r),Wb(s,t)?Zb(qb(s,t),n):Kb(s,t,[n]);return s},Xb=Sc,Qb=Jb;aa({target:"Array",proto:!0,name:"groupToMap",forced:!mg("groupByToMap")},{groupByToMap:Qb}),Xb("groupByToMap");var ew=Sc;aa({target:"Array",proto:!0},{groupToMap:Jb}),ew("groupToMap");var tw=vs,nw=ir,rw=Sc,iw=Array;aa({target:"Array",proto:!0},{toReversed:function(){return function(e,t){for(var n=tw(e),r=new t(n),i=0;i<n;i++)r[i]=e[n-i-1];return r}(nw(this),iw)}}),rw("toReversed");var ow=En,sw=function(e){return ow[e].prototype},aw=aa,lw=Dr,cw=ir,uw=Tb,hw=Sc,dw=Array,pw=$n(sw("Array").sort);aw({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&lw(e);var t=cw(this),n=uw(dw,t);return pw(n,e)}}),hw("toSorted");var fw=aa,mw=Sc,gw=Em,yw=vs,vw=ms,_w=ir,bw=hs,ww=Array,xw=Math.max,Sw=Math.min;fw({target:"Array",proto:!0},{toSpliced:function(e,t){var n,r,i,o,s=_w(this),a=yw(s),l=vw(e,a),c=arguments.length,u=0;for(0===c?n=r=0:1===c?(n=0,r=a-l):(n=c-2,r=Sw(xw(bw(t),0),a-l)),i=gw(a+n-r),o=ww(i);u<l;u++)o[u]=s[u];for(;u<l+n;u++)o[u]=arguments[u-l+2];for(;u<i;u++)o[u]=s[u+r-n];return o}}),mw("toSpliced");var Ew=vs,Tw=hs,Mw=RangeError,Aw=ir,kw=Array;aa({target:"Array",proto:!0},{with:function(e,t){return function(e,t,n,r){var i=Ew(e),o=Tw(n),s=o<0?i+o:o;if(s>=i||s<0)throw Mw("Incorrect index");for(var a=new t(i),l=0;l<i;l++)a[l]=l===s?r:e[l];return a}(Aw(this),kw,e,t)}});var Cw,Iw,Pw=En,Ow=Gr,Rw=or,Dw=ga,Lw=ss,Nw=mi("asyncIterator"),Fw=Pw.AsyncIterator,zw=Ow.AsyncIteratorPrototype;if(zw)Cw=zw;else if(Rw(Fw))Cw=Fw.prototype;else if(Ow.USE_FUNCTION_CONSTRUCTOR||Pw.USE_FUNCTION_CONSTRUCTOR)try{Iw=Dw(Dw(Dw(Function("return async function*(){}()")()))),Dw(Iw)===Object.prototype&&(Cw=Iw)}catch(r){}Cw||(Cw={}),Rw(Cw[Nw])||Lw(Cw,Nw,function(){return this});var Uw=Pn,jw=Yi,Bw=Ga,Vw=Nr,Hw=ub,$w=Ho,Yw=Cw,Gw=ur("Promise"),qw=$w.set,Ww=$w.getterFor("AsyncFromSyncIterator"),Kw=function(e,t,n){var r=e.done;Gw.resolve(e.value).then(function(e){t({done:r,value:e})},n)},Zw=function(e){qw(this,{type:"AsyncFromSyncIterator",iterator:jw(e),next:e.next})};Zw.prototype=Hw(Bw(Yw),{next:function(){var e=Ww(this);return new Gw(function(t,n){var r=jw(Uw(e.next,e.iterator));Kw(r,t,n)})},return:function(){var e=Ww(this).iterator;return new Gw(function(t,n){var r=Vw(e,"return");if(void 0===r)return t({done:!0,value:void 0});var i=jw(Uw(r,e));Kw(i,t,n)})}});var Jw=Zw,Xw=Pn,Qw=Jw,ex=Yi,tx=Cl,nx=Nr,rx=mi("asyncIterator"),ix=Dr,ox=Yi,sx=Pn,ax=ur,lx=Nr,cx=Pn,ux=Dr,hx=Yi,dx=Em,px=ur,fx=function(e,t,n,r){try{var i=lx(e,"return");if(i)return ax("Promise").resolve(sx(i,e)).then(function(){t(n)},function(e){r(e)})}catch(e){return r(e)}t(n)},mx=function(e){var t=0==e,n=1==e,r=2==e,i=3==e;return function(e,o,s){var a=function(e){return{iterator:e,next:ix(ox(e).next)}}(e),l=px("Promise"),c=a.iterator,u=a.next,h=0,d=void 0!==o;return!d&&t||ux(o),new l(function(e,a){var p=function(e){fx(c,a,e,a)},f=function(){try{if(t&&d)try{dx(h)}catch(e){p(e)}l.resolve(hx(cx(u,c))).then(function(u){try{if(hx(u).done)t?(s.length=h,e(s)):e(!i&&(r||void 0));else{var m=u.value;try{d?l.resolve(t?o(m,h):o(m)).then(function(o){if(n)f();else if(r)o?f():fx(c,e,!1,a);else if(t)try{s[h++]=o,f()}catch(e){p(e)}else o?fx(c,e,i||m,a):f()},p):(s[h++]=m,f())}catch(e){p(e)}}}catch(e){a(e)}},a)}catch(e){a(e)}};f()})}},gx={toArray:mx(0),forEach:mx(1),every:mx(2),some:mx(3),find:mx(4)},yx=rl,vx=Zr,_x=Hu,bx=Cl,wx=xl,xx=Nr,Sx=sw,Ex=ur,Tx=Jw,Mx=gx.toArray,Ax=mi("asyncIterator"),kx=Sx("Array").values;aa({target:"Array",stat:!0,forced:!0},{fromAsync:function(e){var t=this,n=arguments.length,r=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(Ex("Promise"))(function(n){var o=vx(e);void 0!==r&&(r=yx(r,i));var s=xx(o,Ax),a=s?void 0:wx(o)||kx,l=_x(t)?new t:[],c=s?function(e,t){var n=arguments.length<2?nx(e,rx):t;return n?ex(Xw(n,e)):new Qw(tx(e))}(o,s):new Tx(bx(o,a));n(Mx(c,r,l))})}});var Cx=pg.filterReject,Ix=Sc;aa({target:"Array",proto:!0,forced:!0},{filterOut:function(e){return Cx(this,e,arguments.length>1?arguments[1]:void 0)}}),Ix("filterOut");var Px=pg.filterReject,Ox=Sc;aa({target:"Array",proto:!0,forced:!0},{filterReject:function(e){return Px(this,e,arguments.length>1?arguments[1]:void 0)}}),Ox("filterReject");var Rx=aa,Dx=mm,Lx=Object.isFrozen,Nx=function(e,t){if(!Lx||!Dx(e)||!Lx(e))return!1;for(var n,r=0,i=e.length;r<i;)if(!("string"==typeof(n=e[r++])||t&&void 0===n))return!1;return 0!==i};Rx({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(e){if(!Nx(e,!0))return!1;var t=e.raw;return t.length===e.length&&Nx(t,!1)}});var Fx=ro.exports,zx=ji,Ux=function(e,t,n){return n.get&&Fx(n.get,t,{getter:!0}),n.set&&Fx(n.set,t,{setter:!0}),zx.f(e,t,n)},jx=Sc,Bx=Zr,Vx=vs;An&&(Ux(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=Bx(this),t=Vx(e);return 0==t?void 0:e[t-1]},set:function(e){var t=Bx(this),n=Vx(t);return t[0==n?0:n-1]=e}}),jx("lastItem"));var Hx=Sc,$x=Zr,Yx=vs;An&&(Ux(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=$x(this),t=Yx(e);return 0==t?0:t-1}}),Hx("lastIndex"));var Gx=$n,qx=Dr,Wx=vs,Kx=Zr,Zx=Im,Jx=ur("Map"),Xx=Jx.prototype,Qx=Gx(Xx.forEach),eS=Gx(Xx.has),tS=Gx(Xx.set),nS=Gx([].push),rS=Sc;aa({target:"Array",proto:!0,forced:!0},{uniqueBy:function(e){var t,n,r,i=Kx(this),o=Wx(i),s=Zx(i,0),a=new Jx,l=null!=e?qx(e):function(e){return e};for(t=0;t<o;t++)r=l(n=i[t]),eS(a,r)||tS(a,r,n);return Qx(a,function(e){nS(s,e)}),s}}),rS("uniqueBy");var iS,oS=function(){function e(e,t,n){void 0===n&&(n=r.v4()),this.timestamp=e,this.user=t,this.insertId=n}return e.exposure=function(e,t,n,r){return new sS(r,e,t.experiment,t.variationId,t.variationKey,t.reason,n)},e.track=function(e,t,n,r){return new aS(r,n,e,t)},e.remoteConfig=function(e,t,n,r){return new lS(r,e,t.parameter,t.valueId,t.reason,n)},e.isExposureEvent=function(e){return void 0!==e.experiment},e.isTrackEvent=function(e){return void 0!==e.eventType},e.isRemoteConfigEvent=function(e){return void 0!==e.parameter},e.isExposureEventDto=function(e){return"experimentId"in e&&void 0!==e.experimentId},e.isTrackEventDto=function(e){return"eventTypeId"in e&&void 0!==e.eventTypeId},e.isRemoteConfigEventDto=function(e){return"parameterId"in e&&void 0!==e.parameterId},e.prototype.toDto=function(){return{insertId:this.insertId,timestamp:this.timestamp,userId:this.user.identifiers[B.ID],identifiers:this.user.identifiers,userProperties:_.sanitize(this.user.properties),hackleProperties:_.sanitize(this.user.hackleProperties)}},e}(),sS=function(e){function t(t,n,r,i,o,s,a,l){var c=e.call(this,t,n,l)||this;return c.experiment=r,c.variationId=i,c.variationKey=o,c.decisionReason=s,c.properties=a,c}return s(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.experiment,this.variationId,this.variationKey,this.decisionReason,this.properties,this.insertId)},t.prototype.toDto=function(){return a(a({},e.prototype.toDto.call(this)),{experimentId:this.experiment.id,experimentKey:this.experiment.key,experimentType:this.experiment.type,experimentVersion:this.experiment.version,variationId:this.variationId,variationKey:this.variationKey,decisionReason:this.decisionReason.toString(),properties:this.properties})},t}(oS),aS=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,o)||this;return s.eventType=r,s.event=i,s}return s(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.eventType,this.event,this.insertId)},t.prototype.toDto=function(){return a(a({},e.prototype.toDto.call(this)),{eventTypeId:this.eventType.id,eventTypeKey:this.eventType.key,value:this.event.value||0,properties:_.sanitize(this.event.properties)})},t}(oS),lS=function(e){function t(t,n,r,i,o,s,a){var l=e.call(this,t,n,a)||this;return l.parameter=r,l.valueId=i,l.decisionReason=o,l.properties=s,l}return s(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.parameter,this.valueId,this.decisionReason,this.properties,this.insertId)},t.prototype.toDto=function(){return a(a({},e.prototype.toDto.call(this)),{parameterId:this.parameter.id,parameterKey:this.parameter.key,parameterType:this.parameter.type,valueId:this.valueId,decisionReason:this.decisionReason.toString(),properties:_.sanitize(this.properties)})},t}(oS),cS=function(){function e(e,t){this.userManager=e,this.core=t}return e.isSessionEvent=function(t){return!!oS.isTrackEvent(t)&&(t.event.key===e.SESSION_START_EVENT_NAME||t.event.key===e.SESSION_END_EVENT_NAME)},e.prototype.onSessionStarted=function(t,n,r){this.track(e.SESSION_START_EVENT_NAME,t,n,r)},e.prototype.onSessionEnded=function(t,n,r){this.track(e.SESSION_END_EVENT_NAME,t,n,r)},e.prototype.track=function(e,t,n,r){var i={key:e},o=this.userManager.toHackleUser(n),s=this.decorateSession(o,t);this.core.track(i,s,r)},e.prototype.decorateSession=function(e,t){var n=(new H).add(B.SESSION,t).addIdentifiers(e.identifiers).build();return a(a({},e),{identifiers:n})},e.SESSION_START_EVENT_NAME="$session_start",e.SESSION_END_EVENT_NAME="$session_end",e}(),uS=function(){function e(e,t,n,r){this.delegate=e,this.eventDedupDeterminer=t,this.sessionManager=n,this.userManager=r,this.decorators=[]}return e.prototype.addDecorator=function(e){this.decorators.push(e)},e.prototype.process=function(e){if(cS.isSessionEvent(e)||this.sessionManager.startNewSessionIfNeeded(this.userManager.currentUser,e.timestamp),!this.eventDedupDeterminer.isDedupTarget(e)){var t=this.decorators.reduce(function(e,t){return t.decorate(e)},e);this.delegate.process(t)}},e.prototype.flush=function(e){this.delegate.flush(e)},e.prototype.close=function(){this.delegate.close()},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"hidden":case"pagehide":return this.flush(!0);case"blur":case"focus":case"locationChange":case"visible":case"pageshow":return}},e}(),hS=function(){function e(){}return e.toEvent=function(t){var n;return{key:e.EVENT_KEY,properties:{level:e.LEVEL_ERROR,type:t.name,message:null!==(n=t.message)&&void 0!==n?n:"",$stacktrace:e._stacktrace(t)}}},e._stacktrace=function(t){return h.isNullOrUndefined(t.stack)?"":t.stack.split("\n").slice(0,e.STACK_TRACK_LIMIT).join("\n")},e.EVENT_KEY="$trace",e.LEVEL_ERROR="error",e.STACK_TRACK_LIMIT=30,e}(),dS=function(){function e(){}return e.prototype.evaluate=function(e,t){if(!this.supports(e))throw new Error("Unsupported EvaluatorRequest ".concat(e.toString()));if(t.contains(e)){var n=t.stack.map(function(e){return e.toString()}).join(" - ");throw new Error("Circular evaluation has occurred [".concat(n," - ").concat(e.toString(),"]"))}t.addRequest(e);try{return this.evaluateInternal(e,t)}finally{t.removeRequest(e)}},e}(),pS=function(){function e(e,t,n,r,i,o){this.reason=e,this.targetEvaluations=t,this.experiment=n,this.variationId=r,this.variationKey=i,this.config=o}return e.prototype.with=function(t){return new e(t,this.targetEvaluations,this.experiment,this.variationId,this.variationKey,this.config)},e.of=function(t,n,r,i){return new e(i,n.targetEvaluations,t.experiment,r.id,r.key,r.config)},e.ofDefault=function(t,n,r){var i=t.experiment._getVariationByKeyOrNull(t.defaultVariationKey);return h.isNotNullOrUndefined(i)?this.of(t,n,i,r):new e(r,n.targetEvaluations,t.experiment,void 0,t.defaultVariationKey,void 0)},e}(),fS=function(e){function t(t){var n=e.call(this)||this;return n.experimentFlowFactory=t,n}return s(t,e),t.prototype.supports=function(e){return void 0!==e.experiment},t.prototype.evaluateInternal=function(e,t){var n;return null!==(n=this.experimentFlowFactory.getExperimentFlow(e.experiment.type).evaluate(e,t))&&void 0!==n?n:pS.ofDefault(e,t,D.TRAFFIC_NOT_ALLOCATED)},t}(dS),mS=function(){function e(e,t,n,r,i,o){this.reason=e,this.targetEvaluations=t,this.parameter=n,this.valueId=r,this.value=i,this.properties=o}return e.of=function(t,n,r,i,o,s){return s.returnValue=_.truncateStringValue(i),new e(o,n.targetEvaluations,t.parameter,r,i,s)},e.ofDefault=function(e,t,n,r){return this.of(e,t,void 0,e.defaultValue,n,r)},e}(),gS=function(e){function t(t){var n=e.call(this)||this;return n.targetRuleDeterminer=t,n}return s(t,e),t.prototype.supports=function(e){return void 0!==e.parameter},t.prototype.evaluateInternal=function(e,t){var n={};if(n.requestValueType=e.requiredType,n.requestDefaultValue=_.truncateStringValue(e.defaultValue),h.isNullOrUndefined(e.user.identifiers[e.parameter.identifierType]))return mS.ofDefault(e,t,D.IDENTIFIER_NOT_FOUND,n);var r=this.targetRuleDeterminer.determineTargetRuleOrNull(e,t);return h.isNotNullOrUndefined(r)?(n.targetRuleKey=r.key,n.targetRuleName=r.name,this.evaluation(e,t,r.value,D.TARGET_RULE_MATCH,n)):this.evaluation(e,t,e.parameter.defaultValue,D.DEFAULT_RULE,n)},t.prototype.evaluation=function(e,t,n,r,i){return"UNKNOWN"===e.requiredType||"NULL"!==e.requiredType&&typeof e.defaultValue!=typeof n.rawValue?mS.ofDefault(e,t,D.TYPE_MISMATCH,i):mS.of(e,t,n.id,n.rawValue,r,i)},t}(dS),yS=function(){function e(e,t){this.type=e,this.id=t}return e.prototype.isEquals=function(e){return this.type===e.type&&this.id===e.id},e}(),vS=function(){function e(){this._stack=[],this._targetEvaluations=[],this._properties={},this.map=new WeakMap}return e.create=function(){return new e},Object.defineProperty(e.prototype,"stack",{get:function(){return Array.from(this._stack)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetEvaluations",{get:function(){return Array.from(this._targetEvaluations)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return _.sanitize(this._properties)},enumerable:!1,configurable:!0}),e.prototype.contains=function(e){return this._stack.some(function(t){return t.key.isEquals(e.key)})},e.prototype.addRequest=function(e){this._stack.push(e)},e.prototype.removeRequest=function(e){var t=this._stack.indexOf(e,0);t>-1&&this._stack.splice(t,1)},e.prototype.getEvaluation=function(e){return this._targetEvaluations.find(function(t){return t instanceof pS&&t.experiment.id===e.id})},e.prototype.addEvaluation=function(e){this._targetEvaluations.push(e)},e.prototype.setProperty=function(e,t){this._properties[e]=t},e.prototype.get=function(e){var t=this.map.get(e);if(!t)return null;if(!(t instanceof e))throw new Error("Context does not contain a value of type ".concat(e.name));return t},e.prototype.set=function(e,t){this.map.set(e,t)},e}(),_S=function(){function e(e,t,n,r){this.key=new yS("EXPERIMENT",n.id),this.workspace=e,this.user=t,this.experiment=n,this.defaultVariationKey=r}return e.of=function(t,n,r,i){return new e(t,n,r,i)},e.by=function(t,n){return new e(t.workspace,t.user,n,"A")},e.prototype.toString=function(){return"EvaluatorRequest(type=".concat(this.experiment.type,", key=").concat(this.experiment.key,")")},e}(),bS=function(){function e(e,t,n,r,i){this.key=new yS("REMOTE_CONFIG",n.id),this.workspace=e,this.user=t,this.parameter=n,this.requiredType=r,this.defaultValue=i}return e.of=function(t,n,r,i,o){return new e(t,n,r,i,o)},e.prototype.toString=function(){return"EvaluatorRequest(type=".concat(this.key.type,", key=").concat(this.parameter.key,")")},e}(),wS=function(){function e(){}return e.asString=function(e){switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"true":"false";default:return}},e.asNumber=function(e){switch(typeof e){case"number":return this.asActualNumber(e);case"string":return this.asActualNumber(Number(e));default:return}},e.asBoolean=function(e){switch(typeof e){case"boolean":return e;case"string":switch(e){case"true":return!0;case"false":return!1;default:return}default:return}},e.asActualNumber=function(e){return!isNaN(e)&&isFinite(e)?e:void 0},e}(),xS=function(){function e(e){this.storages=e}return e.prototype.getVariation=function(e,t){if(0!==this.storages.length)for(var n=0,r=this.storages;n<r.length;n++){var i=r[n].getVariation(e,t);if(void 0!==i)return i}},e}(),SS=function(){function e(e){this.listStorage=e}return e.prototype.getVariation=function(e,t){var n=this.get(e);if(n)return e._getVariationByIdOrNull(n)},e.prototype.get=function(e){var t=this.listStorage.getItem(e.id.toString());return wS.asNumber(t)},e.prototype.getAll=function(){var e=new Map;return this.listStorage.entries().forEach(function(t){var n=t[0],r=t[1],i=wS.asNumber(n),o=wS.asNumber(r);h.isNullOrUndefined(i)||i<0||h.isNullOrUndefined(o)||i<0||e.set(i,o)}),e},e.prototype.set=function(e,t){this.listStorage.setItem(e.id.toString(),t.toString())},e.prototype.remove=function(e){this.listStorage.removeItem(e.id.toString())},e.prototype.clear=function(){this.listStorage.clear()},e}(),ES=function(){function e(){this.evaluators=new Array}return e.prototype.add=function(e){this.evaluators.push(e)},e.prototype.evaluate=function(e,t){var n=this.evaluators.find(function(t){return t.supports(e)});if(h.isNullOrUndefined(n))throw new Error("Unsupported EvaluatorRequest [".concat(e.toString(),"]"));return n.evaluate(e,t)},e}(),TS=function(){function e(){}return e.get=function(e){return h.requiredNotNullOrUndefined(this.getOrNull(e),function(){return"Instance not registered [".concat(e,"]")})},e.getOrNull=function(t){return e.instances.get(t)},e.register=function(t,n){return e.instances.set(t,n),n},e.instances=new Map,e}(),MS=function(){function e(e,t){this.targetMatcher=e,this.bucketer=t}return e.prototype.determineTargetRuleOrNull=function(e,t){var n=this;return e.parameter.targetRules.find(function(r){return n.matches(e,t,r)})},e.prototype.matches=function(e,t,n){if(!this.targetMatcher.matches(e,t,n.target))return!1;var r=e.user.identifiers[e.parameter.identifierType];if(h.isNullOrUndefined(r))return!1;var i=e.workspace.getBucketOrNull(n.bucketId);if(h.isNullOrUndefined(i))throw new Error("bucket[".concat(n.bucketId,"]"));return h.isNotNullOrUndefined(this.bucketer.bucketing(i,r))},e}(),AS=function(){function e(e){this.bucketer=e}return e.prototype.resolveOrNull=function(e,t,n){switch(n.type){case"VARIATION":return this.resolveVariation(e,n);case"BUCKET":return this.resolveBucket(e,n)}},e.prototype.resolveVariation=function(e,t){return e.experiment._getVariationByIdOrNull(t.variationId)},e.prototype.resolveBucket=function(e,t){var n=e.workspace.getBucketOrNull(t.bucketId),r=e.user.identifiers[e.experiment.identifierType];if(r){var i=this.bucketer.bucketing(n,r);if(i)return e.experiment._getVariationByIdOrNull(i.variationId)}},e}(),kS=function(){function e(e,t){this.flowEvaluator=e,this.nextFlow=t}return e.prototype.evaluate=function(e,t){return this.flowEvaluator&&this.nextFlow?this.flowEvaluator.evaluate(e,t,this.nextFlow):void 0},e.end=function(){return new e(void 0,void 0)},e.decision=function(t,n){return new e(t,n)},e.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this.end(),r=0,i=e.reverse();r<i.length;r++){var o=i[r];n=this.decision(o,n)}return n},e}(),CS=function(){function e(e){this.overrideResolver=e}return e.prototype.evaluate=function(e,t,n){var r=this.overrideResolver.resolveOrNull(e,t);if(!r)return n.evaluate(e,t);switch(e.experiment.type){case"AB_TEST":return pS.of(e,t,r,D.OVERRIDDEN);case"FEATURE_FLAG":return pS.of(e,t,r,D.INDIVIDUAL_TARGET_MATCH)}},e}(),IS=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return"DRAFT"===e.experiment.status?pS.ofDefault(e,t,D.EXPERIMENT_DRAFT):n.evaluate(e,t)},e}(),PS=function(){function e(){}return e.prototype.evaluate=function(e,t,n){if("PAUSED"!==e.experiment.status)return n.evaluate(e,t);switch(e.experiment.type){case"AB_TEST":return pS.ofDefault(e,t,D.EXPERIMENT_PAUSED);case"FEATURE_FLAG":return pS.ofDefault(e,t,D.FEATURE_FLAG_INACTIVE)}},e}(),OS=function(){function e(){}return e.prototype.evaluate=function(e,t,n){if("COMPLETED"===e.experiment.status){var r=e.experiment._winnerVariationOrNull();if(!r)throw new Error("winner variation [".concat(e.experiment.id,"]"));return pS.of(e,t,r,D.EXPERIMENT_COMPLETED)}return n.evaluate(e,t)},e}(),RS=function(){function e(e){this.experimentTargetDeterminer=e}return e.prototype.evaluate=function(e,t,n){if("AB_TEST"!==e.experiment.type)throw new Error("experiment type must be AB_TEST [".concat(e.experiment.id,"]"));return this.experimentTargetDeterminer.isUserInExperimentTarget(e,t)?n.evaluate(e,t):pS.ofDefault(e,t,D.NOT_IN_EXPERIMENT_TARGET)},e}(),DS=function(){function e(e){this.actionResolver=e}return e.prototype.evaluate=function(e,t,n){if("RUNNING"!==e.experiment.status)throw new Error("experiment status must be RUNNING [".concat(e.experiment.id,"]"));if("AB_TEST"!==e.experiment.type)throw new Error("experiment type must be AB_TEST [".concat(e.experiment.id,"]"));var r=this.actionResolver.resolveOrNull(e,t,e.experiment.defaultRule);return r?r.isDropped?pS.ofDefault(e,t,D.VARIATION_DROPPED):pS.of(e,t,r,D.TRAFFIC_ALLOCATED):pS.ofDefault(e,t,D.TRAFFIC_NOT_ALLOCATED)},e}(),LS=function(){function e(e,t){this.targetRuleDeterminer=e,this.actionResolver=t}return e.prototype.evaluate=function(e,t,n){if("RUNNING"!==e.experiment.status)throw new Error("experiment status must be RUNNING [".concat(e.experiment.id,"]"));if("FEATURE_FLAG"!==e.experiment.type)throw new Error("experiment type must be FEATURE_FLAG [".concat(e.experiment.id,"]"));if(!e.user.identifiers[e.experiment.identifierType])return n.evaluate(e,t);var r=this.targetRuleDeterminer.determineTargetRuleOrNull(e,t);if(!r)return n.evaluate(e,t);var i=this.actionResolver.resolveOrNull(e,t,r.action);if(!i)throw new Error("FeatureFlag must decide the Variation [".concat(e.experiment.id,"]"));return pS.of(e,t,i,D.TARGET_RULE_MATCH)},e}(),NS=function(){function e(e){this.actionResolver=e}return e.prototype.evaluate=function(e,t,n){if("RUNNING"!==e.experiment.status)throw new Error("experiment status must be RUNNING [".concat(e.experiment.id,"]"));if("FEATURE_FLAG"!==e.experiment.type)throw new Error("experiment type must be FEATURE_FLAG [".concat(e.experiment.id,"]"));if(!e.user.identifiers[e.experiment.identifierType])return pS.ofDefault(e,t,D.DEFAULT_RULE);var r=this.actionResolver.resolveOrNull(e,t,e.experiment.defaultRule);if(!r)throw new Error("FeatureFlag must decide the Variation [".concat(e.experiment.id,"]"));return pS.of(e,t,r,D.DEFAULT_RULE)},e}(),FS=function(){function e(e){this.containerResolver=e}return e.prototype.evaluate=function(e,t,n){var r=e.experiment.containerId;if(!r)return n.evaluate(e,t);var i=e.workspace.getContainerOrNull(r);if(!i)throw new Error("container[".concat(r,"]"));return this.containerResolver.isUserInContainerGroup(e,t,i)?n.evaluate(e,t):pS.ofDefault(e,t,D.NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT)},e}(),zS=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return e.user.identifiers[e.experiment.identifierType]?n.evaluate(e,t):pS.ofDefault(e,t,D.IDENTIFIER_NOT_FOUND)},e}(),US=function(){function e(e){this.targetMatcher=e}return e.prototype.isUserInExperimentTarget=function(e,t){var n=this;return 0===e.experiment.targetAudiences.length||e.experiment.targetAudiences.some(function(r){return n.targetMatcher.matches(e,t,r)})},e}(),jS=function(){function e(e){this.targetMatcher=e}return e.prototype.determineTargetRuleOrNull=function(e,t){var n=this;return e.experiment.targetRules.find(function(r){return n.targetMatcher.matches(e,t,r.target)})},e}(),BS=function(){function e(e,t,n){this.manualOverrideStorage=e,this.targetMatcher=t,this.actionResolver=n}return e.prototype.resolveOrNull=function(e,t){var n,r;return null!==(r=null!==(n=this.resolveManualOverride(e))&&void 0!==n?n:this._resolveUserOverride(e))&&void 0!==r?r:this._resolveSegmentOverride(e,t)},e.prototype.resolveManualOverride=function(e){return this.manualOverrideStorage.getVariation(e.experiment,e.user)},e.prototype._resolveUserOverride=function(e){var t=e.experiment,n=e.user.identifiers[t.identifierType];if(n){var r=t.userOverrides.get(n);if(r)return t._getVariationByIdOrNull(r)}},e.prototype._resolveSegmentOverride=function(e,t){var n=this,r=e.experiment.segmentOverrides.find(function(r){return n.targetMatcher.matches(e,t,r.target)});if(r)return this.actionResolver.resolveOrNull(e,t,r.action)},e}(),VS=function(){function e(e){this.bucketer=e}return e.prototype.isUserInContainerGroup=function(e,t,n){var r=e.user.identifiers[e.experiment.identifierType];if(h.isNullOrUndefined(r))return!1;var i=e.workspace.getBucketOrNull(n.bucketId);if(h.isNullOrUndefined(i))throw new Error("Bucket[".concat(n.bucketId,"]"));var o=this.bucketer.bucketing(i,r);if(h.isNullOrUndefined(o))return!1;var s=n.getGroupOrNull(o.variationId);if(h.isNullOrUndefined(s))throw new Error("ContainerGroup[".concat(o.variationId,"]"));return s.experiments.includes(e.experiment.id)},e}(),HS=function(){function e(e,t,n){var r=new AS(t),i=new BS(e,n,r),o=new VS(t);this.abTestFlow=kS.of(new CS(i),new zS,new FS(o),new RS(new US(n)),new IS,new PS,new OS,new DS(r)),this.featureFlagFlow=kS.of(new IS,new PS,new OS,new CS(i),new zS,new LS(new jS(n),r),new NS(r))}return e.prototype.getExperimentFlow=function(e){switch(e){case"AB_TEST":return this.abTestFlow;case"FEATURE_FLAG":return this.featureFlagFlow}},e}(),$S=function(){function e(e){this.conditionMatcherFactory=e}return e.prototype.matches=function(e,t,n){var r=this;return n.conditions.every(function(n){return r._matches(e,t,n)})},e.prototype.anyMatches=function(e,t,n){var r=this;return!n.length||n.some(function(n){return r.matches(e,t,n)})},e.prototype._matches=function(e,t,n){return this.conditionMatcherFactory.getMatcher(n.key.type).matches(e,t,n)},e}(),YS=function(){function e(){}return e.prototype.decorate=function(e){return e},e}(),GS=function(){function e(){}return e.prototype.decorate=function(e){return"string"==typeof e?hn.decodeURIOrOriginal(e):e},e}(),qS=function(){function e(e,t){this.valueMatcherFactory=e,this.operatorMatcherFactory=t}return e.prototype.matches=function(e,t,n){void 0===n&&(n=new YS);var r=this.valueMatcherFactory.getMatcher(t.valueType),i=this.operatorMatcherFactory.getMatcher(t.operator),o=this.userValueMatches(e,t,r,i,n);return this.typeMatches(t.type,o)},e.prototype.userValueMatches=function(e,t,n,r,i){return Array.isArray(e)?this.arrayMatches(e,t,n,r,i):this.singleMatches(e,t,n,r,i)},e.prototype.singleMatches=function(e,t,n,r,i){var o=i.decorate(e),s=t.values.map(i.decorate);return r.matches(n,o,s)},e.prototype.arrayMatches=function(e,t,n,r,i){var o=this;return e.some(function(e){return o.singleMatches(e,t,n,r,i)})},e.prototype.typeMatches=function(e,t){switch(e){case"MATCH":return t;case"NOT_MATCH":return!t}},e}(),WS=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.inMatches(t,n)})},e}(),KS=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.containsMatches(t,n)})},e}(),ZS=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.startsWithMatches(t,n)})},e}(),JS=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.endsWithMatches(t,n)})},e}(),XS=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.greaterThanMatches(t,n)})},e}(),QS=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.greaterThanOrEqualMatches(t,n)})},e}(),eE=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.lessThanMatches(t,n)})},e}(),tE=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)&&n.some(function(n){return e.lessThanOrEqualMatches(t,n)})},e}(),nE=function(){function e(){}return e.prototype.matches=function(e,t,n){return!h.isNullOrUndefined(t)},e}(),rE=function(){function e(){}return e.prototype.getMatcher=function(t){switch(t){case"IN":return e.IN_MATCHER;case"CONTAINS":return e.CONTAINS_MATCHER;case"STARTS_WITH":return e.STARTS_WITH_MATCHER;case"ENDS_WITH":return e.ENDS_WITH_MATCHER;case"GT":return e.GT_MATCHER;case"GTE":return e.GTE_MATCHER;case"LT":return e.LT_MATCHER;case"LTE":return e.LTE_MATCHER;case"EXISTS":return e.EXISTS_MATCHER}},e.IN_MATCHER=new WS,e.CONTAINS_MATCHER=new KS,e.STARTS_WITH_MATCHER=new ZS,e.ENDS_WITH_MATCHER=new JS,e.GT_MATCHER=new XS,e.GTE_MATCHER=new QS,e.LT_MATCHER=new eE,e.LTE_MATCHER=new tE,e.EXISTS_MATCHER=new nE,e}(),iE=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=wS.asString(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n===r},e.prototype.containsMatches=function(e,t){var n=wS.asString(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.includes(r)},e.prototype.startsWithMatches=function(e,t){var n=wS.asString(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.startsWith(r)},e.prototype.endsWithMatches=function(e,t){var n=wS.asString(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.endsWith(r)},e.prototype.greaterThanMatches=function(e,t){var n=wS.asString(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n>r},e.prototype.greaterThanOrEqualMatches=function(e,t){var n=wS.asString(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n>=r},e.prototype.lessThanMatches=function(e,t){var n=wS.asString(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n<r},e.prototype.lessThanOrEqualMatches=function(e,t){var n=wS.asString(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n<=r},e}(),oE=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=wS.asNumber(e),r=wS.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n===r},e.prototype.containsMatches=function(e,t){return!1},e.prototype.startsWithMatches=function(e,t){return!1},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){var n=wS.asNumber(e),r=wS.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n>r},e.prototype.greaterThanOrEqualMatches=function(e,t){var n=wS.asNumber(e),r=wS.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n>=r},e.prototype.lessThanMatches=function(e,t){var n=wS.asNumber(e),r=wS.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n<r},e.prototype.lessThanOrEqualMatches=function(e,t){var n=wS.asNumber(e),r=wS.asNumber(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n<=r},e}(),sE=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=wS.asBoolean(e),r=wS.asBoolean(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n===r},e.prototype.containsMatches=function(e,t){return!1},e.prototype.startsWithMatches=function(e,t){return!1},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){return!1},e.prototype.greaterThanOrEqualMatches=function(e,t){return!1},e.prototype.lessThanMatches=function(e,t){return!1},e.prototype.lessThanOrEqualMatches=function(e,t){return!1},e}(),aE=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=ie.tryParse(e),r=ie.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isEqualTo(r)},e.prototype.containsMatches=function(e,t){return!1},e.prototype.startsWithMatches=function(e,t){return!1},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){var n=ie.tryParse(e),r=ie.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isGreaterThan(r)},e.prototype.greaterThanOrEqualMatches=function(e,t){var n=ie.tryParse(e),r=ie.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isGreaterThanOrEqualTo(r)},e.prototype.lessThanMatches=function(e,t){var n=ie.tryParse(e),r=ie.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isLessThan(r)},e.prototype.lessThanOrEqualMatches=function(e,t){var n=ie.tryParse(e),r=ie.tryParse(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&n.isLessThanOrEqualTo(r)},e}(),lE=function(){function e(){}return e.prototype.inMatches=function(e,t){var n=hn.tryParse(e),r=wS.asString(t);return!h.isNullOrUndefined(n)&&!h.isNullOrUndefined(r)&&hn.decodeURIOrOriginal(hn.removePathnameTrailingSlash(n))===hn.decodeURIOrOriginal(hn.removePathnameTrailingSlash(r))},e.prototype.containsMatches=function(e,t){var n=hn.tryParse(e),r=wS.asString(t);if(h.isNullOrUndefined(n)||h.isNullOrUndefined(r))return!1;var i=hn.decodeURIOrOriginal(n.href);return i.includes(r)||i.includes(encodeURI(r))},e.prototype.startsWithMatches=function(e,t){var n=hn.tryParse(e),r=wS.asString(t);if(h.isNullOrUndefined(n)||h.isNullOrUndefined(r))return!1;var i=hn.decodeURIOrOriginal(n.href);return i.startsWith(r)||i.startsWith(encodeURI(r))},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){return!1},e.prototype.greaterThanOrEqualMatches=function(e,t){return!1},e.prototype.lessThanMatches=function(e,t){return!1},e.prototype.lessThanOrEqualMatches=function(e,t){return!1},e}(),cE=function(){function e(){}return e.prototype.inMatches=function(e,t){return!1},e.prototype.containsMatches=function(e,t){return!1},e.prototype.startsWithMatches=function(e,t){return!1},e.prototype.endsWithMatches=function(e,t){return!1},e.prototype.greaterThanMatches=function(e,t){return!1},e.prototype.greaterThanOrEqualMatches=function(e,t){return!1},e.prototype.lessThanMatches=function(e,t){return!1},e.prototype.lessThanOrEqualMatches=function(e,t){return!1},e}(),uE=function(){function e(){}return e.prototype.getMatcher=function(t){switch(t){case"STRING":case"JSON":return e.STRING_MATCHER;case"NUMBER":return e.NUMBER_MATCHER;case"BOOLEAN":return e.BOOLEAN_MATCHER;case"VERSION":return e.VERSION_MATCHER;case"URL":return e.URL_MATCHER;case"NULL":case"UNKNOWN":return e.NULL_MATCHER}},e.STRING_MATCHER=new iE,e.NUMBER_MATCHER=new oE,e.BOOLEAN_MATCHER=new sE,e.VERSION_MATCHER=new aE,e.URL_MATCHER=new lE,e.NULL_MATCHER=new cE,e}(),hE=function(){function e(e,t){this.URL_HACKLE_PROPERTY_KEY_NAMES=["pagePath","host","url","queryParameter"],this.userValueResolver=e,this.valueOperatorMatcher=t}return e.prototype.matches=function(e,t,n){var r=this.userValueResolver.resolveOrNull(e.user,n.key),i=this.valueDecorator(n.key);return this.valueOperatorMatcher.matches(r,n.match,i)},e.prototype.valueDecorator=function(e){return"HACKLE_PROPERTY"===e.type&&this.URL_HACKLE_PROPERTY_KEY_NAMES.includes(e.name)?new GS:new YS},e}(),dE=function(){function e(){}return e.prototype.resolveOrNull=function(e,t){switch(t.type){case"USER_ID":return e.identifiers[t.name];case"USER_PROPERTY":return e.properties[t.name];case"HACKLE_PROPERTY":return e.hackleProperties[t.name];default:throw new Error("Unsupported TargetKeyType [".concat(t.type,"]"))}},e}(),pE=function(){function e(e){this.segmentMatcher=e}return e.prototype.matches=function(e,t,n){var r=this;if("SEGMENT"!=n.key.type)throw new Error("Unsupported TargetKeyType [".concat(n.key.type,"]"));var i=n.match.values.some(function(n){return r._matches(e,t,n)});switch(n.match.type){case"MATCH":return i;case"NOT_MATCH":return!i}},e.prototype._matches=function(e,t,n){if("string"!=typeof n)throw new Error("SegmentKey[".concat(n,"]"));var r=e.workspace.getSegmentOrNull(n);if(!r)throw new Error("Segment[".concat(n,"]"));return this.segmentMatcher.matches(e,t,r)},e}(),fE=function(){function e(e){this.userConditionMatcher=e}return e.prototype.matches=function(e,t,n){var r=this;return n.targets.some(function(n){return r._matches(e,t,n)})},e.prototype._matches=function(e,t,n){var r=this;return n.conditions.every(function(n){return r.userConditionMatcher.matches(e,t,n)})},e}(),mE=function(){function e(e){this.evaluator=e}return e.prototype.evaluateInternal=function(e,t,n){var r=_S.by(e,n),i=this.evaluator.evaluate(r,t);if(!(i instanceof pS))throw new Error("Unexpected evaluation [expected=ExperimentEvaluation, actual=".concat(i.constructor.name,"]"));var o=this.resolve(e,t,i);return t.addEvaluation(o),o},e.prototype.evaluate=function(e,t,n){var r;return null!==(r=t.getEvaluation(n))&&void 0!==r?r:this.evaluateInternal(e,t,n)},e}(),gE=function(){function e(e,t){this.abTestMatcher=e,this.featureFlagMatcher=t}return e.prototype.matches=function(e,t,n){switch(n.key.type){case"AB_TEST":return this.abTestMatcher.matches(e,t,n);case"FEATURE_FLAG":return this.featureFlagMatcher.matches(e,t,n);default:throw new Error("Unsupported TargetKeyType [".concat(n.key.type,"]"))}},e}(),yE=function(e){function t(t,n){var r=e.call(this,t)||this;return r.valueOperatorMatcher=n,r}return s(t,e),t.prototype.matches=function(e,t,n){var r=h.requiredNotNullOrUndefined(wS.asNumber(n.key.name),function(){return"Invalid key [".concat(n.key.type,", ").concat(n.key.name,"]")}),i=this.experiment(e,r);if(h.isNullOrUndefined(i))return!1;var o=this.evaluate(e,t,i);return this.evaluationMatches(o,n)},t}(mE),vE=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype.experiment=function(e,t){return e.workspace.getExperimentOrNull(t)},t.prototype.resolve=function(e,t,n){return n.reason===D.TRAFFIC_ALLOCATED?n.with(D.TRAFFIC_ALLOCATED_BY_TARGETING):n},t.prototype.evaluationMatches=function(e,n){return!!t.AB_TEST_MATCHED_REASONS.includes(e.reason)&&this.valueOperatorMatcher.matches(e.variationKey,n.match)},t.AB_TEST_MATCHED_REASONS=[D.OVERRIDDEN,D.TRAFFIC_ALLOCATED,D.EXPERIMENT_COMPLETED,D.TRAFFIC_ALLOCATED_BY_TARGETING],t}(yE),_E=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype.experiment=function(e,t){return e.workspace.getFeatureFlagOrNull(t)},t.prototype.resolve=function(e,t,n){return n},t.prototype.evaluationMatches=function(e,t){var n="A"!==e.variationKey;return this.valueOperatorMatcher.matches(n,t.match)},t}(yE),bE=function(){function e(e,t){this.eventValueResolver=e,this.valueOperatorMatcher=t}return e.prototype.matches=function(e,t,n){if(!this.isEventEvaluatorRequest(e))return!1;var r=this.eventValueResolver.resolveOrNull(e.event,n.key);return this.valueOperatorMatcher.matches(r,n.match)},e.prototype.isEventEvaluatorRequest=function(e){return void 0!==e.event},e}(),wE=function(){function e(){}return e.prototype.resolveOrNull=function(e,t){var n;switch(t.type){case"EVENT_PROPERTY":return null===(n=this.properties(e))||void 0===n?void 0:n[t.name];case"USER_ID":case"USER_PROPERTY":case"HACKLE_PROPERTY":case"SEGMENT":case"AB_TEST":case"FEATURE_FLAG":case"COHORT":throw new Error("Unsupported TargetKeyType [".concat(t.type,"]"))}},e.prototype.properties=function(e){return oS.isTrackEvent(e)?e.event.properties:oS.isExposureEvent(e)||oS.isRemoteConfigEvent(e)?e.properties:void 0},e}(),xE=function(){function e(e){this.valueOperatorMatcher=e}return e.prototype.matches=function(e,t,n){var r,i;if("COHORT"!==n.key.type)throw new Error("Unsupported TargetKeyType [".concat(n.key.type,"]"));var o=null!==(i=null===(r=e.user.cohorts)||void 0===r?void 0:r.map(function(e){return e.id}))&&void 0!==i?i:[];return this.valueOperatorMatcher.matches(o,n.match)},e}(),SE=function(){function e(e,t){this.valueOperatorMatcher=e,this.clock=t}return e.prototype.supports=function(e){return"NUMBER_OF_EVENTS_IN_DAYS"===e||"NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS"===e},e.prototype.matches=function(e,t,n){var r,i=n.key.type;if(!this.supports(i))throw new Error("Unsupported TargetKeyType [".concat(i,"]"));var o=null!==(r=e.user.targetEvents)&&void 0!==r?r:[];switch(i){case"NUMBER_OF_EVENTS_IN_DAYS":return new TE(this.valueOperatorMatcher,this.clock).matches(e,o,n);case"NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS":return new ME(this.valueOperatorMatcher,this.clock).matches(e,o,n);default:return i}},e}(),EE=function(){},TE=function(e){function t(t,n){var r=e.call(this)||this;return r.valueOperatorMatcher=t,r.clock=n,r}return s(t,e),t.prototype.matches=function(e,t,n){var r=this,i=this.convertTargetConditionToExpression(n),o=this.clock.currentMillis()-x.daysToUnit(i.days,"milliseconds"),s=t.filter(function(e){return r.expressionMatch(e,i)}),a=d.sum(s,function(e){return e.countWithinDays(o)});return this.valueOperatorMatcher.matches(a,n.match)},t.prototype.expressionMatch=function(e,t){return e.eventKey===t.eventKey&&null===e.property},t.prototype.convertTargetConditionToExpression=function(e){try{return JSON.parse(e.key.name)}catch(e){throw new Error("Failed to parse UserTargetCondition. ".concat(e))}},t}(EE),ME=function(e){function t(t,n){var r=e.call(this)||this;return r.valueOperatorMatcher=t,r.clock=n,r}return s(t,e),t.prototype.matches=function(e,t,n){var r=this,i=this.convertTargetConditionToExpression(n),o=this.clock.currentMillis()-x.daysToUnit(i.days,"milliseconds"),s=t.filter(function(e){return r.expressionMatch(e,i)}),a=d.sum(s,function(e){return e.countWithinDays(o)});return this.valueOperatorMatcher.matches(a,n.match)},t.prototype.propertyMatch=function(e,t){return(null==e?void 0:e.type)===t.key.type&&e.key===t.key.name&&this.valueOperatorMatcher.matches(e.value,t.match)},t.prototype.expressionMatch=function(e,t){return e.eventKey===t.eventKey&&this.propertyMatch(e.property,t.propertyFilter)},t.prototype.convertTargetConditionToExpression=function(e){try{return JSON.parse(e.key.name)}catch(e){throw new Error("Failed to parse UserTargetCondition. ".concat(e))}},t}(EE),AE=function(){function e(e,t){var n=new qS(new uE,new rE);this.userConditionMatcher=new hE(new dE,n),this.eventConditionMatcher=new bE(new wE,n),this.segmentConditionMatcher=new pE(new fE(this.userConditionMatcher)),this.experimentConditionMatcher=new gE(new vE(e,n),new _E(e,n)),this.cohortConditionMatcher=new xE(n),this.userTargetConditionMatcher=new SE(n,t)}return e.prototype.getMatcher=function(e){switch(e){case"USER_ID":case"USER_PROPERTY":case"HACKLE_PROPERTY":return this.userConditionMatcher;case"EVENT_PROPERTY":return this.eventConditionMatcher;case"SEGMENT":return this.segmentConditionMatcher;case"AB_TEST":case"FEATURE_FLAG":return this.experimentConditionMatcher;case"COHORT":return this.cohortConditionMatcher;case"NUMBER_OF_EVENTS_IN_DAYS":case"NUMBER_OF_EVENTS_WITH_PROPERTY_IN_DAYS":return this.userTargetConditionMatcher;default:return e}},e}(),kE={murmurhash3_x86_32:function(e,t,n,r){void 0===r&&(r=e.length);for(var i,o=3432918353,s=461845907,a=-4&r,l=t,c=0;c<a;c+=4)i=255&e.charCodeAt(c)|(255&e.charCodeAt(c+1))<<8|(255&e.charCodeAt(c+2))<<16|(255&e.charCodeAt(c+3))<<24,i=(131071&(i=this.mul32(i,o)))<<15|i>>>17,l=5*(l=(524287&(l^=i=this.mul32(i,s)))<<13|l>>>19)+3864292196|0;switch(i=0,r%4){case 3:i=(255&e.charCodeAt(a+2))<<16;case 2:i|=(255&e.charCodeAt(a+1))<<8;case 1:i|=255&e.charCodeAt(a),i=(131071&(i=this.mul32(i,o)))<<15|i>>>17,l^=i=this.mul32(i,s)}return l^=r,l^=l>>>16,l=this.mul32(l,2246822507),l^=l>>>13,(l=this.mul32(l,3266489909))^l>>>16},mul32:function(e,t){var n=65535&t;return((t-n)*e|0)+(n*e|0)|0}},CE=function(){function e(){}return e.prototype.bucketing=function(e,t){var n=this.calculateSlotNumber(e.seed,e.slotSize,t);return e.slots.find(function(e){return e.contains(n)})},e.prototype.calculateSlotNumber=function(e,t,n){var r=kE.murmurhash3_x86_32(n,e);return Math.abs(r)%Math.abs(t)},e}(),IE=f.log,PE=function(){function e(e,t,n,r,i,o){this.experimentEvaluator=e,this.remoteConfigEvaluator=t,this.workspaceFetcher=n,this.eventFactory=r,this.eventProcessor=i,this.errorDedupDeterminer=o}return e.create=function(t,n,r,i){var o=S.instance,s=TS.register("delegatingEvaluator",new ES),a=new CE,l=TS.register("targetMatcher",new $S(new AE(s,o))),c=new xS(i),u=new MS(l,a),h=new HS(c,a,TS.get("targetMatcher")),d=new fS(h),p=new gS(u);return s.add(d),s.add(p),new e(d,p,t,n,r,new OE)},e.prototype.getExperiment=function(e){if(e){var t=this.workspaceFetcher.get();if(t)return t.getExperimentOrNull(e)}else IE.error("experimentKey must not be empty")},e.prototype.experiment=function(e,t,n){var r=this;if(!e)return IE.error("experimentKey must not be empty"),I.of(n,D.INVALID_INPUT);var i=this.workspaceFetcher.get();if(!i)return IE.warn("SDK not ready."),I.of(n,D.SDK_NOT_READY);var o=i.getExperimentOrNull(e);if(!o)return IE.warn("Experiment does not exist."),I.of(n,D.EXPERIMENT_NOT_FOUND);var s=_S.of(i,t,o,n),a=this.experimentInternal(s),l=a[0],c=a[1];return this.eventFactory.create(s,l).forEach(function(e){return r.eventProcessor.process(e)}),c},e.prototype.experiments=function(e){var t=this,n=new ht(function(e,t){return e.id===t.id}),r=this.workspaceFetcher.get();return r?(r.getExperiments().forEach(function(i){var o=_S.of(r,e,i,"A"),s=t.experimentInternal(o);s[0];var a=s[1];n.add(i,a)}),n):n},e.prototype.experimentInternal=function(e){var t,n=this.experimentEvaluator.evaluate(e,vS.create()),r=null!==(t=n.config)&&void 0!==t?t:new E;return[n,I.of(n.variationKey,n.reason,r,n.experiment)]},e.prototype.featureFlag=function(e,t){var n=this;if(!e)return IE.error("featureKey must not be empty"),P.off(D.INVALID_INPUT);var r=this.workspaceFetcher.get();if(!r)return IE.warn("SDK not ready."),P.off(D.SDK_NOT_READY);var i=r.getFeatureFlagOrNull(e);if(!i)return IE.warn("FeatureFlag does not exist."),P.off(D.FEATURE_FLAG_NOT_FOUND);var o=_S.of(r,t,i,"A"),s=this.featureFlagInternal(o),a=s[0],l=s[1];return this.eventFactory.create(o,a).forEach(function(e){return n.eventProcessor.process(e)}),l},e.prototype.featureFlags=function(e){var t=this,n=new ht(function(e,t){return e.id===t.id}),r=this.workspaceFetcher.get();return r?(r.getFeatureFlags().forEach(function(i){var o=_S.of(r,e,i,"A"),s=t.featureFlagInternal(o);s[0];var a=s[1];n.add(i,a)}),n):n},e.prototype.featureFlagInternal=function(e){var t,n=this.experimentEvaluator.evaluate(e,vS.create()),r=null!==(t=n.config)&&void 0!==t?t:new E;return[n,"A"===n.variationKey?P.off(n.reason,r,n.experiment):P.on(n.reason,r,n.experiment)]},e.prototype.inAppMessage=function(e,t,n){var r=n.evaluate(e,t);return n.record(e,r),r},e.prototype.track=function(e,t,n){var r;if(void 0===n&&(n=(new Date).getTime()),e)if("object"==typeof e)if("object"!=typeof e||e.key&&"string"==typeof e.key){var i=(null===(r=this.workspaceFetcher.get())||void 0===r?void 0:r.getEventTypeOrNull(e.key))||new j(0,e.key);this.eventProcessor.process(oS.track(i,e,t,n))}else IE.warn("Event key must be not null. or event key must be string type.");else IE.warn("Event must be event type.");else IE.warn("event must not be null.")},e.prototype.trackException=function(e,t){if(!this.errorDedupDeterminer.isDedupTarget(e)){var n=hS.toEvent(e);this.flush(),this.track(n,t),this.flush()}},e.prototype.flush=function(e){void 0===e&&(e=!1),this.eventProcessor.flush(e)},e.prototype.remoteConfig=function(e,t,n,r){var i=this,o=this.workspaceFetcher.get();if(h.isNullOrUndefined(o))return IE.warn("SDK not ready."),C.of(r,D.SDK_NOT_READY);var s=o.getRemoteConfigParameterOrNull(e);if(h.isNullOrUndefined(s))return IE.warn("Remote config parameter does not exist."),C.of(r,D.REMOTE_CONFIG_PARAMETER_NOT_FOUND);var a=bS.of(o,t,s,n,r),l=this.remoteConfigEvaluator.evaluate(a,vS.create());return this.eventFactory.create(a,l).forEach(function(e){return i.eventProcessor.process(e)}),C.of(l.value,l.reason)},e.prototype.close=function(){this.eventProcessor.close()},e}(),OE=function(){function e(){}return e.prototype.isDedupTarget=function(e){return!!this._isSameError(e,this.previous)||(this.previous=e,!1)},e.prototype._isSameError=function(e,t){return!h.isNullOrUndefined(t)&&e.name===t.name&&e.message===t.message&&e.stack===t.stack},e}(),RE=function(){function e(){this._installed=[],this._installations={onerror:LE,onunhandledrejection:NE}}return e.prototype.install=function(e,t){this._install("onerror",e,t),this._install("onunhandledrejection",e,t)},e.prototype._install=function(e,t,n){e in this._installed||((0,this._installations[e])(t,n),this._installed.push(e))},e}(),DE=null;function LE(e,t){DE=window.onerror,window.onerror=function(n,r,i,o,s){h.isNotNullOrUndefined(s)&&e.trackException(s,t.resolve()),DE&&DE.apply(this,arguments)}}function NE(e,t){iS=window.onunhandledrejection,window.onunhandledrejection=function(n){var r;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(e){}r instanceof Error&&e.trackException(r,t.resolve()),iS&&iS.apply(this,arguments)}}var FE,zE=function(){function e(e,t,n){this.storage=e,this.storageKey=t,this.maxSize=n}return e.prototype.read=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){return(e=this.storage.getItem(this.storageKey))?[2,JSON.parse(e)]:[2,[]]})})},e.prototype.save=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){return 0===e.length?[2,this.clear()]:(t=JSON.stringify(e.slice(-this.maxSize)),this.storage.setItem(this.storageKey,t),[2])})})},e.prototype.add=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,this.read()];case 1:return t=n.sent(),[4,this.save(t.concat(e).slice(-this.maxSize))];case 2:return n.sent(),[2]}})})},e.prototype.delete=function(e){return l(this,void 0,void 0,function(){var t,n,r=this;return c(this,function(i){switch(i.label){case 0:return[4,this.read()];case 1:return t=i.sent(),n=t.filter(function(t){return!r.isDeleteTarget(t,e)}),[4,this.save(n)];case 2:return i.sent(),[2]}})})},e.prototype.isDeleteTarget=function(e,t){return t.some(function(t){return t.insertId===e.insertId})},e.prototype.clear=function(){return l(this,void 0,void 0,function(){return c(this,function(e){return this.storage.removeItem(this.storageKey),[2]})})},e}(),UE=function(e,t){return null!==e&&e.userId===t.userId&&e.deviceId===t.deviceId},jE=function(){function e(e){this.cohorts=e}return e.builder=function(){return new BE},e.empty=function(){return e.builder().build()},e.from=function(t){return new e(t)},e.fromDto=function(t){for(var n=e.builder(),r=0,i=t.cohorts;r<i.length;r++){var o=i[r];n.put({identifier:o.identifier,cohorts:o.cohorts.map(function(e){return new it(e)})})}return n.build()},Object.defineProperty(e.prototype,"rawCohorts",{get:function(){return this.cohorts.values().flatMap(function(e){return e.cohorts})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this.cohorts.get(e)},e.prototype.filterBy=function(t){var n=V(t),r=this.asComparable().filter(function(e,t){return n[e.type]===e.value});return e.from(r)},e.prototype.asArray=function(){return this.cohorts.values()},e.prototype.asComparable=function(){return this.cohorts},e.prototype.toBuilder=function(){return new BE(this)},e}(),BE=function(){function e(e){this.cohorts=new ht(y.isEqual),e&&this.putAll(e)}return e.prototype.put=function(e){return this.cohorts.add(e.identifier,e),this},e.prototype.putAll=function(e){var t=this;return e.asArray().forEach(function(e){return t.put(e)}),this},e.prototype.build=function(){return new jE(this.cohorts)},e}(),VE="model",HE="name",$E="type",YE="vendor",GE="version",qE="mobile",WE="tablet",KE=function(){function e(){}return e.parse=function(t){return{browser:e.getBrowser(t),cpu:e.getCPU(t),device:e.getDevice(t),engine:e.getEngine(t),os:e.getOS(t)}},e.getBrowser=function(t){var n={name:void 0,version:void 0,major:void 0};return e.mapper.rgx.call(n,t,e.regexes.browser),n.major=e.util.major(n.version),n},e.getCPU=function(t){var n={architecture:void 0};return e.mapper.rgx.call(n,t,e.regexes.cpu),n},e.getDevice=function(t){var n={model:void 0,type:void 0,vendor:void 0};return e.mapper.rgx.call(n,t,e.regexes.device),n},e.getEngine=function(t){var n={name:void 0,version:void 0};return e.mapper.rgx.call(n,t,e.regexes.os),n},e.getOS=function(t){var n={name:void 0,version:void 0};return e.mapper.rgx.call(n,t,e.regexes.os),n},e.util={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},e.mapper={rgx:function(e,t){for(var n,r,i,o,s,a,l=0;l<t.length&&!s;){var c=t[l],u=t[l+1];for(n=r=0;n<c.length&&!s;)if(s=c[n++].exec(e))for(i=0;i<u.length;i++)a=s[++r],"object"==typeof(o=u[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;l+=2}},str:function(t,n){for(var r in n)if("object"==typeof n[r]&&n[r].length>0){for(var i=0;i<n[r].length;i++)if(e.util.has(n[r][i],t))return"?"===r?void 0:r}else if(e.util.has(n[r],t))return"?"===r?void 0:r;return t}},e.maps={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},e.regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[HE,GE],[/(opios)[\/\s]+([\w\.]+)/i],[[HE,"Opera Mini"],GE],[/\s(opr)\/([\w\.]+)/i],[[HE,"Opera"],GE],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[HE,GE],[/(konqueror)\/([\w\.]+)/i],[[HE,"Konqueror"],GE],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[HE,"IE"],GE],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[HE,"Edge"],GE],[/(yabrowser)\/([\w\.]+)/i],[[HE,"Yandex"],GE],[/(Avast)\/([\w\.]+)/i],[[HE,"Avast Secure Browser"],GE],[/(AVG)\/([\w\.]+)/i],[[HE,"AVG Secure Browser"],GE],[/(puffin)\/([\w\.]+)/i],[[HE,"Puffin"],GE],[/(focus)\/([\w\.]+)/i],[[HE,"Firefox Focus"],GE],[/(opt)\/([\w\.]+)/i],[[HE,"Opera Touch"],GE],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[HE,"UCBrowser"],GE],[/(comodo_dragon)\/([\w\.]+)/i],[[HE,/_/g," "],GE],[/(windowswechat qbcore)\/([\w\.]+)/i],[[HE,"WeChat(Win) Desktop"],GE],[/(micromessenger)\/([\w\.]+)/i],[[HE,"WeChat"],GE],[/(brave)\/([\w\.]+)/i],[[HE,"Brave"],GE],[/(whale)\/([\w\.]+)/i],[[HE,"Whale"],GE],[/(qqbrowserlite)\/([\w\.]+)/i],[HE,GE],[/(QQ)\/([\d\.]+)/i],[HE,GE],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[HE,GE],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[HE,GE],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[HE,GE],[/(MetaSr)[\/\s]?([\w\.]+)/i],[HE],[/(LBBROWSER)/i],[HE],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[GE,[HE,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[GE,[HE,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[HE,GE],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[GE,[HE,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[HE,/(.+)/,"$1 WebView"],GE],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[HE,/(.+(?:g|us))(.+)/,"$1 $2"],GE],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[HE,"Chrome Mobile"],GE],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[GE,[HE,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[HE,"Sailfish Browser"],GE],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[HE,GE],[/(dolfin)\/([\w\.]+)/i],[[HE,"Dolphin"],GE],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[HE,"360 Browser"]],[/(coast)\/([\w\.]+)/i],[[HE,"Opera Coast"],GE],[/fxios\/([\w\.-]+)/i],[GE,[HE,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[GE,[HE,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[GE,HE],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[HE,"GSA"],GE],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[HE,[GE,e.mapper.str,e.maps.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[HE,GE],[/(navigator|netscape)\/([\w\.-]+)/i],[[HE,"Netscape"],GE],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[HE,GE]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",e.util.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",e.util.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",e.util.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[VE,YE,[$E,WE]],[/applecoremedia\/[\w\.]+ \((ipad)/],[VE,[YE,"Apple"],[$E,WE]],[/(apple\s{0,1}tv)/i],[[VE,"Apple TV"],[YE,"Apple"],[$E,"smarttv"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[YE,VE,[$E,WE]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[VE,[YE,"Amazon"],[$E,WE]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[VE,e.mapper.str,e.maps.device.amazon.model],[YE,"Amazon"],[$E,qE]],[/android.+aft([bms])\sbuild/i],[VE,[YE,"Amazon"],[$E,"smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[VE,YE,[$E,qE]],[/\((ip[honed|\s\w*]+);/i],[VE,[YE,"Apple"],[$E,qE]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[YE,VE,[$E,qE]],[/\(bb10;\s(\w+)/i],[VE,[YE,"BlackBerry"],[$E,qE]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[VE,[YE,"Asus"],[$E,WE]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[YE,"Sony"],[VE,"Xperia Tablet"],[$E,WE]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[VE,[YE,"Sony"],[$E,qE]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[YE,VE,[$E,"console"]],[/android.+;\s(shield)\sbuild/i],[VE,[YE,"Nvidia"],[$E,"console"]],[/(playstation\s[34portablevi]+)/i],[VE,[YE,"Sony"],[$E,"console"]],[/(sprint\s(\w+))/i],[[YE,e.mapper.str,e.maps.device.sprint.vendor],[VE,e.mapper.str,e.maps.device.sprint.model],[$E,qE]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[YE,[VE,/_/g," "],[$E,qE]],[/(nexus\s9)/i],[VE,[YE,"HTC"],[$E,WE]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[VE,[YE,"Huawei"],[$E,qE]],[/android.+(bah2?-a?[lw]\d{2})/i],[VE,[YE,"Huawei"],[$E,WE]],[/(microsoft);\s(lumia[\s\w]+)/i],[YE,VE,[$E,qE]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[VE,[YE,"Microsoft"],[$E,"console"]],[/(kin\.[onetw]{3})/i],[[VE,/\./g," "],[YE,"Microsoft"],[$E,qE]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[VE,[YE,"Motorola"],[$E,qE]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[VE,[YE,"Motorola"],[$E,WE]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[YE,e.util.trim],[VE,e.util.trim],[$E,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[VE,/^/,"SmartTV"],[YE,"Samsung"],[$E,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[VE,[YE,"Sharp"],[$E,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[YE,"Samsung"],VE,[$E,WE]],[/smart-tv.+(samsung)/i],[YE,[$E,"smarttv"],VE],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[YE,"Samsung"],VE,[$E,qE]],[/sie-(\w*)/i],[VE,[YE,"Siemens"],[$E,qE]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[YE,"Nokia"],VE,[$E,qE]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[VE,[YE,"Acer"],[$E,WE]],[/android.+([vl]k\-?\d{3})\s+build/i],[VE,[YE,"LG"],[$E,WE]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[YE,"LG"],VE,[$E,WE]],[/(lg) netcast\.tv/i],[YE,VE,[$E,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[VE,[YE,"LG"],[$E,qE]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[YE,VE,[$E,WE]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[VE,[YE,"Lenovo"],[$E,WE]],[/(lenovo)[_\s-]?([\w-]+)/i],[YE,VE,[$E,qE]],[/linux;.+((jolla));/i],[YE,VE,[$E,qE]],[/((pebble))app\/[\d\.]+\s/i],[YE,VE,[$E,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[YE,VE,[$E,qE]],[/crkey/i],[[VE,"Chromecast"],[YE,"Google"],[$E,"smarttv"]],[/android.+;\s(glass)\s\d/i],[VE,[YE,"Google"],[$E,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[VE,[YE,"Google"],[$E,WE]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[VE,[YE,"Google"],[$E,qE]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[VE,/_/g," "],[YE,"Xiaomi"],[$E,qE]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[VE,/_/g," "],[YE,"Xiaomi"],[$E,WE]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[VE,[YE,"Meizu"],[$E,qE]],[/(mz)-([\w-]{2,})/i],[[YE,"Meizu"],VE,[$E,qE]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[VE,[YE,"OnePlus"],[$E,qE]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[VE,[YE,"RCA"],[$E,WE]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[VE,[YE,"Dell"],[$E,WE]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[VE,[YE,"Verizon"],[$E,WE]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[YE,"Barnes & Noble"],VE,[$E,WE]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[VE,[YE,"NuVision"],[$E,WE]],[/android.+;\s(k88)\sbuild/i],[VE,[YE,"ZTE"],[$E,WE]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[VE,[YE,"Swiss"],[$E,qE]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[VE,[YE,"Swiss"],[$E,WE]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[VE,[YE,"Zeki"],[$E,WE]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[YE,"Dragon Touch"],VE,[$E,WE]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[VE,[YE,"Insignia"],[$E,WE]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[VE,[YE,"NextBook"],[$E,WE]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[YE,"Voice"],VE,[$E,qE]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[YE,"LvTel"],VE,[$E,qE]],[/android.+;\s(PH-1)\s/i],[VE,[YE,"Essential"],[$E,qE]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[VE,[YE,"Envizen"],[$E,WE]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[YE,VE,[$E,WE]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[VE,[YE,"MachSpeed"],[$E,WE]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[YE,VE,[$E,WE]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[VE,[YE,"Rotor"],[$E,WE]],[/android.+(KS(.+))\s+build/i],[VE,[YE,"Amazon"],[$E,WE]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[YE,VE,[$E,WE]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[$E,e.util.lowerize],YE,VE],[/[\s\/\(](smart-?tv)[;\)]/i],[[$E,"smarttv"]],[/(android[\w\.\s\-]{0,9});.+build/i],[VE,[YE,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[GE,[HE,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[GE,[HE,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[HE,GE],[/rv\:([\w\.]{1,9}).+(gecko)/i],[GE,HE]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[HE,GE],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[HE,e.mapper.str,e.maps.os.windows],[GE,e.mapper.str,e.maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[HE,"Windows"],[GE,e.mapper.str,e.maps.os.windows.version]],[/\((bb)(10);/i],[[HE,"BlackBerry"],GE],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[HE,GE],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[HE,"Symbian"],GE],[/\((series40);/i],[HE],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[HE,"Firefox OS"],GE],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[[HE,"Linux"],GE],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[HE,"Chromium OS"],GE],[/(sunos)\s?([\w\.\d]*)/i],[[HE,"Solaris"],GE],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[[HE,"Linux"],GE],[/(iphone)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[HE,"iOS"],[GE,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[HE,"iOS"],[GE,/_/g,"."]],[/(haiku)\s(\w+)/i],[HE,GE],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[GE,/_/g,"."],[HE,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[HE,"Mac"],[GE,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[HE,GE]]},e}(),ZE=function(){function e(){}return e.generate=function(e,t){var n,r,i;i=void 0===e?{navigator:{userAgent:"",vendor:"",languages:[]},screen:{width:"",height:""}}:e;var o=KE.parse(i.navigator.userAgent).browser,s="";try{s=null!==(r=null===(n=screen.orientation.type.match(/\b(landscape|portrait)\b/))||void 0===n?void 0:n[0])&&void 0!==r?r:""}catch(e){}return a({browserName:o.name||"",browserMajorVersion:o.major||"",browserVersion:o.version||"",orientation:s,userAgent:i.navigator.userAgent||""},t.toProperties())},e}(),JE=function(){function e(){}return e.generate=function(e){var t,n,r,i,o,s,a;a=void 0===e?{navigator:{userAgent:"",vendor:"",languages:[]},screen:{width:"",height:""}}:e;var l=KE.parse(a.navigator.userAgent),c=l.os,u=l.device,h=a.screen,d=(null===(t=a.navigator.languages)||void 0===t?void 0:t[0])||"",p=d.split("-")[0],f=(null!==(n=u.type)&&void 0!==n?n:"pc").replace(/\b(mobile|smarttv)\b/g,function(e,t){return"mobile"===t?"phone":"smarttv"===t?"tv":e}),m=c.name||"",g="";try{m=null!==(i=null===(r=m.match(/\b(Mac|Windows|Linux|Android|iOS)\b/))||void 0===r?void 0:r[0])&&void 0!==i?i:m,orientation=null!==(s=null===(o=h.orientation.type.match(/\b(landscape|portrait)\b/))||void 0===o?void 0:o[0])&&void 0!==s?s:"",g=Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(e){}return{osName:m,osVersion:c.version||"",deviceModel:u.model||"",deviceType:f,deviceVendor:u.vendor||"",deviceBrand:u.vendor||"",screenWidth:h.width||"",screenHeight:h.height||"",locale:d,language:p,timeZone:g}},e}(),XE=function(){function e(){}return e.generate=function(e,t){var n=null!=t?t:nn.createWithCurrentPage();return a(a({platform:"Web"},ZE.generate(e,n)),JE.generate(e))},e}(),QE=function(){function e(e,t){this.previous=e,this.current=t}return e.prototype.map=function(t){return new e(t(this.previous),t(this.current))},e}(),eT=function(){function e(e){this.events=e}return e.empty=function(){return this.from([])},e.from=function(t){return new e(t)},e.fromDto=function(e){return this.from(e.events.map(function(e){return at.fromJson(e)}))},Object.defineProperty(e.prototype,"rawEvents",{get:function(){return this.events},enumerable:!1,configurable:!0}),e}(),tT=function(){function e(e,t,n,r,i,o,s,a,l){this.hackleDeviceId=e,this.storage=t,this.userTargetFetcher=n,this.userCohortFetcher=r,this.campaignParser=i,this.pageManager=o,this.clock=s,this.userListeners=[],this.defaultUser={id:this.hackleDeviceId,deviceId:this.hackleDeviceId},this.context=this.initContext(a,l),this.storage.saveUser(this.context.user)}return e.prototype.initContext=function(e,t){var n,r=null!==(n=null!=t?t:e)&&void 0!==n?n:this.defaultUser;return rT.of(iT(r,this.hackleDeviceId),jE.empty(),eT.empty())},e.prototype.addListener=function(e){this.userListeners.push(e)},Object.defineProperty(e.prototype,"currentUser",{get:function(){return this.context.user},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){var t=this.resolveContext(e);return this.hackleUser(t)},e.prototype.resolveContext=function(e){return void 0===e?this.context:"string"==typeof e?this.updateUser({id:e}).current:this.updateUser(e).current},e.prototype.toHackleUser=function(e){var t=this.context.with(e);return this.hackleUser(t)},e.prototype.hackleUser=function(e){var t=(new H).addIdentifiers(e.user.identifiers||{}).add(B.ID,e.user.id||this.hackleDeviceId).add(B.DEVICE,e.user.deviceId||this.hackleDeviceId).add(B.HACKLE_DEVICE,this.hackleDeviceId);h.isNotNullOrUndefined(e.user.userId)&&t.add(B.USER,e.user.userId);var n=t.build(),r=this.campaignParser.parse();return{identifiers:n,properties:a(a({},r),e.user.properties),hackleProperties:this.hackleProperties(),cohorts:e.cohorts.rawCohorts,targetEvents:e.targetEvents.rawEvents}},e.prototype.hackleProperties=function(){return"undefined"!=typeof window?XE.generate(window,this.pageManager.currentPage):{}},e.prototype.setUser=function(e){return this.updateUser(e).map(function(e){return e.user})},e.prototype.setUserId=function(e){var t=a(a({},this.context.user),{userId:e});return this.setUser(t)},e.prototype.setDeviceId=function(e){var t=a(a({},this.context.user),{deviceId:e});return this.setUser(t)},e.prototype.updateUserProperties=function(e){return this.operateProperties(e).map(function(e){return e.user})},e.prototype.resetUser=function(){var e=this;return this.updateContext(function(){return e.defaultUser}).map(function(e){return e.user})},e.prototype.changeUser=function(e,t,n){this.userListeners.forEach(function(r){r.onUserUpdated(e,t,n)})},e.prototype.saveUser=function(e){this.storage.saveUser(e)},e.prototype.updateContext=function(e){var t=this.context,n=t.user,r=e(n),i=this.context.with(r);return this.context=i,UE(n,r)||(this.changeUser(n,r,this.clock.currentMillis()),this.saveUser(r)),new QE(t,i)},e.prototype.updateUser=function(e){var t=this;return this.updateContext(function(n){return r=n,i=iT(e,t.hackleDeviceId),UE(r,i)?a(a({},i),{properties:a(a({},r.properties),i.properties)}):i;var r,i})},e.prototype.operateProperties=function(e){return this.updateContext(function(t){var n,r=null!==(n=t.properties)&&void 0!==n?n:{},i=e.operate(new Map(Object.entries(r)));return a(a({},t),{properties:h.fromMap(i)})})},e.prototype.sync=function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.syncCohort(),this.syncUserTarget()])];case 1:return e.sent(),[2]}})})},e.prototype.syncIfNeeded=function(e){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.hasNewIdentifiers(e.previous,e.current)?[4,this.syncCohort()]:[3,2];case 1:t.sent(),t.label=2;case 2:return UE(e.previous,e.current)?[3,4]:[4,this.syncUserTarget()];case 3:t.sent(),t.label=4;case 4:return[2]}})})},e.prototype.syncCohort=function(){return l(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userCohortFetcher.fetch(this.currentUser)];case 1:return e=n.sent(),this.context=this.context.update(e,this.context.targetEvents),[3,3];case 2:return t=n.sent(),f.log.error("Failed to sync cohorts: ".concat(t)),[3,3];case 3:return[2]}})})},e.prototype.syncUserTarget=function(){return l(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userTargetFetcher.fetch(this.currentUser)];case 1:return e=n.sent(),this.context=this.context.update(this.context.cohorts,e),[3,3];case 2:return t=n.sent(),f.log.error("Failed to sync userTargets: ".concat(t)),[3,3];case 3:return[2]}})})},e.prototype.hasNewIdentifiers=function(e,t){var n=V(e),r=V(t);return Object.entries(r).some(function(e){var t=e[0],r=e[1];return n[t]!==r})},e.prototype.close=function(){return l(this,void 0,void 0,function(){return c(this,function(e){return[2]})})},e}(),nT=function(){function e(e){this.storage=e}return e.prototype.getUser=function(){var e=this.deviceId||void 0,t=this.userId||void 0;return void 0!==e||void 0!==t?{deviceId:e,userId:t}:null},e.prototype.saveUser=function(e){this.setDeviceId(e.deviceId||null),this.setUserId(e.userId||null)},Object.defineProperty(e.prototype,"deviceId",{get:function(){return this.storage.getItem("_hackle_did")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this.storage.getItem("_hackle_uid")},enumerable:!1,configurable:!0}),e.prototype.setDeviceId=function(e){this.setId("_hackle_did",e)},e.prototype.setUserId=function(e){this.setId("_hackle_uid",e)},e.prototype.setId=function(e,t){h.isNotNullOrUndefined(t)?this.storage.setItem(e,t):this.storage.removeItem(e)},e}(),rT=function(){function e(e,t,n){this.user=e,this.cohorts=t,this.targetEvents=n}return e.of=function(t,n,r){return new e(t,n.filterBy(t),r)},e.prototype.with=function(t){return e.of(t,this.cohorts.filterBy(t),this.targetEvents)},e.prototype.update=function(t,n){var r=t.filterBy(this.user),i=this.cohorts.toBuilder().putAll(r).build();return e.of(this.user,i,n)},e}(),iT=function(e,t){return a(a({},e),{id:e.id||t,deviceId:e.deviceId||t})},oT=function(){function e(e,t){this.sessionTimeoutMillis=e,this.storage=t,this.sessionListeners=[],this._currentSessionId=null,this._lastEventTime=null,this.loadSession(),this.loadLastEventTime()}return Object.defineProperty(e.prototype,"currentSessionId",{get:function(){return this._currentSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){var t;return null!==(t=this._currentSessionId)&&void 0!==t?t:e.EMPTY_SESSION_ID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},enumerable:!1,configurable:!0}),e.prototype.addListener=function(e){this.sessionListeners.push(e)},e.prototype.startNewSession=function(e,t,n){return e&&this.endSession(e),this.newSession(t,n)},e.prototype.startNewSessionIfNeeded=function(e,t){var n=this._lastEventTime;return null===n?this.startNewSession(e,e,t):null!==this._currentSessionId&&t-n<this.sessionTimeoutMillis?(this.updateLastEventTime(t),this._currentSessionId):this.startNewSession(e,e,t)},e.prototype.updateLastEventTime=function(e){this._lastEventTime=e,this.storage.setItem("_hackle_last_event_ts","".concat(e))},e.prototype.endSession=function(e){var t=this._currentSessionId,n=this._lastEventTime;null!==t&&null!==n&&this.sessionListeners.forEach(function(r){return r.onSessionEnded(t,e,n)})},e.prototype.newSession=function(e,t){var n=function(e){return"".concat(e,".").concat(r.v4().slice(0,8))}(t);return this.saveSession(n),this.updateLastEventTime(t),this.sessionListeners.forEach(function(r){r.onSessionStarted(n,e,t)}),n},e.prototype.saveSession=function(e){this._currentSessionId=e,this.storage.setItem("_hackle_session_id",e)},e.prototype.loadSession=function(){this._currentSessionId=this.storage.getItem("_hackle_session_id")},e.prototype.loadLastEventTime=function(){var e=this.storage.getItem("_hackle_last_event_ts");if(null!==e){var t=Number.parseFloat(e);t>0&&(this._lastEventTime=t)}},e.prototype.onUserUpdated=function(e,t,n){this.endSession(e),this.newSession(t,n)},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"hidden":case"pagehide":return this.updateLastEventTime(t);case"blur":case"focus":case"locationChange":case"visible":case"pageshow":return}},e.EMPTY_SESSION_ID="0.ffffffff",e}(),sT=function(){function e(){this.storage=window.localStorage}return e.prototype.getItem=function(e){var t,n;return null!==(n=null===(t=this.storage)||void 0===t?void 0:t.getItem(e))&&void 0!==n?n:null},e.prototype.removeItem=function(e){var t;null===(t=this.storage)||void 0===t||t.removeItem(e)},e.prototype.setItem=function(e,t){var n;null===(n=this.storage)||void 0===n||n.setItem(e,t)},e.prototype.clear=function(){var e;null===(e=this.storage)||void 0===e||e.clear()},e}(),aT=function(){function e(e,t){this.delegate=e,this.transform=t}return e.postfix=function(t,n){return new e(t,function(e){return"".concat(e).concat(n)})},e.prefix=function(t,n){return new e(t,function(e){return"".concat(n).concat(e)})},e.prototype.getItem=function(e){return this.delegate.getItem(this.transform(e))},e.prototype.removeItem=function(e){this.delegate.removeItem(this.transform(e))},e.prototype.setItem=function(e,t){this.delegate.setItem(this.transform(e),t)},e}(),lT=function(){function e(e,t,n){void 0===n&&(n=4096);var r=this;this.delegate=e,this.listKey=t,this.encodedListCharLen=6,this.resolveMaxLength=function(e){var t=e-r.encodedListCharLen;return t<0?0:t},this.maxLength=this.resolveMaxLength(n)}return e.prototype.isEqualItem=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.prototype.getRemainListSize=function(){try{return this.maxLength-JSON.stringify(this.getList()).length}catch(e){return 0}},e.prototype.isAddableItem=function(e){try{return this.getRemainListSize()>JSON.stringify(e).length}catch(e){return!1}},e.prototype.getVictimIndex=function(e){var t=this.getRemainListSize();try{var n=JSON.stringify(e),r=this.getList(),i=0;return r.findIndex(function(e){return(i+=JSON.stringify(e).length)+t>=n.length})}catch(e){return-1}},e.prototype.getList=function(){try{var e=this.delegate.getItem(this.listKey);if(!e)return[];var t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}},e.prototype.entries=function(){return this.getList().flatMap(Object.entries)},e.prototype.setItem=function(e,t){var n;try{this.removeItem(e);var r=this.getList(),i=((n={})[e]=t,n);if(!this.isAddableItem(i)){var o=this.getVictimIndex(i);if(o<0)return;r=r.slice(o+1)}var s=JSON.stringify(r.concat(i));this.delegate.setItem(this.listKey,s)}catch(e){}},e.prototype.getItem=function(e){var t=this,n=this.getList().find(function(n){return t.isEqualItem(n,e)});if(n&&n[e])return n[e]},e.prototype.removeItem=function(e){var t=this,n=this.getList();try{var r=n.filter(function(n){return!t.isEqualItem(n,e)}),i=JSON.stringify(r);this.delegate.setItem(this.listKey,i)}catch(e){}},e.prototype.clear=function(){this.delegate.removeItem(this.listKey)},e}(),cT=function(){function e(e,t,n,r){this.core=e,this.userManager=t,this.abOverrideStorage=n,this.ffOverrideStorage=r}return e.prototype.currentUser=function(){return this.userManager.resolve()},e.prototype.getAbTestDecisions=function(){return this.core.experiments(this.currentUser()).entries()},e.prototype.getAbTestOverrides=function(){return this.abOverrideStorage.getAll()},e.prototype.setAbTestOverride=function(e,t){this.abOverrideStorage.set(e,t),this.increment("AB_TEST","set")},e.prototype.resetAbTestOverride=function(e){this.abOverrideStorage.remove(e),this.increment("AB_TEST","reset")},e.prototype.resetAllAbTestOverride=function(){this.abOverrideStorage.clear(),this.increment("AB_TEST","reset.all")},e.prototype.getFeatureFlagDecisions=function(){return this.core.featureFlags(this.currentUser()).entries()},e.prototype.getFeatureFlagOverrides=function(){return this.ffOverrideStorage.getAll()},e.prototype.setFeatureFlagOverride=function(e,t){this.ffOverrideStorage.set(e,t),this.increment("FEATURE_FLAG","set")},e.prototype.resetFeatureFlagOverride=function(e){this.ffOverrideStorage.remove(e),this.increment("FEATURE_FLAG","reset")},e.prototype.resetAllFeatureFlagOverride=function(){this.ffOverrideStorage.clear(),this.increment("FEATURE_FLAG","reset.all")},e.prototype.increment=function(e,t){At.counter("experiment.manual.override",{"experiment.type":e,operation:t}).increment()},e}(),uT=function(){function e(){}return e.serverFetch=function(e,t){return"".concat(e,"/api/v2/workspaces/").concat(t,"/config")},e.clientFetch=function(e,t){return"".concat(e,"/api/v2/workspaces/").concat(t,"/config")},e.userCohorts=function(e){return"".concat(e,"/api/v1/cohorts")},e.serverDispatch=function(e){return"".concat(e,"/api/v2/events")},e.clientDispatch=function(e){return"".concat(e,"/api/v2/w/events")},e.beaconDispatch=function(e,t){return"".concat(e,"/api/v2/w/").concat(t,"/events")},e.inAppMessageRenderer=function(e,t){return"".concat(e,"/sdk/iam-renderer/").concat(t,"/iam-renderer.js")},e.monitoring=function(e){return"".concat(e,"/metrics")},e.userTargets=function(e){return"".concat(e,"/api/v1/user-targets")},e}(),hT=function(){function e(e){this.storage=e}return e.prototype.exist=function(e,t){var n=this.key(e),r=this.storage.getItem(n);if(h.isNullOrUndefined(r))return!1;var i=Number.parseInt(r,10);return Number.isNaN(i)?(this.storage.removeItem(n),!1):t<=i||(this.storage.removeItem(n),!1)},e.prototype.put=function(e,t){this.storage.setItem(this.key(e),"".concat(t))},e.prototype.key=function(e){return"".concat(e.key)},e}(),dT=function(){function e(e){this.handlers=e}return e.prototype.get=function(e){return this.handlers.find(function(t){return t.supports(e)})},e}(),pT=function(){function e(){}return e.prototype.handle=function(e,t){e.close()},e.prototype.supports=function(e){return"CLOSE"===e.type},e}(),fT=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(e){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"WEB_LINK"===e.type},e}(),mT=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){e.close();try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(e){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_AND_CLOSE"===e.type},e}(),gT=function(){function e(e,t){this.storage=e,this.clock=t}return e.prototype.handle=function(e,t){if(e.context.decisionReason!==D.OVERRIDDEN){var n=this.clock.currentMillis()+864e5;this.storage.put(e.context.inAppMessage,n),e.close()}else e.close()},e.prototype.supports=function(e){return"HIDDEN"===e.type},e}(),yT=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(e){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_NEW_WINDOW"===e.type},e}(),vT=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){e.close();try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(e){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_NEW_WINDOW_AND_CLOSE"===e.type},e}(),_T=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(e){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_NEW_TAB"===e.type},e}(),bT=function(){function e(e){this.urlHandler=e}return e.prototype.handle=function(e,t){e.close();try{if(!t.value)return;this.urlHandler.open(new URL(t.value))}catch(e){f.log.error("Invalid url: ".concat(t.value))}},e.prototype.supports=function(e){return"LINK_NEW_TAB_AND_CLOSE"===e.type},e}(),wT=function(){function e(e){this.core=e}return e.prototype.track=function(e,t,n){var r=this.createTrackEvent(t,e);this.core.track(r,e.user,n)},e.prototype.commonProperties=function(e){return a(a({},e.properties),{in_app_message_id:e.inAppMessage.id,in_app_message_key:e.inAppMessage.key,in_app_message_display_type:e.message.layout.displayType,decision_reason:String(e.decisionReason)})},e.prototype.createTrackEvent=function(e,t){var n,r,i,o;switch(e.type){case"IMPRESSION":return{key:"$in_app_impression",properties:a(a({},this.commonProperties(t)),{title_text:null===(r=null===(n=t.message.text)||void 0===n?void 0:n.title)||void 0===r?void 0:r.text,body_text:null===(o=null===(i=t.message.text)||void 0===i?void 0:i.body)||void 0===o?void 0:o.text,button_text:t.message.buttons.map(function(e){return e.text}),image_url:t.message.images.map(function(e){return e.imagePath})})};case"CLOSE":return{key:"$in_app_close",properties:this.commonProperties(t)};case"ACTION":var s=e;return{key:"$in_app_action",properties:a(a({},this.commonProperties(t)),{action_type:s.action.type,action_area:s.area,action_value:s.action.value,button_text:s.buttonText,image_url:s.imageUrl,image_order:s.imageOrder})};case"IMAGE_IMPRESSION":var l=e;return{key:"$in_app_image_impression",properties:a(a({},this.commonProperties(t)),{image_url:l.imageUrl,image_order:l.imageOrder})}}},e}(),xT=function(){function e(e,t,n,r){void 0===r&&(r=null),this.messageViewFactory=e,this.eventHandler=t,this.interactionHandlerFactory=n,this.inAppMessageListener=r,this.currentMessageView=null,this.opening=!1}return e.prototype.setListener=function(e){this.inAppMessageListener=e},e.prototype.present=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:if(this.currentMessageView)return[2];if(this.opening)return[2];this.opening=!0,t=null,n.label=1;case 1:return n.trys.push([1,3,4,5]),null===(t=this.messageViewFactory.create(e,this))?[2]:(this.currentMessageView=t,[4,t.open()]);case 2:return n.sent(),[3,5];case 3:return n.sent(),null==t||t.close(),[3,5];case 4:return this.opening=!1,[7];case 5:return[2]}})})},e}(),ST=function(){function e(t,n,r,i,o,s){var a=this;this.scriptLoader=t,this.context=n,this.ui=r,this.renderTypeResolver=i,this.status=o,this.lifecycleRegistry=s,this.container=null,this.renderer=null,this.resolveLifecycleEnd=function(e){if(e instanceof CustomEvent&&function(e){return"string"==typeof e.detail.id&&["OPEN","CLOSE"].includes(e.detail.type)}(e)){var t=e.detail,n=t.id,r=t.type,i=a.lifecycleRegistry.getAndRemove(r,n);null==i||i()}},this.handleInAppMessageInteraction=function(t){if(t instanceof CustomEvent&&t.type===e.HACKLE_IAM_INTERACTION_EVENT_TYPE){var n=t.detail;a.handleInteraction(n)}}}return e.prototype.open=function(){var t,n;return l(this,void 0,void 0,function(){var r,i,o,s,a=this;return c(this,function(l){switch(l.label){case 0:if(!this.status.canOpen())return f.log.debug("InAppMessage is already opened. (key=".concat(this.context.inAppMessage.key,")")),[2];r=on.toPublic(this.context.inAppMessage),l.label=1;case 1:return l.trys.push([1,4,,5]),null===(n=null===(t=this.ui.inAppMessageListener)||void 0===t?void 0:t.beforeInAppMessageOpen)||void 0===n||n.call(t,r),this.status.current="OPENING",window.addEventListener(e.HACKLE_IAM_INTERACTION_EVENT_TYPE,this.handleInAppMessageInteraction),window.addEventListener(e.HACKLE_IAM_LIFECYCLE_END_EVENT_TYPE,this.resolveLifecycleEnd),[4,this.scriptLoader.load()];case 2:return l.sent(),(i=this.addContainer()).style.display="none",i.classList.add("".concat(e.CONTAINER_CLASS_NAME,"--loading")),o=window.HackleInAppMessageRenderer,this.renderer=new o.HackleInAppMessageRenderer(i),s=this.renderTypeResolver.resolve(this.context),[4,this.renderer.render({messageId:this.context.inAppMessage.id,message:this.context.message.toJson(),renderType:s})];case 3:return l.sent(),i.classList.remove("".concat(e.CONTAINER_CLASS_NAME,"--loading")),i.style.display="block",this.handleInAppMessageLifecycle("OPEN",function(){var e,t;a.handleEvent({type:"IMPRESSION"}),a.status.current="OPENED",null===(t=null===(e=a.ui.inAppMessageListener)||void 0===e?void 0:e.afterInAppMessageOpen)||void 0===t||t.call(e,r)},function(){f.log.warn("Failed to open inAppMessage with [Timeout expired.]"),a.destroy()}),[3,5];case 4:return l.sent(),this.destroy(),[3,5];case 5:return[2]}})})},e.prototype.close=function(){var e,t,n=this;if(this.status.canClose()){var r=on.toPublic(this.context.inAppMessage);null===(t=null===(e=this.ui.inAppMessageListener)||void 0===e?void 0:e.beforeInAppMessageClose)||void 0===t||t.call(e,r),this.status.current="CLOSING",this.handleInAppMessageLifecycle("CLOSE",function(){var e,t;n.handleEvent({type:"CLOSE"}),n.destroy(),null===(t=null===(e=n.ui.inAppMessageListener)||void 0===e?void 0:e.afterInAppMessageClose)||void 0===t||t.call(e,r)},function(){var e,t;f.log.warn("Failed to close inAppMessage with [Timeout expired.]"),n.destroy(),null===(t=null===(e=n.ui.inAppMessageListener)||void 0===e?void 0:e.afterInAppMessageClose)||void 0===t||t.call(e,r)})}else f.log.debug("InAppMessage is already closed. (key=".concat(this.context.inAppMessage.key,")"))},e.prototype.handleInAppMessageLifecycle=function(t,n,r){var i=this,o=this.lifecycleRegistry.register(t,n);window.dispatchEvent(new CustomEvent(e.HACKLE_IAM_LIFECYCLE_START_EVENT_TYPE,{detail:{type:t,id:o}})),setTimeout(function(){void 0===i.lifecycleRegistry.getAndRemove(t,o)||r()},e.LIFE_CYCLE_EVENT_LISTEN_TIMEOUT)},e.prototype.destroy=function(){var t;window.removeEventListener(e.HACKLE_IAM_INTERACTION_EVENT_TYPE,this.handleInAppMessageInteraction),window.removeEventListener(e.HACKLE_IAM_LIFECYCLE_END_EVENT_TYPE,this.resolveLifecycleEnd),null===(t=this.renderer)||void 0===t||t.destroy(),this.renderer=null,this.removeContainer(),this.ui.currentMessageView=null,this.status.current="CLOSED"},e.prototype.addContainer=function(){if(!this.container){var t=document.createElement("div");t.classList.add(e.CONTAINER_CLASS_NAME),this.container=t}return this.container.parentNode||document.body.appendChild(this.container),this.container},e.prototype.removeContainer=function(){var e;this.container&&(null===(e=this.container.parentNode)||void 0===e||e.removeChild(this.container),this.container=null)},e.prototype.handleInteraction=function(e){var t=this.ui.interactionHandlerFactory.get(e);t&&t.handle(this,e)},e.prototype.handleEvent=function(e){this.ui.eventHandler.handle(this,e)},e.HACKLE_IAM_INTERACTION_EVENT_TYPE="hackle-iam-interaction",e.HACKLE_IAM_LIFECYCLE_START_EVENT_TYPE="hackle-iam-lifecycle-start",e.HACKLE_IAM_LIFECYCLE_END_EVENT_TYPE="hackle-iam-lifecycle-end",e.CONTAINER_CLASS_NAME="hackle-iam",e.LIFE_CYCLE_EVENT_LISTEN_TIMEOUT=5e3,e}(),ET=function(){function e(){this.mobileOSRegex=/(iOS|Android|iPad|iPhone)/g,this.mobileDeviceRegex=/(mobile|phone|tablet)/g}return e.prototype.isMobileOS=function(e){var t=e.user.hackleProperties.osName;return"string"==typeof t&&Boolean(t.match(this.mobileOSRegex))},e.prototype.isMobileDeviceType=function(e){var t=e.user.hackleProperties.deviceType;return"string"==typeof t&&Boolean(t.match(this.mobileDeviceRegex))},e.prototype.resolve=function(e){return this.isMobileOS(e)||this.isMobileDeviceType(e)?"mobile":"pc"},e}(),TT=function(){function e(e){void 0===e&&(e="CLOSED"),this.current=e}return e.prototype.canOpen=function(){return"OPENED"!==this.current&&"OPENING"!==this.current},e.prototype.canClose=function(){return"CLOSED"!==this.current&&"CLOSING"!==this.current},e}(),MT=function(){function e(){this.record={}}return e.prototype.resolveKey=function(e,t){return"".concat(e,"_").concat(t)},e.prototype.register=function(e,t){var n=r.v4(),i=this.resolveKey(e,n);return this.record[i]=t,n},e.prototype.getAndRemove=function(e,t){var n=this.resolveKey(e,t),r=this.record,i=n,o=r[i],s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["symbol"==typeof i?i:i+""]);return this.record=s,o},e}(),AT=function(){function e(e){this.scriptLoader=e}return e.create=function(t){return new e(t)},e.prototype.create=function(e,t){var n=new ET,r=new TT,i=new MT;switch(e.message.layout.displayType){case"MODAL":case"BANNER":case"BOTTOM_SHEET":return new ST(this.scriptLoader,e,t,n,r,i);case"NONE":return null}},e}(),kT=function(){function e(e){this.scriptUrl=e}return e.prototype.load=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return window.HackleInAppMessageRenderer?[2]:(e=this.createScript(),document.head.appendChild(e),[4,this.waitForLoad(e)]);case 1:return[2,t.sent()]}})})},e.prototype.createScript=function(){var e=document.createElement("script");return e.type="text/javascript",e.async=!0,e.src=this.scriptUrl,e},e.prototype.waitForLoad=function(e){return new Promise(function(t,n){var r=function(){o(),t(e)},i=function(e){o(),n(e.message)},o=function(){e.removeEventListener("error",i),e.removeEventListener("load",r)};e.addEventListener("load",r),e.addEventListener("error",i)})},e}(),CT=function(){function e(e){this.targetMatcher=e}return e.prototype.matches=function(e,t,n){var r=this;return t.eventTrigger.rules.some(function(i){return r.ruleMatches(e,n,t,i)})},e.prototype.ruleMatches=function(e,t,n,r){if(t.event.key!==r.eventKey)return!1;var i=IT.of(e,t,n);return this.targetMatcher.anyMatches(i,vS.create(),r.targets)},e}(),IT=function(){function e(e,t,n,r){this.key=e,this.workspace=t,this.user=n,this.event=r}return e.of=function(t,n,r){return new e(new yS("IN_APP_MESSAGE",r.id),t,n.user,n)},e}(),PT=function(){function e(e){this.storage=e}return e.prototype.get=function(e){var t=this.storage.getItem(e.id.toString());return h.isNullOrUndefined(t)?[]:JSON.parse(t)},e.prototype.set=function(e,t){this.storage.setItem(e.id.toString(),JSON.stringify(t))},e}(),OT=function(){function e(e){this.processors=e}return e.prototype.get=function(e){return this.processors.find(function(t){return t.supports(e)})},e}(),RT=function(){function e(){}return e.prototype.process=function(e,t,n){},e.prototype.supports=function(e){return"IMPRESSION"===e.type},e}(),DT=function(){function e(){}return e.prototype.process=function(e,t,n){},e.prototype.supports=function(e){return"CLOSE"===e.type},e}(),LT=function(){function e(e){this.actionHandlerFactory=e}return e.prototype.process=function(e,t,n){var r,i,o=this.actionHandlerFactory.get(t.action);!(null===(i=null===(r=e.ui.inAppMessageListener)||void 0===r?void 0:r.onInAppMessageClick)||void 0===i?void 0:i.call(r,on.toPublic(e.context.inAppMessage),sn.toPublic(e),rt.fromAction(t.action)))&&e.status.canClose()&&(null==o||o.handle(e,t.action))},e.prototype.supports=function(e){return"ACTION"===e.type},e}(),NT=function(){function e(e,t,n){this.clock=e,this.eventTracker=t,this.eventProcessorFactory=n}return e.prototype.handle=function(e,t){var n=this.clock.currentMillis();this.eventTracker.track(e.context,t,n);var r=this.eventProcessorFactory.get(t);r&&r.process(e,t,n)},e}(),FT=function(){function e(e){this.ruleMatcher=e}return e.prototype.matches=function(e,t,n){return this.ruleMatcher.matches(e,t,n)},e}(),zT=function(){function e(e){this.handlers=e}return e.prototype.get=function(e){return this.handlers.find(function(t){return t.supports(e)})},e}(),UT=function(){function e(){}return e.prototype.handle=function(e,t){e.close()},e.prototype.supports=function(e){return"CLOSE"===e.type},e}(),jT=function(){function e(e){this.eventHandler=e}return e.prototype.handle=function(e,t){var n=this.eventOrNull(t);n&&this.eventHandler.handle(e,n)},e.prototype.eventOrNull=function(e){var t=Qe.fromJson(e.action);return t?{type:"ACTION",action:t,area:e.area,buttonText:e.buttonText,imageUrl:e.imageUrl,imageOrder:e.imageOrder}:null},e.prototype.supports=function(e){return"ACTION"===e.type},e}(),BT=function(){function e(e){this.eventHandler=e}return e.prototype.handle=function(e,t){var n={type:"IMAGE_IMPRESSION",imageUrl:t.imageUrl,imageOrder:t.imageOrder};this.eventHandler.handle(e,n)},e.prototype.supports=function(e){return"IMAGE_IMPRESSION"===e.type},e}(),VT=function(){function e(){}return e.prototype.open=function(e){window.location.href=e.href},e}(),HT=function(){function e(){}return e.prototype.open=function(e){window.open(e.href,"Hackle","resizable:true")},e}(),$T=function(){function e(){}return e.prototype.open=function(e){window.open(e.href)},e}(),YT=function(){function e(){}return e.prototype.open=function(e){window.location.replace(e)},e}(),GT={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,gclid:void 0,fbclid:void 0},qT={current:void 0,referrer:void 0},WT=function(e,t){return Object.keys(GT).every(function(n){return e[n]===t[n]})},KT=function(){function e(e,t,n,r){this.storage=e,this.parser=t,this.core=n,this.userManager=r}return e.prototype.startNewCampaign=function(e,t,n){for(var r=a(a({},GT),t),i=new Qt,o=0,s=Object.entries(r);o<s.length;o++){var l=s[o],c=l[0],u=l[1];u?i.set(c,u):i.unset(c)}var h=i.build(),d=h.toEvent(),p=this.userManager.toHackleUser(e);this.core.track(d,p,n),this.userManager.updateUserProperties(h)},e.prototype.startNewCampaignIfNeeded=function(e,t){var n=this.storage.get(),r=this.parser.parse();(function(e,t,n){return null===e||(!WT(t,GT)||n.current!==n.referrer)&&!WT(e,t)})(n,r,this.parser.parseDomain())&&(this.storage.set(r),this.startNewCampaign(e,r,t))},e.prototype.onSessionEnded=function(e,t,n){},e.prototype.onSessionStarted=function(e,t,n){this.startNewCampaignIfNeeded(t,n)},e}(),ZT=function(){function e(e){this.storage=e}return e.prototype.get=function(){var e=this.storage.getItem("_hackle_mkt");return e?JSON.parse(e):null},e.prototype.set=function(e){this.storage.setItem("_hackle_mkt",JSON.stringify(e))},e}(),JT=function(){function e(e){this.search=e}return e.prototype.getQueryParam=function(e){return this.getQueryParams(function(){return!0})[e]||""},e.prototype.getQueryParams=function(e){for(var t={},n=0,r=this.search.substring(1).split("&");n<r.length;n++){var i=r[n].split("="),o=i[0],s=i[1];if(!e||e(o,s)){var a=hn.tryDecodeURIComponent(s);a&&(t[o]=a)}}return t},e}(),XT=function(){function e(){}return e.extractDomain=function(e){var t=this.DOMAIN_MATCH_REGEX,n=e.split("."),r=n[n.length-1];(r.length>4||"com"===r||"org"===r)&&(t=this.SIMPLE_DOMAIN_MATCH_REGEX);var i=e.match(t);return i?i[0]:e},e.DOMAIN_MATCH_REGEX=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,e.SIMPLE_DOMAIN_MATCH_REGEX=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,e}(),QT=function(){function e(e){this.pageManager=e}return e.prototype.parse=function(e){var t=this.params(e);return this.resolve(t)},e.prototype.params=function(t){var n=h.isNotNullOrUndefined(t)?t:this.pageManager.currentPage.queryParameter;return new JT(n).getQueryParams(e.CAMPAIGN_QUERY_CONDITION)},e.prototype.resolve=function(e){return{utm_campaign:e[eM],utm_content:e[tM],utm_id:e[nM],utm_medium:e[rM],utm_source:e[iM],utm_term:e[oM],gclid:e[sM],fbclid:e[aM]}},e.prototype.parseDomain=function(){var e=this;return"undefined"==typeof window?qT:{current:XT.extractDomain(this.pageManager.currentPage.hostname),referrer:function(){var t=e.pageManager.currentPage.referrer;if(t){var n=new URL(t).hostname;return XT.extractDomain(n)}}()}},e.CAMPAIGN_QUERY_CONDITION=function(e,t){return kt.isNotEmptyString(t)},e}(),eM="utm_campaign",tM="utm_content",nM="utm_id",rM="utm_medium",iM="utm_source",oM="utm_term",sM="gclid",aM="fbclid",lM=function(){function e(e,t){var n=this;this.userEventEmitter=e,this.determiner=t,this.onEvent=function(e){var t=n.determiner.determineTargetExposureOrNull(e);t&&n.send(t)},this.initialize()}return e.prototype.initialize=function(){this.userEventEmitter.on("event",this.onEvent)},e.prototype.send=function(e){var t=e.experiment.key,n=e.variationKey,r="HACKLE-EXPERIMENT_".concat(t,"_V").concat(e.experiment.version,"-").concat(n);try{window.gtag("event","experience_impression",{exp_variant_string:r})}catch(e){f.log.error("Unexpected exception while sending an event to Google Analytics with gtag: ".concat(e))}},e}(),cM=function(){function e(e){this.workspaceFetcher=e}return e.prototype.determineTargetExposureOrNull=function(e){var t=this.workspaceFetcher.get();return t&&t.getAttributes().integration_ga_experiment&&oS.isExposureEvent(e)?"RUNNING"!==e.experiment.status||e.decisionReason!==D.TRAFFIC_ALLOCATED?null:e:null},e}(),uM={user:void 0,debug:!1,log_disabled:!1,automaticPageTracking:!0,pollingIntervalMillis:-1,exposureEventDedupIntervalMillis:6e4,sessionTimeoutMillis:18e5,autoOpenDevTool:!1,sdkUrl:"https://sdk-api.hackle.io",eventUrl:"https://event-api.hackle.io",monitoringUrl:"https://monitoring.hackle.io",cdnUrl:"https://static.hackle.io",sameSiteCookie:"LAX",secureCookie:!1,SDK_NAME_HEADER:"javascript-sdk_browser",SDK_VERSION_HEADER:"11.52.0",IAM_RENDERER_VERSION_HEADER:"0.0.12"},hM=function(){function e(){}return e.config=function(t){return a(a(a({},uM),t),{automaticPageTracking:e.resolveAutomaticPageTracking(t)})},e.resolveAutomaticPageTracking=function(e){return"boolean"!=typeof(null==e?void 0:e.automaticPageTracking)&&"boolean"!=typeof(null==e?void 0:e.auto_track_page_view)?uM.automaticPageTracking:!!e.automaticPageTracking||!!e.auto_track_page_view},e.logging=function(e){f.initCounter(function(e){return At.counter("log",{level:e})}),f.setLogLevel(p.INFO),e.log_disabled?f.setLogLevel(p.DISABLE):e.debug&&f.setLogLevel(p.DEBUG)},e.sdk=function(e,t){return f.log.debug("SDK key: ".concat(e)),e||f.log.error("invalid sdk key: '".concat(e,"' (expected: not null, not undefined and not empty string)")),{key:e,name:t.SDK_NAME_HEADER,version:t.SDK_VERSION_HEADER}},e.isBeaconSupported=function(){var e=!1;return"undefined"!=typeof window&&(e=window&&window.navigator&&!!window.navigator.sendBeacon&&!0)&&f.log.debug("support sendBeacon API"),e},e.pollingIntervalMillis=function(e){return void 0===e.pollingIntervalMillis||"number"!=typeof e.pollingIntervalMillis||e.pollingIntervalMillis<=0?-1:Math.max(e.pollingIntervalMillis,6e4)},e.dedupIntervalMillis=function(e){return void 0===e.exposureEventDedupIntervalMillis||"number"!=typeof e.exposureEventDedupIntervalMillis?6e4:e.exposureEventDedupIntervalMillis<1e3||e.exposureEventDedupIntervalMillis>36e5?(f.log.warn("Exposure event dedup interval is outside allowed range[1_000ms..3_600_000ms]. Setting to default value[1m]."),6e4):e.exposureEventDedupIntervalMillis},e}(),dM=function(){function e(){this.synchronizers=[]}return e.prototype.add=function(e){this.synchronizers.push(e)},e.prototype.sync=function(){return l(this,void 0,void 0,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.synchronizers.map(function(t){return e.safe(t.sync())}))];case 1:return t.sent(),[2]}})})},e.prototype.close=function(){return l(this,void 0,void 0,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.synchronizers.map(function(t){return e.safe(t.close())}))];case 1:return t.sent(),[2]}})})},e.prototype.safe=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),f.log.error("Failed to sync: ".concat(t)),[3,3];case 3:return[2]}})})},e}(),pM=function(){function e(e,t,n){this.delegate=e,this.scheduler=t,this.intervalMillis=n,this.pollingJob=null}return e.prototype.sync=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.delegate.sync()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),f.log.error("Failed to sync: ".concat(e)),[3,3];case 3:return[2]}})})},e.prototype.start=function(){var e=this;-1!==this.intervalMillis&&null===this.pollingJob&&(this.pollingJob=this.scheduler.schedulePeriodically(this.intervalMillis,this.intervalMillis,function(){return e.sync()}))},e.prototype.stop=function(){var e;-1!==this.intervalMillis&&(null===(e=this.pollingJob)||void 0===e||e.cancel(),this.pollingJob=null)},e.prototype.close=function(){return l(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.stop(),[4,this.delegate.close()];case 1:return e.sent(),[2]}})})},e}(),fM=function(){function e(e){this.scheduleType=e}return e.prototype.schedule=function(e,t){var n=new mM(e,t);return n.start(),n},e.prototype.schedulePeriodically=function(e,t,n){var r;switch(this.scheduleType){case"setTimeout":r=new gM(e,t,n);break;case"setInterval":r=new yM(e,t,n)}return r.start(),r},e}(),mM=function(){function e(e,t){this.delayMillis=e,this.task=t,this.timeout=null}return e.prototype.start=function(){var e=this;this.timeout=setTimeout(function(){try{e.task()}catch(e){f.log.error("Failed to run task: ".concat(e))}finally{e.timeout=null}},this.delayMillis)},e.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),gM=function(){function e(e,t,n){this.delayMillis=e,this.intervalMillis=t,this.task=n,this.timeout=null}return e.prototype.start=function(){var e=this;this.timeout=setTimeout(function(){return e.run()},this.delayMillis)},e.prototype.run=function(){var e=this;try{this.task()}catch(e){f.log.error("Failed to run task: ".concat(e))}this.timeout=setTimeout(function(){return e.run()},this.intervalMillis)},e.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),yM=function(){function e(e,t,n){this.delayMillis=e,this.intervalMillis=t,this.task=n,this.timeout=null,this.interval=null}return e.prototype.start=function(){var e=this;this.timeout=setTimeout(function(){e.run(),e.interval=setInterval(function(){return e.run()},e.intervalMillis)},this.delayMillis)},e.prototype.run=function(){try{this.task()}catch(e){f.log.error("Failed to run task: ".concat(e))}},e.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.interval&&(clearInterval(this.interval),this.interval=null)},e}(),vM=function(){function e(e,t){this.url=e,this.transport=t}return e.prototype.fetchIfModified=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return t=this.createRequest(e),[4,this.execute(t)];case 1:return n=r.sent(),[2,this.handleResponse(n)]}})})},e.prototype.createRequest=function(e){var t=Ct.builder().url(this.url).method("GET");return null!==e&&t.addHeader(Ot.IF_MODIFIED_SINCE,e),t.build()},e.prototype.execute=function(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:t=ct.start(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.transport.send(e)];case 2:return n=i.sent(),Nt.record("get.workspace",t,n),[2,n];case 3:throw r=i.sent(),Nt.record("get.workspace",t,null),r;case 4:return[2]}})})},e.prototype.handleResponse=function(e){if(e.isNotModified())return null;if(!e.isSuccessful())throw new Error("Http status code: ".concat(e.statusCode));if(null===e.body)throw new Error("Response body is empty");return{config:JSON.parse(e.body),lastModified:e.headers.get(Ot.LAST_MODIFIED)}},e}(),_M=function(){function e(e,t){this.url=e,this.transport=t}return e.prototype.fetch=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return t=this.createRequest(e),[4,this.execute(t)];case 1:return n=r.sent(),[2,this.handleResponse(n)]}})})},e.prototype.createRequest=function(e){var t={identifiers:V(e)},n=i.Base64.encodeURL(JSON.stringify(t));return Ct.builder().url(this.url).method("GET").addHeader("X-HACKLE-USER",n).build()},e.prototype.execute=function(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:t=ct.start(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.transport.send(e)];case 2:return n=i.sent(),Nt.record("get.cohorts",t,n),[2,n];case 3:throw r=i.sent(),Nt.record("get.cohorts",t,null),r;case 4:return[2]}})})},e.prototype.handleResponse=function(e){if(!e.isSuccessful())throw new Error("Http status code: ".concat(e.statusCode));if(null===e.body)throw new Error("Response body is null");var t=JSON.parse(e.body);return jE.fromDto(t)},e}(),bM=function(){function e(e,t){this.url=e,this.transport=t}return e.prototype.fetch=function(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return t=this.createRequest(e),[4,this.execute(t)];case 1:return n=r.sent(),[2,this.handleResponse(n)]}})})},e.prototype.createRequest=function(e){var t={identifiers:V(e)},n=i.Base64.encodeURL(JSON.stringify(t));return Ct.builder().url(this.url).method("GET").addHeader("X-HACKLE-USER",n).build()},e.prototype.execute=function(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:t=ct.start(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.transport.send(e)];case 2:return n=i.sent(),Nt.record("get.user-targets",t,n),[2,n];case 3:throw r=i.sent(),Nt.record("get.user-targets",t,null),r;case 4:return[2]}})})},e.prototype.handleResponse=function(e){if(!e.isSuccessful())throw new Error("Http status code: ".concat(e.statusCode));if(null===e.body)throw new Error("Response body is null");var t=JSON.parse(e.body);return eT.fromDto(t)},e}(),wM=function(){function e(e,t,n,r,i,o,s,a,l,c,u){this.experiments=d.associateBy(e,function(e){return e.key}),this.splitUrlExperiments=d.associateBy(t,function(e){return e.key}),this.featureFlags=d.associateBy(n,function(e){return e.key}),this.buckets=d.associateBy(r,function(e){return e.id}),this.eventTypes=d.associateBy(i,function(e){return e.key}),this.segments=d.associateBy(o,function(e){return e.key}),this.containers=d.associateBy(s,function(e){return e.id}),this.parameterConfigurations=d.associateBy(a,function(e){return e.id}),this.remoteConfigParameters=d.associateBy(l,function(e){return e.key}),this.inAppMessages=d.associateBy(c,function(e){return e.key}),this.attributes=u}return e.prototype.getExperiments=function(){return Array.from(this.experiments.values())},e.prototype.getSplitUrlExperiments=function(){return Array.from(this.splitUrlExperiments.values())},e.prototype.getFeatureFlags=function(){return Array.from(this.featureFlags.values())},e.prototype.getInAppMessages=function(){return Array.from(this.inAppMessages.values())},e.prototype.getExperimentOrNull=function(e){return this.experiments.get(e)},e.prototype.getFeatureFlagOrNull=function(e){return this.featureFlags.get(e)},e.prototype.getBucketOrNull=function(e){return this.buckets.get(e)},e.prototype.getEventTypeOrNull=function(e){return this.eventTypes.get(e)},e.prototype.getSegmentOrNull=function(e){return this.segments.get(e)},e.prototype.getContainerOrNull=function(e){return this.containers.get(e)},e.prototype.getParameterConfigurationOrNull=function(e){return this.parameterConfigurations.get(e)},e.prototype.getRemoteConfigParameterOrNull=function(e){return this.remoteConfigParameters.get(e)},e.prototype.getInAppMessageOrNull=function(e){return this.inAppMessages.get(e)},e.prototype.getAttributes=function(){return this.attributes},e.from=function(t){var n=t.parameterConfigurations.map(R.fromJson),r=d.mapNotNullOrUndefined(t.experiments,function(e){return N.fromJson("AB_TEST",e,n)}),i=d.mapNotNullOrUndefined(t.experiments,function(e){return N.fromJson("AB_TEST",e,n)}).filter(function(e){return"SPLIT_URL"===e.implementationType}),o=d.mapNotNullOrUndefined(t.featureFlags,function(e){return N.fromJson("FEATURE_FLAG",e,n)}),s=t.buckets.map(z.fromJson),a=t.events.map(j.fromJson),l=d.mapNotNullOrUndefined(t.segments,J.fromJson),c=t.containers.map(X.fromJson),u=d.mapNotNullOrUndefined(t.remoteConfigParameters,ee.fromJson),h=d.mapNotNullOrUndefined(t.inAppMessages,Te.fromJson),p=t.workspace.attributes;return new e(r,i,o,s,a,l,c,n,u,h,p)},e}(),xM=function(){function e(e,t){this.workspaceConfigStorage=e,this.workspaceFetcher=t,this.workspace=null,this.lastModified=null;var n=this.workspaceConfigStorage.get();n&&this.setConfig(n)}return e.prototype.setConfig=function(e){this.setWorkspace(e),this.lastModified=e.lastModified},e.prototype.setWorkspace=function(e){try{this.workspace=wM.from(e.config)}catch(e){f.log.error("Failed to set workspace: ".concat(e))}},e.prototype.get=function(){return this.workspace},e.prototype.sync=function(){return l(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.workspaceFetcher.fetchIfModified(this.lastModified)];case 1:return(e=n.sent())&&(this.setConfig(e),this.workspaceConfigStorage.set(e)),[3,3];case 2:return t=n.sent(),f.log.error("Failed to sync workspace: ".concat(t)),[3,3];case 3:return[2]}})})},e.prototype.close=function(){return l(this,void 0,void 0,function(){return c(this,function(e){return[2]})})},e}(),SM=function(){function e(e,t,n){this.transport=e,this.synchronousTransport=t,this.retryManager=n}return e.prototype.dispatch=function(e,t){var n=e.map(function(e){return e.toDto()});return t?this.dispatchEventsSynchronously(n):this.dispatchEvents(n)},e.prototype.dispatchEventsSynchronously=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,this.retryManager.add(e)];case 1:return n.sent(),[4,this.synchronousTransport.send(e)];case 2:return(t=n.sent()).isSuccessful()||t.isClientError()?[4,this.retryManager.delete(e)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.dispatchEvents=function(e){return l(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,this.transport.send(e)];case 1:return(t=n.sent()).isSuccessful()||t.isClientError()?[2]:[4,this.retryManager.add(e)];case 2:return n.sent(),[2]}})})},e}(),EM=function(){function e(e,t){this.url=e,this.transport=t}return e.prototype.send=function(e){var t=this.createRequest(e);return this.execute(t)},e.prototype.createRequest=function(e){var t=function(e){var t=new Array,n=new Array,r=new Array;return e.forEach(function(e){e instanceof oS?oS.isExposureEvent(e)?t.push(e.toDto()):oS.isTrackEvent(e)?n.push(e.toDto()):oS.isRemoteConfigEvent(e)&&r.push(e.toDto()):oS.isExposureEventDto(e)?t.push(e):oS.isTrackEventDto(e)?n.push(e):oS.isRemoteConfigEventDto(e)&&r.push(e)}),{exposureEvents:t,trackEvents:n,remoteConfigEvents:r}}(e);return Ct.builder().url(this.url).method("POST").addHeader("Content-Type","application/json").body(JSON.stringify(t)).build()},e.prototype.execute=function(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:t=ct.start(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.transport.send(e)];case 2:return n=i.sent(),Nt.record("post.events",t,n),[2,n];case 3:throw r=i.sent(),Nt.record("post.events",t,null),r;case 4:return[2]}})})},e}(),TM=function(){function e(e,t){this.repository=e,this.transport=t}return e.prototype.add=function(e){return this.repository.add(e)},e.prototype.delete=function(e){return this.repository.delete(e)},e.prototype.flush=function(){return l(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return[4,this.repository.read()];case 1:return 0===(e=n.sent()).length?[2]:[4,this.transport.send(e)];case 2:return(t=n.sent()).isSuccessful()||t.isClientError()?[4,this.delete(e)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"visible":case"pageshow":return void this.flush().catch(function(e){return f.log.warn("Failed to flush retry events: ".concat(e))});case"blur":case"focus":case"hidden":case"locationChange":case"pagehide":return}},e}(),MM=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.eventDispatcher=t,o.eventDispatchMaxSize=n,o.flushScheduler=r,o.flushIntervalMillis=i,o.queue=[],o.flushingJob=null,o}return s(t,e),t.prototype.process=function(e){this.enqueue(e),this.emit("event",e)},t.prototype.enqueue=function(e){0===this.queue.length&&this.scheduleFlush(),this.queue.push(e),this.queue.length>=this.eventDispatchMaxSize&&this.flush()},t.prototype.scheduleFlush=function(){var e,t=this;null===(e=this.flushingJob)||void 0===e||e.cancel(),this.flushingJob=this.flushScheduler.schedule(this.flushIntervalMillis,function(){return t.flush()})},t.prototype.flush=function(e){var t;void 0===e&&(e=!1),null===(t=this.flushingJob)||void 0===t||t.cancel(),0!==this.queue.length&&(this.eventDispatcher.dispatch(this.queue,e).catch(function(e){return f.log.warn("Failed to dispatch events: ".concat(e))}),this.queue=[])},t.prototype.close=function(){this.flush(!0)},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]=(this.listeners[e]||[]).concat(t)},e.prototype.off=function(e,t){this.listeners[e]=(this.listeners[e]||[]).filter(function(e){return e!==t})},e.prototype.emit=function(e,t){(this.listeners[e]||[]).forEach(function(e){e(t)})},e}())),AM=function(){function e(e,t,n){this.sdk=e,this.clock=t,this.delegate=n}return e.prototype.send=function(e){var t=e.toBuilder().addHeader("X-HACKLE-SDK-KEY",this.sdk.key).addHeader("X-HACKLE-SDK-NAME",this.sdk.name).addHeader("X-HACKLE-SDK-VERSION",this.sdk.version).addHeader("X-HACKLE-SDK-TIME",this.clock.currentMillis().toString()).build();return this.delegate.send(t)},e}(),kM=function(){function e(){}return e.intercept=function(e,t){return t instanceof AM?t:new AM(e,S.instance,t)},e}(),CM=function(){function e(){}return e.create=function(){return new e},e.prototype.send=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;e.options.timeoutMillis&&(r.timeout=e.options.timeoutMillis),r.open(e.method,e.url),r.onreadystatechange=function(){if(r.readyState===r.DONE)if(0!==r.status){var e=function(e){return new Pt(e.status,e.responseText,function(e){var t=Ot.builder(),n=e.getAllResponseHeaders();if(!n)return t.build();for(var r=0,i=n.split("\r\n");r<i.length;r++){var o=i[r],s=o.indexOf(": ");if(s>0){var a=o.slice(0,s),l=o.slice(s+2);t.add(a,l)}}return t.build()}(e))}(r);t(e)}else n(new Error("Request Error"))},function(e,t){var n=t.headers.raw();for(var r in n)n.hasOwnProperty(r)&&e.setRequestHeader(r,n[r])}(r,e),r.send(e.body)})},e}(),IM=function(){function e(){}return e.create=function(){return new e},e.prototype.send=function(e){var t=this;return new Promise(function(n,r){var i=!1;if("undefined"!=typeof window&&(i=window&&window.navigator&&!!window.navigator.sendBeacon&&!0),!i)throw new Error("BeaconTransport not supported.");var o=t.createBody(e);if(!window.navigator.sendBeacon(e.url,o))throw Error("Failed to sendBeacon");n(Pt.ok())})},e.prototype.createBody=function(e){var t=new URLSearchParams,n=e.headers.get("X-HACKLE-SDK-KEY");n&&t.append("sdkKey",n),t.append("sdkName",e.headers.getOrDefault("X-HACKLE-SDK-NAME","unknown")),t.append("sdkVersion",e.headers.getOrDefault("X-HACKLE-SDK-VERSION","unknown"));var r=e.headers.get("X-HACKLE-SDK-TIME");return r&&t.append("sdkTime",r),e.body&&t.append("data",e.body),t},e}(),PM=function(){function e(e){this.invocationResponseResolver=e}return e.prototype.invoke=function(e){var t=window.prompt(JSON.stringify(e));return this.invocationResponseResolver.resolve(t)},e}(),OM=function(){function e(e){this.invocationResponseResolver=e}return e.prototype.invoke=function(e){var t;if(!(null===(t=window._hackleApp)||void 0===t?void 0:t.invoke))throw new Error("window._hackleApp.invoke is not implemented");var n=window._hackleApp.invoke(JSON.stringify(e));return this.invocationResponseResolver.resolve(n)},e}();!function(e){e.prompt="prompt",e.function="function"}(FE||(FE={}));var RM=function(){function e(){}return e.prototype.getInvocator=function(e,t){return e===FE.prompt?new PM(t):e===FE.function?new OM(t):null},e}(),DM=function(){function e(e,t,n,r){this.determiner=e,this.redirector=t,this.userManager=n,this.core=r}return e.prototype.onPageStarted=function(e,t){var n=this.userManager.resolve(),r=this.determiner.determineOrNull(n);r&&(this.core.flush(!0),this.redirector.redirect(r))},e.prototype.onPageEnded=function(e,t){},e}(),LM=function(e,t,n,r){this.workspace=e,this.experiment=t,this.decision=n,this.user=r},NM=function(){function e(e,t,n,r){this.workspaceFetcher=e,this.splitUrlMatcher=t,this.splitUrlRedirectedCookieStorage=n,this.core=r}return e.prototype.determineOrNull=function(e){if(this.splitUrlRedirectedCookieStorage.alreadyRedirected())return this.splitUrlRedirectedCookieStorage.clear(),null;var t=this.workspaceFetcher.get();if(!t)return null;for(var n=0,r=t.getSplitUrlExperiments();n<r.length;n++){var i=r[n];if(this.splitUrlMatcher.matches(t,i,e)){var o=this.core.experiment(i.key,e,"A");return new LM(t,i,o,e)}}return null},e}(),FM=function(){function e(e){this.targetMatcher=e}return e.prototype.matches=function(e,t,n){if("SPLIT_URL"!==t.implementationType)return!1;if(!t.splitUrlTargets)return!1;var r=t.splitUrlTargets,i=zM.of(e,n);return!(r.excludeTargets.length>0&&this.targetMatcher.anyMatches(i,vS.create(),r.excludeTargets))&&r.includeTargets.length>0&&this.targetMatcher.anyMatches(i,vS.create(),r.includeTargets)},e}(),zM=function(){function e(e,t,n){this.key=e,this.user=t,this.workspace=n}return e.of=function(t,n){return new e(new yS("SPLIT_URL",r.v4()),n,t)},e}(),UM=function(){function e(e,t,n,r){this.urlResolver=e,this.urlHandler=t,this.splitUrlRedirectedCookieStorage=n,this.initializeEventDispatcher=r}return e.prototype.redirect=function(e){var t=this.urlResolver.resolveOrNull(e);t&&(this.initializeEventDispatcher.setNeedDispatch(!1),this.splitUrlRedirectedCookieStorage.setRedirected(!0),this.urlHandler.open(t))},e}(),jM=function(){function e(e){this.campaignParser=e}return e.prototype.resolveOrNull=function(t){try{var n=JSON.parse(t.decision.get(e.SPLIT_URL_CONFIG_KEY,"")),r=ot.fromDto(n);return r.needRedirect?this.resolveByRedirectType(r.redirectType,r.redirectUrl,t):null}catch(e){return null}},e.prototype.resolveByRedirectType=function(e,n,r){return n&&e===t.SplitUrlRedirectType.MANUAL?this.resolveManualRedirectUrl(n,r):null},e.prototype.resolveManualRedirectUrl=function(e,t){var n=hn.tryParse(e);return n?this.decorateCampaign(n,t):null},e.prototype.decorateCampaign=function(e,t){var n=t.user.hackleProperties.queryParameter;return kt.isNotEmptyString(n)?function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],s=i[1];kt.isNotEmptyString(s)&&t.searchParams.set(o,s)}return t}(this.campaignParser.parse(n),e):e},e.SPLIT_URL_CONFIG_KEY="redirectUrl",e}(),BM=function(){function e(e,t,n){this.storage=e,this.cookieKey=t,this.cookieStorageOptions=n}return e.prototype.alreadyRedirected=function(){try{var e=this.storage.getItem(this.cookieKey);return!h.isNullOrUndefined(e)&&Boolean(JSON.parse(e))}catch(e){return!1}},e.prototype.clear=function(){this.storage.removeItem(this.cookieKey)},e.prototype.setRedirected=function(e){this.storage.setItem(this.cookieKey,String(e),this.cookieStorageOptions)},e}(),VM=function(){function e(){this.needDispatch=!0}return e.prototype.setNeedDispatch=function(e){this.needDispatch=e},e.prototype.dispatchDoneEventIfNeeded=function(){this.needDispatch&&window.dispatchEvent(new CustomEvent(e.HACKLE_INITIALIZE_DONE_EVENT_TYPE))},e.HACKLE_INITIALIZE_DONE_EVENT_TYPE="hackle-initialize-done",e}(),HM=function(){function e(e,t){this.sdk=e,this.storage=t}return e.prototype.get=function(){var e=this.storage.getItem("hackle-workspace-config");if(h.isNullOrUndefined(e))return null;try{var t=JSON.parse(e);return this.sdk.version!==t.version?(this.clear(),null):t}catch(e){return this.clear(),null}},e.prototype.set=function(e){var t=a(a({},e),{version:this.sdk.version});this.storage.setItem("hackle-workspace-config",JSON.stringify(t))},e.prototype.clear=function(){this.storage.removeItem("hackle-workspace-config")},e}(),$M=f.log,YM=function(){function e(e){void 0===e&&(e=S.instance),this.clock=e,this.listeners=[],this._initialized=!1}return e.prototype.install=function(t){void 0===t&&(t=null);try{var n=this.changeLifecycle.bind(this);window.addEventListener("pageshow",function(){return n("pageshow")}),window.addEventListener("pagehide",function(){return n("pagehide")}),document.addEventListener("visibilitychange",function(){return n(document.visibilityState)}),window.addEventListener("blur",function(){return n("blur")}),window.addEventListener("focus",function(){return n("focus")}),e.isSafariBrowser(t)&&window.addEventListener("beforeunload",function(){return n("hidden")}),history.pushState=(r=history.pushState,function(){try{var e=r.apply(history,arguments);return n("locationChange"),e}catch(e){(e instanceof Error||"string"==typeof e)&&$M.error(e)}}),history.replaceState=function(e){return function(){try{var t=e.apply(history,arguments);return n("locationChange"),t}catch(e){(e instanceof Error||"string"==typeof e)&&$M.error(e)}}}(history.replaceState),window.addEventListener("popstate",function(){try{n("locationChange")}catch(e){(e instanceof Error||"string"==typeof e)&&$M.error(e)}})}catch(e){(e instanceof Error||"string"==typeof e)&&$M.error(e)}var r},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.initialize=function(){this._initialized=!0,this.changeLifecycle("pageshow")},e.prototype.changeLifecycle=function(e){this._initialized&&this.publish(e)},e.prototype.publish=function(e){var t=this.clock.currentMillis();this.listeners.forEach(function(n){n.onLifecycleChanged(e,t)})},e.isSafariBrowser=function(e){return!h.isNullOrUndefined(e)&&e.toLowerCase().includes("safari")},e}(),GM=function(){function e(e){this.limiter=e}return e.create=function(t,n,r){return void 0===r&&(r=S.instance),new e(new qM(r,t,n))},e.prototype.execute=function(e,t){return this.limiter.tryAcquire()?e():t()},e}(),qM=function(){function e(e,t,n){this.clock=e,this.intervalMillis=t,this.limit=n,this.currentScope=null}return e.prototype.tryAcquire=function(){var e=this.clock.currentMillis();return this.refreshScopeIfNeeded(e).tryAcquire()},e.prototype.refreshScopeIfNeeded=function(e){return(null==this.currentScope||this.currentScope.isExpired(e))&&(this.currentScope=new WM(e+this.intervalMillis,this.limit)),this.currentScope},e}(),WM=function(){function e(e,t){this.expirationTime=e,this.token=t}return e.prototype.isExpired=function(e){return this.expirationTime<e},e.prototype.tryAcquire=function(){return this.token>0&&(this.token-=1,!0)},e}(),KM=function(){function e(e){this.determiners=e}return e.prototype.isDedupTarget=function(e){var t=this.determiners.find(function(t){return t.supports(e)});return!!t&&t.isDedupTarget(e)},e}(),ZM=function(){function e(e,t){this.dedupIntervalMillis=e,this.clock=t,this.cache={},this.currentUser=null}return e.prototype.isDedupTarget=function(e){var t;if(-1===this.dedupIntervalMillis)return!1;y.isEquals(e.user.identifiers,null===(t=this.currentUser)||void 0===t?void 0:t.identifiers)||(this.currentUser=e.user,this.cache={});var n=this.cacheKey(e),r=this.clock.currentMillis(),i=this.cache[n];return void 0!==i&&r-i<=this.dedupIntervalMillis||(this.cache[n]=r,!1)},e}(),JM=function(e){function t(t,n){return void 0===n&&(n=S.instance),e.call(this,t,n)||this}return s(t,e),t.prototype.supports=function(e){return oS.isRemoteConfigEvent(e)},t.prototype.cacheKey=function(e){return[e.parameter.id,e.valueId,e.decisionReason].join("-")},t}(ZM),XM=function(e){function t(t,n){return void 0===n&&(n=S.instance),e.call(this,t,n)||this}return s(t,e),t.prototype.supports=function(e){return oS.isExposureEvent(e)},t.prototype.cacheKey=function(e){return[e.experiment.id,e.variationId,e.variationKey,e.decisionReason].join("-")},t}(ZM),QM=function(){function e(){}return e.prototype.isInvocatorResponse=function(e){return"object"==typeof e&&null!==e&&"success"in e&&"boolean"==typeof e.success&&"message"in e&&"string"==typeof e.message},e.prototype.resolve=function(e){var t=JSON.parse(null!=e?e:"");if(!this.isInvocatorResponse(t))throw new Error("invalid invocator response data");if(!t.success)throw new Error("failed response");return{message:t.message,success:t.success,data:t.data}},e}(),eA=function(){function e(e){this.invocator=e}return e.prototype.createInvocationRequestDto=function(e){return{_hackle:{command:e.command,parameters:e.parameters,browserProperties:e.browserProperties}}},e.prototype.process=function(e){var t,n=this.createInvocationRequestDto(e);return null!==(t=this.invocator.invoke(n).data)&&void 0!==t?t:null},e}(),tA=f.log,nA=function(){function e(e,t){this.core=e,this.userManager=t}return e.prototype.onPageStarted=function(e,t){this.track(e,t)},e.prototype.onPageEnded=function(e,t){},e.prototype.track=function(t,n){var r;tA.debug("tracking page view");var i={key:e.PAGE_VIEW_EVENT_KEY,properties:(r={},r[e.PAGE_NAME_PROPERTY_KEY]=t.pageTitle,r)};this.core.track(i,this.userManager.resolve(),n)},e.PAGE_VIEW_EVENT_KEY="$page_view",e.PAGE_NAME_PROPERTY_KEY="$page_name",e}(),rA=function(){function e(){this.listeners=[],this._currentPage=null}return Object.defineProperty(e.prototype,"currentPage",{get:function(){var e;return null!==(e=this._currentPage)&&void 0!==e?e:nn.createWithCurrentPage()},enumerable:!1,configurable:!0}),e.prototype.updatePage=function(e,t){var n=this._currentPage;n&&e.isEquals(n)||(n&&this.publishEnd(n,t),this._currentPage=e,this.publishStart(e,t))},e.prototype.publishStart=function(e,t){for(var n=0,r=this.listeners;n<r.length;n++)r[n].onPageStarted(e,t)},e.prototype.publishEnd=function(e,t){for(var n=0,r=this.listeners;n<r.length;n++)r[n].onPageEnded(e,t)},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"pageshow":case"locationChange":var n=nn.createWithCurrentPage();return this.updatePage(n,t);case"visible":case"pagehide":case"blur":case"focus":case"hidden":return}},e.prototype.addListener=function(e){this.listeners.push(e)},e}(),iA=f.log,oA=function(){function e(e,t){this.pageManager=e,this.minimumEngagementDurationMillis=t,this.listeners=[],this._lastEngagementTime=null}return Object.defineProperty(e.prototype,"lastEngagementTime",{get:function(){return this._lastEngagementTime},enumerable:!1,configurable:!0}),e.prototype.startEngagement=function(e){iA.debug("startEngagement timestamp:".concat(e,", page:").concat(this.pageManager.currentPage.url)),this._lastEngagementTime=e},e.prototype.endEngagement=function(e,t){if(!h.isNullOrUndefined(this._lastEngagementTime)){var n=this._lastEngagementTime;this._lastEngagementTime=t;var r=t-n;if(!(r<this.minimumEngagementDurationMillis)){var i={page:e,durationMillis:r};this.publish(i,t)}}},e.prototype.publish=function(e,t){iA.debug("onEngagement timestamp:".concat(t,", page:").concat(this.pageManager.currentPage.url));for(var n=0,r=this.listeners;n<r.length;n++)r[n].onEngagement(e,t)},e.prototype.onPageStarted=function(e,t){this.startEngagement(t)},e.prototype.onPageEnded=function(e,t){this.endEngagement(e,t)},e.prototype.onLifecycleChanged=function(e,t){switch(e){case"visible":case"focus":return this.startEngagement(t);case"pagehide":case"hidden":case"blur":return this.endEngagement(this.pageManager.currentPage,t);case"pageshow":case"locationChange":return}},e.prototype.addListener=function(e){this.listeners.push(e)},e}(),sA=function(){function e(e,t){this.core=e,this.userManager=t}return e.prototype.onEngagement=function(t,n){var r,i={key:e.ENGAGEMENT_EVENT_KEY,properties:(r={},r[nA.PAGE_NAME_PROPERTY_KEY]=t.page.pageTitle,r[e.ENGAGEMENT_TIME_PROPERTY_KEY]=t.durationMillis,r)};this.core.track(i,this.userManager.resolve(),n)},e.ENGAGEMENT_EVENT_KEY="$engagement",e.ENGAGEMENT_TIME_PROPERTY_KEY="$engagement_time_ms",e}(),aA=function(){function e(e,t){this.core=e,this.userManager=t}return e.prototype.setPhoneNumber=function(t,n){var r=(new Qt).set(e.PHONE_NUMBER_PROPERTY_KEY,t.getValue()).build().toSecuredEvent();this.track(r,n)},e.prototype.unsetPhoneNumber=function(t){var n=(new Qt).unset(e.PHONE_NUMBER_PROPERTY_KEY).build().toSecuredEvent();this.track(n,t)},e.prototype.track=function(e,t){var n=this.userManager.resolve();this.core.track(e,n,t)},e.PHONE_NUMBER_PROPERTY_KEY="$phone_number",e}(),lA=function(){function e(){}return e.prototype.getBrowserProperties=function(e){return ZE.generate(window,null!=e?e:nn.createWithCurrentPage())},e}(),cA=function(){function e(e,t,n){this.schedule=e,this.scheduleType=t,this.requestedAt=n}return Object.defineProperty(e.prototype,"delayMillis",{get:function(){return this.schedule.time.deliverAt-this.requestedAt},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"InAppMessageScheduleRequest(scheduleType=".concat(this.scheduleType,", requestedAt=").concat(this.requestedAt,")")},e}(),uA=function(){function e(e,t,n,r,i,o){this.dispatchId=e,this.inAppMessageKey=t,this.identifiers=n,this.time=r,this.reason=i,this.eventBasedContext=o}return e.prototype.toRequest=function(e,t){return new cA(this,e,t)},e.create=function(t){return new e(r.v4(),t.inAppMessage.key,t.event.user.identifiers,hA.of(t.inAppMessage,t.event.timestamp),t.reason,new dA(t.event.insertId,t.event.event))},e.fromDelayStorageEntity=function(t,n){return new e(t.schedule.dispatchId,t.schedule.inAppMessageKey,t.schedule.identifiers,new hA(n,t.schedule.time.deliverAt),t.schedule.reason,t.schedule.eventBasedContext)},e}(),hA=function(){function e(e,t){this.startedAt=e,this.deliverAt=t}return e.prototype.delayMillis=function(e){return this.deliverAt-e},e.of=function(t,n){return new e(n,t.eventTrigger.delay.deliverAt(n))},e}(),dA=function(e,t){this.insertId=e,this.event=t},pA=function(){function e(e,t,n,r,i,o){this.scheduleProcessor=e,this.delayStorage=t,this.triggerProcessor=n,this.resetProcessor=r,this.userEventEmitter=i,this.clock=o,this.initialize()}return e.prototype.initialize=function(){var e=this;this.userEventEmitter.on("event",function(t){e.onEvent(t)})},e.prototype.destroy=function(){var e=this;this.userEventEmitter.off("event",function(t){e.onEvent(t)})},e.prototype.onEvent=function(e){this.triggerProcessor.process(e)},e.prototype.onUserUpdated=function(e,t,n){var r=V(e),i=V(t);this.resetProcessor.process({identifiers:r},{identifiers:i})},e.prototype.loadDelaySchedule=function(){var e=this;this.delayStorage.values().forEach(function(t){var n=e.clock.currentMillis(),r=uA.fromDelayStorageEntity(t,n).toRequest("STORED",n);e.scheduleProcessor.process(r)})},e}(),fA=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.resolve=function(e,t,n){return t.setProperty("experiment_id",n.experiment.id),t.setProperty("experiment_key",n.experiment.key),t.setProperty("variation_id",n.variationId),t.setProperty("variation_key",n.variationKey),t.setProperty("experiment_decision_reason",n.reason),n},t}(mE),mA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(dS),gA=function(){function e(e,t,n,r,i){this.request=e,this.reason=t,this.targetEvaluations=n,this.message=r,this.properties=i}return Object.defineProperty(e.prototype,"inAppMessage",{get:function(){return this.request.inAppMessage},enumerable:!1,configurable:!0}),e.of=function(t,n,r){return new e(t,D.IN_APP_MESSAGE_TARGET,n.targetEvaluations,r,n.properties)},e}(),yA=function(){function e(){}return Object.defineProperty(e.prototype,"key",{get:function(){return new yS("IN_APP_MESSAGE",this.inAppMessage.id)},enumerable:!1,configurable:!0}),e}(),vA=function(e){function t(t,n,r){var i=e.call(this)||this;return i.workspace=t,i.user=n,i.inAppMessage=r,i}return s(t,e),t.of=function(e){return e instanceof t?e:new t(e.workspace,e.user,e.inAppMessage)},t.prototype.toString=function(){return"InAppMessageLayoutRequest(type=".concat(this.key.type,", key=").concat(this.inAppMessage.key,")")},t}(yA),_A=function(e){function t(t,n,r){var i=e.call(this)||this;return i.experimentEvaluator=t,i.selector=n,i.eventRecorder=r,i}return s(t,e),t.prototype.supports=function(e){return e instanceof vA},t.prototype.evaluateInternal=function(e,t){var n=e.inAppMessage.messageContext.experimentContext,r=null!==n?this.evaluateExperiment(e,t,n):this.evaluateDefault(e,t);return gA.of(e,t,r)},t.prototype.evaluateDefault=function(e,t){var n=bA(e.inAppMessage.messageContext.defaultLang);return this.selector.select(e.inAppMessage,n)},t.prototype.evaluateExperiment=function(e,t,n){var r,i=h.requiredNotNullOrUndefined(e.workspace.getExperimentOrNull(n.key),function(){return"Experiment[key=".concat(n.key,"]")}),o=this.experimentEvaluator.evaluate(e,t,i),s=bA(e.inAppMessage.messageContext.defaultLang),a=(r=o.variationKey,function(e){return r===e.variationKey});return this.selector.select(e.inAppMessage,function(e){return s(e)&&a(e)})},t.prototype.record=function(e,t){this.eventRecorder.record(e,t)},t}(mA);function bA(e){return function(t){return e===t.lang}}var wA,xA=function(){function e(){}return e.prototype.select=function(e,t){var n=e.messageContext.messages.find(t);return h.requiredNotNullOrUndefined(n,function(){return"InAppMessage must be decided [".concat(e.id,"]")})},e}(),SA=function(){function e(e){this.storage=e,this.STORE_MAX_SIZE=100}return e.prototype.record=function(e,t){if(e.reason!==D.OVERRIDDEN)try{this.doRecord(e)}catch(e){f.log.error("Failed to record InAppMessageImpression: ".concat(e))}},e.prototype.doRecord=function(e){var t=this.storage.get(e.inAppMessage),n={identifiers:e.user.identifiers,timestamp:e.requestedAt},r=u(u([],t,!0),[n],!1),i=r.length>this.STORE_MAX_SIZE?r.length-this.STORE_MAX_SIZE:0,o=r.slice(i);this.storage.set(e.inAppMessage,o)},e}(),EA=function(){function e(e,t){this.dispatchId=e,this.context=t}return e.prototype.toString=function(){return"InAppMessagePresentResponse(dispatchId=".concat(this.dispatchId,", inAppMessage=").concat(this.context.inAppMessage,", displayType=").concat(this.context.message.layout.displayType,", layoutType=").concat(this.context.message.layout.layoutType,")")},e.of=function(t,n){return new e(t.dispatchId,n)},e}(),TA=function(){function e(e,t,n,r,i,o){this.dispatchId=e,this.inAppMessage=t,this.message=n,this.user=r,this.decisionReason=i,this.properties=o}return e.prototype.toString=function(){return"InAppMessagePresentationContext(dispatchId=".concat(this.dispatchId,", inAppMessage=").concat(this.inAppMessage,", message=").concat(this.message,")")},e.of=function(t){return new e(t.dispatchId,t.inAppMessage,t.message,t.user,t.reason,t.properties)},e}(),MA=function(){function e(e,t){this.presenter=e,this.recorder=t}return e.prototype.process=function(e){f.log.debug("InAppMessage Present Request: ".concat(e));var t=this.present(e);return this.recorder.record(e,t),f.log.debug("InAppMessage Present Response: ".concat(t)),t},e.prototype.present=function(e){var t=TA.of(e);return this.presenter.present(t),EA.of(e,t)},e}(),AA=function(){function e(){}return e.prototype.isIdentifierChanged=function(e,t){var n=e[B.USER],r=t[B.USER];if(void 0!==n&&void 0!==r)return n!==r;var i=e[B.DEVICE],o=t[B.DEVICE];return void 0!==i&&void 0!==o&&i!==o},e}(),kA=function(){function e(e,t){this.clock=e,this.scheduler=t}return Object.defineProperty(e.prototype,"listener",{get:function(){return this._listener},set:function(e){this._listener=e},enumerable:!1,configurable:!0}),e.prototype.schedule=function(e){var t=this,n=this.scheduler.schedule(e.delayMillis,function(){return t.delayCommand(e)});return new CA(e,n)},e.prototype.delayCommand=function(e){var t,n=this.clock.currentMillis(),r=e.schedule.toRequest("DELAYED",n);null===(t=this.listener)||void 0===t||t.onSchedule(r)},e}(),CA=function(){function e(e,t){this.delay=e,this.job=t}return e.prototype.cancel=function(){this.job.cancel(),f.log.debug("InAppMessageDelay cancelled: ".concat(this.delay))},e}(),IA=function(){function e(e,t){this.schedule=e,this.requestedAt=t}return Object.defineProperty(e.prototype,"delayMillis",{get:function(){return this.schedule.time.delayMillis(this.requestedAt)},enumerable:!1,configurable:!0}),e.from=function(t){return new e(t.schedule,t.requestedAt)},e.prototype.toString=function(){return"InAppMessageDelay(dispatchId=".concat(this.schedule.dispatchId,", requestedAt=").concat(this.requestedAt,")")},e}(),PA=function(){function e(e,t,n){this.scheduler=e,this.tasks=t,this.storage=n}return e.prototype.registerAndDelay=function(e){return this.storage.set(e.schedule.inAppMessageKey,e.schedule.dispatchId,IA.from(e)),this.delay(e)},e.prototype.delay=function(e){var t=IA.from(e),n=this.scheduler.schedule(t);return this.tasks.set(t.schedule.dispatchId,n),f.log.debug("InAppMessage Delay started: dispatchId=".concat(e.schedule.dispatchId)),t},e.prototype.delete=function(e){var t,n,r=null!==(n=null===(t=this.tasks.get(e.schedule.dispatchId))||void 0===t?void 0:t.delay)&&void 0!==n?n:null;return r&&f.log.debug("InAppMessage Delay deleted: dispatchId=".concat(e.schedule.dispatchId)),this.tasks.delete(e.schedule.dispatchId),this.storage.remove(e.schedule.inAppMessageKey,e.schedule.dispatchId),r},e.prototype.cancelAll=function(){var e=Array.from(this.tasks.values());return e.forEach(function(e){return e.cancel()}),this.tasks.clear(),this.storage.clear(),f.log.debug("InAppMessage Delay clear."),e.map(function(e){return e.delay})},e}(),OA=function(){function e(e,t,n,r){this.dispatchId=e,this.inAppMessageKey=t,this.code=n,this.presentResponse=r}return e.prototype.toString=function(){return"InAppMessageDeliverResponse(dispatchId=".concat(this.dispatchId,", inAppMessageKey=").concat(this.inAppMessageKey,", code=").concat(this.code,")")},e.of=function(t,n,r){return void 0===r&&(r=null),new e(t.dispatchId,t.inAppMessageKey,n,r)},e}(),RA=function(){function e(e,t,n,r,i,o,s){this.dispatchId=e,this.inAppMessage=t,this.message=n,this.user=r,this.requestedAt=i,this.reason=o,this.properties=s}return e.prototype.toString=function(){return"InAppMessagePresentRequest(dispatchId=".concat(this.dispatchId,", inAppMessage=").concat(this.inAppMessage,", user=").concat(this.user.identifiers,", requestedAt=").concat(this.requestedAt,", reason=").concat(this.reason,", properties=").concat(this.properties,")")},e.of=function(t,n,r,i,o){return new e(t.dispatchId,n,o.message,r,t.requestedAt,i.reason,a(a({},t.properties),o.properties))},e}(),DA=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.workspace=t,o.user=n,o.inAppMessage=r,o.timestamp=i,o}return s(t,e),t.prototype.toString=function(){return"InAppMessageEligibilityRequest(type=".concat(this.key.type,", key=").concat(this.inAppMessage.key,")")},t}(yA),LA=function(){function e(e,t,n,r,i,o,s){this.workspaceFetcher=e,this.userManager=t,this.identifierChecker=n,this.layoutResolver=r,this.evaluateProcessor=i,this.presentProcessor=o,this.userDecorator=s}return e.prototype.response=function(e){try{return this.deliver(e)}catch(i){return f.log.error("Failed to process InAppMessageDeliver: ".concat(i)),OA.of(e,"EXCEPTION")}},e.prototype.process=function(e){f.log.debug("InAppMessage Deliver Request: ".concat(e));var t=this.response(e);return f.log.debug("InAppMessage Deliver Response: ".concat(t)),t},e.prototype.deliver=function(e){var t=this.workspaceFetcher.get();if(!t)return OA.of(e,"WORKSPACE_NOT_FOUND");var n=t.getInAppMessageOrNull(e.inAppMessageKey);if(!n)return OA.of(e,"IN_APP_MESSAGE_NOT_FOUND");var r=this.userDecorator.decorate(this.userManager.resolve());if(this.identifierChecker.isIdentifierChanged(e.identifiers,r.identifiers))return OA.of(e,"IDENTIFIER_CHANGED");var i=this.layoutResolver.resolve(t,n,r),o=new DA(t,r,n,e.requestedAt),s=this.evaluateProcessor.process("DELIVER",o);if(!s.isEligible)return OA.of(e,"INELIGIBLE");var a=RA.of(e,n,r,s,i),l=this.presentProcessor.process(a);return OA.of(e,"PRESENT",l)},e}(),NA=function(){function e(e){this.schedulers=e}return e.prototype.get=function(e){return h.requiredNotNullOrUndefined(this.schedulers.find(function(t){return t.supports(e)}),function(){return"Unsupported InAppMessageScheduleType[".concat(e,"]")})},e}(),FA=function(){function e(e,t,n,r,i){this.dispatchId=e,this.inAppMessageKey=t,this.code=n,this.deliverResponse=r,this.delay=i}return e.prototype.toString=function(){return"InAppMessageScheduleResponse(dispatchId=".concat(this.dispatchId,", inAppMessageKey=").concat(this.inAppMessageKey,", code=").concat(this.code,")")},e.of=function(t,n,r,i){return void 0===r&&(r=null),void 0===i&&(i=null),new e(t.schedule.dispatchId,t.schedule.inAppMessageKey,n,r,i)},e}(),zA=function(){function e(e,t,n,r,i,o){this.dispatchId=e,this.inAppMessageKey=t,this.identifiers=n,this.requestedAt=r,this.reason=i,this.properties=o}return e.of=function(t){var n=(new jt).add("$trigger_event_insert_id",t.schedule.eventBasedContext.insertId).build();return new e(t.schedule.dispatchId,t.schedule.inAppMessageKey,t.schedule.identifiers,t.requestedAt,t.schedule.reason,h.fromMap(n))},e.prototype.toString=function(){return"InAppMessageDeliverRequest(dispatchId=".concat(this.dispatchId,", inAppMessageKey=").concat(this.inAppMessageKey,", identifiers=").concat(this.identifiers,", requestedAt=").concat(this.requestedAt,", reason=").concat(this.reason)},e}(),UA=function(){function e(){}return e.prototype.schedule=function(e,t){switch(e){case"DELIVER":return this.deliver(t);case"DELAY":return this.delay(t);case"IGNORE":return this.ignore(t)}},e}(),jA=function(e){function t(t,n){var r=e.call(this)||this;return r.deliverProcessor=t,r.delayManager=n,r}return s(t,e),t.prototype.supports=function(e){return"DELAYED"===e},t.prototype.deliver=function(e){var t=this.delayManager.delete(e);h.requiredNotNullOrUndefined(t,function(){return"InAppMessageDelay not found (inAppMessageKey=".concat(e.schedule.inAppMessageKey,")")});var n=zA.of(e),r=this.deliverProcessor.process(n);return FA.of(e,"DELIVER",r)},t.prototype.delay=function(e){var t=this.delayManager.delay(e);return FA.of(e,"DELAY",null,t)},t.prototype.ignore=function(e){var t=this.delayManager.delete(e);return FA.of(e,"IGNORE",null,t)},t}(UA),BA=function(e){function t(t,n){var r=e.call(this)||this;return r.deliverProcessor=t,r.delayManager=n,r}return s(t,e),t.prototype.supports=function(e){return"TRIGGERED"===e},t.prototype.deliver=function(e){var t=zA.of(e),n=this.deliverProcessor.process(t);return FA.of(e,"DELIVER",n)},t.prototype.delay=function(e){var t=this.delayManager.registerAndDelay(e);return FA.of(e,"DELAY",null,t)},t.prototype.ignore=function(e){return FA.of(e,"IGNORE")},t}(UA),VA=function(){function e(e,t){this.actionDeterminer=e,this.schedulerFactory=t}return e.prototype.process=function(e){f.log.debug("InAppMessage Schedule Request: ".concat(e));var t=this.schedule(e);return f.log.debug("InAppMessage Schedule Response: ".concat(t)),t},e.prototype.schedule=function(e){try{var t=this.actionDeterminer.determine(e);return this.schedulerFactory.get(e.scheduleType).schedule(t,e)}catch(t){return f.log.error("Failed to process InAppMessageSchedule: ".concat(t)),FA.of(e,"EXCEPTION")}},e.prototype.onSchedule=function(e){this.process(e)},e}(),HA=function(){function e(){this.DELIVER_DURATION_THRESHOLD_MILLIS=-1e4}return e.prototype.shouldIgnoreRequest=function(e){return"STORED"===e.scheduleType&&e.delayMillis<0},e.prototype.determineAction=function(e){var t=e.delayMillis;if(t>0)return"DELAY";if(t>=this.DELIVER_DURATION_THRESHOLD_MILLIS)return"DELIVER";if(t<this.DELIVER_DURATION_THRESHOLD_MILLIS)return"IGNORE";throw new Error("InAppMessageScheduleAction cannot be determined (key=".concat(e.schedule.inAppMessageKey,")"))},e.prototype.determine=function(e){if(this.shouldIgnoreRequest(e))return"IGNORE";var t=this.determineAction(e);return f.log.debug("InAppMessage ScheduleAction determined: action=".concat(t,", dispatchId=").concat(e.schedule.dispatchId)),t},e}(),$A=function(){function e(e,t,n){this.inAppMessage=e,this.reason=t,this.event=n}return e.prototype.toString=function(){return"InAppMessageTrigger(inAppMessage=".concat(this.inAppMessage.toString(),", reason=").concat(this.reason,", insertId=").concat(this.event.insertId,", timestamp=").concat(this.event.timestamp,", event=").concat(this.event.event.key,")")},e}(),YA=function(){function e(e,t,n){this.workspaceFetcher=e,this.eventMatcher=t,this.evaluateProcessor=n}return e.prototype.determine=function(e){var t=oS.isTrackEvent(e)?e:null;if(!t)return null;var n=this.workspaceFetcher.get();if(!n)return null;for(var r=0,i=n.getInAppMessages();r<i.length;r++){var o=i[r];if(this.eventMatcher.matches(n,o,t)){var s=this.evaluate(n,o,t);if(s.isEligible)return new $A(o,s.reason,t)}}return null},e.prototype.evaluate=function(e,t,n){var r=new DA(e,n.user,t,n.timestamp);return this.evaluateProcessor.process("TRIGGER",r)},e}(),GA=function(){function e(e){this.scheduleProcessor=e}return e.prototype.handle=function(e){var t=uA.create(e).toRequest("TRIGGERED",e.event.timestamp);this.scheduleProcessor.process(t)},e}(),qA=function(){function e(e,t){this.determiner=e,this.handler=t}return e.prototype.process=function(e){try{var t=this.determiner.determine(e);if(!t)return;f.log.debug("InAppMessage triggered: ".concat(t)),this.handler.handle(t)}catch(e){f.log.error("Failed to process InAppMessage event trigger: ".concat(e))}},e}(),WA=function(){function e(e,t){this.identifierChecker=e,this.delayManager=t}return e.prototype.process=function(e,t){try{this.identifierChecker.isIdentifierChanged(V(e),V(t))&&this.delayManager.cancelAll()}catch(e){f.log.error("Failed to reset InAppMessage: ".concat(e))}},e}(),KA=function(){function e(e){this.storage=e,this.storageKey="iam-delay"}return e.prototype.getDelayStorageItem=function(){var e=this.storage.getItem(this.storageKey);if(h.isNullOrUndefined(e))return null;try{return JSON.parse(e)}catch(e){return f.log.warn("Failed to get delay storage item: ".concat(e)),null}},e.prototype.get=function(e,t){var n,r,i=this.getDelayStorageItem();return h.isNullOrUndefined(i)?null:null!==(r=null===(n=i[e])||void 0===n?void 0:n.find(function(e){return e.schedule.dispatchId===t}))&&void 0!==r?r:null},e.prototype.set=function(e,t,n){var r,i,o=this.getDelayStorageItem();if(h.isNullOrUndefined(o))return f.log.debug("No delay storage item found. create new item"),void this.storage.setItem(this.storageKey,JSON.stringify((r={},r[e]=[n],r)));var s=null!==(i=o[e])&&void 0!==i?i:[];s.push(n),o[e]=s,this.storage.setItem(this.storageKey,JSON.stringify(o))},e.prototype.remove=function(e,t){var n=this.getDelayStorageItem(),r=null==n?void 0:n[e];h.isNullOrUndefined(n)||h.isNullOrUndefined(r)?f.log.debug("No delay storage item found for ".concat(e,". do nothing")):(n[e]=r.filter(function(e){return e.schedule.dispatchId!==t}),0===n[e].length&&delete n[e],this.storage.setItem(this.storageKey,JSON.stringify(n)))},e.prototype.values=function(){var e=this.getDelayStorageItem();return h.isNullOrUndefined(e)?(f.log.debug("No delay storage item found. do nothing"),[]):Object.values(e).flat()},e.prototype.clear=function(){this.storage.removeItem(this.storageKey)},e}(),ZA=function(){function e(e){this.clock=e}return e.prototype.create=function(t,n){var r=this,i=this.clock.currentMillis(),o=new Array,s=this.createEvent(t,n,i,{});return s&&o.push(s),n.targetEvaluations.forEach(function(n){var s,a=((s={})[e.ROOT_TYPE]=t.key.type,s[e.ROOT_ID]=t.key.id,s),l=r.createEvent(t,n,i,a);l&&o.push(l)}),o},e.prototype.createEvent=function(t,n,r,i){var o;return n instanceof pS?(i[e.CONFIG_ID_PROPERTY_KEY]=null===(o=n.config)||void 0===o?void 0:o.id,i[e.EXPERIMENT_VERSION_KEY]=n.experiment.version,i[e.EXECUTION_VERSION_KEY]=n.experiment.executionVersion,oS.exposure(t.user,n,i,r)):n instanceof mS?oS.remoteConfig(t.user,n,a(a({},i),n.properties),r):null},e.ROOT_TYPE="$targetingRootType",e.ROOT_ID="$targetingRootId",e.CONFIG_ID_PROPERTY_KEY="$parameterConfigurationId",e.EXPERIMENT_VERSION_KEY="$experiment_version",e.EXECUTION_VERSION_KEY="$execution_version",e}(),JA=function(){function e(e,t){this.eventFactory=e,this.eventProcessor=t}return e.prototype.record=function(e,t){var n=this;this.eventFactory.create(e,t).forEach(function(e){n.eventProcessor.process(e)})},e}(),XA=function(){function e(e,t,n,r,i){this.reason=e,this.targetEvaluations=t,this.inAppMessage=n,this.isEligible=r,this.layoutEvaluation=i}return e.eligible=function(t,n,r){return e.of(t,n,r,!0)},e.ineligible=function(t,n,r){return e.of(t,n,r,!1)},e.of=function(t,n,r,i){return new e(String(r),n.targetEvaluations,t.inAppMessage,i,n.get(gA))},e}(),QA=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return e.inAppMessage.supports("WEB")?n.evaluate(e,t):XA.ineligible(e,t,D.UNSUPPORTED_PLATFORM)},e}(),ek=function(){function e(e){this.userOverrideMatcher=e}return e.prototype.evaluate=function(e,t,n){return this.userOverrideMatcher.matches(e,t)?XA.eligible(e,t,D.OVERRIDDEN):n.evaluate(e,t)},e}(),tk=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return"DRAFT"===e.inAppMessage.status?XA.ineligible(e,t,D.IN_APP_MESSAGE_DRAFT):n.evaluate(e,t)},e}(),nk=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return"PAUSE"===e.inAppMessage.status?XA.ineligible(e,t,D.IN_APP_MESSAGE_PAUSED):n.evaluate(e,t)},e}(),rk=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return e.inAppMessage.period.within(e.timestamp)?n.evaluate(e,t):XA.ineligible(e,t,D.NOT_IN_IN_APP_MESSAGE_PERIOD)},e}(),ik=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return e.inAppMessage.timetable.within(e.timestamp)?n.evaluate(e,t):XA.ineligible(e,t,D.NOT_IN_IN_APP_MESSAGE_TIMETABLE)},e}(),ok=function(){function e(e){this.hiddenMatcher=e}return e.prototype.evaluate=function(e,t,n){return this.hiddenMatcher.matches(e,t)?XA.ineligible(e,t,D.IN_APP_MESSAGE_HIDDEN):n.evaluate(e,t)},e}(),sk=function(){function e(e){this.targetMatcher=e}return e.prototype.evaluate=function(e,t,n){return this.targetMatcher.matches(e,t)?n.evaluate(e,t):XA.ineligible(e,t,D.NOT_IN_IN_APP_MESSAGE_TARGET)},e}(),ak=function(){function e(e){this.frequencyCapMatcher=e}return e.prototype.evaluate=function(e,t,n){return this.frequencyCapMatcher.matches(e,t)?XA.ineligible(e,t,D.IN_APP_MESSAGE_FREQUENCY_CAPPED):n.evaluate(e,t)},e}(),lk=function(){function e(){}return e.prototype.evaluate=function(e,t,n){return XA.eligible(e,t,D.IN_APP_MESSAGE_TARGET)},e}(),ck=function(){function e(e){this.layoutEvaluator=e}return e.prototype.evaluate=function(e,t,n){var r=vA.of(e),i=this.layoutEvaluator.evaluate(r,vS.create());return t.set(gA,i),n.evaluate(e,t)},e}(),uk=function(){function e(){}return e.prototype.matches=function(e,t){var n=this;return e.inAppMessage.targetContext.overrides.some(function(t){return n.isUserOverridden(e,t)})},e.prototype.isUserOverridden=function(e,t){var n=e.user.identifiers[t.identifierType];return!h.isNullOrUndefined(n)&&t.identifiers.includes(n)},e}(),hk=function(){function e(e){this.targetMatcher=e}return e.prototype.matches=function(e,t){var n=this,r=e.inAppMessage.targetContext.targets;return 0===r.length||r.some(function(r){return n.targetMatcher.matches(e,t,r)})},e}(),dk=function(){function e(e){this.storage=e}return e.prototype.matches=function(e,t){return this.storage.exist(e.inAppMessage,e.timestamp)},e}(),pk=function(){function e(e){this.storage=e}return e.prototype.matches=function(e,t){var n=e.inAppMessage,r=e.user,i=e.timestamp;return this.isFrequencyCapped(n,r,i)},e.prototype.isFrequencyCapped=function(e,t,n){if(!e.eventTrigger.frequencyCap)return!1;var r=this.createMatchContexts(e.eventTrigger.frequencyCap);if(0===r.length)return!1;for(var i=0,o=this.storage.get(e);i<o.length;i++)for(var s=o[i],a=0,l=r;a<l.length;a++)if(l[a].matches(t,n,s))return!0;return!1},e.prototype.createMatchContexts=function(e){for(var t=[],n=0,r=e.identifierCaps;n<r.length;n++){var i=r[n];t.push(new fk(new mk(i)))}return e.durationCap&&t.push(new fk(new gk(e.durationCap))),t},e}(),fk=function(){function e(e){this.matchCount=0,this.predicate=e}return e.prototype.matches=function(e,t,n){return this.predicate.matches(e,t,n)&&(this.matchCount+=1),this.matchCount>=this.predicate.thresholdCount},e}(),mk=function(){function e(e){this.identifierCap=e}return Object.defineProperty(e.prototype,"thresholdCount",{get:function(){return this.identifierCap.count},enumerable:!1,configurable:!0}),e.prototype.matches=function(e,t,n){var r=e.identifiers[this.identifierCap.identifierType];if(h.isNullOrUndefined(r))return!1;var i=n.identifiers[this.identifierCap.identifierType];return!h.isNullOrUndefined(i)&&r===i},e}(),gk=function(){function e(e){this.durationCap=e}return Object.defineProperty(e.prototype,"thresholdCount",{get:function(){return this.durationCap.count},enumerable:!1,configurable:!0}),e.prototype.matches=function(e,t,n){return t-n.timestamp<=this.durationCap.durationMillis},e}(),yk=function(){function e(e,t,n){this.layoutEvaluator=n;var r=TS.get("targetMatcher"),i=[new QA,new ek(new uk),new tk,new nk,new rk,new ik,new sk(new hk(r))],o=[new ck(this.layoutEvaluator)],s=[new ak(new pk(t)),new ok(new dk(e))],a=[new lk];this.triggerFlow=kS.of.apply(kS,u(u(u(u([],i,!1),o,!1),s,!1),a,!1)),this.deliverFlow=kS.of.apply(kS,u(u([],s,!1),a,!1)),this.deliverReEvaluateFlow=kS.of.apply(kS,u(u(u([],i,!1),s,!1),a,!1))}return e.prototype.getTriggerFlow=function(){return this.triggerFlow},e.prototype.getDeliverFlow=function(e){return e?this.deliverReEvaluateFlow:this.deliverFlow},e}(),vk=function(e){function t(t,n){var r=e.call(this)||this;return r.evaluationFlow=t,r.eventRecorder=n,r}return s(t,e),t.prototype.supports=function(e){return void 0!==e.inAppMessage},t.prototype.evaluateInternal=function(e,t){var n;return null!==(n=this.evaluationFlow.evaluate(e,t))&&void 0!==n?n:XA.ineligible(e,t,D.NOT_IN_IN_APP_MESSAGE_TARGET)},t.prototype.record=function(e,t){this.eventRecorder.record(e,t),t.isEligible||null===t.layoutEvaluation||this.eventRecorder.record(t.layoutEvaluation.request,t.layoutEvaluation)},t}(mA),_k=function(){function e(e,t,n){this.core=e,this.flowFactory=t,this.eventRecorder=n}return e.prototype.process=function(e,t){var n=this.resolveFlow(e,t),r=new vk(n,this.eventRecorder);return this.core.inAppMessage(t,vS.create(),r)},e.prototype.resolveFlow=function(e,t){var n,r;return"TRIGGER"===e?this.flowFactory.getTriggerFlow():this.flowFactory.getDeliverFlow(null!==(r=null===(n=t.inAppMessage.evaluateContext)||void 0===n?void 0:n.atDeliverTime)&&void 0!==r&&r)},e}(),bk=function(){function e(e,t){this.core=e,this.layoutEvaluator=t}return e.prototype.resolve=function(e,t,n){var r=new vA(e,n,t);return this.core.inAppMessage(r,vS.create(),this.layoutEvaluator)},e}(),wk=function(e){function t(t,n){var r=e.call(this)||this;return r.deliverProcessor=t,r.delayManager=n,r}return s(t,e),t.prototype.supports=function(e){return"STORED"===e},t.prototype.deliver=function(e){var t=this.delayManager.delete(e);h.requiredNotNullOrUndefined(t,function(){return"InAppMessageDelay not found (inAppMessageKey=".concat(e.schedule.inAppMessageKey,")")});var n=zA.of(e),r=this.deliverProcessor.process(n);return FA.of(e,"DELIVER",r,t)},t.prototype.delay=function(e){var t=this.delayManager.delay(e);return f.log.debug("StoredDelay is scheduled (inAppMessageKey=".concat(e.schedule.inAppMessageKey,", delayMillis=").concat(e.delayMillis.toLocaleString(),")")),FA.of(e,"DELAY",null,t)},t.prototype.ignore=function(e){var t=this.delayManager.delete(e);return FA.of(e,"IGNORE",null,t)},t}(UA),xk=function(){function e(e){this.sessionManager=e}return e.prototype.decorate=function(e){if(e.identifiers[B.SESSION])return e;var t=this.sessionManager.currentSessionId;if(h.isNullOrUndefined(t))return e;var n=(new H).addIdentifiers(e.identifiers).add(B.SESSION,t).build();return a(a({},e),{identifiers:n})},e}(),Sk=function(){function e(e){this.sessionUserDecorator=e}return e.prototype.decorate=function(e){var t=this.sessionUserDecorator.decorate(e.user);return e.copyWithUser(t)},e}(),Ek=function(){function e(e,t){this.invocationProcessor=e,this.browserPropertyProvider=t}return e.prototype.onPageStarted=function(e,t){this.track(e,t)},e.prototype.onPageEnded=function(e,t){},e.prototype.track=function(e,t){var n,r={command:"track",parameters:{event:{key:nA.PAGE_VIEW_EVENT_KEY,properties:(n={},n[nA.PAGE_NAME_PROPERTY_KEY]=e.pageTitle,n)},user:void 0},browserProperties:this.browserPropertyProvider.getBrowserProperties(e)};this.invocationProcessor.process(r)},e}(),Tk=function(e,t,n,r,i){this.sdkKey=e,this.config=t,this.invocationProcessor=n,this.browserPropertyProvider=r,this.lifecycleCompositeManager=i},Mk={automaticScreenTracking:!1,automaticEngagementTracking:!1},Ak=f.log,kk=function(){function e(e){this.configResolver=e}return e.prototype.config=function(){var e=this.configResolver.resolve();return a(a({},Mk),e)},e}(),Ck=function(){function e(e){this.hackleApp=e}return e.prototype.supports=function(e){return"getWebViewConfig"in e&&h.isNotNullOrUndefined(e.getWebViewConfig)},e.prototype.resolveAutomaticEngagementTracking=function(e){return"boolean"!=typeof e.automaticEngagementTracking?Mk.automaticEngagementTracking:e.automaticEngagementTracking},e.prototype.resolveAutomaticScreenTracking=function(e){return"boolean"!=typeof e.automaticScreenTracking?Mk.automaticScreenTracking:e.automaticScreenTracking},e.prototype.resolve=function(){try{if(!this.supports(this.hackleApp))return Mk;var e=this.hackleApp.getWebViewConfig(),t=JSON.parse(e);return{automaticEngagementTracking:this.resolveAutomaticEngagementTracking(t),automaticScreenTracking:this.resolveAutomaticScreenTracking(t)}}catch(e){return Ak.warn("Failed to resolve web view config: ".concat(e)),Mk}},e}(),Ik=function(){function e(e,t){this.invocationProcessor=e,this.browserPropertyProvider=t}return e.prototype.onEngagement=function(e,t){this.track(e,t)},e.prototype.track=function(t,n){var r,i={command:"track",parameters:{event:{key:e.ENGAGEMENT_EVENT_KEY,properties:(r={},r[nA.PAGE_NAME_PROPERTY_KEY]=t.page.pageTitle,r[e.ENGAGEMENT_TIME_PROPERTY_KEY]=t.durationMillis,r)},user:void 0},browserProperties:this.browserPropertyProvider.getBrowserProperties(t.page)};this.invocationProcessor.process(i)},e.ENGAGEMENT_EVENT_KEY="$engagement",e.ENGAGEMENT_TIME_PROPERTY_KEY="$engagement_time_ms",e}(),Pk=function(){function e(e,t,n,r){this.lifecycleManager=e,this.pageManager=t,this.engagementManager=n,this.lifecycleManager=e,this.pageManager=t,this.engagementManager=n,this.install("string"==typeof r?r:null)}return e.prototype.addPageListener=function(e){this.pageManager.addListener(e)},e.prototype.addEngagementListener=function(e){this.engagementManager.addListener(e)},e.prototype.addLifecycleListener=function(e){this.lifecycleManager.addListener(e)},e.prototype.initialize=function(){this.lifecycleManager.initialize()},e.prototype.install=function(e){this.pageManager.addListener(this.engagementManager),this.lifecycleManager.addListener(this.pageManager),this.lifecycleManager.addListener(this.engagementManager),this.lifecycleManager.install(e)},e}(),Ok=function(){function e(){this.operations=new Map}return e.prototype.marketing=function(e){return this.operations.set("$marketing",e),this},e.prototype.information=function(e){return this.operations.set("$information",e),this},e.prototype.custom=function(e,t){return this.operations.set(e,t),this},e.prototype.build=function(){return new Rk(this.operations)},e}(),Rk=function(){function e(e){this.operations=e}return e.prototype.toEvent=function(e){var t=new Qt;return this.operations.forEach(function(e,n){t.set(n,e)}),{key:e,properties:h.fromMap(this.operations)}},e.prototype.toRecord=function(){var e={};return this.operations.forEach(function(t,n){e[n]=t}),e},e}();t.HackleSubscriptionStatus=void 0,(wA=t.HackleSubscriptionStatus||(t.HackleSubscriptionStatus={})).SUBSCRIBED="SUBSCRIBED",wA.UNSUBSCRIBED="UNSUBSCRIBED",wA.UNKNOWN="UNKNOWN";var Dk=function(){function e(e,t){void 0===t&&(t=1e3);var n=new YM,r=new rA,i=new oA(r,t);this.compositeManager=new Pk(n,r,i,e)}return e.prototype.addPageListener=function(e){this.compositeManager.addPageListener(e)},e.prototype.addEngagementListener=function(e){this.compositeManager.addEngagementListener(e)},e.prototype.addLifecycleListener=function(e){this.compositeManager.addLifecycleListener(e)},e.prototype.initialize=function(){this.compositeManager.initialize()},e}(),Lk=f.log,Nk=null,Fk=function(e){function t(t,n,r,i,o){return e.call(this,t,n,r,i,o)||this}return s(t,e),t.prototype.create=function(e){var t=new bn(this.invocationProcessor,this.browserPropertyProvider);return this.initialize(e),t},t.prototype.initialize=function(e){e.automaticScreenTracking&&this.lifecycleCompositeManager.addPageListener(new Ek(this.invocationProcessor,this.browserPropertyProvider)),e.automaticEngagementTracking&&this.lifecycleCompositeManager.addEngagementListener(new Ik(this.invocationProcessor,this.browserPropertyProvider)),this.lifecycleCompositeManager.initialize()},t}(Tk),zk=function(e){function t(t,n,r,i,o){return e.call(this,t,n,r,i,o)||this}return s(t,e),t.prototype.create=function(e){var t=Bk(this.sdkKey,this.config,this.lifecycleCompositeManager),n=new bn(this.invocationProcessor,this.browserPropertyProvider),r=new wn(t,n);return this.initialize(r),r},t.prototype.initialize=function(e){e.syncUser()},t}(Tk),Uk=function(){function e(e,t,n,r,i){var o;this.sdkKey=e,this.config=t,this.invocationProcessor=n,this.browserPropertyProvider=r,this.lifecycleCompositeManager=i,this.factories=((o={})[vn.native]=new Fk(this.sdkKey,this.config,this.invocationProcessor,this.browserPropertyProvider,this.lifecycleCompositeManager),o[vn.web_view_wrapper]=new zk(this.sdkKey,this.config,this.invocationProcessor,this.browserPropertyProvider,this.lifecycleCompositeManager),o)}return e.prototype.create=function(e,t){var n=this.factories[e];if(!n)throw new Error("Unsupported HackleAppMode: ".concat(e));return n.create(t)},e}();function jk(e,t){var n=hM.config(t);hM.logging(n);var r,i=new lA,o=i.getBrowserProperties().browserName,s=new rA,a=new YM,l=new oA(s,1e3),c=new Pk(a,s,l,"string"==typeof o?o:null);try{if((r=window)&&"_hackleApp"in r&&null!==r._hackleApp&&"object"==typeof r._hackleApp&&"getAppSdkKey"in r._hackleApp&&"function"==typeof r._hackleApp.getAppSdkKey&&"getInvocationType"in r._hackleApp&&"function"==typeof r._hackleApp.getInvocationType&&e===window._hackleApp.getAppSdkKey())return function(e,t,n,r,i){var o,s,a,l=(new RM).getInvocator(n.getInvocationType(),new QM);if(null===l)throw new Error("Failed to get invocator with invocationType:".concat(n.getInvocationType()));var c=new eA(l),u=new Uk(e,t,c,i,r),h=new kk(new Ck(n)),d=null!==(a=null===(s=null===(o=n.getAppMode)||void 0===o?void 0:o.call(n))||void 0===s?void 0:s.toLowerCase())&&void 0!==a?a:vn.native,p=h.config();return u.create(d,p)}(e,n,window._hackleApp,c,i)}catch(e){Lk.error("Unexpected exception while check WebApp client: ".concat(e))}return Bk(e,n,c)}function Bk(e,t,n){var r,i,o=hM.sdk(e,t);if(Nk)return Lk.debug("use already exists hackleClient"),Nk;var s=new pn;s.initialize();var a=new sT,l=dn.getInstance({days:3650,isCrossSubdomain:!0,sameSite:t.sameSiteCookie,isSecure:t.secureCookie}),c=hM.isBeaconSupported(),u=kM.intercept(o,CM.create()),h=kM.intercept(o,IM.create()),d=u;c&&(d=h);var p=new dM,f=new pM(p,new fM("setTimeout"),hM.pollingIntervalMillis(t)),m=new HM(o,aT.postfix(a,"_".concat(e.slice(0,8)))),g=new vM(uT.clientFetch(t.sdkUrl,o.key),u),y=new xM(m,g);p.add(y);var v=new bM(uT.userTargets(t.sdkUrl),u),_=new _M(uT.userCohorts(t.sdkUrl),u),b=new QT(n.pageManager),w=new nT(aT.postfix(l,"_".concat(e))),x=w.getUser(),E=t.user||null,T=new tT(fn(),w,v,_,b,n.pageManager,S.instance,x,E);p.add(T);var M=new oT(t.sessionTimeoutMillis,aT.postfix(l,"_".concat(e.slice(8))));T.addListener(M);var A=new zE(a,"".concat("hackle-repository-storage","_").concat(e),100),k=new EM(uT.clientDispatch(t.eventUrl),u),C=k;c&&(C=new EM(uT.beaconDispatch(t.eventUrl,o.key),h));var I=new TM(A,k),P=new SM(k,C,I),O=new KM([new JM(hM.dedupIntervalMillis(t)),new XM(hM.dedupIntervalMillis(t))]),R=new MM(P,100,new fM("setTimeout"),500),D=new uS(R,O,M,T),L=new xk(M),N=new Sk(L);D.addDecorator(N);var F=new VM,z=new SS(new lT(l,"".concat("hackle-manual-override_ab","_").concat(e.slice(0,8)))),U=new SS(new lT(l,"".concat("hackle-manual-override_ff","_").concat(e.slice(0,8)))),j=new hT(aT.prefix(a,"".concat("hackle-iam-hide","_").concat(e.slice(0,8),"_"))),B=new PT(aT.prefix(a,"".concat("hackle-iam-impression","_").concat(e.slice(0,8),"_"))),V=new ZA(S.instance),H=new JA(V,D),$=PE.create(y,V,D,[z,U]),Y=new aA($,T),G=new KT(new ZT(aT.postfix(l,"_".concat(e.slice(0,8)))),b,$,T),q=new cS(T,$);M.addListener(G),M.addListener(q);var W=new wT($),K=new dT([new pT,new fT(new VT),new mT(new VT),new gT(j,S.instance),new yT(new HT),new vT(new HT),new _T(new $T),new bT(new $T)]),Z=new OT([new RT,new LT(K),new DT]),J=new NT(S.instance,W,Z),X=new zT([new UT,new jT(J),new BT(J)]),Q=new kT(uT.inAppMessageRenderer(t.cdnUrl,t.IAM_RENDERER_VERSION_HEADER)),ee=new xT(AT.create(Q),J,X),te=TS.get("delegatingEvaluator"),ne=new _A(new fA(te),new xA,H),re=new SA(B),ie=new MA(ee,re),oe=new AA,se=new yk(j,B,ne),ae=new bk($,ne),le=new kA(S.instance,new fM("setTimeout")),ce=new KA(aT.prefix(a,"".concat("hackle-campaign-delay","_").concat(e.slice(0,8),"_"))),ue=new PA(le,new Map,ce),he=new _k($,se,H),de=new LA(y,T,oe,ae,he,ie,L),pe=[new jA(de,ue),new BA(de,ue),new wk(de,ue)],fe=new VA(new HA,new NA(pe));le.listener=fe;var me=new FT(new CT(TS.get("targetMatcher"))),ge=new YA(y,me,he),ye=new GA(fe),ve=new qA(ge,ye),_e=new WA(oe,ue),be=new pA(fe,ce,ve,_e,R,S.instance);T.addListener(be);var we=new cM(y);new lM(R,we);var xe=new sA($,T);n.addEngagementListener(xe);var Se=new nA($,T);t.automaticPageTracking&&n.addPageListener(Se);var Ee=new FM(TS.get("targetMatcher")),Te=new BM(l,"hackle-split-url-redirected",{days:3472222222222222e-20}),Me=new NM(y,Ee,Te,$),Ae=new UM(new jM(b),new YT,Te,F),ke=new DM(Me,Ae,T,$);n.addPageListener(ke);var Ce=new cT($,T,z,U),Ie=(null===(r=t.devTool)||void 0===r?void 0:r.userExplorer)&&"function"==typeof(null===(i=t.devTool)||void 0===i?void 0:i.userExplorer),Pe=t.devTool&&Ie?{manager:t.devTool,userExplorer:Ce}:void 0,Oe=new Dt(uT.monitoring(t.monitoringUrl),u,d,new fM("setTimeout"),6e4);At.addRegistry(Oe),n.addLifecycleListener(M),n.addLifecycleListener(s),n.addLifecycleListener(I),n.addLifecycleListener(D),n.addLifecycleListener(Oe),f.start();var Re,De,Le,Ne=GM.create(6e4,1),Fe=new ln($,f,M,T,Y,Ne,Se,ee,Pe);return Nk=Fe,(new RE).install($,T),Re=Date.now(),De=T.currentUser,Le=M.currentSessionId,(UE(x,De)?M.startNewSessionIfNeeded(De,Re):M.startNewSession(x,De,Re))===Le&&G.startNewCampaignIfNeeded(De,Re),Fe.onReady(function(){t.autoOpenDevTool&&(t.devTool?Fe.showUserExplorer():Lk.error("DevTool is not provided")),n.initialize(),F.dispatchDoneEventIfNeeded(),be.loadDelaySchedule()}),Fe}var Vk={createInstance:jk,getUserId:fn,setUserId:mn,removeUserId:gn,Logger:f};t.Bucket=z,t.Cohort=it,t.Container=X,t.ContainerGroup=Q,t.CoreVersion=oe,t.Decision=I,t.DecisionReason=D,t.DefaultBrowserPropertyProvider=lA,t.Delay=nt,t.EXPERIMENT_IMPLEMENTATION_TYPE=L,t.EmptyHackleRemoteConfig=O,t.EmptyParameterConfig=E,t.EventType=j,t.Experiment=N,t.FeatureFlagDecision=P,t.HackleInAppMessageActionImpl=rt,t.HackleSubscriptionOperations=Rk,t.HackleSubscriptionOperationsBuilder=Ok,t.IAM_ACTION_AREA=["BUTTON","IMAGE","MESSAGE","X_BUTTON"],t.IAM_ACTION_TYPE=we,t.IAM_BEHAVIOR=be,t.IAM_DISPLAY_TYPE=ye,t.IAM_HORIZONTAL_ALIGNMENT=Se,t.IAM_LAYOUT_TYPE=ve,t.IAM_ORIENTATION=_e,t.IAM_PLATFORM_TYPE=me,t.IAM_STATUS=fe,t.IAM_TIMETABLE_TYPE=Ee,t.IAM_TIMEUNIT=ge,t.IAM_VERTICAL_ALIGNMENT=xe,t.IdentifierType=B,t.IdentifiersBuilder=H,t.InAppMessage=Te,t.InAppMessageAction=Qe,t.InAppMessageAfterCondition=tt,t.InAppMessageAlignment=He,t.InAppMessageBackground=Xe,t.InAppMessageButton=Ke,t.InAppMessageButtonStyle=Je,t.InAppMessageContext=Ue,t.InAppMessageContextLayout=Ve,t.InAppMessageContextMessage=Be,t.InAppMessageDurationCap=Ne,t.InAppMessageEvaluateContext=et,t.InAppMessageEventFrequencyCap=De,t.InAppMessageEventTrigger=Oe,t.InAppMessageEventTriggerRule=Re,t.InAppMessageExperimentContext=je,t.InAppMessageIdentifierCap=Le,t.InAppMessageImage=$e,t.InAppMessageImageAutoScroll=Ye,t.InAppMessagePeriodAlways=Me,t.InAppMessagePeriodCustom=Ae,t.InAppMessagePositionalButton=Ze,t.InAppMessageTargetContext=Fe,t.InAppMessageText=Ge,t.InAppMessageTextAttribute=qe,t.InAppMessageTextStyle=We,t.InAppMessageTimetable=ke,t.InAppMessageTimetableAll=Ce,t.InAppMessageTimetableCustom=Ie,t.InAppMessageTimetableSlot=Pe,t.InAppMessageUserOverride=ze,t.Logger=f,t.MATCH_OPERATORS=ce,t.MATCH_TYPES=ae,t.MATCH_VALUE_TYPES=le,t.MetaVersion=se,t.ParameterConfiguration=R,t.PropertyOperations=en,t.PropertyOperationsBuilder=Qt,t.RemoteConfigDecision=C,t.RemoteConfigParameter=ee,t.RemoteConfigParameterValue=ne,t.RemoteConfigTargetRule=te,t.SEGMENT_TYPES=de,t.Segment=J,t.Slot=U,t.SplitUrlConfig=ot,t.SplitUrlTargets=st,t.TARGET_ACTION_TYPES=ue,t.TARGET_KEY_TYPES=he,t.Target=Y,t.TargetAction=K,t.TargetCondition=G,t.TargetKey=q,t.TargetMatch=W,t.TargetRule=Z,t.TargetingType=pe,t.UserTargetEvent=at,t.Variation=F,t.Version=ie,t.WebViewLifecycleCompositeManager=Dk,t.createInstance=jk,t.default=Vk,t.getUserId=fn,t.removeUserId=gn,t.resolveIdentifiers=V,t.sanitizeUser=$,t.setUserId=mn},72136(e,t,n){"use strict";n.d(t,{A:()=>r});const r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g},72181(e,t,n){"use strict";n.d(t,{Te:()=>E,XW:()=>T});var r=n(96540),i=n(40961);function o(e,t,n){let r,i=n.initialDeps??[];function o(){var o,s,a,l;let c;n.key&&(null==(o=n.debug)?void 0:o.call(n))&&(c=Date.now());const u=e();if(!(u.length!==i.length||u.some((e,t)=>i[t]!==e)))return r;let h;if(i=u,n.key&&(null==(s=n.debug)?void 0:s.call(n))&&(h=Date.now()),r=t(...u),n.key&&(null==(a=n.debug)?void 0:a.call(n))){const e=Math.round(100*(Date.now()-c))/100,t=Math.round(100*(Date.now()-h))/100,r=t/16,i=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c\u23f1 ${i(t,5)} /${i(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*r,120))}deg 100% 31%);`,null==n?void 0:n.key)}return null==(l=null==n?void 0:n.onChange)||l.call(n,r),r}return o.updateDeps=e=>{i=e},o}function s(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?`: ${t}`:""));return e}const a=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},l=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},c=e=>e,u=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},h=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=e=>{const{width:n,height:r}=e;t({width:Math.round(n),height:Math.round(r)})};if(i(l(n)),!r.ResizeObserver)return()=>{};const o=new r.ResizeObserver(t=>{const r=()=>{const e=t[0];if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return void i({width:t.inlineSize,height:t.blockSize})}i(l(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()});return o.observe(n,{box:"border-box"}),()=>{o.unobserve(n)}},d={passive:!0},p=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=()=>{t({width:n.innerWidth,height:n.innerHeight})};return r(),n.addEventListener("resize",r,d),()=>{n.removeEventListener("resize",r)}},f="undefined"==typeof window||"onscrollend"in window,m=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const o=e.options.useScrollendEvent&&f?()=>{}:a(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),s=r=>()=>{const{horizontal:s,isRtl:a}=e.options;i=s?n.scrollLeft*(a?-1:1):n.scrollTop,o(),t(i,r)},l=s(!0),c=s(!1);c(),n.addEventListener("scroll",l,d);const u=e.options.useScrollendEvent&&f;return u&&n.addEventListener("scrollend",c,d),()=>{n.removeEventListener("scroll",l),u&&n.removeEventListener("scrollend",c)}},g=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const o=e.options.useScrollendEvent&&f?()=>{}:a(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),s=r=>()=>{i=n[e.options.horizontal?"scrollX":"scrollY"],o(),t(i,r)},l=s(!0),c=s(!1);c(),n.addEventListener("scroll",l,d);const u=e.options.useScrollendEvent&&f;return u&&n.addEventListener("scrollend",c,d),()=>{n.removeEventListener("scroll",l),u&&n.removeEventListener("scrollend",c)}},y=(e,t,n)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},v=(e,{adjustments:t=0,behavior:n},r)=>{var i,o;const s=e+t;null==(o=null==(i=r.scrollElement)?void 0:i.scrollTo)||o.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})},_=(e,{adjustments:t=0,behavior:n},r)=>{var i,o;const s=e+t;null==(o=null==(i=r.scrollElement)?void 0:i.scrollTo)||o.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class b{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{const t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}):null);return{disconnect:()=>{var n;null==(n=t())||n.disconnect(),e=null},observe:e=>{var n;return null==(n=t())?void 0:n.observe(e,{box:"border-box"})},unobserve:e=>{var n;return null==(n=t())?void 0:n.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,n])=>{"undefined"===typeof n&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:c,rangeExtractor:u,onChange:()=>{},measureElement:y,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,n;null==(n=(t=this.options).onChange)||n.call(t,this,e)},this.maybeNotify=o(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"===typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const n=new Map,r=new Map;for(let i=t-1;i>=0;i--){const t=e[i];if(n.has(t.lane))continue;const o=r.get(t.lane);if(null==o||t.end>o.end?r.set(t.lane,t):t.end<o.end&&n.set(t.lane,!0),n.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=o(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,n,r,i)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:i}),{key:!1}),this.getMeasurements=o(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));const s=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const a=this.measurementsCache.slice(0,s);for(let l=s;l<e;l++){const e=r(l),i=1===this.options.lanes?a[l-1]:this.getFurthestMeasurement(a,l),s=i?i.end+this.options.gap:t+n,c=o.get(e),u="number"===typeof c?c:this.options.estimateSize(l),h=s+u,d=i?i.lane:l%this.options.lanes;a[l]={index:l,start:s,size:u,end:h,key:e,lane:d}}return this.measurementsCache=a,a},{key:!1,debug:()=>this.options.debug}),this.calculateRange=o(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,n,r)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const i=e.length-1,o=t=>e[t].start;if(e.length<=r)return{startIndex:0,endIndex:i};let s=w(0,i,o,n),a=s;if(1===r)for(;a<i&&e[a].end<n+t;)a++;else if(r>1){const o=Array(r).fill(0);for(;a<i&&o.some(e=>e<n+t);){const t=e[a];o[t.lane]=t.end,a++}const l=Array(r).fill(n+t);for(;s>=0&&l.some(e=>e>=n);){const t=e[s];l[t.lane]=t.start,s--}s=Math.max(0,s-s%r),a=Math.min(i,a+(r-1-a%r))}return{startIndex:s,endIndex:a}}({measurements:e,outerSize:t,scrollOffset:n,lanes:r}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=o(()=>{let e=null,t=null;const n=this.calculateRange();return n&&(e=n.startIndex,t=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,n,r,i)=>null===r||null===i?[]:e({startIndex:r,endIndex:i,overscan:t,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const n=this.indexFromElement(e),r=this.measurementsCache[n];if(!r)return;const i=r.key,o=this.elementsCache.get(i);o!==e&&(o&&this.observer.unobserve(o),this.observer.observe(e),this.elementsCache.set(i,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const n=this.measurementsCache[e];if(!n)return;const r=t-(this.itemSizeCache.get(n.key)??n.size);0!==r&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(n,r,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=r,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))})},this.getVirtualItems=o(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{const n=[];for(let r=0,i=e.length;r<i;r++){const i=t[e[r]];n.push(i)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return s(t[w(0,t.length-1,e=>s(t[e]).start,e)])},this.getOffsetForAlignment=(e,t,n=0)=>{const r=this.getSize(),i=this.getScrollOffset();"auto"===t&&(t=e>=i+r?"end":"start"),"center"===t?e+=(n-r)/2:"end"===t&&(e-=r);const o=this.getTotalSize()+this.options.scrollMargin-r;return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const r=this.getSize(),i=this.getScrollOffset();if("auto"===t)if(n.end>=i+r-this.options.scrollPaddingEnd)t="end";else{if(!(n.start<=i+this.options.scrollPaddingStart))return[i,t];t="start"}const o="end"===t?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,t,n.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:t="start",behavior:n}={})=>{"smooth"===n&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:t="auto",behavior:n}={})=>{"smooth"===n&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let r=0;const i=t=>{if(!this.targetWindow)return;const r=this.getOffsetForIndex(e,t);if(!r)return void console.warn("Failed to get offset for index:",e);const[i,s]=r;this._scrollToOffset(i,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const t=this.getScrollOffset(),n=this.getOffsetForIndex(e,s);n?((e,t)=>Math.abs(e-t)<1.01)(n[0],t)||o(s):console.warn("Failed to get offset for index:",e)})},o=t=>{this.targetWindow&&(r++,r<10?this.targetWindow.requestAnimationFrame(()=>i(t)):console.warn(`Failed to scroll to index ${e} after 10 attempts.`))};i(t)},this.scrollBy=(e,{behavior:t}={})=>{"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let n;if(0===t.length)n=this.options.paddingStart;else if(1===this.options.lanes)n=(null==(e=t[t.length-1])?void 0:e.end)??0;else{const e=Array(this.options.lanes).fill(null);let r=t.length-1;for(;r>=0&&e.some(e=>null===e);){const n=t[r];null===e[n.lane]&&(e[n.lane]=n.end),r--}n=Math.max(...e.filter(e=>null!==e))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const w=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else{if(!(o>r))return i;t=i-1}}return e>0?e-1:0};const x="undefined"!==typeof document?r.useLayoutEffect:r.useEffect;function S(e){const t=r.useReducer(()=>({}),{})[1],n={...e,onChange:(n,r)=>{var o;r?(0,i.flushSync)(t):t(),null==(o=e.onChange)||o.call(e,n,r)}},[o]=r.useState(()=>new b(n));return o.setOptions(n),x(()=>o._didMount(),[]),x(()=>o._willUpdate()),o}function E(e){return S({observeElementRect:h,observeElementOffset:m,scrollToFn:_,...e})}function T(e){return S({getScrollElement:()=>"undefined"!==typeof document?window:null,observeElementRect:p,observeElementOffset:g,scrollToFn:v,initialOffset:()=>"undefined"!==typeof document?window.scrollY:0,...e})}},72271(e,t,n){"use strict";var r=n(70453),i=n(36556),o=n(58859),s=n(80507),a=n(69675),l=r("%WeakMap%",!0),c=i("WeakMap.prototype.get",!0),u=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),d=i("WeakMap.prototype.delete",!0);e.exports=l?function(){var e,t,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+o(e))},delete:function(n){if(l&&n&&("object"===typeof n||"function"===typeof n)){if(e)return d(e,n)}else if(s&&t)return t.delete(n);return!1},get:function(n){return l&&n&&("object"===typeof n||"function"===typeof n)&&e?c(e,n):t&&t.get(n)},has:function(n){return l&&n&&("object"===typeof n||"function"===typeof n)&&e?h(e,n):!!t&&t.has(n)},set:function(n,r){l&&n&&("object"===typeof n||"function"===typeof n)?(e||(e=new l),u(e,n,r)):s&&(t||(t=s()),t.set(n,r))}};return n}:s},72369(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"pt",weekdays:"domingo_segunda-feira_ter\xe7a-feira_quarta-feira_quinta-feira_sexta-feira_s\xe1bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sab".split("_"),weekdaysMin:"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_Sa".split("_"),months:"janeiro_fevereiro_mar\xe7o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(e){return e+"\xba"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [\xe0s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [\xe0s] HH:mm"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"alguns segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"}};return n.default.locale(r,null,!0),r}(n(74353))},72559(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(61882);const i=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=t(s);if(null!=a&&(void 0===l?a===a&&!(0,r.A)(a):n(a,l)))var l=a,c=s}return c}},72635(e,t,n){"use strict";n.d(t,{Ay:()=>G});const r=e=>"string"===typeof e,i=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},o=e=>null==e?"":""+e,s=/###/g,a=e=>e&&e.indexOf("###")>-1?e.replace(s,"."):e,l=e=>!e||r(e),c=(e,t,n)=>{const i=r(t)?t.split("."):t;let o=0;for(;o<i.length-1;){if(l(e))return{};const t=a(i[o]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++o}return l(e)?{}:{obj:e,k:a(i[o])}},u=(e,t,n)=>{const{obj:r,k:i}=c(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let o=t[t.length-1],s=t.slice(0,t.length-1),a=c(e,s,Object);for(;void 0===a.obj&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=c(e,s,Object),a&&a.obj&&"undefined"!==typeof a.obj[`${a.k}.${o}`]&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=n},h=(e,t)=>{const{obj:n,k:r}=c(e,t);if(n)return n[r]},d=(e,t,n)=>{for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?r(e[i])||e[i]instanceof String||r(t[i])||t[i]instanceof String?n&&(e[i]=t[i]):d(e[i],t[i],n):e[i]=t[i]);return e},p=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const m=e=>r(e)?e.replace(/[&<>"'\/]/g,e=>f[e]):e;const g=[" ",",","?","!",";"],y=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),v=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let o=0;o<r.length;){if(!i||"object"!==typeof i)return;let e,t="";for(let s=o;s<r.length;++s)if(s!==o&&(t+=n),t+=r[s],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&s<r.length-1)continue;o+=s-o+1;break}i=e}return i},_=e=>e&&e.replace("_","-"),b={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class w{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||b,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(r(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new w(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new w(this.logger,e)}}var x=new w;class S{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,r]=e;for(let i=0;i<r;i++)t(...n)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[r,i]=t;for(let o=0;o<i;o++)r.apply(r,[e,...n])})}}}class E extends S{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,s=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],n&&(Array.isArray(n)?a.push(...n):r(n)&&o?a.push(...n.split(o)):a.push(n)));const l=h(this.data,a);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=a[0],t=a[1],n=a.slice(2).join(".")),!l&&s&&r(n)?v(this.data&&this.data[e]&&this.data[e][t],n,o):l}addResource(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(s=e.split("."),r=t,t=s[1]),this.addNamespaces(t),u(this.data,s,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const o in n)(r(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),r=n,n=t,t=s[1]),this.addNamespaces(t);let a=h(this.data,s)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?d(a,n,i):a={...a,...n},u(this.data,s,a),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var T={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,i))}),t}};const M={};class A extends S{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=x.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const r=g.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const i=y.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let o=!i.test(e);if(!o){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(o=!0)}return o})(e,n,i);if(s&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:r(o)?[o]:o};const s=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(s[0])>-1)&&(o=s.shift()),e=s.join(i)}return{key:e,namespaces:r(o)?[o]:o}}translate(e,t,n){if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t={...t}),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:s,namespaces:a}=this.extractFromKey(e[e.length-1],t),l=a[a.length-1],c=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(u){const e=t.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${e}${s}`,usedKey:s,exactUsedKey:s,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${e}${s}`}return i?{res:s,usedKey:s,exactUsedKey:s,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:s}const h=this.resolve(e,t);let d=h&&h.res;const p=h&&h.usedKey||s,f=h&&h.exactUsedKey||s,m=Object.prototype.toString.apply(d),g=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!r(d)&&"boolean"!==typeof d&&"number"!==typeof d;if(!(y&&d&&v&&["[object Number]","[object Function]","[object RegExp]"].indexOf(m)<0)||r(g)&&Array.isArray(d))if(y&&r(g)&&Array.isArray(d))d=d.join(g),d&&(d=this.extendTranslation(d,e,t,n));else{let i=!1,a=!1;const u=void 0!==t.count&&!r(t.count),p=A.hasDefaultValue(t),f=u?this.pluralResolver.getSuffix(c,t.count,t):"",m=t.ordinal&&u?this.pluralResolver.getSuffix(c,t.count,{ordinal:!1}):"",g=u&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),y=g&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${f}`]||t[`defaultValue${m}`]||t.defaultValue;!this.isValidLookup(d)&&p&&(i=!0,d=y),this.isValidLookup(d)||(a=!0,d=s);const v=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:d,_=p&&y!==d&&this.options.updateMissing;if(a||i||_){if(this.logger.log(_?"updateKey":"missingKey",c,l,s,_?y:d),o){const e=this.resolve(s,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,r)=>{const i=p&&r!==d?r:v;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,n,i,_,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,l,n,i,_,t),this.emit("missingKey",e,l,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?e.forEach(e=>{const n=this.pluralResolver.getSuffixes(e,t);g&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach(n=>{r([e],s+n,t[`defaultValue${n}`]||y)})}):r(e,s,y))}d=this.extendTranslation(d,e,t,h,n),a&&d===s&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${s}`),(a||i)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${s}`:s,i?d:void 0):this.options.parseMissingKeyHandler(d))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,d,{...t,ns:a}):`key '${s} (${this.language})' returned an object instead of string.`;return i?(h.res=e,h.usedParams=this.getUsedParamsDetails(t),h):e}if(o){const e=Array.isArray(d),n=e?[]:{},r=e?f:p;for(const i in d)if(Object.prototype.hasOwnProperty.call(d,i)){const e=`${r}${o}${i}`;n[i]=this.translate(e,{...t,joinArrays:!1,ns:a}),n[i]===e&&(n[i]=d[i])}d=n}}return i?(h.res=d,h.usedParams=this.getUsedParamsDetails(t),h):d}extendTranslation(e,t,n,i,o){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const a=r(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(a){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let c=n.replace&&!r(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),e=this.interpolator.interpolate(e,c,n.lng||this.language||i.usedLng,n),a){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&i&&i.res&&(n.lng=this.language||i.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return o&&o[0]===r[0]&&!n.context?(s.logger.warn(`It seems you are nesting recursively key: ${r[0]} in key: ${t[0]}`),null):s.translate(...r,t)},n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,l=r(a)?[a]:a;return void 0!==e&&null!==e&&l&&l.length&&!1!==n.applyPostProcessor&&(e=T.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,i,o,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const l=this.extractFromKey(e,a),c=l.key;n=c;let u=l.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const h=void 0!==a.count&&!r(a.count),d=h&&!a.ordinal&&0===a.count&&this.pluralResolver.shouldUseIntlApi(),p=void 0!==a.context&&(r(a.context)||"number"===typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);u.forEach(e=>{this.isValidLookup(t)||(s=e,!M[`${f[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(M[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${f.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach(n=>{if(this.isValidLookup(t))return;o=n;const r=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,c,n,e,a);else{let e;h&&(e=this.pluralResolver.getSuffix(n,a.count,a));const t=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(r.push(c+e),a.ordinal&&0===e.indexOf(i)&&r.push(c+e.replace(i,this.options.pluralSeparator)),d&&r.push(c+t)),p){const n=`${c}${this.options.contextSeparator}${a.context}`;r.push(n),h&&(r.push(n+e),a.ordinal&&0===e.indexOf(i)&&r.push(n+e.replace(i,this.options.pluralSeparator)),d&&r.push(n+t))}}let s;for(;s=r.pop();)this.isValidLookup(t)||(i=s,t=this.getResource(n,e,s,a))}))})}),{res:t,usedKey:n,exactUsedKey:i,usedLng:o,usedNS:s}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!r(e.replace);let i=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const e of t)delete i[e]}return i}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const k=e=>e.charAt(0).toUpperCase()+e.slice(1);class C{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=x.create("languageUtils")}getScriptPartFromCode(e){if(!(e=_(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=_(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(r(e)&&e.indexOf("-")>-1){if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(t){}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(e=>e.toLowerCase()):2===r.length?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=k(r[1].toLowerCase()))):3===r.length&&(r[0]=r[0].toLowerCase(),2===r[1].length&&(r[1]=r[1].toUpperCase()),"sgn"!==r[0]&&2===r[2].length&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=k(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=k(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),r(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return r(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):r(e)&&o(this.formatLanguageCode(e)),n.forEach(e=>{i.indexOf(e)<0&&o(this.formatLanguageCode(e))}),i}}let I=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],P={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const O=["v1","v2","v3"],R=["v4"],D={zero:0,one:1,two:2,few:3,many:4,other:5};class L{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=x.create("pluralResolver"),this.options.compatibilityJSON&&!R.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return I.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:P[t.fc]}})}),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const r=_("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(r,{type:i})}catch(n){if(!e.match(/-|_/))return;const r=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(r,t)}return this.pluralRulesCache[o]=s,s}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((e,t)=>D[e]-D[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):n.numbers.map(n=>this.getSuffix(e,n,t)):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"===typeof r?`_plural_${r.toString()}`:i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!O.includes(this.options.compatibilityJSON)}}const N=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=((e,t,n)=>{const r=h(e,n);return void 0!==r?r:h(t,n)})(e,t,n);return!s&&o&&r(n)&&(s=v(e,n,i),void 0===s&&(s=v(t,n,i))),s},F=e=>e.replace(/\$/g,"$$$$");class z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=x.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:o,suffix:s,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:h,nestingPrefixEscaped:d,nestingSuffix:f,nestingSuffixEscaped:g,nestingOptionsSeparator:y,maxReplaces:v,alwaysFormat:_}=e.interpolation;this.escape=void 0!==t?t:m,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?p(i):o||"{{",this.suffix=s?p(s):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?p(h):d||p("$t("),this.nestingSuffix=f?p(f):g||p(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=v||1e3,this.alwaysFormat=void 0!==_&&_,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,i){let s,a,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=e=>{if(e.indexOf(this.formatSeparator)<0){const r=N(t,c,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(r,void 0,n,{...i,...t,interpolationkey:e}):r}const r=e.split(this.formatSeparator),o=r.shift().trim(),s=r.join(this.formatSeparator).trim();return this.format(N(t,c,o,this.options.keySeparator,this.options.ignoreJSONStructure),s,n,{...i,...t,interpolationkey:o})};this.resetRegExp();const h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>F(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?F(this.escape(e)):F(e)}].forEach(t=>{for(l=0;s=t.regex.exec(e);){const n=s[1].trim();if(a=u(n),void 0===a)if("function"===typeof h){const t=h(e,s,i);a=r(t)?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))a="";else{if(d){a=s[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a=""}else r(a)||this.useRawValueToEscape||(a=o(a));const c=t.safeValue(a);if(e=e.replace(s[0],c),d?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let n,i,s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let i=`{${r[1]}`;e=r[0],i=this.interpolate(i,s);const o=i.match(/'/g),a=i.match(/"/g);(o&&o.length%2===0&&!a||a.length%2!==0)&&(i=i.replace(/'/g,'"'));try{s=JSON.parse(i),t&&(s={...t,...s})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${n}${i}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let c=[];s={...a},s=s.replace&&!r(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map(e=>e.trim());n[1]=e.shift(),c=e,u=!0}if(i=t(l.call(this,n[1].trim(),s),s),i&&n[0]===e&&!r(i))return i;r(i)||(i=o(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),i=""),u&&(i=c.reduce((e,t)=>this.format(e,t,a.lng,{...a,interpolationkey:n[1].trim()}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}const U=e=>{const t={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const s=r+JSON.stringify(o);let a=t[s];return a||(a=e(_(r),i),t[s]=a),a(n)}};class j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=x.create("formatter"),this.options=e,this.formats={number:U((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:U((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:U((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:U((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:U((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=U(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(e=>e.indexOf(")")>-1)){const e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,t)=>{const{formatName:i,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();n[o]||(n[o]=i),"false"===i&&(n[o]=!1),"true"===i&&(n[o]=!0),isNaN(i)||(n[o]=parseInt(i,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const s=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},a=s.locale||s.lng||r.locale||r.lng||n;t=this.formats[i](e,a,{...o,...r,...s})}catch(s){this.logger.warn(s)}return t}return this.logger.warn(`there was no format function for ${i}`),e},e)}}class B extends S{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=x.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const i={},o={},s={},a={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const s=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===o[s]&&(o[s]=!0):(this.state[s]=1,r=!1,void 0===o[s]&&(o[s]=!0),void 0===i[s]&&(i[s]=!0),void 0===a[t]&&(a[t]=!0)))}),r||(s[e]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),!t&&n&&this.store.addResourceBundle(i,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const s={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:i}=c(e,t,Object);r[i]=r[i]||[],r[i].push(n)})(n.loaded,[i],o),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{s[e]||(s[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===s[e][t]&&(s[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:o});this.readingCalls++;const s=(s,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}s&&a&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*i,o)},i):o(s,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,s);try{const n=a(e,t);n&&"function"===typeof n.then?n.then(e=>s(null,e)).catch(s):s(null,n)}catch(l){s(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();r(e)&&(e=this.languageUtils.toResolveHierarchy(e)),r(t)&&(t=[t]);const o=this.queueLoad(e,t,n,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(n,o)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&o&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,o),this.loaded(e,n,o)})}saveMissing(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){const l={...o,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=5===c.length?c(e,t,n,r,l):c(e,t,n,r),i&&"function"===typeof i.then?i.then(e=>s(null,e)).catch(s):s(null,i)}catch(a){s(a)}else c(e,t,n,r,s,l)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}const V=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),r(e[1])&&(t.defaultValue=e[1]),r(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),H=e=>(r(e.ns)&&(e.ns=[e.ns]),r(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),r(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),$=()=>{};class Y extends S{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=H(e),this.services={},this.logger=x,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(r(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const o=V();this.options={...o,...this.options,...H(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?x.init(s(this.modules.logger),this.options):x.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!==typeof Intl&&(t=j);const n=new C(this.options);this.store=new E(this.options.resources,this.options);const r=this.services;r.logger=x,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new L(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==o.interpolation.format||(r.formatter=s(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new z(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new B(s(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)}),this.modules.languageDetector&&(r.languageDetector=s(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=s(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new A(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=$),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const a=i(),l=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),a}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;const n=r(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>r(e))}this.options.preload&&this.options.preload.forEach(e=>r(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,n){const r=i();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=$),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&T.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const o=i();this.emit("languageChanging",e);const s=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},a=(e,r)=>{r?(s(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,o.resolve(function(){return n.t(...arguments)}),t&&t(e,function(){return n.t(...arguments)})},l=t=>{e||t||!this.services.languageDetector||(t=[]);const n=r(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||s(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,e=>{a(e,n)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e):l(this.services.languageDetector.detect()),o}getFixedT(e,t,n){var i=this;const o=function(e,t){let r;if("object"!==typeof t){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];r=i.options.overloadTranslationOptionHandler([e,t].concat(a))}else r={...t};r.lng=r.lng||o.lng,r.lngs=r.lngs||o.lngs,r.ns=r.ns||o.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||n||o.keyPrefix);const c=i.options.keySeparator||".";let u;return u=r.keyPrefix&&Array.isArray(e)?e.map(e=>`${r.keyPrefix}${c}${e}`):r.keyPrefix?`${r.keyPrefix}${c}${e}`:e,i.t(u,r)};return r(e)?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=n,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const o=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!o(n,e)||r&&!o(i,e)))}loadNamespaces(e,t){const n=i();return this.options.ns?(r(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=i();r(e)&&(e=[e]);const o=this.options.preload||[],s=e.filter(e=>o.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=o.concat(s),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new C(V());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new Y(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));return["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new E(this.store.data,r),i.services.resourceStore=i.store),i.translator=new A(i.services,r),i.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit(e,...n)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const G=Y.createInstance();G.createInstance=Y.createInstance;G.createInstance,G.dir,G.init,G.loadResources,G.reloadResources,G.use,G.changeLanguage,G.getFixedT,G.t,G.exists,G.setDefaultNamespace,G.hasLoadedNamespace,G.loadNamespaces,G.loadLanguages},72808(e,t,n){"use strict";n.d(t,{Cj:()=>y,W3:()=>l,bN:()=>d,bm:()=>f,h4:()=>a,hP:()=>u,n2:()=>v,y5:()=>p,yH:()=>c,zk:()=>g});var r=n(95200),i=n(71111),o=n(94837),s=n(18845);function a(e,t=[]){return[e,t]}function l(e,t){const[n,r]=e;return[n,[...r,t]]}function c(e,t){const n=e[1];for(const r of n){if(t(r,r[0].type))return!0}return!1}function u(e,t){return c(e,(e,n)=>t.includes(n))}function h(e){const t=(0,r.Se)(s.O);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function d(e){const[t,n]=e;let r=JSON.stringify(t);function i(e){"string"===typeof r?r="string"===typeof e?r+e:[h(r),e]:r.push("string"===typeof e?h(e):e)}for(const s of n){const[e,t]=s;if(i(`\n${JSON.stringify(e)}\n`),"string"===typeof t||t instanceof Uint8Array)i(t);else{let e;try{e=JSON.stringify(t)}catch{e=JSON.stringify((0,o.S8)(t))}i(e)}}return"string"===typeof r?r:function(e){const t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}(r)}function p(e){return[{type:"span"},e]}function f(e){const t="string"===typeof e.data?h(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const m={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function g(e){return m[e]}function y(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function v(e,t,n,r){const o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:(0,i.SB)(r)},...o&&{trace:o}}}},73093(e,t,n){"use strict";var r=n(94459);e.exports=function(e){return r(e)||0===e?e:e<0?-1:1}},73126(e,t,n){"use strict";var r=n(66743),i=n(69675),o=n(10076),s=n(13144);e.exports=function(e){if(e.length<1||"function"!==typeof e[0])throw new i("a function is required");return s(r,o,e)}},74022(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(64741),i=n(23149);const o=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,i.A)(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),(0,r.A)(e,t,{leading:o,maxWait:t,trailing:s})}},74353(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",l="week",c="month",u="quarter",h="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),o=n-i<0,s=t.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:h,w:l,d:a,D:d,h:s,m:o,s:i,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",b={};b[_]=g;var w="$isDayjsObject",x=function(e){return e instanceof M||!(!e||!e[w])},S=function e(t,n,r){var i;if(!t)return _;if("string"==typeof t){var o=t.toLowerCase();b[o]&&(i=o),n&&(b[o]=n,i=o);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var a=t.name;b[a]=t,i=a}return!r&&i&&(_=i),i||!r&&_},E=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new M(n)},T=v;T.l=S,T.i=x,T.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return T},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return E(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<E(e)},y.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!T.u(t)||t,u=T.p(e),p=function(e,t){var i=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(a)},f=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case h:return r?p(1,0):p(31,11);case c:return r?p(1,g):p(0,g+1);case l:var _=this.$locale().weekStart||0,b=(m<_?m+7:m)-_;return p(r?y-b:y+(6-b),g);case a:case d:return f(v+"Hours",0);case s:return f(v+"Minutes",1);case o:return f(v+"Seconds",2);case i:return f(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,l=T.p(e),u="set"+(this.$u?"UTC":""),p=(n={},n[a]=u+"Date",n[d]=u+"Date",n[c]=u+"Month",n[h]=u+"FullYear",n[s]=u+"Hours",n[o]=u+"Minutes",n[i]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],f=l===a?this.$D+(t-this.$W):t;if(l===c||l===h){var m=this.clone().set(d,1);m.$d[p](f),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[T.p(e)]()},y.add=function(r,u){var d,p=this;r=Number(r);var f=T.p(u),m=function(e){var t=E(p);return T.w(t.date(t.date()+Math.round(e*r)),p)};if(f===c)return this.set(c,this.$M+r);if(f===h)return this.set(h,this.$y+r);if(f===a)return m(1);if(f===l)return m(7);var g=(d={},d[o]=t,d[s]=n,d[i]=e,d)[f]||1,y=this.$d.getTime()+r*g;return T.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=T.z(this),o=this.$H,s=this.$m,a=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,h=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},d=function(e){return T.s(o%12||12,e,"0")},f=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(m,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return T.s(t.$y,4,"0");case"M":return a+1;case"MM":return T.s(a+1,2,"0");case"MMM":return h(n.monthsShort,a,c,3);case"MMMM":return h(c,a);case"D":return t.$D;case"DD":return T.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,l,2);case"ddd":return h(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return T.s(o,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return f(o,s,!0);case"A":return f(o,s,!1);case"m":return String(s);case"mm":return T.s(s,2,"0");case"s":return String(t.$s);case"ss":return T.s(t.$s,2,"0");case"SSS":return T.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,d,p){var f,m=this,g=T.p(d),y=E(r),v=(y.utcOffset()-this.utcOffset())*t,_=this-y,b=function(){return T.m(m,y)};switch(g){case h:f=b()/12;break;case c:f=b();break;case u:f=b()/3;break;case l:f=(_-v)/6048e5;break;case a:f=(_-v)/864e5;break;case s:f=_/n;break;case o:f=_/t;break;case i:f=_/e;break;default:f=_}return p?f:T.a(f)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return T.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),A=M.prototype;return E.prototype=A,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",c],["$y",h],["$D",d]].forEach(function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),E.extend=function(e,t){return e.$i||(e(t,M,E),e.$i=!0),E},E.locale=S,E.isDayjs=x,E.unix=function(e){return E(1e3*e)},E.en=b[_],E.Ls=b,E.p={},E}()},74611(e,t,n){"use strict";n.d(t,{E1:()=>d,Ef:()=>o,JD:()=>a,Lc:()=>f,Le:()=>h,Sn:()=>c,fs:()=>l,i_:()=>r,jG:()=>p,sy:()=>i,uT:()=>s,xc:()=>u});const r="sentry.source",i="sentry.sample_rate",o="sentry.previous_trace_sample_rate",s="sentry.op",a="sentry.origin",l="sentry.idle_span_finish_reason",c="sentry.measurement_unit",u="sentry.measurement_value",h="sentry.custom_span_name",d="sentry.profile_id",p="sentry.exclusive_time",f="sentry.link.type"},74733(e,t,n){"use strict";n.d(t,{Z:()=>o,e:()=>i});var r=n(9600);function i(){return(0,r.eJ)()}function o(){return(0,r.eJ)().substring(16)}},74765(e){"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:r,RFC3986:i}},75330(e,t,n){"use strict";n.d(t,{LE:()=>l,V7:()=>c,lu:()=>u});var r=n(31158),i=n(71111),o=n(72808),s=n(84347),a=n(5915);function l(e,t,n,r){const s=(0,o.Cj)(n),a={sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:(0,i.SB)(t)}},l="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return(0,o.h4)(a,[l])}function c(e,t,n,r){const i=(0,o.Cj)(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){if(!t)return e;const n=e.sdk||{};e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0}}(e,n?.sdk);const a=(0,o.n2)(e,i,r,t);delete e.sdkProcessingMetadata;const l=[{type:s},e];return(0,o.h4)(a,[l])}function u(e,t){const n=(0,r.k1)(e[0]),l=t?.getDsn(),c=t?.getOptions().tunnel,u={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!c&&l&&{dsn:(0,i.SB)(l)}},{beforeSendSpan:h,ignoreSpans:d}=t?.getOptions()||{},p=d?.length?e.filter(e=>!(0,s.e)((0,a.et)(e),d)):e,f=e.length-p.length;f&&t?.recordDroppedEvent("before_send","span",f);const m=h?e=>{const t=(0,a.et)(e),n=h(t);return n||((0,a.xl)(),t)}:a.et,g=[];for(const r of p){const e=m(r);e&&g.push((0,o.y5)(e))}return(0,o.h4)(u,g)}},75388(e,t,n){var r,i;r=function(){"use strict";var e=function(e,t,n,r){var i={features:null,bind:function(e,t,n,r){var i=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var o=0;o<t.length;o++)t[o]&&e[i](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){i.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){i.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(i.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(i.features)return i.features;var e=i.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var o=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);o&&o.length>0&&(o=parseInt(o[1],10))>=1&&o<8&&(n.isOldIOSPhone=!0)}var s=r.match(/Android\s([0-9\.]*)/),a=s?s[1]:0;(a=parseFloat(a))>=1&&(a<4.4&&(n.isOldAndroid=!0),n.androidVersion=a),n.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var l,c,u=["transform","perspective","animationName"],h=["","webkit","Moz","ms","O"],d=0;d<4;d++){t=h[d];for(var p=0;p<3;p++)l=u[p],c=t+(t?l.charAt(0).toUpperCase()+l.slice(1):l),!n[l]&&c in e&&(n[l]=c);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var f=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-f)),r=window.setTimeout(function(){e(t+n)},n);return f=t+n,r},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i.features=n,n}};i.detectFeatures(),i.features.oldIE&&(i.bind=function(e,t,n,r){t=t.split(" ");for(var i,o=(r?"detach":"attach")+"Event",s=function(){n.handleEvent.call(n)},a=0;a<t.length;a++)if(i=t[a])if("object"===typeof n&&n.handleEvent){if(r){if(!n["oldIE"+i])return!1}else n["oldIE"+i]=s;e[o]("on"+i,n["oldIE"+i])}else e[o]("on"+i,n)});var o=this,s=25,a=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};i.extend(l,r);var c,u,h,d,p,f,m,g,y,v,_,b,w,x,S,E,T,M,A,k,C,I,P,O,R,D,L,N,F,z,U,j,B,V,H,$,Y,G,q,W,K,Z,J,X,Q,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,he=function(){return{x:0,y:0}},de=he(),pe=he(),fe=he(),me={},ge=0,ye={},ve=he(),_e=0,be=!0,we=[],xe={},Se=!1,Ee=function(e,t){i.extend(o,t.publicMethods),we.push(e)},Te=function(e){var t=Qt();return e>t-1?e-t:e<0?t+e:e},Me={},Ae=function(e,t){return Me[e]||(Me[e]=[]),Me[e].push(t)},ke=function(e){var t=Me[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(o,n)}},Ce=function(){return(new Date).getTime()},Ie=function(e){le=e,o.bg.style.opacity=e*l.bgOpacity},Pe=function(e,t,n,r,i){(!Se||i&&i!==o.currItem)&&(r/=i?i.fitRatio:o.currItem.fitRatio),e[I]=b+t+"px, "+n+"px"+w+" scale("+r+")"},Oe=function(e){re&&(e&&(v>o.currItem.fitRatio?Se||(hn(o.currItem,!1,!0),Se=!0):Se&&(hn(o.currItem),Se=!1)),Pe(re,fe.x,fe.y,v))},Re=function(e){e.container&&Pe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},De=function(e,t){t[I]=b+e+"px, 0px"+w},Le=function(e,t){if(!l.loop&&t){var n=d+(ve.x*ge-e)/ve.x,r=Math.round(e-vt.x);(n<0&&r>0||n>=Qt()-1&&r<0)&&(e=vt.x+r*l.mainScrollEndFriction)}vt.x=e,De(e,p)},Ne=function(e,t){var n=_t[e]-ye[e];return pe[e]+de[e]+n-n*(t/_)},Fe=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},ze=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Ue=null,je=function(){Ue&&(i.unbind(document,"mousemove",je),i.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,ke("mouseUsed")),Ue=setTimeout(function(){Ue=null},100)},Be=function(){i.bind(document,"keydown",o),U.transform&&i.bind(o.scrollWrap,"click",o),l.mouseUsed||i.bind(document,"mousemove",je),i.bind(window,"resize scroll orientationchange",o),ke("bindEvents")},Ve=function(){i.unbind(window,"resize scroll orientationchange",o),i.unbind(window,"scroll",y.scroll),i.unbind(document,"keydown",o),i.unbind(document,"mousemove",je),U.transform&&i.unbind(o.scrollWrap,"click",o),q&&i.unbind(window,m,o),clearTimeout(j),ke("unbindEvents")},He=function(e,t){var n=an(o.currItem,me,e);return t&&(ne=n),n},$e=function(e){return e||(e=o.currItem),e.initialZoomLevel},Ye=function(e){return e||(e=o.currItem),e.w>0?l.maxSpreadZoom:1},Ge=function(e,t,n,r){return r===o.currItem.initialZoomLevel?(n[e]=o.currItem.initialPosition[e],!0):(n[e]=Ne(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},qe=function(){if(I){var t=U.perspective&&!O;return b="translate"+(t?"3d(":"("),void(w=U.perspective?", 0px)":")")}I="left",i.addClass(e,"pswp--ie"),De=function(e,t){t.left=e+"px"},Re=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,i=t*e.h;n.width=r+"px",n.height=i+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Oe=function(){if(re){var e=re,t=o.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,i=n*t.h;e.width=r+"px",e.height=i+"px",e.left=fe.x+"px",e.top=fe.y+"px"}}},We=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,o[t]()))},Ke=function(e){e&&(Z||K||ie||Y)&&(e.preventDefault(),e.stopPropagation())},Ze=function(){o.setScrollOffset(0,i.getScrollY())},Je={},Xe=0,Qe=function(e){Je[e]&&(Je[e].raf&&D(Je[e].raf),Xe--,delete Je[e])},et=function(e){Je[e]&&Qe(e),Je[e]||(Xe++,Je[e]={})},tt=function(){for(var e in Je)Je.hasOwnProperty(e)&&Qe(e)},nt=function(e,t,n,r,i,o,s){var a,l=Ce();et(e);var c=function(){if(Je[e]){if((a=Ce()-l)>=r)return Qe(e),o(n),void(s&&s());o((n-t)*i(a/r)+t),Je[e].raf=R(c)}};c()},rt={shout:ke,listen:Ae,viewportSize:me,options:l,isMainScrollAnimating:function(){return ie},getZoomLevel:function(){return v},getCurrentIndex:function(){return d},isDragging:function(){return q},isZooming:function(){return ee},setScrollOffset:function(e,t){ye.x=e,z=ye.y=t,ke("updateScrollOffset",ye)},applyZoomPan:function(e,t,n,r){fe.x=t,fe.y=n,v=e,Oe(r)},init:function(){if(!c&&!u){var n;o.framework=i,o.template=e,o.bg=i.getChildByClass(e,"pswp__bg"),L=e.className,c=!0,U=i.detectFeatures(),R=U.raf,D=U.caf,I=U.transform,F=U.oldIE,o.scrollWrap=i.getChildByClass(e,"pswp__scroll-wrap"),o.container=i.getChildByClass(o.scrollWrap,"pswp__container"),p=o.container.style,o.itemHolders=E=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],E[0].el.style.display=E[2].el.style.display="none",qe(),y={resize:o.updateSize,orientationchange:function(){clearTimeout(j),j=setTimeout(function(){me.x!==o.scrollWrap.clientWidth&&o.updateSize()},500)},scroll:Ze,keydown:We,click:Ke};var r=U.isOldIOSPhone||U.isOldAndroid||U.isMobileOpera;for(U.animationName&&U.transform&&!r||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<we.length;n++)o["init"+we[n]]();t&&(o.ui=new t(o,i)).init(),ke("firstUpdate"),d=d||l.index||0,(isNaN(d)||d<0||d>=Qt())&&(d=0),o.currItem=Xt(d),(U.isOldIOSPhone||U.isOldAndroid)&&(be=!1),e.setAttribute("aria-hidden","false"),l.modal&&(be?e.style.position="fixed":(e.style.position="absolute",e.style.top=i.getScrollY()+"px")),void 0===z&&(ke("initialLayout"),z=N=i.getScrollY());var s="pswp--open ";for(l.mainClass&&(s+=l.mainClass+" "),l.showHideOpacity&&(s+="pswp--animate_opacity "),s+=O?"pswp--touch":"pswp--notouch",s+=U.animationName?" pswp--css_animation":"",s+=U.svg?" pswp--svg":"",i.addClass(e,s),o.updateSize(),f=-1,_e=null,n=0;n<a;n++)De((n+f)*ve.x,E[n].el.style);F||i.bind(o.scrollWrap,g,o),Ae("initialZoomInEnd",function(){o.setContent(E[0],d-1),o.setContent(E[2],d+1),E[0].el.style.display=E[2].el.style.display="block",l.focus&&e.focus(),Be()}),o.setContent(E[1],d),o.updateCurrItem(),ke("afterInit"),be||(x=setInterval(function(){Xe||q||ee||v!==o.currItem.initialZoomLevel||o.updateSize()},1e3)),i.addClass(e,"pswp--visible")}},close:function(){c&&(c=!1,u=!0,ke("close"),Ve(),en(o.currItem,null,!0,o.destroy))},destroy:function(){ke("destroy"),Wt&&clearTimeout(Wt),e.setAttribute("aria-hidden","true"),e.className=L,x&&clearInterval(x),i.unbind(o.scrollWrap,g,o),i.unbind(window,"scroll",o),Et(),tt(),Me=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),fe.x=e,fe.y=t,Oe()},handleEvent:function(e){e=e||window.event,y[e.type]&&y[e.type](e)},goTo:function(e){var t=(e=Te(e))-d;_e=t,d=e,o.currItem=Xt(d),ge-=t,Le(ve.x*ge),tt(),ie=!1,o.updateCurrItem()},next:function(){o.goTo(d+1)},prev:function(){o.goTo(d-1)},updateCurrZoomItem:function(e){if(e&&ke("beforeChange",0),E[1].el.children.length){var t=E[1].el.children[0];re=i.hasClass(t,"pswp__zoom-wrap")?t.style:null}else re=null;ne=o.currItem.bounds,_=v=o.currItem.initialZoomLevel,fe.x=ne.center.x,fe.y=ne.center.y,e&&ke("afterChange")},invalidateCurrItems:function(){S=!0;for(var e=0;e<a;e++)E[e].item&&(E[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==_e){var t,n=Math.abs(_e);if(!(e&&n<2)){o.currItem=Xt(d),Se=!1,ke("beforeChange",_e),n>=a&&(f+=_e+(_e>0?-a:a),n=a);for(var r=0;r<n;r++)_e>0?(t=E.shift(),E[a-1]=t,f++,De((f+2)*ve.x,t.el.style),o.setContent(t,d-n+r+1+1)):(t=E.pop(),E.unshift(t),f--,De(f*ve.x,t.el.style),o.setContent(t,d+n-r-1-1));if(re&&1===Math.abs(_e)){var i=Xt(T);i.initialZoomLevel!==v&&(an(i,me),hn(i),Re(i))}_e=0,o.updateCurrZoomItem(),T=d,ke("afterChange")}}},updateSize:function(t){if(!be&&l.modal){var n=i.getScrollY();if(z!==n&&(e.style.top=n+"px",z=n),!t&&xe.x===window.innerWidth&&xe.y===window.innerHeight)return;xe.x=window.innerWidth,xe.y=window.innerHeight,e.style.height=xe.y+"px"}if(me.x=o.scrollWrap.clientWidth,me.y=o.scrollWrap.clientHeight,Ze(),ve.x=me.x+Math.round(me.x*l.spacing),ve.y=me.y,Le(ve.x*ge),ke("beforeResize"),void 0!==f){for(var r,s,c,u=0;u<a;u++)r=E[u],De((u+f)*ve.x,r.el.style),c=d+u-1,l.loop&&Qt()>2&&(c=Te(c)),(s=Xt(c))&&(S||s.needsUpdate||!s.bounds)?(o.cleanSlide(s),o.setContent(r,c),1===u&&(o.currItem=s,o.updateCurrZoomItem(!0)),s.needsUpdate=!1):-1===r.index&&c>=0&&o.setContent(r,c),s&&s.container&&(an(s,me),hn(s),Re(s));S=!1}_=v=o.currItem.initialZoomLevel,(ne=o.currItem.bounds)&&(fe.x=ne.center.x,fe.y=ne.center.y,Oe(!0)),ke("resize")},zoomTo:function(e,t,n,r,o){t&&(_=v,_t.x=Math.abs(t.x)-fe.x,_t.y=Math.abs(t.y)-fe.y,Fe(pe,fe));var s=He(e,!1),a={};Ge("x",s,a,e),Ge("y",s,a,e);var l=v,c={x:fe.x,y:fe.y};ze(a);var u=function(t){1===t?(v=e,fe.x=a.x,fe.y=a.y):(v=(e-l)*t+l,fe.x=(a.x-c.x)*t+c.x,fe.y=(a.y-c.y)*t+c.y),o&&o(t),Oe(1===t)};n?nt("customZoomTo",0,1,n,r||i.easing.sine.inOut,u):u(1)}},it=30,ot=10,st={},at={},lt={},ct={},ut={},ht=[],dt={},pt=[],ft={},mt=0,gt=he(),yt=0,vt=he(),_t=he(),bt=he(),wt=function(e,t){return e.x===t.x&&e.y===t.y},xt=function(e,t){return Math.abs(e.x-t.x)<s&&Math.abs(e.y-t.y)<s},St=function(e,t){return ft.x=Math.abs(e.x-t.x),ft.y=Math.abs(e.y-t.y),Math.sqrt(ft.x*ft.x+ft.y*ft.y)},Et=function(){J&&(D(J),J=null)},Tt=function(){q&&(J=R(Tt),Bt())},Mt=function(){return!("fit"===l.scaleMode&&v===o.currItem.initialZoomLevel)},At=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:At(e.parentNode,t))},kt={},Ct=function(e,t){return kt.prevent=!At(e.target,l.isClickableElement),ke("preventDragEvent",e,t,kt),kt.prevent},It=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Pt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Ot=function(e,t,n){if(e-V>50){var r=pt.length>2?pt.shift():{};r.x=t,r.y=n,pt.push(r),V=e}},Rt=function(){var e=fe.y-o.currItem.initialPosition.y;return 1-Math.abs(e/(me.y/2))},Dt={},Lt={},Nt=[],Ft=function(e){for(;Nt.length>0;)Nt.pop();return P?(ue=0,ht.forEach(function(e){0===ue?Nt[0]=e:1===ue&&(Nt[1]=e),ue++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Nt[0]=It(e.touches[0],Dt),e.touches.length>1&&(Nt[1]=It(e.touches[1],Lt))):(Dt.x=e.pageX,Dt.y=e.pageY,Dt.id="",Nt[0]=Dt),Nt},zt=function(e,t){var n,r,i,s,a=fe[e]+t[e],c=t[e]>0,u=vt.x+t.x,h=vt.x-dt.x;if(n=a>ne.min[e]||a<ne.max[e]?l.panEndFriction:1,a=fe[e]+t[e]*n,(l.allowPanToNext||v===o.currItem.initialZoomLevel)&&(re?"h"!==oe||"x"!==e||K||(c?(a>ne.min[e]&&(n=l.panEndFriction,ne.min[e],r=ne.min[e]-pe[e]),(r<=0||h<0)&&Qt()>1?(s=u,h<0&&u>dt.x&&(s=dt.x)):ne.min.x!==ne.max.x&&(i=a)):(a<ne.max[e]&&(n=l.panEndFriction,ne.max[e],r=pe[e]-ne.max[e]),(r<=0||h>0)&&Qt()>1?(s=u,h>0&&u<dt.x&&(s=dt.x)):ne.min.x!==ne.max.x&&(i=a))):s=u,"x"===e))return void 0!==s&&(Le(s,!0),X=s!==dt.x),ne.min.x!==ne.max.x&&(void 0!==i?fe.x=i:X||(fe.x+=t.x*n)),void 0!==s;ie||X||v>o.currItem.fitRatio&&(fe[e]+=t[e]*n)},Ut=function(e){if(!("mousedown"===e.type&&e.button>0))if(Jt)e.preventDefault();else if(!G||"mousedown"!==e.type){if(Ct(e,!0)&&e.preventDefault(),ke("pointerDown"),P){var t=i.arraySearch(ht,e.pointerId,"id");t<0&&(t=ht.length),ht[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Ft(e),r=n.length;Q=null,tt(),q&&1!==r||(q=se=!0,i.bind(window,m,o),$=ce=ae=Y=X=Z=W=K=!1,oe=null,ke("firstTouchStart",n),Fe(pe,fe),de.x=de.y=0,Fe(ct,n[0]),Fe(ut,ct),dt.x=ve.x*ge,pt=[{x:ct.x,y:ct.y}],V=B=Ce(),He(v,!0),Et(),Tt()),!ee&&r>1&&!ie&&!X&&(_=v,K=!1,ee=W=!0,de.y=de.x=0,Fe(pe,fe),Fe(st,n[0]),Fe(at,n[1]),Pt(st,at,bt),_t.x=Math.abs(bt.x)-fe.x,_t.y=Math.abs(bt.y)-fe.y,te=St(st,at))}},jt=function(e){if(e.preventDefault(),P){var t=i.arraySearch(ht,e.pointerId,"id");if(t>-1){var n=ht[t];n.x=e.pageX,n.y=e.pageY}}if(q){var r=Ft(e);if(oe||Z||ee)Q=r;else if(vt.x!==ve.x*ge)oe="h";else{var o=Math.abs(r[0].x-ct.x)-Math.abs(r[0].y-ct.y);Math.abs(o)>=ot&&(oe=o>0?"h":"v",Q=r)}}},Bt=function(){if(Q){var e=Q.length;if(0!==e)if(Fe(st,Q[0]),lt.x=st.x-ct.x,lt.y=st.y-ct.y,ee&&e>1){if(ct.x=st.x,ct.y=st.y,!lt.x&&!lt.y&&wt(Q[1],at))return;Fe(at,Q[1]),K||(K=!0,ke("zoomGestureStarted"));var t=St(st,at),n=Gt(t);n>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(ce=!0);var r=1,i=$e(),s=Ye();if(n<i)if(l.pinchToClose&&!ce&&_<=o.currItem.initialZoomLevel){var a=1-(i-n)/(i/1.2);Ie(a),ke("onPinchClose",a),ae=!0}else(r=(i-n)/i)>1&&(r=1),n=i-r*(i/3);else n>s&&((r=(n-s)/(6*i))>1&&(r=1),n=s+r*i);r<0&&(r=0),Pt(st,at,gt),de.x+=gt.x-bt.x,de.y+=gt.y-bt.y,Fe(bt,gt),fe.x=Ne("x",n),fe.y=Ne("y",n),$=n>v,v=n,Oe()}else{if(!oe)return;if(se&&(se=!1,Math.abs(lt.x)>=ot&&(lt.x-=Q[0].x-ut.x),Math.abs(lt.y)>=ot&&(lt.y-=Q[0].y-ut.y)),ct.x=st.x,ct.y=st.y,0===lt.x&&0===lt.y)return;if("v"===oe&&l.closeOnVerticalDrag&&!Mt()){de.y+=lt.y,fe.y+=lt.y;var c=Rt();return Y=!0,ke("onVerticalDrag",c),Ie(c),void Oe()}Ot(Ce(),st.x,st.y),Z=!0,ne=o.currItem.bounds,zt("x",lt)||(zt("y",lt),ze(fe),Oe())}}},Vt=function(e){if(U.isOldAndroid){if(G&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(G),G=setTimeout(function(){G=0},600))}var t;if(ke("pointerUp"),Ct(e,!1)&&e.preventDefault(),P){var n=i.arraySearch(ht,e.pointerId,"id");if(n>-1)if(t=ht.splice(n,1)[0],navigator.msPointerEnabled){var r={4:"mouse",2:"touch",3:"pen"};t.type=r[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}else t.type=e.pointerType||"mouse"}var s,a=Ft(e),c=a.length;if("mouseup"===e.type&&(c=0),2===c)return Q=null,!0;1===c&&Fe(ut,a[0]),0!==c||oe||ie||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),ke("touchRelease",e,t));var u=-1;if(0===c&&(q=!1,i.unbind(window,m,o),Et(),ee?u=0:-1!==yt&&(u=Ce()-yt)),yt=1===c?Ce():-1,s=-1!==u&&u<150?"zoom":"swipe",ee&&c<2&&(ee=!1,1===c&&(s="zoomPointerUp"),ke("zoomGestureEnded")),Q=null,Z||K||ie||Y)if(tt(),H||(H=Ht()),H.calculateSwipeSpeed("x"),Y)if(Rt()<l.verticalDragRange)o.close();else{var h=fe.y,d=le;nt("verticalDrag",0,1,300,i.easing.cubic.out,function(e){fe.y=(o.currItem.initialPosition.y-h)*e+h,Ie((1-d)*e+d),Oe()}),ke("onVerticalDrag",1)}else{if((X||ie)&&0===c){if(Yt(s,H))return;s="zoomPointerUp"}ie||("swipe"===s?!X&&v>o.currItem.fitRatio&&$t(H):qt())}},Ht=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){pt.length>1?(e=Ce()-V+50,t=pt[pt.length-2][r]):(e=Ce()-B,t=ut[r]),n.lastFlickOffset[r]=ct[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(fe[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:fe[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,fe[e],n.backAnimDestination[e],t||300,i.easing.sine.out,function(t){fe[e]=t,Oe()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,fe[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Je.zoomPan&&(Je.zoomPan.raf=R(n.panAnimLoop),n.now=Ce(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Oe(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return fe.x=Math.round(fe.x),fe.y=Math.round(fe.y),Oe(),void Qe("zoomPan")}};return n},$t=function(e){if(e.calculateSwipeSpeed("y"),ne=o.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;et("zoomPan"),e.lastNow=Ce(),e.panAnimLoop()},Yt=function(e,t){var n,r,s;if(ie||(mt=d),"swipe"===e){var a=ct.x-ut.x,c=t.lastFlickDist.x<10;a>it&&(c||t.lastFlickOffset.x>20)?r=-1:a<-it&&(c||t.lastFlickOffset.x<-20)&&(r=1)}r&&((d+=r)<0?(d=l.loop?Qt()-1:0,s=!0):d>=Qt()&&(d=l.loop?0:Qt()-1,s=!0),s&&!l.loop||(_e+=r,ge-=r,n=!0));var u,h=ve.x*ge,p=Math.abs(h-vt.x);return n||h>vt.x===t.lastFlickSpeed.x>0?(u=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,u=Math.min(u,400),u=Math.max(u,250)):u=333,mt===d&&(n=!1),ie=!0,ke("mainScrollAnimStart"),nt("mainScroll",vt.x,h,u,i.easing.cubic.out,Le,function(){tt(),ie=!1,mt=-1,(n||mt!==d)&&o.updateCurrItem(),ke("mainScrollAnimComplete")}),n&&o.updateCurrItem(!0),n},Gt=function(e){return 1/te*e*_},qt=function(){var e=v,t=$e(),n=Ye();v<t?e=t:v>n&&(e=n);var r,s=1,a=le;return ae&&!$&&!ce&&v<t?(o.close(),!0):(ae&&(r=function(e){Ie((s-a)*e+a)}),o.zoomTo(e,0,200,i.easing.cubic.out,r),!0)};Ee("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,i){M=e+t,A=e+n,k=e+r,C=i?e+i:""};(P=U.pointerEvent)&&U.touch&&(U.touch=!1),P?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):U.touch?(e("touch","start","move","end","cancel"),O=!0):e("mouse","down","move","up"),m=A+" "+k+" "+C,g=M,P&&!O&&(O=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=O,y[M]=Ut,y[A]=jt,y[k]=Vt,C&&(y[C]=y[k]),U.touch&&(g+=" mousedown",m+=" mousemove mouseup",y.mousedown=y[M],y.mousemove=y[A],y.mouseup=y[k]),O||(l.allowPanToNext=!1)}}});var Wt,Kt,Zt,Jt,Xt,Qt,en=function(t,n,r,s){var a;Wt&&clearTimeout(Wt),Jt=!0,Zt=!0,t.initialLayout?(a=t.initialLayout,t.initialLayout=null):a=l.getThumbBoundsFn&&l.getThumbBoundsFn(d);var c=r?l.hideAnimationDuration:l.showAnimationDuration,u=function(){Qe("initialZoom"),r?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(Ie(1),n&&(n.style.display="block"),i.addClass(e,"pswp--animated-in"),ke("initialZoom"+(r?"OutEnd":"InEnd"))),s&&s(),Jt=!1};if(!c||!a||void 0===a.x)return ke("initialZoom"+(r?"Out":"In")),v=t.initialZoomLevel,Fe(fe,t.initialPosition),Oe(),e.style.opacity=r?0:1,Ie(1),void(c?setTimeout(function(){u()},c):u());!function(){var n=h,s=!o.currItem.src||o.currItem.loadError||l.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(v=a.w/t.w,fe.x=a.x,fe.y=a.y-N,o[s?"template":"bg"].style.opacity=.001,Oe()),et("initialZoom"),r&&!n&&i.removeClass(e,"pswp--animated-in"),s&&(r?i[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){i.addClass(e,"pswp--animate_opacity")},30)),Wt=setTimeout(function(){if(ke("initialZoom"+(r?"Out":"In")),r){var o=a.w/t.w,l={x:fe.x,y:fe.y},h=v,d=le,p=function(t){1===t?(v=o,fe.x=a.x,fe.y=a.y-z):(v=(o-h)*t+h,fe.x=(a.x-l.x)*t+l.x,fe.y=(a.y-z-l.y)*t+l.y),Oe(),s?e.style.opacity=1-t:Ie(d-t*d)};n?nt("initialZoom",0,1,c,i.easing.cubic.out,p,u):(p(1),Wt=setTimeout(u,c+20))}else v=t.initialZoomLevel,Fe(fe,t.initialPosition),Oe(),Ie(1),s?e.style.opacity=1:Ie(1),Wt=setTimeout(u,c+20)},r?25:90)}()},tn={},nn=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Kt.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},sn=function(e,t,n){var r=e.bounds;r.center.x=Math.round((tn.x-t)/2),r.center.y=Math.round((tn.y-n)/2)+e.vGap.top,r.max.x=t>tn.x?Math.round(tn.x-t):r.center.x,r.max.y=n>tn.y?Math.round(tn.y-n)+e.vGap.top:r.center.y,r.min.x=t>tn.x?0:r.center.x,r.min.y=n>tn.y?e.vGap.top:r.center.y},an=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),ke("parseVerticalMargin",e)),tn.x=t.x,tn.y=t.y-e.vGap.top-e.vGap.bottom,r){var i=tn.x/e.w,o=tn.y/e.h;e.fitRatio=i<o?i:o;var s=l.scaleMode;"orig"===s?n=1:"fit"===s&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=on())}if(!n)return;return sn(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=on(),e.initialPosition=e.bounds.center,e.bounds},ln=function(e,t,n,r,i,s){t.loadError||r&&(t.imageAppended=!0,hn(t,r,t===o.currItem&&Se),n.appendChild(r),s&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=i.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},un=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0},hn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),i=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=i+"px"),t.style.width=r+"px",t.style.height=i+"px"}},dn=function(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&ln(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}};Ee("Controller",{publicMethods:{lazyLoadItem:function(e){e=Te(e);var t=Xt(e);t&&(!t.loaded&&!t.loading||S)&&(ke("gettingData",e,t),t.src&&cn(t))},initController:function(){i.extend(l,rn,!0),o.items=Kt=n,Xt=o.getItemAt,Qt=l.getNumItemsFn,l.loop,Qt()<3&&(l.loop=!1),Ae("beforeChange",function(e){var t,n=l.preload,r=null===e||e>=0,i=Math.min(n[0],Qt()),s=Math.min(n[1],Qt());for(t=1;t<=(r?s:i);t++)o.lazyLoadItem(d+t);for(t=1;t<=(r?i:s);t++)o.lazyLoadItem(d-t)}),Ae("initialLayout",function(){o.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(d)}),Ae("mainScrollAnimComplete",dn),Ae("initialZoomInEnd",dn),Ae("destroy",function(){for(var e,t=0;t<Kt.length;t++)(e=Kt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null})},getItemAt:function(e){return e>=0&&void 0!==Kt[e]&&Kt[e]},allowProgressiveImg:function(){return l.forceProgressiveLoading||!O||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=Te(t));var n=o.getItemAt(e.index);n&&(n.container=null);var r,s=o.getItemAt(t);if(s){ke("gettingData",t,s),e.index=t,e.item=s;var a=s.container=i.createEl("pswp__zoom-wrap");if(!s.src&&s.html&&(s.html.tagName?a.appendChild(s.html):a.innerHTML=s.html),un(s),an(s,me),!s.src||s.loadError||s.loaded)s.src&&!s.loadError&&((r=i.createEl("pswp__img","img")).style.opacity=1,r.src=s.src,hn(s,r),ln(t,s,a,r,!0));else{if(s.loadComplete=function(n){if(c){if(e&&e.index===t){if(un(n,!0))return n.loadComplete=n.img=null,an(n,me),Re(n),void(e.index===d&&o.updateCurrZoomItem());n.imageAppended?!Jt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):U.transform&&(ie||Jt)?nn.push({item:n,baseDiv:a,img:n.img,index:t,holder:e,clearPlaceholder:!0}):ln(t,n,a,n.img,ie||Jt,!0)}n.loadComplete=null,n.img=null,ke("imageLoadComplete",t,n)}},i.features.transform){var u="pswp__img pswp__img--placeholder";u+=s.msrc?"":" pswp__img--placeholder--blank";var h=i.createEl(u,s.msrc?"img":"");s.msrc&&(h.src=s.msrc),hn(s,h),a.appendChild(h),s.placeholder=h}s.loading||cn(s),o.allowProgressiveImg()&&(!Zt&&U.transform?nn.push({item:s,baseDiv:a,img:s.img,index:t,holder:e}):ln(t,s,a,s.img,!0,!0))}Zt||t!==d?Re(s):(re=a.style,en(s,r||s.img)),e.el.innerHTML="",e.el.appendChild(a)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var pn,fn,mn={},gn=function(e,t,n){var r=document.createEvent("CustomEvent"),i={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,i),e.target.dispatchEvent(r)};Ee("Tap",{publicMethods:{initTap:function(){Ae("firstTouchStart",o.onTapStart),Ae("touchRelease",o.onTapRelease),Ae("destroy",function(){mn={},pn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(pn),pn=null)},onTapRelease:function(e,t){if(t&&!Z&&!W&&!Xe){var n=t;if(pn&&(clearTimeout(pn),pn=null,xt(n,mn)))return void ke("doubleTap",n);if("mouse"===t.type)return void gn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||i.hasClass(e.target,"pswp__single-tap"))return void gn(e,t);Fe(mn,n),pn=setTimeout(function(){gn(e,t),pn=null},300)}}}}),Ee("DesktopZoom",{publicMethods:{initDesktopZoom:function(){F||(O?Ae("mouseUsed",function(){o.setupDesktopZoom()}):o.setupDesktopZoom(!0))},setupDesktopZoom:function(t){fn={};var n="wheel mousewheel DOMMouseScroll";Ae("bindEvents",function(){i.bind(e,n,o.handleMouseWheel)}),Ae("unbindEvents",function(){fn&&i.unbind(e,n,o.handleMouseWheel)}),o.mouseZoomedIn=!1;var r,s=function(){o.mouseZoomedIn&&(i.removeClass(e,"pswp--zoomed-in"),o.mouseZoomedIn=!1),v<1?i.addClass(e,"pswp--zoom-allowed"):i.removeClass(e,"pswp--zoom-allowed"),a()},a=function(){r&&(i.removeClass(e,"pswp--dragging"),r=!1)};Ae("resize",s),Ae("afterChange",s),Ae("pointerDown",function(){o.mouseZoomedIn&&(r=!0,i.addClass(e,"pswp--dragging"))}),Ae("pointerUp",a),t||s()},handleMouseWheel:function(e){if(v<=o.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||Xe||q?e.preventDefault():I&&Math.abs(e.deltaY)>2&&(h=!0,o.close())),!0;if(e.stopPropagation(),fn.x=0,"deltaX"in e)1===e.deltaMode?(fn.x=18*e.deltaX,fn.y=18*e.deltaY):(fn.x=e.deltaX,fn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(fn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?fn.y=-.16*e.wheelDeltaY:fn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;fn.y=e.detail}He(v,!0);var t=fe.x-fn.x,n=fe.y-fn.y;(l.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),o.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:me.x/2+ye.x,y:me.y/2+ye.y};var n=l.getDoubleTapZoom(!0,o.currItem),r=v===n;o.mouseZoomedIn=!r,o.zoomTo(r?o.currItem.initialZoomLevel:n,t,333),i[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var yn,vn,_n,bn,wn,xn,Sn,En,Tn,Mn,An,kn,Cn={history:!0,galleryUID:1},In=function(){return An.hash.substring(1)},Pn=function(){yn&&clearTimeout(yn),_n&&clearTimeout(_n)},On=function(){var e=In(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var i=r[n].split("=");i.length<2||(t[i[0]]=i[1])}if(l.galleryPIDs){var o=t.pid;for(t.pid=0,n=0;n<Kt.length;n++)if(Kt[n].pid===o){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Rn=function(){if(_n&&clearTimeout(_n),Xe||q)_n=setTimeout(Rn,500);else{bn?clearTimeout(vn):bn=!0;var e=d+1,t=Xt(d);t.hasOwnProperty("pid")&&(e=t.pid);var n=Sn+"&gid="+l.galleryUID+"&pid="+e;En||-1===An.hash.indexOf(n)&&(Mn=!0);var r=An.href.split("#")[0]+"#"+n;kn?"#"+n!==window.location.hash&&history[En?"replaceState":"pushState"]("",document.title,r):En?An.replace(r):An.hash=n,En=!0,vn=setTimeout(function(){bn=!1},60)}};Ee("History",{publicMethods:{initHistory:function(){if(i.extend(l,Cn,!0),l.history){An=window.location,Mn=!1,Tn=!1,En=!1,Sn=In(),kn="pushState"in history,Sn.indexOf("gid=")>-1&&(Sn=(Sn=Sn.split("&gid=")[0]).split("?gid=")[0]),Ae("afterChange",o.updateURL),Ae("unbindEvents",function(){i.unbind(window,"hashchange",o.onHashChange)});var e=function(){xn=!0,Tn||(Mn?history.back():Sn?An.hash=Sn:kn?history.pushState("",document.title,An.pathname+An.search):An.hash=""),Pn()};Ae("unbindEvents",function(){h&&e()}),Ae("destroy",function(){xn||e()}),Ae("firstUpdate",function(){d=On().pid});var t=Sn.indexOf("pid=");t>-1&&"&"===(Sn=Sn.substring(0,t)).slice(-1)&&(Sn=Sn.slice(0,-1)),setTimeout(function(){c&&i.bind(window,"hashchange",o.onHashChange)},40)}},onHashChange:function(){if(In()===Sn)return Tn=!0,void o.close();bn||(wn=!0,o.goTo(On().pid),wn=!1)},updateURL:function(){Pn(),wn||(En?yn=setTimeout(Rn,800):Rn())}}}),i.extend(o,rt)};return e},void 0===(i="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=i)},75795(e,t,n){"use strict";var r=n(6549);if(r)try{r([],"length")}catch(i){r=null}e.exports=r},75880(e){"use strict";e.exports=Math.pow},76912(e,t,n){"use strict";n.d(t,{A:()=>r});const r=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},77786(e,t,n){"use strict";n.d(t,{A:()=>_e});var r=n(22080);const i=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var o=n(28562);const s=function(){try{var e=(0,o.A)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const a=function(e,t,n){"__proto__"==t&&s?s(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var l=n(66984),c=Object.prototype.hasOwnProperty;const u=function(e,t,n){var r=e[t];c.call(e,t)&&(0,l.A)(r,n)&&(void 0!==n||t in e)||a(e,t,n)};const h=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var l=t[o],c=r?r(n[l],e[l],l,n,e):void 0;void 0===c&&(c=e[l]),i?a(n,l,c):u(n,l,c)}return n};var d=n(27422);const p=function(e,t){return e&&h(t,(0,d.A)(t),e)};var f=n(2505),m=n(23149),g=n(97271);const y=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var v=Object.prototype.hasOwnProperty;const _=function(e){if(!(0,m.A)(e))return y(e);var t=(0,g.A)(e),n=[];for(var r in e)("constructor"!=r||!t&&v.call(e,r))&&n.push(r);return n};var b=n(38446);const w=function(e){return(0,b.A)(e)?(0,f.A)(e,!0):_(e)};const x=function(e,t){return e&&h(t,w(t),e)};var S=n(41917),E="object"==typeof exports&&exports&&!exports.nodeType&&exports,T=E&&"object"==typeof module&&module&&!module.nodeType&&module,M=T&&T.exports===E?S.A.Buffer:void 0,A=M?M.allocUnsafe:void 0;const k=function(e,t){if(t)return e.slice();var n=e.length,r=A?A(n):new e.constructor(n);return e.copy(r),r};const C=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var I=n(16489);const P=function(e,t){return h(e,(0,I.A)(e),t)};var O=n(76912),R=n(15647),D=n(13153);const L=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,O.A)(t,(0,I.A)(e)),e=(0,R.A)(e);return t}:D.A;const N=function(e,t){return h(e,L(e),t)};var F=n(19042),z=n(33831);const U=function(e){return(0,z.A)(e,w,L)};var j=n(12434),B=Object.prototype.hasOwnProperty;const V=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&B.call(e,"index")&&(n.index=e.index,n.input=e.input),n};var H=n(43988);const $=function(e){var t=new e.constructor(e.byteLength);return new H.A(t).set(new H.A(e)),t};const Y=function(e,t){var n=t?$(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var G=/\w*$/;const q=function(e){var t=new e.constructor(e.source,G.exec(e));return t.lastIndex=e.lastIndex,t};var W=n(241),K=W.A?W.A.prototype:void 0,Z=K?K.valueOf:void 0;const J=function(e){return Z?Object(Z.call(e)):{}};const X=function(e,t){var n=t?$(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const Q=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return $(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Y(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return X(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return q(e);case"[object Symbol]":return J(e)}};var ee=Object.create;const te=function(){function e(){}return function(t){if(!(0,m.A)(t))return{};if(ee)return ee(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const ne=function(e){return"function"!=typeof e.constructor||(0,g.A)(e)?{}:te((0,R.A)(e))};var re=n(92049),ie=n(41200),oe=n(53098);const se=function(e){return(0,oe.A)(e)&&"[object Map]"==(0,j.A)(e)};var ae=n(52789),le=n(64841),ce=le.A&&le.A.isMap;const ue=ce?(0,ae.A)(ce):se;const he=function(e){return(0,oe.A)(e)&&"[object Set]"==(0,j.A)(e)};var de=le.A&&le.A.isSet;const pe=de?(0,ae.A)(de):he;var fe="[object Arguments]",me="[object Function]",ge="[object Object]",ye={};ye[fe]=ye["[object Array]"]=ye["[object ArrayBuffer]"]=ye["[object DataView]"]=ye["[object Boolean]"]=ye["[object Date]"]=ye["[object Float32Array]"]=ye["[object Float64Array]"]=ye["[object Int8Array]"]=ye["[object Int16Array]"]=ye["[object Int32Array]"]=ye["[object Map]"]=ye["[object Number]"]=ye[ge]=ye["[object RegExp]"]=ye["[object Set]"]=ye["[object String]"]=ye["[object Symbol]"]=ye["[object Uint8Array]"]=ye["[object Uint8ClampedArray]"]=ye["[object Uint16Array]"]=ye["[object Uint32Array]"]=!0,ye["[object Error]"]=ye[me]=ye["[object WeakMap]"]=!1;const ve=function e(t,n,o,s,a,l){var c,h=1&n,f=2&n,g=4&n;if(o&&(c=a?o(t,s,a,l):o(t)),void 0!==c)return c;if(!(0,m.A)(t))return t;var y=(0,re.A)(t);if(y){if(c=V(t),!h)return C(t,c)}else{var v=(0,j.A)(t),_=v==me||"[object GeneratorFunction]"==v;if((0,ie.A)(t))return k(t,h);if(v==ge||v==fe||_&&!a){if(c=f||_?{}:ne(t),!h)return f?N(t,x(c,t)):P(t,p(c,t))}else{if(!ye[v])return a?t:{};c=Q(t,v,h)}}l||(l=new r.A);var b=l.get(t);if(b)return b;l.set(t,c),pe(t)?t.forEach(function(r){c.add(e(r,n,o,r,t,l))}):ue(t)&&t.forEach(function(r,i){c.set(i,e(r,n,o,i,t,l))});var S=g?f?U:F.A:f?w:d.A,E=y?void 0:S(t);return i(E||t,function(r,i){E&&(r=t[i=r]),u(c,i,e(r,n,o,i,t,l))}),c};const _e=function(e){return ve(e,5)}},78781(e,t,n){"use strict";n.d(t,{A:()=>u});var r=n(241);const i=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var o=n(92049),s=n(61882),a=r.A?r.A.prototype:void 0,l=a?a.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,o.A)(t))return i(t,e)+"";if((0,s.A)(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const u=function(e){return null==e?"":c(e)}},78854(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(96540),i=n(3576);const o=function(e){const t=r.useRef(e);return(0,i.A)(()=>{t.current=e}),r.useRef((...e)=>(0,t.current)(...e)).current}},79290(e){"use strict";e.exports=RangeError},79538(e){"use strict";e.exports=ReferenceError},79612(e){"use strict";e.exports=Object},79672(e,t,n){"use strict";n.d(t,{Cg:()=>p,Me:()=>a,Nd:()=>m,X4:()=>d,Y9:()=>v,YL:()=>c,a:()=>g,e$:()=>f,eM:()=>h,j4:()=>y});var r=n(4076),i=n(52820);function o(e,t=0,n=1){return(0,i.A)(e,t,n)}function s(e){if(e.type)return e;if("#"===e.charAt(0))return s(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map(e=>e+e)),n?`rgb${4===n.length?"a":""}(${n.map((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error((0,r.A)(9,e));let i,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),i=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error((0,r.A)(10,i))}else o=o.split(",");return o=o.map(e=>parseFloat(e)),{type:n,values:o,colorSpace:i}}const a=(e,t)=>{try{return(e=>{const t=s(e);return t.values.slice(0,3).map((e,n)=>t.type.includes("hsl")&&0!==n?`${e}%`:e).join(" ")})(e)}catch(n){return e}};function l(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((e,t)=>t<3?parseInt(e,10):e):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=t.includes("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function c(e){e=s(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=(e,t=(e+n/30)%12)=>i-o*Math.max(Math.min(t-3,9-t,1),-1);let c="rgb";const u=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),l({type:c,values:u})}function u(e){let t="hsl"===(e=s(e)).type||"hsla"===e.type?s(c(e)).values:e.values;return t=t.map(t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function h(e,t){const n=u(e),r=u(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function d(e,t){return e=s(e),t=o(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,l(e)}function p(e,t,n){try{return d(e,t)}catch(r){return e}}function f(e,t){if(e=s(e),t=o(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return l(e)}function m(e,t,n){try{return f(e,t)}catch(r){return e}}function g(e,t){if(e=s(e),t=o(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return l(e)}function y(e,t,n){try{return g(e,t)}catch(r){return e}}function v(e,t,n){try{return function(e,t=.15){return u(e)>.5?f(e,t):g(e,t)}(e,t)}catch(r){return e}}},79677(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"ms",weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekStart:1,formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH.mm",LLLL:"dddd, D MMMM YYYY HH.mm"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},ordinal:function(e){return e+"."}};return n.default.locale(r,null,!0),r}(n(74353))},80491(e,t,n){"use strict";n.d(t,{L:()=>s});var r=n(18845),i=n(13235);let o=null;function s(e){const t="error";(0,i.s5)(t,e),(0,i.AS)(t,a)}function a(){o=r.O.onerror,r.O.onerror=function(e,t,n,r,s){const a={column:r,error:s,line:n,msg:e,url:t};return(0,i.aj)("error",a),!!o&&o.apply(this,arguments)},r.O.onerror.__SENTRY_INSTRUMENTED__=!0}},80507(e,t,n){"use strict";var r=n(70453),i=n(36556),o=n(58859),s=n(69675),a=r("%Map%",!0),l=i("Map.prototype.get",!0),c=i("Map.prototype.set",!0),u=i("Map.prototype.has",!0),h=i("Map.prototype.delete",!0),d=i("Map.prototype.size",!0);e.exports=!!a&&function(){var e,t={assert:function(e){if(!t.has(e))throw new s("Side channel does not contain "+o(e))},delete:function(t){if(e){var n=h(e,t);return 0===d(e)&&(e=void 0),n}return!1},get:function(t){if(e)return l(e,t)},has:function(t){return!!e&&u(e,t)},set:function(t,n){e||(e=new a),c(e,t,n)}};return t}},81121(e,t,n){"use strict";n.d(t,{A:()=>i});var r=Function.prototype.toString;const i=function(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},82227(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(34164),i=n(52658);const o=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter(t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])).forEach(n=>{t[n]=e[n]}),t};const s=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:s,externalForwardedProps:a,className:l}=e;if(!t){const e=(0,r.A)(n?.className,l,a?.className,s?.className),t={...n?.style,...a?.style,...s?.style},i={...n,...a,...s};return e.length>0&&(i.className=e),Object.keys(t).length>0&&(i.style=t),{props:i,internalRef:void 0}}const c=(0,i.A)({...a,...s}),u=o(s),h=o(a),d=t(c),p=(0,r.A)(d?.className,n?.className,l,a?.className,s?.className),f={...d?.style,...n?.style,...a?.style,...s?.style},m={...d,...n,...h,...u};return p.length>0&&(m.className=p),Object.keys(f).length>0&&(m.style=f),{props:m,internalRef:d.ref}}},83184(e,t,n){"use strict";n.d(t,{S:()=>o});var r=n(96540),i=n(47767);const o=({children:e})=>{var t;const{navigator:n}=(0,r.useContext)(i.jb),o=(0,i.Zp)(),s=null==(t=(0,r.useContext)(i.sp))?void 0:t.router,a=(0,i.zy)();return e({replace(e){o(e.search||"?",{replace:!0,state:e.state})},push(e){o(e.search||"?",{replace:!1,state:e.state})},get location(){var e,t,r;return null!=(r=null!=(t=null==(e=null==s?void 0:s.state)?void 0:e.location)?t:null==n?void 0:n.location)?r:a}})}},83826(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,o){var s=i.prototype;o.utc=function(e){return new i({date:e,utc:!0,args:arguments})},s.utc=function(t){var n=o(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},s.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var a=s.parse;s.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var l=s.init;s.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=s.utcOffset;s.utcOffset=function(r,i){var o=this.$utils().u;if(o(r))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],o=i[0],s=60*+i[1]+ +i[2];return 0===s?0:"+"===o?s:-s}(r),null===r))return this;var s=Math.abs(r)<=16?60*r:r;if(0===s)return this.utc(i);var a=this.clone();if(i)return a.$offset=s,a.$u=!1,a;var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(a=this.local().add(s+l,e)).$offset=s,a.$x.$localOffset=l,a};var u=s.format;s.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,t)},s.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var h=s.toDate;s.toDate=function(e){return"s"===e&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var d=s.diff;s.diff=function(e,t,n){if(e&&this.$u===e.$u)return d.call(this,e,t,n);var r=this.local(),i=o(e).local();return d.call(r,i,t,n)}}}()},83969(e,t,n){"use strict";n.d(t,{A:()=>r});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},84347(e,t,n){"use strict";n.d(t,{R:()=>l,e:()=>a});var r=n(26674),i=n(19282),o=n(70125);function s(e){i.Yz.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function a(e,t){if(!t?.length||!e.description)return!1;for(const n of t){if(c(n)){if((0,o._c)(e.description,n))return r.T&&s(e),!0;continue}if(!n.name&&!n.op)continue;const t=!n.name||(0,o._c)(e.description,n.name),i=!n.op||e.op&&(0,o._c)(e.op,n.op);if(t&&i)return r.T&&s(e),!0}return!1}function l(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const i of e)i.parent_span_id===r&&(i.parent_span_id=n)}function c(e){return"string"===typeof e||e instanceof RegExp}},85078(e,t,n){"use strict";n.d(t,{A:()=>a});var r=n(24902),i=n(69438),o=n(33044),s=n(82227);function a(e,t){const{className:n,elementType:a,ownerState:l,externalForwardedProps:c,internalForwardedProps:u,shouldForwardComponentProp:h=!1,...d}=t,{component:p,slots:f={[e]:void 0},slotProps:m={[e]:void 0},...g}=c,y=f[e]||a,v=(0,o.A)(m[e],l),{props:{component:_,...b},internalRef:w}=(0,s.A)({className:n,...d,externalForwardedProps:"root"===e?g:void 0,externalSlotProps:v}),x=(0,r.A)(w,v?.ref,t.ref),S="root"===e?_||p:_;return[y,(0,i.A)(y,{..."root"===e&&!p&&!f[e]&&u,..."root"!==e&&!f[e]&&u,...b,...S&&!h&&{as:S},...S&&h&&{component:S},ref:x},l)]}},85733(e,t,n){"use strict";n.d(t,{Bd:()=>i,lQ:()=>r});const r=()=>{},i="undefined"!==typeof window&&"undefined"!==typeof navigator&&"undefined"!==typeof document},85761(e,t,n){"use strict";n.d(t,{_:()=>l});var r=n(13235),i=n(46403),o=n(47040),s=n(14910);let a;function l(e){const t="history";(0,r.s5)(t,e),(0,r.AS)(t,c)}function c(){function e(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const i=a,o=function(e){try{return new URL(e,s.j.location.origin).toString()}catch{return e}}(String(n));if(a=o,i===o)return e.apply(this,t);const l={from:i,to:o};(0,r.aj)("history",l)}return e.apply(this,t)}}s.j.addEventListener("popstate",()=>{const e=s.j.location.href,t=a;if(a=e,t===e)return;const n={from:t,to:e};(0,r.aj)("history",n)}),(0,o.NJ)()&&((0,i.GS)(s.j.history,"pushState",e),(0,i.GS)(s.j.history,"replaceState",e))}},87134(e,t,n){"use strict";n.d(t,{eh:()=>r});const r=e=>(t,n,r)=>{const i=r.subscribe;r.subscribe=(e,t,n)=>{let o=e;if(t){const i=(null==n?void 0:n.equalityFn)||Object.is;let s=e(r.getState());o=n=>{const r=e(n);if(!i(s,r)){const e=s;t(s=r,e)}},(null==n?void 0:n.fireImmediately)&&t(s,s)}return i(o)};return e(t,n,r)}},87420(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"id",weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),weekStart:1,formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},ordinal:function(e){return e+"."}};return n.default.locale(r,null,!0),r}(n(74353))},88003(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"ko",weekdays:"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),weekdaysShort:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),weekdaysMin:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),months:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),monthsShort:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),ordinal:function(e){return e+"\uc77c"},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY\ub144 MMMM D\uc77c",LLL:"YYYY\ub144 MMMM D\uc77c A h:mm",LLLL:"YYYY\ub144 MMMM D\uc77c dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY\ub144 MMMM D\uc77c",lll:"YYYY\ub144 MMMM D\uc77c A h:mm",llll:"YYYY\ub144 MMMM D\uc77c dddd A h:mm"},meridiem:function(e){return e<12?"\uc624\uc804":"\uc624\ud6c4"},relativeTime:{future:"%s \ud6c4",past:"%s \uc804",s:"\uba87 \ucd08",m:"1\ubd84",mm:"%d\ubd84",h:"\ud55c \uc2dc\uac04",hh:"%d\uc2dc\uac04",d:"\ud558\ub8e8",dd:"%d\uc77c",M:"\ud55c \ub2ec",MM:"%d\ub2ec",y:"\uc77c \ub144",yy:"%d\ub144"}};return n.default.locale(r,null,!0),r}(n(74353))},88569(e){e.exports=function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(n,r,i){var o,s=function(e,n,r){void 0===r&&(r={});var i=new Date(e),o=function(e,n){void 0===n&&(n={});var r=n.timeZoneName||"short",i=e+"|"+r,o=t[i];return o||(o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:r}),t[i]=o),o}(n,r);return o.formatToParts(i)},a=function(t,n){for(var r=s(t,n),o=[],a=0;a<r.length;a+=1){var l=r[a],c=l.type,u=l.value,h=e[c];h>=0&&(o[h]=parseInt(u,10))}var d=o[3],p=24===d?0:d,f=o[0]+"-"+o[1]+"-"+o[2]+" "+p+":"+o[4]+":"+o[5]+":000",m=+t;return(i.utc(f).valueOf()-(m-=m%1e3))/6e4},l=r.prototype;l.tz=function(e,t){void 0===e&&(e=o);var n,r=this.utcOffset(),s=this.toDate(),a=s.toLocaleString("en-US",{timeZone:e}),l=Math.round((s-new Date(a))/1e3/60),c=15*-Math.round(s.getTimezoneOffset()/15)-l;if(Number(c)){if(n=i(a,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(c,!0),t){var u=n.utcOffset();n=n.add(r-u,"minute")}}else n=this.utcOffset(0,t);return n.$x.$timezone=e,n},l.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),n=s(this.valueOf(),t,{timeZoneName:e}).find(function(e){return"timezonename"===e.type.toLowerCase()});return n&&n.value};var c=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var n=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(n,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,n){var r=n&&t,s=n||t||o,l=a(+i(),s);if("string"!=typeof e)return i(e).tz(s);var c=function(e,t,n){var r=e-60*t*1e3,i=a(r,n);if(t===i)return[r,t];var o=a(r-=60*(i-t)*1e3,n);return i===o?[r,i]:[e-60*Math.min(i,o)*1e3,Math.max(i,o)]}(i.utc(e,r).valueOf(),l,s),u=c[0],h=c[1],d=i(u).utcOffset(h);return d.$x.$timezone=s,d},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){o=e}}}()},88612(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(10644);function i(e){return(0,r.A)(e).defaultView||window}},88728(e,t,n){"use strict";n.d(t,{L:()=>c,d:()=>l});var r=n(46403),i=n(18845);const o="_sentryScope",s="_sentryIsolationScope";function a(e){if(e){if("object"===typeof e&&"deref"in e&&"function"===typeof e.deref)try{return e.deref()}catch{return}return e}}function l(e,t,n){e&&((0,r.my)(e,s,function(e){try{const t=i.O.WeakRef;if("function"===typeof t)return new t(e)}catch{}return e}(n)),(0,r.my)(e,o,t))}function c(e){const t=e;return{scope:t[o],isolationScope:a(t[s])}}},89114(e,t,n){"use strict";n.d(t,{A:()=>B});var r=n(96540),i=n(34164),o=n(21362),s=n(24902),a=n(10644),l=n(17726);const c=function(e){let t=e.activeElement;for(;null!=t?.shadowRoot?.activeElement;)t=t.shadowRoot.activeElement;return t};var u=n(74848);const h=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function d(e){const t=[],n=[];return Array.from(e.querySelectorAll(h)).forEach((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))}),n.sort((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex).map(e=>e.node).concat(t)}function p(){return!0}const f=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:h=d,isEnabled:f=p,open:m}=e,g=r.useRef(!1),y=r.useRef(null),v=r.useRef(null),_=r.useRef(null),b=r.useRef(null),w=r.useRef(!1),x=r.useRef(null),S=(0,s.A)((0,l.A)(t),x),E=r.useRef(null);r.useEffect(()=>{m&&x.current&&(w.current=!n)},[n,m]),r.useEffect(()=>{if(!m||!x.current)return;const e=(0,a.A)(x.current),t=c(e);return x.current.contains(t)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),w.current&&x.current.focus()),()=>{o||(_.current&&_.current.focus&&(g.current=!0,_.current.focus()),_.current=null)}},[m]),r.useEffect(()=>{if(!m||!x.current)return;const e=(0,a.A)(x.current),t=t=>{if(E.current=t,i||!f()||"Tab"!==t.key)return;c(e)===x.current&&t.shiftKey&&(g.current=!0,v.current&&v.current.focus())},n=()=>{const t=x.current;if(null===t)return;const n=c(e);if(!e.hasFocus()||!f()||g.current)return void(g.current=!1);if(t.contains(n))return;if(i&&n!==y.current&&n!==v.current)return;if(n!==b.current)b.current=null;else if(null!==b.current)return;if(!w.current)return;let r=[];if(n!==y.current&&n!==v.current||(r=h(x.current)),r.length>0){const e=Boolean(E.current?.shiftKey&&"Tab"===E.current?.key),t=r[0],n=r[r.length-1];"string"!==typeof t&&"string"!==typeof n&&(e?n.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval(()=>{const t=c(e);t&&"BODY"===t.tagName&&n()},50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}},[n,i,o,f,m,h]);const T=e=>{null===_.current&&(_.current=e.relatedTarget),w.current=!0};return(0,u.jsxs)(r.Fragment,{children:[(0,u.jsx)("div",{tabIndex:m?0:-1,onFocus:T,ref:y,"data-testid":"sentinelStart"}),r.cloneElement(t,{ref:S,onFocus:e=>{null===_.current&&(_.current=e.relatedTarget),w.current=!0,b.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,u.jsx)("div",{tabIndex:m?0:-1,onFocus:T,ref:v,"data-testid":"sentinelEnd"})]})};var m=n(40961),g=n(3576);function y(e,t){"function"===typeof e?e(t):e&&(e.current=t)}const v=r.forwardRef(function(e,t){const{children:n,container:i,disablePortal:o=!1}=e,[a,c]=r.useState(null),u=(0,s.A)(r.isValidElement(n)?(0,l.A)(n):null,t);if((0,g.A)(()=>{o||c(function(e){return"function"===typeof e?e():e}(i)||document.body)},[i,o]),(0,g.A)(()=>{if(a&&!o)return y(t,a),()=>{y(t,null)}},[t,a,o]),o){if(r.isValidElement(n)){const e={ref:u};return r.cloneElement(n,e)}return n}return a?m.createPortal(n,a):a});var _=n(67695),b=n(39241),w=n(13202),x=n(30016),S=n(78854);function E(...e){return e.reduce((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)},()=>{})}var T=n(52658),M=n(88612);function A(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function k(e){return parseFloat((0,M.A)(e).getComputedStyle(e).paddingRight)||0}function C(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,e=>{const t=!o.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&A(e,i)})}function I(e,t){let n=-1;return e.some((e,r)=>!!t(e)&&(n=r,!0)),n}function P(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,a.A)(e);return t.body===e?(0,M.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=function(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}((0,M.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${k(r)+e}px`;const t=(0,a.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${k(t)+e}px`})}let e;if(r.parentNode instanceof DocumentFragment)e=(0,a.A)(r).body;else{const t=r.parentElement,n=(0,M.A)(r);e="HTML"===t?.nodeName&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach(({value:e,el:t,property:n})=>{e?t.style.setProperty(n,e):t.style.removeProperty(n)})}}const O=()=>{},R=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&A(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)}),t}(t);C(t,e.mount,e.modalRef,r,!0);const i=I(this.containers,e=>e.container===t);return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=I(this.containers,t=>t.modals.includes(e)),r=this.containers[n];r.restore||(r.restore=P(r,t))}remove(e,t=!0){const n=this.modals.indexOf(e);if(-1===n)return n;const r=I(this.containers,t=>t.modals.includes(e)),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&A(e.modalRef,t),C(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&A(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const D=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:c,children:u,onClose:h,open:d,rootRef:p}=e,f=r.useRef({}),m=r.useRef(null),g=r.useRef(null),y=(0,s.A)(g,p),[v,_]=r.useState(!d),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(u);let w=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(w=!1);const x=()=>(f.current.modalRef=g.current,f.current.mount=m.current,f.current),M=()=>{R.mount(x(),{disableScrollLock:i}),g.current&&(g.current.scrollTop=0)},k=(0,S.A)(()=>{const e=function(e){return"function"===typeof e?e():e}(t)||(0,a.A)(m.current).body;R.add(x(),e),g.current&&M()}),C=()=>R.isTopModal(x()),I=(0,S.A)(e=>{m.current=e,e&&(d&&C()?M():g.current&&A(g.current,w))}),P=r.useCallback(()=>{R.remove(x(),w)},[w]);r.useEffect(()=>()=>{P()},[P]),r.useEffect(()=>{d?k():b&&o||P()},[d,P,b,o,k]);const D=e=>t=>{e.onKeyDown?.(t),"Escape"===t.key&&229!==t.which&&C()&&(n||(t.stopPropagation(),h&&h(t,"escapeKeyDown")))},L=e=>t=>{e.onClick?.(t),t.target===t.currentTarget&&h&&h(t,"backdropClick")};return{getRootProps:(t={})=>{const n=(0,T.A)(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r={...n,...t};return{role:"presentation",...r,onKeyDown:D(r),ref:y}},getBackdropProps:(e={})=>{const t=e;return{"aria-hidden":!0,...t,onClick:L(t),open:d}},getTransitionProps:()=>({onEnter:E(()=>{_(!1),l&&l()},u?.props.onEnter??O),onExited:E(()=>{_(!0),c&&c(),o&&P()},u?.props.onExited??O)}),rootRef:y,portalRef:I,isTopModal:C,exited:v,hasTransition:b}};var L=n(96148),N=n(32520);function F(e){return(0,N.Ay)("MuiModal",e)}(0,L.A)("MuiModal",["root","hidden","backdrop"]);var z=n(85078);const U=(0,_.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((0,b.A)(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),j=(0,_.Ay)(x.A,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),B=r.forwardRef(function(e,t){const n=(0,w.b)({name:"MuiModal",props:e}),{BackdropComponent:s=j,BackdropProps:a,classes:l,className:c,closeAfterTransition:h=!1,children:d,container:p,component:m,components:g={},componentsProps:y={},disableAutoFocus:_=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:x=!1,disablePortal:S=!1,disableRestoreFocus:E=!1,disableScrollLock:T=!1,hideBackdrop:M=!1,keepMounted:A=!1,onClose:k,onTransitionEnter:C,onTransitionExited:I,open:P,slotProps:O={},slots:R={},theme:L,...N}=n,B={...n,closeAfterTransition:h,disableAutoFocus:_,disableEnforceFocus:b,disableEscapeKeyDown:x,disablePortal:S,disableRestoreFocus:E,disableScrollLock:T,hideBackdrop:M,keepMounted:A},{getRootProps:V,getBackdropProps:H,getTransitionProps:$,portalRef:Y,isTopModal:G,exited:q,hasTransition:W}=D({...B,rootRef:t}),K={...B,exited:q},Z=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,o.A)(i,F,r)})(K),J={};if(void 0===d.props.tabIndex&&(J.tabIndex="-1"),W){const{onEnter:e,onExited:t}=$();J.onEnter=e,J.onExited=t}const X={slots:{root:g.Root,backdrop:g.Backdrop,...R},slotProps:{...y,...O}},[Q,ee]=(0,z.A)("root",{ref:t,elementType:U,externalForwardedProps:{...X,...N,component:m},getSlotProps:V,ownerState:K,className:(0,i.A)(c,Z?.root,!K.open&&K.exited&&Z?.hidden)}),[te,ne]=(0,z.A)("backdrop",{ref:a?.ref,elementType:s,externalForwardedProps:X,shouldForwardComponentProp:!0,additionalProps:a,getSlotProps:e=>H({...e,onClick:t=>{e?.onClick&&e.onClick(t)}}),className:(0,i.A)(a?.className,Z?.backdrop),ownerState:K});return A||P||W&&!q?(0,u.jsx)(v,{ref:Y,container:p,disablePortal:S,children:(0,u.jsxs)(Q,{...ee,children:[!M&&s?(0,u.jsx)(te,{...ne}):null,(0,u.jsx)(f,{disableEnforceFocus:b,disableAutoFocus:_,disableRestoreFocus:E,isEnabled:G,open:P,children:r.cloneElement(d,J)})]})}):null})},89353(e){"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n};e.exports=function(e){var i=this;if("function"!==typeof i||"[object Function]"!==t.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(e,t){for(var n=[],r=t||0,i=0;r<e.length;r+=1,i+=1)n[i]=e[r];return n}(arguments,1),a=n(0,i.length-s.length),l=[],c=0;c<a;c++)l[c]="$"+c;if(o=Function("binder","return function ("+function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n}(l,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var t=i.apply(this,r(s,arguments));return Object(t)===t?t:this}return i.apply(e,r(s,arguments))}),i.prototype){var u=function(){};u.prototype=i.prototype,o.prototype=new u,u.prototype=null}return o}},89469(e,t,n){"use strict";n.d(t,{A:()=>d});const r=function(){this.__data__=[],this.size=0};var i=n(66984);const o=function(e,t){for(var n=e.length;n--;)if((0,i.A)(e[n][0],t))return n;return-1};var s=Array.prototype.splice;const a=function(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():s.call(t,n,1),--this.size,!0)};const l=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]};const c=function(e){return o(this.__data__,e)>-1};const u=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=a,h.prototype.get=l,h.prototype.has=c,h.prototype.set=u;const d=h},89610(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(2383),i=n(23149);const o=function(e){if(!(0,i.A)(e))return!1;var t=(0,r.A)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},89879(e,t,n){"use strict";n.d(t,{A:()=>H});var r=n(96540);const i=r.createContext(null);function o(){return r.useContext(i)}const s="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var a=n(74848);const l=function(e){const{children:t,theme:n}=e,l=o(),c=r.useMemo(()=>{const e=null===l?{...n}:function(e,t){if("function"===typeof t)return t(e);return{...e,...t}}(l,n);return null!=e&&(e[s]=null!==l),e},[n,l]);return(0,a.jsx)(i.Provider,{value:c,children:t})};var c=n(24684),u=n(45996),h=n(411),d=n(92155),p=n(3576),f=n(91092),m=n(49649),g=n(17437);function y(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,a.jsx)(g.mL,{styles:r})}var v=n(37498);function _(e){const t=(0,m.tT)(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}const b=function({styles:e,themeId:t,defaultTheme:n={}}){const r=(0,v.A)(n),i=t&&r[t]||r;let o="function"===typeof e?e(i):e;return i.modularCssLayers&&(o=Array.isArray(o)?o.map(e=>_("function"===typeof e?e(i):e)):_(o)),(0,a.jsx)(y,{styles:o})};const w={};function x(e,t,n,i=!1){return r.useMemo(()=>{const r=e&&t[e]||t;if("function"===typeof n){const o=n(r),s=e?{...t,[e]:o}:o;return i?()=>s:s}return e?{...t,[e]:n}:{...t,...n}},[e,t,n,i])}const S=function(e){const{children:t,theme:n,themeId:r}=e,i=(0,u.A)(w),s=o()||w,m=x(r,i,n),g=x(r,s,n,!0),y="rtl"===(r?m[r]:m).direction,v=function(e){const t=(0,u.A)(),n=(0,f.A)()||"",{modularCssLayers:r}=e;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return i=r&&null===t?"string"===typeof r?r.replace(/mui(?!\.)/g,i):`@layer ${i};`:"",(0,p.A)(()=>{const e=document.querySelector("head");if(!e)return;const t=e.firstChild;if(i){if(t&&t.hasAttribute?.("data-mui-layer-order")&&t.getAttribute("data-mui-layer-order")===n)return;const r=document.createElement("style");r.setAttribute("data-mui-layer-order",n),r.textContent=i,e.prepend(r)}else e.querySelector(`style[data-mui-layer-order="${n}"]`)?.remove()},[i,n]),i?(0,a.jsx)(b,{styles:i}):null}(m);return(0,a.jsx)(l,{theme:g,children:(0,a.jsx)(c.T.Provider,{value:m,children:(0,a.jsx)(h.A,{value:y,children:(0,a.jsxs)(d.A,{value:r?m[r].components:m.components,children:[v,t]})})})})};var E=n(31355);function T({theme:e,...t}){const n=E.A in e?e[E.A]:void 0;return(0,a.jsx)(S,{...t,themeId:n?E.A:void 0,theme:n||e})}var M=n(95548);const A="mode",k="color-scheme",C="data-color-scheme";function I(){}const P=({key:e,storageWindow:t})=>(t||"undefined"===typeof window||(t=window),{get(n){if("undefined"===typeof window)return;if(!t)return n;let r;try{r=t.localStorage.getItem(e)}catch{}return r||n},set:n=>{if(t)try{t.localStorage.setItem(e,n)}catch{}},subscribe:n=>{if(!t)return I;const r=t=>{const r=t.newValue;t.key===e&&n(r)};return t.addEventListener("storage",r),()=>{t.removeEventListener("storage",r)}}});function O(){}function R(e){if("undefined"!==typeof window&&"function"===typeof window.matchMedia&&"system"===e){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}}function D(e,t){return"light"===e.mode||"system"===e.mode&&"light"===e.systemMode?t("light"):"dark"===e.mode||"system"===e.mode&&"dark"===e.systemMode?t("dark"):void 0}function L(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:i,supportedColorSchemes:o=[],modeStorageKey:s=A,colorSchemeStorageKey:a=k,storageWindow:l=("undefined"===typeof window?void 0:window),storageManager:c=P,noSsr:u=!1}=e,h=o.join(","),d=o.length>1,p=r.useMemo(()=>c?.({key:s,storageWindow:l}),[c,s,l]),f=r.useMemo(()=>c?.({key:`${a}-light`,storageWindow:l}),[c,a,l]),m=r.useMemo(()=>c?.({key:`${a}-dark`,storageWindow:l}),[c,a,l]),[g,y]=r.useState(()=>{const e=p?.get(t)||t,r=f?.get(n)||n,o=m?.get(i)||i;return{mode:e,systemMode:R(e),lightColorScheme:r,darkColorScheme:o}}),[v,_]=r.useState(u||!d);r.useEffect(()=>{_(!0)},[]);const b=function(e){return D(e,t=>"light"===t?e.lightColorScheme:"dark"===t?e.darkColorScheme:void 0)}(g),w=r.useCallback(e=>{y(n=>{if(e===n.mode)return n;const r=e??t;return p?.set(r),{...n,mode:r,systemMode:R(r)}})},[p,t]),x=r.useCallback(e=>{e?"string"===typeof e?e&&!h.includes(e)?console.error(`\`${e}\` does not exist in \`theme.colorSchemes\`.`):y(t=>{const n={...t};return D(t,t=>{"light"===t&&(f?.set(e),n.lightColorScheme=e),"dark"===t&&(m?.set(e),n.darkColorScheme=e)}),n}):y(t=>{const r={...t},o=null===e.light?n:e.light,s=null===e.dark?i:e.dark;return o&&(h.includes(o)?(r.lightColorScheme=o,f?.set(o)):console.error(`\`${o}\` does not exist in \`theme.colorSchemes\`.`)),s&&(h.includes(s)?(r.darkColorScheme=s,m?.set(s)):console.error(`\`${s}\` does not exist in \`theme.colorSchemes\`.`)),r}):y(e=>(f?.set(n),m?.set(i),{...e,lightColorScheme:n,darkColorScheme:i}))},[h,f,m,n,i]),S=r.useCallback(e=>{"system"===g.mode&&y(t=>{const n=e?.matches?"dark":"light";return t.systemMode===n?t:{...t,systemMode:n}})},[g.mode]),E=r.useRef(S);return E.current=S,r.useEffect(()=>{if("function"!==typeof window.matchMedia||!d)return;const e=(...e)=>E.current(...e),t=window.matchMedia("(prefers-color-scheme: dark)");return t.addListener(e),e(t),()=>{t.removeListener(e)}},[d]),r.useEffect(()=>{if(d){const e=p?.subscribe(e=>{e&&!["light","dark","system"].includes(e)||w(e||t)})||O,n=f?.subscribe(e=>{e&&!h.match(e)||x({light:e})})||O,r=m?.subscribe(e=>{e&&!h.match(e)||x({dark:e})})||O;return()=>{e(),n(),r()}}},[x,w,h,t,l,d,p,f,m]),{...g,mode:v?g.mode:void 0,systemMode:v?g.systemMode:void 0,colorScheme:v?b:void 0,setMode:w,setColorScheme:x}}var N=n(37796),F=n(93445);const z={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"};const{CssVarsProvider:U,useColorScheme:j,getInitColorSchemeScript:B}=function(e){const{themeId:t,theme:n={},modeStorageKey:i=A,colorSchemeStorageKey:s=k,disableTransitionOnChange:l=!1,defaultColorScheme:c,resolveTheme:u}=e,h={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},d=r.createContext(void 0),f={},m={},g="string"===typeof c?c:c.light,v="string"===typeof c?c:c.dark;return{CssVarsProvider:function(e){const{children:h,theme:g,modeStorageKey:v=i,colorSchemeStorageKey:_=s,disableTransitionOnChange:b=l,storageManager:w,storageWindow:x=("undefined"===typeof window?void 0:window),documentNode:E=("undefined"===typeof document?void 0:document),colorSchemeNode:T=("undefined"===typeof document?void 0:document.documentElement),disableNestedContext:M=!1,disableStyleSheetGeneration:A=!1,defaultMode:k="system",forceThemeRerender:C=!1,noSsr:I}=e,P=r.useRef(!1),O=o(),R=r.useContext(d),D=!!R&&!M,N=r.useMemo(()=>g||("function"===typeof n?n():n),[g]),F=N[t],z=F||N,{colorSchemes:U=f,components:j=m,cssVarPrefix:B}=z,V=Object.keys(U).filter(e=>!!U[e]).join(","),H=r.useMemo(()=>V.split(","),[V]),$="string"===typeof c?c:c.light,Y="string"===typeof c?c:c.dark,G=U[$]&&U[Y]?k:U[z.defaultColorScheme]?.palette?.mode||z.palette?.mode,{mode:q,setMode:W,systemMode:K,lightColorScheme:Z,darkColorScheme:J,colorScheme:X,setColorScheme:Q}=L({supportedColorSchemes:H,defaultLightColorScheme:$,defaultDarkColorScheme:Y,modeStorageKey:v,colorSchemeStorageKey:_,defaultMode:G,storageManager:w,storageWindow:x,noSsr:I});let ee=q,te=X;D&&(ee=R.mode,te=R.colorScheme);let ne=te||z.defaultColorScheme;z.vars&&!C&&(ne=z.defaultColorScheme);const re=r.useMemo(()=>{const e=z.generateThemeVars?.()||z.vars,t={...z,components:j,colorSchemes:U,cssVarPrefix:B,vars:e};if("function"===typeof t.generateSpacing&&(t.spacing=t.generateSpacing()),ne){const e=U[ne];e&&"object"===typeof e&&Object.keys(e).forEach(n=>{e[n]&&"object"===typeof e[n]?t[n]={...t[n],...e[n]}:t[n]=e[n]})}return u?u(t):t},[z,ne,j,U,B]),ie=z.colorSchemeSelector;(0,p.A)(()=>{if(te&&T&&ie&&"media"!==ie){const e=ie;let t=ie;if("class"===e&&(t=".%s"),"data"===e&&(t="[data-%s]"),e?.startsWith("data-")&&!e.includes("%s")&&(t=`[${e}="%s"]`),t.startsWith("."))T.classList.remove(...H.map(e=>t.substring(1).replace("%s",e))),T.classList.add(t.substring(1).replace("%s",te));else{const e=t.replace("%s",te).match(/\[([^\]]+)\]/);if(e){const[t,n]=e[1].split("=");n||H.forEach(e=>{T.removeAttribute(t.replace(te,e))}),T.setAttribute(t,n?n.replace(/"|'/g,""):"")}else T.setAttribute(t,te)}}},[te,ie,T,H]),r.useEffect(()=>{let e;if(b&&P.current&&E){const t=E.createElement("style");t.appendChild(E.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),E.head.appendChild(t),window.getComputedStyle(E.body),e=setTimeout(()=>{E.head.removeChild(t)},1)}return()=>{clearTimeout(e)}},[te,b,E]),r.useEffect(()=>(P.current=!0,()=>{P.current=!1}),[]);const oe=r.useMemo(()=>({allColorSchemes:H,colorScheme:te,darkColorScheme:J,lightColorScheme:Z,mode:ee,setColorScheme:Q,setMode:W,systemMode:K}),[H,te,J,Z,ee,Q,W,K,re.colorSchemeSelector]);let se=!0;(A||!1===z.cssVariables||D&&O?.cssVarPrefix===B)&&(se=!1);const ae=(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(S,{themeId:F?t:void 0,theme:re,children:h}),se&&(0,a.jsx)(y,{styles:re.generateStyleSheets?.()||[]})]});return D?ae:(0,a.jsx)(d.Provider,{value:oe,children:ae})},useColorScheme:()=>r.useContext(d)||h,getInitColorSchemeScript:e=>function(e){const{defaultMode:t="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=A,colorSchemeStorageKey:o=k,attribute:s=C,colorSchemeNode:l="document.documentElement",nonce:c}=e||{};let u="",h=s;if("class"===s&&(h=".%s"),"data"===s&&(h="[data-%s]"),h.startsWith(".")){const e=h.substring(1);u+=`${l}.classList.remove('${e}'.replace('%s', light), '${e}'.replace('%s', dark));\n      ${l}.classList.add('${e}'.replace('%s', colorScheme));`}const d=h.match(/\[([^[\]]+)\]/);if(d){const[e,t]=d[1].split("=");t||(u+=`${l}.removeAttribute('${e}'.replace('%s', light));\n      ${l}.removeAttribute('${e}'.replace('%s', dark));`),u+=`\n      ${l}.setAttribute('${e}'.replace('%s', colorScheme), ${t?`${t}.replace('%s', colorScheme)`:'""'});`}else".%s"!==h&&(u+=`${l}.setAttribute('${h}', colorScheme);`);return(0,a.jsx)("script",{suppressHydrationWarning:!0,nonce:"undefined"===typeof window?c:"",dangerouslySetInnerHTML:{__html:`(function() {\ntry {\n  let colorScheme = '';\n  const mode = localStorage.getItem('${i}') || '${t}';\n  const dark = localStorage.getItem('${o}-dark') || '${r}';\n  const light = localStorage.getItem('${o}-light') || '${n}';\n  if (mode === 'system') {\n    // handle system mode\n    const mql = window.matchMedia('(prefers-color-scheme: dark)');\n    if (mql.matches) {\n      colorScheme = dark\n    } else {\n      colorScheme = light\n    }\n  }\n  if (mode === 'light') {\n    colorScheme = light;\n  }\n  if (mode === 'dark') {\n    colorScheme = dark;\n  }\n  if (colorScheme) {\n    ${u}\n  }\n} catch(e){}})();`}},"mui-color-scheme-init")}({colorSchemeStorageKey:s,defaultLightColorScheme:g,defaultDarkColorScheme:v,modeStorageKey:i,...e})}}({themeId:E.A,theme:()=>(0,N.A)({cssVariables:!0}),colorSchemeStorageKey:z.colorSchemeStorageKey,modeStorageKey:z.modeStorageKey,defaultColorScheme:{light:z.defaultLightColorScheme,dark:z.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:(0,F.A)(e.palette,e.typography)};return t.unstable_sx=function(e){return(0,M.A)({sx:e,theme:this})},t}});const V=U;function H({theme:e,...t}){const n=r.useMemo(()=>{if("function"===typeof e)return e;const t=E.A in e?e[E.A]:e;return"colorSchemes"in t?null:"vars"in t?e:{...e,vars:null}},[e]);return n?(0,a.jsx)(T,{theme:n,...t}):(0,a.jsx)(V,{theme:e,...t})}},90001(e,t,n){"use strict";n.d(t,{w:()=>o});var r=n(96540);const i=r.createContext(!1),o=()=>r.useContext(i);i.Provider},91092(e,t,n){"use strict";var r;n.d(t,{A:()=>a});var i=n(96540);let o=0;const s={...r||(r=n.t(i,2))}.useId;function a(e){if(void 0!==s){const t=s();return e??t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect(()=>{null==t&&(o+=1,n(`mui-${o}`))},[t]),r}(e)}},91135(e,t,n){"use strict";n.d(t,{F3:()=>i,N8:()=>s,TJ:()=>o,a3:()=>r});const r=0,i=1,o=2;function s(e,t){e.setAttribute("http.response.status_code",t);const n=function(e){if(e<400&&e>=100)return{code:i};if(e>=400&&e<500)switch(e){case 401:return{code:o,message:"unauthenticated"};case 403:return{code:o,message:"permission_denied"};case 404:return{code:o,message:"not_found"};case 409:return{code:o,message:"already_exists"};case 413:return{code:o,message:"failed_precondition"};case 429:return{code:o,message:"resource_exhausted"};case 499:return{code:o,message:"cancelled"};default:return{code:o,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:o,message:"unimplemented"};case 503:return{code:o,message:"unavailable"};case 504:return{code:o,message:"deadline_exceeded"};default:return{code:o,message:"internal_error"}}return{code:o,message:"internal_error"}}(t);"unknown_error"!==n.message&&e.setStatus(n)}},91272(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e,t,n){return l=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i},l.apply(null,arguments)}function c(e){var t="function"===typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,e)},c(e)}function u(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(c(Error)),f=function(e){function t(t){return e.call(this,"Invalid DateTime: "+t.toMessage())||this}return o(t,e),t}(p),m=function(e){function t(t){return e.call(this,"Invalid Interval: "+t.toMessage())||this}return o(t,e),t}(p),g=function(e){function t(t){return e.call(this,"Invalid Duration: "+t.toMessage())||this}return o(t,e),t}(p),y=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(p),v=function(e){function t(t){return e.call(this,"Invalid unit "+t)||this}return o(t,e),t}(p),_=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(p),b=function(e){function t(){return e.call(this,"Zone is an abstract class")||this}return o(t,e),t}(p),w="numeric",x="short",S="long",E={year:w,month:w,day:w},T={year:w,month:x,day:w},M={year:w,month:x,day:w,weekday:x},A={year:w,month:S,day:w},k={year:w,month:S,day:w,weekday:S},C={hour:w,minute:w},I={hour:w,minute:w,second:w},P={hour:w,minute:w,second:w,timeZoneName:x},O={hour:w,minute:w,second:w,timeZoneName:S},R={hour:w,minute:w,hourCycle:"h23"},D={hour:w,minute:w,second:w,hourCycle:"h23"},L={hour:w,minute:w,second:w,hourCycle:"h23",timeZoneName:x},N={hour:w,minute:w,second:w,hourCycle:"h23",timeZoneName:S},F={year:w,month:w,day:w,hour:w,minute:w},z={year:w,month:w,day:w,hour:w,minute:w,second:w},U={year:w,month:x,day:w,hour:w,minute:w},j={year:w,month:x,day:w,hour:w,minute:w,second:w},B={year:w,month:x,day:w,weekday:x,hour:w,minute:w},V={year:w,month:S,day:w,hour:w,minute:w,timeZoneName:x},H={year:w,month:S,day:w,hour:w,minute:w,second:w,timeZoneName:x},$={year:w,month:S,day:w,weekday:S,hour:w,minute:w,timeZoneName:S},Y={year:w,month:S,day:w,weekday:S,hour:w,minute:w,second:w,timeZoneName:S};function G(e){return"undefined"===typeof e}function q(e){return"number"===typeof e}function W(e){return"number"===typeof e&&e%1===0}function K(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Z(e,t,n){if(0!==e.length)return e.reduce(function(e,r){var i=[t(r),r];return e&&n(e[0],i[0])===e[0]?e:i},null)[1]}function J(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function X(e,t,n){return W(e)&&e>=t&&e<=n}function Q(e,t){return void 0===t&&(t=2),e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0")}function ee(e){return G(e)||null===e||""===e?void 0:parseInt(e,10)}function te(e){return G(e)||null===e||""===e?void 0:parseFloat(e)}function ne(e){if(!G(e)&&null!==e&&""!==e){var t=1e3*parseFloat("0."+e);return Math.floor(t)}}function re(e,t,n){void 0===n&&(n=!1);var r=Math.pow(10,t);return(n?Math.trunc:Math.round)(e*r)/r}function ie(e){return e%4===0&&(e%100!==0||e%400===0)}function oe(e){return ie(e)?366:365}function se(e,t){var n=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===n?ie(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function ae(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t)).setUTCFullYear(t.getUTCFullYear()-1900),+t}function le(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,n=e-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return 4===t||3===r?53:52}function ce(e){return e>99?e:e>60?1900+e:2e3+e}function ue(e,t,n,r){void 0===r&&(r=null);var o=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);var a=i({timeZoneName:t},s),l=new Intl.DateTimeFormat(n,a).formatToParts(o).find(function(e){return"timezonename"===e.type.toLowerCase()});return l?l.value:null}function he(e,t){var n=parseInt(e,10);Number.isNaN(n)&&(n=0);var r=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function de(e){var t=Number(e);if("boolean"===typeof e||""===e||Number.isNaN(t))throw new _("Invalid unit value "+e);return t}function pe(e,t){var n={};for(var r in e)if(J(e,r)){var i=e[r];if(void 0===i||null===i)continue;n[t(r)]=de(i)}return n}function fe(e,t){var n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return""+i+Q(n,2)+":"+Q(r,2);case"narrow":return""+i+n+(r>0?":"+r:"");case"techie":return""+i+Q(n,2)+Q(r,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function me(e){return function(e,t){return t.reduce(function(t,n){return t[n]=e[n],t},{})}(e,["hour","minute","second","millisecond"])}var ge=["January","February","March","April","May","June","July","August","September","October","November","December"],ye=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ve=["J","F","M","A","M","J","J","A","S","O","N","D"];function _e(e){switch(e){case"narrow":return[].concat(ve);case"short":return[].concat(ye);case"long":return[].concat(ge);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var be=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],we=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],xe=["M","T","W","T","F","S","S"];function Se(e){switch(e){case"narrow":return[].concat(xe);case"short":return[].concat(we);case"long":return[].concat(be);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Ee=["AM","PM"],Te=["Before Christ","Anno Domini"],Me=["BC","AD"],Ae=["B","A"];function ke(e){switch(e){case"narrow":return[].concat(Ae);case"short":return[].concat(Me);case"long":return[].concat(Te);default:return null}}function Ce(e,t){for(var n,r="",i=d(e);!(n=i()).done;){var o=n.value;o.literal?r+=o.val:r+=t(o.val)}return r}var Ie={D:E,DD:T,DDD:A,DDDD:k,t:C,tt:I,ttt:P,tttt:O,T:R,TT:D,TTT:L,TTTT:N,f:F,ff:U,fff:V,ffff:$,F:z,FF:j,FFF:H,FFFF:Y},Pe=function(){function e(e,t){this.opts=t,this.loc=e,this.systemLoc=null}e.create=function(t,n){return void 0===n&&(n={}),new e(t,n)},e.parseFormat=function(e){for(var t=null,n="",r=!1,i=[],o=0;o<e.length;o++){var s=e.charAt(o);"'"===s?(n.length>0&&i.push({literal:r,val:n}),t=null,n="",r=!r):r||s===t?n+=s:(n.length>0&&i.push({literal:!1,val:n}),n=s,t=s)}return n.length>0&&i.push({literal:r,val:n}),i},e.macroTokenToFormatOpts=function(e){return Ie[e]};var t=e.prototype;return t.formatWithSystemDefault=function(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,i({},this.opts,t)).format()},t.formatDateTime=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,i({},this.opts,t)).format()},t.formatDateTimeParts=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,i({},this.opts,t)).formatToParts()},t.resolvedOptions=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,i({},this.opts,t)).resolvedOptions()},t.num=function(e,t){if(void 0===t&&(t=0),this.opts.forceSimple)return Q(e,t);var n=i({},this.opts);return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)},t.formatDateTimeFromString=function(t,n){var r=this,i="en"===this.loc.listingMode(),o=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,s=function(e,n){return r.loc.extract(t,e,n)},a=function(e){return t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):""},l=function(){return i?function(e){return Ee[e.hour<12?0:1]}(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod")},c=function(e,n){return i?function(e,t){return _e(t)[e.month-1]}(t,e):s(n?{month:e}:{month:e,day:"numeric"},"month")},u=function(e,n){return i?function(e,t){return Se(t)[e.weekday-1]}(t,e):s(n?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday")},h=function(e){return i?function(e,t){return ke(t)[e.year<0?0:1]}(t,e):s({era:e},"era")};return Ce(e.parseFormat(n),function(n){switch(n){case"S":return r.num(t.millisecond);case"u":case"SSS":return r.num(t.millisecond,3);case"s":return r.num(t.second);case"ss":return r.num(t.second,2);case"uu":return r.num(Math.floor(t.millisecond/10),2);case"uuu":return r.num(Math.floor(t.millisecond/100));case"m":return r.num(t.minute);case"mm":return r.num(t.minute,2);case"h":return r.num(t.hour%12===0?12:t.hour%12);case"hh":return r.num(t.hour%12===0?12:t.hour%12,2);case"H":return r.num(t.hour);case"HH":return r.num(t.hour,2);case"Z":return a({format:"narrow",allowZ:r.opts.allowZ});case"ZZ":return a({format:"short",allowZ:r.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:r.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:r.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:r.loc.locale});case"z":return t.zoneName;case"a":return l();case"d":return o?s({day:"numeric"},"day"):r.num(t.day);case"dd":return o?s({day:"2-digit"},"day"):r.num(t.day,2);case"c":case"E":return r.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return o?s({month:"numeric",day:"numeric"},"month"):r.num(t.month);case"LL":return o?s({month:"2-digit",day:"numeric"},"month"):r.num(t.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return o?s({month:"numeric"},"month"):r.num(t.month);case"MM":return o?s({month:"2-digit"},"month"):r.num(t.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return o?s({year:"numeric"},"year"):r.num(t.year);case"yy":return o?s({year:"2-digit"},"year"):r.num(t.year.toString().slice(-2),2);case"yyyy":return o?s({year:"numeric"},"year"):r.num(t.year,4);case"yyyyyy":return o?s({year:"numeric"},"year"):r.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return r.num(t.weekYear.toString().slice(-2),2);case"kkkk":return r.num(t.weekYear,4);case"W":return r.num(t.weekNumber);case"WW":return r.num(t.weekNumber,2);case"o":return r.num(t.ordinal);case"ooo":return r.num(t.ordinal,3);case"q":return r.num(t.quarter);case"qq":return r.num(t.quarter,2);case"X":return r.num(Math.floor(t.ts/1e3));case"x":return r.num(t.ts);default:return function(n){var i=e.macroTokenToFormatOpts(n);return i?r.formatWithSystemDefault(t,i):n}(n)}})},t.formatDurationFromString=function(t,n){var r,i=this,o=function(e){switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=e.parseFormat(n),a=s.reduce(function(e,t){var n=t.literal,r=t.val;return n?e:e.concat(r)},[]),l=t.shiftTo.apply(t,a.map(o).filter(function(e){return e}));return Ce(s,(r=l,function(e){var t=o(e);return t?i.num(r.get(t),e.length):e}))},e}(),Oe=function(){function e(e,t){this.reason=e,this.explanation=t}return e.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),Re=function(){function e(){}var t=e.prototype;return t.offsetName=function(e,t){throw new b},t.formatOffset=function(e,t){throw new b},t.offset=function(e){throw new b},t.equals=function(e){throw new b},r(e,[{key:"type",get:function(){throw new b}},{key:"name",get:function(){throw new b}},{key:"isUniversal",get:function(){throw new b}},{key:"isValid",get:function(){throw new b}}]),e}(),De=null,Le=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.offsetName=function(e,t){return ue(e,t.format,t.locale)},n.formatOffset=function(e,t){return fe(this.offset(e),t)},n.offset=function(e){return-new Date(e).getTimezoneOffset()},n.equals=function(e){return"system"===e.type},r(t,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===De&&(De=new t),De}}]),t}(Re),Ne={};var Fe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};var ze={},Ue=function(e){function t(n){var r;return(r=e.call(this)||this).zoneName=n,r.valid=t.isValidZone(n),r}o(t,e),t.create=function(e){return ze[e]||(ze[e]=new t(e)),ze[e]},t.resetCache=function(){ze={},Ne={}},t.isValidSpecifier=function(e){return this.isValidZone(e)},t.isValidZone=function(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}};var n=t.prototype;return n.offsetName=function(e,t){return ue(e,t.format,t.locale,this.name)},n.formatOffset=function(e,t){return fe(this.offset(e),t)},n.offset=function(e){var t=new Date(e);if(isNaN(t))return NaN;var n,r=(n=this.name,Ne[n]||(Ne[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ne[n]),i=r.formatToParts?function(e,t){for(var n=e.formatToParts(t),r=[],i=0;i<n.length;i++){var o=n[i],s=o.type,a=o.value,l=Fe[s];"era"===s?r[l]=a:G(l)||(r[l]=parseInt(a,10))}return r}(r,t):function(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),i=r[1],o=r[2];return[r[3],i,o,r[4],r[5],r[6],r[7]]}(r,t),o=i[0],s=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6];"BC"===l&&(o=1-Math.abs(o));var d=+t,p=d%1e3;return(ae({year:o,month:s,day:a,hour:24===c?0:c,minute:u,second:h,millisecond:0})-(d-=p>=0?p:1e3+p))/6e4},n.equals=function(e){return"iana"===e.type&&e.name===this.name},r(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(Re),je=null,Be=function(e){function t(t){var n;return(n=e.call(this)||this).fixed=t,n}o(t,e),t.instance=function(e){return 0===e?t.utcInstance:new t(e)},t.parseSpecifier=function(e){if(e){var n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new t(he(n[1],n[2]))}return null};var n=t.prototype;return n.offsetName=function(){return this.name},n.formatOffset=function(e,t){return fe(this.fixed,t)},n.offset=function(){return this.fixed},n.equals=function(e){return"fixed"===e.type&&e.fixed===this.fixed},r(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+fe(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return null===je&&(je=new t(0)),je}}]),t}(Re),Ve=function(e){function t(t){var n;return(n=e.call(this)||this).zoneName=t,n}o(t,e);var n=t.prototype;return n.offsetName=function(){return null},n.formatOffset=function(){return""},n.offset=function(){return NaN},n.equals=function(){return!1},r(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(Re);function He(e,t){if(G(e)||null===e)return t;if(e instanceof Re)return e;if(function(e){return"string"===typeof e}(e)){var n=e.toLowerCase();return"local"===n||"system"===n?t:"utc"===n||"gmt"===n?Be.utcInstance:Be.parseSpecifier(n)||Ue.create(e)}return q(e)?Be.instance(e):"object"===typeof e&&e.offset&&"number"===typeof e.offset?e:new Ve(e)}var $e,Ye=function(){return Date.now()},Ge="system",qe=null,We=null,Ke=null,Ze=function(){function e(){}return e.resetCaches=function(){ct.resetCache(),Ue.resetCache()},r(e,null,[{key:"now",get:function(){return Ye},set:function(e){Ye=e}},{key:"defaultZone",get:function(){return He(Ge,Le.instance)},set:function(e){Ge=e}},{key:"defaultLocale",get:function(){return qe},set:function(e){qe=e}},{key:"defaultNumberingSystem",get:function(){return We},set:function(e){We=e}},{key:"defaultOutputCalendar",get:function(){return Ke},set:function(e){Ke=e}},{key:"throwOnInvalid",get:function(){return $e},set:function(e){$e=e}}]),e}(),Je=["base"],Xe=["padTo","floor"],Qe={};var et={};function tt(e,t){void 0===t&&(t={});var n=JSON.stringify([e,t]),r=et[n];return r||(r=new Intl.DateTimeFormat(e,t),et[n]=r),r}var nt={};var rt={};var it=null;function ot(e,t,n,r,i){var o=e.listingMode(n);return"error"===o?null:"en"===o?r(t):i(t)}var st=function(){function e(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1,n.padTo,n.floor;var r=u(n,Xe);if(!t||Object.keys(r).length>0){var o=i({useGrouping:!1},n);n.padTo>0&&(o.minimumIntegerDigits=n.padTo),this.inf=function(e,t){void 0===t&&(t={});var n=JSON.stringify([e,t]),r=nt[n];return r||(r=new Intl.NumberFormat(e,t),nt[n]=r),r}(e,o)}}return e.prototype.format=function(e){if(this.inf){var t=this.floor?Math.floor(e):e;return this.inf.format(t)}return Q(this.floor?Math.floor(e):re(e,3),this.padTo)},e}(),at=function(){function e(e,t,n){var r;if(this.opts=n,e.zone.isUniversal){var o=e.offset/60*-1,s=o>=0?"Etc/GMT+"+o:"Etc/GMT"+o;0!==e.offset&&Ue.create(s).valid?(r=s,this.dt=e):(r="UTC",n.timeZoneName?this.dt=e:this.dt=0===e.offset?e:dr.fromMillis(e.ts+60*e.offset*1e3))}else"system"===e.zone.type?this.dt=e:(this.dt=e,r=e.zone.name);var a=i({},this.opts);r&&(a.timeZone=r),this.dtf=tt(t,a)}var t=e.prototype;return t.format=function(){return this.dtf.format(this.dt.toJSDate())},t.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},t.resolvedOptions=function(){return this.dtf.resolvedOptions()},e}(),lt=function(){function e(e,t,n){this.opts=i({style:"long"},n),!t&&K()&&(this.rtf=function(e,t){void 0===t&&(t={});var n=t;n.base;var r=u(n,Je),i=JSON.stringify([e,r]),o=rt[i];return o||(o=new Intl.RelativeTimeFormat(e,t),rt[i]=o),o}(e,n))}var t=e.prototype;return t.format=function(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n,r){void 0===n&&(n="always"),void 0===r&&(r=!1);var i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&o){var s="days"===e;switch(t){case 1:return s?"tomorrow":"next "+i[e][0];case-1:return s?"yesterday":"last "+i[e][0];case 0:return s?"today":"this "+i[e][0]}}var a=Object.is(t,-0)||t<0,l=Math.abs(t),c=1===l,u=i[e],h=r?c?u[1]:u[2]||u[1]:c?i[e][0]:e;return a?l+" "+h+" ago":"in "+l+" "+h}(t,e,this.opts.numeric,"long"!==this.opts.style)},t.formatToParts=function(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]},e}(),ct=function(){function e(e,t,n,r){var i=function(e){var t=e.indexOf("-u-");if(-1===t)return[e];var n,r=e.substring(0,t);try{n=tt(e).resolvedOptions()}catch(o){n=tt(r).resolvedOptions()}var i=n;return[r,i.numberingSystem,i.calendar]}(e),o=i[0],s=i[1],a=i[2];this.locale=o,this.numberingSystem=t||s||null,this.outputCalendar=n||a||null,this.intl=function(e,t,n){return n||t?(e+="-u",n&&(e+="-ca-"+n),t&&(e+="-nu-"+t),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}e.fromOpts=function(t){return e.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)},e.create=function(t,n,r,i){void 0===i&&(i=!1);var o=t||Ze.defaultLocale;return new e(o||(i?"en-US":it||(it=(new Intl.DateTimeFormat).resolvedOptions().locale)),n||Ze.defaultNumberingSystem,r||Ze.defaultOutputCalendar,o)},e.resetCache=function(){it=null,et={},nt={},rt={}},e.fromObject=function(t){var n=void 0===t?{}:t,r=n.locale,i=n.numberingSystem,o=n.outputCalendar;return e.create(r,i,o)};var t=e.prototype;return t.listingMode=function(){var e=this.isEnglish(),t=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return e&&t?"en":"intl"},t.clone=function(t){return t&&0!==Object.getOwnPropertyNames(t).length?e.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this},t.redefaultToEN=function(e){return void 0===e&&(e={}),this.clone(i({},e,{defaultToEN:!0}))},t.redefaultToSystem=function(e){return void 0===e&&(e={}),this.clone(i({},e,{defaultToEN:!1}))},t.months=function(e,t,n){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!0),ot(this,e,n,_e,function(){var n=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return r.monthsCache[i][e]||(r.monthsCache[i][e]=function(e){for(var t=[],n=1;n<=12;n++){var r=dr.utc(2016,n,1);t.push(e(r))}return t}(function(e){return r.extract(e,n,"month")})),r.monthsCache[i][e]})},t.weekdays=function(e,t,n){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!0),ot(this,e,n,Se,function(){var n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return r.weekdaysCache[i][e]||(r.weekdaysCache[i][e]=function(e){for(var t=[],n=1;n<=7;n++){var r=dr.utc(2016,11,13+n);t.push(e(r))}return t}(function(e){return r.extract(e,n,"weekday")})),r.weekdaysCache[i][e]})},t.meridiems=function(e){var t=this;return void 0===e&&(e=!0),ot(this,void 0,e,function(){return Ee},function(){if(!t.meridiemCache){var e={hour:"numeric",hourCycle:"h12"};t.meridiemCache=[dr.utc(2016,11,13,9),dr.utc(2016,11,13,19)].map(function(n){return t.extract(n,e,"dayperiod")})}return t.meridiemCache})},t.eras=function(e,t){var n=this;return void 0===t&&(t=!0),ot(this,e,t,ke,function(){var t={era:e};return n.eraCache[e]||(n.eraCache[e]=[dr.utc(-40,1,1),dr.utc(2017,1,1)].map(function(e){return n.extract(e,t,"era")})),n.eraCache[e]})},t.extract=function(e,t,n){var r=this.dtFormatter(e,t).formatToParts().find(function(e){return e.type.toLowerCase()===n});return r?r.value:null},t.numberFormatter=function(e){return void 0===e&&(e={}),new st(this.intl,e.forceSimple||this.fastNumbers,e)},t.dtFormatter=function(e,t){return void 0===t&&(t={}),new at(e,this.intl,t)},t.relFormatter=function(e){return void 0===e&&(e={}),new lt(this.intl,this.isEnglish(),e)},t.listFormatter=function(e){return void 0===e&&(e={}),function(e,t){void 0===t&&(t={});var n=JSON.stringify([e,t]),r=Qe[n];return r||(r=new Intl.ListFormat(e,t),Qe[n]=r),r}(this.intl,e)},t.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar},r(e,[{key:"fastNumbers",get:function(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}}]),e}();function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce(function(e,t){return e+t.source},"");return RegExp("^"+r+"$")}function ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(t,n){var r=t[0],o=t[1],s=t[2],a=n(e,s),l=a[0],c=a[1],u=a[2];return[i({},r,l),o||c,u]},[{},null,1]).slice(0,2)}}function dt(e){if(null==e)return[null,null];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var s=o[i],a=s[0],l=s[1],c=a.exec(e);if(c)return l(c)}return[null,null]}function pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var r,i={};for(r=0;r<t.length;r++)i[t[r]]=ee(e[n+r]);return[i,null,n+r]}}var ft=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,mt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,gt=RegExp(""+mt.source+ft.source+"?"),yt=RegExp("(?:T"+gt.source+")?"),vt=pt("weekYear","weekNumber","weekDay"),_t=pt("year","ordinal"),bt=RegExp(mt.source+" ?(?:"+ft.source+"|("+/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/.source+"))?"),wt=RegExp("(?: "+bt.source+")?");function xt(e,t,n){var r=e[t];return G(r)?n:ee(r)}function St(e,t){return[{year:xt(e,t),month:xt(e,t+1,1),day:xt(e,t+2,1)},null,t+3]}function Et(e,t){return[{hours:xt(e,t,0),minutes:xt(e,t+1,0),seconds:xt(e,t+2,0),milliseconds:ne(e[t+3])},null,t+4]}function Tt(e,t){var n=!e[t]&&!e[t+1],r=he(e[t+1],e[t+2]);return[{},n?null:Be.instance(r),t+3]}function Mt(e,t){return[{},e[t]?Ue.create(e[t]):null,t+1]}var At=RegExp("^T?"+mt.source+"$"),kt=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function Ct(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u="-"===t[0],h=l&&"-"===l[0],d=function(e,t){return void 0===t&&(t=!1),void 0!==e&&(t||e&&u)?-e:e};return[{years:d(te(n)),months:d(te(r)),weeks:d(te(i)),days:d(te(o)),hours:d(te(s)),minutes:d(te(a)),seconds:d(te(l),"-0"===l),milliseconds:d(ne(c),h)}]}var It={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Pt(e,t,n,r,i,o,s){var a={year:2===t.length?ce(ee(t)):ee(t),month:ye.indexOf(n)+1,day:ee(r),hour:ee(i),minute:ee(o)};return s&&(a.second=ee(s)),e&&(a.weekday=e.length>3?be.indexOf(e)+1:we.indexOf(e)+1),a}var Ot=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Rt(e){var t,n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=Pt(n,o,i,r,s,a,l);return t=c?It[c]:u?0:he(h,d),[p,new Be(t)]}var Dt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Lt=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Nt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ft(e){var t=e[1],n=e[2],r=e[3];return[Pt(t,e[4],r,n,e[5],e[6],e[7]),Be.utcInstance]}function zt(e){var t=e[1],n=e[2],r=e[3],i=e[4],o=e[5],s=e[6];return[Pt(t,e[7],n,r,i,o,s),Be.utcInstance]}var Ut=ut(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,yt),jt=ut(/(\d{4})-?W(\d\d)(?:-?(\d))?/,yt),Bt=ut(/(\d{4})-?(\d{3})/,yt),Vt=ut(gt),Ht=ht(St,Et,Tt),$t=ht(vt,Et,Tt),Yt=ht(_t,Et,Tt),Gt=ht(Et,Tt);var qt=ht(Et);var Wt=ut(/(\d{4})-(\d\d)-(\d\d)/,wt),Kt=ut(bt),Zt=ht(St,Et,Tt,Mt),Jt=ht(Et,Tt,Mt);var Xt={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Qt=i({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},Xt),en=365.2425,tn=30.436875,nn=i({years:{quarters:4,months:12,weeks:52.1775,days:en,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:tn,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},Xt),rn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],on=rn.slice(0).reverse();function sn(e,t,n){void 0===n&&(n=!1);var r={values:n?t.values:i({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new ln(r)}function an(e,t,n,r,i){var o=e[i][n],s=t[n]/o,a=!(Math.sign(s)===Math.sign(r[i]))&&0!==r[i]&&Math.abs(s)<=1?function(e){return e<0?Math.floor(e):Math.ceil(e)}(s):Math.trunc(s);r[i]+=a,t[n]-=a*o}var ln=function(){function e(e){var t="longterm"===e.conversionAccuracy||!1;this.values=e.values,this.loc=e.loc||ct.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=t?nn:Qt,this.isLuxonDuration=!0}e.fromMillis=function(t,n){return e.fromObject({milliseconds:t},n)},e.fromObject=function(t,n){if(void 0===n&&(n={}),null==t||"object"!==typeof t)throw new _("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new e({values:pe(t,e.normalizeUnit),loc:ct.fromObject(n),conversionAccuracy:n.conversionAccuracy})},e.fromDurationLike=function(t){if(q(t))return e.fromMillis(t);if(e.isDuration(t))return t;if("object"===typeof t)return e.fromObject(t);throw new _("Unknown duration argument "+t+" of type "+typeof t)},e.fromISO=function(t,n){var r=function(e){return dt(e,[kt,Ct])}(t),i=r[0];return i?e.fromObject(i,n):e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.fromISOTime=function(t,n){var r=function(e){return dt(e,[At,qt])}(t),i=r[0];return i?e.fromObject(i,n):e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new _("need to specify a reason the Duration is invalid");var r=t instanceof Oe?t:new Oe(t,n);if(Ze.throwOnInvalid)throw new g(r);return new e({invalid:r})},e.normalizeUnit=function(e){var t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new v(e);return t},e.isDuration=function(e){return e&&e.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(e,t){void 0===t&&(t={});var n=i({},t,{floor:!1!==t.round&&!1!==t.floor});return this.isValid?Pe.create(this.loc,n).formatDurationFromString(this,e):"Invalid Duration"},t.toHuman=function(e){var t=this;void 0===e&&(e={});var n=rn.map(function(n){var r=t.values[n];return G(r)?null:t.loc.numberFormatter(i({style:"unit",unitDisplay:"long"},e,{unit:n.slice(0,-1)})).format(r)}).filter(function(e){return e});return this.loc.listFormatter(i({type:"conjunction",style:e.listStyle||"narrow"},e)).format(n)},t.toObject=function(){return this.isValid?i({},this.values):{}},t.toISO=function(){if(!this.isValid)return null;var e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=re(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e},t.toISOTime=function(e){if(void 0===e&&(e={}),!this.isValid)return null;var t=this.toMillis();if(t<0||t>=864e5)return null;e=i({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},e);var n=this.shiftTo("hours","minutes","seconds","milliseconds"),r="basic"===e.format?"hhmm":"hh:mm";e.suppressSeconds&&0===n.seconds&&0===n.milliseconds||(r+="basic"===e.format?"ss":":ss",e.suppressMilliseconds&&0===n.milliseconds||(r+=".SSS"));var o=n.toFormat(r);return e.includePrefix&&(o="T"+o),o},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(t){if(!this.isValid)return this;for(var n,r=e.fromDurationLike(t),i={},o=d(rn);!(n=o()).done;){var s=n.value;(J(r.values,s)||J(this.values,s))&&(i[s]=r.get(s)+this.get(s))}return sn(this,{values:i},!0)},t.minus=function(t){if(!this.isValid)return this;var n=e.fromDurationLike(t);return this.plus(n.negate())},t.mapUnits=function(e){if(!this.isValid)return this;for(var t={},n=0,r=Object.keys(this.values);n<r.length;n++){var i=r[n];t[i]=de(e(this.values[i],i))}return sn(this,{values:t},!0)},t.get=function(t){return this[e.normalizeUnit(t)]},t.set=function(t){return this.isValid?sn(this,{values:i({},this.values,pe(t,e.normalizeUnit))}):this},t.reconfigure=function(e){var t=void 0===e?{}:e,n=t.locale,r=t.numberingSystem,i=t.conversionAccuracy,o={loc:this.loc.clone({locale:n,numberingSystem:r})};return i&&(o.conversionAccuracy=i),sn(this,o)},t.as=function(e){return this.isValid?this.shiftTo(e).get(e):NaN},t.normalize=function(){if(!this.isValid)return this;var e=this.toObject();return function(e,t){on.reduce(function(n,r){return G(t[r])?n:(n&&an(e,t,n,t,r),r)},null)}(this.matrix,e),sn(this,{values:e},!0)},t.shiftTo=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!this.isValid)return this;if(0===n.length)return this;n=n.map(function(t){return e.normalizeUnit(t)});for(var i,o,s={},a={},l=this.toObject(),c=d(rn);!(o=c()).done;){var u=o.value;if(n.indexOf(u)>=0){i=u;var h=0;for(var p in a)h+=this.matrix[p][u]*a[p],a[p]=0;q(l[u])&&(h+=l[u]);var f=Math.trunc(h);for(var m in s[u]=f,a[u]=(1e3*h-1e3*f)/1e3,l)rn.indexOf(m)>rn.indexOf(u)&&an(this.matrix,l,m,s,u)}else q(l[u])&&(a[u]=l[u])}for(var g in a)0!==a[g]&&(s[i]+=g===i?a[g]:a[g]/this.matrix[i][g]);return sn(this,{values:s},!0).normalize()},t.negate=function(){if(!this.isValid)return this;for(var e={},t=0,n=Object.keys(this.values);t<n.length;t++){var r=n[t];e[r]=0===this.values[r]?0:-this.values[r]}return sn(this,{values:e},!0)},t.equals=function(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(var n,r=d(rn);!(n=r()).done;){var i=n.value;if(!t(this.values[i],e.values[i]))return!1}return!0},r(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),cn="Invalid Interval";function un(e,t){return e&&e.isValid?t&&t.isValid?t<e?hn.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null:hn.invalid("missing or invalid end"):hn.invalid("missing or invalid start")}var hn=function(){function e(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new _("need to specify a reason the Interval is invalid");var r=t instanceof Oe?t:new Oe(t,n);if(Ze.throwOnInvalid)throw new m(r);return new e({invalid:r})},e.fromDateTimes=function(t,n){var r=pr(t),i=pr(n),o=un(r,i);return null==o?new e({start:r,end:i}):o},e.after=function(t,n){var r=ln.fromDurationLike(n),i=pr(t);return e.fromDateTimes(i,i.plus(r))},e.before=function(t,n){var r=ln.fromDurationLike(n),i=pr(t);return e.fromDateTimes(i.minus(r),i)},e.fromISO=function(t,n){var r=(t||"").split("/",2),i=r[0],o=r[1];if(i&&o){var s,a,l,c;try{a=(s=dr.fromISO(i,n)).isValid}catch(o){a=!1}try{c=(l=dr.fromISO(o,n)).isValid}catch(o){c=!1}if(a&&c)return e.fromDateTimes(s,l);if(a){var u=ln.fromISO(o,n);if(u.isValid)return e.after(s,u)}else if(c){var h=ln.fromISO(i,n);if(h.isValid)return e.before(l,h)}}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.isInterval=function(e){return e&&e.isLuxonInterval||!1};var t=e.prototype;return t.length=function(e){return void 0===e&&(e="milliseconds"),this.isValid?this.toDuration.apply(this,[e]).get(e):NaN},t.count=function(e){if(void 0===e&&(e="milliseconds"),!this.isValid)return NaN;var t=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(t,e).get(e))+1},t.hasSame=function(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(e){return!!this.isValid&&this.s>e},t.isBefore=function(e){return!!this.isValid&&this.e<=e},t.contains=function(e){return!!this.isValid&&(this.s<=e&&this.e>e)},t.set=function(t){var n=void 0===t?{}:t,r=n.start,i=n.end;return this.isValid?e.fromDateTimes(r||this.s,i||this.e):this},t.splitAt=function(){var t=this;if(!this.isValid)return[];for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=r.map(pr).filter(function(e){return t.contains(e)}).sort(),s=[],a=this.s,l=0;a<this.e;){var c=o[l]||this.e,u=+c>+this.e?this.e:c;s.push(e.fromDateTimes(a,u)),a=u,l+=1}return s},t.splitBy=function(t){var n=ln.fromDurationLike(t);if(!this.isValid||!n.isValid||0===n.as("milliseconds"))return[];for(var r,i=this.s,o=1,s=[];i<this.e;){var a=this.start.plus(n.mapUnits(function(e){return e*o}));r=+a>+this.e?this.e:a,s.push(e.fromDateTimes(i,r)),i=r,o+=1}return s},t.divideEqually=function(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]},t.overlaps=function(e){return this.e>e.s&&this.s<e.e},t.abutsStart=function(e){return!!this.isValid&&+this.e===+e.s},t.abutsEnd=function(e){return!!this.isValid&&+e.e===+this.s},t.engulfs=function(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)},t.equals=function(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))},t.intersection=function(t){if(!this.isValid)return this;var n=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return n>=r?null:e.fromDateTimes(n,r)},t.union=function(t){if(!this.isValid)return this;var n=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return e.fromDateTimes(n,r)},e.merge=function(e){var t=e.sort(function(e,t){return e.s-t.s}).reduce(function(e,t){var n=e[0],r=e[1];return r?r.overlaps(t)||r.abutsStart(t)?[n,r.union(t)]:[n.concat([r]),t]:[n,t]},[[],null]),n=t[0],r=t[1];return r&&n.push(r),n},e.xor=function(t){for(var n,r,i=null,o=0,s=[],a=t.map(function(e){return[{time:e.s,type:"s"},{time:e.e,type:"e"}]}),l=d((n=Array.prototype).concat.apply(n,a).sort(function(e,t){return e.time-t.time}));!(r=l()).done;){var c=r.value;1===(o+="s"===c.type?1:-1)?i=c.time:(i&&+i!==+c.time&&s.push(e.fromDateTimes(i,c.time)),i=null)}return e.merge(s)},t.difference=function(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.xor([this].concat(r)).map(function(e){return t.intersection(e)}).filter(function(e){return e&&!e.isEmpty()})},t.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":cn},t.toISO=function(e){return this.isValid?this.s.toISO(e)+"/"+this.e.toISO(e):cn},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():cn},t.toISOTime=function(e){return this.isValid?this.s.toISOTime(e)+"/"+this.e.toISOTime(e):cn},t.toFormat=function(e,t){var n=(void 0===t?{}:t).separator,r=void 0===n?" \u2013 ":n;return this.isValid?""+this.s.toFormat(e)+r+this.e.toFormat(e):cn},t.toDuration=function(e,t){return this.isValid?this.e.diff(this.s,e,t):ln.invalid(this.invalidReason)},t.mapEndpoints=function(t){return e.fromDateTimes(t(this.s),t(this.e))},r(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),dn=function(){function e(){}return e.hasDST=function(e){void 0===e&&(e=Ze.defaultZone);var t=dr.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset},e.isValidIANAZone=function(e){return Ue.isValidZone(e)},e.normalizeZone=function(e){return He(e,Ze.defaultZone)},e.months=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,s=void 0===o?null:o,a=n.locObj,l=void 0===a?null:a,c=n.outputCalendar,u=void 0===c?"gregory":c;return(l||ct.create(i,s,u)).months(e)},e.monthsFormat=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,s=void 0===o?null:o,a=n.locObj,l=void 0===a?null:a,c=n.outputCalendar,u=void 0===c?"gregory":c;return(l||ct.create(i,s,u)).months(e,!0)},e.weekdays=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,s=void 0===o?null:o,a=n.locObj;return((void 0===a?null:a)||ct.create(i,s,null)).weekdays(e)},e.weekdaysFormat=function(e,t){void 0===e&&(e="long");var n=void 0===t?{}:t,r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,s=void 0===o?null:o,a=n.locObj;return((void 0===a?null:a)||ct.create(i,s,null)).weekdays(e,!0)},e.meridiems=function(e){var t=(void 0===e?{}:e).locale,n=void 0===t?null:t;return ct.create(n).meridiems()},e.eras=function(e,t){void 0===e&&(e="short");var n=(void 0===t?{}:t).locale,r=void 0===n?null:n;return ct.create(r,null,"gregory").eras(e)},e.features=function(){return{relative:K()}},e}();function pn(e,t){var n=function(e){return e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=n(t)-n(e);return Math.floor(ln.fromMillis(r).as("days"))}function fn(e,t,n,r){var i=function(e,t,n){for(var r,i,o={},s=0,a=[["years",function(e,t){return t.year-e.year}],["quarters",function(e,t){return t.quarter-e.quarter}],["months",function(e,t){return t.month-e.month+12*(t.year-e.year)}],["weeks",function(e,t){var n=pn(e,t);return(n-n%7)/7}],["days",pn]];s<a.length;s++){var l=a[s],c=l[0],u=l[1];if(n.indexOf(c)>=0){var h;r=c;var d,p=u(e,t);(i=e.plus(((h={})[c]=p,h)))>t?(e=e.plus(((d={})[c]=p-1,d)),p-=1):e=i,o[c]=p}}return[e,o,i,r]}(e,t,n),o=i[0],s=i[1],a=i[2],l=i[3],c=t-o,u=n.filter(function(e){return["hours","minutes","seconds","milliseconds"].indexOf(e)>=0});if(0===u.length){var h;if(a<t)a=o.plus(((h={})[l]=1,h));a!==o&&(s[l]=(s[l]||0)+c/(a-o))}var d,p=ln.fromObject(s,r);return u.length>0?(d=ln.fromMillis(c,r)).shiftTo.apply(d,u).plus(p):p}var mn={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},gn={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},yn=mn.hanidec.replace(/[\[|\]]/g,"").split("");function vn(e,t){var n=e.numberingSystem;return void 0===t&&(t=""),new RegExp(""+mn[n||"latn"]+t)}function _n(e,t){return void 0===t&&(t=function(e){return e}),{regex:e,deser:function(e){var n=e[0];return t(function(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(-1!==e[n].search(mn.hanidec))t+=yn.indexOf(e[n]);else for(var i in gn){var o=gn[i],s=o[0],a=o[1];r>=s&&r<=a&&(t+=r-s)}}return parseInt(t,10)}return t}(n))}}}var bn="( |"+String.fromCharCode(160)+")",wn=new RegExp(bn,"g");function xn(e){return e.replace(/\./g,"\\.?").replace(wn,bn)}function Sn(e){return e.replace(/\./g,"").replace(wn," ").toLowerCase()}function En(e,t){return null===e?null:{regex:RegExp(e.map(xn).join("|")),deser:function(n){var r=n[0];return e.findIndex(function(e){return Sn(r)===Sn(e)})+t}}}function Tn(e,t){return{regex:e,deser:function(e){return he(e[1],e[2])},groups:t}}function Mn(e){return{regex:e,deser:function(e){return e[0]}}}var An={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};var kn=null;function Cn(e,t){if(e.literal)return e;var n=Pe.macroTokenToFormatOpts(e.val);if(!n)return e;var r=Pe.create(t,n).formatDateTimeParts((kn||(kn=dr.fromMillis(1555555555555)),kn)).map(function(e){return function(e,t,n){var r=e.type,i=e.value;if("literal"===r)return{literal:!0,val:i};var o=n[r],s=An[r];return"object"===typeof s&&(s=s[o]),s?{literal:!1,val:s}:void 0}(e,0,n)});return r.includes(void 0)?e:r}function In(e,t,n){var r=function(e,t){var n;return(n=Array.prototype).concat.apply(n,e.map(function(e){return Cn(e,t)}))}(Pe.parseFormat(n),e),i=r.map(function(t){return function(e,t){var n=vn(t),r=vn(t,"{2}"),i=vn(t,"{3}"),o=vn(t,"{4}"),s=vn(t,"{6}"),a=vn(t,"{1,2}"),l=vn(t,"{1,3}"),c=vn(t,"{1,6}"),u=vn(t,"{1,9}"),h=vn(t,"{2,4}"),d=vn(t,"{4,6}"),p=function(e){return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:function(e){return e[0]},literal:!0};var t},f=function(f){if(e.literal)return p(f);switch(f.val){case"G":return En(t.eras("short",!1),0);case"GG":return En(t.eras("long",!1),0);case"y":return _n(c);case"yy":case"kk":return _n(h,ce);case"yyyy":case"kkkk":return _n(o);case"yyyyy":return _n(d);case"yyyyyy":return _n(s);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return _n(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return _n(r);case"MMM":return En(t.months("short",!0,!1),1);case"MMMM":return En(t.months("long",!0,!1),1);case"LLL":return En(t.months("short",!1,!1),1);case"LLLL":return En(t.months("long",!1,!1),1);case"o":case"S":return _n(l);case"ooo":case"SSS":return _n(i);case"u":return Mn(u);case"uu":return Mn(a);case"uuu":case"E":case"c":return _n(n);case"a":return En(t.meridiems(),0);case"EEE":return En(t.weekdays("short",!1,!1),1);case"EEEE":return En(t.weekdays("long",!1,!1),1);case"ccc":return En(t.weekdays("short",!0,!1),1);case"cccc":return En(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Tn(new RegExp("([+-]"+a.source+")(?::("+r.source+"))?"),2);case"ZZZ":return Tn(new RegExp("([+-]"+a.source+")("+r.source+")?"),2);case"z":return Mn(/[a-z_+-/]{1,256}?/i);default:return p(f)}}(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return f.token=e,f}(t,e)}),o=i.find(function(e){return e.invalidReason});if(o)return{input:t,tokens:r,invalidReason:o.invalidReason};var s=function(e){return["^"+e.map(function(e){return e.regex}).reduce(function(e,t){return e+"("+t.source+")"},"")+"$",e]}(i),a=s[0],l=s[1],c=RegExp(a,"i"),u=function(e,t,n){var r=e.match(t);if(r){var i={},o=1;for(var s in n)if(J(n,s)){var a=n[s],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(o,o+l))),o+=l}return[r,i]}return[r,{}]}(t,c,l),h=u[0],d=u[1],p=d?function(e){var t,n=null;return G(e.z)||(n=Ue.create(e.z)),G(e.Z)||(n||(n=new Be(e.Z)),t=e.Z),G(e.q)||(e.M=3*(e.q-1)+1),G(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),G(e.u)||(e.S=ne(e.u)),[Object.keys(e).reduce(function(t,n){var r=function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(n);return r&&(t[r]=e[n]),t},{}),n,t]}(d):[null,null,void 0],f=p[0],m=p[1],g=p[2];if(J(d,"a")&&J(d,"H"))throw new y("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:c,rawMatches:h,matches:d,result:f,zone:m,specificOffset:g}}var Pn=[0,31,59,90,120,151,181,212,243,273,304,334],On=[0,31,60,91,121,152,182,213,244,274,305,335];function Rn(e,t){return new Oe("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function Dn(e,t,n){var r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);var i=r.getUTCDay();return 0===i?7:i}function Ln(e,t,n){return n+(ie(e)?On:Pn)[t-1]}function Nn(e,t){var n=ie(e)?On:Pn,r=n.findIndex(function(e){return e<t});return{month:r+1,day:t-n[r]}}function Fn(e){var t,n=e.year,r=e.month,o=e.day,s=Ln(n,r,o),a=Dn(n,r,o),l=Math.floor((s-a+10)/7);return l<1?l=le(t=n-1):l>le(n)?(t=n+1,l=1):t=n,i({weekYear:t,weekNumber:l,weekday:a},me(e))}function zn(e){var t,n=e.weekYear,r=e.weekNumber,o=e.weekday,s=Dn(n,1,4),a=oe(n),l=7*r+o-s-3;l<1?l+=oe(t=n-1):l>a?(t=n+1,l-=oe(n)):t=n;var c=Nn(t,l);return i({year:t,month:c.month,day:c.day},me(e))}function Un(e){var t=e.year;return i({year:t,ordinal:Ln(t,e.month,e.day)},me(e))}function jn(e){var t=e.year,n=Nn(t,e.ordinal);return i({year:t,month:n.month,day:n.day},me(e))}function Bn(e){var t=W(e.year),n=X(e.month,1,12),r=X(e.day,1,se(e.year,e.month));return t?n?!r&&Rn("day",e.day):Rn("month",e.month):Rn("year",e.year)}function Vn(e){var t=e.hour,n=e.minute,r=e.second,i=e.millisecond,o=X(t,0,23)||24===t&&0===n&&0===r&&0===i,s=X(n,0,59),a=X(r,0,59),l=X(i,0,999);return o?s?a?!l&&Rn("millisecond",i):Rn("second",r):Rn("minute",n):Rn("hour",t)}var Hn="Invalid DateTime",$n=864e13;function Yn(e){return new Oe("unsupported zone",'the zone "'+e.name+'" is not supported')}function Gn(e){return null===e.weekData&&(e.weekData=Fn(e.c)),e.weekData}function qn(e,t){var n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new dr(i({},n,t,{old:n}))}function Wn(e,t,n){var r=e-60*t*1e3,i=n.offset(r);if(t===i)return[r,t];r-=60*(i-t)*1e3;var o=n.offset(r);return i===o?[r,i]:[e-60*Math.min(i,o)*1e3,Math.max(i,o)]}function Kn(e,t){var n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Zn(e,t,n){return Wn(ae(e),t,n)}function Jn(e,t){var n=e.o,r=e.c.year+Math.trunc(t.years),o=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),s=i({},e.c,{year:r,month:o,day:Math.min(e.c.day,se(r,o))+Math.trunc(t.days)+7*Math.trunc(t.weeks)}),a=ln.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),l=Wn(ae(s),n,e.zone),c=l[0],u=l[1];return 0!==a&&(c+=a,u=e.zone.offset(c)),{ts:c,o:u}}function Xn(e,t,n,r,o,s){var a=n.setZone,l=n.zone;if(e&&0!==Object.keys(e).length){var c=t||l,u=dr.fromObject(e,i({},n,{zone:c,specificOffset:s}));return a?u:u.setZone(l)}return dr.invalid(new Oe("unparsable",'the input "'+o+"\" can't be parsed as "+r))}function Qn(e,t,n){return void 0===n&&(n=!0),e.isValid?Pe.create(ct.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function er(e,t){var n=e.c.year>9999||e.c.year<0,r="";return n&&e.c.year>=0&&(r+="+"),r+=Q(e.c.year,n?6:4),t?(r+="-",r+=Q(e.c.month),r+="-",r+=Q(e.c.day)):(r+=Q(e.c.month),r+=Q(e.c.day)),r}function tr(e,t,n,r,i){var o=Q(e.c.hour);return t?(o+=":",o+=Q(e.c.minute),0===e.c.second&&n||(o+=":")):o+=Q(e.c.minute),0===e.c.second&&n||(o+=Q(e.c.second),0===e.c.millisecond&&r||(o+=".",o+=Q(e.c.millisecond,3))),i&&(e.isOffsetFixed&&0===e.offset?o+="Z":e.o<0?(o+="-",o+=Q(Math.trunc(-e.o/60)),o+=":",o+=Q(Math.trunc(-e.o%60))):(o+="+",o+=Q(Math.trunc(e.o/60)),o+=":",o+=Q(Math.trunc(e.o%60)))),o}var nr={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},rr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},ir={ordinal:1,hour:0,minute:0,second:0,millisecond:0},or=["year","month","day","hour","minute","second","millisecond"],sr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ar=["year","ordinal","hour","minute","second","millisecond"];function lr(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new v(e);return t}function cr(e,t){var n,r,i=He(t.zone,Ze.defaultZone),o=ct.fromObject(t),s=Ze.now();if(G(e.year))n=s;else{for(var a,l=d(or);!(a=l()).done;){var c=a.value;G(e[c])&&(e[c]=nr[c])}var u=Bn(e)||Vn(e);if(u)return dr.invalid(u);var h=Zn(e,i.offset(s),i);n=h[0],r=h[1]}return new dr({ts:n,zone:i,loc:o,o:r})}function ur(e,t,n){var r=!!G(n.round)||n.round,i=function(e,i){return e=re(e,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,i)},o=function(r){return n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r)};if(n.unit)return i(o(n.unit),n.unit);for(var s,a=d(n.units);!(s=a()).done;){var l=s.value,c=o(l);if(Math.abs(c)>=1)return i(c,l)}return i(e>t?-0:0,n.units[n.units.length-1])}function hr(e){var t,n={};return e.length>0&&"object"===typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}var dr=function(){function e(e){var t=e.zone||Ze.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new Oe("invalid input"):null)||(t.isValid?null:Yn(t));this.ts=G(e.ts)?Ze.now():e.ts;var r=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t)){var o=[e.old.c,e.old.o];r=o[0],i=o[1]}else{var s=t.offset(this.ts);r=Kn(this.ts,s),r=(n=Number.isNaN(r.year)?new Oe("invalid input"):null)?null:r,i=n?null:s}this._zone=t,this.loc=e.loc||ct.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}e.now=function(){return new e({})},e.local=function(){var e=hr(arguments),t=e[0],n=e[1];return cr({year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]},t)},e.utc=function(){var e=hr(arguments),t=e[0],n=e[1],r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6];return t.zone=Be.utcInstance,cr({year:r,month:i,day:o,hour:s,minute:a,second:l,millisecond:c},t)},e.fromJSDate=function(t,n){void 0===n&&(n={});var r=function(e){return"[object Date]"===Object.prototype.toString.call(e)}(t)?t.valueOf():NaN;if(Number.isNaN(r))return e.invalid("invalid input");var i=He(n.zone,Ze.defaultZone);return i.isValid?new e({ts:r,zone:i,loc:ct.fromObject(n)}):e.invalid(Yn(i))},e.fromMillis=function(t,n){if(void 0===n&&(n={}),q(t))return t<-$n||t>$n?e.invalid("Timestamp out of range"):new e({ts:t,zone:He(n.zone,Ze.defaultZone),loc:ct.fromObject(n)});throw new _("fromMillis requires a numerical input, but received a "+typeof t+" with value "+t)},e.fromSeconds=function(t,n){if(void 0===n&&(n={}),q(t))return new e({ts:1e3*t,zone:He(n.zone,Ze.defaultZone),loc:ct.fromObject(n)});throw new _("fromSeconds requires a numerical input")},e.fromObject=function(t,n){void 0===n&&(n={}),t=t||{};var r=He(n.zone,Ze.defaultZone);if(!r.isValid)return e.invalid(Yn(r));var i=Ze.now(),o=G(n.specificOffset)?r.offset(i):n.specificOffset,s=pe(t,lr),a=!G(s.ordinal),l=!G(s.year),c=!G(s.month)||!G(s.day),u=l||c,h=s.weekYear||s.weekNumber,p=ct.fromObject(n);if((u||a)&&h)throw new y("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new y("Can't mix ordinal dates with month/day");var f,m,g=h||s.weekday&&!u,v=Kn(i,o);g?(f=sr,m=rr,v=Fn(v)):a?(f=ar,m=ir,v=Un(v)):(f=or,m=nr);for(var _,b=!1,w=d(f);!(_=w()).done;){var x=_.value;G(s[x])?s[x]=b?m[x]:v[x]:b=!0}var S=g?function(e){var t=W(e.weekYear),n=X(e.weekNumber,1,le(e.weekYear)),r=X(e.weekday,1,7);return t?n?!r&&Rn("weekday",e.weekday):Rn("week",e.week):Rn("weekYear",e.weekYear)}(s):a?function(e){var t=W(e.year),n=X(e.ordinal,1,oe(e.year));return t?!n&&Rn("ordinal",e.ordinal):Rn("year",e.year)}(s):Bn(s),E=S||Vn(s);if(E)return e.invalid(E);var T=Zn(g?zn(s):a?jn(s):s,o,r),M=new e({ts:T[0],zone:r,o:T[1],loc:p});return s.weekday&&u&&t.weekday!==M.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+s.weekday+" and a date of "+M.toISO()):M},e.fromISO=function(e,t){void 0===t&&(t={});var n=function(e){return dt(e,[Ut,Ht],[jt,$t],[Bt,Yt],[Vt,Gt])}(e);return Xn(n[0],n[1],t,"ISO 8601",e)},e.fromRFC2822=function(e,t){void 0===t&&(t={});var n=function(e){return dt(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Ot,Rt])}(e);return Xn(n[0],n[1],t,"RFC 2822",e)},e.fromHTTP=function(e,t){void 0===t&&(t={});var n=function(e){return dt(e,[Dt,Ft],[Lt,Ft],[Nt,zt])}(e);return Xn(n[0],n[1],t,"HTTP",t)},e.fromFormat=function(t,n,r){if(void 0===r&&(r={}),G(t)||G(n))throw new _("fromFormat requires an input string and a format");var i=r,o=i.locale,s=void 0===o?null:o,a=i.numberingSystem,l=void 0===a?null:a,c=function(e,t,n){var r=In(e,t,n);return[r.result,r.zone,r.specificOffset,r.invalidReason]}(ct.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0}),t,n),u=c[0],h=c[1],d=c[2],p=c[3];return p?e.invalid(p):Xn(u,h,r,"format "+n,t,d)},e.fromString=function(t,n,r){return void 0===r&&(r={}),e.fromFormat(t,n,r)},e.fromSQL=function(e,t){void 0===t&&(t={});var n=function(e){return dt(e,[Wt,Zt],[Kt,Jt])}(e);return Xn(n[0],n[1],t,"SQL",e)},e.invalid=function(t,n){if(void 0===n&&(n=null),!t)throw new _("need to specify a reason the DateTime is invalid");var r=t instanceof Oe?t:new Oe(t,n);if(Ze.throwOnInvalid)throw new f(r);return new e({invalid:r})},e.isDateTime=function(e){return e&&e.isLuxonDateTime||!1};var t=e.prototype;return t.get=function(e){return this[e]},t.resolvedLocaleOptions=function(e){void 0===e&&(e={});var t=Pe.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t.locale,numberingSystem:t.numberingSystem,outputCalendar:t.calendar}},t.toUTC=function(e,t){return void 0===e&&(e=0),void 0===t&&(t={}),this.setZone(Be.instance(e),t)},t.toLocal=function(){return this.setZone(Ze.defaultZone)},t.setZone=function(t,n){var r=void 0===n?{}:n,i=r.keepLocalTime,o=void 0!==i&&i,s=r.keepCalendarTime,a=void 0!==s&&s;if((t=He(t,Ze.defaultZone)).equals(this.zone))return this;if(t.isValid){var l=this.ts;if(o||a){var c=t.offset(this.ts);l=Zn(this.toObject(),c,t)[0]}return qn(this,{ts:l,zone:t})}return e.invalid(Yn(t))},t.reconfigure=function(e){var t=void 0===e?{}:e,n=t.locale,r=t.numberingSystem,i=t.outputCalendar;return qn(this,{loc:this.loc.clone({locale:n,numberingSystem:r,outputCalendar:i})})},t.setLocale=function(e){return this.reconfigure({locale:e})},t.set=function(e){if(!this.isValid)return this;var t,n=pe(e,lr),r=!G(n.weekYear)||!G(n.weekNumber)||!G(n.weekday),o=!G(n.ordinal),s=!G(n.year),a=!G(n.month)||!G(n.day),l=s||a,c=n.weekYear||n.weekNumber;if((l||o)&&c)throw new y("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&o)throw new y("Can't mix ordinal dates with month/day");r?t=zn(i({},Fn(this.c),n)):G(n.ordinal)?(t=i({},this.toObject(),n),G(n.day)&&(t.day=Math.min(se(t.year,t.month),t.day))):t=jn(i({},Un(this.c),n));var u=Zn(t,this.o,this.zone);return qn(this,{ts:u[0],o:u[1]})},t.plus=function(e){return this.isValid?qn(this,Jn(this,ln.fromDurationLike(e))):this},t.minus=function(e){return this.isValid?qn(this,Jn(this,ln.fromDurationLike(e).negate())):this},t.startOf=function(e){if(!this.isValid)return this;var t={},n=ln.normalizeUnit(e);switch(n){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===n&&(t.weekday=1),"quarters"===n){var r=Math.ceil(this.month/3);t.month=3*(r-1)+1}return this.set(t)},t.endOf=function(e){var t;return this.isValid?this.plus((t={},t[e]=1,t)).startOf(e).minus(1):this},t.toFormat=function(e,t){return void 0===t&&(t={}),this.isValid?Pe.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Hn},t.toLocaleString=function(e,t){return void 0===e&&(e=E),void 0===t&&(t={}),this.isValid?Pe.create(this.loc.clone(t),e).formatDateTime(this):Hn},t.toLocaleParts=function(e){return void 0===e&&(e={}),this.isValid?Pe.create(this.loc.clone(e),e).formatDateTimeParts(this):[]},t.toISO=function(e){var t=void 0===e?{}:e,n=t.format,r=void 0===n?"extended":n,i=t.suppressSeconds,o=void 0!==i&&i,s=t.suppressMilliseconds,a=void 0!==s&&s,l=t.includeOffset,c=void 0===l||l;if(!this.isValid)return null;var u="extended"===r,h=er(this,u);return h+="T",h+=tr(this,u,o,a,c)},t.toISODate=function(e){var t=(void 0===e?{}:e).format,n=void 0===t?"extended":t;return this.isValid?er(this,"extended"===n):null},t.toISOWeekDate=function(){return Qn(this,"kkkk-'W'WW-c")},t.toISOTime=function(e){var t=void 0===e?{}:e,n=t.suppressMilliseconds,r=void 0!==n&&n,i=t.suppressSeconds,o=void 0!==i&&i,s=t.includeOffset,a=void 0===s||s,l=t.includePrefix,c=void 0!==l&&l,u=t.format,h=void 0===u?"extended":u;return this.isValid?(c?"T":"")+tr(this,"extended"===h,o,r,a):null},t.toRFC2822=function(){return Qn(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return Qn(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return this.isValid?er(this,!0):null},t.toSQLTime=function(e){var t=void 0===e?{}:e,n=t.includeOffset,r=void 0===n||n,i=t.includeZone,o=void 0!==i&&i,s=t.includeOffsetSpace,a="HH:mm:ss.SSS";return(o||r)&&((void 0===s||s)&&(a+=" "),o?a+="z":r&&(a+="ZZ")),Qn(this,a,!0)},t.toSQL=function(e){return void 0===e&&(e={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(e):null},t.toString=function(){return this.isValid?this.toISO():Hn},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=i({},this.c);return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(e,t,n){if(void 0===t&&(t="milliseconds"),void 0===n&&(n={}),!this.isValid||!e.isValid)return ln.invalid("created by diffing an invalid DateTime");var r,o=i({locale:this.locale,numberingSystem:this.numberingSystem},n),s=(r=t,Array.isArray(r)?r:[r]).map(ln.normalizeUnit),a=e.valueOf()>this.valueOf(),l=fn(a?this:e,a?e:this,s,o);return a?l.negate():l},t.diffNow=function(t,n){return void 0===t&&(t="milliseconds"),void 0===n&&(n={}),this.diff(e.now(),t,n)},t.until=function(e){return this.isValid?hn.fromDateTimes(this,e):this},t.hasSame=function(e,t){if(!this.isValid)return!1;var n=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(t)<=n&&n<=r.endOf(t)},t.equals=function(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)},t.toRelative=function(t){if(void 0===t&&(t={}),!this.isValid)return null;var n=t.base||e.fromObject({},{zone:this.zone}),r=t.padding?this<n?-t.padding:t.padding:0,o=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(o=t.unit,s=void 0),ur(n,this.plus(r),i({},t,{numeric:"always",units:o,unit:s}))},t.toRelativeCalendar=function(t){return void 0===t&&(t={}),this.isValid?ur(t.base||e.fromObject({},{zone:this.zone}),this,i({},t,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.every(e.isDateTime))throw new _("min requires all arguments be DateTimes");return Z(n,function(e){return e.valueOf()},Math.min)},e.max=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.every(e.isDateTime))throw new _("max requires all arguments be DateTimes");return Z(n,function(e){return e.valueOf()},Math.max)},e.fromFormatExplain=function(e,t,n){void 0===n&&(n={});var r=n,i=r.locale,o=void 0===i?null:i,s=r.numberingSystem,a=void 0===s?null:s;return In(ct.fromOpts({locale:o,numberingSystem:a,defaultToEN:!0}),e,t)},e.fromStringExplain=function(t,n,r){return void 0===r&&(r={}),e.fromFormatExplain(t,n,r)},r(e,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Gn(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Gn(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Gn(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Un(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?dn.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?dn.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?dn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?dn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return ie(this.year)}},{key:"daysInMonth",get:function(){return se(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?oe(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?le(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return E}},{key:"DATE_MED",get:function(){return T}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return M}},{key:"DATE_FULL",get:function(){return A}},{key:"DATE_HUGE",get:function(){return k}},{key:"TIME_SIMPLE",get:function(){return C}},{key:"TIME_WITH_SECONDS",get:function(){return I}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return P}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return O}},{key:"TIME_24_SIMPLE",get:function(){return R}},{key:"TIME_24_WITH_SECONDS",get:function(){return D}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return L}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return N}},{key:"DATETIME_SHORT",get:function(){return F}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return z}},{key:"DATETIME_MED",get:function(){return U}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return j}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return B}},{key:"DATETIME_FULL",get:function(){return V}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return H}},{key:"DATETIME_HUGE",get:function(){return $}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Y}}]),e}();function pr(e){if(dr.isDateTime(e))return e;if(e&&e.valueOf&&q(e.valueOf()))return dr.fromJSDate(e);if(e&&"object"===typeof e)return dr.fromObject(e);throw new _("Unknown datetime argument: "+e+", of type "+typeof e)}t.c9=dr,t.wB=Ze},91773(e,t,n){"use strict";function r(e){if("boolean"===typeof e)return Number(e);const t="string"===typeof e?parseFloat(e):e;return"number"!==typeof t||isNaN(t)||t<0||t>1?void 0:t}n.d(t,{i:()=>r})},91829(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.d(t,{Tw:()=>g,HY:()=>f,y$:()=>p});var c="function"===typeof Symbol&&Symbol.observable||"@@observable",u=function(){return Math.random().toString(36).substring(7).split("").join(".")},h={INIT:"@@redux/INIT"+u(),REPLACE:"@@redux/REPLACE"+u(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+u()}};function d(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function p(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(l(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(l(1));return n(p)(e,t)}if("function"!==typeof e)throw new Error(l(2));var i=e,o=t,s=[],a=s,u=!1;function f(){a===s&&(a=s.slice())}function m(){if(u)throw new Error(l(3));return o}function g(e){if("function"!==typeof e)throw new Error(l(4));if(u)throw new Error(l(5));var t=!0;return f(),a.push(e),function(){if(t){if(u)throw new Error(l(6));t=!1,f();var n=a.indexOf(e);a.splice(n,1),s=null}}}function y(e){if(!d(e))throw new Error(l(7));if("undefined"===typeof e.type)throw new Error(l(8));if(u)throw new Error(l(9));try{u=!0,o=i(o,e)}finally{u=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}return y({type:h.INIT}),(r={dispatch:y,subscribe:g,getState:m,replaceReducer:function(e){if("function"!==typeof e)throw new Error(l(10));i=e,y({type:h.REPLACE})}})[c]=function(){var e,t=g;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(l(11));function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[c]=function(){return this},e},r}function f(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:h.INIT}))throw new Error(l(12));if("undefined"===typeof n(void 0,{type:h.PROBE_UNKNOWN_ACTION()}))throw new Error(l(13))})}(n)}catch(a){o=a}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var c=s[a],u=n[c],h=e[c],d=u(h,t);if("undefined"===typeof d){t&&t.type;throw new Error(l(14))}i[c]=d,r=r||d!==h}return(r=r||s.length!==Object.keys(e).length)?i:e}}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(l(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map(function(e){return e(i)});return r=m.apply(void 0,o)(n.dispatch),a(a({},n),{},{dispatch:r})}}}},91931(e,t,n){"use strict";n.d(t,{k:()=>i});var r=n(12295);class i{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,r.gn)(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,null!=e?e:r.S$?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}},92049(e,t,n){"use strict";n.d(t,{A:()=>r});const r=Array.isArray},92155(e,t,n){"use strict";n.d(t,{A:()=>c,b:()=>l});var r=n(96540),i=n(34164);function o(e,t,n=!1){const r={...t};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const a=s;if("components"===a||"slots"===a)r[a]={...e[a],...r[a]};else if("componentsProps"===a||"slotProps"===a){const i=e[a],s=t[a];if(s)if(i){r[a]={...s};for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const t=e;r[a][t]=o(i[t],s[t],n)}}else r[a]=s;else r[a]=i||{}}else"className"===a&&n&&t.className?r.className=(0,i.A)(e?.className,t?.className):"style"===a&&n&&t.style?r.style={...e?.style,...t?.style}:void 0===r[a]&&(r[a]=e[a])}return r}var s=n(74848);const a=r.createContext(void 0);function l({props:e,name:t}){return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?o(i.defaultProps,r,t.components.mergeClassNameAndStyle):i.styleOverrides||i.variants?r:o(i,r,t.components.mergeClassNameAndStyle)}({props:e,name:t,theme:{components:r.useContext(a)}})}const c=function({value:e,children:t}){return(0,s.jsx)(a.Provider,{value:e,children:t})}},92328(e,t,n){"use strict";n.d(t,{h:()=>h});var r=n(95200),i=n(94988);var o=n(64208);class s{constructor(e,t){let n,r;n=e||new i.H,r=t||new i.H,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(r){throw this._popScope(),r}return(0,o.Qg)(n)?n.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function a(){const e=(0,r.EU)(),t=(0,r.Se)(e);return t.stack=t.stack||new s((0,r.BY)("defaultCurrentScope",()=>new i.H),(0,r.BY)("defaultIsolationScope",()=>new i.H))}function l(e){return a().withScope(e)}function c(e,t){const n=a();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function u(e){return a().withScope(()=>e(a().getIsolationScope()))}function h(e){const t=(0,r.Se)(e);return t.acs?t.acs:{withIsolationScope:u,withScope:l,withSetScope:c,withSetIsolationScope:(e,t)=>u(t),getCurrentScope:()=>a().getScope(),getIsolationScope:()=>a().getIsolationScope()}}},93024(e,t,n){"use strict";n.d(t,{dp:()=>Xe});var r=n(57968),i=n(26674),o=n(74611),s=n(19282),a=n(54704),l=n(84347),c=n(70333),u=n(5915),h=n(93177),d=n(31158),p=n(74733);class f{constructor(e={}){this._traceId=e.traceId||(0,p.e)(),this._spanId=e.spanId||(0,p.Z)()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:u.CC}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}var m=n(75330);function g(e){if(!e||0===e.length)return;const t={};return e.forEach(e=>{const n=e.attributes||{},r=n[o.Sn],i=n[o.xc];"string"===typeof r&&"number"===typeof i&&(t[e.name]={value:i,unit:r})}),t}var y=n(88728);class v{constructor(e={}){this._traceId=e.traceId||(0,p.e)(),this._spanId=e.spanId||(0,p.Z)(),this._startTime=e.startTimestamp||(0,h.zf)(),this._links=e.links,this._attributes={},this.setAttributes({[o.JD]:"manual",[o.uT]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?u.aO:u.CC}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach(t=>this.setAttribute(t,e[t])),this}updateStartTime(e){this._startTime=(0,u.cI)(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(o.i_,"custom"),this}end(e){this._endTime||(this._endTime=(0,u.cI)(e),function(e){if(!i.T)return;const{description:t="< unknown name >",op:n="< unknown op >"}=(0,u.et)(e),{spanId:r}=e.spanContext(),o=`[Tracing] Finishing "${n}" ${(0,u.zU)(e)===e?"root ":""}span "${t}" with ID ${r}`;s.Yz.log(o)}(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[o.uT],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:(0,u.yW)(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[o.JD],profile_id:this._attributes[o.E1],exclusive_time:this._attributes[o.jG],measurements:g(this._events),is_segment:this._isStandaloneSpan&&(0,u.zU)(this)===this||void 0,segment_id:this._isStandaloneSpan?(0,u.zU)(this).spanContext().spanId:void 0,links:(0,u.uU)(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){i.T&&s.Yz.log("[Tracing] Adding an event to span:",e);const r=_(t)?t:n||(0,h.zf)(),o=_(t)?{}:t||{},a={name:e,time:(0,u.cI)(r),attributes:o};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=(0,r.KU)();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===(0,u.zU)(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=(0,r.KU)();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");t.sendEnvelope(e)}((0,m.lu)([this],e)):(i.T&&s.Yz.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();if(t){((0,y.L)(this).scope||(0,r.o5)()).captureEvent(t)}}_convertSpanToTransaction(){if(!b((0,u.et)(this)))return;this._name||(i.T&&s.Yz.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=(0,y.L)(this),n=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(!0!==this._sampled)return;const r=(0,u.xO)(this).filter(e=>e!==this&&!function(e){return e instanceof v&&e.isStandaloneSpan()}(e)).map(e=>(0,u.et)(e)).filter(b),a=this._attributes[o.i_];delete this._attributes[o.Le],r.forEach(e=>{delete e.data[o.Le]});const l={contexts:{trace:(0,u.Ck)(this)},spans:r.length>1e3?r.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):r,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,dynamicSamplingContext:(0,d.k1)(this)},request:n,...a&&{transaction_info:{source:a}}},c=g(this._events);return c&&Object.keys(c).length&&(i.T&&s.Yz.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function _(e){return e&&"number"===typeof e||e instanceof Date||Array.isArray(e)}function b(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}var w=n(91135),x=n(92328),S=n(95200),E=n(64208);function T(e,t,n=()=>{},r=()=>{}){let i;try{i=e()}catch(o){throw t(o),n(),o}return function(e,t,n,r){if((0,E.Qg)(e))return e.then(e=>(n(),r(e),e),e=>{throw t(e),n(),e});return n(),r(e),e}(i,t,n,r)}var M=n(91773);const A="__SENTRY_SUPPRESS_TRACING__";function k(e){const t=O();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=P(e),{forceTransaction:i,parentSpan:o}=e;return(e.scope?t=>(0,r.v4)(e.scope,t):void 0!==o?e=>C(o,e):e=>e())(()=>{const t=(0,r.o5)(),s=D(t,o);return e.onlyIfParent&&!s?new f:I({parentSpan:s,spanArguments:n,forceTransaction:i,scope:t})})}function C(e,t){const n=O();return n.withActiveSpan?n.withActiveSpan(e,t):(0,r.v4)(n=>((0,c.r)(n,e||void 0),t(n)))}function I({parentSpan:e,spanArguments:t,forceTransaction:n,scope:o}){if(!(0,a.f)()){const r=new f;if(n||!e){const e={sampled:"false",sample_rate:"0",transaction:t.name,...(0,d.k1)(r)};(0,d.LZ)(r,e)}return r}const l=(0,r.rm)();let c;if(e&&!n)c=function(e,t,n){const{spanId:i,traceId:o}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[A]&&(0,u.pK)(e),a=s?new v({...n,parentSpanId:i,traceId:o,sampled:s}):new f({traceId:o});(0,u.Hu)(e,a);const l=(0,r.KU)();l&&(l.emit("spanStart",a),n.endTimestamp&&l.emit("spanEnd",a));return a}(e,o,t),(0,u.Hu)(e,c);else if(e){const n=(0,d.k1)(e),{traceId:r,spanId:i}=e.spanContext(),s=(0,u.pK)(e);c=R({traceId:r,parentSpanId:i,...t},o,s),(0,d.LZ)(c,n)}else{const{traceId:e,dsc:n,parentSpanId:r,sampled:i}={...l.getPropagationContext(),...o.getPropagationContext()};c=R({traceId:e,parentSpanId:r,...t},o,i),n&&(0,d.LZ)(c,n)}return function(e){if(!i.T)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=(0,u.et)(e),{spanId:o}=e.spanContext(),a=(0,u.pK)(e),l=(0,u.zU)(e),c=l===e,h=`[Tracing] Starting ${a?"sampled":"unsampled"} ${c?"root ":""}span`,d=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&d.push(`parent ID: ${r}`),!c){const{op:e,description:t}=(0,u.et)(l);d.push(`root ID: ${l.spanContext().spanId}`),e&&d.push(`root op: ${e}`),t&&d.push(`root description: ${t}`)}s.Yz.log(`${h}\n  ${d.join("\n  ")}`)}(c),(0,y.d)(c,o,l),c}function P(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=(0,u.cI)(e.startTime),delete n.startTime,n}return t}function O(){const e=(0,S.EU)();return(0,x.h)(e)}function R(e,t,n){const l=(0,r.KU)(),c=l?.getOptions()||{},{name:u=""}=e,h={spanAttributes:{...e.attributes},spanName:u,parentSampled:n};l?.emit("beforeSampling",h,{decision:!1});const d=h.parentSampled??n,p=h.spanAttributes,f=t.getPropagationContext(),[m,g,y]=t.getScopeData().sdkProcessingMetadata[A]?[!1]:function(e,t,n){if(!(0,a.f)(e))return[!1];let r,o;"function"===typeof e.tracesSampler?(o=e.tracesSampler({...t,inheritOrSampleWith:e=>"number"===typeof t.parentSampleRate?t.parentSampleRate:"boolean"===typeof t.parentSampled?Number(t.parentSampled):e}),r=!0):void 0!==t.parentSampled?o=t.parentSampled:"undefined"!==typeof e.tracesSampleRate&&(o=e.tracesSampleRate,r=!0);const l=(0,M.i)(o);if(void 0===l)return i.T&&s.Yz.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!l)return i.T&&s.Yz.log("[Tracing] Discarding transaction because "+("function"===typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,l,r];const c=n<l;return c||i.T&&s.Yz.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[c,l,r]}(c,{name:u,parentSampled:d,attributes:p,parentSampleRate:(0,M.i)(f.dsc?.sample_rate)},f.sampleRand),_=new v({...e,attributes:{[o.i_]:"custom",[o.sy]:void 0!==g&&y?g:void 0,...p},sampled:m});return!m&&l&&(i.T&&s.Yz.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),l.recordDroppedEvent("sample_rate","transaction")),l&&l.emit("spanStart",_),_}function D(e,t){if(t)return t;if(null===t)return;const n=(0,c.f)(e);if(!n)return;const i=(0,r.KU)();return(i?i.getOptions():{}).parentSpanIsAlwaysRootSpan?(0,u.zU)(n):n}function L(e){return void 0!==e?t=>C(e,t):e=>e()}const N={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function F(e,t={}){const n=new Map;let p,m=!1,g="externalFinish",y=!t.disableAutoFinish;const _=[],{idleTimeout:b=N.idleTimeout,finalTimeout:x=N.finalTimeout,childSpanTimeout:S=N.childSpanTimeout,beforeSpanEnd:E,trimIdleSpanEndTimestamp:T=!0}=t,M=(0,r.KU)();if(!M||!(0,a.f)()){const e=new f,t={sample_rate:"0",sampled:"false",...(0,d.k1)(e)};return(0,d.LZ)(e,t),e}const A=(0,r.o5)(),C=(0,u.Bk)(),I=function(e){const t=k(e);return(0,c.r)((0,r.o5)(),t),i.T&&s.Yz.log("[Tracing] Started span is an idle span"),t}(e);function P(){p&&(clearTimeout(p),p=void 0)}function O(e){P(),p=setTimeout(()=>{!m&&0===n.size&&y&&(g="idleTimeout",I.end(e))},b)}function R(e){p=setTimeout(()=>{!m&&y&&(g="heartbeatFailed",I.end(e))},S)}function D(e){m=!0,n.clear(),_.forEach(e=>e()),(0,c.r)(A,C);const t=(0,u.et)(I),{start_timestamp:r}=t;if(!r)return;t.data[o.fs]||I.setAttribute(o.fs,g);const a=t.status;a&&"unknown"!==a||I.setStatus({code:w.F3}),s.Yz.log(`[Tracing] Idle span "${t.op}" finished`);const l=(0,u.xO)(I).filter(e=>e!==I);let h=0;l.forEach(t=>{t.isRecording()&&(t.setStatus({code:w.TJ,message:"cancelled"}),t.end(e),i.T&&s.Yz.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=(0,u.et)(t),{timestamp:r=0,start_timestamp:o=0}=n,a=o<=e,l=r-o<=(x+b)/1e3;if(i.T){const e=JSON.stringify(t,void 0,2);a?l||s.Yz.log("[Tracing] Discarding span since it finished after idle span final timeout",e):s.Yz.log("[Tracing] Discarding span since it happened after idle span was finished",e)}l&&a||((0,u.VS)(I,t),h++)}),h>0&&I.setAttribute("sentry.idle_span_discarded_spans",h)}return I.end=new Proxy(I.end,{apply(e,t,n){if(E&&E(I),t instanceof f)return;const[r,...i]=n,o=r||(0,h.zf)(),s=(0,u.cI)(o),a=(0,u.xO)(I).filter(e=>e!==I),c=(0,u.et)(I);if(!a.length||!T)return D(s),Reflect.apply(e,t,[s,...i]);const d=M.getOptions().ignoreSpans,p=a?.reduce((e,t)=>{const n=(0,u.et)(t);return n.timestamp?d&&(0,l.e)(n,d)?e:e?Math.max(e,n.timestamp):n.timestamp:e},void 0),m=c.start_timestamp,g=Math.min(m?m+x/1e3:1/0,Math.max(m||-1/0,Math.min(s,p||1/0)));return D(g),Reflect.apply(e,t,[g,...i])}}),_.push(M.on("spanStart",e=>{if(m||e===I||(0,u.et)(e).timestamp||e instanceof v&&e.isStandaloneSpan())return;var t;(0,u.xO)(I).includes(e)&&(t=e.spanContext().spanId,P(),n.set(t,!0),R((0,h.zf)()+S/1e3))})),_.push(M.on("spanEnd",e=>{var t;m||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&O((0,h.zf)()+b/1e3))})),_.push(M.on("idleSpanEnableAutoFinish",e=>{e===I&&(y=!0,O(),n.size&&R())})),t.disableAutoFinish||O(),setTimeout(()=>{m||(I.setStatus({code:w.TJ,message:"deadline_exceeded"}),g="finalTimeout",I.end())},x),I}var z=n(80491),U=n(99411);let j=!1;var B=n(18845),V=n(93908),H=n(57726),$=n(67607),Y=n(46403),G=n(70125),q=n(14910),W=n(4693),K=n(43164),Z=n(18056);function J(e){return"number"===typeof e&&isFinite(e)}function X(e,t,n,{...r}){const i=(0,u.et)(e).start_timestamp;return i&&i>t&&"function"===typeof e.updateStartTime&&e.updateStartTime(t),C(e,()=>{const e=k({startTime:t,...r});return e&&e.end(n),e})}function Q(e){const t=(0,r.KU)();if(!t)return;const{name:n,transaction:i,attributes:o,startTime:s}=e,{release:a,environment:l,sendDefaultPii:c}=t.getOptions(),u=t.getIntegrationByName("Replay"),h=u?.getReplayId(),d=(0,r.o5)(),p=d.getUser(),f=void 0!==p?p.email||p.id||p.ip_address:void 0;let m;try{m=d.getScopeData().contexts.profile.profile_id}catch{}return k({name:n,attributes:{release:a,environment:l,user:f||void 0,profile_id:m||void 0,replay_id:h||void 0,transaction:i,"user_agent.original":q.j.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o},startTime:s,experimental:{standalone:!0}})}function ee(){return q.j.addEventListener&&q.j.performance}function te(e){return e/1e3}function ne(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function re(e,t){let n,r=!1;function i(e){!r&&n&&t(e,n),r=!0}(e=>{const t=t=>{"pagehide"!==t.type&&"hidden"!==q.j.document?.visibilityState||e(t)};(0,Z.d)("visibilitychange",t,{capture:!0,once:!0}),(0,Z.d)("pagehide",t,{capture:!0,once:!0})})(()=>{i("pagehide")});const o=e.on("beforeStartNavigationSpan",(e,t)=>{t?.isRedirect||(i("navigation"),o(),s())}),s=e.on("afterStartPageLoadSpan",e=>{n=e.spanContext().spanId,s()})}function ie(e){let t,n=0;if(!ne("layout-shift"))return;const i=(0,K.a9)(({metric:e})=>{const r=e.entries[e.entries.length-1];r&&(n=e.value,t=r)},!0);re(e,(e,a)=>{!function(e,t,n,i){W.T&&s.Yz.log(`Sending CLS span (${e})`);const a=t?te(((0,h.k3)()||0)+t.startTime):(0,h.zf)(),l=(0,r.o5)().getScopeData().transactionName,c=t?(0,H.Hd)(t.sources[0]?.node):"Layout shift",u={[o.JD]:"auto.http.browser.cls",[o.uT]:"ui.webvital.cls",[o.jG]:0,"sentry.pageload.span_id":n,"sentry.report_event":i};t?.sources&&t.sources.forEach((e,t)=>{u[`cls.source.${t+1}`]=(0,H.Hd)(e.node)});const d=Q({name:c,transaction:l,attributes:u,startTime:a});d&&(d.addEvent("cls",{[o.Sn]:"",[o.xc]:e}),d.end(a))}(n,t,a,e),i()})}function oe(e){let t,n=0;if(!ne("largest-contentful-paint"))return;const i=(0,K.Pt)(({metric:e})=>{const r=e.entries[e.entries.length-1];r&&(n=e.value,t=r)},!0);re(e,(e,a)=>{!function(e,t,n,i){W.T&&s.Yz.log(`Sending LCP span (${e})`);const a=te(((0,h.k3)()||0)+(t?.startTime||0)),l=(0,r.o5)().getScopeData().transactionName,c=t?(0,H.Hd)(t.element):"Largest contentful paint",u={[o.JD]:"auto.http.browser.lcp",[o.uT]:"ui.webvital.lcp",[o.jG]:0,"sentry.pageload.span_id":n,"sentry.report_event":i};t&&(t.element&&(u["lcp.element"]=(0,H.Hd)(t.element)),t.id&&(u["lcp.id"]=t.id),t.url&&(u["lcp.url"]=t.url),null!=t.loadTime&&(u["lcp.loadTime"]=t.loadTime),null!=t.renderTime&&(u["lcp.renderTime"]=t.renderTime),null!=t.size&&(u["lcp.size"]=t.size));const d=Q({name:c,transaction:l,attributes:u,startTime:a});d&&(d.addEvent("lcp",{[o.Sn]:"millisecond",[o.xc]:e}),d.end(a))}(n,t,a,e),i()})}function se(e){return e?(((0,h.k3)()||performance.timeOrigin)+e)/1e3:e}function ae(e){const t={};if(void 0!=e.nextHopProtocol){const{name:n,version:r}=function(e){let t="unknown",n="unknown",r="";for(const i of e){if("/"===i){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=i}return r===e&&(t=r),{name:t,version:n}}(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return(0,h.k3)()||ee()?.timeOrigin?(n={...t,"http.request.redirect_start":se(e.redirectStart),"http.request.redirect_end":se(e.redirectEnd),"http.request.worker_start":se(e.workerStart),"http.request.fetch_start":se(e.fetchStart),"http.request.domain_lookup_start":se(e.domainLookupStart),"http.request.domain_lookup_end":se(e.domainLookupEnd),"http.request.connect_start":se(e.connectStart),"http.request.secure_connection_start":se(e.secureConnectionStart),"http.request.connection_end":se(e.connectEnd),"http.request.request_start":se(e.requestStart),"http.request.response_start":se(e.responseStart),"http.request.response_end":se(e.responseEnd),"http.request.time_to_first_byte":null!=e.responseStart?e.responseStart/1e3:void 0},Object.fromEntries(Object.entries(n).filter(([,e])=>null!=e))):t;var n}var le=n(97806),ce=n(4692),ue=n(30318);const he=2147483647;let de,pe,fe=0,me={};function ge({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=ee();if(r&&(0,h.k3)()){r.mark&&q.j.performance.mark("sentry-tracing-init");const i=t?oe(n):(0,K.Pt)(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(me.lcp={value:e.value,unit:"millisecond"},de=t)},!0),o=(0,K.YG)(({metric:e})=>{e.entries[e.entries.length-1]&&(me.ttfb={value:e.value,unit:"millisecond"})}),s=e?ie(n):(0,K.a9)(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(me.cls={value:e.value,unit:""},pe=t)},!0);return()=>{i?.(),o(),s?.()}}return()=>{}}function ye(e,t){const n=ee(),r=(0,h.k3)();if(!n?.getEntries||!r)return;const a=te(r),l=n.getEntries(),{op:c,start_timestamp:d}=(0,u.et)(e);l.slice(fe).forEach(n=>{const r=te(n.startTime),i=te(Math.max(0,n.duration));if(!("navigation"===c&&d&&a+r<d))switch(n.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{ve(e,t,r,n)}),ve(e,t,"secureConnection",n,"TLS/SSL"),ve(e,t,"fetch",n,"cache"),ve(e,t,"domainLookup",n,"DNS"),function(e,t,n){const r=n+te(t.requestStart),i=n+te(t.responseEnd),s=n+te(t.responseStart);t.responseEnd&&(X(e,r,i,{op:"browser.request",name:t.name,attributes:{[o.JD]:"auto.ui.browser.metrics"}}),X(e,s,i,{op:"browser.response",name:t.name,attributes:{[o.JD]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,n,a);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,i,s){if(function(e){if("measure"!==e?.entryType)return;try{return"Components \u269b"===e.detail.devtools.track}catch{return}}(t))return;if(["mark","measure"].includes(t.entryType)&&(0,G.Xr)(t.name,s))return;const a=(0,ce.z)(!1),l=te(a?a.requestStart:0),c=i+Math.max(n,l),u=i+n,h=u+r,d={[o.JD]:"auto.resource.browser.metrics"};c!==u&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=c);(function(e,t){try{const n=t.detail;if(!n)return;if("object"===typeof n){for(const[t,r]of Object.entries(n))if(r&&(0,E.sO)(r))e[`sentry.browser.measure.detail.${t}`]=r;else if(void 0!==r)try{e[`sentry.browser.measure.detail.${t}`]=JSON.stringify(r)}catch{}return}if((0,E.sO)(n))return void(e["sentry.browser.measure.detail"]=n);try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}})(d,t),c<=h&&X(e,c,h,{name:t.name,op:t.entryType,attributes:d})}(e,n,r,i,a,t.ignorePerformanceApiSpans);const s=(0,ue.N)(),l=n.startTime<s.firstHiddenTime;"first-paint"===n.name&&l&&(me.fp={value:n.startTime,unit:"millisecond"}),"first-contentful-paint"===n.name&&l&&(me.fcp={value:n.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,i,s,a){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const l=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(a?.includes(l))return;const c={[o.JD]:"auto.resource.browser.metrics"},u=(0,$.Dl)(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop());u.host&&(c["server.address"]=u.host);c["url.same_origin"]=n.includes(q.j.location.origin),function(e,t,n){n.forEach(([n,r])=>{const i=e[n];null!=i&&("number"===typeof i&&i<he||"string"===typeof i)&&(t[r]=i)})}(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const h={...c,...ae(t)},d=s+r,p=d+i;X(e,d,p,{name:n.replace(q.j.location.origin,""),op:l,attributes:h})}(e,n,n.name,r,i,a,t.ignoreResourceSpans)}}),fe=Math.max(l.length-1,0),function(e){const t=q.j.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),J(n.rtt)&&(me["connection.rtt"]={value:n.rtt,unit:"millisecond"}));J(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);J(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===c&&(function(e){const t=(0,ce.z)(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(me),t.recordClsOnPageloadSpan||delete me.cls,t.recordLcpOnPageloadSpan||delete me.lcp,Object.entries(me).forEach(([e,t])=>{!function(e,t,n,r=(0,u.Bk)()){const a=r&&(0,u.zU)(r);a&&(i.T&&s.Yz.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),a.addEvent(e,{[o.xc]:t,[o.Sn]:n}))}(e,t.value,t.unit)}),e.setAttribute("performance.timeOrigin",a),e.setAttribute("performance.activationStart",(0,le.b)()),function(e,t){de&&t.recordLcpOnPageloadSpan&&(de.element&&e.setAttribute("lcp.element",(0,H.Hd)(de.element)),de.id&&e.setAttribute("lcp.id",de.id),de.url&&e.setAttribute("lcp.url",de.url.trim().slice(0,200)),null!=de.loadTime&&e.setAttribute("lcp.loadTime",de.loadTime),null!=de.renderTime&&e.setAttribute("lcp.renderTime",de.renderTime),e.setAttribute("lcp.size",de.size));pe?.sources&&t.recordClsOnPageloadSpan&&pe.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,(0,H.Hd)(t.node)))}(e,t)),de=void 0,pe=void 0,me={}}function ve(e,t,n,r,i=n){const s=function(e){if("secureConnection"===e)return"connectEnd";if("fetch"===e)return"domainLookupStart";return`${e}End`}(n),a=t[s],l=t[`${n}Start`];l&&a&&X(e,r+te(l),r+te(a),{op:`browser.${i}`,name:t.name,attributes:{[o.JD]:"auto.ui.browser.metrics",..."redirect"===n&&null!=t.redirectCount?{"http.redirect_count":t.redirectCount}:{}}})}var _e=n(96747);const be=[],we=new Map,xe=new Map;function Se(){if(ee()&&(0,h.k3)()){const e=(0,K.hT)(Te);return()=>{e()}}return()=>{}}const Ee={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};const Te=({metric:e})=>{if(void 0==e.value)return;const t=te(e.value);if(t>60)return;const n=e.entries.find(t=>t.duration===e.value&&Ee[t.name]);if(!n)return;const{interactionId:i}=n,s=Ee[n.name],a=te((0,h.k3)()+n.startTime),l=(0,u.Bk)(),c=l?(0,u.zU)(l):void 0,d=null!=i?we.get(i):void 0,p=d?.span||c,f=p?(0,u.et)(p).description:(0,r.o5)().getScopeData().transactionName,m=Q({name:d?.elementName||(0,H.Hd)(n.target),transaction:f,attributes:{[o.JD]:"auto.http.browser.inp",[o.uT]:`ui.interaction.${s}`,[o.jG]:n.duration},startTime:a});m&&(m.addEvent("inp",{[o.Sn]:"millisecond",[o.xc]:e.value}),m.end(a+t))};function Me(){const e=Object.keys(Ee);function t(e){const t=e.target;if(!t)return;const n=(0,H.Hd)(t),r=Math.round(e.timeStamp);if(xe.set(r,n),xe.size>50){const e=xe.keys().next().value;void 0!==e&&xe.delete(e)}}(0,_e.B)()&&e.forEach(e=>{q.j.addEventListener(e,t,{capture:!0,passive:!0})});const n=({entries:e})=>{const t=(0,u.Bk)(),n=t&&(0,u.zU)(t);e.forEach(e=>{if(!(0,K.tC)(e))return;const t=e.interactionId;if(null==t)return;if(we.has(t))return;const r=e.target?(0,H.Hd)(e.target):function(e){const t=Math.round(e.startTime);let n=xe.get(t);if(!n)for(let r=-5;r<=5;r++){const e=xe.get(t+r);if(e){n=e;break}}return n||"<unknown>"}(e);if(be.length>10){const e=be.shift();we.delete(e)}be.push(t),we.set(t,{span:n,elementName:r})})};(0,K.wv)("event",n),(0,K.wv)("first-input",n)}const Ae=({entries:e})=>{const t=(0,u.Bk)(),n=t?(0,u.zU)(t):void 0,i=n?(0,u.et)(n).description:(0,r.o5)().getScopeData().transactionName;e.forEach(e=>{const t=e;if(!t.identifier)return;const n=t.name,s=t.renderTime,a=t.loadTime,[l,d]=a?[te(a),"load-time"]:s?[te(s),"render-time"]:[(0,h.zf)(),"entry-emission"],p="image-paint"===n?te(Math.max(0,(s??0)-(a??0))):0,m={[o.JD]:"auto.ui.browser.elementtiming",[o.uT]:"ui.elementtiming",[o.i_]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":i,"element.id":t.id,"element.type":t.element?.tagName?.toLowerCase()||"unknown","element.size":t.naturalWidth&&t.naturalHeight?`${t.naturalWidth}x${t.naturalHeight}`:void 0,"element.render_time":s,"element.load_time":a,"element.url":t.url||void 0,"element.identifier":t.identifier,"element.paint_type":n};!function(e,t){const n=O();if(n.startSpan)return n.startSpan(e,t);const i=P(e),{forceTransaction:o,parentSpan:s,scope:a}=e,l=a?.clone();(0,r.v4)(l,()=>L(s)(()=>{const n=(0,r.o5)(),a=D(n,s),l=e.onlyIfParent&&!a?new f:I({parentSpan:a,spanArguments:i,forceTransaction:o,scope:n});return(0,c.r)(n,l),T(()=>t(l),()=>{const{status:e}=(0,u.et)(l);!l.isRecording()||e&&"ok"!==e||l.setStatus({code:w.TJ,message:"internal_error"})},()=>{l.end()})}))}({name:`element[${t.identifier}]`,attributes:m,startTime:l,onlyIfParent:!0},e=>{e.end(l+p)})})};var ke=n(85761),Ce=n(62745),Ie=n(54386);const Pe="sentry_previous_trace",Oe="sentry.previous_trace";function Re(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const i="session-storage"===t;let a=i?function(){try{const e=Ie.jf.sessionStorage?.getItem(Pe);return JSON.parse(e)}catch{return}}():void 0;e.on("spanStart",e=>{if((0,u.zU)(e)!==e)return;const t=(0,r.o5)().getPropagationContext();a=function(e,t,n){const r=(0,u.et)(t);function i(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[o.sy])}catch{return 0}}const a={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:i(),sampleRand:n.sampleRand};if(!e)return a;const l=e.spanContext;if(l.traceId===r.trace_id)return e;Date.now()/1e3-e.startTimestamp<=3600&&(Ce.T&&s.Yz.log(`Adding previous_trace \`${JSON.stringify(l)}\` link to span \`${JSON.stringify({op:r.op,...t.spanContext()})}\``),t.addLink({context:l,attributes:{[o.Lc]:"previous_trace"}}),t.setAttribute(Oe,`${l.traceId}-${l.spanId}-${De(l)?1:0}`));return a}(a,e,t),i&&function(e){try{Ie.jf.sessionStorage.setItem(Pe,JSON.stringify(e))}catch(t){Ce.T&&s.Yz.warn("Could not store previous trace in sessionStorage",t)}}(a)});let l=!0;n&&e.on("beforeSampling",e=>{if(!a)return;const t=(0,r.o5)(),n=t.getPropagationContext();l&&n.parentSpanId?l=!1:(t.setPropagationContext({...n,dsc:{...n.dsc,sample_rate:String(a.sampleRate),sampled:String(De(a.spanContext))},sampleRand:a.sampleRand}),e.parentSampled=De(a.spanContext),e.parentSampleRate=a.sampleRate,e.spanAttributes={...e.spanAttributes,[o.Ef]:a.sampleRate})})}function De(e){return 1===e.traceFlags}var Le=n(51564),Ne=n(63944),Fe=n(64251);function ze(e={}){const t=e.client||(0,r.KU)();if(!(0,Fe.Ol)()||!t)return{};const n=(0,S.EU)(),i=(0,x.h)(n);if(i.getTraceData)return i.getTraceData(e);const o=e.scope||(0,r.o5)(),a=e.span||(0,u.Bk)(),l=a?(0,u.Qh)(a):function(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return(0,V.TC)(t,r,n)}(o),c=a?(0,d.k1)(a):(0,d.ao)(t,o),h=(0,Ne.De)(c);if(!V.MI.test(l))return s.Yz.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const p={"sentry-trace":l,baggage:h};return e.propagateTraceparent&&(p.traceparent=a?(0,u.G_)(a):function(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return(0,V.Iy)(t,r,n)}(o)),p}function Ue(e,t,n,i,o){if(!e.fetchData)return;const{method:s,url:l}=e.fetchData,c=(0,a.f)()&&t(l);if(e.endTimestamp&&c){const t=e.fetchData.__span;if(!t)return;const n=i[t];return void(n&&(!function(e,t){if(t.response){(0,w.N8)(e,t.response.status);const n=t.response?.headers?.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:w.TJ,message:"internal_error"});e.end()}(n,e),function(e,t,n){const r="object"===typeof n&&null!==n?n.onRequestSpanEnd:void 0;r?.(e,{headers:t.response?.headers,error:t.error})}(n,e,o),delete i[t]))}const{spanOrigin:h="auto.http.browser",propagateTraceparent:d=!1}="object"===typeof o?o:{spanOrigin:o},p=!!(0,u.Bk)(),m=c&&p?k(function(e,t,n){if(e.startsWith("data:")){return{name:`${t} ${(0,$.zm)(e)}`,attributes:Be(e,void 0,t,n)}}const r=(0,$.kg)(e),i=r?(0,$.CH)(r):e;return{name:`${t} ${i}`,attributes:Be(e,r,t,n)}}(l,s,h)):new f;if(e.fetchData.__span=m.spanContext().spanId,i[m.spanContext().spanId]=m,n(e.fetchData.url)){const t=e.args[0],n={...e.args[1]||{}},r=function(e,t,n,r){const i=ze({span:n,propagateTraceparent:r}),o=i["sentry-trace"],s=i.baggage,a=i.traceparent;if(!o)return;const l=t.headers||((0,E.ks)(e)?e.headers:void 0);if(l){if(function(e){return"undefined"!==typeof Headers&&(0,E.tH)(e,Headers)}(l)){const e=new Headers(l);if(e.get("sentry-trace")||e.set("sentry-trace",o),r&&a&&!e.get("traceparent")&&e.set("traceparent",a),s){const t=e.get("baggage");t?je(t)||e.set("baggage",`${t},${s}`):e.set("baggage",s)}return e}if(Array.isArray(l)){const e=[...l];l.find(e=>"sentry-trace"===e[0])||e.push(["sentry-trace",o]),r&&a&&!l.find(e=>"traceparent"===e[0])&&e.push(["traceparent",a]);const t=l.find(e=>"baggage"===e[0]&&je(e[1]));return s&&!t&&e.push(["baggage",s]),e}{const e="sentry-trace"in l?l["sentry-trace"]:void 0,t="traceparent"in l?l.traceparent:void 0,n="baggage"in l?l.baggage:void 0,i=n?Array.isArray(n)?[...n]:[n]:[],c=n&&(Array.isArray(n)?n.find(e=>je(e)):je(n));s&&!c&&i.push(s);const u={...l,"sentry-trace":e??o,baggage:i.length>0?i.join(","):void 0};return r&&a&&!t&&(u.traceparent=a),u}}return{...i}}(t,n,(0,a.f)()&&p?m:void 0,d);r&&(e.args[1]=n,n.headers=r)}const g=(0,r.KU)();if(g){const t={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};g.emit("beforeOutgoingRequestSpan",m,t)}return m}function je(e){return e.split(",").some(e=>e.trim().startsWith(Ne.sv))}function Be(e,t,n,r){const i={url:(0,$.zm)(e),type:"fetch","http.method":n,[o.JD]:r,[o.uT]:"http.client"};return t&&((0,$.nt)(t)||(i["http.url"]=(0,$.zm)(t.href),i["server.address"]=t.host),t.search&&(i["http.query"]=t.search),t.hash&&(i["http.fragment"]=t.hash)),i}var Ve=n(35947),He=n(57500);function $e(e){try{return new URL(e,Ie.jf.location.origin).href}catch{return}}function Ye(e){try{return new Headers(e)}catch{return}}const Ge=new WeakMap,qe=new Map,We={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Ke(e,t){const{traceFetch:n,traceXHR:i,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:l,enableHTTPTimings:c,tracePropagationTargets:h,onRequestSpanStart:d,onRequestSpanEnd:p}={...We,...t},m="function"===typeof l?l:e=>!0,g=e=>function(e,t){const n=(0,H.$N)();if(n){let r,i;try{r=new URL(e,n),i=new URL(n).origin}catch{return!1}const o=r.origin===i;return t?(0,G.Xr)(r.toString(),t)||o&&(0,G.Xr)(r.pathname,t):o}{const n=!!e.match(/^\/(?!\/)/);return t?(0,G.Xr)(e,t):n}}(e,h),y={},v=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(e=>("transaction"===e.type&&e.spans&&e.spans.forEach(e=>{if("http.client"===e.op){const t=qe.get(e.span_id);t&&(e.timestamp=t/1e3,qe.delete(e.span_id))}}),e)),s&&(0,Le.B$)(e=>{if(e.response){const t=Ge.get(e.response);t&&e.endTimestamp&&qe.set(t,e.endTimestamp)}}),(0,Le.ur)(e=>{const t=Ue(e,m,g,y,{propagateTraceparent:v,onRequestSpanEnd:p});if(e.response&&e.fetchData.__span&&Ge.set(e.response,e.fetchData.__span),t){const n=$e(e.fetchData.url),r=n?(0,$.Dl)(n).host:void 0;t.setAttributes({"http.url":n?(0,$.zm)(n):void 0,"server.address":r}),c&&Ze(t),d?.(t,{headers:e.headers})}})),i&&(0,Ve.Mn)(e=>{const t=function(e,t,n,i,s,l){const c=e.xhr,h=c?.[Ve.Er];if(!c||c.__sentry_own_request__||!h)return;const{url:d,method:p}=h,m=(0,a.f)()&&t(d);if(e.endTimestamp&&m){const t=c.__sentry_xhr_span_id__;if(!t)return;const n=i[t];return void(n&&void 0!==h.status_code&&((0,w.N8)(n,h.status_code),n.end(),l?.(n,{headers:Ye((0,He.ti)(c)),error:e.error}),delete i[t]))}const g=$e(d),y=g?(0,$.Dl)(g):(0,$.Dl)(d),v=(0,$.zm)((0,$.f)(d)),_=!!(0,u.Bk)(),b=m&&_?k({name:`${p} ${v}`,attributes:{url:(0,$.zm)(d),type:"xhr","http.method":p,"http.url":g?(0,$.zm)(g):void 0,"server.address":y?.host,[o.JD]:"auto.http.browser",[o.uT]:"http.client",...y?.search&&{"http.query":y?.search},...y?.hash&&{"http.fragment":y?.hash}}}):new f;c.__sentry_xhr_span_id__=b.spanContext().spanId,i[c.__sentry_xhr_span_id__]=b,n(d)&&function(e,t,n){const{"sentry-trace":r,baggage:i,traceparent:o}=ze({span:t,propagateTraceparent:n});r&&function(e,t,n,r){const i=e.__sentry_xhr_v3__?.request_headers;if(i?.["sentry-trace"]||!e.setRequestHeader)return;try{if(e.setRequestHeader("sentry-trace",t),r&&!i?.traceparent&&e.setRequestHeader("traceparent",r),n){const t=i?.baggage;t&&t.split(",").some(e=>e.trim().startsWith("sentry-"))||e.setRequestHeader("baggage",n)}}catch{}}(e,r,i,o)}(c,(0,a.f)()&&_?b:void 0,s);const x=(0,r.KU)();x&&x.emit("beforeOutgoingRequestSpan",b,e);return b}(e,m,g,y,v,p);t&&(c&&Ze(t),d?.(t,{headers:Ye(e.xhr.__sentry_xhr_v3__?.request_headers)}))})}function Ze(e){const{url:t}=(0,u.et)(e).data;if(!t||"string"!==typeof t)return;const n=(0,K.wv)("resource",({entries:r})=>{r.forEach(r=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"===typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(r)&&r.name.endsWith(t)&&(e.setAttributes(ae(r)),setTimeout(n))})})}const Je={...N,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...We},Xe=(e={})=>{const t={name:void 0,source:void 0},n=Ie.jf.document,{enableInp:l,enableElementTiming:c,enableLongTask:f,enableLongAnimationFrame:m,_experiments:{enableInteractions:g,enableStandaloneClsSpans:y,enableStandaloneLcpSpans:v},beforeStartSpan:_,idleTimeout:b,finalTimeout:x,childSpanTimeout:S,markBackgroundSpan:E,traceFetch:T,traceXHR:M,trackFetchStreamPerformance:A,shouldCreateSpanForRequest:C,enableHTTPTimings:I,ignoreResourceSpans:P,ignorePerformanceApiSpans:O,instrumentPageLoad:R,instrumentNavigation:D,detectRedirects:L,linkPreviousTrace:N,consistentTraceSampling:Y,enableReportPageLoaded:G,onRequestSpanStart:q,onRequestSpanEnd:W}={...Je,...e};let Z,J,Q;function ne(e,i,s=!0){const a="pageload"===i.op,l=i.name,c=_?_(i):i,p=c.attributes||{};if(l!==c.name&&(p[o.i_]="custom",c.attributes=p),!s){const e=(0,h.lu)();return void k({...c,startTime:e}).end(e)}t.name=c.name,t.source=p[o.i_];const f=F(c,{idleTimeout:b,finalTimeout:x,childSpanTimeout:S,disableAutoFinish:a,beforeSpanEnd:t=>{Z?.(),ye(t,{recordClsOnPageloadSpan:!y,recordLcpOnPageloadSpan:!v,ignoreResourceSpans:P,ignorePerformanceApiSpans:O}),nt(e,void 0);const n=(0,r.o5)(),i=n.getPropagationContext();n.setPropagationContext({...i,traceId:f.spanContext().traceId,sampled:(0,u.pK)(f),dsc:(0,d.k1)(t)}),a&&(Q=void 0)},trimIdleSpanEndTimestamp:!G});function m(){n&&["interactive","complete"].includes(n.readyState)&&e.emit("idleSpanEnableAutoFinish",f)}a&&G&&(Q=f),nt(e,f),a&&!G&&n&&(n.addEventListener("readystatechange",()=>{m()}),m())}return{name:"BrowserTracing",setup(e){if(function(){function e(){const e=(0,u.Bk)(),t=e&&(0,u.zU)(e);if(t){const e="internal_error";i.T&&s.Yz.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:w.TJ,message:e})}}j||(e.tag="sentry_tracingErrorCallback",j=!0,(0,z.L)(e),(0,U.r)(e))}(),Z=ge({recordClsStandaloneSpans:y||!1,recordLcpStandaloneSpans:v||!1,client:e}),l&&Se(),c&&ee()&&(0,h.k3)()&&(0,K.wv)("element",Ae),m&&B.O.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver(e=>{const t=(0,u.Bk)();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=te((0,h.k3)()+n.startTime),{start_timestamp:r,op:i}=(0,u.et)(t);if("navigation"===i&&r&&e<r)continue;const s=te(n.duration),a={[o.JD]:"auto.ui.browser.metrics"},l=n.scripts[0],{invoker:c,invokerType:d,sourceURL:p,sourceFunctionName:f,sourceCharPosition:m}=l;a["browser.script.invoker"]=c,a["browser.script.invoker_type"]=d,p&&(a["code.filepath"]=p),f&&(a["code.function"]=f),-1!==m&&(a["browser.script.source_char_position"]=m),X(t,e,e+s,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:a})}}).observe({type:"long-animation-frame",buffered:!0}):f&&(0,K.wv)("longtask",({entries:e})=>{const t=(0,u.Bk)();if(!t)return;const{op:n,start_timestamp:r}=(0,u.et)(t);for(const i of e){const e=te((0,h.k3)()+i.startTime),s=te(i.duration);"navigation"===n&&r&&e<r||X(t,e,e+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[o.JD]:"auto.ui.browser.metrics"}})}}),g&&(0,K.wv)("event",({entries:e})=>{const t=(0,u.Bk)();if(t)for(const n of e)if("click"===n.name){const e=te((0,h.k3)()+n.startTime),r=te(n.duration),i={name:(0,H.Hd)(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[o.JD]:"auto.ui.browser.metrics"}},s=(0,H.xE)(n.target);s&&(i.attributes["ui.component_name"]=s),X(t,e,e+r,i)}}),L&&n){const e=()=>{J=(0,h.zf)()};addEventListener("click",e,{capture:!0}),addEventListener("keydown",e,{capture:!0,passive:!0})}function t(){const t=tt(e);t&&!(0,u.et)(t).timestamp&&(Ce.T&&s.Yz.log(`[Tracing] Finishing current active span with op: ${(0,u.et)(t).op}`),t.setAttribute(o.fs,"cancelled"),t.end())}e.on("startNavigationSpan",(n,i)=>{if((0,r.KU)()!==e)return;if(i?.isRedirect)return Ce.T&&s.Yz.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),void ne(e,{op:"navigation.redirect",...n},!1);J=void 0,t(),(0,r.rm)().setPropagationContext({traceId:(0,p.e)(),sampleRand:Math.random(),propagationSpanId:(0,a.f)()?void 0:(0,p.Z)()});const o=(0,r.o5)();o.setPropagationContext({traceId:(0,p.e)(),sampleRand:Math.random(),propagationSpanId:(0,a.f)()?void 0:(0,p.Z)()}),o.setSDKProcessingMetadata({normalizedRequest:void 0}),ne(e,{op:"navigation",...n,parentSpan:null,forceTransaction:!0})}),e.on("startPageLoadSpan",(n,i={})=>{if((0,r.KU)()!==e)return;t();const o=i.sentryTrace||Qe("sentry-trace"),s=i.baggage||Qe("baggage"),l=(0,V.kM)(o,s),c=(0,r.o5)();c.setPropagationContext(l),(0,a.f)()||(c.getPropagationContext().propagationSpanId=(0,p.Z)()),c.setSDKProcessingMetadata({normalizedRequest:(0,Ie.AP)()}),ne(e,{op:"pageload",...n})}),e.on("endPageloadSpan",()=>{G&&Q&&(Q.setAttribute(o.fs,"reportPageLoaded"),Q.end())})},afterAllSetup(e){let n=(0,H.$N)();if("off"!==N&&Re(e,{linkPreviousTrace:N,consistentTraceSampling:Y}),Ie.jf.location){if(R){const t=(0,h.k3)();!function(e,t,n){e.emit("startPageLoadSpan",t,n),(0,r.o5)().setTransactionName(t.name);const i=tt(e);i&&e.emit("afterStartPageLoadSpan",i)}(e,{name:Ie.jf.location.pathname,startTime:t?t/1e3:void 0,attributes:{[o.i_]:"url",[o.JD]:"auto.pageload.browser"}})}D&&(0,ke._)(({to:t,from:i})=>{if(void 0===i&&-1!==n?.indexOf(t))return void(n=void 0);n=void 0;const s=(0,$.kg)(t),a=tt(e),l=a&&L&&function(e,t){const n=(0,u.et)(e),r=(0,h.lu)(),i=n.start_timestamp;if(r-i>rt)return!1;if(t&&r-t<=rt)return!1;return!0}(a,J);!function(e,t,n){const{url:i,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});const s=(0,r.o5)();s.setTransactionName(t.name),i&&!o&&s.setSDKProcessingMetadata({normalizedRequest:{...(0,Ie.AP)(),url:i}});tt(e)}(e,{name:s?.pathname||Ie.jf.location.pathname,attributes:{[o.i_]:"url",[o.JD]:"auto.navigation.browser"}},{url:t,isRedirect:l})})}E&&(Ie.jf.document?Ie.jf.document.addEventListener("visibilitychange",()=>{const e=(0,u.Bk)();if(!e)return;const t=(0,u.zU)(e);if(Ie.jf.document.hidden&&t){const e="cancelled",{op:n,status:r}=(0,u.et)(t);Ce.T&&s.Yz.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus({code:w.TJ,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):Ce.T&&s.Yz.warn("[Tracing] Could not set up background tab detection due to lack of global document")),g&&function(e,t,n,r,i){const a=Ie.jf.document;let l;const c=()=>{const a="ui.action.click",c=tt(e);if(c){const e=(0,u.et)(c).op;if(["navigation","pageload"].includes(e))return void(Ce.T&&s.Yz.warn(`[Tracing] Did not create ${a} span because a pageload or navigation span is in progress.`))}l&&(l.setAttribute(o.fs,"interactionInterrupted"),l.end(),l=void 0),i.name?l=F({name:i.name,op:a,attributes:{[o.i_]:i.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r}):Ce.T&&s.Yz.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`)};a&&addEventListener("click",c,{capture:!0})}(e,b,x,S,t),l&&Me(),Ke(e,{traceFetch:T,traceXHR:M,trackFetchStreamPerformance:A,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:C,enableHTTPTimings:I,onRequestSpanStart:q,onRequestSpanEnd:W})}}};function Qe(e){const t=Ie.jf.document,n=t?.querySelector(`meta[name=${e}]`);return n?.getAttribute("content")||void 0}const et="_sentry_idleSpan";function tt(e){return e[et]}function nt(e,t){(0,Y.my)(e,et,t)}const rt=1.5},93177(e,t,n){"use strict";n.d(t,{k3:()=>c,lu:()=>o,zf:()=>a});var r=n(9123),i=n(18845);function o(){return(0,r.Wk)()/1e3}let s;function a(){return(s??(s=function(){const{performance:e}=i.O;if(!e?.now||!e.timeOrigin)return o;const t=e.timeOrigin;return()=>(t+(0,r.Qw)(()=>e.now()))/1e3}()))()}let l=null;function c(){return null===l&&(l=function(){const{performance:e}=i.O;if(!e?.now)return;const t=3e5,n=(0,r.Qw)(()=>e.now()),o=(0,r.Wk)(),s=e.timeOrigin;if("number"===typeof s&&Math.abs(s+n-o)<t)return s;const a=e.timing?.navigationStart;if("number"===typeof a&&Math.abs(a+n-o)<t)return a;return o-n}()),l}},93445(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(836);const i={textTransform:"uppercase"},o='"Roboto", "Helvetica", "Arial", sans-serif';function s(e,t){const{fontFamily:n=o,fontSize:s=14,fontWeightLight:a=300,fontWeightRegular:l=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:h=16,allVariants:d,pxToRem:p,...f}="function"===typeof t?t(e):t;const m=s/14,g=p||(e=>e/h*m+"rem"),y=(e,t,r,i,s)=>{return{fontFamily:n,fontWeight:e,fontSize:g(t),lineHeight:r,...n===o?{letterSpacing:(a=i/t,Math.round(1e5*a)/1e5)+"em"}:{},...s,...d};var a},v={h1:y(a,96,1.167,-1.5),h2:y(a,60,1.2,-.5),h3:y(l,48,1.167,0),h4:y(l,34,1.235,.25),h5:y(l,24,1.334,0),h6:y(c,20,1.6,.15),subtitle1:y(l,16,1.75,.15),subtitle2:y(c,14,1.57,.1),body1:y(l,16,1.5,.15),body2:y(l,14,1.43,.15),button:y(c,14,1.75,.4,i),caption:y(l,12,1.66,.4),overline:y(l,12,2.66,1,i),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,r.A)({htmlFontSize:h,pxToRem:g,fontFamily:n,fontSize:s,fontWeightLight:a,fontWeightRegular:l,fontWeightMedium:c,fontWeightBold:u,...v},f,{clone:!1})}},93628(e,t,n){"use strict";var r=n(48648),i=n(71064),o=n(7176);e.exports=r?function(e){return r(e)}:i?function(e){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new TypeError("getProto: not an object");return i(e)}:o?function(e){return o(e)}:null},93781(e,t,n){"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>v,Ms:()=>_});var r=n(7196),i=n(39612),o=n(49900);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}(e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map(e=>r+e):[r+i]}),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function p(e,t,n,r){const o=(0,i.Yn)(e,t,!0)??n;return"number"===typeof o||"string"===typeof o?e=>"string"===typeof e?e:"string"===typeof o?o.startsWith("var(")&&0===e?0:o.startsWith("var(")&&1===e?o:`calc(${e} * ${o})`:o*e:Array.isArray(o)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=o[t];return e>=0?n:"number"===typeof n?-n:"string"===typeof n&&n.startsWith("var(")?`calc(-1 * ${n})`:`-${n}`}:"function"===typeof o?o:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){return"string"===typeof t||null==t?t:e(t)}function g(e,t,n,i){if(!t.includes(n))return null;const o=function(e,t){return n=>e.reduce((e,r)=>(e[r]=m(t,n),e),{})}(c(n),i),s=e[n];return(0,r.NI)(e,s,o)}function y(e,t){const n=f(e.theme);return Object.keys(e).map(r=>g(e,t,r,n)).reduce(o.A,{})}function v(e){return y(e,u)}function _(e){return y(e,h)}function b(e){return y(e,d)}v.propTypes={},v.filterProps=u,_.propTypes={},_.filterProps=h,b.propTypes={},b.filterProps=d},93908(e,t,n){"use strict";n.d(t,{Iy:()=>u,MI:()=>a,TC:()=>c,kM:()=>l});var r=n(63944),i=n(91773),o=n(74733),s=n(9123);const a=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function l(e,t){const n=function(e){if(!e)return;const t=e.match(a);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),l=(0,r.yD)(t);if(!n?.traceId)return{traceId:(0,o.e)(),sampleRand:(0,s.hY)()};const c=function(e,t){const n=(0,i.i)(t?.sample_rand);if(void 0!==n)return n;const r=(0,i.i)(t?.sample_rate);return r&&void 0!==e?.parentSampled?e.parentSampled?(0,s.hY)()*r:r+(0,s.hY)()*(1-r):(0,s.hY)()}(n,l);l&&(l.sample_rand=c.toString());const{traceId:u,parentSpanId:h,parentSampled:d}=n;return{traceId:u,parentSpanId:h,sampled:d,dsc:l||{},sampleRand:c}}function c(e=(0,o.e)(),t=(0,o.Z)(),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function u(e=(0,o.e)(),t=(0,o.Z)(),n){return`00-${e}-${t}-${n?"01":"00"}`}},94255(e,t,n){"use strict";n.d(t,{II:()=>u,v_:()=>a,wm:()=>c});var r=n(62517),i=n(43626),o=n(12295);function s(e){return Math.min(1e3*2**e,3e4)}function a(e){return"online"!==(null!=e?e:"online")||i.t.isOnline()}class l{constructor(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}}function c(e){return e instanceof l}function u(e){let t,n,c,u=!1,h=0,d=!1;const p=new Promise((e,t)=>{n=e,c=t}),f=()=>!r.m.isFocused()||"always"!==e.networkMode&&!i.t.isOnline(),m=r=>{d||(d=!0,null==e.onSuccess||e.onSuccess(r),null==t||t(),n(r))},g=n=>{d||(d=!0,null==e.onError||e.onError(n),null==t||t(),c(n))},y=()=>new Promise(n=>{t=e=>{const t=d||!f();return t&&n(e),t},null==e.onPause||e.onPause()}).then(()=>{t=void 0,d||null==e.onContinue||e.onContinue()}),v=()=>{if(d)return;let t;try{t=e.fn()}catch(n){t=Promise.reject(n)}Promise.resolve(t).then(m).catch(t=>{var n,r;if(d)return;const i=null!=(n=e.retry)?n:3,a=null!=(r=e.retryDelay)?r:s,l="function"===typeof a?a(h,t):a,c=!0===i||"number"===typeof i&&h<i||"function"===typeof i&&i(h,t);!u&&c?(h++,null==e.onFail||e.onFail(h,t),(0,o.yy)(l).then(()=>{if(f())return y()}).then(()=>{u?g(t):v()})):g(t)})};return a(e.networkMode)?v():y().then(v),{promise:p,cancel:t=>{d||(g(new l(t)),null==e.abort||e.abort())},continue:()=>(null==t?void 0:t())?p:Promise.resolve(),cancelRetry:()=>{u=!0},continueRetry:()=>{u=!1}}}},94323(e,t,n){"use strict";n.d(t,{Q:()=>r});class r{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},94459(e){"use strict";e.exports=Number.isNaN||function(e){return e!==e}},94837(e,t,n){"use strict";n.d(t,{S8:()=>s,cd:()=>a});var r=n(64208),i=n(46403),o=n(51685);function s(e,t=100,n=1/0){try{return l("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function a(e,t=3,n=102400){const r=s(e,t);return i=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>n?a(e,t-1,n):r;var i}function l(e,t,s=1/0,a=1/0,c=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function n(t){e.delete(t)}return[t,n]}()){const[u,h]=c;if(null==t||["boolean","string"].includes(typeof t)||"number"===typeof t&&Number.isFinite(t))return t;const d=function(e,t){try{if("domain"===e&&t&&"object"===typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!==typeof n.g&&t===n.g)return"[Global]";if("undefined"!==typeof window&&t===window)return"[Window]";if("undefined"!==typeof document&&t===document)return"[Document]";if((0,r.L2)(t))return(0,o.nY)(t);if((0,r.mE)(t))return"[SyntheticEvent]";if("number"===typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"===typeof t)return`[Function: ${(0,o.qQ)(t)}]`;if("symbol"===typeof t)return`[${String(t)}]`;if("bigint"===typeof t)return`[BigInt: ${String(t)}]`;const i=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(i)?`[HTMLElement: ${i}]`:`[object ${i}]`}catch(i){return`**non-serializable** (${i})`}}(e,t);if(!d.startsWith("[object "))return d;if(t.__sentry_skip_normalization__)return t;const p="number"===typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:s;if(0===p)return d.replace("object ","");if(u(t))return"[Circular ~]";const f=t;if(f&&"function"===typeof f.toJSON)try{return l("",f.toJSON(),p-1,a,c)}catch{}const m=Array.isArray(t)?[]:{};let g=0;const y=(0,i.W4)(t);for(const n in y){if(!Object.prototype.hasOwnProperty.call(y,n))continue;if(g>=a){m[n]="[MaxProperties ~]";break}const e=y[n];m[n]=l(n,e,p-1,a,c),g++}return h(t),m}},94988(e,t,n){"use strict";n.d(t,{H:()=>f});var r=n(26674),i=n(59328),o=n(19282),s=n(64208),a=n(45734),l=n(9600),c=n(74733),u=n(9123),h=n(70333),d=n(70125),p=n(93177);class f{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:(0,c.e)(),sampleRand:(0,u.hY)()}}clone(){const e=new f;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,(0,h.r)(e,(0,h.f)(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&(0,i.qO)(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this.setTags({[e]:t})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,t){return this.setAttributes({[e]:t})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"===typeof e?e(this):e,n=t instanceof f?t.getScopeData():(0,s.Qd)(t)?e:void 0,{tags:r,attributes:i,extra:o,user:a,contexts:l,level:c,fingerprint:u=[],propagationContext:h}=n||{};return this._tags={...this._tags,...r},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),h&&(this._propagationContext=h),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,(0,h.r)(this,void 0),this._attachments=[],this.setPropagationContext({traceId:(0,c.e)(),sampleRand:(0,u.hY)()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"===typeof t?t:100;if(n<=0)return this;const r={timestamp:(0,p.lu)(),...e,message:e.message?(0,d.xv)(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:(0,h.f)(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=(0,a.h)(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||(0,l.eJ)();if(!this._client)return r.T&&o.Yz.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:n},this),n}captureMessage(e,t,n){const i=n?.event_id||(0,l.eJ)();if(!this._client)return r.T&&o.Yz.warn("No client configured on scope - will not capture message!"),i;const s=n?.syntheticException??new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:i},this),i}captureEvent(e,t){const n=t?.event_id||(0,l.eJ)();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(r.T&&o.Yz.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}},95200(e,t,n){"use strict";n.d(t,{BY:()=>a,EU:()=>o,Se:()=>s});var r=n(43674),i=n(18845);function o(){return s(i.O),i.O}function s(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||r.M,t[r.M]=t[r.M]||{}}function a(e,t,n=i.O){const o=n.__SENTRY__=n.__SENTRY__||{},s=o[r.M]=o[r.M]||{};return s[e]||(s[e]=t())}},95299(e,t,n){"use strict";n.d(t,{Ay:()=>re});var r=n(96540),i=n(34164),o=n(21362),s=n(411),a=n(24902),l=n(69438),c=n(82227),u=n(33044);const h=function(e){const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=e,s=i?{}:(0,u.A)(n,r),{props:h,internalRef:d}=(0,c.A)({...o,externalSlotProps:s}),p=(0,a.A)(d,s?.ref,e.additionalProps?.ref);return(0,l.A)(t,{...h,ref:p},r)};var d=n(33092),p=n(10644);var f=n(3576),m=n(78854);function g(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}const y={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};var v=n(52820),_=n(52658);const b=function(e,t,n=(e,t)=>e===t){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))};function w(e,t,n,r,i){return 1===n?Math.min(e+t,i):Math.max(e-t,r)}function x(e,t){return e-t}function S(e,t){const{index:n}=e.reduce((e,n,r)=>{const i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e},null)??{};return n}function E(e,t){if(void 0!==t.current&&e.changedTouches){const n=e;for(let e=0;e<n.changedTouches.length;e+=1){const r=n.changedTouches[e];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function T(e,t,n){return 100*(e-t)/(n-t)}function M(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){const t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}(t)))}function A({values:e,newValue:t,index:n}){const r=e.slice();return r[n]=t,r.sort(x)}function k({sliderRef:e,activeIndex:t,setActive:n}){const r=(0,p.A)(e.current);e.current?.contains(r.activeElement)&&Number(r?.activeElement?.getAttribute("data-index"))===t||e.current?.querySelector(`[type="range"][data-index="${t}"]`).focus(),n&&n(t)}function C(e,t){return"number"===typeof e&&"number"===typeof t?e===t:"object"===typeof e&&"object"===typeof t&&b(e,t)}const I={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},P=e=>e;let O;function R(){return void 0===O&&(O="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),O}function D(e){const{"aria-labelledby":t,defaultValue:n,disabled:i=!1,disableSwap:o=!1,isRtl:s=!1,marks:l=!1,max:c=100,min:u=0,name:h,onChange:d,onChangeCommitted:b,orientation:O="horizontal",rootRef:D,scale:L=P,step:N=1,shiftStep:F=10,tabIndex:z,value:U}=e,j=r.useRef(void 0),[B,V]=r.useState(-1),[H,$]=r.useState(-1),[Y,G]=r.useState(!1),q=r.useRef(0),W=r.useRef(null),[K,Z]=function(e){const{controlled:t,default:n,name:i,state:o="value"}=e,{current:s}=r.useRef(void 0!==t),[a,l]=r.useState(n);return[s?t:a,r.useCallback(e=>{s||l(e)},[])]}({controlled:U,default:n??u,name:"Slider"}),J=d&&((e,t,n)=>{const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:t,name:h}}),W.current=t,d(i,t,n)}),X=Array.isArray(K);let Q=X?K.slice().sort(x):[K];Q=Q.map(e=>null==e?u:(0,v.A)(e,u,c));const ee=!0===l&&null!==N?[...Array(Math.floor((c-u)/N)+1)].map((e,t)=>({value:u+N*t})):l||[],te=ee.map(e=>e.value),[ne,re]=r.useState(-1),ie=r.useRef(null),oe=(0,a.A)(D,ie),se=e=>t=>{const n=Number(t.currentTarget.getAttribute("data-index"));g(t.target)&&re(n),$(n),e?.onFocus?.(t)},ae=e=>t=>{g(t.target)||re(-1),$(-1),e?.onBlur?.(t)},le=(e,t)=>{const n=Number(e.currentTarget.getAttribute("data-index")),r=Q[n],i=te.indexOf(r);let s=t;if(ee&&null==N){const e=te[te.length-1];s=s>=e?e:s<=te[0]?te[0]:s<r?te[i-1]:te[i+1]}if(s=(0,v.A)(s,u,c),X){o&&(s=(0,v.A)(s,Q[n-1]||-1/0,Q[n+1]||1/0));const e=s;s=A({values:Q,newValue:s,index:n});let t=n;o||(t=s.indexOf(e)),k({sliderRef:ie,activeIndex:t})}Z(s),re(n),J&&!C(s,K)&&J(e,s,n),b&&b(e,W.current??s)},ce=e=>t=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(t.key)){t.preventDefault();const e=Number(t.currentTarget.getAttribute("data-index")),n=Q[e];let r=null;if(null!=N){const e=t.shiftKey?F:N;switch(t.key){case"ArrowUp":r=w(n,e,1,u,c);break;case"ArrowRight":r=w(n,e,s?-1:1,u,c);break;case"ArrowDown":r=w(n,e,-1,u,c);break;case"ArrowLeft":r=w(n,e,s?1:-1,u,c);break;case"PageUp":r=w(n,F,1,u,c);break;case"PageDown":r=w(n,F,-1,u,c);break;case"Home":r=u;break;case"End":r=c}}else if(ee){const e=te[te.length-1],i=te.indexOf(n),o=[s?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];[s?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"].includes(t.key)?r=0===i?te[0]:te[i-1]:o.includes(t.key)&&(r=i===te.length-1?e:te[i+1])}null!=r&&le(t,r)}e?.onKeyDown?.(t)};(0,f.A)(()=>{i&&ie.current.contains(document.activeElement)&&document.activeElement?.blur()},[i]),i&&-1!==B&&V(-1),i&&-1!==ne&&re(-1);const ue=r.useRef(void 0);let he=O;s&&"horizontal"===O&&(he+="-reverse");const de=({finger:e,move:t=!1})=>{const{current:n}=ie,{width:r,height:i,bottom:s,left:a}=n.getBoundingClientRect();let l,h;if(l=he.startsWith("vertical")?(s-e.y)/i:(e.x-a)/r,he.includes("-reverse")&&(l=1-l),h=function(e,t,n){return(n-t)*e+t}(l,u,c),N)h=M(h,N,u);else{const e=S(te,h);h=te[e]}h=(0,v.A)(h,u,c);let d=0;if(X){d=t?ue.current:S(Q,h),o&&(h=(0,v.A)(h,Q[d-1]||-1/0,Q[d+1]||1/0));const e=h;h=A({values:Q,newValue:h,index:d}),o&&t||(d=h.indexOf(e),ue.current=d)}return{newValue:h,activeIndex:d}},pe=(0,m.A)(e=>{const t=E(e,j);if(!t)return;if(q.current+=1,"mousemove"===e.type&&0===e.buttons)return void fe(e);const{newValue:n,activeIndex:r}=de({finger:t,move:!0});k({sliderRef:ie,activeIndex:r,setActive:V}),Z(n),!Y&&q.current>2&&G(!0),J&&!C(n,K)&&J(e,n,r)}),fe=(0,m.A)(e=>{const t=E(e,j);if(G(!1),!t)return;const{newValue:n}=de({finger:t,move:!0});V(-1),"touchend"===e.type&&$(-1),b&&b(e,W.current??n),j.current=void 0,ge()}),me=(0,m.A)(e=>{if(i)return;R()||e.preventDefault();const t=e.changedTouches[0];null!=t&&(j.current=t.identifier);const n=E(e,j);if(!1!==n){const{newValue:t,activeIndex:r}=de({finger:n});k({sliderRef:ie,activeIndex:r,setActive:V}),Z(t),J&&!C(t,K)&&J(e,t,r)}q.current=0;const r=(0,p.A)(ie.current);r.addEventListener("touchmove",pe,{passive:!0}),r.addEventListener("touchend",fe,{passive:!0})}),ge=r.useCallback(()=>{const e=(0,p.A)(ie.current);e.removeEventListener("mousemove",pe),e.removeEventListener("mouseup",fe),e.removeEventListener("touchmove",pe),e.removeEventListener("touchend",fe)},[fe,pe]);r.useEffect(()=>{const{current:e}=ie;return e.addEventListener("touchstart",me,{passive:R()}),()=>{e.removeEventListener("touchstart",me),ge()}},[ge,me]),r.useEffect(()=>{i&&ge()},[i,ge]);const ye=T(X?Q[0]:u,u,c),ve=T(Q[Q.length-1],u,c)-ye,_e=e=>t=>{e.onMouseLeave?.(t),$(-1)};let be;"vertical"===O&&(be=s?"vertical-rl":"vertical-lr");return{active:B,axis:he,axisProps:I,dragging:Y,focusedThumbIndex:ne,getHiddenInputProps:(n={})=>{const r=(0,_.A)(n),o={onChange:(a=r||{},e=>{a.onChange?.(e),le(e,e.target.valueAsNumber)}),onFocus:se(r||{}),onBlur:ae(r||{}),onKeyDown:ce(r||{})};var a;const l={...r,...o};return{tabIndex:z,"aria-labelledby":t,"aria-orientation":O,"aria-valuemax":L(c),"aria-valuemin":L(u),name:h,type:"range",min:e.min,max:e.max,step:null===e.step&&e.marks?"any":e.step??void 0,disabled:i,...n,...l,style:{...y,direction:s?"rtl":"ltr",width:"100%",height:"100%",writingMode:be}}},getRootProps:(e={})=>{const t=(0,_.A)(e),n={onMouseDown:(r=t||{},e=>{if(r.onMouseDown?.(e),i)return;if(e.defaultPrevented)return;if(0!==e.button)return;e.preventDefault();const t=E(e,j);if(!1!==t){const{newValue:n,activeIndex:r}=de({finger:t});k({sliderRef:ie,activeIndex:r,setActive:V}),Z(n),J&&!C(n,K)&&J(e,n,r)}q.current=0;const n=(0,p.A)(ie.current);n.addEventListener("mousemove",pe,{passive:!0}),n.addEventListener("mouseup",fe)})};var r;const o={...t,...n};return{...e,ref:oe,...o}},getThumbProps:(e={})=>{const t=(0,_.A)(e),n={onMouseOver:(r=t||{},e=>{r.onMouseOver?.(e);const t=Number(e.currentTarget.getAttribute("data-index"));$(t)}),onMouseLeave:_e(t||{})};var r;return{...e,...t,...n}},marks:ee,open:H,range:X,rootRef:oe,trackLeap:ve,trackOffset:ye,values:Q,getThumbStyle:e=>({pointerEvents:-1!==B&&B!==e?"none":void 0})}}var L=n(67695),N=n(39241),F=n(13202),z=n(23);const U=e=>!e||!(0,d.A)(e);var j=n(39407),B=n(1321),V=n(96148),H=n(32520);function $(e){return(0,H.Ay)("MuiSlider",e)}const Y=(0,V.A)("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);var G=n(74848);function q(e){return e}const W=(0,L.Ay)("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,j.A)(n.color)}`],"medium"!==n.size&&t[`size${(0,j.A)(n.size)}`],n.marked&&t.marked,"vertical"===n.orientation&&t.vertical,"inverted"===n.track&&t.trackInverted,!1===n.track&&t.trackFalse]}})((0,N.A)(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Y.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Y.dragging}`]:{[`& .${Y.thumb}, & .${Y.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter((0,B.A)()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),K=(0,L.Ay)("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Z=(0,L.Ay)("span",{name:"MuiSlider",slot:"Track"})((0,N.A)(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter((0,B.A)()).map(([t])=>({props:{color:t,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${t}Track`],borderColor:e.vars.palette.Slider[`${t}Track`]}:{backgroundColor:e.lighten(e.palette[t].main,.62),borderColor:e.lighten(e.palette[t].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[t].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[t].main,.5)})}}}))]}))),J=(0,L.Ay)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${(0,j.A)(n.color)}`],"medium"!==n.size&&t[`thumbSize${(0,j.A)(n.size)}`]]}})((0,N.A)(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Y.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter((0,B.A)()).map(([t])=>({props:{color:t},style:{[`&:hover, &.${Y.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[t].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Y.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[t].main,.16)}`}}}))]}))),X=(0,L.Ay)(function(e){const{children:t,className:n,value:o}=e,s=(e=>{const{open:t}=e;return{offset:(0,i.A)(t&&Y.valueLabelOpen),circle:Y.valueLabelCircle,label:Y.valueLabelLabel}})(e);return t?r.cloneElement(t,{className:t.props.className},(0,G.jsxs)(r.Fragment,{children:[t.props.children,(0,G.jsx)("span",{className:(0,i.A)(s.offset,n),"aria-hidden":!0,children:(0,G.jsx)("span",{className:s.circle,children:(0,G.jsx)("span",{className:s.label,children:o})})})]})):null},{name:"MuiSlider",slot:"ValueLabel"})((0,N.A)(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Y.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Y.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Q=(0,L.Ay)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>(0,z.A)(e)&&"markActive"!==e,overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})((0,N.A)(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),ee=(0,L.Ay)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>(0,z.A)(e)&&"markLabelActive"!==e})((0,N.A)(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),te=({children:e})=>e,ne=r.forwardRef(function(e,t){const n=(0,F.b)({props:e,name:"MuiSlider"}),a=(0,s.I)(),{"aria-label":l,"aria-valuetext":c,"aria-labelledby":u,component:p="span",components:f={},componentsProps:m={},color:g="primary",classes:y,className:v,disableSwap:_=!1,disabled:b=!1,getAriaLabel:w,getAriaValueText:x,marks:S=!1,max:E=100,min:M=0,name:A,onChange:k,onChangeCommitted:C,orientation:I="horizontal",shiftStep:P=10,size:O="medium",step:R=1,scale:L=q,slotProps:N,slots:z,tabIndex:B,track:V="normal",value:H,valueLabelDisplay:Y="off",valueLabelFormat:ne=q,...re}=n,ie={...n,isRtl:a,max:E,min:M,classes:y,disabled:b,disableSwap:_,orientation:I,marks:S,color:g,size:O,step:R,shiftStep:P,scale:L,track:V,valueLabelDisplay:Y,valueLabelFormat:ne},{axisProps:oe,getRootProps:se,getHiddenInputProps:ae,getThumbProps:le,open:ce,active:ue,axis:he,focusedThumbIndex:de,range:pe,dragging:fe,marks:me,values:ge,trackOffset:ye,trackLeap:ve,getThumbStyle:_e}=D({...ie,rootRef:t});ie.marked=me.length>0&&me.some(e=>e.label),ie.dragging=fe,ie.focusedThumbIndex=de;const be=(e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:s,classes:a,color:l,size:c}=e,u={root:["root",t&&"disabled",n&&"dragging",r&&"marked","vertical"===i&&"vertical","inverted"===s&&"trackInverted",!1===s&&"trackFalse",l&&`color${(0,j.A)(l)}`,c&&`size${(0,j.A)(c)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",c&&`thumbSize${(0,j.A)(c)}`,l&&`thumbColor${(0,j.A)(l)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,o.A)(u,$,a)})(ie),we=z?.root??f.Root??W,xe=z?.rail??f.Rail??K,Se=z?.track??f.Track??Z,Ee=z?.thumb??f.Thumb??J,Te=z?.valueLabel??f.ValueLabel??X,Me=z?.mark??f.Mark??Q,Ae=z?.markLabel??f.MarkLabel??ee,ke=z?.input??f.Input??"input",Ce=N?.root??m.root,Ie=N?.rail??m.rail,Pe=N?.track??m.track,Oe=N?.thumb??m.thumb,Re=N?.valueLabel??m.valueLabel,De=N?.mark??m.mark,Le=N?.markLabel??m.markLabel,Ne=N?.input??m.input,Fe=h({elementType:we,getSlotProps:se,externalSlotProps:Ce,externalForwardedProps:re,additionalProps:{...U(we)&&{as:p}},ownerState:{...ie,...Ce?.ownerState},className:[be.root,v]}),ze=h({elementType:xe,externalSlotProps:Ie,ownerState:ie,className:be.rail}),Ue=h({elementType:Se,externalSlotProps:Pe,additionalProps:{style:{...oe[he].offset(ye),...oe[he].leap(ve)}},ownerState:{...ie,...Pe?.ownerState},className:be.track}),je=h({elementType:Ee,getSlotProps:le,externalSlotProps:Oe,ownerState:{...ie,...Oe?.ownerState},className:be.thumb}),Be=h({elementType:Te,externalSlotProps:Re,ownerState:{...ie,...Re?.ownerState},className:be.valueLabel}),Ve=h({elementType:Me,externalSlotProps:De,ownerState:ie,className:be.mark}),He=h({elementType:Ae,externalSlotProps:Le,ownerState:ie,className:be.markLabel}),$e=h({elementType:ke,getSlotProps:ae,externalSlotProps:Ne,ownerState:ie});return(0,G.jsxs)(we,{...Fe,children:[(0,G.jsx)(xe,{...ze}),(0,G.jsx)(Se,{...Ue}),me.filter(e=>e.value>=M&&e.value<=E).map((e,t)=>{const n=T(e.value,M,E),o=oe[he].offset(n);let s;return s=!1===V?ge.includes(e.value):"normal"===V&&(pe?e.value>=ge[0]&&e.value<=ge[ge.length-1]:e.value<=ge[0])||"inverted"===V&&(pe?e.value<=ge[0]||e.value>=ge[ge.length-1]:e.value>=ge[0]),(0,G.jsxs)(r.Fragment,{children:[(0,G.jsx)(Me,{"data-index":t,...Ve,...!(0,d.A)(Me)&&{markActive:s},style:{...o,...Ve.style},className:(0,i.A)(Ve.className,s&&be.markActive)}),null!=e.label?(0,G.jsx)(Ae,{"aria-hidden":!0,"data-index":t,...He,...!(0,d.A)(Ae)&&{markLabelActive:s},style:{...o,...He.style},className:(0,i.A)(be.markLabel,He.className,s&&be.markLabelActive),children:e.label}):null]},t)}),ge.map((e,t)=>{const n=T(e,M,E),r=oe[he].offset(n),o="off"===Y?te:Te;return(0,G.jsx)(o,{...!(0,d.A)(o)&&{valueLabelFormat:ne,valueLabelDisplay:Y,value:"function"===typeof ne?ne(L(e),t):ne,index:t,open:ce===t||ue===t||"on"===Y,disabled:b},...Be,children:(0,G.jsx)(Ee,{"data-index":t,...je,className:(0,i.A)(be.thumb,je.className,ue===t&&be.active,de===t&&be.focusVisible),style:{...r,..._e(t),...je.style},children:(0,G.jsx)(ke,{"data-index":t,"aria-label":w?w(t):l,"aria-valuenow":L(e),"aria-labelledby":u,"aria-valuetext":x?x(L(e),t):c,value:ge[t],...$e})})},t)})]})}),re=ne},95548(e,t,n){"use strict";n.d(t,{A:()=>u});var r=n(97102),i=n(49900),o=n(39612),s=n(7196),a=n(63132),l=n(98762);const c=function(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:h,style:d}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,o.Yn)(n,u)||{};if(d)return d(a);return(0,s.NI)(a,t,t=>{let n=(0,o.BO)(p,h,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,h,`${e}${"default"===t?"":(0,r.A)(t)}`,t)),!1===c?n:{[c]:n}})}return function t(n){const{sx:r,theme:o={},nested:c}=n||{};if(!r)return null;const u=o.unstable_sxConfig??l.A;function h(n){let r=n;if("function"===typeof n)r=n(o);else if("object"!==typeof n)return n;if(!r)return null;const l=(0,s.EU)(o.breakpoints),h=Object.keys(l);let d=l;return Object.keys(r).forEach(n=>{const a=(l=r[n],c=o,"function"===typeof l?l(c):l);var l,c;if(null!==a&&void 0!==a)if("object"===typeof a)if(u[n])d=(0,i.A)(d,e(n,a,o,u));else{const e=(0,s.NI)({theme:o},a,e=>({[n]:e}));!function(...e){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]),n=new Set(t);return e.every(e=>n.size===Object.keys(e).length)}(e,a)?d=(0,i.A)(d,e):d[n]=t({sx:a,theme:o,nested:!0})}else d=(0,i.A)(d,e(n,a,o,u))}),!c&&o.modularCssLayers?{"@layer sx":(0,a._S)(o,(0,s.vf)(h,d))}:(0,a._S)(o,(0,s.vf)(h,d))}return Array.isArray(r)?r.map(h):h(r)}}();c.filterProps=["sx"];const u=c},96148(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(32520);function i(e,t,n="Mui"){const i={};return t.forEach(t=>{i[t]=(0,r.Ay)(e,t,n)}),i}},96747(e,t,n){"use strict";n.d(t,{B:()=>o});var r=n(50925);var i=n(18845);function o(){return"undefined"!==typeof window&&(!(!(0,r.Z)()&&"[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0))||function(){const e=i.O.process;return"renderer"===e?.type}())}},97102(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(4076);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},97271(e,t,n){"use strict";n.d(t,{A:()=>i});var r=Object.prototype;const i=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},97502(e,t,n){"use strict";function r(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,r,s,a,l;const c=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,u=null==(r=e.fetchOptions)||null==(s=r.meta)?void 0:s.fetchMore,h=null==u?void 0:u.pageParam,d="forward"===(null==u?void 0:u.direction),p="backward"===(null==u?void 0:u.direction),f=(null==(a=e.state.data)?void 0:a.pages)||[],m=(null==(l=e.state.data)?void 0:l.pageParams)||[];let g=m,y=!1;const v=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),_=(e,t,n,r)=>(g=r?[t,...g]:[...g,t],r?[n,...e]:[...e,n]),b=(t,n,r,i)=>{if(y)return Promise.reject("Cancelled");if("undefined"===typeof r&&!n&&t.length)return Promise.resolve(t);const o={queryKey:e.queryKey,pageParam:r,meta:e.options.meta};var s;s=o,Object.defineProperty(s,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?y=!0:null==(n=e.signal)||n.addEventListener("abort",()=>{y=!0}),e.signal}});const a=v(o);return Promise.resolve(a).then(e=>_(t,r,e,i))};let w;if(f.length)if(d){const t="undefined"!==typeof h,n=t?h:i(e.options,f);w=b(f,t,n)}else if(p){const t="undefined"!==typeof h,n=t?h:o(e.options,f);w=b(f,t,n,!0)}else{g=[];const t="undefined"===typeof e.options.getNextPageParam;w=!c||!f[0]||c(f[0],0,f)?b([],t,m[0]):Promise.resolve(_([],m[0],f[0]));for(let n=1;n<f.length;n++)w=w.then(r=>{if(!c||!f[n]||c(f[n],n,f)){const o=t?m[n]:i(e.options,r);return b(r,t,o)}return Promise.resolve(_(r,m[n],f[n]))})}else w=b([]);return w.then(e=>({pages:e,pageParams:g}))}}}}function i(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function o(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}function s(e,t){if(e.getNextPageParam&&Array.isArray(t)){const n=i(e,t);return"undefined"!==typeof n&&null!==n&&!1!==n}}function a(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const n=o(e,t);return"undefined"!==typeof n&&null!==n&&!1!==n}}n.d(t,{PL:()=>r,RQ:()=>a,rB:()=>s})},97806(e,t,n){"use strict";n.d(t,{b:()=>i});var r=n(4692);const i=()=>{const e=(0,r.z)();return e?.activationStart??0}},98317(e,t,n){"use strict";n.d(t,{U:()=>a});var r=n(96540),i=n(85733);const o=new Map,s=e=>{const t=matchMedia(e),n=new Set,r=()=>{n.forEach(e=>{e(t.matches)})};return t.addEventListener?t.addEventListener("change",r,{passive:!0}):t.addListener(r),{mql:t,dispatchers:n,listener:r}};function a(e,t={}){let{initializeWithValue:n=!0}=t;i.Bd||(n=!1);const[a,l]=(0,r.useState)(()=>{if(n){let t=o.get(e);return t||(t=s(e),o.set(e,t)),t.mql.matches}});return(0,r.useEffect)(()=>(((e,t)=>{let n=o.get(e);n||(n=s(e),o.set(e,n)),n.dispatchers.add(t),t(n.mql.matches)})(e,l),()=>{((e,t)=>{const n=o.get(e);if(n){const{mql:r,dispatchers:i,listener:s}=n;i.delete(t),i.size||(o.delete(e),r.removeEventListener?r.removeEventListener("change",s):r.removeListener(s))}})(e,l)}),[e]),a}},98587(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},98636(e,t,n){"use strict";var r=n(920),i=n(37720),o=n(74765),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,l(t)?t:[t])},h=Date.prototype.toISOString,d=o.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:i.encode,encodeValuesOnly:!1,filter:void 0,format:d,formatter:o.formatters[d],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},f={},m=function e(t,n,o,s,a,c,h,d,m,g,y,v,_,b,w,x,S,E){for(var T,M=t,A=E,k=0,C=!1;void 0!==(A=A.get(f))&&!C;){var I=A.get(t);if(k+=1,"undefined"!==typeof I){if(I===k)throw new RangeError("Cyclic object value");C=!0}"undefined"===typeof A.get(f)&&(k=0)}if("function"===typeof g?M=g(n,M):M instanceof Date?M=_(M):"comma"===o&&l(M)&&(M=i.maybeMap(M,function(e){return e instanceof Date?_(e):e})),null===M){if(c)return m&&!x?m(n,p.encoder,S,"key",b):n;M=""}if("string"===typeof(T=M)||"number"===typeof T||"boolean"===typeof T||"symbol"===typeof T||"bigint"===typeof T||i.isBuffer(M))return m?[w(x?n:m(n,p.encoder,S,"key",b))+"="+w(m(M,p.encoder,S,"value",b))]:[w(n)+"="+w(String(M))];var P,O=[];if("undefined"===typeof M)return O;if("comma"===o&&l(M))x&&m&&(M=i.maybeMap(M,m)),P=[{value:M.length>0?M.join(",")||null:void 0}];else if(l(g))P=g;else{var R=Object.keys(M);P=y?R.sort(y):R}var D=d?String(n).replace(/\./g,"%2E"):String(n),L=s&&l(M)&&1===M.length?D+"[]":D;if(a&&l(M)&&0===M.length)return L+"[]";for(var N=0;N<P.length;++N){var F=P[N],z="object"===typeof F&&F&&"undefined"!==typeof F.value?F.value:M[F];if(!h||null!==z){var U=v&&d?String(F).replace(/\./g,"%2E"):String(F),j=l(M)?"function"===typeof o?o(L,U):L:L+(v?"."+U:"["+U+"]");E.set(t,k);var B=r();B.set(f,E),u(O,e(z,j,o,s,a,c,h,d,"comma"===o&&x&&l(M)?null:m,g,y,v,_,b,w,x,S,B))}}return O};e.exports=function(e,t){var n,i=e,c=function(e){if(!e)return p;if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.encodeDotInKeys&&"boolean"!==typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if("undefined"!==typeof e.format){if(!s.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r,i=o.formatters[n],c=p.filter;if(("function"===typeof e.filter||l(e.filter))&&(c=e.filter),r=e.arrayFormat in a?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in e&&"boolean"!==typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u="undefined"===typeof e.allowDots?!0===e.encodeDotInKeys||p.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:r,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:"undefined"===typeof e.delimiter?p.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:p.encode,encodeDotInKeys:"boolean"===typeof e.encodeDotInKeys?e.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"===typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:c,format:n,formatter:i,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"===typeof c.filter?i=(0,c.filter)("",i):l(c.filter)&&(n=c.filter);var h=[];if("object"!==typeof i||null===i)return"";var d=a[c.arrayFormat],f="comma"===d&&c.commaRoundTrip;n||(n=Object.keys(i)),c.sort&&n.sort(c.sort);for(var g=r(),y=0;y<n.length;++y){var v=n[y],_=i[v];c.skipNulls&&null===_||u(h,m(_,v,d,f,c.allowEmptyArrays,c.strictNullHandling,c.skipNulls,c.encodeDotInKeys,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,g))}var b=h.join(c.delimiter),w=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),b.length>0?w+b:""}},98728(e,t,n){"use strict";n.d(t,{A:()=>d});var r=n(53098),i=n(2383),o=n(15647),s=Function.prototype,a=Object.prototype,l=s.toString,c=a.hasOwnProperty,u=l.call(Object);const h=function(e){if(!(0,r.A)(e)||"[object Object]"!=(0,i.A)(e))return!1;var t=(0,o.A)(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u};const d=function(e){return(0,r.A)(e)&&1===e.nodeType&&!h(e)}},98762(e,t,n){"use strict";n.d(t,{A:()=>D});var r=n(93781),i=n(39612),o=n(49900);const s=function(...e){const t=e.reduce((e,t)=>(t.filterProps.forEach(n=>{e[n]=t}),e),{}),n=e=>Object.keys(e).reduce((n,r)=>t[r]?(0,o.A)(n,t[r](e)):n,{});return n.propTypes={},n.filterProps=e.reduce((e,t)=>e.concat(t.filterProps),[]),n};var a=n(7196);function l(e){return"number"!==typeof e?e:`${e}px solid`}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),h=c("borderTop",l),d=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),y=c("borderRightColor"),v=c("borderBottomColor"),_=c("borderLeftColor"),b=c("outline",l),w=c("outlineColor"),x=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};x.propTypes={},x.filterProps=["borderRadius"];s(u,h,d,p,f,m,g,y,v,_,x,b,w);const S=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};S.propTypes={},S.filterProps=["gap"];const E=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};E.propTypes={},E.filterProps=["columnGap"];const T=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};T.propTypes={},T.filterProps=["rowGap"];s(S,E,T,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function M(e,t){return"grey"===t?t:e}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:M}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:M}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:M}));function A(e){return e<=1&&0!==e?100*e+"%":e}const k=(0,i.Ay)({prop:"width",transform:A}),C=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||a.zu[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:A(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};C.filterProps=["maxWidth"];const I=(0,i.Ay)({prop:"minWidth",transform:A}),P=(0,i.Ay)({prop:"height",transform:A}),O=(0,i.Ay)({prop:"maxHeight",transform:A}),R=(0,i.Ay)({prop:"minHeight",transform:A}),D=((0,i.Ay)({prop:"size",cssProperty:"width",transform:A}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:A}),s(k,C,I,P,O,R,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:x},color:{themeKey:"palette",transform:M},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:M},backgroundColor:{themeKey:"palette",transform:M},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S},rowGap:{style:T},columnGap:{style:E},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:A},maxWidth:{style:C},minWidth:{transform:A},height:{transform:A},maxHeight:{transform:A},minHeight:{transform:A},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},98855(e,t,n){"use strict";n.d(t,{A:()=>i});var r=n(23);const i=e=>(0,r.A)(e)&&"classes"!==e},98867(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},99411(e,t,n){"use strict";n.d(t,{r:()=>s});var r=n(18845),i=n(13235);let o=null;function s(e){const t="unhandledrejection";(0,i.s5)(t,e),(0,i.AS)(t,a)}function a(){o=r.O.onunhandledrejection,r.O.onunhandledrejection=function(e){const t=e;return(0,i.aj)("unhandledrejection",t),!o||o.apply(this,arguments)},r.O.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}},99418(e,t,n){"use strict";n.d(t,{A:()=>ae});const{entries:r,setPrototypeOf:i,isFrozen:o,getPrototypeOf:s,getOwnPropertyDescriptor:a}=Object;let{freeze:l,seal:c,create:u}=Object,{apply:h,construct:d}="undefined"!==typeof Reflect&&Reflect;l||(l=function(e){return e}),c||(c=function(e){return e}),h||(h=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.apply(t,r)}),d||(d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const p=k(Array.prototype.forEach),f=k(Array.prototype.lastIndexOf),m=k(Array.prototype.pop),g=k(Array.prototype.push),y=k(Array.prototype.splice),v=k(String.prototype.toLowerCase),_=k(String.prototype.toString),b=k(String.prototype.match),w=k(String.prototype.replace),x=k(String.prototype.indexOf),S=k(String.prototype.trim),E=k(Object.prototype.hasOwnProperty),T=k(RegExp.prototype.test),M=(A=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d(A,t)});var A;function k(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return h(e,t,r)}}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;i&&i(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"===typeof i){const e=n(i);e!==i&&(o(t)||(t[r]=e),i=e)}e[i]=!0}return e}function I(e){for(let t=0;t<e.length;t++){E(e,t)||(e[t]=null)}return e}function P(e){const t=u(null);for(const[n,i]of r(e)){E(e,n)&&(Array.isArray(i)?t[n]=I(i):i&&"object"===typeof i&&i.constructor===Object?t[n]=P(i):t[n]=i)}return t}function O(e,t){for(;null!==e;){const n=a(e,t);if(n){if(n.get)return k(n.get);if("function"===typeof n.value)return k(n.value)}e=s(e)}return function(){return null}}const R=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),z=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),U=l(["#text"]),j=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),B=l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),V=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),H=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y=c(/<%[\w\W]*|[\w\W]*%>/gm),G=c(/\$\{[\w\W]*/gm),q=c(/^data-[\-\w.\u00B7-\uFFFF]+$/),W=c(/^aria-[\-\w]+$/),K=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=c(/^(?:\w+script|data):/i),J=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),X=c(/^html$/i),Q=c(/^[a-z][.\w]*(-[.\w]+)+$/i);var ee=Object.freeze({__proto__:null,ARIA_ATTR:W,ATTR_WHITESPACE:J,CUSTOM_ELEMENT:Q,DATA_ATTR:q,DOCTYPE_NAME:X,ERB_EXPR:Y,IS_ALLOWED_URI:K,IS_SCRIPT_OR_DATA:Z,MUSTACHE_EXPR:$,TMPLIT_EXPR:G});const te=1,ne=3,re=7,ie=8,oe=9,se=function(){return"undefined"===typeof window?null:window};var ae=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();const n=t=>e(t);if(n.version="3.3.1",n.removed=[],!t||!t.document||t.document.nodeType!==oe||!t.Element)return n.isSupported=!1,n;let{document:i}=t;const o=i,s=o.currentScript,{DocumentFragment:a,HTMLTemplateElement:c,Node:h,Element:d,NodeFilter:A,NamedNodeMap:k=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:I,DOMParser:$,trustedTypes:Y}=t,G=d.prototype,q=O(G,"cloneNode"),W=O(G,"remove"),Z=O(G,"nextSibling"),J=O(G,"childNodes"),Q=O(G,"parentNode");if("function"===typeof c){const e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let ae,le="";const{implementation:ce,createNodeIterator:ue,createDocumentFragment:he,getElementsByTagName:de}=i,{importNode:pe}=o;let fe={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"===typeof r&&"function"===typeof Q&&ce&&void 0!==ce.createHTMLDocument;const{MUSTACHE_EXPR:me,ERB_EXPR:ge,TMPLIT_EXPR:ye,DATA_ATTR:ve,ARIA_ATTR:_e,IS_SCRIPT_OR_DATA:be,ATTR_WHITESPACE:we,CUSTOM_ELEMENT:xe}=ee;let{IS_ALLOWED_URI:Se}=ee,Ee=null;const Te=C({},[...R,...D,...L,...F,...U]);let Me=null;const Ae=C({},[...j,...B,...V,...H]);let ke=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,Ie=null;const Pe=Object.seal(u(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Oe=!0,Re=!0,De=!1,Le=!0,Ne=!1,Fe=!0,ze=!1,Ue=!1,je=!1,Be=!1,Ve=!1,He=!1,$e=!0,Ye=!1,Ge=!0,qe=!1,We={},Ke=null;const Ze=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Je=null;const Xe=C({},["audio","video","img","source","image","track"]);let Qe=null;const et=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tt="http://www.w3.org/1998/Math/MathML",nt="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xhtml";let it=rt,ot=!1,st=null;const at=C({},[tt,nt,rt],_);let lt=C({},["mi","mo","mn","ms","mtext"]),ct=C({},["annotation-xml"]);const ut=C({},["title","style","font","a","script"]);let ht=null;const dt=["application/xhtml+xml","text/html"];let pt=null,ft=null;const mt=i.createElement("form"),gt=function(e){return e instanceof RegExp||e instanceof Function},yt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ft||ft!==e){if(e&&"object"===typeof e||(e={}),e=P(e),ht=-1===dt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,pt="application/xhtml+xml"===ht?_:v,Ee=E(e,"ALLOWED_TAGS")?C({},e.ALLOWED_TAGS,pt):Te,Me=E(e,"ALLOWED_ATTR")?C({},e.ALLOWED_ATTR,pt):Ae,st=E(e,"ALLOWED_NAMESPACES")?C({},e.ALLOWED_NAMESPACES,_):at,Qe=E(e,"ADD_URI_SAFE_ATTR")?C(P(et),e.ADD_URI_SAFE_ATTR,pt):et,Je=E(e,"ADD_DATA_URI_TAGS")?C(P(Xe),e.ADD_DATA_URI_TAGS,pt):Xe,Ke=E(e,"FORBID_CONTENTS")?C({},e.FORBID_CONTENTS,pt):Ze,Ce=E(e,"FORBID_TAGS")?C({},e.FORBID_TAGS,pt):P({}),Ie=E(e,"FORBID_ATTR")?C({},e.FORBID_ATTR,pt):P({}),We=!!E(e,"USE_PROFILES")&&e.USE_PROFILES,Oe=!1!==e.ALLOW_ARIA_ATTR,Re=!1!==e.ALLOW_DATA_ATTR,De=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ne=e.SAFE_FOR_TEMPLATES||!1,Fe=!1!==e.SAFE_FOR_XML,ze=e.WHOLE_DOCUMENT||!1,Be=e.RETURN_DOM||!1,Ve=e.RETURN_DOM_FRAGMENT||!1,He=e.RETURN_TRUSTED_TYPE||!1,je=e.FORCE_BODY||!1,$e=!1!==e.SANITIZE_DOM,Ye=e.SANITIZE_NAMED_PROPS||!1,Ge=!1!==e.KEEP_CONTENT,qe=e.IN_PLACE||!1,Se=e.ALLOWED_URI_REGEXP||K,it=e.NAMESPACE||rt,lt=e.MATHML_TEXT_INTEGRATION_POINTS||lt,ct=e.HTML_INTEGRATION_POINTS||ct,ke=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(Re=!1),Ve&&(Be=!0),We&&(Ee=C({},U),Me=[],!0===We.html&&(C(Ee,R),C(Me,j)),!0===We.svg&&(C(Ee,D),C(Me,B),C(Me,H)),!0===We.svgFilters&&(C(Ee,L),C(Me,B),C(Me,H)),!0===We.mathMl&&(C(Ee,F),C(Me,V),C(Me,H))),e.ADD_TAGS&&("function"===typeof e.ADD_TAGS?Pe.tagCheck=e.ADD_TAGS:(Ee===Te&&(Ee=P(Ee)),C(Ee,e.ADD_TAGS,pt))),e.ADD_ATTR&&("function"===typeof e.ADD_ATTR?Pe.attributeCheck=e.ADD_ATTR:(Me===Ae&&(Me=P(Me)),C(Me,e.ADD_ATTR,pt))),e.ADD_URI_SAFE_ATTR&&C(Qe,e.ADD_URI_SAFE_ATTR,pt),e.FORBID_CONTENTS&&(Ke===Ze&&(Ke=P(Ke)),C(Ke,e.FORBID_CONTENTS,pt)),e.ADD_FORBID_CONTENTS&&(Ke===Ze&&(Ke=P(Ke)),C(Ke,e.ADD_FORBID_CONTENTS,pt)),Ge&&(Ee["#text"]=!0),ze&&C(Ee,["html","head","body"]),Ee.table&&(C(Ee,["tbody"]),delete Ce.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw M('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw M('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ae=e.TRUSTED_TYPES_POLICY,le=ae.createHTML("")}else void 0===ae&&(ae=function(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(o){return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(Y,s)),null!==ae&&"string"===typeof le&&(le=ae.createHTML(""));l&&l(e),ft=e}},vt=C({},[...D,...L,...N]),_t=C({},[...F,...z]),bt=function(e){g(n.removed,{element:e});try{Q(e).removeChild(e)}catch(t){W(e)}},wt=function(e,t){try{g(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(r){g(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Be||Ve)try{bt(t)}catch(r){}else try{t.setAttribute(e,"")}catch(r){}},xt=function(e){let t=null,n=null;if(je)e="<remove></remove>"+e;else{const t=b(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ht&&it===rt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=ae?ae.createHTML(e):e;if(it===rt)try{t=(new $).parseFromString(r,ht)}catch(s){}if(!t||!t.documentElement){t=ce.createDocument(it,"template",null);try{t.documentElement.innerHTML=ot?le:r}catch(s){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),it===rt?de.call(t,ze?"html":"body")[0]:ze?t.documentElement:o},St=function(e){return ue.call(e.ownerDocument||e,e,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},Et=function(e){return e instanceof I&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof k)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)},Tt=function(e){return"function"===typeof h&&e instanceof h};function Mt(e,t,r){p(e,e=>{e.call(n,t,r,ft)})}const At=function(e){let t=null;if(Mt(fe.beforeSanitizeElements,e,null),Et(e))return bt(e),!0;const r=pt(e.nodeName);if(Mt(fe.uponSanitizeElement,e,{tagName:r,allowedTags:Ee}),Fe&&e.hasChildNodes()&&!Tt(e.firstElementChild)&&T(/<[/\w!]/g,e.innerHTML)&&T(/<[/\w!]/g,e.textContent))return bt(e),!0;if(e.nodeType===re)return bt(e),!0;if(Fe&&e.nodeType===ie&&T(/<[/\w]/g,e.data))return bt(e),!0;if(!(Pe.tagCheck instanceof Function&&Pe.tagCheck(r))&&(!Ee[r]||Ce[r])){if(!Ce[r]&&Ct(r)){if(ke.tagNameCheck instanceof RegExp&&T(ke.tagNameCheck,r))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(r))return!1}if(Ge&&!Ke[r]){const t=Q(e)||e.parentNode,n=J(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const i=q(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,Z(e))}}}return bt(e),!0}return e instanceof d&&!function(e){let t=Q(e);t&&t.tagName||(t={namespaceURI:it,tagName:"template"});const n=v(e.tagName),r=v(t.tagName);return!!st[e.namespaceURI]&&(e.namespaceURI===nt?t.namespaceURI===rt?"svg"===n:t.namespaceURI===tt?"svg"===n&&("annotation-xml"===r||lt[r]):Boolean(vt[n]):e.namespaceURI===tt?t.namespaceURI===rt?"math"===n:t.namespaceURI===nt?"math"===n&&ct[r]:Boolean(_t[n]):e.namespaceURI===rt?!(t.namespaceURI===nt&&!ct[r])&&!(t.namespaceURI===tt&&!lt[r])&&!_t[n]&&(ut[n]||!vt[n]):!("application/xhtml+xml"!==ht||!st[e.namespaceURI]))}(e)?(bt(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!T(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ne&&e.nodeType===ne&&(t=e.textContent,p([me,ge,ye],e=>{t=w(t,e," ")}),e.textContent!==t&&(g(n.removed,{element:e.cloneNode()}),e.textContent=t)),Mt(fe.afterSanitizeElements,e,null),!1):(bt(e),!0)},kt=function(e,t,n){if($e&&("id"===t||"name"===t)&&(n in i||n in mt))return!1;if(Re&&!Ie[t]&&T(ve,t));else if(Oe&&T(_e,t));else if(Pe.attributeCheck instanceof Function&&Pe.attributeCheck(t,e));else if(!Me[t]||Ie[t]){if(!(Ct(e)&&(ke.tagNameCheck instanceof RegExp&&T(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&T(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t,e))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&T(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Qe[t]);else if(T(Se,w(n,we,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==x(n,"data:")||!Je[e]){if(De&&!T(be,w(n,we,"")));else if(n)return!1}else;return!0},Ct=function(e){return"annotation-xml"!==e&&b(e,xe)},It=function(e){Mt(fe.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Et(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Me,forceKeepAttr:void 0};let i=t.length;for(;i--;){const s=t[i],{name:a,namespaceURI:l,value:c}=s,u=pt(a),h=c;let d="value"===a?h:S(h);if(r.attrName=u,r.attrValue=d,r.keepAttr=!0,r.forceKeepAttr=void 0,Mt(fe.uponSanitizeAttribute,e,r),d=r.attrValue,!Ye||"id"!==u&&"name"!==u||(wt(a,e),d="user-content-"+d),Fe&&T(/((--!?|])>)|<\/(style|title|textarea)/i,d)){wt(a,e);continue}if("attributename"===u&&b(d,"href")){wt(a,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){wt(a,e);continue}if(!Le&&T(/\/>/i,d)){wt(a,e);continue}Ne&&p([me,ge,ye],e=>{d=w(d,e," ")});const f=pt(e.nodeName);if(kt(f,u,d)){if(ae&&"object"===typeof Y&&"function"===typeof Y.getAttributeType)if(l);else switch(Y.getAttributeType(f,u)){case"TrustedHTML":d=ae.createHTML(d);break;case"TrustedScriptURL":d=ae.createScriptURL(d)}if(d!==h)try{l?e.setAttributeNS(l,a,d):e.setAttribute(a,d),Et(e)?bt(e):m(n.removed)}catch(o){wt(a,e)}}else wt(a,e)}Mt(fe.afterSanitizeAttributes,e,null)},Pt=function e(t){let n=null;const r=St(t);for(Mt(fe.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)Mt(fe.uponSanitizeShadowNode,n,null),At(n),It(n),n.content instanceof a&&e(n.content);Mt(fe.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,i=null,s=null,l=null;if(ot=!e,ot&&(e="\x3c!--\x3e"),"string"!==typeof e&&!Tt(e)){if("function"!==typeof e.toString)throw M("toString is not a function");if("string"!==typeof(e=e.toString()))throw M("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Ue||yt(t),n.removed=[],"string"===typeof e&&(qe=!1),qe){if(e.nodeName){const t=pt(e.nodeName);if(!Ee[t]||Ce[t])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof h)r=xt("\x3c!----\x3e"),i=r.ownerDocument.importNode(e,!0),i.nodeType===te&&"BODY"===i.nodeName||"HTML"===i.nodeName?r=i:r.appendChild(i);else{if(!Be&&!Ne&&!ze&&-1===e.indexOf("<"))return ae&&He?ae.createHTML(e):e;if(r=xt(e),!r)return Be?null:He?le:""}r&&je&&bt(r.firstChild);const c=St(qe?e:r);for(;s=c.nextNode();)At(s),It(s),s.content instanceof a&&Pt(s.content);if(qe)return e;if(Be){if(Ve)for(l=he.call(r.ownerDocument);r.firstChild;)l.appendChild(r.firstChild);else l=r;return(Me.shadowroot||Me.shadowrootmode)&&(l=pe.call(o,l,!0)),l}let u=ze?r.outerHTML:r.innerHTML;return ze&&Ee["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&T(X,r.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+u),Ne&&p([me,ge,ye],e=>{u=w(u,e," ")}),ae&&He?ae.createHTML(u):u},n.setConfig=function(){yt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ue=!0},n.clearConfig=function(){ft=null,Ue=!1},n.isValidAttribute=function(e,t,n){ft||yt({});const r=pt(e),i=pt(t);return kt(r,i,n)},n.addHook=function(e,t){"function"===typeof t&&g(fe[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=f(fe[e],t);return-1===n?void 0:y(fe[e],n,1)[0]}return m(fe[e])},n.removeHooks=function(e){fe[e]=[]},n.removeAllHooks=function(){fe={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}()},99798(e,t,n){"use strict";n.d(t,{A:()=>h});var r=n(96540),i=n(13674),o=n(17726),s=n(53356),a=n(24337),l=n(30301),c=n(74848);const u={entering:{opacity:1},entered:{opacity:1}},h=r.forwardRef(function(e,t){const n=(0,s.A)(),h={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:d,appear:p=!0,children:f,easing:m,in:g,onEnter:y,onEntered:v,onEntering:_,onExit:b,onExited:w,onExiting:x,style:S,timeout:E=h,TransitionComponent:T=i.Ay,...M}=e,A=r.useRef(null),k=(0,l.A)(A,(0,o.A)(f),t),C=e=>t=>{if(e){const n=A.current;void 0===t?e(n):e(n,t)}},I=C(_),P=C((e,t)=>{(0,a.q)(e);const r=(0,a.c)({style:S,timeout:E,easing:m},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),y&&y(e,t)}),O=C(v),R=C(x),D=C(e=>{const t=(0,a.c)({style:S,timeout:E,easing:m},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),b&&b(e)}),L=C(w);return(0,c.jsx)(T,{appear:p,in:g,nodeRef:A,onEnter:P,onEntered:O,onEntering:I,onExit:D,onExited:L,onExiting:R,addEndListener:e=>{d&&d(A.current,e)},timeout:E,...M,children:(e,{ownerState:t,...n})=>r.cloneElement(f,{style:{opacity:0,visibility:"exited"!==e||g?void 0:"hidden",...u[e],...S,...f.props.style},ref:k,...n})})})}}]);